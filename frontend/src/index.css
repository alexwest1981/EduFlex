@tailwind base;
@tailwind components;
@tailwind utilities;

/* Fix for OnlyOffice Modal Overlap */
.onlyoffice-editor {
  position: fixed !important;
  z-index: 999999 !important;
  isolation: isolate; /* Create new stacking context */
}

/* Force OnlyOffice iframe to be visible */
.onlyoffice-editor iframe,
.onlyoffice-editor [id^="onlyoffice-editor-"],
.onlyoffice-editor div[id^="onlyoffice-editor-"] iframe {
  position: relative !important;
  z-index: 1 !important;
  width: 100% !important;
  height: 100% !important;
  border: none !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Ensure the placeholder takes full space */
.onlyoffice-editor > div > div:last-child {
  position: absolute !important;
  inset: 0 !important;
  z-index: 1 !important;
}

/* Hide loader when iframe is present */
.onlyoffice-editor iframe ~ div[class*="absolute"] {
  display: none !important;
}

/* --- GLOBALA REGLER --- */
body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    /* Grundfärger */
    @apply bg-gray-50 text-gray-900 transition-colors duration-300;

    /* DARK MODE */
    @apply dark:bg-[#131314] dark:text-[#E3E3E3];
}

/* --- GLOBALA INPUT-REGLER --- */
@layer base {

    input[type="text"],
    input[type="password"],
    input[type="email"],
    input[type="number"],
    input[type="search"],
    input[type="tel"],
    textarea,
    select {
        @apply w-full px-4 py-2.5 border rounded-lg outline-none transition-all;
        @apply bg-white border-gray-300 text-gray-900 placeholder-gray-500;
        @apply focus:ring-1 focus:ring-black focus:border-black;

        /* MÖRKT LÄGE */
        @apply dark:bg-[#282a2c] dark:border-transparent dark:text-white dark:placeholder-gray-500;
        @apply dark:focus:bg-[#303336] dark:focus:border-gray-500 dark:focus:ring-1 dark:focus:ring-gray-500;
    }
}

/* --- DESIGN SYSTEM EFFECTS --- */

/* Glassmorphism Effect for Cards */
html[data-use-blur="true"] .bg-white {
    background-color: var(--card-background) !important;
    backdrop-filter: var(--card-backdrop);
    border: var(--card-border);
}

html[data-use-blur="true"] .dark .bg-white,
html[data-use-blur="true"] .dark .dark\:bg-\[\#1e1f20\] {
    background-color: var(--card-background-dark) !important;
    border: var(--card-border-dark);
}

/* Brutalism Borders */
html[data-use-blur="false"][data-use-glow="false"] {
    /* Specific overrides for Brutalism if needed */
}

/* 3D Perspective for Landing Page */
.perspectives-1000 {
    perspective: 1000px;
}

/* --- ANIMATIONS --- */
.fade-in-section {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    will-change: opacity, transform;
}

.fade-in-section.animate-in {
    opacity: 1;
    transform: translateY(0);
}

.stagger-animation > * {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

.animate-in .stagger-animation > *,
.fade-in-section.animate-in > .stagger-animation > *,
.stagger-animation.animate-in > * {
    opacity: 1;
    transform: translateY(0);
}

/* Stagger delays */
.stagger-animation > *:nth-child(1) { transition-delay: 0.1s; }
.stagger-animation > *:nth-child(2) { transition-delay: 0.2s; }
.stagger-animation > *:nth-child(3) { transition-delay: 0.3s; }
.stagger-animation > *:nth-child(4) { transition-delay: 0.4s; }
.stagger-animation > *:nth-child(5) { transition-delay: 0.5s; }