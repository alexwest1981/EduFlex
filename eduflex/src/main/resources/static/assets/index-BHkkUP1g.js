var tee=Object.defineProperty;var ree=(t,e,r)=>e in t?tee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var nee=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var st=(t,e,r)=>ree(t,typeof e!="symbol"?e+"":e,r);var Alt=nee((Is,Ds)=>{function aee(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function see(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var EF={exports:{}},S2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iee=Symbol.for("react.transitional.element"),oee=Symbol.for("react.fragment");function CF(t,e,r){var n=null;if(r!==void 0&&(n=""+r),e.key!==void 0&&(n=""+e.key),"key"in e){r={};for(var s in e)s!=="key"&&(r[s]=e[s])}else r=e;return e=r.ref,{$$typeof:iee,type:t,key:n,ref:e!==void 0?e:null,props:r}}S2.Fragment=oee;S2.jsx=CF;S2.jsxs=CF;EF.exports=S2;var a=EF.exports,TF={exports:{}},A2={},OF={exports:{}},IF={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,L){var K=D.length;D.push(L);e:for(;0<K;){var $=K-1>>>1,R=D[$];if(0<s(R,L))D[$]=L,D[K]=R,K=$;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var L=D[0],K=D.pop();if(K!==L){D[0]=K;e:for(var $=0,R=D.length,Y=R>>>1;$<Y;){var ee=2*($+1)-1,B=D[ee],U=ee+1,V=D[U];if(0>s(B,K))U<R&&0>s(V,B)?(D[$]=V,D[U]=K,$=U):(D[$]=B,D[ee]=K,$=ee);else if(U<R&&0>s(V,K))D[$]=V,D[U]=K,$=U;else break e}}return L}function s(D,L){var K=D.sortIndex-L.sortIndex;return K!==0?K:D.id-L.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,g=!1,x=!1,m=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function w(D){for(var L=r(d);L!==null;){if(L.callback===null)n(d);else if(L.startTime<=D)n(d),L.sortIndex=L.expirationTime,e(c,L);else break;L=r(d)}}function k(D){if(m=!1,w(D),!x)if(r(c)!==null)x=!0,j||(j=!0,C());else{var L=r(d);L!==null&&F(k,L.startTime-D)}}var j=!1,_=-1,S=5,A=-1;function T(){return p?!0:!(t.unstable_now()-A<S)}function E(){if(p=!1,j){var D=t.unstable_now();A=D;var L=!0;try{e:{x=!1,m&&(m=!1,v(_),_=-1),g=!0;var K=f;try{t:{for(w(D),h=r(c);h!==null&&!(h.expirationTime>D&&T());){var $=h.callback;if(typeof $=="function"){h.callback=null,f=h.priorityLevel;var R=$(h.expirationTime<=D);if(D=t.unstable_now(),typeof R=="function"){h.callback=R,w(D),L=!0;break t}h===r(c)&&n(c),w(D)}else n(c);h=r(c)}if(h!==null)L=!0;else{var Y=r(d);Y!==null&&F(k,Y.startTime-D),L=!1}}break e}finally{h=null,f=K,g=!1}L=void 0}}finally{L?C():j=!1}}}var C;if(typeof y=="function")C=function(){y(E)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,M=z.port2;z.port1.onmessage=E,C=function(){M.postMessage(null)}}else C=function(){b(E,0)};function F(D,L){_=b(function(){D(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var K=f;f=L;try{return D()}finally{f=K}},t.unstable_requestPaint=function(){p=!0},t.unstable_runWithPriority=function(D,L){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var K=f;f=D;try{return L()}finally{f=K}},t.unstable_scheduleCallback=function(D,L,K){var $=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?$+K:$):K=$,D){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=K+R,D={id:u++,callback:L,priorityLevel:D,startTime:K,expirationTime:R,sortIndex:-1},K>$?(D.sortIndex=K,e(d,D),r(c)===null&&D===r(d)&&(m?(v(_),_=-1):m=!0,F(k,K-$))):(D.sortIndex=R,e(c,D),x||g||(x=!0,j||(j=!0,C()))),D},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(D){var L=f;return function(){var K=f;f=L;try{return D.apply(this,arguments)}finally{f=K}}}})(IF);OF.exports=IF;var lee=OF.exports,DF={exports:{}},$t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rC=Symbol.for("react.transitional.element"),cee=Symbol.for("react.portal"),dee=Symbol.for("react.fragment"),uee=Symbol.for("react.strict_mode"),hee=Symbol.for("react.profiler"),fee=Symbol.for("react.consumer"),gee=Symbol.for("react.context"),mee=Symbol.for("react.forward_ref"),pee=Symbol.for("react.suspense"),xee=Symbol.for("react.memo"),MF=Symbol.for("react.lazy"),bee=Symbol.for("react.activity"),$I=Symbol.iterator;function yee(t){return t===null||typeof t!="object"?null:(t=$I&&t[$I]||t["@@iterator"],typeof t=="function"?t:null)}var LF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RF=Object.assign,PF={};function Qg(t,e,r){this.props=t,this.context=e,this.refs=PF,this.updater=r||LF}Qg.prototype.isReactComponent={};Qg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zF(){}zF.prototype=Qg.prototype;function nC(t,e,r){this.props=t,this.context=e,this.refs=PF,this.updater=r||LF}var aC=nC.prototype=new zF;aC.constructor=nC;RF(aC,Qg.prototype);aC.isPureReactComponent=!0;var FI=Array.isArray;function IS(){}var tn={H:null,A:null,T:null,S:null},$F=Object.prototype.hasOwnProperty;function sC(t,e,r){var n=r.ref;return{$$typeof:rC,type:t,key:e,ref:n!==void 0?n:null,props:r}}function vee(t,e){return sC(t.type,e,t.props)}function iC(t){return typeof t=="object"&&t!==null&&t.$$typeof===rC}function kee(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var BI=/\/+/g;function Hj(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kee(""+t.key):e.toString(36)}function wee(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(IS,IS):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Qh(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rC:case cee:o=!0;break;case MF:return o=t._init,Qh(o(t._payload),e,r,n,s)}}if(o)return s=s(t),o=n===""?"."+Hj(t,0):n,FI(s)?(r="",o!=null&&(r=o.replace(BI,"$&/")+"/"),Qh(s,e,r,"",function(d){return d})):s!=null&&(iC(s)&&(s=vee(s,r+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(BI,"$&/")+"/")+o)),e.push(s)),1;o=0;var l=n===""?".":n+":";if(FI(t))for(var c=0;c<t.length;c++)n=t[c],i=l+Hj(n,c),o+=Qh(n,e,r,i,s);else if(c=yee(t),typeof c=="function")for(t=c.call(t),c=0;!(n=t.next()).done;)n=n.value,i=l+Hj(n,c++),o+=Qh(n,e,r,i,s);else if(i==="object"){if(typeof t.then=="function")return Qh(wee(t),e,r,n,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function ay(t,e,r){if(t==null)return t;var n=[],s=0;return Qh(t,n,"","",function(i){return e.call(r,i,s++)}),n}function jee(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var UI=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Nee={map:ay,forEach:function(t,e,r){ay(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ay(t,function(){e++}),e},toArray:function(t){return ay(t,function(e){return e})||[]},only:function(t){if(!iC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$t.Activity=bee;$t.Children=Nee;$t.Component=Qg;$t.Fragment=dee;$t.Profiler=hee;$t.PureComponent=nC;$t.StrictMode=uee;$t.Suspense=pee;$t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=tn;$t.__COMPILER_RUNTIME={__proto__:null,c:function(t){return tn.H.useMemoCache(t)}};$t.cache=function(t){return function(){return t.apply(null,arguments)}};$t.cacheSignal=function(){return null};$t.cloneElement=function(t,e,r){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var n=RF({},t.props),s=t.key;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)!$F.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(n[i]=e[i]);var i=arguments.length-2;if(i===1)n.children=r;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];n.children=o}return sC(t.type,s,n)};$t.createContext=function(t){return t={$$typeof:gee,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:fee,_context:t},t};$t.createElement=function(t,e,r){var n,s={},i=null;if(e!=null)for(n in e.key!==void 0&&(i=""+e.key),e)$F.call(e,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return sC(t,i,s)};$t.createRef=function(){return{current:null}};$t.forwardRef=function(t){return{$$typeof:mee,render:t}};$t.isValidElement=iC;$t.lazy=function(t){return{$$typeof:MF,_payload:{_status:-1,_result:t},_init:jee}};$t.memo=function(t,e){return{$$typeof:xee,type:t,compare:e===void 0?null:e}};$t.startTransition=function(t){var e=tn.T,r={};tn.T=r;try{var n=t(),s=tn.S;s!==null&&s(r,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(IS,UI)}catch(i){UI(i)}finally{e!==null&&r.types!==null&&(e.types=r.types),tn.T=e}};$t.unstable_useCacheRefresh=function(){return tn.H.useCacheRefresh()};$t.use=function(t){return tn.H.use(t)};$t.useActionState=function(t,e,r){return tn.H.useActionState(t,e,r)};$t.useCallback=function(t,e){return tn.H.useCallback(t,e)};$t.useContext=function(t){return tn.H.useContext(t)};$t.useDebugValue=function(){};$t.useDeferredValue=function(t,e){return tn.H.useDeferredValue(t,e)};$t.useEffect=function(t,e){return tn.H.useEffect(t,e)};$t.useEffectEvent=function(t){return tn.H.useEffectEvent(t)};$t.useId=function(){return tn.H.useId()};$t.useImperativeHandle=function(t,e,r){return tn.H.useImperativeHandle(t,e,r)};$t.useInsertionEffect=function(t,e){return tn.H.useInsertionEffect(t,e)};$t.useLayoutEffect=function(t,e){return tn.H.useLayoutEffect(t,e)};$t.useMemo=function(t,e){return tn.H.useMemo(t,e)};$t.useOptimistic=function(t,e){return tn.H.useOptimistic(t,e)};$t.useReducer=function(t,e,r){return tn.H.useReducer(t,e,r)};$t.useRef=function(t){return tn.H.useRef(t)};$t.useState=function(t){return tn.H.useState(t)};$t.useSyncExternalStore=function(t,e,r){return tn.H.useSyncExternalStore(t,e,r)};$t.useTransition=function(){return tn.H.useTransition()};$t.version="19.2.4";DF.exports=$t;var N=DF.exports;const ae=Vt(N),_ee=aee({__proto__:null,default:ae},[N]);var FF={exports:{}},Ya={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var See=N;function BF(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function jc(){}var $a={d:{f:jc,r:function(){throw Error(BF(522))},D:jc,C:jc,L:jc,m:jc,X:jc,S:jc,M:jc},p:0,findDOMNode:null},Aee=Symbol.for("react.portal");function Eee(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Aee,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}var Pp=See.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function E2(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ya.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$a;Ya.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(BF(299));return Eee(t,e,null,r)};Ya.flushSync=function(t){var e=Pp.T,r=$a.p;try{if(Pp.T=null,$a.p=2,t)return t()}finally{Pp.T=e,$a.p=r,$a.d.f()}};Ya.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,$a.d.C(t,e))};Ya.prefetchDNS=function(t){typeof t=="string"&&$a.d.D(t)};Ya.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var r=e.as,n=E2(r,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;r==="style"?$a.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:i}):r==="script"&&$a.d.X(t,{crossOrigin:n,integrity:s,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ya.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var r=E2(e.as,e.crossOrigin);$a.d.M(t,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&$a.d.M(t)};Ya.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var r=e.as,n=E2(r,e.crossOrigin);$a.d.L(t,r,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ya.preloadModule=function(t,e){if(typeof t=="string")if(e){var r=E2(e.as,e.crossOrigin);$a.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else $a.d.m(t)};Ya.requestFormReset=function(t){$a.d.r(t)};Ya.unstable_batchedUpdates=function(t,e){return t(e)};Ya.useFormState=function(t,e,r){return Pp.H.useFormState(t,e,r)};Ya.useFormStatus=function(){return Pp.H.useHostTransitionStatus()};Ya.version="19.2.4";function UF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UF)}catch(t){console.error(t)}}UF(),FF.exports=Ya;var KF=FF.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=lee,GF=N,Cee=KF;function ze(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qF(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qx(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function VF(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function HF(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function KI(t){if(Qx(t)!==t)throw Error(ze(188))}function Tee(t){var e=t.alternate;if(!e){if(e=Qx(t),e===null)throw Error(ze(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return KI(s),t;if(i===n)return KI(s),e;i=i.sibling}throw Error(ze(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(ze(189))}}if(r.alternate!==n)throw Error(ze(190))}if(r.tag!==3)throw Error(ze(188));return r.stateNode.current===r?t:e}function WF(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=WF(t),e!==null)return e;t=t.sibling}return null}var nn=Object.assign,Oee=Symbol.for("react.element"),sy=Symbol.for("react.transitional.element"),Sp=Symbol.for("react.portal"),uf=Symbol.for("react.fragment"),XF=Symbol.for("react.strict_mode"),DS=Symbol.for("react.profiler"),YF=Symbol.for("react.consumer"),El=Symbol.for("react.context"),oC=Symbol.for("react.forward_ref"),MS=Symbol.for("react.suspense"),LS=Symbol.for("react.suspense_list"),lC=Symbol.for("react.memo"),Oc=Symbol.for("react.lazy"),RS=Symbol.for("react.activity"),Iee=Symbol.for("react.memo_cache_sentinel"),GI=Symbol.iterator;function Gm(t){return t===null||typeof t!="object"?null:(t=GI&&t[GI]||t["@@iterator"],typeof t=="function"?t:null)}var Dee=Symbol.for("react.client.reference");function PS(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Dee?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case uf:return"Fragment";case DS:return"Profiler";case XF:return"StrictMode";case MS:return"Suspense";case LS:return"SuspenseList";case RS:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Sp:return"Portal";case El:return t.displayName||"Context";case YF:return(t._context.displayName||"Context")+".Consumer";case oC:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lC:return e=t.displayName||null,e!==null?e:PS(t.type)||"Memo";case Oc:e=t._payload,t=t._init;try{return PS(t(e))}catch{}}return null}var Ap=Array.isArray,Ct=GF.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yr=Cee.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_u={pending:!1,data:null,method:null,action:null},zS=[],hf=-1;function al(t){return{current:t}}function aa(t){0>hf||(t.current=zS[hf],zS[hf]=null,hf--)}function Vr(t,e){hf++,zS[hf]=t.current,t.current=e}var Do=al(null),v0=al(null),nd=al(null),Qv=al(null);function Jv(t,e){switch(Vr(nd,e),Vr(v0,t),Vr(Do,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Y6(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Y6(e),t=pU(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}aa(Do),Vr(Do,t)}function eg(){aa(Do),aa(v0),aa(nd)}function $S(t){t.memoizedState!==null&&Vr(Qv,t);var e=Do.current,r=pU(e,t.type);e!==r&&(Vr(v0,t),Vr(Do,r))}function e1(t){v0.current===t&&(aa(Do),aa(v0)),Qv.current===t&&(aa(Qv),O0._currentValue=_u)}var Wj,qI;function su(t){if(Wj===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Wj=e&&e[1]||"",qI=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wj+t+qI}var Xj=!1;function Yj(t,e){if(!t||Xj)return"";Xj=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(g){var f=g}Reflect.construct(t,[],h)}else{try{h.call()}catch(g){f=g}t.call(h.prototype)}}else{try{throw Error()}catch(g){f=g}(h=t())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(g){if(g&&f&&typeof g.stack=="string")return[g.stack,f.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),o=i[0],l=i[1];if(o&&l){var c=o.split(`
`),d=l.split(`
`);for(s=n=0;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;for(;s<d.length&&!d[s].includes("DetermineComponentFrameRoot");)s++;if(n===c.length||s===d.length)for(n=c.length-1,s=d.length-1;1<=n&&0<=s&&c[n]!==d[s];)s--;for(;1<=n&&0<=s;n--,s--)if(c[n]!==d[s]){if(n!==1||s!==1)do if(n--,s--,0>s||c[n]!==d[s]){var u=`
`+c[n].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=n&&0<=s);break}}}finally{Xj=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?su(r):""}function Mee(t,e){switch(t.tag){case 26:case 27:case 5:return su(t.type);case 16:return su("Lazy");case 13:return t.child!==e&&e!==null?su("Suspense Fallback"):su("Suspense");case 19:return su("SuspenseList");case 0:case 15:return Yj(t.type,!1);case 11:return Yj(t.type.render,!1);case 1:return Yj(t.type,!0);case 31:return su("Activity");default:return""}}function VI(t){try{var e="",r=null;do e+=Mee(t,r),r=t,t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var FS=Object.prototype.hasOwnProperty,cC=Xn.unstable_scheduleCallback,Zj=Xn.unstable_cancelCallback,Lee=Xn.unstable_shouldYield,Ree=Xn.unstable_requestPaint,Ms=Xn.unstable_now,Pee=Xn.unstable_getCurrentPriorityLevel,ZF=Xn.unstable_ImmediatePriority,QF=Xn.unstable_UserBlockingPriority,t1=Xn.unstable_NormalPriority,zee=Xn.unstable_LowPriority,JF=Xn.unstable_IdlePriority,$ee=Xn.log,Fee=Xn.unstable_setDisableYieldValue,Jx=null,Ls=null;function Gc(t){if(typeof $ee=="function"&&Fee(t),Ls&&typeof Ls.setStrictMode=="function")try{Ls.setStrictMode(Jx,t)}catch{}}var Rs=Math.clz32?Math.clz32:Kee,Bee=Math.log,Uee=Math.LN2;function Kee(t){return t>>>=0,t===0?32:31-(Bee(t)/Uee|0)|0}var iy=256,oy=262144,ly=4194304;function iu(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function C2(t,e,r){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var l=n&134217727;return l!==0?(n=l&~i,n!==0?s=iu(n):(o&=l,o!==0?s=iu(o):r||(r=l&~t,r!==0&&(s=iu(r))))):(l=n&~i,l!==0?s=iu(l):o!==0?s=iu(o):r||(r=n&~t,r!==0&&(s=iu(r)))),s===0?0:e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===32&&(r&4194048)!==0)?e:s}function eb(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Gee(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e7(){var t=ly;return ly<<=1,!(ly&62914560)&&(ly=4194304),t}function Qj(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function tb(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function qee(t,e,r,n,s,i){var o=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(r=o&~r;0<r;){var u=31-Rs(r),h=1<<u;l[u]=0,c[u]=-1;var f=d[u];if(f!==null)for(d[u]=null,u=0;u<f.length;u++){var g=f[u];g!==null&&(g.lane&=-536870913)}r&=~h}n!==0&&t7(t,n,0),i!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=i&~(o&~e))}function t7(t,e,r){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-Rs(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|r&261930}function r7(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Rs(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}function n7(t,e){var r=e&-e;return r=r&42?1:dC(r),r&(t.suspendedLanes|e)?0:r}function dC(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function uC(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function a7(){var t=yr.p;return t!==0?t:(t=window.event,t===void 0?32:AU(t.type))}function HI(t,e){var r=yr.p;try{return yr.p=t,e()}finally{yr.p=r}}var Od=Math.random().toString(36).slice(2),ma="__reactFiber$"+Od,us="__reactProps$"+Od,Jg="__reactContainer$"+Od,BS="__reactEvents$"+Od,Vee="__reactListeners$"+Od,Hee="__reactHandles$"+Od,WI="__reactResources$"+Od,rb="__reactMarker$"+Od;function hC(t){delete t[ma],delete t[us],delete t[BS],delete t[Vee],delete t[Hee]}function ff(t){var e=t[ma];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Jg]||r[ma]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=tD(t);t!==null;){if(r=t[ma])return r;t=tD(t)}return e}t=r,r=t.parentNode}return null}function em(t){if(t=t[ma]||t[Jg]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Ep(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(ze(33))}function Lf(t){var e=t[WI];return e||(e=t[WI]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function ra(t){t[rb]=!0}var s7=new Set,i7={};function ih(t,e){tg(t,e),tg(t+"Capture",e)}function tg(t,e){for(i7[t]=e,t=0;t<e.length;t++)s7.add(e[t])}var Wee=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),XI={},YI={};function Xee(t){return FS.call(YI,t)?!0:FS.call(XI,t)?!1:Wee.test(t)?YI[t]=!0:(XI[t]=!0,!1)}function xv(t,e,r){if(Xee(e))if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var n=e.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+r)}}function cy(t,e,r){if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+r)}}function pl(t,e,r,n){if(n===null)t.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(e,r,""+n)}}function Zs(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o7(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Yee(t,e,r){var n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function US(t){if(!t._valueTracker){var e=o7(t)?"checked":"value";t._valueTracker=Yee(t,e,""+t[e])}}function l7(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=o7(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function r1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Zee=/[\n"\\]/g;function ni(t){return t.replace(Zee,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function KS(t,e,r,n,s,i,o,l){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Zs(e)):t.value!==""+Zs(e)&&(t.value=""+Zs(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?GS(t,o,Zs(e)):r!=null?GS(t,o,Zs(r)):n!=null&&t.removeAttribute("value"),s==null&&i!=null&&(t.defaultChecked=!!i),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Zs(l):t.removeAttribute("name")}function c7(t,e,r,n,s,i,o,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||r!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){US(t);return}r=r!=null?""+Zs(r):"",e=e!=null?""+Zs(e):r,l||e===t.value||(t.value=e),t.defaultValue=e}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,t.checked=l?t.checked:!!n,t.defaultChecked=!!n,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),US(t)}function GS(t,e,r){e==="number"&&r1(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Rf(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Zs(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function d7(t,e,r){if(e!=null&&(e=""+Zs(e),e!==t.value&&(t.value=e),r==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=r!=null?""+Zs(r):""}function u7(t,e,r,n){if(e==null){if(n!=null){if(r!=null)throw Error(ze(92));if(Ap(n)){if(1<n.length)throw Error(ze(93));n=n[0]}r=n}r==null&&(r=""),e=r}r=Zs(e),t.defaultValue=r,n=t.textContent,n===r&&n!==""&&n!==null&&(t.value=n),US(t)}function rg(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Qee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ZI(t,e,r){var n=e.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?n?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":n?t.setProperty(e,r):typeof r!="number"||r===0||Qee.has(e)?e==="float"?t.cssFloat=r:t[e]=(""+r).trim():t[e]=r+"px"}function h7(t,e,r){if(e!=null&&typeof e!="object")throw Error(ze(62));if(t=t.style,r!=null){for(var n in r)!r.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf("--")===0?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="");for(var s in e)n=e[s],e.hasOwnProperty(s)&&r[s]!==n&&ZI(t,s,n)}else for(var i in e)e.hasOwnProperty(i)&&ZI(t,i,e[i])}function fC(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ete=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bv(t){return ete.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Cl(){}var qS=null;function gC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gf=null,Pf=null;function QI(t){var e=em(t);if(e&&(t=e.stateNode)){var r=t[us]||null;e:switch(t=e.stateNode,e.type){case"input":if(KS(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ni(""+e)+'"][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=n[us]||null;if(!s)throw Error(ze(90));KS(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<r.length;e++)n=r[e],n.form===t.form&&l7(n)}break e;case"textarea":d7(t,r.value,r.defaultValue);break e;case"select":e=r.value,e!=null&&Rf(t,!!r.multiple,e,!1)}}}var Jj=!1;function f7(t,e,r){if(Jj)return t(e,r);Jj=!0;try{var n=t(e);return n}finally{if(Jj=!1,(gf!==null||Pf!==null)&&(B2(),gf&&(e=gf,t=Pf,Pf=gf=null,QI(e),t)))for(e=0;e<t.length;e++)QI(t[e])}}function k0(t,e){var r=t.stateNode;if(r===null)return null;var n=r[us]||null;if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ze(231,e,typeof r));return r}var Kl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),VS=!1;if(Kl)try{var qm={};Object.defineProperty(qm,"passive",{get:function(){VS=!0}}),window.addEventListener("test",qm,qm),window.removeEventListener("test",qm,qm)}catch{VS=!1}var qc=null,mC=null,yv=null;function g7(){if(yv)return yv;var t,e=mC,r=e.length,n,s="value"in qc?qc.value:qc.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return yv=s.slice(t,1<n?1-n:void 0)}function vv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dy(){return!0}function JI(){return!1}function fs(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dy:JI,this.isPropagationStopped=JI,this}return nn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=dy)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=dy)},persist:function(){},isPersistent:dy}),e}var oh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},T2=fs(oh),nb=nn({},oh,{view:0,detail:0}),tte=fs(nb),eN,tN,Vm,O2=nn({},nb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vm&&(Vm&&t.type==="mousemove"?(eN=t.screenX-Vm.screenX,tN=t.screenY-Vm.screenY):tN=eN=0,Vm=t),eN)},movementY:function(t){return"movementY"in t?t.movementY:tN}}),e6=fs(O2),rte=nn({},O2,{dataTransfer:0}),nte=fs(rte),ate=nn({},nb,{relatedTarget:0}),rN=fs(ate),ste=nn({},oh,{animationName:0,elapsedTime:0,pseudoElement:0}),ite=fs(ste),ote=nn({},oh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lte=fs(ote),cte=nn({},oh,{data:0}),t6=fs(cte),dte={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ute={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hte={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fte(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hte[t])?!!e[t]:!1}function pC(){return fte}var gte=nn({},nb,{key:function(t){if(t.key){var e=dte[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ute[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pC,charCode:function(t){return t.type==="keypress"?vv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mte=fs(gte),pte=nn({},O2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r6=fs(pte),xte=nn({},nb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pC}),bte=fs(xte),yte=nn({},oh,{propertyName:0,elapsedTime:0,pseudoElement:0}),vte=fs(yte),kte=nn({},O2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wte=fs(kte),jte=nn({},oh,{newState:0,oldState:0}),Nte=fs(jte),_te=[9,13,27,32],xC=Kl&&"CompositionEvent"in window,zp=null;Kl&&"documentMode"in document&&(zp=document.documentMode);var Ste=Kl&&"TextEvent"in window&&!zp,m7=Kl&&(!xC||zp&&8<zp&&11>=zp),n6=" ",a6=!1;function p7(t,e){switch(t){case"keyup":return _te.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x7(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mf=!1;function Ate(t,e){switch(t){case"compositionend":return x7(e);case"keypress":return e.which!==32?null:(a6=!0,n6);case"textInput":return t=e.data,t===n6&&a6?null:t;default:return null}}function Ete(t,e){if(mf)return t==="compositionend"||!xC&&p7(t,e)?(t=g7(),yv=mC=qc=null,mf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m7&&e.locale!=="ko"?null:e.data;default:return null}}var Cte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Cte[t.type]:e==="textarea"}function b7(t,e,r,n){gf?Pf?Pf.push(n):Pf=[n]:gf=n,e=v1(e,"onChange"),0<e.length&&(r=new T2("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var $p=null,w0=null;function Tte(t){fU(t,0)}function I2(t){var e=Ep(t);if(l7(e))return t}function i6(t,e){if(t==="change")return e}var y7=!1;if(Kl){var nN;if(Kl){var aN="oninput"in document;if(!aN){var o6=document.createElement("div");o6.setAttribute("oninput","return;"),aN=typeof o6.oninput=="function"}nN=aN}else nN=!1;y7=nN&&(!document.documentMode||9<document.documentMode)}function l6(){$p&&($p.detachEvent("onpropertychange",v7),w0=$p=null)}function v7(t){if(t.propertyName==="value"&&I2(w0)){var e=[];b7(e,w0,t,gC(t)),f7(Tte,e)}}function Ote(t,e,r){t==="focusin"?(l6(),$p=e,w0=r,$p.attachEvent("onpropertychange",v7)):t==="focusout"&&l6()}function Ite(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return I2(w0)}function Dte(t,e){if(t==="click")return I2(e)}function Mte(t,e){if(t==="input"||t==="change")return I2(e)}function Lte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bs=typeof Object.is=="function"?Object.is:Lte;function j0(t,e){if(Bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!FS.call(e,s)||!Bs(t[s],e[s]))return!1}return!0}function c6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d6(t,e){var r=c6(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=c6(r)}}function k7(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k7(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function w7(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=r1(t.document);e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=r1(t.document)}return e}function bC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Rte=Kl&&"documentMode"in document&&11>=document.documentMode,pf=null,HS=null,Fp=null,WS=!1;function u6(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;WS||pf==null||pf!==r1(n)||(n=pf,"selectionStart"in n&&bC(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fp&&j0(Fp,n)||(Fp=n,n=v1(HS,"onSelect"),0<n.length&&(e=new T2("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=pf)))}function Jd(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var xf={animationend:Jd("Animation","AnimationEnd"),animationiteration:Jd("Animation","AnimationIteration"),animationstart:Jd("Animation","AnimationStart"),transitionrun:Jd("Transition","TransitionRun"),transitionstart:Jd("Transition","TransitionStart"),transitioncancel:Jd("Transition","TransitionCancel"),transitionend:Jd("Transition","TransitionEnd")},sN={},j7={};Kl&&(j7=document.createElement("div").style,"AnimationEvent"in window||(delete xf.animationend.animation,delete xf.animationiteration.animation,delete xf.animationstart.animation),"TransitionEvent"in window||delete xf.transitionend.transition);function lh(t){if(sN[t])return sN[t];if(!xf[t])return t;var e=xf[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in j7)return sN[t]=e[r];return t}var N7=lh("animationend"),_7=lh("animationiteration"),S7=lh("animationstart"),Pte=lh("transitionrun"),zte=lh("transitionstart"),$te=lh("transitioncancel"),A7=lh("transitionend"),E7=new Map,XS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");XS.push("scrollEnd");function so(t,e){E7.set(t,e),ih(e,[t])}var n1=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ys=[],bf=0,yC=0;function D2(){for(var t=bf,e=yC=bf=0;e<t;){var r=Ys[e];Ys[e++]=null;var n=Ys[e];Ys[e++]=null;var s=Ys[e];Ys[e++]=null;var i=Ys[e];if(Ys[e++]=null,n!==null&&s!==null){var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}i!==0&&C7(r,s,i)}}function M2(t,e,r,n){Ys[bf++]=t,Ys[bf++]=e,Ys[bf++]=r,Ys[bf++]=n,yC|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function vC(t,e,r,n){return M2(t,e,r,n),a1(t)}function ch(t,e){return M2(t,null,null,e),a1(t)}function C7(t,e,r){t.lanes|=r;var n=t.alternate;n!==null&&(n.lanes|=r);for(var s=!1,i=t.return;i!==null;)i.childLanes|=r,n=i.alternate,n!==null&&(n.childLanes|=r),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(s=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,s&&e!==null&&(s=31-Rs(r),t=i.hiddenUpdates,n=t[s],n===null?t[s]=[e]:n.push(e),e.lane=r|536870912),i):null}function a1(t){if(50<Xp)throw Xp=0,p4=null,Error(ze(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var yf={};function Fte(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(t,e,r,n){return new Fte(t,e,r,n)}function kC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ll(t,e){var r=t.alternate;return r===null?(r=Ss(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function T7(t,e){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function kv(t,e,r,n,s,i){var o=0;if(n=t,typeof t=="function")kC(t)&&(o=1);else if(typeof t=="string")o=qre(t,r,Do.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case RS:return t=Ss(31,r,e,s),t.elementType=RS,t.lanes=i,t;case uf:return Su(r.children,s,i,e);case XF:o=8,s|=24;break;case DS:return t=Ss(12,r,e,s|2),t.elementType=DS,t.lanes=i,t;case MS:return t=Ss(13,r,e,s),t.elementType=MS,t.lanes=i,t;case LS:return t=Ss(19,r,e,s),t.elementType=LS,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case El:o=10;break e;case YF:o=9;break e;case oC:o=11;break e;case lC:o=14;break e;case Oc:o=16,n=null;break e}o=29,r=Error(ze(130,t===null?"null":typeof t,"")),n=null}return e=Ss(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Su(t,e,r,n){return t=Ss(7,t,n,e),t.lanes=r,t}function iN(t,e,r){return t=Ss(6,t,null,e),t.lanes=r,t}function O7(t){var e=Ss(18,null,null,0);return e.stateNode=t,e}function oN(t,e,r){return e=Ss(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var h6=new WeakMap;function ai(t,e){if(typeof t=="object"&&t!==null){var r=h6.get(t);return r!==void 0?r:(e={value:t,source:e,stack:VI(e)},h6.set(t,e),e)}return{value:t,source:e,stack:VI(e)}}var vf=[],kf=0,s1=null,N0=0,Qs=[],Js=0,vd=null,So=1,Ao="";function _l(t,e){vf[kf++]=N0,vf[kf++]=s1,s1=t,N0=e}function I7(t,e,r){Qs[Js++]=So,Qs[Js++]=Ao,Qs[Js++]=vd,vd=t;var n=So;t=Ao;var s=32-Rs(n)-1;n&=~(1<<s),r+=1;var i=32-Rs(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,So=1<<32-Rs(e)+s|r<<s|n,Ao=i+t}else So=1<<i|r<<s|n,Ao=t}function wC(t){t.return!==null&&(_l(t,1),I7(t,1,0))}function jC(t){for(;t===s1;)s1=vf[--kf],vf[kf]=null,N0=vf[--kf],vf[kf]=null;for(;t===vd;)vd=Qs[--Js],Qs[Js]=null,Ao=Qs[--Js],Qs[Js]=null,So=Qs[--Js],Qs[Js]=null}function D7(t,e){Qs[Js++]=So,Qs[Js++]=Ao,Qs[Js++]=vd,So=e.id,Ao=e.overflow,vd=t}var pa=null,en=null,ir=!1,ad=null,si=!1,YS=Error(ze(519));function kd(t){var e=Error(ze(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _0(ai(e,t)),YS}function f6(t){var e=t.stateNode,r=t.type,n=t.memoizedProps;switch(e[ma]=t,e[us]=n,r){case"dialog":Zt("cancel",e),Zt("close",e);break;case"iframe":case"object":case"embed":Zt("load",e);break;case"video":case"audio":for(r=0;r<C0.length;r++)Zt(C0[r],e);break;case"source":Zt("error",e);break;case"img":case"image":case"link":Zt("error",e),Zt("load",e);break;case"details":Zt("toggle",e);break;case"input":Zt("invalid",e),c7(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Zt("invalid",e);break;case"textarea":Zt("invalid",e),u7(e,n.value,n.defaultValue,n.children)}r=n.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||e.textContent===""+r||n.suppressHydrationWarning===!0||mU(e.textContent,r)?(n.popover!=null&&(Zt("beforetoggle",e),Zt("toggle",e)),n.onScroll!=null&&Zt("scroll",e),n.onScrollEnd!=null&&Zt("scrollend",e),n.onClick!=null&&(e.onclick=Cl),e=!0):e=!1,e||kd(t,!0)}function g6(t){for(pa=t.return;pa;)switch(pa.tag){case 5:case 31:case 13:si=!1;return;case 27:case 3:si=!0;return;default:pa=pa.return}}function Ph(t){if(t!==pa)return!1;if(!ir)return g6(t),ir=!0,!1;var e=t.tag,r;if((r=e!==3&&e!==27)&&((r=e===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||k4(t.type,t.memoizedProps)),r=!r),r&&en&&kd(t),g6(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ze(317));en=eD(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ze(317));en=eD(t)}else e===27?(e=en,Id(t.type)?(t=_4,_4=null,en=t):en=e):en=pa?mi(t.stateNode.nextSibling):null;return!0}function zu(){en=pa=null,ir=!1}function lN(){var t=ad;return t!==null&&(ss===null?ss=t:ss.push.apply(ss,t),ad=null),t}function _0(t){ad===null?ad=[t]:ad.push(t)}var ZS=al(null),dh=null,Tl=null;function Lc(t,e,r){Vr(ZS,e._currentValue),e._currentValue=r}function Rl(t){t._currentValue=ZS.current,aa(ZS)}function QS(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function JS(t,e,r,n){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var i=s.dependencies;if(i!==null){var o=s.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=s;for(var c=0;c<e.length;c++)if(l.context===e[c]){i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),QS(i.return,r,t),n||(o=null);break e}i=l.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(ze(341));o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),QS(o,r,t),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function tm(t,e,r,n){t=null;for(var s=e,i=!1;s!==null;){if(!i){if(s.flags&524288)i=!0;else if(s.flags&262144)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(ze(387));if(o=o.memoizedProps,o!==null){var l=s.type;Bs(s.pendingProps.value,o.value)||(t!==null?t.push(l):t=[l])}}else if(s===Qv.current){if(o=s.alternate,o===null)throw Error(ze(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(O0):t=[O0])}s=s.return}t!==null&&JS(e,t,r,n),e.flags|=262144}function i1(t){for(t=t.firstContext;t!==null;){if(!Bs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function $u(t){dh=t,Tl=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function xa(t){return M7(dh,t)}function uy(t,e){return dh===null&&$u(t),M7(t,e)}function M7(t,e){var r=e._currentValue;if(e={context:e,memoizedValue:r,next:null},Tl===null){if(t===null)throw Error(ze(308));Tl=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Tl=Tl.next=e;return r}var Bte=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(r,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(r){return r()})}},Ute=Xn.unstable_scheduleCallback,Kte=Xn.unstable_NormalPriority,In={$$typeof:El,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function NC(){return{controller:new Bte,data:new Map,refCount:0}}function ab(t){t.refCount--,t.refCount===0&&Ute(Kte,function(){t.controller.abort()})}var Bp=null,e4=0,ng=0,zf=null;function Gte(t,e){if(Bp===null){var r=Bp=[];e4=0,ng=XC(),zf={status:"pending",value:void 0,then:function(n){r.push(n)}}}return e4++,e.then(m6,m6),e}function m6(){if(--e4===0&&Bp!==null){zf!==null&&(zf.status="fulfilled");var t=Bp;Bp=null,ng=0,zf=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function qte(t,e){var r=[],n={status:"pending",value:null,reason:null,then:function(s){r.push(s)}};return t.then(function(){n.status="fulfilled",n.value=e;for(var s=0;s<r.length;s++)(0,r[s])(e)},function(s){for(n.status="rejected",n.reason=s,s=0;s<r.length;s++)(0,r[s])(void 0)}),n}var p6=Ct.S;Ct.S=function(t,e){WB=Ms(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&Gte(t,e),p6!==null&&p6(t,e)};var Au=al(null);function _C(){var t=Au.current;return t!==null?t:zr.pooledCache}function wv(t,e){e===null?Vr(Au,Au.current):Vr(Au,e.pool)}function L7(){var t=_C();return t===null?null:{parent:In._currentValue,pool:t}}var rm=Error(ze(460)),SC=Error(ze(474)),L2=Error(ze(542)),o1={then:function(){}};function x6(t){return t=t.status,t==="fulfilled"||t==="rejected"}function R7(t,e,r){switch(r=t[r],r===void 0?t.push(e):r!==e&&(e.then(Cl,Cl),e=r),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,y6(t),t;default:if(typeof e.status=="string")e.then(Cl,Cl);else{if(t=zr,t!==null&&100<t.shellSuspendCounter)throw Error(ze(482));t=e,t.status="pending",t.then(function(n){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=n}},function(n){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,y6(t),t}throw Eu=e,rm}}function ou(t){try{var e=t._init;return e(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Eu=r,rm):r}}var Eu=null;function b6(){if(Eu===null)throw Error(ze(459));var t=Eu;return Eu=null,t}function y6(t){if(t===rm||t===L2)throw Error(ze(483))}var $f=null,S0=0;function hy(t){var e=S0;return S0+=1,$f===null&&($f=[]),R7($f,t,e)}function Hm(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function fy(t,e){throw e.$$typeof===Oee?Error(ze(525)):(t=Object.prototype.toString.call(e),Error(ze(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function P7(t){function e(b,v){if(t){var y=b.deletions;y===null?(b.deletions=[v],b.flags|=16):y.push(v)}}function r(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function n(b){for(var v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(b,v){return b=Ll(b,v),b.index=0,b.sibling=null,b}function i(b,v,y){return b.index=y,t?(y=b.alternate,y!==null?(y=y.index,y<v?(b.flags|=67108866,v):y):(b.flags|=67108866,v)):(b.flags|=1048576,v)}function o(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function l(b,v,y,w){return v===null||v.tag!==6?(v=iN(y,b.mode,w),v.return=b,v):(v=s(v,y),v.return=b,v)}function c(b,v,y,w){var k=y.type;return k===uf?u(b,v,y.props.children,w,y.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Oc&&ou(k)===v.type)?(v=s(v,y.props),Hm(v,y),v.return=b,v):(v=kv(y.type,y.key,y.props,null,b.mode,w),Hm(v,y),v.return=b,v)}function d(b,v,y,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=oN(y,b.mode,w),v.return=b,v):(v=s(v,y.children||[]),v.return=b,v)}function u(b,v,y,w,k){return v===null||v.tag!==7?(v=Su(y,b.mode,w,k),v.return=b,v):(v=s(v,y),v.return=b,v)}function h(b,v,y){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=iN(""+v,b.mode,y),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case sy:return y=kv(v.type,v.key,v.props,null,b.mode,y),Hm(y,v),y.return=b,y;case Sp:return v=oN(v,b.mode,y),v.return=b,v;case Oc:return v=ou(v),h(b,v,y)}if(Ap(v)||Gm(v))return v=Su(v,b.mode,y,null),v.return=b,v;if(typeof v.then=="function")return h(b,hy(v),y);if(v.$$typeof===El)return h(b,uy(b,v),y);fy(b,v)}return null}function f(b,v,y,w){var k=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return k!==null?null:l(b,v,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case sy:return y.key===k?c(b,v,y,w):null;case Sp:return y.key===k?d(b,v,y,w):null;case Oc:return y=ou(y),f(b,v,y,w)}if(Ap(y)||Gm(y))return k!==null?null:u(b,v,y,w,null);if(typeof y.then=="function")return f(b,v,hy(y),w);if(y.$$typeof===El)return f(b,v,uy(b,y),w);fy(b,y)}return null}function g(b,v,y,w,k){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return b=b.get(y)||null,l(v,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case sy:return b=b.get(w.key===null?y:w.key)||null,c(v,b,w,k);case Sp:return b=b.get(w.key===null?y:w.key)||null,d(v,b,w,k);case Oc:return w=ou(w),g(b,v,y,w,k)}if(Ap(w)||Gm(w))return b=b.get(y)||null,u(v,b,w,k,null);if(typeof w.then=="function")return g(b,v,y,hy(w),k);if(w.$$typeof===El)return g(b,v,y,uy(v,w),k);fy(v,w)}return null}function x(b,v,y,w){for(var k=null,j=null,_=v,S=v=0,A=null;_!==null&&S<y.length;S++){_.index>S?(A=_,_=null):A=_.sibling;var T=f(b,_,y[S],w);if(T===null){_===null&&(_=A);break}t&&_&&T.alternate===null&&e(b,_),v=i(T,v,S),j===null?k=T:j.sibling=T,j=T,_=A}if(S===y.length)return r(b,_),ir&&_l(b,S),k;if(_===null){for(;S<y.length;S++)_=h(b,y[S],w),_!==null&&(v=i(_,v,S),j===null?k=_:j.sibling=_,j=_);return ir&&_l(b,S),k}for(_=n(_);S<y.length;S++)A=g(_,b,S,y[S],w),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?S:A.key),v=i(A,v,S),j===null?k=A:j.sibling=A,j=A);return t&&_.forEach(function(E){return e(b,E)}),ir&&_l(b,S),k}function m(b,v,y,w){if(y==null)throw Error(ze(151));for(var k=null,j=null,_=v,S=v=0,A=null,T=y.next();_!==null&&!T.done;S++,T=y.next()){_.index>S?(A=_,_=null):A=_.sibling;var E=f(b,_,T.value,w);if(E===null){_===null&&(_=A);break}t&&_&&E.alternate===null&&e(b,_),v=i(E,v,S),j===null?k=E:j.sibling=E,j=E,_=A}if(T.done)return r(b,_),ir&&_l(b,S),k;if(_===null){for(;!T.done;S++,T=y.next())T=h(b,T.value,w),T!==null&&(v=i(T,v,S),j===null?k=T:j.sibling=T,j=T);return ir&&_l(b,S),k}for(_=n(_);!T.done;S++,T=y.next())T=g(_,b,S,T.value,w),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?S:T.key),v=i(T,v,S),j===null?k=T:j.sibling=T,j=T);return t&&_.forEach(function(C){return e(b,C)}),ir&&_l(b,S),k}function p(b,v,y,w){if(typeof y=="object"&&y!==null&&y.type===uf&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case sy:e:{for(var k=y.key;v!==null;){if(v.key===k){if(k=y.type,k===uf){if(v.tag===7){r(b,v.sibling),w=s(v,y.props.children),w.return=b,b=w;break e}}else if(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Oc&&ou(k)===v.type){r(b,v.sibling),w=s(v,y.props),Hm(w,y),w.return=b,b=w;break e}r(b,v);break}else e(b,v);v=v.sibling}y.type===uf?(w=Su(y.props.children,b.mode,w,y.key),w.return=b,b=w):(w=kv(y.type,y.key,y.props,null,b.mode,w),Hm(w,y),w.return=b,b=w)}return o(b);case Sp:e:{for(k=y.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){r(b,v.sibling),w=s(v,y.children||[]),w.return=b,b=w;break e}else{r(b,v);break}else e(b,v);v=v.sibling}w=oN(y,b.mode,w),w.return=b,b=w}return o(b);case Oc:return y=ou(y),p(b,v,y,w)}if(Ap(y))return x(b,v,y,w);if(Gm(y)){if(k=Gm(y),typeof k!="function")throw Error(ze(150));return y=k.call(y),m(b,v,y,w)}if(typeof y.then=="function")return p(b,v,hy(y),w);if(y.$$typeof===El)return p(b,v,uy(b,y),w);fy(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,v!==null&&v.tag===6?(r(b,v.sibling),w=s(v,y),w.return=b,b=w):(r(b,v),w=iN(y,b.mode,w),w.return=b,b=w),o(b)):r(b,v)}return function(b,v,y,w){try{S0=0;var k=p(b,v,y,w);return $f=null,k}catch(_){if(_===rm||_===L2)throw _;var j=Ss(29,_,null,b.mode);return j.lanes=w,j.return=b,j}finally{}}}var Fu=P7(!0),z7=P7(!1),Ic=!1;function AC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function t4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function sd(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function id(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,br&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,e=a1(t),C7(t,null,r),e}return M2(t,n,e,r),a1(t)}function Up(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,r7(t,r)}}function cN(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}var r4=!1;function Kp(){if(r4){var t=zf;if(t!==null)throw t}}function Gp(t,e,r,n){r4=!1;var s=t.updateQueue;Ic=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane&-536870913,g=f!==l.lane;if(g?(rr&f)===f:(n&f)===f){f!==0&&f===ng&&(r4=!0),u!==null&&(u=u.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var x=t,m=l;f=e;var p=r;switch(m.tag){case 1:if(x=m.payload,typeof x=="function"){h=x.call(p,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=m.payload,f=typeof x=="function"?x.call(p,h,f):x,f==null)break e;h=nn({},h,f);break e;case 2:Ic=!0}}f=l.callback,f!==null&&(t.flags|=64,g&&(t.flags|=8192),g=s.callbacks,g===null?s.callbacks=[f]:g.push(f))}else g={lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=h):u=u.next=g,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);u===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,i===null&&(s.shared.lanes=0),jd|=o,t.lanes=o,t.memoizedState=h}}function $7(t,e){if(typeof t!="function")throw Error(ze(191,t));t.call(e)}function F7(t,e){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)$7(r[t],e)}var ag=al(null),l1=al(0);function v6(t,e){t=Hl,Vr(l1,t),Vr(ag,e),Hl=t|e.baseLanes}function n4(){Vr(l1,Hl),Vr(ag,ag.current)}function EC(){Hl=l1.current,aa(ag),aa(l1)}var Us=al(null),gi=null;function Rc(t){var e=t.alternate;Vr(kn,kn.current&1),Vr(Us,t),gi===null&&(e===null||ag.current!==null||e.memoizedState!==null)&&(gi=t)}function a4(t){Vr(kn,kn.current),Vr(Us,t),gi===null&&(gi=t)}function B7(t){t.tag===22?(Vr(kn,kn.current),Vr(Us,t),gi===null&&(gi=t)):Pc()}function Pc(){Vr(kn,kn.current),Vr(Us,Us.current)}function _s(t){aa(Us),gi===t&&(gi=null),aa(kn)}var kn=al(0);function c1(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||j4(r)||N4(r)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gl=0,Kt=null,Ir=null,Tn=null,d1=!1,Ff=!1,Bu=!1,u1=0,A0=0,Bf=null,Vte=0;function gn(){throw Error(ze(321))}function CC(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Bs(t[r],e[r]))return!1;return!0}function TC(t,e,r,n,s,i){return Gl=i,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ct.H=t===null||t.memoizedState===null?bB:BC,Bu=!1,i=r(n,s),Bu=!1,Ff&&(i=K7(e,r,n,s)),U7(t),i}function U7(t){Ct.H=E0;var e=Ir!==null&&Ir.next!==null;if(Gl=0,Tn=Ir=Kt=null,d1=!1,A0=0,Bf=null,e)throw Error(ze(300));t===null||Dn||(t=t.dependencies,t!==null&&i1(t)&&(Dn=!0))}function K7(t,e,r,n){Kt=t;var s=0;do{if(Ff&&(Bf=null),A0=0,Ff=!1,25<=s)throw Error(ze(301));if(s+=1,Tn=Ir=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}Ct.H=yB,i=e(r,n)}while(Ff);return i}function Hte(){var t=Ct.H,e=t.useState()[0];return e=typeof e.then=="function"?sb(e):e,t=t.useState()[0],(Ir!==null?Ir.memoizedState:null)!==t&&(Kt.flags|=1024),e}function OC(){var t=u1!==0;return u1=0,t}function IC(t,e,r){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r}function DC(t){if(d1){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}d1=!1}Gl=0,Tn=Ir=Kt=null,Ff=!1,A0=u1=0,Bf=null}function Pa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Kt.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function Nn(){if(Ir===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=Ir.next;var e=Tn===null?Kt.memoizedState:Tn.next;if(e!==null)Tn=e,Ir=t;else{if(t===null)throw Kt.alternate===null?Error(ze(467)):Error(ze(310));Ir=t,t={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},Tn===null?Kt.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function R2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sb(t){var e=A0;return A0+=1,Bf===null&&(Bf=[]),t=R7(Bf,t,e),e=Kt,(Tn===null?e.memoizedState:Tn.next)===null&&(e=e.alternate,Ct.H=e===null||e.memoizedState===null?bB:BC),t}function P2(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return sb(t);if(t.$$typeof===El)return xa(t)}throw Error(ze(438,String(t)))}function MC(t){var e=null,r=Kt.updateQueue;if(r!==null&&(e=r.memoCache),e==null){var n=Kt.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),r===null&&(r=R2(),Kt.updateQueue=r),r.memoCache=e,r=e.data[e.index],r===void 0)for(r=e.data[e.index]=Array(t),n=0;n<t;n++)r[n]=Iee;return e.index++,r}function ql(t,e){return typeof e=="function"?e(t):e}function jv(t){var e=Nn();return LC(e,Ir,t)}function LC(t,e,r){var n=t.queue;if(n===null)throw Error(ze(311));n.lastRenderedReducer=r;var s=t.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}e.baseQueue=s=i,n.pending=null}if(i=t.baseState,s===null)t.memoizedState=i;else{e=s.next;var l=o=null,c=null,d=e,u=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(rr&h)===h:(Gl&h)===h){var f=d.revertLane;if(f===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===ng&&(u=!0);else if((Gl&f)===f){d=d.next,f===ng&&(u=!0);continue}else h={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=h,o=i):c=c.next=h,Kt.lanes|=f,jd|=f;h=d.action,Bu&&r(i,h),i=d.hasEagerState?d.eagerState:r(i,h)}else f={lane:h,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=f,o=i):c=c.next=f,Kt.lanes|=h,jd|=h;d=d.next}while(d!==null&&d!==e);if(c===null?o=i:c.next=l,!Bs(i,t.memoizedState)&&(Dn=!0,u&&(r=zf,r!==null)))throw r;t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}return s===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function dN(t){var e=Nn(),r=e.queue;if(r===null)throw Error(ze(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Bs(i,e.memoizedState)||(Dn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function G7(t,e,r){var n=Kt,s=Nn(),i=ir;if(i){if(r===void 0)throw Error(ze(407));r=r()}else r=e();var o=!Bs((Ir||s).memoizedState,r);if(o&&(s.memoizedState=r,Dn=!0),s=s.queue,RC(H7.bind(null,n,s,t),[t]),s.getSnapshot!==e||o||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,sg(9,{destroy:void 0},V7.bind(null,n,s,r,e),null),zr===null)throw Error(ze(349));i||Gl&127||q7(n,e,r)}return r}function q7(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Kt.updateQueue,e===null?(e=R2(),Kt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function V7(t,e,r,n){e.value=r,e.getSnapshot=n,W7(e)&&X7(t)}function H7(t,e,r){return r(function(){W7(e)&&X7(t)})}function W7(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Bs(t,r)}catch{return!0}}function X7(t){var e=ch(t,2);e!==null&&cs(e,t,2)}function s4(t){var e=Pa();if(typeof t=="function"){var r=t;if(t=r(),Bu){Gc(!0);try{r()}finally{Gc(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:t},e}function Y7(t,e,r,n){return t.baseState=r,LC(t,Ir,typeof n=="function"?n:ql)}function Wte(t,e,r,n,s){if($2(t))throw Error(ze(485));if(t=e.action,t!==null){var i={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){i.listeners.push(o)}};Ct.T!==null?r(!0):i.isTransition=!1,n(i),r=e.pending,r===null?(i.next=e.pending=i,Z7(e,i)):(i.next=r.next,e.pending=r.next=i)}}function Z7(t,e){var r=e.action,n=e.payload,s=t.state;if(e.isTransition){var i=Ct.T,o={};Ct.T=o;try{var l=r(s,n),c=Ct.S;c!==null&&c(o,l),k6(t,e,l)}catch(d){i4(t,e,d)}finally{i!==null&&o.types!==null&&(i.types=o.types),Ct.T=i}}else try{i=r(s,n),k6(t,e,i)}catch(d){i4(t,e,d)}}function k6(t,e,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(n){w6(t,e,n)},function(n){return i4(t,e,n)}):w6(t,e,r)}function w6(t,e,r){e.status="fulfilled",e.value=r,Q7(e),t.state=r,e=t.pending,e!==null&&(r=e.next,r===e?t.pending=null:(r=r.next,e.next=r,Z7(t,r)))}function i4(t,e,r){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=r,Q7(e),e=e.next;while(e!==n)}t.action=null}function Q7(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function J7(t,e){return e}function j6(t,e){if(ir){var r=zr.formState;if(r!==null){e:{var n=Kt;if(ir){if(en){t:{for(var s=en,i=si;s.nodeType!==8;){if(!i){s=null;break t}if(s=mi(s.nextSibling),s===null){s=null;break t}}i=s.data,s=i==="F!"||i==="F"?s:null}if(s){en=mi(s.nextSibling),n=s.data==="F!";break e}}kd(n)}n=!1}n&&(e=r[0])}}return r=Pa(),r.memoizedState=r.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:J7,lastRenderedState:e},r.queue=n,r=mB.bind(null,Kt,n),n.dispatch=r,n=s4(!1),i=FC.bind(null,Kt,!1,n.queue),n=Pa(),s={state:e,dispatch:null,action:t,pending:null},n.queue=s,r=Wte.bind(null,Kt,s,i,r),s.dispatch=r,n.memoizedState=t,[e,r,!1]}function N6(t){var e=Nn();return eB(e,Ir,t)}function eB(t,e,r){if(e=LC(t,e,J7)[0],t=jv(ql)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=sb(e)}catch(o){throw o===rm?L2:o}else n=e;e=Nn();var s=e.queue,i=s.dispatch;return r!==e.memoizedState&&(Kt.flags|=2048,sg(9,{destroy:void 0},Xte.bind(null,s,r),null)),[n,i,t]}function Xte(t,e){t.action=e}function _6(t){var e=Nn(),r=Ir;if(r!==null)return eB(e,r,t);Nn(),e=e.memoizedState,r=Nn();var n=r.queue.dispatch;return r.memoizedState=t,[e,n,!1]}function sg(t,e,r,n){return t={tag:t,create:r,deps:n,inst:e,next:null},e=Kt.updateQueue,e===null&&(e=R2(),Kt.updateQueue=e),r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function tB(){return Nn().memoizedState}function Nv(t,e,r,n){var s=Pa();Kt.flags|=t,s.memoizedState=sg(1|e,{destroy:void 0},r,n===void 0?null:n)}function z2(t,e,r,n){var s=Nn();n=n===void 0?null:n;var i=s.memoizedState.inst;Ir!==null&&n!==null&&CC(n,Ir.memoizedState.deps)?s.memoizedState=sg(e,i,r,n):(Kt.flags|=t,s.memoizedState=sg(1|e,i,r,n))}function S6(t,e){Nv(8390656,8,t,e)}function RC(t,e){z2(2048,8,t,e)}function Yte(t){Kt.flags|=4;var e=Kt.updateQueue;if(e===null)e=R2(),Kt.updateQueue=e,e.events=[t];else{var r=e.events;r===null?e.events=[t]:r.push(t)}}function rB(t){var e=Nn().memoizedState;return Yte({ref:e,nextImpl:t}),function(){if(br&2)throw Error(ze(440));return e.impl.apply(void 0,arguments)}}function nB(t,e){return z2(4,2,t,e)}function aB(t,e){return z2(4,4,t,e)}function sB(t,e){if(typeof e=="function"){t=t();var r=e(t);return function(){typeof r=="function"?r():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iB(t,e,r){r=r!=null?r.concat([t]):null,z2(4,4,sB.bind(null,e,t),r)}function PC(){}function oB(t,e){var r=Nn();e=e===void 0?null:e;var n=r.memoizedState;return e!==null&&CC(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function lB(t,e){var r=Nn();e=e===void 0?null:e;var n=r.memoizedState;if(e!==null&&CC(e,n[1]))return n[0];if(n=t(),Bu){Gc(!0);try{t()}finally{Gc(!1)}}return r.memoizedState=[n,e],n}function zC(t,e,r){return r===void 0||Gl&1073741824&&!(rr&261930)?t.memoizedState=e:(t.memoizedState=r,t=YB(),Kt.lanes|=t,jd|=t,r)}function cB(t,e,r,n){return Bs(r,e)?r:ag.current!==null?(t=zC(t,r,n),Bs(t,e)||(Dn=!0),t):!(Gl&42)||Gl&1073741824&&!(rr&261930)?(Dn=!0,t.memoizedState=r):(t=YB(),Kt.lanes|=t,jd|=t,e)}function dB(t,e,r,n,s){var i=yr.p;yr.p=i!==0&&8>i?i:8;var o=Ct.T,l={};Ct.T=l,FC(t,!1,e,r);try{var c=s(),d=Ct.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=qte(c,n);qp(t,e,u,Ps(t))}else qp(t,e,n,Ps(t))}catch(h){qp(t,e,{then:function(){},status:"rejected",reason:h},Ps())}finally{yr.p=i,o!==null&&l.types!==null&&(o.types=l.types),Ct.T=o}}function Zte(){}function o4(t,e,r,n){if(t.tag!==5)throw Error(ze(476));var s=uB(t).queue;dB(t,s,e,_u,r===null?Zte:function(){return hB(t),r(n)})}function uB(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:_u,baseState:_u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:_u},next:null};var r={};return e.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:r},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function hB(t){var e=uB(t);e.next===null&&(e=t.alternate.memoizedState),qp(t,e.next.queue,{},Ps())}function $C(){return xa(O0)}function fB(){return Nn().memoizedState}function gB(){return Nn().memoizedState}function Qte(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var r=Ps();t=sd(r);var n=id(e,t,r);n!==null&&(cs(n,e,r),Up(n,e,r)),e={cache:NC()},t.payload=e;return}e=e.return}}function Jte(t,e,r){var n=Ps();r={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},$2(t)?pB(e,r):(r=vC(t,e,r,n),r!==null&&(cs(r,t,n),xB(r,e,n)))}function mB(t,e,r){var n=Ps();qp(t,e,r,n)}function qp(t,e,r,n){var s={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if($2(t))pB(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Bs(l,o))return M2(t,e,s,0),zr===null&&D2(),!1}catch{}finally{}if(r=vC(t,e,s,n),r!==null)return cs(r,t,n),xB(r,e,n),!0}return!1}function FC(t,e,r,n){if(n={lane:2,revertLane:XC(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},$2(t)){if(e)throw Error(ze(479))}else e=vC(t,r,n,2),e!==null&&cs(e,t,2)}function $2(t){var e=t.alternate;return t===Kt||e!==null&&e===Kt}function pB(t,e){Ff=d1=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function xB(t,e,r){if(r&4194048){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,r7(t,r)}}var E0={readContext:xa,use:P2,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn};E0.useEffectEvent=gn;var bB={readContext:xa,use:P2,useCallback:function(t,e){return Pa().memoizedState=[t,e===void 0?null:e],t},useContext:xa,useEffect:S6,useImperativeHandle:function(t,e,r){r=r!=null?r.concat([t]):null,Nv(4194308,4,sB.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Nv(4194308,4,t,e)},useInsertionEffect:function(t,e){Nv(4,2,t,e)},useMemo:function(t,e){var r=Pa();e=e===void 0?null:e;var n=t();if(Bu){Gc(!0);try{t()}finally{Gc(!1)}}return r.memoizedState=[n,e],n},useReducer:function(t,e,r){var n=Pa();if(r!==void 0){var s=r(e);if(Bu){Gc(!0);try{r(e)}finally{Gc(!1)}}}else s=e;return n.memoizedState=n.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},n.queue=t,t=t.dispatch=Jte.bind(null,Kt,t),[n.memoizedState,t]},useRef:function(t){var e=Pa();return t={current:t},e.memoizedState=t},useState:function(t){t=s4(t);var e=t.queue,r=mB.bind(null,Kt,e);return e.dispatch=r,[t.memoizedState,r]},useDebugValue:PC,useDeferredValue:function(t,e){var r=Pa();return zC(r,t,e)},useTransition:function(){var t=s4(!1);return t=dB.bind(null,Kt,t.queue,!0,!1),Pa().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,r){var n=Kt,s=Pa();if(ir){if(r===void 0)throw Error(ze(407));r=r()}else{if(r=e(),zr===null)throw Error(ze(349));rr&127||q7(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,S6(H7.bind(null,n,i,t),[t]),n.flags|=2048,sg(9,{destroy:void 0},V7.bind(null,n,i,r,e),null),r},useId:function(){var t=Pa(),e=zr.identifierPrefix;if(ir){var r=Ao,n=So;r=(n&~(1<<32-Rs(n)-1)).toString(32)+r,e="_"+e+"R_"+r,r=u1++,0<r&&(e+="H"+r.toString(32)),e+="_"}else r=Vte++,e="_"+e+"r_"+r.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:$C,useFormState:j6,useActionState:j6,useOptimistic:function(t){var e=Pa();e.memoizedState=e.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=r,e=FC.bind(null,Kt,!0,r),r.dispatch=e,[t,e]},useMemoCache:MC,useCacheRefresh:function(){return Pa().memoizedState=Qte.bind(null,Kt)},useEffectEvent:function(t){var e=Pa(),r={impl:t};return e.memoizedState=r,function(){if(br&2)throw Error(ze(440));return r.impl.apply(void 0,arguments)}}},BC={readContext:xa,use:P2,useCallback:oB,useContext:xa,useEffect:RC,useImperativeHandle:iB,useInsertionEffect:nB,useLayoutEffect:aB,useMemo:lB,useReducer:jv,useRef:tB,useState:function(){return jv(ql)},useDebugValue:PC,useDeferredValue:function(t,e){var r=Nn();return cB(r,Ir.memoizedState,t,e)},useTransition:function(){var t=jv(ql)[0],e=Nn().memoizedState;return[typeof t=="boolean"?t:sb(t),e]},useSyncExternalStore:G7,useId:fB,useHostTransitionStatus:$C,useFormState:N6,useActionState:N6,useOptimistic:function(t,e){var r=Nn();return Y7(r,Ir,t,e)},useMemoCache:MC,useCacheRefresh:gB};BC.useEffectEvent=rB;var yB={readContext:xa,use:P2,useCallback:oB,useContext:xa,useEffect:RC,useImperativeHandle:iB,useInsertionEffect:nB,useLayoutEffect:aB,useMemo:lB,useReducer:dN,useRef:tB,useState:function(){return dN(ql)},useDebugValue:PC,useDeferredValue:function(t,e){var r=Nn();return Ir===null?zC(r,t,e):cB(r,Ir.memoizedState,t,e)},useTransition:function(){var t=dN(ql)[0],e=Nn().memoizedState;return[typeof t=="boolean"?t:sb(t),e]},useSyncExternalStore:G7,useId:fB,useHostTransitionStatus:$C,useFormState:_6,useActionState:_6,useOptimistic:function(t,e){var r=Nn();return Ir!==null?Y7(r,Ir,t,e):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:MC,useCacheRefresh:gB};yB.useEffectEvent=rB;function uN(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:nn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var l4={enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ps(),s=sd(n);s.payload=e,r!=null&&(s.callback=r),e=id(t,s,n),e!==null&&(cs(e,t,n),Up(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ps(),s=sd(n);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=id(t,s,n),e!==null&&(cs(e,t,n),Up(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ps(),n=sd(r);n.tag=2,e!=null&&(n.callback=e),e=id(t,n,r),e!==null&&(cs(e,t,r),Up(e,t,r))}};function A6(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!j0(r,n)||!j0(s,i):!0}function E6(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&l4.enqueueReplaceState(e,e.state,null)}function Uu(t,e){var r=e;if("ref"in e){r={};for(var n in e)n!=="ref"&&(r[n]=e[n])}if(t=t.defaultProps){r===e&&(r=nn({},r));for(var s in t)r[s]===void 0&&(r[s]=t[s])}return r}function vB(t){n1(t)}function kB(t){console.error(t)}function wB(t){n1(t)}function h1(t,e){try{var r=t.onUncaughtError;r(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function C6(t,e,r){try{var n=t.onCaughtError;n(r.value,{componentStack:r.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function c4(t,e,r){return r=sd(r),r.tag=3,r.payload={element:null},r.callback=function(){h1(t,e)},r}function jB(t){return t=sd(t),t.tag=3,t}function NB(t,e,r,n){var s=r.type.getDerivedStateFromError;if(typeof s=="function"){var i=n.value;t.payload=function(){return s(i)},t.callback=function(){C6(e,r,n)}}var o=r.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){C6(e,r,n),typeof s!="function"&&(od===null?od=new Set([this]):od.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})})}function ere(t,e,r,n,s){if(r.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=r.alternate,e!==null&&tm(e,r,s,!0),r=Us.current,r!==null){switch(r.tag){case 31:case 13:return gi===null?x1():r.alternate===null&&bn===0&&(bn=3),r.flags&=-257,r.flags|=65536,r.lanes=s,n===o1?r.flags|=16384:(e=r.updateQueue,e===null?r.updateQueue=new Set([n]):e.add(n),wN(t,n,s)),!1;case 22:return r.flags|=65536,n===o1?r.flags|=16384:(e=r.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=e):(r=e.retryQueue,r===null?e.retryQueue=new Set([n]):r.add(n)),wN(t,n,s)),!1}throw Error(ze(435,r.tag))}return wN(t,n,s),x1(),!1}if(ir)return e=Us.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,n!==YS&&(t=Error(ze(422),{cause:n}),_0(ai(t,r)))):(n!==YS&&(e=Error(ze(423),{cause:n}),_0(ai(e,r))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,n=ai(n,r),s=c4(t.stateNode,n,s),cN(t,s),bn!==4&&(bn=2)),!1;var i=Error(ze(520),{cause:n});if(i=ai(i,r),Wp===null?Wp=[i]:Wp.push(i),bn!==4&&(bn=2),e===null)return!0;n=ai(n,r),r=e;do{switch(r.tag){case 3:return r.flags|=65536,t=s&-s,r.lanes|=t,t=c4(r.stateNode,n,t),cN(r,t),!1;case 1:if(e=r.type,i=r.stateNode,(r.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(od===null||!od.has(i))))return r.flags|=65536,s&=-s,r.lanes|=s,s=jB(s),NB(s,t,r,n),cN(r,s),!1}r=r.return}while(r!==null);return!1}var UC=Error(ze(461)),Dn=!1;function fa(t,e,r,n){e.child=t===null?z7(e,null,r,n):Fu(e,t.child,r,n)}function T6(t,e,r,n,s){r=r.render;var i=e.ref;if("ref"in n){var o={};for(var l in n)l!=="ref"&&(o[l]=n[l])}else o=n;return $u(e),n=TC(t,e,r,o,i,s),l=OC(),t!==null&&!Dn?(IC(t,e,s),Vl(t,e,s)):(ir&&l&&wC(e),e.flags|=1,fa(t,e,n,s),e.child)}function O6(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!kC(i)&&i.defaultProps===void 0&&r.compare===null?(e.tag=15,e.type=i,_B(t,e,i,n,s)):(t=kv(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!KC(t,s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:j0,r(o,n)&&t.ref===e.ref)return Vl(t,e,s)}return e.flags|=1,t=Ll(i,n),t.ref=e.ref,t.return=e,e.child=t}function _B(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(j0(i,n)&&t.ref===e.ref)if(Dn=!1,e.pendingProps=n=i,KC(t,s))t.flags&131072&&(Dn=!0);else return e.lanes=t.lanes,Vl(t,e,s)}return d4(t,e,r,n,s)}function SB(t,e,r,n){var s=n.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|r:r,t!==null){for(n=e.child=t.child,s=0;n!==null;)s=s|n.lanes|n.childLanes,n=n.sibling;n=s&~i}else n=0,e.child=null;return I6(t,e,i,r,n)}if(r&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&wv(e,i!==null?i.cachePool:null),i!==null?v6(e,i):n4(),B7(e);else return n=e.lanes=536870912,I6(t,e,i!==null?i.baseLanes|r:r,r,n)}else i!==null?(wv(e,i.cachePool),v6(e,i),Pc(),e.memoizedState=null):(t!==null&&wv(e,null),n4(),Pc());return fa(t,e,s,r),e.child}function Cp(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function I6(t,e,r,n,s){var i=_C();return i=i===null?null:{parent:In._currentValue,pool:i},e.memoizedState={baseLanes:r,cachePool:i},t!==null&&wv(e,null),n4(),B7(e),t!==null&&tm(t,e,n,!0),e.childLanes=s,null}function _v(t,e){return e=f1({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function D6(t,e,r){return Fu(e,t.child,null,r),t=_v(e,e.pendingProps),t.flags|=2,_s(e),e.memoizedState=null,t}function tre(t,e,r){var n=e.pendingProps,s=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(ir){if(n.mode==="hidden")return t=_v(e,n),e.lanes=536870912,Cp(null,t);if(a4(e),(t=en)?(t=bU(t,si),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vd!==null?{id:So,overflow:Ao}:null,retryLane:536870912,hydrationErrors:null},r=O7(t),r.return=e,e.child=r,pa=e,en=null)):t=null,t===null)throw kd(e);return e.lanes=536870912,null}return _v(e,n)}var i=t.memoizedState;if(i!==null){var o=i.dehydrated;if(a4(e),s)if(e.flags&256)e.flags&=-257,e=D6(t,e,r);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(ze(558));else if(Dn||tm(t,e,r,!1),s=(r&t.childLanes)!==0,Dn||s){if(n=zr,n!==null&&(o=n7(n,r),o!==0&&o!==i.retryLane))throw i.retryLane=o,ch(t,o),cs(n,t,o),UC;x1(),e=D6(t,e,r)}else t=i.treeContext,en=mi(o.nextSibling),pa=e,ir=!0,ad=null,si=!1,t!==null&&D7(e,t),e=_v(e,n),e.flags|=4096;return e}return t=Ll(t.child,{mode:n.mode,children:n.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Sv(t,e){var r=e.ref;if(r===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(ze(284));(t===null||t.ref!==r)&&(e.flags|=4194816)}}function d4(t,e,r,n,s){return $u(e),r=TC(t,e,r,n,void 0,s),n=OC(),t!==null&&!Dn?(IC(t,e,s),Vl(t,e,s)):(ir&&n&&wC(e),e.flags|=1,fa(t,e,r,s),e.child)}function M6(t,e,r,n,s,i){return $u(e),e.updateQueue=null,r=K7(e,n,r,s),U7(t),n=OC(),t!==null&&!Dn?(IC(t,e,i),Vl(t,e,i)):(ir&&n&&wC(e),e.flags|=1,fa(t,e,r,i),e.child)}function L6(t,e,r,n,s){if($u(e),e.stateNode===null){var i=yf,o=r.contextType;typeof o=="object"&&o!==null&&(i=xa(o)),i=new r(n,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=l4,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=n,i.state=e.memoizedState,i.refs={},AC(e),o=r.contextType,i.context=typeof o=="object"&&o!==null?xa(o):yf,i.state=e.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(uN(e,r,o,n),i.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(o=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),o!==i.state&&l4.enqueueReplaceState(i,i.state,null),Gp(e,n,i,s),Kp(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(t===null){i=e.stateNode;var l=e.memoizedProps,c=Uu(r,l);i.props=c;var d=i.context,u=r.contextType;o=yf,typeof u=="object"&&u!==null&&(o=xa(u));var h=r.getDerivedStateFromProps;u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||d!==o)&&E6(e,i,n,o),Ic=!1;var f=e.memoizedState;i.state=f,Gp(e,n,i,s),Kp(),d=e.memoizedState,l||f!==d||Ic?(typeof h=="function"&&(uN(e,r,h,n),d=e.memoizedState),(c=Ic||A6(e,r,c,n,f,d,o))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=d),i.props=n,i.state=d,i.context=o,n=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,t4(t,e),o=e.memoizedProps,u=Uu(r,o),i.props=u,h=e.pendingProps,f=i.context,d=r.contextType,c=yf,typeof d=="object"&&d!==null&&(c=xa(d)),l=r.getDerivedStateFromProps,(d=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==c)&&E6(e,i,n,c),Ic=!1,f=e.memoizedState,i.state=f,Gp(e,n,i,s),Kp();var g=e.memoizedState;o!==h||f!==g||Ic||t!==null&&t.dependencies!==null&&i1(t.dependencies)?(typeof l=="function"&&(uN(e,r,l,n),g=e.memoizedState),(u=Ic||A6(e,r,u,n,f,g,c)||t!==null&&t.dependencies!==null&&i1(t.dependencies))?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),i.props=n,i.state=g,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return i=n,Sv(t,e),n=(e.flags&128)!==0,i||n?(i=e.stateNode,r=n&&typeof r.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&n?(e.child=Fu(e,t.child,null,s),e.child=Fu(e,null,r,s)):fa(t,e,r,s),e.memoizedState=i.state,t=e.child):t=Vl(t,e,s),t}function R6(t,e,r,n){return zu(),e.flags|=256,fa(t,e,r,n),e.child}var hN={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fN(t){return{baseLanes:t,cachePool:L7()}}function gN(t,e,r){return t=t!==null?t.childLanes&~r:0,e&&(t|=Cs),t}function AB(t,e,r){var n=e.pendingProps,s=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(kn.current&2)!==0),o&&(s=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(ir){if(s?Rc(e):Pc(),(t=en)?(t=bU(t,si),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vd!==null?{id:So,overflow:Ao}:null,retryLane:536870912,hydrationErrors:null},r=O7(t),r.return=e,e.child=r,pa=e,en=null)):t=null,t===null)throw kd(e);return N4(t)?e.lanes=32:e.lanes=536870912,null}var l=n.children;return n=n.fallback,s?(Pc(),s=e.mode,l=f1({mode:"hidden",children:l},s),n=Su(n,s,r,null),l.return=e,n.return=e,l.sibling=n,e.child=l,n=e.child,n.memoizedState=fN(r),n.childLanes=gN(t,o,r),e.memoizedState=hN,Cp(null,n)):(Rc(e),u4(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(i)e.flags&256?(Rc(e),e.flags&=-257,e=mN(t,e,r)):e.memoizedState!==null?(Pc(),e.child=t.child,e.flags|=128,e=null):(Pc(),l=n.fallback,s=e.mode,n=f1({mode:"visible",children:n.children},s),l=Su(l,s,r,null),l.flags|=2,n.return=e,l.return=e,n.sibling=l,e.child=n,Fu(e,t.child,null,r),n=e.child,n.memoizedState=fN(r),n.childLanes=gN(t,o,r),e.memoizedState=hN,e=Cp(null,n));else if(Rc(e),N4(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var d=o.dgst;o=d,n=Error(ze(419)),n.stack="",n.digest=o,_0({value:n,source:null,stack:null}),e=mN(t,e,r)}else if(Dn||tm(t,e,r,!1),o=(r&t.childLanes)!==0,Dn||o){if(o=zr,o!==null&&(n=n7(o,r),n!==0&&n!==c.retryLane))throw c.retryLane=n,ch(t,n),cs(o,t,n),UC;j4(l)||x1(),e=mN(t,e,r)}else j4(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,en=mi(l.nextSibling),pa=e,ir=!0,ad=null,si=!1,t!==null&&D7(e,t),e=u4(e,n.children),e.flags|=4096);return e}return s?(Pc(),l=n.fallback,s=e.mode,c=t.child,d=c.sibling,n=Ll(c,{mode:"hidden",children:n.children}),n.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=Ll(d,l):(l=Su(l,s,r,null),l.flags|=2),l.return=e,n.return=e,n.sibling=l,e.child=n,Cp(null,n),n=e.child,l=t.child.memoizedState,l===null?l=fN(r):(s=l.cachePool,s!==null?(c=In._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=L7(),l={baseLanes:l.baseLanes|r,cachePool:s}),n.memoizedState=l,n.childLanes=gN(t,o,r),e.memoizedState=hN,Cp(t.child,n)):(Rc(e),r=t.child,t=r.sibling,r=Ll(r,{mode:"visible",children:n.children}),r.return=e,r.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=r,e.memoizedState=null,r)}function u4(t,e){return e=f1({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function f1(t,e){return t=Ss(22,t,null,e),t.lanes=0,t}function mN(t,e,r){return Fu(e,t.child,null,r),t=u4(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function P6(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),QS(t.return,e,r)}function pN(t,e,r,n,s,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s,treeForkCount:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s,o.treeForkCount=i)}function EB(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;n=n.children;var o=kn.current,l=(o&2)!==0;if(l?(o=o&1|2,e.flags|=128):o&=1,Vr(kn,o),fa(t,e,n,r),n=ir?N0:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&P6(t,r,e);else if(t.tag===19)P6(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&c1(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),pN(e,!1,s,r,i,n);break;case"backwards":case"unstable_legacy-backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&c1(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}pN(e,!0,r,null,i,n);break;case"together":pN(e,!1,null,null,void 0,n);break;default:e.memoizedState=null}return e.child}function Vl(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),jd|=e.lanes,!(r&e.childLanes))if(t!==null){if(tm(t,e,r,!1),(r&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(ze(153));if(e.child!==null){for(t=e.child,r=Ll(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ll(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function KC(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&i1(t)))}function rre(t,e,r){switch(e.tag){case 3:Jv(e,e.stateNode.containerInfo),Lc(e,In,t.memoizedState.cache),zu();break;case 27:case 5:$S(e);break;case 4:Jv(e,e.stateNode.containerInfo);break;case 10:Lc(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,a4(e),null;break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(Rc(e),e.flags|=128,null):r&e.child.childLanes?AB(t,e,r):(Rc(e),t=Vl(t,e,r),t!==null?t.sibling:null);Rc(e);break;case 19:var s=(t.flags&128)!==0;if(n=(r&e.childLanes)!==0,n||(tm(t,e,r,!1),n=(r&e.childLanes)!==0),s){if(n)return EB(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vr(kn,kn.current),n)break;return null;case 22:return e.lanes=0,SB(t,e,r,e.pendingProps);case 24:Lc(e,In,t.memoizedState.cache)}return Vl(t,e,r)}function CB(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps)Dn=!0;else{if(!KC(t,r)&&!(e.flags&128))return Dn=!1,rre(t,e,r);Dn=!!(t.flags&131072)}else Dn=!1,ir&&e.flags&1048576&&I7(e,N0,e.index);switch(e.lanes=0,e.tag){case 16:e:{var n=e.pendingProps;if(t=ou(e.elementType),e.type=t,typeof t=="function")kC(t)?(n=Uu(t,n),e.tag=1,e=L6(null,e,t,n,r)):(e.tag=0,e=d4(null,e,t,n,r));else{if(t!=null){var s=t.$$typeof;if(s===oC){e.tag=11,e=T6(null,e,t,n,r);break e}else if(s===lC){e.tag=14,e=O6(null,e,t,n,r);break e}}throw e=PS(t)||t,Error(ze(306,e,""))}}return e;case 0:return d4(t,e,e.type,e.pendingProps,r);case 1:return n=e.type,s=Uu(n,e.pendingProps),L6(t,e,n,s,r);case 3:e:{if(Jv(e,e.stateNode.containerInfo),t===null)throw Error(ze(387));n=e.pendingProps;var i=e.memoizedState;s=i.element,t4(t,e),Gp(e,n,null,r);var o=e.memoizedState;if(n=o.cache,Lc(e,In,n),n!==i.cache&&JS(e,[In],r,!0),Kp(),n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=R6(t,e,n,r);break e}else if(n!==s){s=ai(Error(ze(424)),e),_0(s),e=R6(t,e,n,r);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(en=mi(t.firstChild),pa=e,ir=!0,ad=null,si=!0,r=z7(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(zu(),n===s){e=Vl(t,e,r);break e}fa(t,e,n,r)}e=e.child}return e;case 26:return Sv(t,e),t===null?(r=nD(e.type,null,e.pendingProps,null))?e.memoizedState=r:ir||(r=e.type,t=e.pendingProps,n=k1(nd.current).createElement(r),n[ma]=e,n[us]=t,ba(n,r,t),ra(n),e.stateNode=n):e.memoizedState=nD(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return $S(e),t===null&&ir&&(n=e.stateNode=yU(e.type,e.pendingProps,nd.current),pa=e,si=!0,s=en,Id(e.type)?(_4=s,en=mi(n.firstChild)):en=s),fa(t,e,e.pendingProps.children,r),Sv(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ir&&((s=n=en)&&(n=Ire(n,e.type,e.pendingProps,si),n!==null?(e.stateNode=n,pa=e,en=mi(n.firstChild),si=!1,s=!0):s=!1),s||kd(e)),$S(e),s=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,n=i.children,k4(s,i)?n=null:o!==null&&k4(s,o)&&(e.flags|=32),e.memoizedState!==null&&(s=TC(t,e,Hte,null,null,r),O0._currentValue=s),Sv(t,e),fa(t,e,n,r),e.child;case 6:return t===null&&ir&&((t=r=en)&&(r=Dre(r,e.pendingProps,si),r!==null?(e.stateNode=r,pa=e,en=null,t=!0):t=!1),t||kd(e)),null;case 13:return AB(t,e,r);case 4:return Jv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Fu(e,null,n,r):fa(t,e,n,r),e.child;case 11:return T6(t,e,e.type,e.pendingProps,r);case 7:return fa(t,e,e.pendingProps,r),e.child;case 8:return fa(t,e,e.pendingProps.children,r),e.child;case 12:return fa(t,e,e.pendingProps.children,r),e.child;case 10:return n=e.pendingProps,Lc(e,e.type,n.value),fa(t,e,n.children,r),e.child;case 9:return s=e.type._context,n=e.pendingProps.children,$u(e),s=xa(s),n=n(s),e.flags|=1,fa(t,e,n,r),e.child;case 14:return O6(t,e,e.type,e.pendingProps,r);case 15:return _B(t,e,e.type,e.pendingProps,r);case 19:return EB(t,e,r);case 31:return tre(t,e,r);case 22:return SB(t,e,r,e.pendingProps);case 24:return $u(e),n=xa(In),t===null?(s=_C(),s===null&&(s=zr,i=NC(),s.pooledCache=i,i.refCount++,i!==null&&(s.pooledCacheLanes|=r),s=i),e.memoizedState={parent:n,cache:s},AC(e),Lc(e,In,s)):(t.lanes&r&&(t4(t,e),Gp(e,null,null,r),Kp()),s=t.memoizedState,i=e.memoizedState,s.parent!==n?(s={parent:n,cache:n},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Lc(e,In,n)):(n=i.cache,Lc(e,In,n),n!==s.cache&&JS(e,[In],r,!0))),fa(t,e,e.pendingProps.children,r),e.child;case 29:throw e.pendingProps}throw Error(ze(156,e.tag))}function xl(t){t.flags|=4}function xN(t,e,r,n,s){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(s&335544128)===s)if(t.stateNode.complete)t.flags|=8192;else if(JB())t.flags|=8192;else throw Eu=o1,SC}else t.flags&=-16777217}function z6(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!wU(e))if(JB())t.flags|=8192;else throw Eu=o1,SC}function gy(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?e7():536870912,t.lanes|=e,ig|=e)}function Wm(t,e){if(!ir)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Yr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function nre(t,e,r){var n=e.pendingProps;switch(jC(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(e),null;case 1:return Yr(e),null;case 3:return r=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Rl(In),eg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ph(e)?xl(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,lN())),Yr(e),null;case 26:var s=e.type,i=e.memoizedState;return t===null?(xl(e),i!==null?(Yr(e),z6(e,i)):(Yr(e),xN(e,s,null,n,r))):i?i!==t.memoizedState?(xl(e),Yr(e),z6(e,i)):(Yr(e),e.flags&=-16777217):(t=t.memoizedProps,t!==n&&xl(e),Yr(e),xN(e,s,t,n,r)),null;case 27:if(e1(e),r=nd.current,s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&xl(e);else{if(!n){if(e.stateNode===null)throw Error(ze(166));return Yr(e),null}t=Do.current,Ph(e)?f6(e):(t=yU(s,n,r),e.stateNode=t,xl(e))}return Yr(e),null;case 5:if(e1(e),s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&xl(e);else{if(!n){if(e.stateNode===null)throw Error(ze(166));return Yr(e),null}if(i=Do.current,Ph(e))f6(e);else{var o=k1(nd.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof n.is=="string"?o.createElement("select",{is:n.is}):o.createElement("select"),n.multiple?i.multiple=!0:n.size&&(i.size=n.size);break;default:i=typeof n.is=="string"?o.createElement(s,{is:n.is}):o.createElement(s)}}i[ma]=e,i[us]=n;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)i.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=i;e:switch(ba(i,s,n),s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&xl(e)}}return Yr(e),xN(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,r),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==n&&xl(e);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ze(166));if(t=nd.current,Ph(e)){if(t=e.stateNode,r=e.memoizedProps,n=null,s=pa,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}t[ma]=e,t=!!(t.nodeValue===r||n!==null&&n.suppressHydrationWarning===!0||mU(t.nodeValue,r)),t||kd(e,!0)}else t=k1(t).createTextNode(n),t[ma]=e,e.stateNode=t}return Yr(e),null;case 31:if(r=e.memoizedState,t===null||t.memoizedState!==null){if(n=Ph(e),r!==null){if(t===null){if(!n)throw Error(ze(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ze(557));t[ma]=e}else zu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yr(e),t=!1}else r=lN(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return e.flags&256?(_s(e),e):(_s(e),null);if(e.flags&128)throw Error(ze(558))}return Yr(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=Ph(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(ze(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ze(317));s[ma]=e}else zu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yr(e),s=!1}else s=lN(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(_s(e),e):(_s(e),null)}return _s(e),e.flags&128?(e.lanes=r,e):(r=n!==null,t=t!==null&&t.memoizedState!==null,r&&(n=e.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==s&&(n.flags|=2048)),r!==t&&r&&(e.child.flags|=8192),gy(e,e.updateQueue),Yr(e),null);case 4:return eg(),t===null&&YC(e.stateNode.containerInfo),Yr(e),null;case 10:return Rl(e.type),Yr(e),null;case 19:if(aa(kn),n=e.memoizedState,n===null)return Yr(e),null;if(s=(e.flags&128)!==0,i=n.rendering,i===null)if(s)Wm(n,!1);else{if(bn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=c1(t),i!==null){for(e.flags|=128,Wm(n,!1),t=i.updateQueue,e.updateQueue=t,gy(e,t),e.subtreeFlags=0,t=r,r=e.child;r!==null;)T7(r,t),r=r.sibling;return Vr(kn,kn.current&1|2),ir&&_l(e,n.treeForkCount),e.child}t=t.sibling}n.tail!==null&&Ms()>m1&&(e.flags|=128,s=!0,Wm(n,!1),e.lanes=4194304)}else{if(!s)if(t=c1(i),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,gy(e,t),Wm(n,!0),n.tail===null&&n.tailMode==="hidden"&&!i.alternate&&!ir)return Yr(e),null}else 2*Ms()-n.renderingStartTime>m1&&r!==536870912&&(e.flags|=128,s=!0,Wm(n,!1),e.lanes=4194304);n.isBackwards?(i.sibling=e.child,e.child=i):(t=n.last,t!==null?t.sibling=i:e.child=i,n.last=i)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Ms(),t.sibling=null,r=kn.current,Vr(kn,s?r&1|2:r&1),ir&&_l(e,n.treeForkCount),t):(Yr(e),null);case 22:case 23:return _s(e),EC(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?r&536870912&&!(e.flags&128)&&(Yr(e),e.subtreeFlags&6&&(e.flags|=8192)):Yr(e),r=e.updateQueue,r!==null&&gy(e,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==r&&(e.flags|=2048),t!==null&&aa(Au),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Rl(In),Yr(e),null;case 25:return null;case 30:return null}throw Error(ze(156,e.tag))}function are(t,e){switch(jC(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rl(In),eg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return e1(e),null;case 31:if(e.memoizedState!==null){if(_s(e),e.alternate===null)throw Error(ze(340));zu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(_s(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ze(340));zu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return aa(kn),null;case 4:return eg(),null;case 10:return Rl(e.type),null;case 22:case 23:return _s(e),EC(),t!==null&&aa(Au),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Rl(In),null;case 25:return null;default:return null}}function TB(t,e){switch(jC(e),e.tag){case 3:Rl(In),eg();break;case 26:case 27:case 5:e1(e);break;case 4:eg();break;case 31:e.memoizedState!==null&&_s(e);break;case 13:_s(e);break;case 19:aa(kn);break;case 10:Rl(e.type);break;case 22:case 23:_s(e),EC(),t!==null&&aa(Au);break;case 24:Rl(In)}}function ib(t,e){try{var r=e.updateQueue,n=r!==null?r.lastEffect:null;if(n!==null){var s=n.next;r=s;do{if((r.tag&t)===t){n=void 0;var i=r.create,o=r.inst;n=i(),o.destroy=n}r=r.next}while(r!==s)}}catch(l){_r(e,e.return,l)}}function wd(t,e,r){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){var o=n.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,s=e;var c=r,d=l;try{d()}catch(u){_r(s,c,u)}}}n=n.next}while(n!==i)}}catch(u){_r(e,e.return,u)}}function OB(t){var e=t.updateQueue;if(e!==null){var r=t.stateNode;try{F7(e,r)}catch(n){_r(t,t.return,n)}}}function IB(t,e,r){r.props=Uu(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(n){_r(t,e,n)}}function Vp(t,e){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var n=t.stateNode;break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof r=="function"?t.refCleanup=r(n):r.current=n}}catch(s){_r(t,e,s)}}function Eo(t,e){var r=t.ref,n=t.refCleanup;if(r!==null)if(typeof n=="function")try{n()}catch(s){_r(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(s){_r(t,e,s)}else r.current=null}function DB(t){var e=t.type,r=t.memoizedProps,n=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(s){_r(t,t.return,s)}}function bN(t,e,r){try{var n=t.stateNode;Sre(n,t.type,r,e),n[us]=e}catch(s){_r(t,t.return,s)}}function MB(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Id(t.type)||t.tag===4}function yN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MB(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Id(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function h4(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,e):(e=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,e.appendChild(t),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Cl));else if(n!==4&&(n===27&&Id(t.type)&&(r=t.stateNode,e=null),t=t.child,t!==null))for(h4(t,e,r),t=t.sibling;t!==null;)h4(t,e,r),t=t.sibling}function g1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(n===27&&Id(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(g1(t,e,r),t=t.sibling;t!==null;)g1(t,e,r),t=t.sibling}function LB(t){var e=t.stateNode,r=t.memoizedProps;try{for(var n=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);ba(e,n,r),e[ma]=t,e[us]=r}catch(i){_r(t,t.return,i)}}var Al=!1,On=!1,vN=!1,$6=typeof WeakSet=="function"?WeakSet:Set,ta=null;function sre(t,e){if(t=t.containerInfo,y4=_1,t=w7(t),bC(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var g;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===r&&++d===s&&(l=o),f===i&&++u===n&&(c=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(v4={focusedElem:t,selectionRange:r},_1=!1,ta=e;ta!==null;)if(e=ta,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ta=t;else for(;ta!==null;){switch(e=ta,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)s=t[r],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,r=e,s=i.memoizedProps,i=i.memoizedState,n=r.stateNode;try{var x=Uu(r.type,s);t=n.getSnapshotBeforeUpdate(x,i),n.__reactInternalSnapshotBeforeUpdate=t}catch(m){_r(r,r.return,m)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,r=t.nodeType,r===9)w4(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":w4(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(ze(163))}if(t=e.sibling,t!==null){t.return=e.return,ta=t;break}ta=e.return}}function RB(t,e,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:yl(t,r),n&4&&ib(5,r);break;case 1:if(yl(t,r),n&4)if(t=r.stateNode,e===null)try{t.componentDidMount()}catch(o){_r(r,r.return,o)}else{var s=Uu(r.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){_r(r,r.return,o)}}n&64&&OB(r),n&512&&Vp(r,r.return);break;case 3:if(yl(t,r),n&64&&(t=r.updateQueue,t!==null)){if(e=null,r.child!==null)switch(r.child.tag){case 27:case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}try{F7(t,e)}catch(o){_r(r,r.return,o)}}break;case 27:e===null&&n&4&&LB(r);case 26:case 5:yl(t,r),e===null&&n&4&&DB(r),n&512&&Vp(r,r.return);break;case 12:yl(t,r);break;case 31:yl(t,r),n&4&&$B(t,r);break;case 13:yl(t,r),n&4&&FB(t,r),n&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=gre.bind(null,r),Mre(t,r))));break;case 22:if(n=r.memoizedState!==null||Al,!n){e=e!==null&&e.memoizedState!==null||On,s=Al;var i=On;Al=n,(On=e)&&!i?jl(t,r,(r.subtreeFlags&8772)!==0):yl(t,r),Al=s,On=i}break;case 30:break;default:yl(t,r)}}function PB(t){var e=t.alternate;e!==null&&(t.alternate=null,PB(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&hC(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var an=null,as=!1;function bl(t,e,r){for(r=r.child;r!==null;)zB(t,e,r),r=r.sibling}function zB(t,e,r){if(Ls&&typeof Ls.onCommitFiberUnmount=="function")try{Ls.onCommitFiberUnmount(Jx,r)}catch{}switch(r.tag){case 26:On||Eo(r,e),bl(t,e,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:On||Eo(r,e);var n=an,s=as;Id(r.type)&&(an=r.stateNode,as=!1),bl(t,e,r),Yp(r.stateNode),an=n,as=s;break;case 5:On||Eo(r,e);case 6:if(n=an,s=as,an=null,bl(t,e,r),an=n,as=s,an!==null)if(as)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(r.stateNode)}catch(i){_r(r,e,i)}else try{an.removeChild(r.stateNode)}catch(i){_r(r,e,i)}break;case 18:an!==null&&(as?(t=an,Q6(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),dg(t)):Q6(an,r.stateNode));break;case 4:n=an,s=as,an=r.stateNode.containerInfo,as=!0,bl(t,e,r),an=n,as=s;break;case 0:case 11:case 14:case 15:wd(2,r,e),On||wd(4,r,e),bl(t,e,r);break;case 1:On||(Eo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"&&IB(r,e,n)),bl(t,e,r);break;case 21:bl(t,e,r);break;case 22:On=(n=On)||r.memoizedState!==null,bl(t,e,r),On=n;break;default:bl(t,e,r)}}function $B(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{dg(t)}catch(r){_r(e,e.return,r)}}}function FB(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{dg(t)}catch(r){_r(e,e.return,r)}}function ire(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new $6),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new $6),e;default:throw Error(ze(435,t.tag))}}function my(t,e){var r=ire(t);e.forEach(function(n){if(!r.has(n)){r.add(n);var s=mre.bind(null,t,n);n.then(s,s)}})}function Ja(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n],i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Id(l.type)){an=l.stateNode,as=!1;break e}break;case 5:an=l.stateNode,as=!1;break e;case 3:case 4:an=l.stateNode.containerInfo,as=!0;break e}l=l.return}if(an===null)throw Error(ze(160));zB(i,o,s),an=null,as=!1,i=s.alternate,i!==null&&(i.return=null),s.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)BB(e,t),e=e.sibling}var Ri=null;function BB(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ja(e,t),es(t),n&4&&(wd(3,t,t.return),ib(3,t),wd(5,t,t.return));break;case 1:Ja(e,t),es(t),n&512&&(On||r===null||Eo(r,r.return)),n&64&&Al&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?n:r.concat(n))));break;case 26:var s=Ri;if(Ja(e,t),es(t),n&512&&(On||r===null||Eo(r,r.return)),n&4){var i=r!==null?r.memoizedState:null;if(n=t.memoizedState,r===null)if(n===null)if(t.stateNode===null){e:{n=t.type,r=t.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":i=s.getElementsByTagName("title")[0],(!i||i[rb]||i[ma]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=s.createElement(n),s.head.insertBefore(i,s.querySelector("head > title"))),ba(i,n,r),i[ma]=t,ra(i),n=i;break e;case"link":var o=sD("link","href",s).get(n+(r.href||""));if(o){for(var l=0;l<o.length;l++)if(i=o[l],i.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&i.getAttribute("rel")===(r.rel==null?null:r.rel)&&i.getAttribute("title")===(r.title==null?null:r.title)&&i.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){o.splice(l,1);break t}}i=s.createElement(n),ba(i,n,r),s.head.appendChild(i);break;case"meta":if(o=sD("meta","content",s).get(n+(r.content||""))){for(l=0;l<o.length;l++)if(i=o[l],i.getAttribute("content")===(r.content==null?null:""+r.content)&&i.getAttribute("name")===(r.name==null?null:r.name)&&i.getAttribute("property")===(r.property==null?null:r.property)&&i.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&i.getAttribute("charset")===(r.charSet==null?null:r.charSet)){o.splice(l,1);break t}}i=s.createElement(n),ba(i,n,r),s.head.appendChild(i);break;default:throw Error(ze(468,n))}i[ma]=t,ra(i),n=i}t.stateNode=n}else iD(s,t.type,t.stateNode);else t.stateNode=aD(s,n,t.memoizedProps);else i!==n?(i===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):i.count--,n===null?iD(s,t.type,t.stateNode):aD(s,n,t.memoizedProps)):n===null&&t.stateNode!==null&&bN(t,t.memoizedProps,r.memoizedProps)}break;case 27:Ja(e,t),es(t),n&512&&(On||r===null||Eo(r,r.return)),r!==null&&n&4&&bN(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Ja(e,t),es(t),n&512&&(On||r===null||Eo(r,r.return)),t.flags&32){s=t.stateNode;try{rg(s,"")}catch(x){_r(t,t.return,x)}}n&4&&t.stateNode!=null&&(s=t.memoizedProps,bN(t,s,r!==null?r.memoizedProps:s)),n&1024&&(vN=!0);break;case 6:if(Ja(e,t),es(t),n&4){if(t.stateNode===null)throw Error(ze(162));n=t.memoizedProps,r=t.stateNode;try{r.nodeValue=n}catch(x){_r(t,t.return,x)}}break;case 3:if(Cv=null,s=Ri,Ri=w1(e.containerInfo),Ja(e,t),Ri=s,es(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{dg(e.containerInfo)}catch(x){_r(t,t.return,x)}vN&&(vN=!1,UB(t));break;case 4:n=Ri,Ri=w1(t.stateNode.containerInfo),Ja(e,t),es(t),Ri=n;break;case 12:Ja(e,t),es(t);break;case 31:Ja(e,t),es(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,my(t,n)));break;case 13:Ja(e,t),es(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(F2=Ms()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,my(t,n)));break;case 22:s=t.memoizedState!==null;var c=r!==null&&r.memoizedState!==null,d=Al,u=On;if(Al=d||s,On=u||c,Ja(e,t),On=u,Al=d,es(t),n&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(r===null||c||Al||On||lu(t)),r=null,e=t;;){if(e.tag===5||e.tag===26){if(r===null){c=r=e;try{if(i=c.stateNode,s)o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=h!=null&&h.hasOwnProperty("display")?h.display:null;l.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(x){_r(c,c.return,x)}}}else if(e.tag===6){if(r===null){c=e;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(x){_r(c,c.return,x)}}}else if(e.tag===18){if(r===null){c=e;try{var g=c.stateNode;s?J6(g,!0):J6(c.stateNode,!1)}catch(x){_r(c,c.return,x)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;r===e&&(r=null),e=e.return}r===e&&(r=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=t.updateQueue,n!==null&&(r=n.retryQueue,r!==null&&(n.retryQueue=null,my(t,r))));break;case 19:Ja(e,t),es(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,my(t,n)));break;case 30:break;case 21:break;default:Ja(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{for(var r,n=t.return;n!==null;){if(MB(n)){r=n;break}n=n.return}if(r==null)throw Error(ze(160));switch(r.tag){case 27:var s=r.stateNode,i=yN(t);g1(t,i,s);break;case 5:var o=r.stateNode;r.flags&32&&(rg(o,""),r.flags&=-33);var l=yN(t);g1(t,l,o);break;case 3:case 4:var c=r.stateNode.containerInfo,d=yN(t);h4(t,d,c);break;default:throw Error(ze(161))}}catch(u){_r(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UB(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;UB(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function yl(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)RB(t,e.alternate,e),e=e.sibling}function lu(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:wd(4,e,e.return),lu(e);break;case 1:Eo(e,e.return);var r=e.stateNode;typeof r.componentWillUnmount=="function"&&IB(e,e.return,r),lu(e);break;case 27:Yp(e.stateNode);case 26:case 5:Eo(e,e.return),lu(e);break;case 22:e.memoizedState===null&&lu(e);break;case 30:lu(e);break;default:lu(e)}t=t.sibling}}function jl(t,e,r){for(r=r&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,s=t,i=e,o=i.flags;switch(i.tag){case 0:case 11:case 15:jl(s,i,r),ib(4,i);break;case 1:if(jl(s,i,r),n=i,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(d){_r(n,n.return,d)}if(n=i,s=n.updateQueue,s!==null){var l=n.stateNode;try{var c=s.shared.hiddenCallbacks;if(c!==null)for(s.shared.hiddenCallbacks=null,s=0;s<c.length;s++)$7(c[s],l)}catch(d){_r(n,n.return,d)}}r&&o&64&&OB(i),Vp(i,i.return);break;case 27:LB(i);case 26:case 5:jl(s,i,r),r&&n===null&&o&4&&DB(i),Vp(i,i.return);break;case 12:jl(s,i,r);break;case 31:jl(s,i,r),r&&o&4&&$B(s,i);break;case 13:jl(s,i,r),r&&o&4&&FB(s,i);break;case 22:i.memoizedState===null&&jl(s,i,r),Vp(i,i.return);break;case 30:break;default:jl(s,i,r)}e=e.sibling}}function GC(t,e){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&ab(r))}function qC(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ab(t))}function Si(t,e,r,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)KB(t,e,r,n),e=e.sibling}function KB(t,e,r,n){var s=e.flags;switch(e.tag){case 0:case 11:case 15:Si(t,e,r,n),s&2048&&ib(9,e);break;case 1:Si(t,e,r,n);break;case 3:Si(t,e,r,n),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ab(t)));break;case 12:if(s&2048){Si(t,e,r,n),t=e.stateNode;try{var i=e.memoizedProps,o=i.id,l=i.onPostCommit;typeof l=="function"&&l(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){_r(e,e.return,c)}}else Si(t,e,r,n);break;case 31:Si(t,e,r,n);break;case 13:Si(t,e,r,n);break;case 23:break;case 22:i=e.stateNode,o=e.alternate,e.memoizedState!==null?i._visibility&2?Si(t,e,r,n):Hp(t,e):i._visibility&2?Si(t,e,r,n):(i._visibility|=2,Jh(t,e,r,n,(e.subtreeFlags&10256)!==0||!1)),s&2048&&GC(o,e);break;case 24:Si(t,e,r,n),s&2048&&qC(e.alternate,e);break;default:Si(t,e,r,n)}}function Jh(t,e,r,n,s){for(s=s&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,o=e,l=r,c=n,d=o.flags;switch(o.tag){case 0:case 11:case 15:Jh(i,o,l,c,s),ib(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&2?Jh(i,o,l,c,s):Hp(i,o):(u._visibility|=2,Jh(i,o,l,c,s)),s&&d&2048&&GC(o.alternate,o);break;case 24:Jh(i,o,l,c,s),s&&d&2048&&qC(o.alternate,o);break;default:Jh(i,o,l,c,s)}e=e.sibling}}function Hp(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var r=t,n=e,s=n.flags;switch(n.tag){case 22:Hp(r,n),s&2048&&GC(n.alternate,n);break;case 24:Hp(r,n),s&2048&&qC(n.alternate,n);break;default:Hp(r,n)}e=e.sibling}}var Tp=8192;function zh(t,e,r){if(t.subtreeFlags&Tp)for(t=t.child;t!==null;)GB(t,e,r),t=t.sibling}function GB(t,e,r){switch(t.tag){case 26:zh(t,e,r),t.flags&Tp&&t.memoizedState!==null&&Vre(r,Ri,t.memoizedState,t.memoizedProps);break;case 5:zh(t,e,r);break;case 3:case 4:var n=Ri;Ri=w1(t.stateNode.containerInfo),zh(t,e,r),Ri=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Tp,Tp=16777216,zh(t,e,r),Tp=n):zh(t,e,r));break;default:zh(t,e,r)}}function qB(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Xm(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];ta=n,HB(n,t)}qB(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)VB(t),t=t.sibling}function VB(t){switch(t.tag){case 0:case 11:case 15:Xm(t),t.flags&2048&&wd(9,t,t.return);break;case 3:Xm(t);break;case 12:Xm(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Av(t)):Xm(t);break;default:Xm(t)}}function Av(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];ta=n,HB(n,t)}qB(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:wd(8,e,e.return),Av(e);break;case 22:r=e.stateNode,r._visibility&2&&(r._visibility&=-3,Av(e));break;default:Av(e)}t=t.sibling}}function HB(t,e){for(;ta!==null;){var r=ta;switch(r.tag){case 0:case 11:case 15:wd(8,r,e);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var n=r.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:ab(r.memoizedState.cache)}if(n=r.child,n!==null)n.return=r,ta=n;else e:for(r=t;ta!==null;){n=ta;var s=n.sibling,i=n.return;if(PB(n),n===r){ta=null;break e}if(s!==null){s.return=i,ta=s;break e}ta=i}}}var ore={getCacheForType:function(t){var e=xa(In),r=e.data.get(t);return r===void 0&&(r=t(),e.data.set(t,r)),r},cacheSignal:function(){return xa(In).controller.signal}},lre=typeof WeakMap=="function"?WeakMap:Map,br=0,zr=null,Qt=null,rr=0,Nr=0,ws=null,Vc=!1,nm=!1,VC=!1,Hl=0,bn=0,jd=0,Cu=0,HC=0,Cs=0,ig=0,Wp=null,ss=null,f4=!1,F2=0,WB=0,m1=1/0,p1=null,od=null,Hn=0,ld=null,og=null,Pl=0,g4=0,m4=null,XB=null,Xp=0,p4=null;function Ps(){return br&2&&rr!==0?rr&-rr:Ct.T!==null?XC():a7()}function YB(){if(Cs===0)if(!(rr&536870912)||ir){var t=oy;oy<<=1,!(oy&3932160)&&(oy=262144),Cs=t}else Cs=536870912;return t=Us.current,t!==null&&(t.flags|=32),Cs}function cs(t,e,r){(t===zr&&(Nr===2||Nr===9)||t.cancelPendingCommit!==null)&&(lg(t,0),Hc(t,rr,Cs,!1)),tb(t,r),(!(br&2)||t!==zr)&&(t===zr&&(!(br&2)&&(Cu|=r),bn===4&&Hc(t,rr,Cs,!1)),sl(t))}function ZB(t,e,r){if(br&6)throw Error(ze(327));var n=!r&&(e&127)===0&&(e&t.expiredLanes)===0||eb(t,e),s=n?ure(t,e):kN(t,e,!0),i=n;do{if(s===0){nm&&!n&&Hc(t,e,0,!1);break}else{if(r=t.current.alternate,i&&!cre(r)){s=kN(t,e,!1),i=!1;continue}if(s===2){if(i=e,t.errorRecoveryDisabledLanes&i)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var l=t;s=Wp;var c=l.current.memoizedState.isDehydrated;if(c&&(lg(l,o).flags|=256),o=kN(l,o,!1),o!==2){if(VC&&!c){l.errorRecoveryDisabledLanes|=i,Cu|=i,s=4;break e}i=ss,ss=s,i!==null&&(ss===null?ss=i:ss.push.apply(ss,i))}s=o}if(i=!1,s!==2)continue}}if(s===1){lg(t,0),Hc(t,e,0,!0);break}e:{switch(n=t,i=s,i){case 0:case 1:throw Error(ze(345));case 4:if((e&4194048)!==e)break;case 6:Hc(n,e,Cs,!Vc);break e;case 2:ss=null;break;case 3:case 5:break;default:throw Error(ze(329))}if((e&62914560)===e&&(s=F2+300-Ms(),10<s)){if(Hc(n,e,Cs,!Vc),C2(n,0,!0)!==0)break e;Pl=e,n.timeoutHandle=xU(F6.bind(null,n,r,ss,p1,f4,e,Cs,Cu,ig,Vc,i,"Throttled",-0,0),s);break e}F6(n,r,ss,p1,f4,e,Cs,Cu,ig,Vc,i,null,-0,0)}}break}while(!0);sl(t)}function F6(t,e,r,n,s,i,o,l,c,d,u,h,f,g){if(t.timeoutHandle=-1,h=e.subtreeFlags,h&8192||(h&16785408)===16785408){h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Cl},GB(e,i,h);var x=(i&62914560)===i?F2-Ms():(i&4194048)===i?WB-Ms():0;if(x=Hre(h,x),x!==null){Pl=i,t.cancelPendingCommit=x(U6.bind(null,t,e,i,r,n,s,o,l,c,u,h,null,f,g)),Hc(t,i,o,!d);return}}U6(t,e,i,r,n,s,o,l,c)}function cre(t){for(var e=t;;){var r=e.tag;if((r===0||r===11||r===15)&&e.flags&16384&&(r=e.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Bs(i(),s))return!1}catch{return!1}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hc(t,e,r,n){e&=~HC,e&=~Cu,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var s=e;0<s;){var i=31-Rs(s),o=1<<i;n[i]=-1,s&=~o}r!==0&&t7(t,r,e)}function B2(){return br&6?!0:(ob(0),!1)}function WC(){if(Qt!==null){if(Nr===0)var t=Qt.return;else t=Qt,Tl=dh=null,DC(t),$f=null,S0=0,t=Qt;for(;t!==null;)TB(t.alternate,t),t=t.return;Qt=null}}function lg(t,e){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Cre(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Pl=0,WC(),zr=t,Qt=r=Ll(t.current,null),rr=e,Nr=0,ws=null,Vc=!1,nm=eb(t,e),VC=!1,ig=Cs=HC=Cu=jd=bn=0,ss=Wp=null,f4=!1,e&8&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var s=31-Rs(n),i=1<<s;e|=t[s],n&=~i}return Hl=e,D2(),r}function QB(t,e){Kt=null,Ct.H=E0,e===rm||e===L2?(e=b6(),Nr=3):e===SC?(e=b6(),Nr=4):Nr=e===UC?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,ws=e,Qt===null&&(bn=1,h1(t,ai(e,t.current)))}function JB(){var t=Us.current;return t===null?!0:(rr&4194048)===rr?gi===null:(rr&62914560)===rr||rr&536870912?t===gi:!1}function eU(){var t=Ct.H;return Ct.H=E0,t===null?E0:t}function tU(){var t=Ct.A;return Ct.A=ore,t}function x1(){bn=4,Vc||(rr&4194048)!==rr&&Us.current!==null||(nm=!0),!(jd&134217727)&&!(Cu&134217727)||zr===null||Hc(zr,rr,Cs,!1)}function kN(t,e,r){var n=br;br|=2;var s=eU(),i=tU();(zr!==t||rr!==e)&&(p1=null,lg(t,e)),e=!1;var o=bn;e:do try{if(Nr!==0&&Qt!==null){var l=Qt,c=ws;switch(Nr){case 8:WC(),o=6;break e;case 3:case 2:case 9:case 6:Us.current===null&&(e=!0);var d=Nr;if(Nr=0,ws=null,wf(t,l,c,d),r&&nm){o=0;break e}break;default:d=Nr,Nr=0,ws=null,wf(t,l,c,d)}}dre(),o=bn;break}catch(u){QB(t,u)}while(!0);return e&&t.shellSuspendCounter++,Tl=dh=null,br=n,Ct.H=s,Ct.A=i,Qt===null&&(zr=null,rr=0,D2()),o}function dre(){for(;Qt!==null;)rU(Qt)}function ure(t,e){var r=br;br|=2;var n=eU(),s=tU();zr!==t||rr!==e?(p1=null,m1=Ms()+500,lg(t,e)):nm=eb(t,e);e:do try{if(Nr!==0&&Qt!==null){e=Qt;var i=ws;t:switch(Nr){case 1:Nr=0,ws=null,wf(t,e,i,1);break;case 2:case 9:if(x6(i)){Nr=0,ws=null,B6(e);break}e=function(){Nr!==2&&Nr!==9||zr!==t||(Nr=7),sl(t)},i.then(e,e);break e;case 3:Nr=7;break e;case 4:Nr=5;break e;case 7:x6(i)?(Nr=0,ws=null,B6(e)):(Nr=0,ws=null,wf(t,e,i,7));break;case 5:var o=null;switch(Qt.tag){case 26:o=Qt.memoizedState;case 5:case 27:var l=Qt;if(o?wU(o):l.stateNode.complete){Nr=0,ws=null;var c=l.sibling;if(c!==null)Qt=c;else{var d=l.return;d!==null?(Qt=d,U2(d)):Qt=null}break t}}Nr=0,ws=null,wf(t,e,i,5);break;case 6:Nr=0,ws=null,wf(t,e,i,6);break;case 8:WC(),bn=6;break e;default:throw Error(ze(462))}}hre();break}catch(u){QB(t,u)}while(!0);return Tl=dh=null,Ct.H=n,Ct.A=s,br=r,Qt!==null?0:(zr=null,rr=0,D2(),bn)}function hre(){for(;Qt!==null&&!Lee();)rU(Qt)}function rU(t){var e=CB(t.alternate,t,Hl);t.memoizedProps=t.pendingProps,e===null?U2(t):Qt=e}function B6(t){var e=t,r=e.alternate;switch(e.tag){case 15:case 0:e=M6(r,e,e.pendingProps,e.type,void 0,rr);break;case 11:e=M6(r,e,e.pendingProps,e.type.render,e.ref,rr);break;case 5:DC(e);default:TB(r,e),e=Qt=T7(e,Hl),e=CB(r,e,Hl)}t.memoizedProps=t.pendingProps,e===null?U2(t):Qt=e}function wf(t,e,r,n){Tl=dh=null,DC(e),$f=null,S0=0;var s=e.return;try{if(ere(t,s,e,r,rr)){bn=1,h1(t,ai(r,t.current)),Qt=null;return}}catch(i){if(s!==null)throw Qt=s,i;bn=1,h1(t,ai(r,t.current)),Qt=null;return}e.flags&32768?(ir||n===1?t=!0:nm||rr&536870912?t=!1:(Vc=t=!0,(n===2||n===9||n===3||n===6)&&(n=Us.current,n!==null&&n.tag===13&&(n.flags|=16384))),nU(e,t)):U2(e)}function U2(t){var e=t;do{if(e.flags&32768){nU(e,Vc);return}t=e.return;var r=nre(e.alternate,e,Hl);if(r!==null){Qt=r;return}if(e=e.sibling,e!==null){Qt=e;return}Qt=e=t}while(e!==null);bn===0&&(bn=5)}function nU(t,e){do{var r=are(t.alternate,t);if(r!==null){r.flags&=32767,Qt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!e&&(t=t.sibling,t!==null)){Qt=t;return}Qt=t=r}while(t!==null);bn=6,Qt=null}function U6(t,e,r,n,s,i,o,l,c){t.cancelPendingCommit=null;do K2();while(Hn!==0);if(br&6)throw Error(ze(327));if(e!==null){if(e===t.current)throw Error(ze(177));if(i=e.lanes|e.childLanes,i|=yC,qee(t,r,i,o,l,c),t===zr&&(Qt=zr=null,rr=0),og=e,ld=t,Pl=r,g4=i,m4=s,XB=n,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,pre(t1,function(){return lU(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,e.subtreeFlags&13878||n){n=Ct.T,Ct.T=null,s=yr.p,yr.p=2,o=br,br|=4;try{sre(t,e,r)}finally{br=o,yr.p=s,Ct.T=n}}Hn=1,aU(),sU(),iU()}}function aU(){if(Hn===1){Hn=0;var t=ld,e=og,r=(e.flags&13878)!==0;if(e.subtreeFlags&13878||r){r=Ct.T,Ct.T=null;var n=yr.p;yr.p=2;var s=br;br|=4;try{BB(e,t);var i=v4,o=w7(t.containerInfo),l=i.focusedElem,c=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&k7(l.ownerDocument.documentElement,l)){if(c!==null&&bC(l)){var d=c.start,u=c.end;if(u===void 0&&(u=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(u,l.value.length);else{var h=l.ownerDocument||document,f=h&&h.defaultView||window;if(f.getSelection){var g=f.getSelection(),x=l.textContent.length,m=Math.min(c.start,x),p=c.end===void 0?m:Math.min(c.end,x);!g.extend&&m>p&&(o=p,p=m,m=o);var b=d6(l,m),v=d6(l,p);if(b&&v&&(g.rangeCount!==1||g.anchorNode!==b.node||g.anchorOffset!==b.offset||g.focusNode!==v.node||g.focusOffset!==v.offset)){var y=h.createRange();y.setStart(b.node,b.offset),g.removeAllRanges(),m>p?(g.addRange(y),g.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),g.addRange(y))}}}}for(h=[],g=l;g=g.parentNode;)g.nodeType===1&&h.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<h.length;l++){var w=h[l];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}_1=!!y4,v4=y4=null}finally{br=s,yr.p=n,Ct.T=r}}t.current=e,Hn=2}}function sU(){if(Hn===2){Hn=0;var t=ld,e=og,r=(e.flags&8772)!==0;if(e.subtreeFlags&8772||r){r=Ct.T,Ct.T=null;var n=yr.p;yr.p=2;var s=br;br|=4;try{RB(t,e.alternate,e)}finally{br=s,yr.p=n,Ct.T=r}}Hn=3}}function iU(){if(Hn===4||Hn===3){Hn=0,Ree();var t=ld,e=og,r=Pl,n=XB;e.subtreeFlags&10256||e.flags&10256?Hn=5:(Hn=0,og=ld=null,oU(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(od=null),uC(r),e=e.stateNode,Ls&&typeof Ls.onCommitFiberRoot=="function")try{Ls.onCommitFiberRoot(Jx,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=Ct.T,s=yr.p,yr.p=2,Ct.T=null;try{for(var i=t.onRecoverableError,o=0;o<n.length;o++){var l=n[o];i(l.value,{componentStack:l.stack})}}finally{Ct.T=e,yr.p=s}}Pl&3&&K2(),sl(t),s=t.pendingLanes,r&261930&&s&42?t===p4?Xp++:(Xp=0,p4=t):Xp=0,ob(0)}}function oU(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ab(e)))}function K2(){return aU(),sU(),iU(),lU()}function lU(){if(Hn!==5)return!1;var t=ld,e=g4;g4=0;var r=uC(Pl),n=Ct.T,s=yr.p;try{yr.p=32>r?32:r,Ct.T=null,r=m4,m4=null;var i=ld,o=Pl;if(Hn=0,og=ld=null,Pl=0,br&6)throw Error(ze(331));var l=br;if(br|=4,VB(i.current),KB(i,i.current,o,r),br=l,ob(0,!1),Ls&&typeof Ls.onPostCommitFiberRoot=="function")try{Ls.onPostCommitFiberRoot(Jx,i)}catch{}return!0}finally{yr.p=s,Ct.T=n,oU(t,e)}}function K6(t,e,r){e=ai(r,e),e=c4(t.stateNode,e,2),t=id(t,e,2),t!==null&&(tb(t,2),sl(t))}function _r(t,e,r){if(t.tag===3)K6(t,t,r);else for(;e!==null;){if(e.tag===3){K6(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(od===null||!od.has(n))){t=ai(r,t),r=jB(2),n=id(e,r,2),n!==null&&(NB(r,n,e,t),tb(n,2),sl(n));break}}e=e.return}}function wN(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new lre;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(VC=!0,s.add(r),t=fre.bind(null,t,e,r),e.then(t,t))}function fre(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,zr===t&&(rr&r)===r&&(bn===4||bn===3&&(rr&62914560)===rr&&300>Ms()-F2?!(br&2)&&lg(t,0):HC|=r,ig===rr&&(ig=0)),sl(t)}function cU(t,e){e===0&&(e=e7()),t=ch(t,e),t!==null&&(tb(t,e),sl(t))}function gre(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),cU(t,r)}function mre(t,e){var r=0;switch(t.tag){case 31:case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(ze(314))}n!==null&&n.delete(e),cU(t,r)}function pre(t,e){return cC(t,e)}var b1=null,ef=null,x4=!1,y1=!1,jN=!1,Wc=0;function sl(t){t!==ef&&t.next===null&&(ef===null?b1=ef=t:ef=ef.next=t),y1=!0,x4||(x4=!0,bre())}function ob(t,e){if(!jN&&y1){jN=!0;do for(var r=!1,n=b1;n!==null;){if(t!==0){var s=n.pendingLanes;if(s===0)var i=0;else{var o=n.suspendedLanes,l=n.pingedLanes;i=(1<<31-Rs(42|t)+1)-1,i&=s&~(o&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(r=!0,G6(n,i))}else i=rr,i=C2(n,n===zr?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(i&3)||eb(n,i)||(r=!0,G6(n,i));n=n.next}while(r);jN=!1}}function xre(){dU()}function dU(){y1=x4=!1;var t=0;Wc!==0&&Ere()&&(t=Wc);for(var e=Ms(),r=null,n=b1;n!==null;){var s=n.next,i=uU(n,e);i===0?(n.next=null,r===null?b1=s:r.next=s,s===null&&(ef=r)):(r=n,(t!==0||i&3)&&(y1=!0)),n=s}Hn!==0&&Hn!==5||ob(t),Wc!==0&&(Wc=0)}function uU(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var o=31-Rs(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=Gee(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}if(e=zr,r=rr,r=C2(t,t===e?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n=t.callbackNode,r===0||t===e&&(Nr===2||Nr===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&Zj(n),t.callbackNode=null,t.callbackPriority=0;if(!(r&3)||eb(t,r)){if(e=r&-r,e===t.callbackPriority)return e;switch(n!==null&&Zj(n),uC(r)){case 2:case 8:r=QF;break;case 32:r=t1;break;case 268435456:r=JF;break;default:r=t1}return n=hU.bind(null,t),r=cC(r,n),t.callbackPriority=e,t.callbackNode=r,e}return n!==null&&n!==null&&Zj(n),t.callbackPriority=2,t.callbackNode=null,2}function hU(t,e){if(Hn!==0&&Hn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(K2()&&t.callbackNode!==r)return null;var n=rr;return n=C2(t,t===zr?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n===0?null:(ZB(t,n,e),uU(t,Ms()),t.callbackNode!=null&&t.callbackNode===r?hU.bind(null,t):null)}function G6(t,e){if(K2())return null;ZB(t,e,!0)}function bre(){Tre(function(){br&6?cC(ZF,xre):dU()})}function XC(){if(Wc===0){var t=ng;t===0&&(t=iy,iy<<=1,!(iy&261888)&&(iy=256)),Wc=t}return Wc}function q6(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:bv(""+t)}function V6(t,e){var r=e.ownerDocument.createElement("input");return r.name=e.name,r.value=e.value,t.id&&r.setAttribute("form",t.id),e.parentNode.insertBefore(r,e),t=new FormData(t),r.parentNode.removeChild(r),t}function yre(t,e,r,n,s){if(e==="submit"&&r&&r.stateNode===s){var i=q6((s[us]||null).action),o=n.submitter;o&&(e=(e=o[us]||null)?q6(e.formAction):o.getAttribute("formAction"),e!==null&&(i=e,o=null));var l=new T2("action","action",null,n,s);t.push({event:l,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Wc!==0){var c=o?V6(s,o):new FormData(s);o4(r,{pending:!0,data:c,method:s.method,action:i},null,c)}}else typeof i=="function"&&(l.preventDefault(),c=o?V6(s,o):new FormData(s),o4(r,{pending:!0,data:c,method:s.method,action:i},i,c))},currentTarget:s}]})}}for(var NN=0;NN<XS.length;NN++){var _N=XS[NN],vre=_N.toLowerCase(),kre=_N[0].toUpperCase()+_N.slice(1);so(vre,"on"+kre)}so(N7,"onAnimationEnd");so(_7,"onAnimationIteration");so(S7,"onAnimationStart");so("dblclick","onDoubleClick");so("focusin","onFocus");so("focusout","onBlur");so(Pte,"onTransitionRun");so(zte,"onTransitionStart");so($te,"onTransitionCancel");so(A7,"onTransitionEnd");tg("onMouseEnter",["mouseout","mouseover"]);tg("onMouseLeave",["mouseout","mouseover"]);tg("onPointerEnter",["pointerout","pointerover"]);tg("onPointerLeave",["pointerout","pointerover"]);ih("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ih("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ih("onBeforeInput",["compositionend","keypress","textInput","paste"]);ih("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ih("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ih("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var C0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wre=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(C0));function fU(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;i=l,s.currentTarget=d;try{i(s)}catch(u){n1(u)}s.currentTarget=null,i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;i=l,s.currentTarget=d;try{i(s)}catch(u){n1(u)}s.currentTarget=null,i=c}}}}function Zt(t,e){var r=e[BS];r===void 0&&(r=e[BS]=new Set);var n=t+"__bubble";r.has(n)||(gU(e,t,2,!1),r.add(n))}function SN(t,e,r){var n=0;e&&(n|=4),gU(r,t,n,e)}var py="_reactListening"+Math.random().toString(36).slice(2);function YC(t){if(!t[py]){t[py]=!0,s7.forEach(function(r){r!=="selectionchange"&&(wre.has(r)||SN(r,!1,t),SN(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[py]||(e[py]=!0,SN("selectionchange",!1,e))}}function gU(t,e,r,n){switch(AU(e)){case 2:var s=Yre;break;case 8:s=Zre;break;default:s=e5}r=s.bind(null,e,r,t),s=void 0,!VS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function AN(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===s)return;o=o.return}for(;l!==null;){if(o=ff(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){n=i=o;continue e}l=l.parentNode}}n=n.return}f7(function(){var d=i,u=gC(r),h=[];e:{var f=E7.get(t);if(f!==void 0){var g=T2,x=t;switch(t){case"keypress":if(vv(r)===0)break e;case"keydown":case"keyup":g=mte;break;case"focusin":x="focus",g=rN;break;case"focusout":x="blur",g=rN;break;case"beforeblur":case"afterblur":g=rN;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=e6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=nte;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=bte;break;case N7:case _7:case S7:g=ite;break;case A7:g=vte;break;case"scroll":case"scrollend":g=tte;break;case"wheel":g=wte;break;case"copy":case"cut":case"paste":g=lte;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=r6;break;case"toggle":case"beforetoggle":g=Nte}var m=(e&4)!==0,p=!m&&(t==="scroll"||t==="scrollend"),b=m?f!==null?f+"Capture":null:f;m=[];for(var v=d,y;v!==null;){var w=v;if(y=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||y===null||b===null||(w=k0(v,b),w!=null&&m.push(T0(v,w,y))),p)break;v=v.return}0<m.length&&(f=new g(f,x,null,r,u),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&r!==qS&&(x=r.relatedTarget||r.fromElement)&&(ff(x)||x[Jg]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(x=r.relatedTarget||r.toElement,g=d,x=x?ff(x):null,x!==null&&(p=Qx(x),m=x.tag,x!==p||m!==5&&m!==27&&m!==6)&&(x=null)):(g=null,x=d),g!==x)){if(m=e6,w="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=r6,w="onPointerLeave",b="onPointerEnter",v="pointer"),p=g==null?f:Ep(g),y=x==null?f:Ep(x),f=new m(w,v+"leave",g,r,u),f.target=p,f.relatedTarget=y,w=null,ff(u)===d&&(m=new m(b,v+"enter",x,r,u),m.target=y,m.relatedTarget=p,w=m),p=w,g&&x)t:{for(m=jre,b=g,v=x,y=0,w=b;w;w=m(w))y++;w=0;for(var k=v;k;k=m(k))w++;for(;0<y-w;)b=m(b),y--;for(;0<w-y;)v=m(v),w--;for(;y--;){if(b===v||v!==null&&b===v.alternate){m=b;break t}b=m(b),v=m(v)}m=null}else m=null;g!==null&&H6(h,f,g,m,!1),x!==null&&p!==null&&H6(h,p,x,m,!0)}}e:{if(f=d?Ep(d):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var j=i6;else if(s6(f))if(y7)j=Mte;else{j=Ite;var _=Ote}else g=f.nodeName,!g||g.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?d&&fC(d.elementType)&&(j=i6):j=Dte;if(j&&(j=j(t,d))){b7(h,j,r,u);break e}_&&_(t,f,d),t==="focusout"&&d&&f.type==="number"&&d.memoizedProps.value!=null&&GS(f,"number",f.value)}switch(_=d?Ep(d):window,t){case"focusin":(s6(_)||_.contentEditable==="true")&&(pf=_,HS=d,Fp=null);break;case"focusout":Fp=HS=pf=null;break;case"mousedown":WS=!0;break;case"contextmenu":case"mouseup":case"dragend":WS=!1,u6(h,r,u);break;case"selectionchange":if(Rte)break;case"keydown":case"keyup":u6(h,r,u)}var S;if(xC)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else mf?p7(t,r)&&(A="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(m7&&r.locale!=="ko"&&(mf||A!=="onCompositionStart"?A==="onCompositionEnd"&&mf&&(S=g7()):(qc=u,mC="value"in qc?qc.value:qc.textContent,mf=!0)),_=v1(d,A),0<_.length&&(A=new t6(A,t,null,r,u),h.push({event:A,listeners:_}),S?A.data=S:(S=x7(r),S!==null&&(A.data=S)))),(S=Ste?Ate(t,r):Ete(t,r))&&(A=v1(d,"onBeforeInput"),0<A.length&&(_=new t6("onBeforeInput","beforeinput",null,r,u),h.push({event:_,listeners:A}),_.data=S)),yre(h,t,d,r,u)}fU(h,e)})}function T0(t,e,r){return{instance:t,listener:e,currentTarget:r}}function v1(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||i===null||(s=k0(t,r),s!=null&&n.unshift(T0(t,s,i)),s=k0(t,e),s!=null&&n.push(T0(t,s,i))),t.tag===3)return n;t=t.return}return[]}function jre(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function H6(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===n)break;l!==5&&l!==26&&l!==27||d===null||(c=d,s?(d=k0(r,i),d!=null&&o.unshift(T0(r,d,c))):s||(d=k0(r,i),d!=null&&o.push(T0(r,d,c)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Nre=/\r\n?/g,_re=/\u0000|\uFFFD/g;function W6(t){return(typeof t=="string"?t:""+t).replace(Nre,`
`).replace(_re,"")}function mU(t,e){return e=W6(e),W6(t)===e}function Tr(t,e,r,n,s,i){switch(r){case"children":typeof n=="string"?e==="body"||e==="textarea"&&n===""||rg(t,n):(typeof n=="number"||typeof n=="bigint")&&e!=="body"&&rg(t,""+n);break;case"className":cy(t,"class",n);break;case"tabIndex":cy(t,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":cy(t,r,n);break;case"style":h7(t,n,i);break;case"data":if(e!=="object"){cy(t,"data",n);break}case"src":case"href":if(n===""&&(e!=="a"||r!=="href")){t.removeAttribute(r);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(r);break}n=bv(""+n),t.setAttribute(r,n);break;case"action":case"formAction":if(typeof n=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(r==="formAction"?(e!=="input"&&Tr(t,e,"name",s.name,s,null),Tr(t,e,"formEncType",s.formEncType,s,null),Tr(t,e,"formMethod",s.formMethod,s,null),Tr(t,e,"formTarget",s.formTarget,s,null)):(Tr(t,e,"encType",s.encType,s,null),Tr(t,e,"method",s.method,s,null),Tr(t,e,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(r);break}n=bv(""+n),t.setAttribute(r,n);break;case"onClick":n!=null&&(t.onclick=Cl);break;case"onScroll":n!=null&&Zt("scroll",t);break;case"onScrollEnd":n!=null&&Zt("scrollend",t);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(ze(61));if(r=n.__html,r!=null){if(s.children!=null)throw Error(ze(60));t.innerHTML=r}}break;case"multiple":t.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":t.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){t.removeAttribute("xlink:href");break}r=bv(""+n),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,""+n):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":n===!0?t.setAttribute(r,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,n):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?t.setAttribute(r,n):t.removeAttribute(r);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?t.removeAttribute(r):t.setAttribute(r,n);break;case"popover":Zt("beforetoggle",t),Zt("toggle",t),xv(t,"popover",n);break;case"xlinkActuate":pl(t,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":pl(t,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":pl(t,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":pl(t,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":pl(t,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":pl(t,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":pl(t,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":pl(t,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":pl(t,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":xv(t,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Jee.get(r)||r,xv(t,r,n))}}function b4(t,e,r,n,s,i){switch(r){case"style":h7(t,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(ze(61));if(r=n.__html,r!=null){if(s.children!=null)throw Error(ze(60));t.innerHTML=r}}break;case"children":typeof n=="string"?rg(t,n):(typeof n=="number"||typeof n=="bigint")&&rg(t,""+n);break;case"onScroll":n!=null&&Zt("scroll",t);break;case"onScrollEnd":n!=null&&Zt("scrollend",t);break;case"onClick":n!=null&&(t.onclick=Cl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!i7.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(s=r.endsWith("Capture"),e=r.slice(2,s?r.length-7:void 0),i=t[us]||null,i=i!=null?i[r]:null,typeof i=="function"&&t.removeEventListener(e,i,s),typeof n=="function")){typeof i!="function"&&i!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(e,n,s);break e}r in t?t[r]=n:n===!0?t.setAttribute(r,""):xv(t,r,n)}}}function ba(t,e,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zt("error",t),Zt("load",t);var n=!1,s=!1,i;for(i in r)if(r.hasOwnProperty(i)){var o=r[i];if(o!=null)switch(i){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ze(137,e));default:Tr(t,e,i,o,r,null)}}s&&Tr(t,e,"srcSet",r.srcSet,r,null),n&&Tr(t,e,"src",r.src,r,null);return;case"input":Zt("invalid",t);var l=i=o=s=null,c=null,d=null;for(n in r)if(r.hasOwnProperty(n)){var u=r[n];if(u!=null)switch(n){case"name":s=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":i=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(ze(137,e));break;default:Tr(t,e,n,u,r,null)}}c7(t,i,l,c,d,o,s,!1);return;case"select":Zt("invalid",t),n=o=i=null;for(s in r)if(r.hasOwnProperty(s)&&(l=r[s],l!=null))switch(s){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":n=l;default:Tr(t,e,s,l,r,null)}e=i,r=o,t.multiple=!!n,e!=null?Rf(t,!!n,e,!1):r!=null&&Rf(t,!!n,r,!0);return;case"textarea":Zt("invalid",t),i=s=n=null;for(o in r)if(r.hasOwnProperty(o)&&(l=r[o],l!=null))switch(o){case"value":n=l;break;case"defaultValue":s=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(ze(91));break;default:Tr(t,e,o,l,r,null)}u7(t,n,s,i);return;case"option":for(c in r)if(r.hasOwnProperty(c)&&(n=r[c],n!=null))switch(c){case"selected":t.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Tr(t,e,c,n,r,null)}return;case"dialog":Zt("beforetoggle",t),Zt("toggle",t),Zt("cancel",t),Zt("close",t);break;case"iframe":case"object":Zt("load",t);break;case"video":case"audio":for(n=0;n<C0.length;n++)Zt(C0[n],t);break;case"image":Zt("error",t),Zt("load",t);break;case"details":Zt("toggle",t);break;case"embed":case"source":case"link":Zt("error",t),Zt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in r)if(r.hasOwnProperty(d)&&(n=r[d],n!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(ze(137,e));default:Tr(t,e,d,n,r,null)}return;default:if(fC(e)){for(u in r)r.hasOwnProperty(u)&&(n=r[u],n!==void 0&&b4(t,e,u,n,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(n=r[l],n!=null&&Tr(t,e,l,n,r,null))}function Sre(t,e,r,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,d=null,u=null;for(g in r){var h=r[g];if(r.hasOwnProperty(g)&&h!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(g)||Tr(t,e,g,null,n,h)}}for(var f in n){var g=n[f];if(h=r[f],n.hasOwnProperty(f)&&(g!=null||h!=null))switch(f){case"type":i=g;break;case"name":s=g;break;case"checked":d=g;break;case"defaultChecked":u=g;break;case"value":o=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(ze(137,e));break;default:g!==h&&Tr(t,e,f,g,n,h)}}KS(t,o,l,c,d,u,i,s);return;case"select":g=o=l=f=null;for(i in r)if(c=r[i],r.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":g=c;default:n.hasOwnProperty(i)||Tr(t,e,i,null,n,c)}for(s in n)if(i=n[s],c=r[s],n.hasOwnProperty(s)&&(i!=null||c!=null))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Tr(t,e,s,i,n,c)}e=l,r=o,n=g,f!=null?Rf(t,!!r,f,!1):!!n!=!!r&&(e!=null?Rf(t,!!r,e,!0):Rf(t,!!r,r?[]:"",!1));return;case"textarea":g=f=null;for(l in r)if(s=r[l],r.hasOwnProperty(l)&&s!=null&&!n.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Tr(t,e,l,null,n,s)}for(o in n)if(s=n[o],i=r[o],n.hasOwnProperty(o)&&(s!=null||i!=null))switch(o){case"value":f=s;break;case"defaultValue":g=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(ze(91));break;default:s!==i&&Tr(t,e,o,s,n,i)}d7(t,f,g);return;case"option":for(var x in r)if(f=r[x],r.hasOwnProperty(x)&&f!=null&&!n.hasOwnProperty(x))switch(x){case"selected":t.selected=!1;break;default:Tr(t,e,x,null,n,f)}for(c in n)if(f=n[c],g=r[c],n.hasOwnProperty(c)&&f!==g&&(f!=null||g!=null))switch(c){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Tr(t,e,c,f,n,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in r)f=r[m],r.hasOwnProperty(m)&&f!=null&&!n.hasOwnProperty(m)&&Tr(t,e,m,null,n,f);for(d in n)if(f=n[d],g=r[d],n.hasOwnProperty(d)&&f!==g&&(f!=null||g!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(ze(137,e));break;default:Tr(t,e,d,f,n,g)}return;default:if(fC(e)){for(var p in r)f=r[p],r.hasOwnProperty(p)&&f!==void 0&&!n.hasOwnProperty(p)&&b4(t,e,p,void 0,n,f);for(u in n)f=n[u],g=r[u],!n.hasOwnProperty(u)||f===g||f===void 0&&g===void 0||b4(t,e,u,f,n,g);return}}for(var b in r)f=r[b],r.hasOwnProperty(b)&&f!=null&&!n.hasOwnProperty(b)&&Tr(t,e,b,null,n,f);for(h in n)f=n[h],g=r[h],!n.hasOwnProperty(h)||f===g||f==null&&g==null||Tr(t,e,h,f,n,g)}function X6(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Are(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,r=performance.getEntriesByType("resource"),n=0;n<r.length;n++){var s=r[n],i=s.transferSize,o=s.initiatorType,l=s.duration;if(i&&l&&X6(o)){for(o=0,l=s.responseEnd,n+=1;n<r.length;n++){var c=r[n],d=c.startTime;if(d>l)break;var u=c.transferSize,h=c.initiatorType;u&&X6(h)&&(c=c.responseEnd,o+=u*(c<l?1:(l-d)/(c-d)))}if(--n,e+=8*(i+o)/(s.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var y4=null,v4=null;function k1(t){return t.nodeType===9?t:t.ownerDocument}function Y6(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pU(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function k4(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var EN=null;function Ere(){var t=window.event;return t&&t.type==="popstate"?t===EN?!1:(EN=t,!0):(EN=null,!1)}var xU=typeof setTimeout=="function"?setTimeout:void 0,Cre=typeof clearTimeout=="function"?clearTimeout:void 0,Z6=typeof Promise=="function"?Promise:void 0,Tre=typeof queueMicrotask=="function"?queueMicrotask:typeof Z6<"u"?function(t){return Z6.resolve(null).then(t).catch(Ore)}:xU;function Ore(t){setTimeout(function(){throw t})}function Id(t){return t==="head"}function Q6(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"||r==="/&"){if(n===0){t.removeChild(s),dg(e);return}n--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")n++;else if(r==="html")Yp(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Yp(r);for(var i=r.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[rb]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&i.rel.toLowerCase()==="stylesheet"||r.removeChild(i),i=o}}else r==="body"&&Yp(t.ownerDocument.body);r=s}while(r);dg(e)}function J6(t,e){var r=t;t=0;do{var n=r.nextSibling;if(r.nodeType===1?e?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(e?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=n}while(r)}function w4(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var r=e;switch(e=e.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":w4(r),hC(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Ire(t,e,r,n){for(;t.nodeType===1;){var s=r;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(n){if(!t[rb])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=mi(t.nextSibling),t===null)break}return null}function Dre(t,e,r){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=mi(t.nextSibling),t===null))return null;return t}function bU(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=mi(t.nextSibling),t===null))return null;return t}function j4(t){return t.data==="$?"||t.data==="$~"}function N4(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Mre(t,e){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||r.readyState!=="loading")e();else{var n=function(){e(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),t._reactRetry=n}}function mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var _4=null;function eD(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(e===0)return mi(t.nextSibling);e--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||e++}t=t.nextSibling}return null}function tD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(e===0)return t;e--}else r!=="/$"&&r!=="/&"||e++}t=t.previousSibling}return null}function yU(t,e,r){switch(e=k1(r),t){case"html":if(t=e.documentElement,!t)throw Error(ze(452));return t;case"head":if(t=e.head,!t)throw Error(ze(453));return t;case"body":if(t=e.body,!t)throw Error(ze(454));return t;default:throw Error(ze(451))}}function Yp(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);hC(t)}var yi=new Map,rD=new Set;function w1(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var uc=yr.d;yr.d={f:Lre,r:Rre,D:Pre,C:zre,L:$re,m:Fre,X:Ure,S:Bre,M:Kre};function Lre(){var t=uc.f(),e=B2();return t||e}function Rre(t){var e=em(t);e!==null&&e.tag===5&&e.type==="form"?hB(e):uc.r(t)}var am=typeof document>"u"?null:document;function vU(t,e,r){var n=am;if(n&&typeof e=="string"&&e){var s=ni(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof r=="string"&&(s+='[crossorigin="'+r+'"]'),rD.has(s)||(rD.add(s),t={rel:t,crossOrigin:r,href:e},n.querySelector(s)===null&&(e=n.createElement("link"),ba(e,"link",t),ra(e),n.head.appendChild(e)))}}function Pre(t){uc.D(t),vU("dns-prefetch",t,null)}function zre(t,e){uc.C(t,e),vU("preconnect",t,e)}function $re(t,e,r){uc.L(t,e,r);var n=am;if(n&&t&&e){var s='link[rel="preload"][as="'+ni(e)+'"]';e==="image"&&r&&r.imageSrcSet?(s+='[imagesrcset="'+ni(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(s+='[imagesizes="'+ni(r.imageSizes)+'"]')):s+='[href="'+ni(t)+'"]';var i=s;switch(e){case"style":i=cg(t);break;case"script":i=sm(t)}yi.has(i)||(t=nn({rel:"preload",href:e==="image"&&r&&r.imageSrcSet?void 0:t,as:e},r),yi.set(i,t),n.querySelector(s)!==null||e==="style"&&n.querySelector(lb(i))||e==="script"&&n.querySelector(cb(i))||(e=n.createElement("link"),ba(e,"link",t),ra(e),n.head.appendChild(e)))}}function Fre(t,e){uc.m(t,e);var r=am;if(r&&t){var n=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+ni(n)+'"][href="'+ni(t)+'"]',i=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=sm(t)}if(!yi.has(i)&&(t=nn({rel:"modulepreload",href:t},e),yi.set(i,t),r.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(cb(i)))return}n=r.createElement("link"),ba(n,"link",t),ra(n),r.head.appendChild(n)}}}function Bre(t,e,r){uc.S(t,e,r);var n=am;if(n&&t){var s=Lf(n).hoistableStyles,i=cg(t);e=e||"default";var o=s.get(i);if(!o){var l={loading:0,preload:null};if(o=n.querySelector(lb(i)))l.loading=5;else{t=nn({rel:"stylesheet",href:t,"data-precedence":e},r),(r=yi.get(i))&&ZC(t,r);var c=o=n.createElement("link");ra(c),ba(c,"link",t),c._p=new Promise(function(d,u){c.onload=d,c.onerror=u}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Ev(o,e,n)}o={type:"stylesheet",instance:o,count:1,state:l},s.set(i,o)}}}function Ure(t,e){uc.X(t,e);var r=am;if(r&&t){var n=Lf(r).hoistableScripts,s=sm(t),i=n.get(s);i||(i=r.querySelector(cb(s)),i||(t=nn({src:t,async:!0},e),(e=yi.get(s))&&QC(t,e),i=r.createElement("script"),ra(i),ba(i,"link",t),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(s,i))}}function Kre(t,e){uc.M(t,e);var r=am;if(r&&t){var n=Lf(r).hoistableScripts,s=sm(t),i=n.get(s);i||(i=r.querySelector(cb(s)),i||(t=nn({src:t,async:!0,type:"module"},e),(e=yi.get(s))&&QC(t,e),i=r.createElement("script"),ra(i),ba(i,"link",t),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(s,i))}}function nD(t,e,r,n){var s=(s=nd.current)?w1(s):null;if(!s)throw Error(ze(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(e=cg(r.href),r=Lf(s).hoistableStyles,n=r.get(e),n||(n={type:"style",instance:null,count:0,state:null},r.set(e,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=cg(r.href);var i=Lf(s).hoistableStyles,o=i.get(t);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,o),(i=s.querySelector(lb(t)))&&!i._p&&(o.instance=i,o.state.loading=5),yi.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},yi.set(t,r),i||Gre(s,t,r,o.state))),e&&n===null)throw Error(ze(528,""));return o}if(e&&n!==null)throw Error(ze(529,""));return null;case"script":return e=r.async,r=r.src,typeof r=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=sm(r),r=Lf(s).hoistableScripts,n=r.get(e),n||(n={type:"script",instance:null,count:0,state:null},r.set(e,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(ze(444,t))}}function cg(t){return'href="'+ni(t)+'"'}function lb(t){return'link[rel="stylesheet"]['+t+"]"}function kU(t){return nn({},t,{"data-precedence":t.precedence,precedence:null})}function Gre(t,e,r,n){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?n.loading=1:(e=t.createElement("link"),n.preload=e,e.addEventListener("load",function(){return n.loading|=1}),e.addEventListener("error",function(){return n.loading|=2}),ba(e,"link",r),ra(e),t.head.appendChild(e))}function sm(t){return'[src="'+ni(t)+'"]'}function cb(t){return"script[async]"+t}function aD(t,e,r){if(e.count++,e.instance===null)switch(e.type){case"style":var n=t.querySelector('style[data-href~="'+ni(r.href)+'"]');if(n)return e.instance=n,ra(n),n;var s=nn({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return n=(t.ownerDocument||t).createElement("style"),ra(n),ba(n,"style",s),Ev(n,r.precedence,t),e.instance=n;case"stylesheet":s=cg(r.href);var i=t.querySelector(lb(s));if(i)return e.state.loading|=4,e.instance=i,ra(i),i;n=kU(r),(s=yi.get(s))&&ZC(n,s),i=(t.ownerDocument||t).createElement("link"),ra(i);var o=i;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),ba(i,"link",n),e.state.loading|=4,Ev(i,r.precedence,t),e.instance=i;case"script":return i=sm(r.src),(s=t.querySelector(cb(i)))?(e.instance=s,ra(s),s):(n=r,(s=yi.get(i))&&(n=nn({},r),QC(n,s)),t=t.ownerDocument||t,s=t.createElement("script"),ra(s),ba(s,"link",n),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(ze(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(n=e.instance,e.state.loading|=4,Ev(n,r.precedence,t));return e.instance}function Ev(t,e,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,i=s,o=0;o<n.length;o++){var l=n[o];if(l.dataset.precedence===e)i=l;else if(i!==s)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=r.nodeType===9?r.head:r,e.insertBefore(t,e.firstChild))}function ZC(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function QC(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Cv=null;function sD(t,e,r){if(Cv===null){var n=new Map,s=Cv=new Map;s.set(r,n)}else s=Cv,n=s.get(r),n||(n=new Map,s.set(r,n));if(n.has(t))return n;for(n.set(t,null),r=r.getElementsByTagName(t),s=0;s<r.length;s++){var i=r[s];if(!(i[rb]||i[ma]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var o=i.getAttribute(e)||"";o=t+o;var l=n.get(o);l?l.push(i):n.set(o,[i])}}return n}function iD(t,e,r){t=t.ownerDocument||t,t.head.insertBefore(r,e==="title"?t.querySelector("head > title"):null)}function qre(t,e,r){if(r===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function wU(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function Vre(t,e,r,n){if(r.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(r.state.loading&4)){if(r.instance===null){var s=cg(n.href),i=e.querySelector(lb(s));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=j1.bind(t),e.then(t,t)),r.state.loading|=4,r.instance=i,ra(i);return}i=e.ownerDocument||e,n=kU(n),(s=yi.get(s))&&ZC(n,s),i=i.createElement("link"),ra(i);var o=i;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),ba(i,"link",n),r.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,e),(e=r.state.preload)&&!(r.state.loading&3)&&(t.count++,r=j1.bind(t),e.addEventListener("load",r),e.addEventListener("error",r))}}var CN=0;function Hre(t,e){return t.stylesheets&&t.count===0&&Tv(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var n=setTimeout(function(){if(t.stylesheets&&Tv(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&CN===0&&(CN=62500*Are());var s=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Tv(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>CN?50:800)+e);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(n),clearTimeout(s)}}:null}function j1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Tv(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var N1=null;function Tv(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,N1=new Map,e.forEach(Wre,t),N1=null,j1.call(t))}function Wre(t,e){if(!(e.state.loading&4)){var r=N1.get(t);if(r)var n=r.get(null);else{r=new Map,N1.set(t,r);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var o=s[i];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(r.set(o.dataset.precedence,o),n=o)}n&&r.set(null,n)}s=e.instance,o=s.getAttribute("data-precedence"),i=r.get(o)||n,i===n&&r.set(null,s),r.set(o,s),this.count++,n=j1.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),i?i.parentNode.insertBefore(s,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var O0={$$typeof:El,Provider:null,Consumer:null,_currentValue:_u,_currentValue2:_u,_threadCount:0};function Xre(t,e,r,n,s,i,o,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qj(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qj(0),this.hiddenUpdates=Qj(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function jU(t,e,r,n,s,i,o,l,c,d,u,h){return t=new Xre(t,e,r,o,c,d,u,h,l),e=1,i===!0&&(e|=24),i=Ss(3,null,null,e),t.current=i,i.stateNode=t,e=NC(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:n,isDehydrated:r,cache:e},AC(i),t}function NU(t){return t?(t=yf,t):yf}function _U(t,e,r,n,s,i){s=NU(s),n.context===null?n.context=s:n.pendingContext=s,n=sd(e),n.payload={element:r},i=i===void 0?null:i,i!==null&&(n.callback=i),r=id(t,n,e),r!==null&&(cs(r,t,e),Up(r,t,e))}function oD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function JC(t,e){oD(t,e),(t=t.alternate)&&oD(t,e)}function SU(t){if(t.tag===13||t.tag===31){var e=ch(t,67108864);e!==null&&cs(e,t,67108864),JC(t,67108864)}}function lD(t){if(t.tag===13||t.tag===31){var e=Ps();e=dC(e);var r=ch(t,e);r!==null&&cs(r,t,e),JC(t,e)}}var _1=!0;function Yre(t,e,r,n){var s=Ct.T;Ct.T=null;var i=yr.p;try{yr.p=2,e5(t,e,r,n)}finally{yr.p=i,Ct.T=s}}function Zre(t,e,r,n){var s=Ct.T;Ct.T=null;var i=yr.p;try{yr.p=8,e5(t,e,r,n)}finally{yr.p=i,Ct.T=s}}function e5(t,e,r,n){if(_1){var s=S4(n);if(s===null)AN(t,e,n,S1,r),cD(t,n);else if(Jre(s,t,e,r,n))n.stopPropagation();else if(cD(t,n),e&4&&-1<Qre.indexOf(t)){for(;s!==null;){var i=em(s);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var o=iu(i.pendingLanes);if(o!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-Rs(o);l.entanglements[1]|=c,o&=~c}sl(i),!(br&6)&&(m1=Ms()+500,ob(0))}}break;case 31:case 13:l=ch(i,2),l!==null&&cs(l,i,2),B2(),JC(i,2)}if(i=S4(n),i===null&&AN(t,e,n,S1,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else AN(t,e,n,null,r)}}function S4(t){return t=gC(t),t5(t)}var S1=null;function t5(t){if(S1=null,t=ff(t),t!==null){var e=Qx(t);if(e===null)t=null;else{var r=e.tag;if(r===13){if(t=VF(e),t!==null)return t;t=null}else if(r===31){if(t=HF(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return S1=t,null}function AU(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pee()){case ZF:return 2;case QF:return 8;case t1:case zee:return 32;case JF:return 268435456;default:return 32}default:return 32}}var A4=!1,cd=null,dd=null,ud=null,I0=new Map,D0=new Map,zc=[],Qre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cD(t,e){switch(t){case"focusin":case"focusout":cd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":ud=null;break;case"pointerover":case"pointerout":I0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":D0.delete(e.pointerId)}}function Ym(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=em(e),e!==null&&SU(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Jre(t,e,r,n,s){switch(e){case"focusin":return cd=Ym(cd,t,e,r,n,s),!0;case"dragenter":return dd=Ym(dd,t,e,r,n,s),!0;case"mouseover":return ud=Ym(ud,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return I0.set(i,Ym(I0.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,D0.set(i,Ym(D0.get(i)||null,t,e,r,n,s)),!0}return!1}function EU(t){var e=ff(t.target);if(e!==null){var r=Qx(e);if(r!==null){if(e=r.tag,e===13){if(e=VF(r),e!==null){t.blockedOn=e,HI(t.priority,function(){lD(r)});return}}else if(e===31){if(e=HF(r),e!==null){t.blockedOn=e,HI(t.priority,function(){lD(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ov(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=S4(t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);qS=n,r.target.dispatchEvent(n),qS=null}else return e=em(r),e!==null&&SU(e),t.blockedOn=r,!1;e.shift()}return!0}function dD(t,e,r){Ov(t)&&r.delete(e)}function ene(){A4=!1,cd!==null&&Ov(cd)&&(cd=null),dd!==null&&Ov(dd)&&(dd=null),ud!==null&&Ov(ud)&&(ud=null),I0.forEach(dD),D0.forEach(dD)}function xy(t,e){t.blockedOn===e&&(t.blockedOn=null,A4||(A4=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,ene)))}var by=null;function uD(t){by!==t&&(by=t,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,function(){by===t&&(by=null);for(var e=0;e<t.length;e+=3){var r=t[e],n=t[e+1],s=t[e+2];if(typeof n!="function"){if(t5(n||r)===null)continue;break}var i=em(r);i!==null&&(t.splice(e,3),e-=3,o4(i,{pending:!0,data:s,method:r.method,action:n},n,s))}}))}function dg(t){function e(c){return xy(c,t)}cd!==null&&xy(cd,t),dd!==null&&xy(dd,t),ud!==null&&xy(ud,t),I0.forEach(e),D0.forEach(e);for(var r=0;r<zc.length;r++){var n=zc[r];n.blockedOn===t&&(n.blockedOn=null)}for(;0<zc.length&&(r=zc[0],r.blockedOn===null);)EU(r),r.blockedOn===null&&zc.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(n=0;n<r.length;n+=3){var s=r[n],i=r[n+1],o=s[us]||null;if(typeof i=="function")o||uD(r);else if(o){var l=null;if(i&&i.hasAttribute("formAction")){if(s=i,o=i[us]||null)l=o.formAction;else if(t5(s)!==null)continue}else l=o.action;typeof l=="function"?r[n+1]=l:(r.splice(n,3),n-=3),uD(r)}}}function CU(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(o){return s=o})},focusReset:"manual",scroll:"manual"})}function e(){s!==null&&(s(),s=null),n||setTimeout(r,20)}function r(){if(!n&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,s=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(r,100),function(){n=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),s!==null&&(s(),s=null)}}}function r5(t){this._internalRoot=t}G2.prototype.render=r5.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ze(409));var r=e.current,n=Ps();_U(r,n,t,e,null,null)};G2.prototype.unmount=r5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_U(t.current,2,null,t,null,null),B2(),e[Jg]=null}};function G2(t){this._internalRoot=t}G2.prototype.unstable_scheduleHydration=function(t){if(t){var e=a7();t={blockedOn:null,target:t,priority:e};for(var r=0;r<zc.length&&e!==0&&e<zc[r].priority;r++);zc.splice(r,0,t),r===0&&EU(t)}};var hD=GF.version;if(hD!=="19.2.4")throw Error(ze(527,hD,"19.2.4"));yr.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ze(188)):(t=Object.keys(t).join(","),Error(ze(268,t)));return t=Tee(e),t=t!==null?WF(t):null,t=t===null?null:t.stateNode,t};var tne={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Ct,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yy.isDisabled&&yy.supportsFiber)try{Jx=yy.inject(tne),Ls=yy}catch{}}A2.createRoot=function(t,e){if(!qF(t))throw Error(ze(299));var r=!1,n="",s=vB,i=kB,o=wB;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=jU(t,1,!1,null,null,r,n,null,s,i,o,CU),t[Jg]=e.current,YC(t),new r5(e)};A2.hydrateRoot=function(t,e,r){if(!qF(t))throw Error(ze(299));var n=!1,s="",i=vB,o=kB,l=wB,c=null;return r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onUncaughtError!==void 0&&(i=r.onUncaughtError),r.onCaughtError!==void 0&&(o=r.onCaughtError),r.onRecoverableError!==void 0&&(l=r.onRecoverableError),r.formState!==void 0&&(c=r.formState)),e=jU(t,1,!0,e,r??null,n,s,c,i,o,l,CU),e.context=NU(null),r=e.current,n=Ps(),n=dC(n),s=sd(n),s.callback=null,id(r,s,n),r=n,e.current.lanes=r,tb(e,r),sl(e),t[Jg]=e.current,YC(t),new G2(e)};A2.version="19.2.4";function TU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TU)}catch(t){console.error(t)}}TU(),TF.exports=A2;var rne=TF.exports;const nne=(t,e,r,n)=>{var i,o,l,c;const s=[r,{code:e,...n||{}}];if((o=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&o.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);Tu(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(c=(l=t==null?void 0:t.services)==null?void 0:l.logger)!=null&&c.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},fD={},E4=(t,e,r,n)=>{Tu(r)&&fD[r]||(Tu(r)&&(fD[r]=new Date),nne(t,e,r,n))},OU=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},C4=(t,e,r)=>{t.loadNamespaces(e,OU(t,r))},gD=(t,e,r,n)=>{if(Tu(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return C4(t,r,n);r.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,OU(t,n))},ane=(t,e,r={})=>!e.languages||!e.languages.length?(E4(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(n,s)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,t))return!1}}),Tu=t=>typeof t=="string",sne=t=>typeof t=="object"&&t!==null,ine=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,one={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},lne=t=>one[t],cne=t=>t.replace(ine,lne);let T4={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:cne};const dne=(t={})=>{T4={...T4,...t}},une=()=>T4;let IU;const hne=t=>{IU=t},fne=()=>IU,gne={type:"3rdParty",init(t){dne(t.options.react),hne(t)}},DU=N.createContext();class mne{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const pne=(t,e)=>{const r=N.useRef();return N.useEffect(()=>{r.current=t},[t,e]),r.current},MU=(t,e,r,n)=>t.getFixedT(e,r,n),xne=(t,e,r,n)=>N.useCallback(MU(t,e,r,n),[t,e,r,n]),nt=(t,e={})=>{var w,k,j,_;const{i18n:r}=e,{i18n:n,defaultNS:s}=N.useContext(DU)||{},i=r||n||fne();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new mne),!i){E4(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const S=(T,E)=>Tu(E)?E:sne(E)&&Tu(E.defaultValue)?E.defaultValue:Array.isArray(T)?T[T.length-1]:T,A=[S,{},!1];return A.t=S,A.i18n={},A.ready=!1,A}(w=i.options.react)!=null&&w.wait&&E4(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...une(),...i.options.react,...e},{useSuspense:l,keyPrefix:c}=o;let d=s||((k=i.options)==null?void 0:k.defaultNS);d=Tu(d)?[d]:d||["translation"],(_=(j=i.reportNamespaces).addUsedNamespaces)==null||_.call(j,d);const u=(i.isInitialized||i.initializedStoreOnce)&&d.every(S=>ane(S,i,o)),h=xne(i,e.lng||null,o.nsMode==="fallback"?d:d[0],c),f=()=>h,g=()=>MU(i,e.lng||null,o.nsMode==="fallback"?d:d[0],c),[x,m]=N.useState(f);let p=d.join();e.lng&&(p=`${e.lng}${p}`);const b=pne(p),v=N.useRef(!0);N.useEffect(()=>{const{bindI18n:S,bindI18nStore:A}=o;v.current=!0,!u&&!l&&(e.lng?gD(i,e.lng,d,()=>{v.current&&m(g)}):C4(i,d,()=>{v.current&&m(g)})),u&&b&&b!==p&&v.current&&m(g);const T=()=>{v.current&&m(g)};return S&&(i==null||i.on(S,T)),A&&(i==null||i.store.on(A,T)),()=>{v.current=!1,i&&S&&(S==null||S.split(" ").forEach(E=>i.off(E,T))),A&&i&&A.split(" ").forEach(E=>i.store.off(E,T))}},[i,p]),N.useEffect(()=>{v.current&&u&&m(f)},[i,c,u]);const y=[x,i,u];if(y.t=x,y.i18n=i,y.ready=u,u||!u&&!l)return y;throw new Promise(S=>{e.lng?gD(i,e.lng,d,()=>S()):C4(i,d,()=>S())})};function bne({i18n:t,defaultNS:e,children:r}){const n=N.useMemo(()=>({i18n:t,defaultNS:e}),[t,e]);return N.createElement(DU.Provider,{value:n},r)}const Mt=t=>typeof t=="string",Zm=()=>{let t,e;const r=new Promise((n,s)=>{t=n,e=s});return r.resolve=t,r.reject=e,r},mD=t=>t==null?"":""+t,yne=(t,e,r)=>{t.forEach(n=>{e[n]&&(r[n]=e[n])})},vne=/###/g,pD=t=>t&&t.indexOf("###")>-1?t.replace(vne,"."):t,xD=t=>!t||Mt(t),Zp=(t,e,r)=>{const n=Mt(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(xD(t))return{};const i=pD(n[s]);!t[i]&&r&&(t[i]=new r),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return xD(t)?{}:{obj:t,k:pD(n[s])}},bD=(t,e,r)=>{const{obj:n,k:s}=Zp(t,e,Object);if(n!==void 0||e.length===1){n[s]=r;return}let i=e[e.length-1],o=e.slice(0,e.length-1),l=Zp(t,o,Object);for(;l.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),l=Zp(t,o,Object),l&&l.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=r},kne=(t,e,r,n)=>{const{obj:s,k:i}=Zp(t,e,Object);s[i]=s[i]||[],s[i].push(r)},A1=(t,e)=>{const{obj:r,k:n}=Zp(t,e);if(r)return r[n]},wne=(t,e,r)=>{const n=A1(t,r);return n!==void 0?n:A1(e,r)},LU=(t,e,r)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?Mt(t[n])||t[n]instanceof String||Mt(e[n])||e[n]instanceof String?r&&(t[n]=e[n]):LU(t[n],e[n],r):t[n]=e[n]);return t},$h=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var jne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Nne=t=>Mt(t)?t.replace(/[&<>"'\/]/g,e=>jne[e]):t;class _ne{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Sne=[" ",",","?","!",";"],Ane=new _ne(20),Ene=(t,e,r)=>{e=e||"",r=r||"";const n=Sne.filter(o=>e.indexOf(o)<0&&r.indexOf(o)<0);if(n.length===0)return!0;const s=Ane.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(r);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},O4=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const n=e.split(r);let s=t;for(let i=0;i<n.length;){if(!s||typeof s!="object")return;let o,l="";for(let c=i;c<n.length;++c)if(c!==i&&(l+=r),l+=n[c],o=s[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<n.length-1)continue;i+=c-i+1;break}s=o}return s},E1=t=>t&&t.replace("_","-"),Cne={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class C1{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,r)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=e||Cne,this.options=r,this.debug=r.debug}log(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"log","",!0)}warn(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","",!0)}error(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"error","")}deprecate(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,n,s){return s&&!this.debug?null:(Mt(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new C1(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new C1(this.logger,e)}}var Co=new C1;let q2=class{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(r)||0;this.observers[n].set(r,s+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[l,c]=o;for(let d=0;d<c;d++)l(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[l,c]=o;for(let d=0;d<c;d++)l.apply(l,[e,...n])})}};class yD extends q2{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,r],n&&(Array.isArray(n)?l.push(...n):Mt(n)&&i?l.push(...n.split(i)):l.push(n)));const c=A1(this.data,l);return!c&&!r&&!n&&e.indexOf(".")>-1&&(e=l[0],r=l[1],n=l.slice(2).join(".")),c||!o||!Mt(n)?c:O4(this.data&&this.data[e]&&this.data[e][r],n,i)}addResource(e,r,n,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[e,r];n&&(l=l.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(l=e.split("."),s=r,r=l[1]),this.addNamespaces(r),bD(this.data,l,s),i.silent||this.emit("added",e,r,n,s)}addResources(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(Mt(n[i])||Array.isArray(n[i]))&&this.addResource(e,r,i,n[i],{silent:!0});s.silent||this.emit("added",e,r,n)}addResourceBundle(e,r,n,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,r];e.indexOf(".")>-1&&(l=e.split("."),s=n,n=r,r=l[1]),this.addNamespaces(r);let c=A1(this.data,l)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?LU(c,n,i):c={...c,...n},bD(this.data,l,c),o.silent||this.emit("added",e,r,n)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,r)}:this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(s=>r[s]&&Object.keys(r[s]).length>0)}toJSON(){return this.data}}var RU={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,n,s){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,r,n,s))}),e}};const vD={};class T1 extends q2{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),yne(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Co.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,r);return n&&n.res!==void 0}extractFromKey(e,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let i=r.ns||this.options.defaultNS||[];const o=n&&e.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!Ene(e,n,s);if(o&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Mt(i)?[i]:i};const d=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),e=d.join(s)}return{key:e,namespaces:Mt(i)?[i]:i}}translate(e,r,n){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],r),c=l[l.length-1],d=r.lng||this.language,u=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(u){const w=r.nsSeparator||this.options.nsSeparator;return s?{res:`${c}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:`${c}${w}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:o}const h=this.resolve(e,r);let f=h&&h.res;const g=h&&h.usedKey||o,x=h&&h.exactUsedKey||o,m=Object.prototype.toString.apply(f),p=["[object Number]","[object Function]","[object RegExp]"],b=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!Mt(f)&&typeof f!="boolean"&&typeof f!="number";if(v&&f&&y&&p.indexOf(m)<0&&!(Mt(b)&&Array.isArray(f))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,f,{...r,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(h.res=w,h.usedParams=this.getUsedParamsDetails(r),h):w}if(i){const w=Array.isArray(f),k=w?[]:{},j=w?x:g;for(const _ in f)if(Object.prototype.hasOwnProperty.call(f,_)){const S=`${j}${i}${_}`;k[_]=this.translate(S,{...r,joinArrays:!1,ns:l}),k[_]===S&&(k[_]=f[_])}f=k}}else if(v&&Mt(b)&&Array.isArray(f))f=f.join(b),f&&(f=this.extendTranslation(f,e,r,n));else{let w=!1,k=!1;const j=r.count!==void 0&&!Mt(r.count),_=T1.hasDefaultValue(r),S=j?this.pluralResolver.getSuffix(d,r.count,r):"",A=r.ordinal&&j?this.pluralResolver.getSuffix(d,r.count,{ordinal:!1}):"",T=j&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),E=T&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${S}`]||r[`defaultValue${A}`]||r.defaultValue;!this.isValidLookup(f)&&_&&(w=!0,f=E),this.isValidLookup(f)||(k=!0,f=o);const z=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:f,M=_&&E!==f&&this.options.updateMissing;if(k||w||M){if(this.logger.log(M?"updateKey":"missingKey",d,c,o,M?E:f),i){const K=this.resolve(o,{...r,keySeparator:!1});K&&K.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let F=[];const D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&D&&D[0])for(let K=0;K<D.length;K++)F.push(D[K]);else this.options.saveMissingTo==="all"?F=this.languageUtils.toResolveHierarchy(r.lng||this.language):F.push(r.lng||this.language);const L=(K,$,R)=>{const Y=_&&R!==f?R:z;this.options.missingKeyHandler?this.options.missingKeyHandler(K,c,$,Y,M,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(K,c,$,Y,M,r),this.emit("missingKey",K,c,$,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?F.forEach(K=>{const $=this.pluralResolver.getSuffixes(K,r);T&&r[`defaultValue${this.options.pluralSeparator}zero`]&&$.indexOf(`${this.options.pluralSeparator}zero`)<0&&$.push(`${this.options.pluralSeparator}zero`),$.forEach(R=>{L([K],o+R,r[`defaultValue${R}`]||E)})}):L(F,o,E))}f=this.extendTranslation(f,e,r,h,n),k&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${c}:${o}`),(k||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,w?f:void 0):f=this.options.parseMissingKeyHandler(f))}return s?(h.res=f,h.usedParams=this.getUsedParamsDetails(r),h):f}extendTranslation(e,r,n,s,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Mt(e)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const f=e.match(this.interpolator.nestingRegexp);u=f&&f.length}let h=n.replace&&!Mt(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,n.lng||this.language||s.usedLng,n),d){const f=e.match(this.interpolator.nestingRegexp),g=f&&f.length;u<g&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,g=new Array(f),x=0;x<f;x++)g[x]=arguments[x];return i&&i[0]===g[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${r[0]}`),null):o.translate(...g,r)},n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=Mt(l)?[l]:l;return e!=null&&c&&c.length&&n.applyPostProcessor!==!1&&(e=RU.handle(c,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,s,i,o,l;return Mt(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const d=this.extractFromKey(c,r),u=d.key;s=u;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=r.count!==void 0&&!Mt(r.count),g=f&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),x=r.context!==void 0&&(Mt(r.context)||typeof r.context=="number")&&r.context!=="",m=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);h.forEach(p=>{this.isValidLookup(n)||(l=p,!vD[`${m[0]}-${p}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(vD[`${m[0]}-${p}`]=!0,this.logger.warn(`key "${s}" for languages "${m.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(b=>{if(this.isValidLookup(n))return;o=b;const v=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(v,u,b,p,r);else{let w;f&&(w=this.pluralResolver.getSuffix(b,r.count,r));const k=`${this.options.pluralSeparator}zero`,j=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(v.push(u+w),r.ordinal&&w.indexOf(j)===0&&v.push(u+w.replace(j,this.options.pluralSeparator)),g&&v.push(u+k)),x){const _=`${u}${this.options.contextSeparator}${r.context}`;v.push(_),f&&(v.push(_+w),r.ordinal&&w.indexOf(j)===0&&v.push(_+w.replace(j,this.options.pluralSeparator)),g&&v.push(_+k))}}let y;for(;y=v.pop();)this.isValidLookup(n)||(i=y,n=this.getResource(b,p,y,r))}))})}),{res:n,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,r,n,s):this.resourceStore.getResource(e,r,n,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Mt(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const i of r)delete s[i]}return s}static hasDefaultValue(e){const r="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r===n.substring(0,r.length)&&e[n]!==void 0)return!0;return!1}}const TN=t=>t.charAt(0).toUpperCase()+t.slice(1);class kD{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Co.create("languageUtils")}getScriptPartFromCode(e){if(e=E1(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=E1(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(Mt(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const r=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(s=>s.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=TN(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=TN(n[1].toLowerCase())),r.indexOf(n[2].toLowerCase())>-1&&(n[2]=TN(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(n=>{if(r)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(r=s)}),!r&&this.options.supportedLngs&&e.forEach(n=>{if(r)return;const s=this.getLanguagePartFromCode(n);if(this.isSupportedCode(s))return r=s;r=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),Mt(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}toResolveHierarchy(e,r){const n=this.getFallbackCodes(r||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Mt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):Mt(e)&&i(this.formatLanguageCode(e)),n.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}let Tne=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],One={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const Ine=["v1","v2","v3"],Dne=["v4"],wD={zero:0,one:1,two:2,few:3,many:4,other:5},Mne=()=>{const t={};return Tne.forEach(e=>{e.lngs.forEach(r=>{t[r]={numbers:e.nr,plurals:One[e.fc]}})}),t};class Lne{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=r,this.logger=Co.create("pluralResolver"),(!this.options.compatibilityJSON||Dne.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Mne(),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=E1(e==="dev"?"en":e),s=r.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(n,{type:s})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,r)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,r);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(s=>`${r}${s}`)}getSuffixes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,r);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((s,i)=>wD[s]-wD[i]).map(s=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s}`):n.numbers.map(s=>this.getSuffix(e,s,r)):[]}getSuffix(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,n);return s?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(r)}`:this.getSuffixRetroCompatible(s,r):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,r){const n=e.noAbs?e.plurals(r):e.plurals(Math.abs(r));let s=e.numbers[n];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const i=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!Ine.includes(this.options.compatibilityJSON)}}const jD=function(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=wne(t,e,r);return!i&&s&&Mt(r)&&(i=O4(t,r,n),i===void 0&&(i=O4(e,r,n))),i},ON=t=>t.replace(/\$/g,"$$$$");class Rne{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Co.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:g,nestingSuffix:x,nestingSuffixEscaped:m,nestingOptionsSeparator:p,maxReplaces:b,alwaysFormat:v}=e.interpolation;this.escape=r!==void 0?r:Nne,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?$h(i):o||"{{",this.suffix=l?$h(l):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?$h(f):g||$h("$t("),this.nestingSuffix=x?$h(x):m||$h(")"),this.nestingOptionsSeparator=p||",",this.maxReplaces=b||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,n)=>r&&r.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,n,s){let i,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=g=>{if(g.indexOf(this.formatSeparator)<0){const b=jD(r,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,n,{...s,...r,interpolationkey:g}):b}const x=g.split(this.formatSeparator),m=x.shift().trim(),p=x.join(this.formatSeparator).trim();return this.format(jD(r,c,m,this.options.keySeparator,this.options.ignoreJSONStructure),p,n,{...s,...r,interpolationkey:m})};this.resetRegExp();const u=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,h=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>ON(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?ON(this.escape(g)):ON(g)}].forEach(g=>{for(l=0;i=g.regex.exec(e);){const x=i[1].trim();if(o=d(x),o===void 0)if(typeof u=="function"){const p=u(e,i,s);o=Mt(p)?p:""}else if(s&&Object.prototype.hasOwnProperty.call(s,x))o="";else if(h){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),o="";else!Mt(o)&&!this.useRawValueToEscape&&(o=mD(o));const m=g.safeValue(o);if(e=e.replace(i[0],m),h?(g.regex.lastIndex+=o.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,o;const l=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const h=c.split(new RegExp(`${u}[ ]*{`));let f=`{${h[1]}`;c=h[0],f=this.interpolate(f,o);const g=f.match(/'/g),x=f.match(/"/g);(g&&g.length%2===0&&!x||x.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),d&&(o={...d,...o})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,m),`${c}${u}${f}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];o={...n},o=o.replace&&!Mt(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let d=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const u=s[1].split(this.formatSeparator).map(h=>h.trim());s[1]=u.shift(),c=u,d=!0}if(i=r(l.call(this,s[1].trim(),o),o),i&&s[0]===e&&!Mt(i))return i;Mt(i)||(i=mD(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),d&&(i=c.reduce((u,h)=>this.format(u,h,n.lng,{...n,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const Pne=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?r.currency||(r.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?r.range||(r.range=s.trim()):s.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=l.trim();r[u]||(r[u]=d),d==="false"&&(r[u]=!1),d==="true"&&(r[u]=!0),isNaN(d)||(r[u]=parseInt(d,10))}})}return{formatName:e,formatOptions:r}},Fh=t=>{const e={};return(r,n,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=n+JSON.stringify(i);let l=e[o];return l||(l=t(E1(n),s),e[o]=l),l(r)}};class zne{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Co.create("formatter"),this.options=e,this.formats={number:Fh((r,n)=>{const s=new Intl.NumberFormat(r,{...n});return i=>s.format(i)}),currency:Fh((r,n)=>{const s=new Intl.NumberFormat(r,{...n,style:"currency"});return i=>s.format(i)}),datetime:Fh((r,n)=>{const s=new Intl.DateTimeFormat(r,{...n});return i=>s.format(i)}),relativetime:Fh((r,n)=>{const s=new Intl.RelativeTimeFormat(r,{...n});return i=>s.format(i,n.range||"day")}),list:Fh((r,n)=>{const s=new Intl.ListFormat(r,{...n});return i=>s.format(i)})},this.init(e)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=r.interpolation.formatSeparator||","}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Fh(r)}format(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=r.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,c)=>{const{formatName:d,formatOptions:u}=Pne(c);if(this.formats[d]){let h=l;try{const f=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},g=f.locale||f.lng||s.locale||s.lng||n;h=this.formats[d](l,g,{...u,...s,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn(`there was no format function for ${d}`);return l},e)}}const $ne=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Fne extends q2{constructor(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Co.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,s.backend,s)}queueLoad(e,r,n,s){const i={},o={},l={},c={};return e.forEach(d=>{let u=!0;r.forEach(h=>{const f=`${d}|${h}`;!n.reload&&this.store.hasResourceBundle(d,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,u=!1,o[f]===void 0&&(o[f]=!0),i[f]===void 0&&(i[f]=!0),c[h]===void 0&&(c[h]=!0)))}),u||(l[d]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,r,n){const s=e.split("|"),i=s[0],o=s[1];r&&this.emit("failedLoading",i,o,r),!r&&n&&this.store.addResourceBundle(i,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&n&&(this.state[e]=0);const l={};this.queue.forEach(c=>{kne(c.loaded,[i],o),$ne(c,e),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{l[d]||(l[d]={});const u=c.loaded[d];u.length&&u.forEach(h=>{l[d][h]===void 0&&(l[d][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:n,tried:s,wait:i,callback:o});return}this.readingCalls++;const l=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&u&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,n,s+1,i*2,o)},i);return}o(d,u)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const d=c(e,r);d&&typeof d.then=="function"?d.then(u=>l(null,u)).catch(l):l(null,d)}catch(d){l(d)}return}return c(e,r,l)}prepareLoading(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Mt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Mt(r)&&(r=[r]);const i=this.queueLoad(e,r,n,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,r,n){this.prepareLoading(e,r,{},n)}reload(e,r,n){this.prepareLoading(e,r,{reload:!0},n)}loadOne(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),s=n[0],i=n[1];this.read(s,i,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${r}loading namespace ${i} for language ${s} failed`,o),!o&&l&&this.logger.log(`${r}loaded namespace ${i} for language ${s}`,l),this.loaded(e,o,l)})}saveMissing(e,r,n,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const c={...o,isUpdate:i},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(e,r,n,s,c):u=d(e,r,n,s),u&&typeof u.then=="function"?u.then(h=>l(null,h)).catch(l):l(null,u)}catch(u){l(u)}else d(e,r,n,s,l,c)}!e||!e[0]||this.store.addResource(e[0],r,n,s)}}}const ND=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Mt(t[1])&&(e.defaultValue=t[1]),Mt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(n=>{e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),_D=t=>(Mt(t.ns)&&(t.ns=[t.ns]),Mt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Mt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),vy=()=>{},Bne=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class M0 extends q2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=_D(e),this.services={},this.logger=Co,this.modules={external:[]},Bne(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(){var e=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(n=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(Mt(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const s=ND();this.options={...s,...this.options,..._D(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Co.init(i(this.modules.logger),this.options):Co.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=zne);const h=new kD(this.options);this.store=new yD(this.options.resources,this.options);const f=this.services;f.logger=Co,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new Lne(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(f.formatter=i(u),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new Rne(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Fne(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(g){for(var x=arguments.length,m=new Array(x>1?x-1:0),p=1;p<x;p++)m[p-1]=arguments[p];e.emit(g,...m)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new T1(this.services,this.options),this.translator.on("*",function(g){for(var x=arguments.length,m=new Array(x>1?x-1:0),p=1;p<x;p++)m[p-1]=arguments[p];e.emit(g,...m)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=vy),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const c=Zm(),d=()=>{const u=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(f),n(h,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),c}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vy;const s=Mt(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&i.indexOf(d)<0&&i.push(d)})};s?o(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload&&this.options.preload.forEach(l=>o(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(e,r,n){const s=Zm();return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),n||(n=vy),this.services.backendConnector.reload(e,r,i=>{s.resolve(),n(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&RU.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,r){var n=this;this.isLanguageChangingTo=e;const s=Zm();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,d)=>{d?(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,s.resolve(function(){return n.t(...arguments)}),r&&r(c,function(){return n.t(...arguments)})},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const d=Mt(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,u=>{o(u,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),s}getFixedT(e,r,n){var s=this;const i=function(o,l){let c;if(typeof l!="object"){for(var d=arguments.length,u=new Array(d>2?d-2:0),h=2;h<d;h++)u[h-2]=arguments[h];c=s.options.overloadTranslationOptionHandler([o,l].concat(u))}else c={...l};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||i.keyPrefix);const f=s.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(o)?g=o.map(x=>`${c.keyPrefix}${f}${x}`):g=c.keyPrefix?`${c.keyPrefix}${f}${o}`:o,s.t(g,c)};return Mt(e)?i.lng=e:i.lngs=e,i.ns=r,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const d=this.services.backendConnector.state[`${l}|${c}`];return d===-1||d===0||d===2};if(r.precheck){const l=r.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,e)&&(!s||o(i,e)))}loadNamespaces(e,r){const n=Zm();return this.options.ns?(Mt(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}loadLanguages(e,r){const n=Zm();Mt(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{n.resolve(),r&&r(o)}),n):(r&&r(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new kD(ND());return r.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new M0(e,r)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vy;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new M0(s);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new yD(this.store.data,s),i.services.resourceStore=i.store),i.translator=new T1(i.services,s),i.translator.on("*",function(l){for(var c=arguments.length,d=new Array(c>1?c-1:0),u=1;u<c;u++)d[u-1]=arguments[u];i.emit(l,...d)}),i.init(s,r),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const jn=M0.createInstance();jn.createInstance=M0.createInstance;jn.createInstance;jn.dir;jn.init;jn.loadResources;jn.reloadResources;jn.use;jn.changeLanguage;jn.getFixedT;jn.t;jn.exists;jn.setDefaultNamespace;jn.hasLoadedNamespace;jn.loadNamespaces;jn.loadLanguages;function Une(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L0(t){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L0(t)}function Kne(t,e){if(L0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(L0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Gne(t){var e=Kne(t,"string");return L0(e)=="symbol"?e:e+""}function qne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gne(n.key),n)}}function Vne(t,e,r){return e&&qne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var PU=[],Hne=PU.forEach,Wne=PU.slice;function Xne(t){return Hne.call(Wne.call(arguments,1),function(e){if(e)for(var r in e)t[r]===void 0&&(t[r]=e[r])}),t}var SD=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Yne=function(e,r,n){var s=n||{};s.path=s.path||"/";var i=encodeURIComponent(r),o="".concat(e,"=").concat(i);if(s.maxAge>0){var l=s.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(l))}if(s.domain){if(!SD.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(s.domain)}if(s.path){if(!SD.test(s.path))throw new TypeError("option path is invalid");o+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.sameSite){var c=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(c){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},AD={create:function(e,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),s&&(i.domain=s),document.cookie=Yne(e,encodeURIComponent(r),i)},read:function(e){for(var r="".concat(e,"="),n=document.cookie.split(";"),s=0;s<n.length;s++){for(var i=n[s];i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(r)===0)return i.substring(r.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},Zne={name:"cookie",lookup:function(e){var r;if(e.lookupCookie&&typeof document<"u"){var n=AD.read(e.lookupCookie);n&&(r=n)}return r},cacheUserLanguage:function(e,r){r.lookupCookie&&typeof document<"u"&&AD.create(r.lookupCookie,e,r.cookieMinutes,r.cookieDomain,r.cookieOptions)}},Qne={name:"querystring",lookup:function(e){var r;if(typeof window<"u"){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=n.substring(1),i=s.split("&"),o=0;o<i.length;o++){var l=i[o].indexOf("=");if(l>0){var c=i[o].substring(0,l);c===e.lookupQuerystring&&(r=i[o].substring(l+1))}}}return r}},Qm=null,ED=function(){if(Qm!==null)return Qm;try{Qm=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Qm=!1}return Qm},Jne={name:"localStorage",lookup:function(e){var r;if(e.lookupLocalStorage&&ED()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(r=n)}return r},cacheUserLanguage:function(e,r){r.lookupLocalStorage&&ED()&&window.localStorage.setItem(r.lookupLocalStorage,e)}},Jm=null,CD=function(){if(Jm!==null)return Jm;try{Jm=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Jm=!1}return Jm},eae={name:"sessionStorage",lookup:function(e){var r;if(e.lookupSessionStorage&&CD()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(r=n)}return r},cacheUserLanguage:function(e,r){r.lookupSessionStorage&&CD()&&window.sessionStorage.setItem(r.lookupSessionStorage,e)}},tae={name:"navigator",lookup:function(e){var r=[];if(typeof navigator<"u"){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)r.push(navigator.languages[n]);navigator.userLanguage&&r.push(navigator.userLanguage),navigator.language&&r.push(navigator.language)}return r.length>0?r:void 0}},rae={name:"htmlTag",lookup:function(e){var r,n=e.htmlTag||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},nae={name:"path",lookup:function(e){var r;if(typeof window<"u"){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof n[e.lookupFromPathIndex]!="string")return;r=n[e.lookupFromPathIndex].replace("/","")}else r=n[0].replace("/","")}return r}},aae={name:"subdomain",lookup:function(e){var r=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,n=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[r]}},zU=!1;try{document.cookie,zU=!0}catch{}var $U=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];zU||$U.splice(1,1);function sae(){return{order:$U,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var FU=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Une(this,t),this.type="languageDetector",this.detectors={},this.init(e,r)}return Vne(t,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r||{languageUtils:{}},this.options=Xne(n,this.options||{},sae()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(i){return i.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(Zne),this.addDetector(Qne),this.addDetector(Jne),this.addDetector(eae),this.addDetector(tae),this.addDetector(rae),this.addDetector(nae),this.addDetector(aae)}},{key:"addDetector",value:function(r){return this.detectors[r.name]=r,this}},{key:"detect",value:function(r){var n=this;r||(r=this.options.order);var s=[];return r.forEach(function(i){if(n.detectors[i]){var o=n.detectors[i].lookup(n.options);o&&typeof o=="string"&&(o=[o]),o&&(s=s.concat(o))}}),s=s.map(function(i){return n.options.convertDetectedLanguage(i)}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(r,n){var s=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(r)>-1||n.forEach(function(i){s.detectors[i]&&s.detectors[i].cacheUserLanguage(r,s.options)}))}}])}();FU.type="languageDetector";const iae={save:"Spara",cancel:"Avbryt",delete:"Ta bort",edit:"Redigera",upload:"Ladda upp",download:"Ladda ner",search:"Sk...",filter:"Filtrera",name:"Namn",action:"tgrd",description:"Beskrivning",date:"Datum",size:"Storlek",loading:"Laddar...",close:"Stng",back:"Tillbaka",send:"Skicka",yes:"Ja",no:"Nej",unknown:"Oknd",light_mode:"Ljust lge",dark_mode:"Mrkt lge",choose:"Vlj...",optional:"Valfritt",minimize_menu:"Minimera meny",expand_menu:"Expandera meny",online_friends:"Online Vnner",today:"Idag",tomorrow:"Imorgon",all:"Alla"},oae={dashboard:"versikt",admin:"Administration",my_profile:"Min Profil",logout:"Logga ut",documents:"Filer & Dokument",catalog:"Kurskatalog",calendar:"Kalender",resource_bank:"Resursbank",library:"Bibliotek",analytics:"Analyser & Insikter",support:"Support & Kontakt",my_courses:"Mina kurser",ebooks:"E-bcker",system:"System",ai_quiz:"AI Quiz",categories:{main:"Huvudmeny",education:"Utbildning",tools:"Verktyg",admin:"Administration"}},lae={title:"Bibliotek",subtitle:"Utforska och ls e-bcker",search_placeholder:"Sk efter titel eller frfattare...",categories:"Kategorier",all_categories:"Alla",read_book:"Ls bok",edit_book:"Redigera bok",delete_book:"Ta bort bok",upload_book:"Ladda upp ny bok",no_books_found:"Inga bcker hittades.",edit_modal_title:"Redigera E-bok",upload_modal_title:"Ladda upp ny E-bok",title_label:"Titel",author_label:"Frfattare",category_label:"Kategori",description_label:"Beskrivning",save_changes:"Spara ndringar",upload_btn:"Ladda upp",language_label:"Sprk",epub_file_label:"EPUB-fil",cover_image_label:"Omslagsbild",no_cover:"Inget omslag",select_file_alert:"Vnligen vlj en EPUB-fil",delete_confirm:"r du sker p att du vill ta bort denna bok?",delete_success:"Bok borttagen",no_books_desc:"Prova att ska p ngot annat eller ladda upp din frsta e-bok till biblioteket."},cae={welcome:"Vlkommen tillbaka, {{name}}!",welcome_back:"Vlkommen tillbaka,",logged_in_as:"Du r inloggad som",live_overview:"Live-versikt",realtime_data:"Data i realtid frn hela plattformen",tabs:{overview:"versikt",communication:"Kommunikation"},widgets:{stats:"Statistik",calendar:"Kalender & Schema",recent_users:"Senaste Anvndare",recent_docs:"Nyligen Uppladdat",messages:"Senaste Meddelanden",online_friends:"Online Vnner",tickets:"Supportrenden",gamification:"Gamification Status",attendance:"Min Nrvaro",my_courses:"Mina Kurser",tasks:"Uppgifter & Feedback",daily_challenges:"Dagens Utmaningar",achievements:"Mina Prestationer",ai_insights:"AI-Insikter",ai_personalization:"Personliga Studietips",daily_challenges_widget:{title:"Dagens Utmaningar",subtitle:"Slutfr fr att tjna XP",days:"{{count}} dagar",empty:"Inga utmaningar tillgngliga n",completed:" Klar",reset_in:"Nya utmaningar om {{hours}}h {{minutes}}m"}},my_courses:"Mina Kurser",files:"Filer",no_active_courses:"Du har inga aktiva kurser.",total_users:"Totalt Anvndare",total_courses:"Totalt Kurser",open:"ppna",closed:"Stngda",realtime_update_notice:"Data uppdateras i realtid.",new_messages:"Nya Meddelanden",go_to_inbox:"G till inkorgen",students:"Studenter",teachers:"Lrare",admins:"Admins",mentors:"Mentorer",principals:"Rektorer",evaluations:"Utvrderingar",give_rating:"Ge betyg",to_grade:"Att Rtta",submissions:"Inlmningar",no_pending_grades:"Inga inlmningar vntar!",upcoming_deadlines:"Nsta Deadlines",no_deadlines:"Inga kommande inlmningar.",urgent:"Brttom!",go_to:"G till",avg_grade:"Snittbetyg",based_on:"Baserat p {{count}} avslutade kurser",users:"Anvndare",courses:"Kurser",archived_files:"Arkiverade Filer",latest_registered:"Senast registrerade",latest_uploads:"Senaste uppladdningar",archive:"Arkiv",no_archive_docs:"Inga dokument i arkivet.",teacher_panel:"Lrarpanel",overview_for:"versikt fr {{name}}",my_students:"Mina Studenter",active_courses:"Aktiva Kurser",students_at_risk:"Elever i riskzonen (Sena inlmningar)",missed_deadlines:"Har missat {{count}} deadlines",no_risk_students:"Inga sena inlmningar!",all_in_phase:"Alla dina studenter r i fas.",grading_todo:"Att gra: Rttning",grade_now:"Rtta",all_graded:"Allt r rttat! Bra jobbat.",hi_student:"Hej, {{name}}! ",student_subtitle:"Hr r dina studier just nu.",not_registered:"Du r inte registrerad p ngra kurser.",comming_assignments:"Kommande Deadlines",no_upcoming_assignments:"Inga kommande uppgifter just nu.",admin_overview:"Systemversikt",admin_subtitle:"Administration och Kursstyrning",active_students:"Aktiva Studenter",locked_courses:"Lsta Kurser",files_in_system:"Filer i system",course_registry:"Kursregister",search_placeholder:"Sk kurskod eller namn...",all_statuses:"Alla Statusar",no_match:"Inga kurser matchade din skning.",showing_x_of_y:"Visar {{count}} av {{total}} kurser",manage:"Hantera",new_course:"Ny Kurs",search_course:"Sk kurs...",table:{status:"Status",code:"Kod",name:"Namn",date:"Datum",action:"tgrd",user:"Anvndare",email:"Email",role:"Roll"},course_color:"Kursfrg",edit_course:"Redigera kurs",delete_course:"Ta bort kurs",recent_users:"Senaste anvndare",new:"Ny",no_new_users:"Inga nya anvndare registrerade.",recent_uploads:"Senaste uppladdningar",unknown_file:"Oknd fil",unknown_size:"Oknd storlek",unknown_date:"Oknt datum",no_files_uploaded:"Inga filer uppladdade n.",user_registry:"Anvndarregister",new_user:"Ny Anvndare",search_user:"Sk anvndare...",all_roles:"Alla Roller",active:"Aktiv",edit_user:"Redigera anvndare",delete_user:"Ta bort anvndare",feedback:{new:"Ny Feedback",course:"Kurs: {{name}}",praise:"Bra jobbat!",details:"Visa detaljer"}},dae={title:"Nrvarorapport",presence:"Nrvaro:",occasions:"tillfllen",no_records:"Inga obligatoriska moment registrerade n.",not_reported:"Ej rapporterad",present:"Nrvarande",absent:"Frnvarande",description:"Beskrivning",no_description:"Ingen beskrivning tillgnglig.",note:"Notering",manage_attendance:"Hantera Nrvaro",new_event:"Nytt Tillflle",create_event_title:"Skapa nytt tillflle",event_title:"Titel",event_start:"Start",event_end:"Slut",event_type:"Typ",type_lesson:"Lektion",type_workshop:"Workshop",type_exam:"Prov",type_other:"Annat",create_btn:"Skapa",save_attendance:"Spara Nrvaro",saved_success:"Nrvaro sparad!",save_error:"Fel vid sparande",create_error:"Kunde inte skapa event"},uae={title:"Bedmning & Resultat",no_assignments:"Inga uppgifter i denna kurs.",deadline:"Deadline",go_to_task:"G till uppgift",my_file:"Min fil",grade:"Betyg",waiting:"Vntar p rttning",submitted_at:"Inlmnad",not_submitted:"Ej inlmnad",submit_now:"Lmna in nu"},hae={title:"Kursutvrdering",intro:"Dina svar r anonyma och hjlper oss att frbttra utbildningen. Ge betyg 1-10 och skriv grna en kommentar.",your_rating:"Ditt betyg (1 = Dligt, 10 = Utmrkt)",comment_label:"Kommentar (Valfritt)",comment_placeholder:"Skriv din sikt hr...",submit_btn:"Skicka in utvrdering",validation_error:"Vnligen ge ett betyg p alla frgor.",manage_btn:"Hantera Utvrdering",saved_success:"Utvrdering sparad!",save_error:"Kunde inte spara utvrderingen."},fae={locked_title:"Systemet r Lst",locked_desc:"Ingen giltig licens hittades.",key_label:"Licensnyckel",key_placeholder:"XXXX-XXXX-XXXX-XXXX",activate_btn:"Aktivera System"},gae={login_header:"Logga in",register_header:"Skapa konto",username:"Anvndarnamn",password:"Lsenord",login_button:"Logga in",no_account:"Inget konto?",register_link:"Registrera dig",has_account:"Har du redan ett konto?",login_link:"Logga in",firstname:"Frnamn",lastname:"Efternamn",ssn:"Personnummer (YYYYMMDD-XXXX)",email:"E-post",generate:"Generera frslag",choose_or_generate:"Vlj eller generera...",profane:"Olmpligt ord valt.",taken:"Upptaget anvndarnamn.",available:"Tillgngligt!",role:"Roll",student:"Student",admin:"Administratr",teacher:"Lrare",contact_address:"Kontakt & Adress",phone:"Telefon",street:"Gatuadress",zip:"Postnr",city:"Ort",country:"Land",register_user_btn:"Registrera Anvndare",create_account_btn:"Skapa Mitt Konto"},mae={title:"Systemadministration",subtitle:"Hantera anvndare, kurser och systemarkiv.",tab_users:"Anvndare",tab_courses:"Kurser",tab_docs:"Dokumentarkiv",tab_settings:"Instllningar",register_new:"Registrera ny anvndare",firstname:"Frnamn",lastname:"Efternamn",ssn:"Personnummer (12 siffror)",email:"E-post",account_role:"Konto & Roll",generate:"Generera",password:"Lsenord",create_account:"Skapa Konto",registered_users:"Registrerade Anvndare",course_overview:"Kursversikt",create_course:"Skapa ny kurs",search_course:"Sk p kursnamn eller kurskod...",no_courses:"Inga kurser hittades.",teacher:"Lrare",students:"Studenter",settings:"Instllningar",content:"Innehll",global_docs:"Globalt Dokumentarkiv",upload_file:"Ladda upp fil",no_docs:"Systemet r tomt p arkiverade filer.",module_management:"Modulhantering & Systeminfo",site_name:"Sidans Namn",chat_module:"Chattmodul",chat_desc:"Tillter elever och lrare att chatta i realtid.",registration:"Nyregistrering",registration_desc:"Tillter admin att skapa nya anvndarkonton.",version:"Systemversion",edit_course_settings:"Redigera Kursinstllningar",course_name:"Kursnamn",course_code:"Kurskod",color_theme:"Frgtema",register_new_user:"Registrera ny anvndare",edit_user:"Redigera anvndare",edit_course:"Redigera kurs",base_on_skolverket:"Baserad p Skolverkskurs",choose_skolverket_course:"Vlj Skolverkskurs",max_seats:"Max platser",tags:"Taggar",digital_classroom:"Digitalt Klassrum (Frivilligt)",choose_platform:"Vlj plattform...",paste_link:"Klistra in lnk...",choose_teacher:"Vlj lrare..."},pae={back:"Tillbaka till versikten",material:"Material",assignments:"Uppgifter",quiz:"Quiz & Prov",forum:"Forum",scorm:"Interaktiva Moduler",kursinformation:"Kursinformation",students:"Studenter & Betyg",attendance:"Nrvaro",create_quiz:"Skapa Nytt Quiz",start_quiz:"Starta Quiz",no_material:"Inget kursmaterial uppladdat n.",add_material:"Lgg till Material",upload:"Ladda upp",title:"Titel",description:"Beskrivning",link:"Lnk (URL)",type_text:"Text / Artikel",type_video:"Video",type_link:"Extern Lnk",type_file:"Fil",read:"Lst",mark_read:"Markera som lst",open_link:"ppna lnk",participants:"Kursdeltagare",add_student:"Lgg till",select_student:"Vlj student...",role:"Roll",status:"Status",active:"Aktiv",connect_classroom:"Anslut till Klassrum",evaluate_course:"Utvrdera Kurs",feedback_thanks:"Tack fr din feedback!",error_occurred:"Ett fel uppstod:",result_passed:"Godknd",result_failed:"Underknd",result_pending:"Ej bedmd",mark_passed:"Godknn",mark_failed:"Underknn",certificate:"Certifikat",course_completed:"Kursen avslutad",view_certificate:"Visa Certifikat",claim_certificate:"Hmta Certifikat"},xae={profile_updated:"Profil sparad!",password_changed:"Lsenord bytt!",login_failed:"Fel inloggning.",login_error:"Inloggning misslyckades.",account_created:"Konto skapat!",register_error:"Kunde inte registrera.",license_approved:"Licens godknd!",license_error:"Kunde inte aktivera.",upload_success:"Fil uppladdad!",upload_error:"Uppladdning misslyckades.",setting_saved:"Sparat!",setting_error:"Kunde inte spara instllning.",user_deleted:"Anvndare raderad.",delete_error:"Kunde inte radera anvndare.",course_deleted:"Kurs raderad.",course_delete_error:"Kunde inte radera kurs.",joined_course:"Gick med!",loading:"Laddar...",loading_course:"Laddar kurs..."},bae={tab_overview:"versikt",tab_grading:"Att Rtta",tab_applications:"Anskningar",tab_courses:"Mina Kurser",tab_students:"Studentuppfljning",tab_communication:"Kommunikation",section_schedule:"Kommande Schema",section_shortcuts:"Genvgar",section_admin:"Administration",ongoing_course:"Pgende kurs",upcoming_event:"Kommande hndelse",course_start:"Kursstart: {{name}}",no_events:"Inga inbokade hndelser.",new_message:"Nytt Meddelande"},yae={calendar:"G till Kalender",students:"Hantera Studenter",grading:"Rtta Uppgifter",messages:"Meddelanden",create_course:"Skapa ny kurs"},vae={recent_messages:{title:"Senaste Meddelanden",view_all:"Visa alla",empty:"Inga nya meddelanden.",from:"Frn"},online_friends:{title:"Online Vnner",x_online:"{{count}} online",empty:"Inga vnner online just nu.",profile:"Profil",view_all:"Visa alla vnner"},live_lessons:{title:"Live-lektioner",subtitle:"Kommande videomten",soon:"Snart",host:"Vrd",join:"G med",prepare:"Frbered",view:"Visa",see_all_calendar:"Se alla i kalendern",error_load:"Kunde inte ladda lektioner",error_join:"Kunde inte ansluta till lektion"},tickets:{active:"Aktiva Supportrenden",critical:"Kritiska",high:"Hg prioritet",medium:"Medium prioritet",low:"Lg prioritet",open:"ppna renden",empty:"Inga ppna renden just nu."},student_progress:{title:"Mina Kursresultat",on_track:"Ligger bra till",at_risk:"Varning",assignments:"Uppgifter",quizzes:"Quiz",detailed_overview:"Detaljerad versikt",latest_results:"Senaste Resultat",no_results:"Inga resultat n.",catch_up:"Se till att komma ikapp!",go_to_course:"G till kursen"},attendance_widget:{title:"Min Digitala Nrvaro",activity_level:"Aktivitetsniv",registered_time:"Registrerad tid",goal_week:"Ml (Vecka)",low_warning:"Obs! Din nrvaro r lg. Kontakta din mentor."},schedule:{title:"Dagens & Veckans Schema",loading:"Laddar schema...",campus:"Campus",online:"Online",connect:"Anslut",empty:"Inga lektioner idag",view_full:"Se hela schemat",upcoming_submissions:"Kommande Inlmningar",go_to_task:"G till uppgift",no_deadlines:"Inga kommande deadlines",view_all_count:"Visa alla ({{count}})",room_missing:"Sal saknas"}},kae={active_courses:"Aktiva Kurser",my_students:"Mina Studenter",to_grade:"Att Rtta",applications:"Anskningar",risk_zone:"Riskzon",at_risk_title:"Elever i Farozonen",students_count:"{{count}} st",no_at_risk:"Inga elever i riskzonen just nu. ",completion_prefix:"slutfrt",view_all_risk:"Visa alla risk-elever"},wae={all_graded_title:"Allt r rttat!",all_graded_desc:"Bra jobbat, inga vntande inlmningar.",pending_submissions_count:"Vntande inlmningar ({{count}})",action_required:"Krver tgrd",student:"Student",assignment:"Uppgift",course:"Kurs",submitted:"Inlmnad",go_to_grading:"G till Rttning",no_pending_applications:"Inga vntande anskningar just nu.",applying_to:"Sker till kurs",date:"Datum",decision:"Beslut",approve:"Godknn",reject:"Avsl",never:"Aldrig",days_ago:"{{count}} dagar sedan",contact:"Kontakta",admitted_msg:"Student antagen!",rejected_msg:"Anskan avslagen.",error_msg:"Ngot gick fel.",unknown_student:"Oknd"},jae={title:"Kontakta Student",subtitle:"Rapportera och flj upp med {{name}}",risk_factor:"Identifierad Riskfaktor",never_logged_in:"Studenten har aldrig loggat in p plattformen.",inactive_days:"Studenten har varit inaktiv i {{count}} dagar.",no_risk:"Ingen kritisk risk identifierad fr tillfllet, men uppfljning rekommenderas.",subject_label:"mne (Baserat p risk)",auto_generated_label:"Automatiskt Genererat Underlag",auto_generated_desc:"Detta underlag baseras p systemets data och skickas med i mailet.",teacher_notes_label:"Dina kommentarer / tgrdsplan",teacher_notes_placeholder:"Skriv ett personligt meddelande, instruktioner eller specifika tgrder som studenten behver gra...",report_and_send:"Rapportera & Skicka",sending:"Skickar...",sent_success:"Meddelande skickat!",send_error:"Kunde inte skicka meddelandet.",divider:"Lrarens kommentar:",regards:"Med vnlig hlsning,",templates:{follow_up_subject:"Uppfljning av dina studier",no_login_subject:"Viktigt: Du har inte loggat in nnu",no_login_body:"Jag ser att du nnu inte har loggat in p EduFlex. Fr att kunna tillgodogra dig kursen r det viktigt att du kommer igng snart.",need_help_login:"Behver du hjlp med inloggningen eller att hitta rtt material?",warning_inactivity_subject:"Varning: Hg frnvaro och inaktivitet",warning_inactivity_body:"Jag ser att du inte har varit aktiv p EduFlex p {{count}} dagar. Detta r oroande och pverkar dina studier negativt.",review_plan:"Vi behver se ver din studieplan fr att skerstlla att du hinner med alla moment.",follow_up_absence_subject:"Uppfljning: Frnvaro",follow_up_absence_body:"Jag noterade att det var {{count}} dagar sedan du senast var aktiv.",reach_out:"Hr av dig om du behver hjlp med ngot specifikt moment.",generic_body:"Jag vill stmma av hur det gr fr dig i kursen."}},Nae={tags_placeholder:"Taggar (separera med komma, t.ex. AI, Matematik, Algebra)",group_rooms:"Grupprum",room_name_placeholder:"Namn",link:"Lnk",add_room:"+ Lgg till grupprum",course_color:"Kursfrg",error_create:"Kunde inte skapa kursen.",error_update:"Kunde inte uppdatera kursen.",course_name:"Kursnamn",course_code:"Kurskod"},_ae={create_title:"Skapa ny kurs",edit_title:"Redigera kurs",name:"Kursnamn",code:"Kurskod",category:"Kategori",description:"Kursbeskrivning",start_date:"Startdatum",end_date:"Slutdatum",max_students:"Max platser",classroom_section:"Digitalt Klassrum",classroom_link:"Mteslnk",exam_link:"Lnk till Tentarum",create_btn:"Skapa",go_to_course:"G till kurs"},Sae={title:"Systeminsikter",subtitle:"Djupgende analys av plattformens prestanda och tillvxt.",financial_overview:"Ekonomisk versikt",revenue_analytics:"Intktsanalys",student_insights:"Studentinsikter",system_infrastructure:"Systeminfrastruktur",monthly_recurring_revenue:"Mnatlig terkommande Intkt",total_users:"Totalt Anvndare",active_sessions:"Aktiva Sessioner",server_health:"Serverhlsa",operational:"Operationell",stable:"Stabil",revenue_growth:"Intktstillvxt",user_acquisition:"Anvndarfrvrv",export_csv:"Exportera CSV",day:"Dag",week:"Vecka",month:"Mnad",year:"r",vs_last_month:"vs frra mnaden",system_status:"Systemstatus",total_students:"Totalt Studenter",at_risk:"I Riskzonen",avg_time_online:"Genomsnittlig Tid Online",student_performance_registry:"Studentprestandaregister",student_name:"Studentnamn",status:"Status",courses:"Kurser",completion:"Genomfrande",total_time_online:"Total Tid Online",risk_factor:"Riskfaktor",no_student_data:"Ingen studentdata tillgnglig.",grafana_dashboard:"Grafana Dashboard",grafana_description:"Realtidsmetrik fr system (CPU, Minne, Frfrgningar).",open_full_grafana:"ppna Fullstndig Grafana",prometheus_metrics:"Prometheus-mtningar",prometheus_description:"R mtutforskare.",open_prometheus:"ppna Prometheus",all_systems_normal:"Alla system kr normalt.",uptime:"Drifttid",revenue_title:"Intktsanalys",revenue_subtitle:"Omfattande intkts- och betalningsinsikter",loading_revenue_data:"Laddar intktsdata...",annual_recurring_revenue:"rlig terkommande Intkt",payment_success_rate:"Betalningsframgng",avg_payment_amount:"Genomsnittligt Betalningsbelopp",excellent:"Utmrkt",good:"Bra",revenue_growth_trend:"Intktstillvxttrend",payment_methods:"Betalningsmetoder",no_payment_data:"Ingen betalningsdata tillgnglig",total_payments:"Totalt Betalningar",successful:"Lyckade",failed:"Misslyckade"},Aae={title:"Fakturahantering",create_invoice:"Skapa Faktura",export_csv:"Exportera CSV",exporting:"Exporterar...",loading:"Laddar fakturor...",all:"Alla",draft:"Utkast",pending:"Vntande",sent:"Skickad",paid:"Betald",overdue:"Frsenad",cancelled:"Avbruten",invoice_number:"Fakturanummer",customer:"Kund",amount:"Belopp",issue_date:"Utfrdandedatum",due_date:"Frfallodatum",status:"Status",actions:"tgrder",no_invoices_found:"Inga fakturor hittades",total_invoices:"Totalt Fakturor",send_reminder_confirm:"Skicka betalningspminnelse till kund?",reminder_sent:"Betalningspminnelse skickad!",delete_confirm:"r du sker p att du vill ta bort denna faktura?",refund_confirm:"r du sker p att du vill terbetala denna betalning? Denna tgrd kan inte ngras.",refund_success:"terbetalning initierad",refund_failed:"Kunde inte terbetala. Kontrollera konsolen fr detaljer.",no_payment_details:"Kan inte hitta betalningsdetaljer fr denna faktura.",view_pdf:"Visa PDF",generate_pdf:"Generera PDF"},Eae={title:"Prenumerationsplaner",subtitle:"Hantera prisniver och prenumerationsalternativ",create_plan:"Skapa Plan",loading:"Laddar prenumerationsplaner...",default_badge:"STANDARD",inactive_badge:"INAKTIV",unlimited:"Obegrnsat",users:"Anvndare",courses:"Kurser",storage:"Lagring",features:"Funktioner",edit:"Redigera",activate:"Aktivera",deactivate:"Inaktivera",delete_confirm:"r du sker p att du vill ta bort denna plan?",edit_plan:"Redigera Plan",create_new_plan:"Skapa Ny Plan",plan_name_internal:"Plannamn (Internt)",display_name:"Visningsnamn",description:"Beskrivning",price:"Pris",currency:"Valuta",trial_period_days:"Provperiod (Dagar)",billing_interval:"Faktureringsintervall",monthly:"Mnadvis",yearly:"rsvis",lifetime:"Livstid",max_users:"Max Anvndare (-1 = obegrnsat)",max_courses:"Max Kurser (-1 = obegrnsat)",max_storage:"Lagring GB (-1 = obegrnsat)",add_feature:"+ Lgg till Funktion",enter_feature:"Ange funktionsnamn:",active:"Aktiv",default_plan:"Standardplan",sort_order:"Sorteringsordning",cancel:"Avbryt",update_plan:"Uppdatera Plan",create_plan_btn:"Skapa Plan"},Cae={administration:"Administration",system_settings:"Systeminstllningar",skolverket_import:"Skolverket-import",skolverket_data:"Skolverket-data",users:"Anvndare",courses:"Kurser",roles:"Roller",revenue:"Intkter",invoices:"Fakturor",subscription_plans:"Prenumerationsplaner",payment_settings:"Betalningsinstllningar",promo_codes:"Kampanjkoder",tickets:"renden"},Tae={nav:{features:"Funktioner",architecture:"Arkitektur",pricing:"Priser",login:"Logga in",get_started:"Kom igng"},hero:{badge:"v2.0 Nu Tillgnglig",title_start:"LMS:et som ",title_highlight:"Studenter lskar",subtitle:"EduFlex verbryggar klyftan mellan enterprise-LMS och moderna konsumentappar. Gamifierat, snabbt och vackert lrande fr nsta generation.",cta_trial:"Boka Demo",cta_docs:"Visa API-dokumentation"},features:{badge:"Varfr EduFlex?",title:"Allt du behver fr att driva en modern skola",subtitle:"Frn robusta bedmningsverktyg till revolutionerande AI-std - vi har dig tckt.",ai_creator:{title:"AI Course Creator",desc:"Ladda upp en studiehandledning (PDF) och lt Gemini AI skapa en komplett kurs med lektioner, datum och smarta koder p under 60 sekunder. Nu med automatisk databassynkronisering."},cascading_deletes:{title:"Kaskadradering",desc:"Smls hantering av kursinnehll. Nr en kurs raderas stdas allt tillhrande material och lektioner bort automatiskt fr att hlla databasen ren."},lti_ready:{title:"LTI 1.3 Ready",desc:"Fullt verifierat std fr OIDC-lanseringar. Smls integration med externa plattformar som Canvas och Moodle."},gamification:{title:"Gamification 2.0",desc:"Inbyggd XP, utmrkelser, niver, topplistor och dagliga utmaningar fr att ka elevengagemanget."},multi_tenancy:{title:"kta Multi-Tenancy",desc:"Fullstndig dataisolering med schema-per-tenant-arkitektur. Din data r din."},analytics:{title:"Analyser & Insikter",desc:"Realtidsdashboards fr rektorer och lrare. Vrmekartor och avhoppsfrutsgelse."},security:{title:"Enterprise-Skerhet",desc:"Rollbaserad tkomstkontroll (RBAC), granskningsloggning och sker Keycloak SSO-integration."},evaluation_system:{title:"Kursutvrdering & Insikter",desc:"Komplett system fr kurskvalitet. Automatiska studentnotiser och AI-analys av fritextsvar fr att mta utbildningens ROI."}},architecture:{badge:"Byggd fr Skalning",title:"Enterprise-Arkitektur",powered_by:"Drivs av Branschstandarder",items:["Spring Boot 3.4 Mikrotjnster","PostgreSQL med Schema-per-Tenant","Redis Caching-lager","MinIO S3-Kompatibel Lagring","Keycloak SSO Identitetshantering","Kubernetes & Helm Charts"]},pricing:{title:"Enkel, Transparent Prissttning",subtitle:"Vlj planen som passar din skola.",basic:{name:"Basic",price:"990 SEK / mnad",features:["Upp till 100 anvndare","Grundlggande Kurshantering","Enkel Rapportering","Community Support"],cta:"Kom igng"},pro:{name:"Pro",price:"2 990 SEK / mnad",features:["Upp till 500 anvndare","Fullstndig Gamification","Skolverket-Integration","CSN-Export","Prioriterad Support"],cta:"Boka Demo",badge:"Mest Populr"},enterprise:{name:"Enterprise",price:"Kontakta Oss",features:["Obegrnsat Antal Anvndare","White-label Branding","Keycloak SSO","SLA 99.99%","Dedikerad Infrastruktur"],cta:"Kontakta Frsljning"}},footer:{tagline:"Strker utbildning med modern teknik. Byggd med  i Sverige.",product:"Produkt",features:"Funktioner",pricing:"Priser",roadmap:"Roadmap",resources:"Resurser",documentation:"Dokumentation",api_reference:"API-Referens",system_status:"Systemstatus",connect:"Kontakt",contact_sales:"Kontakta Frsljning",twitter:"Twitter",github:"GitHub",copyright:" 2026 EduFlex. Alla rttigheter frbehllna.",developed_by:"Utvecklad av",fenrir:"Fenrir Studio"}},Oae={title:"Boka Demo",name:"Namn",name_placeholder:"Ditt namn",email:"E-post",email_placeholder:"din@email.se",organization:"Organisation",organization_placeholder:"Skolans namn",phone:"Telefon",phone_placeholder:"+46 70 123 45 67",message:"Meddelande",message_placeholder:"Bertta lite om era behov...",submit:"Skicka frfrgan",sending:"Skickar...",success_message:"Tack! Vi kontaktar dig inom 24 timmar.",error_message:"Ngot gick fel. Frsk igen eller maila oss direkt."},Iae={title:"AI-Insikter & Rekommendationer",risk_low:"Lg risk",risk_medium:"Medelrisk",risk_high:"Hg risk",suggested_activities:"Freslagna aktiviteter",coaching_advice:"Coachande rd",update_analysis:"Uppdatera AI-analys",lesson_type:"Lektion",practice_type:"vning",rationale_prefix:"AI-resonemang:",no_data:"Inte tillrckligt med data fr AI-analys n. Fortstt arbeta i kurserna!"},Dae={level_title:"Nuvarande Niv",student_rank:"Elevranking",points_to_next:"pong till nsta niv",my_badges:"Mina Utmrkelser",no_awards:"Inga utmrkelser nnu. Fortstt kmpa!",view_all:"Visa alla utmrkelser"},Mae={common:iae,sidebar:oae,library:lae,dashboard:cae,attendance:dae,assessment:uae,evaluation:hae,license:fae,auth:gae,admin:mae,course:pae,messages:xae,teacher_dashboard:bae,shortcuts:yae,widgets:vae,teacher_widgets:kae,teacher_tables:wae,student_contact:jae,teacher_modals:Nae,course_modal:_ae,analytics:Sae,invoices:Aae,subscription_plans:Eae,admin_tabs:Cae,landing:Tae,contact:Oae,ai_personalization:Iae,gamification:Dae},Lae={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",upload:"Upload",download:"Download",search:"Search...",filter:"Filter",name:"Name",action:"Action",description:"Description",date:"Date",size:"Size",loading:"Loading...",close:"Close",back:"Back",send:"Send",yes:"Yes",no:"No",unknown:"Unknown",choose:"Choose...",optional:"Optional",minimize_menu:"Minimize menu",expand_menu:"Expand menu",online_friends:"Online Friends",today:"Today",tomorrow:"Tomorrow",all:"All",light_mode:"Bright location",dark_mode:"Dark mode"},Rae={dashboard:"Dashboard",admin:"Administration",my_profile:"My Profile",logout:"Log out",documents:"Documents",catalog:"Course Catalog",calendar:"Calendar",resource_bank:"Resource Bank",library:"Library",analytics:"Analytics & Insights",my_courses:"My Courses",ebooks:"E-books",system:"System",ai_quiz:"AI Quiz",support:"Support & Contact",categories:{main:"Main Menu",education:"Education",tools:"Tools",admin:"Administration"}},Pae={title:"Library",subtitle:"Explore and read e-books",search_placeholder:"Search by title or author...",categories:"Categories",all_categories:"All",read_book:"Read book",edit_book:"Edit book",delete_book:"Delete book",upload_book:"Upload new book",no_books_found:"No books found.",edit_modal_title:"Edit E-book",upload_modal_title:"Upload new E-book",title_label:"Title",author_label:"Author",category_label:"Category",description_label:"Description",save_changes:"Save changes",upload_btn:"Upload",language_label:"Language",epub_file_label:"EPUB File",cover_image_label:"Cover Image",no_cover:"No cover",select_file_alert:"Please select an EPUB file",delete_confirm:"Are you sure you want to delete this book?",delete_success:"Book deleted",no_books_desc:"Try searching for something else or upload your first e-book to the library."},zae={welcome:"Welcome back, {{name}}!",welcome_back:"Welcome back,",logged_in_as:"Logged in as",live_overview:"Live Overview",realtime_data:"Real-time data from across the platform",tabs:{overview:"Overview",communication:"Communication"},widgets:{stats:"Statistics",calendar:"Calendar & Schedule",recent_users:"Recent Users",recent_docs:"Recently Uploaded",messages:"Recent Messages",online_friends:"Online Friends",tickets:"Support Tickets",gamification:"Gamification Status",attendance:"My Attendance",my_courses:"My Courses",tasks:"Assignments & Feedback",daily_challenges:"Daily Challenges",achievements:"My Achievements",daily_challenges_widget:{title:"Daily Challenges",subtitle:"Complete to earn XP",days:"{{count}} days",empty:"No challenges available yet",completed:" Done",reset_in:"New challenges in {{hours}}h {{minutes}}m"},ai_insights:"AI insights",ai_personalization:"Personalised study tips"},my_courses:"My Courses",files:"Files",no_active_courses:"You have no active courses.",total_users:"Total Users",total_courses:"Total Courses",open:"Open",closed:"Closed",realtime_update_notice:"Data is updated in real-time.",new_messages:"New Messages",go_to_inbox:"Go to inbox",students:"Students",teachers:"Teachers",admins:"Admins",mentors:"Mentors",principals:"Principals",evaluations:"Evaluations",give_rating:"Rate",to_grade:"To Grade",submissions:"Submissions",no_pending_grades:"No pending submissions!",upcoming_deadlines:"Upcoming Deadlines",no_deadlines:"No upcoming deadlines.",urgent:"Urgent!",go_to:"Go to",avg_grade:"Avg Grade",based_on:"Based on {{count}} completed courses",users:"Users",courses:"Courses",archived_files:"Archived Files",latest_registered:"Latest Registered",latest_uploads:"Latest Uploads",archive:"Archive",no_archive_docs:"No documents in archive.",teacher_panel:"Teacher Panel",overview_for:"Overview for {{name}}",my_students:"My Students",active_courses:"Active Courses",students_at_risk:"Students at Risk (Late Submissions)",missed_deadlines:"Missed {{count}} deadlines",no_risk_students:"No late submissions!",all_in_phase:"All your students are on track.",grading_todo:"To Do: Grading",grade_now:"Grade",all_graded:"All graded! Good job.",hi_student:"Hi, {{name}}! ",student_subtitle:"Here are your studies right now.",not_registered:"You are not registered for any courses.",comming_assignments:"Upcoming Deadlines",no_upcoming_assignments:"No upcoming assignments right now.",admin_overview:"System Overview",admin_subtitle:"Administration and Course Control",active_students:"Active Students",locked_courses:"Locked Courses",files_in_system:"Files in system",course_registry:"Course Registry",search_placeholder:"Search course code or name...",all_statuses:"All Statuses",no_match:"No courses matched your search.",showing_x_of_y:"Showing {{count}} of {{total}} courses",manage:"Manage",new_course:"New Course",search_course:"Search course...",table:{status:"Status",code:"Code",name:"Name",date:"Date",action:"Action",user:"User",email:"Email",role:"Role"},course_color:"Course Color",edit_course:"Edit Course",delete_course:"Delete Course",recent_users:"Recent Users",new:"New",no_new_users:"No new users registered.",recent_uploads:"Recent Uploads",unknown_file:"Unknown file",unknown_size:"Unknown size",unknown_date:"Unknown date",no_files_uploaded:"No files uploaded yet.",user_registry:"User Registry",new_user:"New User",search_user:"Search user...",all_roles:"All Roles",active:"Active",edit_user:"Edit User",delete_user:"Delete User",feedback:{new:"New Feedback",course:"Course: {{name}}",praise:"Well done!",details:"View details"}},$ae={title:"Chat & Support",messenger:"Messenger",contacts:"Contacts",type_placeholder:"Type...",image:"Image"},Fae={title:"Class Forum",threads:"Threads",all_categories:"All Categories",new_thread:"New Thread",empty_title:"Nothing here yet.",empty_student:"Start a discussion!",empty_teacher:"Wait for information from the teacher.",replies:"replies",create_header:'Start new discussion in "{{category}}"',subject:"Subject",subject_placeholder:"Topic...",content:"Content",content_placeholder:"Type your message here...",publish_btn:"Publish Thread",back_to:"Back to {{category}}",answers_header:"Replies",write_reply:"Write a reply...",create_error:"Could not create thread.",reply_error:"Could not reply."},Bae={title:"Attendance Report",presence:"Presence:",occasions:"occasions",no_records:"No mandatory events recorded yet.",not_reported:"Not reported",present:"Present",absent:"Absent",description:"Description",no_description:"No description available.",note:"Note",manage_attendance:"Manage Attendance",new_event:"New Occasion",create_event_title:"Create new occasion",event_title:"Title",event_start:"Start",event_end:"End",event_type:"Type",type_lesson:"Lesson",type_workshop:"Workshop",type_exam:"Exam",type_other:"Other",create_btn:"Create",save_attendance:"Save Attendance",saved_success:"Attendance saved!",save_error:"Error saving",create_error:"Could not create event"},Uae={title:"Assessment & Results",no_assignments:"No assignments in this course.",deadline:"Deadline",go_to_task:"Go to assignment",my_file:"My file",grade:"Grade",waiting:"Waiting for grading",submitted_at:"Submitted",not_submitted:"Not submitted",submit_now:"Submit now"},Kae={title:"Course Evaluation",intro:"Your answers are anonymous and help us improve the education. Rate 1-10 and feel free to leave a comment.",your_rating:"Your rating (1 = Poor, 10 = Excellent)",comment_label:"Comment (Optional)",comment_placeholder:"Write your opinion here...",submit_btn:"Submit Evaluation",validation_error:"Please rate all questions.",manage_btn:"Manage Evaluation",saved_success:"Evaluation saved!",save_error:"Could not save evaluation."},Gae={locked_title:"System Locked",locked_desc:"No valid license found.",key_label:"License Key",key_placeholder:"XXXX-XXXX-XXXX-XXXX",activate_btn:"Activate System"},qae={login_header:"Log in",register_header:"Create account",username:"Username",password:"Password",login_button:"Log in",no_account:"No account?",register_link:"Sign up",has_account:"Already have an account?",login_link:"Log in",firstname:"First Name",lastname:"Last Name",ssn:"SSN (YYYYMMDD-XXXX)",email:"Email",generate:"Generate",choose_or_generate:"Choose or generate...",profane:"Inappropriate word.",taken:"Username taken.",available:"Available!",role:"Role",student:"Student",admin:"Admin",teacher:"Teacher",contact_address:"Contact & Address",phone:"Phone",street:"Street Address",zip:"Zip Code",city:"City",country:"Country",register_user_btn:"Register User",create_account_btn:"Create My Account"},Vae={title:"System Administration",subtitle:"Manage users, courses, and system archives.",tab_users:"Users",tab_courses:"Courses",tab_docs:"Documents",tab_settings:"Settings",register_new:"Register New User",firstname:"First Name",lastname:"Last Name",ssn:"SSN (12 digits)",email:"Email",account_role:"Account & Role",generate:"Generate",password:"Password",create_account:"Create Account",registered_users:"Registered Users",course_overview:"Course Overview",create_course:"Create new course",search_course:"Search by name or code...",no_courses:"No courses found.",teacher:"Teacher",students:"Students",settings:"Settings",content:"Content",global_docs:"Global Document Archive",upload_file:"Upload File",no_docs:"System archive is empty.",module_management:"Module Management & Info",site_name:"Site Name",chat_module:"Chat Module",chat_desc:"Allows students and teachers to chat in real-time.",registration:"Registration",registration_desc:"Allows admin to create new user accounts.",version:"System Version",edit_course_settings:"Edit Course Settings",course_name:"Course Name",course_code:"Course Code",color_theme:"Color Theme",register_new_user:"Register new user",edit_user:"Edit user",edit_course:"Edit course",base_on_skolverket:"Based on Skolverket course",choose_skolverket_course:"Choose Skolverket course",max_seats:"Max seats",tags:"Tags",digital_classroom:"Digital Classroom (Optional)",choose_platform:"Choose platform...",paste_link:"Paste link...",choose_teacher:"Choose teacher..."},Hae={title:"Course Catalog",subtitle:"Find and enroll in new courses.",search_placeholder:"Search courses...",no_results:"No courses found.",teacher:"Teacher",start:"Start",not_set:"Not set",join:"Join Course",closed_msg:"Course not open for enrollment"},Wae={title:"Document Management",upload_title:"Upload File",drop_text:"Click or drag file here",search_placeholder:"Search files...",save_btn:"Save File",saving:"Saving...",no_results:"No documents found."},Xae={title:"Calendar",subtitle:"Keep track of your deadlines and course starts.",events_in:"Events in",no_events:"Nothing scheduled this month.",days:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},Yae={back:"Back to dashboard",material:"Materials",assignments:"Assignments",quiz:"Quizzes & Exams",forum:"Forum",scorm:"Interactive Modules",kursinformation:"Course Information",students:"Students & Grades",attendance:"Attendance",create_quiz:"Create New Quiz",start_quiz:"Start Quiz",no_material:"No course material uploaded yet.",add_material:"Add Material",upload:"Upload",title:"Title",description:"Description",link:"Link (URL)",type_text:"Text / Article",type_video:"Video",type_link:"External Link",type_file:"File",read:"Read",mark_read:"Mark as read",open_link:"Open link",participants:"Participants",add_student:"Add",select_student:"Select student...",role:"Role",status:"Status",active:"Active",connect_classroom:"Connect to Classroom",evaluate_course:"Evaluate Course",feedback_thanks:"Thanks for your feedback!",error_occurred:"An error occurred:",result_passed:"Passed",result_failed:"Failed",result_pending:"Pending",mark_passed:"Pass",mark_failed:"Fail",certificate:"Certificate",course_completed:"Course completed",view_certificate:"View Certificate",claim_certificate:"Claim Certificate"},Zae={header:"Assignments",new:"New Assignment",create_header:"Create Assignment",cancel:"Cancel",save:"Save",deadline:"Deadline",no_assignments:"No assignments.",submissions:"Submissions",no_submissions:"No submissions yet.",file_received:"File received",grade_placeholder:"- Set Grade -",feedback_placeholder:"Feedback...",submitted:"Submitted!",submitted_desc:"You have submitted this assignment.",submit_button:"Submit Assignment",select_file_alert:"Please select a file!"},Qae={header:"Quizzes & Exams",subtitle:"Test your knowledge and get instant feedback.",questions_count:"Questions",knowledge_check:"Test your knowledge in this area.",no_quizzes:"No quizzes available for this course yet.",updated_alert:"Quiz updated!",created_alert:"Quiz created!",save_error:"Error saving quiz.",delete_confirm:"Are you sure you want to delete this quiz?",delete_error:"Could not delete quiz.",result_saved:"Result saved",create_title:"Create Quiz",edit_title:"Edit Quiz",modal_quiz_title:"Quiz Title",title_placeholder:"E.g. Java Basics Assessment",question:"Question",question_placeholder:"Type the question here...",option:"Option",add_option:"Add option",add_question:"Add question",save_btn:"Save Quiz",update_btn:"Update Quiz",submit_btn:"Submit Quiz",result_header:"Result",result_msg:"Good job! Your result has been saved."},Jae={title:"My Profile",details:"Personal Details",security:"Security",language:"Language",firstname:"First Name",lastname:"Last Name",email:"Email",phone:"Phone",address_header:"ADDRESS DETAILS",street:"Street Address",zip:"Zip Code",city:"City",country:"Country",current_password:"Current Password",new_password:"New Password",confirm_password:"Confirm New Password",update_password:"Update Password",save_changes:"Save Changes",password_mismatch:"Passwords do not match!",password_error:"Could not change password.",choose_strong_password:"Choose a strong password to protect your account.",settings:"Settings",settings_header:"Customize Dashboard",settings_desc:"Choose which widgets you want to see on your overview.",show_calendar:"Show Calendar",show_messages:"Show Messages",show_stats:"Show Statistics"},ese={profile_updated:"Profile saved!",password_changed:"Password changed!",login_failed:"Login failed.",login_error:"Login failed.",account_created:"Account created!",register_error:"Could not register.",license_approved:"License approved!",license_error:"Could not activate.",upload_success:"File uploaded!",upload_error:"Upload failed.",setting_saved:"Saved!",setting_error:"Could not save setting.",user_deleted:"User deleted.",delete_error:"Could not delete user.",course_deleted:"Course deleted.",course_delete_error:"Could not delete course.",joined_course:"Joined!",loading:"Loading...",loading_course:"Loading course..."},tse={level_title:"Current Level",points_to_next:"XP to next",my_badges:"My Badges",achievements:"My Achievements",unlocked:"Unlocked",no_badges:"No badges yet. Keep it up!",locked:"Locked",student_rank:"Student",no_awards:"No awards yet",view_all:"View all progress",rank_newbie:"Newbie",rank_apprentice:"Apprentice",rank_expert:"Expert",rank_master:"Master",rank_legend:"Legend"},rse={tab_overview:"Overview",tab_grading:"To Grade",tab_applications:"Applications",tab_courses:"My Courses",tab_students:"Student Progress",tab_communication:"Communication",section_schedule:"Upcoming Schedule",section_shortcuts:"Shortcuts",section_admin:"Administration",ongoing_course:"Ongoing Course",upcoming_event:"Upcoming Event",course_start:"Course Start: {{name}}",no_events:"No scheduled events.",new_message:"New Message"},nse={calendar:"Go to Calendar",students:"Manage Students",grading:"Grade Assignments",messages:"Messages",create_course:"Create New Course"},ase={recent_messages:{title:"Recent Messages",view_all:"View All",empty:"No new messages.",from:"From"},online_friends:{title:"Online Friends",x_online:"{{count}} online",empty:"No friends online right now.",profile:"Profile",view_all:"View all friends"},live_lessons:{title:"Live Lessons",subtitle:"Upcoming video meetings",soon:"Soon",host:"Host",join:"Join",prepare:"Prepare",view:"View",see_all_calendar:"See all in calendar",error_load:"Failed to load lessons",error_join:"Failed to join lesson"},tickets:{active:"Active Support Tickets",critical:"Critical",high:"High Priority",medium:"Medium Priority",low:"Low Priority",open:"Open Tickets",empty:"No open tickets right now."},student_progress:{title:"My Course Results",on_track:"On Track",at_risk:"Warning",assignments:"Assignments",quizzes:"Quizzes",detailed_overview:"Detailed Overview",latest_results:"Latest Results",no_results:"No results yet.",catch_up:"Make sure to catch up!",go_to_course:"Go to Course"},attendance_widget:{title:"My Digital Attendance",activity_level:"Activity Level",registered_time:"Registered Time",goal_week:"Goal (Week)",low_warning:"Note! Your attendance is low. Contact your mentor."},schedule:{title:"Today's & Week's Schedule",loading:"Loading schedule...",campus:"Campus",online:"Online",connect:"Connect",empty:"No lessons today",view_full:"View full schedule",upcoming_submissions:"Upcoming Submissions",go_to_task:"Go to Assignment",no_deadlines:"No upcoming deadlines",view_all_count:"View all ({{count}})",room_missing:"Room missing"}},sse={active_courses:"Active Courses",my_students:"My Students",to_grade:"To Grade",applications:"Applications",risk_zone:"Risk Zone",at_risk_title:"Students at Risk",students_count:"{{count}} students",no_at_risk:"No students at risk right now. ",completion_prefix:"completed",view_all_risk:"View all risk students"},ise={all_graded_title:"All Graded!",all_graded_desc:"Good job, no pending submissions.",pending_submissions_count:"Pending Submissions ({{count}})",action_required:"Action Required",student:"Student",assignment:"Assignment",course:"Course",submitted:"Submitted",go_to_grading:"Go to Grading",no_pending_applications:"No pending applications right now.",applying_to:"Applying to Course",date:"Date",decision:"Decision",approve:"Approve",reject:"Reject",never:"Never",days_ago:"{{count}} days ago",contact:"Contact",admitted_msg:"Student admitted!",rejected_msg:"Application rejected.",error_msg:"Something went wrong.",unknown_student:"Unknown"},ose={title:"Contact Student",subtitle:"Report and follow up with {{name}}",risk_factor:"Identified Risk Factor",never_logged_in:"The student has never logged in to the platform.",inactive_days:"The student has been inactive for {{count}} days.",no_risk:"No critical risk identified at the moment, but follow-up is recommended.",subject_label:"Subject (Based on risk)",auto_generated_label:"Auto-generated Context",auto_generated_desc:"This content is based on system data and is included in the email.",teacher_notes_label:"Your comments / Action plan",teacher_notes_placeholder:"Write a personal message, instructions or specific actions the student needs to take...",report_and_send:"Report & Send",sending:"Sending...",sent_success:"Message sent!",send_error:"Could not send message.",divider:"Teacher's comment:",regards:"Kind Regards,",templates:{follow_up_subject:"Follow-up of your studies",no_login_subject:"Important: You haven't logged in yet",no_login_body:"I see that you haven't logged in to EduFlex. To be able to complete the course, it's important that you get started soon.",need_help_login:"Do you need help with the login or finding the right material?",warning_inactivity_subject:"Warning: High absence and inactivity",warning_inactivity_body:"I see that you haven't been active on EduFlex for {{count}} days. This is concerning and affects your studies negatively.",review_plan:"We need to review your study plan to ensure you have time for all parts.",follow_up_absence_subject:"Follow-up: Absence",follow_up_absence_body:"I noted that it was {{count}} days since you were last active.",reach_out:"Reach out if you need help with any specific part.",generic_body:"I want to check in on how you're doing in the course."}},lse={tags_placeholder:"Tags (comma separated, e.g. AI, Math, Algebra)",group_rooms:"Group Rooms",room_name_placeholder:"Name",link:"Link",add_room:"+ Add group room",course_color:"Course Color",error_create:"Could not create course.",error_update:"Could not update course.",course_name:"Course Name",course_code:"Course Code"},cse={create_title:"Create New Course",edit_title:"Edit Course",name:"Course Name",code:"Course Code",category:"Category",description:"Course Description",start_date:"Start Date",end_date:"End Date",max_students:"Max Students",classroom_section:"Digital Classroom",classroom_link:"Meeting Link",exam_link:"Exam Room Link",create_btn:"Create",go_to_course:"Go to Course"},dse={title:"System Insights",subtitle:"Deep-dive analysis of platform performance and growth.",financial_overview:"Financial Overview",revenue_analytics:"Revenue Analytics",student_insights:"Student Insights",system_infrastructure:"System Infrastructure",monthly_recurring_revenue:"Monthly Recurring Revenue",total_users:"Total Users",active_sessions:"Active Sessions",server_health:"Server Health",operational:"Operational",stable:"Stable",revenue_growth:"Revenue Growth",user_acquisition:"User Acquisition",export_csv:"Export CSV",day:"Day",week:"Week",month:"Month",year:"Year",vs_last_month:"vs last month",system_status:"System Status",total_students:"Total Students",at_risk:"At Risk",avg_time_online:"Avg Time Online",student_performance_registry:"Student Performance Registry",student_name:"Student Name",status:"Status",courses:"Courses",completion:"Completion",total_time_online:"Total Time Online",risk_factor:"Risk Factor",no_student_data:"No student data available.",grafana_dashboard:"Grafana Dashboard",grafana_description:"Real-time metrics for system (CPU, Memory, Requests).",open_full_grafana:"Open Full Grafana",prometheus_metrics:"Prometheus Metrics",prometheus_description:"Raw metrics explorer.",open_prometheus:"Open Prometheus",all_systems_normal:"All systems operating normally.",uptime:"Uptime",revenue_title:"Revenue Analytics",revenue_subtitle:"Comprehensive revenue and payment insights",loading_revenue_data:"Loading revenue data...",annual_recurring_revenue:"Annual Recurring Revenue",payment_success_rate:"Payment Success Rate",avg_payment_amount:"Average Payment Amount",excellent:"Excellent",good:"Good",revenue_growth_trend:"Revenue Growth Trend",payment_methods:"Payment Methods",no_payment_data:"No payment data available",total_payments:"Total Payments",successful:"Successful",failed:"Failed"},use={title:"Invoice Management",create_invoice:"Create Invoice",export_csv:"Export CSV",exporting:"Exporting...",loading:"Loading invoices...",all:"All",draft:"Draft",pending:"Pending",sent:"Sent",paid:"Paid",overdue:"Overdue",cancelled:"Cancelled",invoice_number:"Invoice Number",customer:"Customer",amount:"Amount",issue_date:"Issue Date",due_date:"Due Date",status:"Status",actions:"Actions",no_invoices_found:"No invoices found",total_invoices:"Total Invoices",send_reminder_confirm:"Send payment reminder to customer?",reminder_sent:"Payment reminder sent!",delete_confirm:"Are you sure you want to delete this invoice?",refund_confirm:"Are you sure you want to refund this payment? This action cannot be undone.",refund_success:"Refund initiated",refund_failed:"Could not refund. Check console for details.",no_payment_details:"Cannot find payment details for this invoice.",view_pdf:"View PDF",generate_pdf:"Generate PDF"},hse={title:"Subscription Plans",subtitle:"Manage pricing tiers and subscription options",create_plan:"Create Plan",loading:"Loading subscription plans...",default_badge:"DEFAULT",inactive_badge:"INACTIVE",unlimited:"Unlimited",users:"Users",courses:"Courses",storage:"Storage",features:"Features",edit:"Edit",activate:"Activate",deactivate:"Deactivate",delete_confirm:"Are you sure you want to delete this plan?",edit_plan:"Edit Plan",create_new_plan:"Create New Plan",plan_name_internal:"Plan Name (Internal)",display_name:"Display Name",description:"Description",price:"Price",currency:"Currency",trial_period_days:"Trial Period (Days)",billing_interval:"Billing Interval",monthly:"Monthly",yearly:"Yearly",lifetime:"Lifetime",max_users:"Max Users (-1 = unlimited)",max_courses:"Max Courses (-1 = unlimited)",max_storage:"Storage GB (-1 = unlimited)",add_feature:"+ Add Feature",enter_feature:"Enter feature name:",active:"Active",default_plan:"Default Plan",sort_order:"Sort Order",cancel:"Cancel",update_plan:"Update Plan",create_plan_btn:"Create Plan"},fse={administration:"Administration",system_settings:"System Settings",skolverket_import:"Skolverket Import",skolverket_data:"Skolverket Data",users:"Users",courses:"Courses",roles:"Roles",revenue:"Revenue",invoices:"Invoices",subscription_plans:"Subscription Plans",payment_settings:"Payment Settings",promo_codes:"Promo Codes",tickets:"Issues"},gse={nav:{features:"Features",architecture:"Architecture",pricing:"Pricing",login:"Log In",get_started:"Get Started"},hero:{badge:"v2.0 Now Available",title_start:"The LMS that ",title_highlight:"Students Love",subtitle:"EduFlex bridges the gap between enterprise-grade LMS and modern consumer apps. Gamified, fast, and beautiful learning for the next generation.",cta_trial:"Request Demo",cta_docs:"View API Docs"},features:{badge:"Why EduFlex?",title:"Everything you need to run a modern school",subtitle:"From robust grading tools to addictive gamification, we've got you covered.",core_education:{title:"Core Education",desc:"Rich course management, SCORM support, assignment grading, and auto-generated certificates."},gamification:{title:"Gamification",desc:"Built-in XP, badges, levels, leaderboards, and daily challenges to boost student engagement."},multi_tenancy:{title:"True Multi-Tenancy",desc:"Complete data isolation with schema-per-tenant architecture. Your data is yours alone."},security:{title:"Enterprise Security",desc:"Role-Based Access Control (RBAC), Audit Logging, and secure Keycloak SSO integration."},analytics:{title:"Analytics & Insights",desc:"Real-time dashboards for principals and teachers. Heatmaps, dropout prediction, and more."},skolverket:{title:"Skolverket Connected",desc:"Direct integration with the Swedish National Curriculum and grading criteria (E-A)."},ai_creator:{title:"AI Course Creator",desc:"Upload a study guide (PDF) and let Gemini AI create a complete course with lessons, dates and smart codes in under 60 seconds. Now with automatic database synchronisation."},cascading_deletes:{title:"Cascade cancellation",desc:"Seamless management of course content. When a course is deleted, all associated materials and lessons are automatically purged to keep the database clean."},lti_ready:{title:"LTI 1.3 Ready",desc:"Fully verified support for OIDC launches. Seamless integration with external platforms like Canvas and Moodle."},evaluation_system:{title:"Course Evaluation & Insights",desc:"Complete system for course quality. Automatic student notifications and AI analysis of open-ended answers to measure training ROI."}},architecture:{badge:"Built for Scale",title:"Enterprise-Grade Architecture",powered_by:"Powered by Industry Standards",items:{0:"Spring Boot 3.4 Microservices",1:"PostgreSQL with Schema-per-Tenant",2:"Redis Caching Layer",3:"MinIO S3 Compatible Storage",4:"Keycloak SSO Identity Management",5:"Kubernetes & Helm Charts"}},pricing:{title:"Simple, Transparent Pricing",subtitle:"Choose the plan that fits your school.",basic:{name:"Basic",price:"990 SEK / month",features:{0:"Up to 100 users",1:"Core Course Management",2:"Basic Reporting",3:"Community Support"},cta:"Get Started"},pro:{name:"Pro",price:"2 990 SEK / month",features:{0:"Up to 500 users",1:"Full Gamification Suite",2:"Skolverket Integration",3:"CSN Export",4:"Priority Support"},cta:"Request Demo",badge:"Most Popular"},enterprise:{name:"Enterprise",price:"Contact Us",features:{0:"Unlimited Users",1:"White-label Branding",2:"Keycloak SSO",3:"SLA 99.99%",4:"Dedicated Infrastructure"},cta:"Contact Sales"}},footer:{tagline:"Empowering education with modern technology. Built with  in Sweden.",product:"Product",features:"Features",pricing:"Pricing",roadmap:"Roadmap",resources:"Resources",documentation:"Documentation",api_reference:"API Reference",system_status:"System Status",connect:"Connect",contact_sales:"Contact Sales",twitter:"Twitter",github:"GitHub",copyright:" 2026 EduFlex. All rights reserved.",developed_by:"Developed by",fenrir:"Fenrir Studio"}},mse={title:"Request Demo",name:"Name",name_placeholder:"Your name",email:"Email",email_placeholder:"your@email.com",organization:"Organization",organization_placeholder:"School name",phone:"Phone",phone_placeholder:"+46 70 123 45 67",message:"Message",message_placeholder:"Tell us about your needs...",submit:"Send Request",sending:"Sending...",success_message:"Thank you! We'll contact you within 24 hours.",error_message:"Something went wrong. Please try again or email us directly."},pse={title:"AI Insights & Recommendations",risk_low:"Low risk",risk_medium:"Medium risk",risk_high:"High risk",suggested_activities:"Proposed activities",coaching_advice:"Coaching advice",update_analysis:"Update AI analysis",lesson_type:"lesson",practice_type:"Exercise",rationale_prefix:"AI reasoning:",no_data:"Not enough data for AI analysis yet. Keep working in the courses!"},xse={common:Lae,sidebar:Rae,library:Pae,dashboard:zae,chat:$ae,forum:Fae,attendance:Bae,assessment:Uae,evaluation:Kae,license:Gae,auth:qae,admin:Vae,catalog:Hae,docs:Wae,calendar:Xae,course:Yae,assignments:Zae,quiz:Qae,profile:Jae,messages:ese,gamification:tse,teacher_dashboard:rse,shortcuts:nse,widgets:ase,teacher_widgets:sse,teacher_tables:ise,student_contact:ose,teacher_modals:lse,course_modal:cse,analytics:dse,invoices:use,subscription_plans:hse,admin_tabs:fse,landing:gse,contact:mse,ai_personalization:pse},bse={save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",upload:"Tlcharger",download:"Tlcharger",search:"Rechercher...",filter:"Filtrer",name:"Nom",action:"Action",description:"Description",date:"Date",size:"Taille",loading:"Chargement...",close:"Fermer",back:"Retour",send:"Envoyer",yes:"Oui",no:"Non",unknown:"Inconnu",light_mode:"Emplacement lumineux",dark_mode:"Mode sombre",choose:"Choisissez...",optional:"En option",minimize_menu:"Rduire le menu",expand_menu:"Dvelopper le menu",online_friends:"Amis en ligne",today:"Aujourd'hui, nous sommes",tomorrow:"Demain",all:"Tous"},yse={dashboard:"Tableau de bord",admin:"Administration",my_profile:"Mon Profil",logout:"Dconnexion",documents:"Documents",catalog:"Catalogue des Cours",calendar:"Calendrier",resource_bank:"Banque de Ressources",library:"Bibliothque",analytics:"Analyses et aperus",support:"Soutien et contact",my_courses:"Mes cours",ebooks:"E-books",system:"Systme",ai_quiz:"Quiz sur l'IA"},vse={welcome:"Bienvenue, {{name}} !",logged_in_as:"Connect en tant que",my_courses:"Mes Cours",files:"Fichiers",no_active_courses:"Aucun cours actif.",evaluations:"valuations",give_rating:"Noter",to_grade:" noter",submissions:"Soumissions",no_pending_grades:"Aucune soumission en attente !",upcoming_deadlines:"Prochaines chances",no_deadlines:"Aucune chance  venir.",urgent:"Urgent !",go_to:"Aller ",avg_grade:"Note moyenne",based_on:"Bas sur {{count}} cours termins",live_overview:"Aperu du systme (En direct)",realtime_data:"Donnes en temps rel.",users:"Utilisateurs",courses:"Cours",archived_files:"Fichiers archivs",latest_registered:"Derniers inscrits",latest_uploads:"Derniers ajouts",archive:"Archive",no_archive_docs:"Aucun document.",teacher_panel:"Panneau Enseignant",overview_for:"Aperu pour {{name}}",my_students:"Mes tudiants",active_courses:"Cours Actifs",students_at_risk:"tudiants  risque",missed_deadlines:"A manqu {{count}} chances",no_risk_students:"Aucun retard !",all_in_phase:"Tous vos tudiants sont  jour.",grading_todo:" faire : Notation",grade_now:"Noter",all_graded:"Tout est not ! Bon travail.",hi_student:"Salut, {{name}} ! ",student_subtitle:"Voici vos tudes en ce moment.",not_registered:"Vous n'tes inscrit  aucun cours.",comming_assignments:"chances  venir",no_upcoming_assignments:"Rien de prvu pour le moment.",admin_overview:"Aperu Systme",admin_subtitle:"Administration et Contrle",total_courses:"Total des Cours",active_students:"tudiants Actifs",locked_courses:"Cours Verrouills",files_in_system:"Fichiers systme",course_registry:"Registre des Cours",search_placeholder:"Chercher code ou nom...",all_statuses:"Tous les statuts",open:"Ouvert",closed:"Ferm",no_match:"Aucun rsultat.",showing_x_of_y:"Affichage de {{count}} sur {{total}} cours",manage:"Grer",welcome_back:"Bienvenue dans le programme,",tabs:{overview:"Aperu du programme",communication:"Communication"},widgets:{stats:"Statistiques",calendar:"Calendrier et horaires",recent_users:"Derniers utilisateurs",recent_docs:"Rcemment tlcharg",messages:"Dernires notifications",online_friends:"Amis en ligne",tickets:"Cas de soutien",gamification:"Statut de la gamification",attendance:"Ma prsence",my_courses:"Mes cours",tasks:"Tches et retour d'information",daily_challenges:"Les dfis d'aujourd'hui",achievements:"Mes ralisations",ai_insights:"Perspectives de l'IA",ai_personalization:"Conseils d'tude personnaliss",daily_challenges_widget:{title:"Les dfis d'aujourd'hui",subtitle:"A complter pour gagner de l'XP",days:"{{count}} jours",empty:"Aucun dfi n'est encore disponible",completed:" Clair",reset_in:"Nouveaux dfis sur {{heures}}h {{minutes}}m"}},total_users:"Total des utilisateurs",realtime_update_notice:"Les donnes sont mises  jour en temps rel.",new_messages:"Nouvelles notifications",go_to_inbox:"Accder  la bote de rception",students:"Les tudiants",teachers:"Enseignants",admins:"Administrateurs",mentors:"Mentors",principals:"Recteurs",new_course:"Nouveau cours",search_course:"Rechercher des cours...",table:{status:"Statut",code:"Code",name:"Nom de l'organisation",date:"Date",action:"Action",user:"Utilisateurs",email:"Courriel",role:"Rouleau"},course_color:"Couleur du cours",edit_course:"Modifier le cours",delete_course:"Supprimer le cours",recent_users:"Derniers utilisateurs",new:"Nouveau",no_new_users:"Aucun nouvel utilisateur n'a t enregistr.",recent_uploads:"Derniers tlchargements",unknown_file:"Fichier inconnu",unknown_size:"Taille inconnue",unknown_date:"Date inconnue",no_files_uploaded:"Aucun fichier n'a encore t tlcharg.",user_registry:"Registre des utilisateurs",new_user:"Nouvel utilisateur",search_user:"Recherche d'utilisateurs...",all_roles:"Tous les rles",active:"Actif",edit_user:"Modifier l'utilisateur",delete_user:"Supprimer des utilisateurs",feedback:{new:"Nouveau retour d'information",course:"Cours : {{nom}}",praise:"Bravo !",details:"Voir les dtails"}},kse={title:"Chat & Support",messenger:"Messagerie",contacts:"Contacts",type_placeholder:"crire...",image:"Image"},wse={title:"Forum de Classe",threads:"Sujets",all_categories:"Toutes les catgories",new_thread:"Nouveau Sujet",empty_title:"C'est vide ici.",empty_student:"Lancez une discussion !",empty_teacher:"Attendez les infos du professeur.",replies:"rponses",create_header:'Nouvelle discussion dans "{{category}}"',subject:"Sujet",subject_placeholder:"Titre...",content:"Contenu",content_placeholder:"Votre message...",publish_btn:"Publier",back_to:"Retour  {{category}}",answers_header:"Rponses",write_reply:"crire une rponse...",create_error:"Erreur lors de la cration.",reply_error:"Erreur lors de la rponse."},jse={title:"Rapport de Prsence",presence:"Prsence :",occasions:"occasions",no_records:"Aucun vnement enregistr.",not_reported:"Non rapport",present:"Prsent",absent:"Absent",description:"Description",no_description:"Pas de description.",note:"Note",manage_attendance:"Grer la prsence",new_event:"Nouvelle opportunit",create_event_title:"Crer une nouvelle opportunit",event_title:"Titre",event_start:"Date de dbut",event_end:"La fin",event_type:"Type",type_lesson:"leon",type_workshop:"Atelier",type_exam:"chantillon",type_other:"Autres",create_btn:"Crer",save_attendance:"Sauvegarder la prsence",saved_success:"L'assiduit est sauve !",save_error:"Erreurs d'enregistrement",create_error:"Impossible de crer des vnements"},Nse={title:"valuation & Rsultats",no_assignments:"Aucun devoir.",deadline:"Date limite",go_to_task:"Voir le devoir",my_file:"Mon fichier",grade:"Note",waiting:"En attente de notation",submitted_at:"Soumis",not_submitted:"Non soumis",submit_now:"Soumettre maintenant"},_se={title:"valuation du Cours",intro:"Vos rponses sont anonymes. Notez de 1  10.",your_rating:"Votre note (1 = Mauvais, 10 = Excellent)",comment_label:"Commentaire (Optionnel)",comment_placeholder:"Votre avis...",submit_btn:"Envoyer",validation_error:"Veuillez noter toutes les questions.",manage_btn:"Grer l'valuation",saved_success:"L'valuation est sauve !",save_error:"Impossible d'enregistrer l'valuation."},Sse={locked_title:"Systme Verrouill",locked_desc:"Aucune licence valide.",key_label:"Cl de Licence",key_placeholder:"XXXX-XXXX-XXXX-XXXX",activate_btn:"Activer"},Ase={login_header:"Connexion",register_header:"Crer un compte",username:"Nom d'utilisateur",password:"Mot de passe",login_button:"Se connecter",no_account:"Pas de compte ?",register_link:"S'inscrire",has_account:"Dj un compte ?",login_link:"Se connecter",firstname:"Prnom",lastname:"Nom",ssn:"Numro de scurit sociale",email:"E-mail",generate:"Gnrer",choose_or_generate:"Choisir ou gnrer...",profane:"Mot inappropri.",taken:"Nom d'utilisateur pris.",available:"Disponible !",role:"Rle",student:"tudiant",admin:"Admin",teacher:"Enseignant",contact_address:"Contact & Adresse",phone:"Tlphone",street:"Rue",zip:"Code postal",city:"Ville",country:"Pays",register_user_btn:"Inscrire l'utilisateur",create_account_btn:"Crer mon compte"},Ese={title:"Administration Systme",subtitle:"Grer les utilisateurs et les cours.",tab_users:"Utilisateurs",tab_courses:"Cours",tab_docs:"Documents",tab_settings:"Paramtres",register_new:"Inscrire un nouvel utilisateur",firstname:"Prnom",lastname:"Nom",ssn:"N(e) le (12 chiffres)",email:"E-mail",account_role:"Compte & Rle",generate:"Gnrer",password:"Mot de passe",create_account:"Crer Compte",registered_users:"Utilisateurs Inscrits",course_overview:"Aperu des Cours",create_course:"Crer un Cours",search_course:"Rechercher...",no_courses:"Aucun cours trouv.",teacher:"Enseignant",students:"tudiants",settings:"Paramtres",content:"Contenu",global_docs:"Archives Globales",upload_file:"Tlcharger un fichier",no_docs:"L'archive est vide.",module_management:"Gestion des Modules",site_name:"Nom du Site",chat_module:"Module de Chat",chat_desc:"Permet le chat en temps rel.",registration:"Inscription",registration_desc:"Permet  l'admin de crer des comptes.",version:"Version",edit_course_settings:"Modifier les paramtres du cours",course_name:"Nom du cours",course_code:"Code du cours",color_theme:"Thme couleur",register_new_user:"Enregistrer un nouvel utilisateur",edit_user:"Modifier l'utilisateur",edit_course:"Modifier le cours",base_on_skolverket:"Bas sur le cours de Skolverk",choose_skolverket_course:"Slectionner le cours de Skolverk",max_seats:"Nombre maximal de siges",tags:"Tags",digital_classroom:"Salle de classe numrique (en option)",choose_platform:"Choisissez votre plateforme...",paste_link:"Coller le lien...",choose_teacher:"Choisissez votre professeur..."},Cse={title:"Catalogue de Cours",subtitle:"Trouvez et inscrivez-vous  de nouveaux cours.",search_placeholder:"Rechercher...",no_results:"Aucun cours trouv.",teacher:"Enseignant",start:"Dbut",not_set:"Non dfini",join:"Rejoindre",closed_msg:"Inscriptions fermes"},Tse={title:"Gestion Documentaire",upload_title:"Tlcharger un fichier",drop_text:"Cliquez ou glissez un fichier ici",search_placeholder:"Rechercher...",save_btn:"Enregistrer",saving:"Enregistrement...",no_results:"Aucun document trouv."},Ose={title:"Calendrier",subtitle:"Suivez vos chances.",events_in:"vnements en",no_events:"Rien de prvu.",days:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]},Ise={back:"Retour",material:"Matriel",assignments:"Devoirs",quiz:"Quiz",forum:"Forum",students:"tudiants",participants:"Participants",role:"Rle",status:"Statut",active:"Actif",add_student:"Ajouter",select_student:"Slectionner...",create_quiz:"Crer Quiz",start_quiz:"Dmarrer Quiz",title:"Titre",description:"Description",upload:"Tlcharger",type_text:"Texte",type_video:"Vido",type_link:"Lien",type_file:"Fichier",link:"Lien (URL)",add_material:"Ajouter Matriel",no_material:"Aucun matriel.",open_link:"Ouvrir lien",read:"Lu",mark_read:"Marquer comme lu",scorm:"Modules interactifs",kursinformation:"Informations sur les cours",attendance:"Prsence",connect_classroom:"Se connecter  la salle de classe",evaluate_course:"valuer le cours",feedback_thanks:"Merci pour vos commentaires !",error_occurred:"Une erreur s'est produite :",result_passed:"Autoris",result_failed:"chec",result_pending:"Non valu",mark_passed:"Autoriser",mark_failed:"Rejeter",certificate:"Certificat",course_completed:"Le cours est ferm",view_certificate:"Certificat de visa",claim_certificate:"Tlcharger le certificat"},Dse={header:"Devoirs",new:"Nouveau",create_header:"Crer Devoir",cancel:"Annuler",save:"Enregistrer",deadline:"Date limite",no_assignments:"Aucun devoir.",submissions:"Soumissions",no_submissions:"Aucune soumission.",file_received:"Fichier reu",grade_placeholder:"- Note -",feedback_placeholder:"Retour...",submitted:"Soumis !",submitted_desc:"Vous avez soumis ce devoir.",submit_button:"Soumettre",select_file_alert:"Choisissez un fichier !"},Mse={header:"Quiz & Examens",subtitle:"Testez vos connaissances.",questions_count:"Questions",knowledge_check:"Vrification des connaissances.",no_quizzes:"Aucun quiz disponible.",updated_alert:"Quiz mis  jour !",created_alert:"Quiz cr !",save_error:"Erreur de sauvegarde.",delete_confirm:"Supprimer ce quiz ?",delete_error:"Impossible de supprimer.",result_saved:"Rsultat enregistr",create_title:"Crer Quiz",edit_title:"Modifier Quiz",modal_quiz_title:"Titre du Quiz",title_placeholder:"Ex. Java Basics",question:"Question",question_placeholder:"crivez la question...",option:"Option",add_option:"Ajouter option",add_question:"Ajouter question",save_btn:"Enregistrer",update_btn:"Mettre  jour",submit_btn:"Soumettre",result_header:"Rsultat",result_msg:"Bravo ! Rsultat enregistr."},Lse={title:"Mon Profil",details:"Dtails Personnels",security:"Scurit",language:"Langue",firstname:"Prnom",lastname:"Nom",email:"E-mail",phone:"Tlphone",address_header:"ADRESSE",street:"Rue",zip:"Code postal",city:"Ville",country:"Pays",current_password:"Mot de passe actuel",new_password:"Nouveau mot de passe",confirm_password:"Confirmer le mot de passe",update_password:"Mettre  jour",save_changes:"Enregistrer",password_mismatch:"Les mots de passe ne correspondent pas !",password_error:"Impossible de changer le mot de passe.",choose_strong_password:"Choisissez un mot de passe fort pour protger votre compte.",settings:"Paramtres",settings_header:"Personnaliser l'Accueil",settings_desc:"Choisissez les widgets  afficher sur votre vue d'ensemble.",show_calendar:"Afficher le Calendrier",show_messages:"Afficher les Messages",show_stats:"Afficher les Statistiques"},Rse={profile_updated:"Profil enregistr !",password_changed:"Mot de passe chang !",login_failed:"chec de connexion.",login_error:"Erreur de connexion.",account_created:"Compte cr !",register_error:"Erreur d'inscription.",license_approved:"Licence approuve !",license_error:"Activation impossible.",upload_success:"Fichier tlcharg !",upload_error:"chec du tlchargement.",setting_saved:"Enregistr !",setting_error:"Erreur de sauvegarde.",user_deleted:"Utilisateur supprim.",delete_error:"Impossible de supprimer.",course_deleted:"Cours supprim.",course_delete_error:"Impossible de supprimer.",joined_course:"Rejoint !",loading:"Chargement...",loading_course:"Chargement du cours..."},Pse={level_title:"NIVEAU ACTUEL",points_to_next:"points pour le niveau suivant",my_badges:"Mes Badges",rank_newbie:"Novice",rank_apprentice:"Apprenti",rank_expert:"Expert",rank_master:"Matre",rank_legend:"Lgende"},zse={tab_overview:"Aperu",tab_grading:" Noter",tab_applications:"Candidatures",tab_courses:"Mes Cours",tab_students:"Progrs des tudiants",tab_communication:"Communication",section_schedule:"Calendrier  Venir",section_shortcuts:"Raccourcis",section_admin:"Administration",ongoing_course:"Cours en Cours",upcoming_event:"vnement  Venir",no_events:"Aucun vnement prvu.",new_message:"Nouveau Message",course_start:"Date de dbut des cours : {{nom}}"},$se={calendar:"Aller au Calendrier",students:"Grer les tudiants",grading:"Noter les Devoirs",messages:"Messages",create_course:"Crer un Nouveau Cours"},Fse={recent_messages:{title:"Messages Rcents",view_all:"Voir Tout",empty:"Pas de nouveaux messages.",from:"De"},online_friends:{title:"Amis en ligne",x_online:"{{count}} en ligne",empty:"Pas d'amis en ligne pour le moment.",profile:"Profil de",view_all:"Afficher tous les amis"},live_lessons:{title:"Cours en direct",subtitle:"Prochaines runions vido",soon:"Bientt",host:"Hte",join:"Rejoignez-nous",prepare:"Prparer",view:"Visas",see_all_calendar:"Tout voir dans le calendrier",error_load:"Impossible de charger les leons",error_join:"Impossible de se connecter  la leon"},tickets:{active:"Cas d'assistance actifs",critical:"Critique",high:"Priorit leve",medium:"Priorit moyenne",low:"Faible priorit",open:"Affaires en cours",empty:"Il n'y a pas de dossier en cours pour le moment."},student_progress:{title:"Mes rsultats de cours",on_track:"Bien situ",at_risk:"Avertissement",assignments:"Tches",quizzes:"Quiz",detailed_overview:"Aperu dtaill",latest_results:"Derniers rsultats",no_results:"Aucun rsultat pour l'instant.",catch_up:"Ne manquez pas de rattraper votre retard !",go_to_course:"Aller au cours"},attendance_widget:{title:"Ma prsence numrique",activity_level:"Niveau d'activit",registered_time:"Temps enregistr",goal_week:"Objectif (semaine)",low_warning:"A noter. Votre taux de participation est faible. Veuillez contacter votre mentor."},schedule:{title:"Programme de la journe et de la semaine",loading:"Chargement du programme...",campus:"Campus",online:"En ligne",connect:"Connecter",empty:"Pas de cours aujourd'hui",view_full:"Voir le programme complet",upcoming_submissions:"Soumissions  venir",go_to_task:"Aller  la tche",no_deadlines:"Aucune chance  venir",view_all_count:"Tout afficher ({{count}})",room_missing:"Pice manquante"}},Bse={create_title:"Crer un Nouveau Cours",edit_title:"Modifier le Cours",name:"Nom du Cours",code:"Code du Cours",category:"Catgorie",description:"Description du Cours",start_date:"Date de Dbut",end_date:"Date de Fin",max_students:"Max tudiants",classroom_section:"Classe Numrique",classroom_link:"Lien de Runion",exam_link:"Lien Salle d'Examen",create_btn:"Crer",go_to_course:"Aller au cours"},Use={title:"Aperus du Systme",subtitle:"Analyse approfondie des performances et de la croissance de la plateforme.",financial_overview:"Aperu Financier",revenue_analytics:"Analyse des Revenus",student_insights:"Aperus des tudiants",system_infrastructure:"Infrastructure Systme",monthly_recurring_revenue:"Revenus Rcurrents Mensuels (MRR)",total_users:"Utilisateurs Totaux",active_sessions:"Sessions Actives",server_health:"tat du Serveur",operational:"Oprationnel",stable:"Stable",revenue_growth:"Croissance des Revenus",user_acquisition:"Acquisition d'Utilisateurs",export_csv:"Exporter CSV",day:"Jour",week:"Semaine",month:"Mois",year:"Anne",vs_last_month:"vs mois dernier",system_status:"tat du Systme",total_students:"tudiants Totaux",at_risk:" Risque",avg_time_online:"Temps Moyen en Ligne",student_performance_registry:"Registre de Performance des tudiants",student_name:"Nom de l'tudiant",status:"Statut",courses:"Cours",completion:"Achvement",total_time_online:"Temps Total en Ligne",risk_factor:"Facteur de Risque",no_student_data:"Aucune donne tudiant disponible.",grafana_dashboard:"Tableau de Bord Grafana",grafana_description:"Mtriques en temps rel du systme (CPU, Mmoire, Requtes).",open_full_grafana:"Ouvrir Grafana Complet",prometheus_metrics:"Mtriques Prometheus",prometheus_description:"Explorateur de mtriques brutes.",open_prometheus:"Ouvrir Prometheus",all_systems_normal:"Tous les systmes fonctionnent normalement.",uptime:"Temps de Fonctionnement",revenue_title:"Analyse des Revenus",revenue_subtitle:"Aperus complets des revenus et paiements",loading_revenue_data:"Chargement des donnes de revenus...",annual_recurring_revenue:"Revenus Rcurrents Annuels (ARR)",payment_success_rate:"Taux de Russite des Paiements",avg_payment_amount:"Montant Moyen des Paiements",excellent:"Excellent",good:"Bon",revenue_growth_trend:"Tendance de Croissance des Revenus",payment_methods:"Mthodes de Paiement",no_payment_data:"Aucune donne de paiement disponible",total_payments:"Paiements Totaux",successful:"Russi",failed:"chou"},Kse={title:"Gestion des Factures",create_invoice:"Crer Facture",export_csv:"Exporter CSV",exporting:"Exportation...",loading:"Chargement des factures...",all:"Toutes",draft:"Brouillon",pending:"En Attente",sent:"Envoye",paid:"Paye",overdue:"En Retard",cancelled:"Annule",invoice_number:"Numro de Facture",customer:"Client",amount:"Montant",issue_date:"Date d'mission",due_date:"Date d'chance",status:"Statut",actions:"Actions",no_invoices_found:"Aucune facture trouve",total_invoices:"Total des Factures",send_reminder_confirm:"Envoyer un rappel de paiement au client?",reminder_sent:"Rappel de paiement envoy!",delete_confirm:"tes-vous sr de vouloir supprimer cette facture?",refund_confirm:"tes-vous sr de vouloir rembourser ce paiement? Cette action ne peut pas tre annule.",refund_success:"Remboursement initi",refund_failed:"Impossible de rembourser. Vrifiez la console pour plus de dtails.",no_payment_details:"Impossible de trouver les dtails de paiement pour cette facture.",view_pdf:"Voir PDF",generate_pdf:"Gnrer PDF"},Gse={title:"Plans d'Abonnement",subtitle:"Grer les niveaux de tarification et les options d'abonnement",create_plan:"Crer Plan",loading:"Chargement des plans d'abonnement...",default_badge:"PAR DFAUT",inactive_badge:"INACTIF",unlimited:"Illimit",users:"Utilisateurs",courses:"Cours",storage:"Stockage",features:"Fonctionnalits",edit:"Modifier",activate:"Activer",deactivate:"Dsactiver",delete_confirm:"tes-vous sr de vouloir supprimer ce plan?",edit_plan:"Modifier Plan",create_new_plan:"Crer Nouveau Plan",plan_name_internal:"Nom du Plan (Interne)",display_name:"Nom d'Affichage",description:"Description",price:"Prix",currency:"Devise",trial_period_days:"Priode d'Essai (Jours)",billing_interval:"Intervalle de Facturation",monthly:"Mensuel",yearly:"Annuel",lifetime:" Vie",max_users:"Max Utilisateurs (-1 = illimit)",max_courses:"Max Cours (-1 = illimit)",max_storage:"Stockage GB (-1 = illimit)",add_feature:"+ Ajouter Fonctionnalit",enter_feature:"Entrez le nom de la fonctionnalit:",active:"Actif",default_plan:"Plan par Dfaut",sort_order:"Ordre de Tri",cancel:"Annuler",update_plan:"Mettre  Jour Plan",create_plan_btn:"Crer Plan"},qse={administration:"Administration",system_settings:"Paramtres Systme",skolverket_import:"Import Skolverket",skolverket_data:"Donnes Skolverket",users:"Utilisateurs",courses:"Cours",roles:"Rles",revenue:"Revenus",invoices:"Factures",subscription_plans:"Plans d'Abonnement",payment_settings:"Paramtres de Paiement",promo_codes:"Codes Promo",tickets:"Enjeux"},Vse={title:"Bibliothque",subtitle:"Explorer et lire des livres lectroniques",search_placeholder:"Recherche par titre ou par auteur...",categories:"Catgories",all_categories:"Tous",read_book:"Lire le livre",edit_book:"Editer le livre",delete_book:"Supprimer le livre",upload_book:"Tlcharger un nouveau livre",no_books_found:"Aucun livre n'a t trouv.",edit_modal_title:"diter un livre lectronique",upload_modal_title:"Tlcharger un nouveau livre lectronique",title_label:"Titre",author_label:"Auteur",category_label:"Catgorie",description_label:"Description du programme",save_changes:"Enregistrer les modifications",upload_btn:"Tlchargement",language_label:"Langue",epub_file_label:"Fichier EPUB",cover_image_label:"Image de couverture",no_cover:"Pas de couverture",select_file_alert:"Veuillez slectionner un fichier EPUB",delete_confirm:"tes-vous sr de vouloir supprimer ce livre ?",delete_success:"Livre retir",no_books_desc:"Essayez de chercher autre chose ou de tlcharger votre premier livre lectronique  la bibliothque."},Hse={active_courses:"Cours actifs",my_students:"Mes lves",to_grade:"Corriger",applications:"Applications",risk_zone:"Zone  risque",at_risk_title:"Les lves dans la zone de danger",students_count:"{{count}} st",no_at_risk:"Aucun lve n'est en danger pour le moment. ",completion_prefix:"finalis",view_all_risk:"Afficher tous les lves  risque"},Wse={all_graded_title:"Tout est corrig !",all_graded_desc:"Bon travail, aucune soumission en attente.",pending_submissions_count:"Soumissions en attente ({{count}})",action_required:"Ncessite une action",student:"tudiant",assignment:"Tche",course:"Cours",submitted:"Soumis",go_to_grading:"Aller  la correction",no_pending_applications:"Aucune demande n'est en cours pour le moment.",applying_to:"S'inscrire  un cours",date:"Date",decision:"Dcision",approve:"Autoriser",reject:"Rejeter",never:"Jamais",days_ago:"Il y a {{count}} jours",contact:"Contactez nous",admitted_msg:"tudiant accept !",rejected_msg:"Demande rejete.",error_msg:"Quelque chose n'a pas fonctionn.",unknown_student:"Inconnu"},Xse={title:"Contacter l'tudiant",subtitle:"Rapport et suivi avec {{nom}}",risk_factor:"Facteur de risque identifi",never_logged_in:"L'tudiant ne s'est jamais connect  la plateforme.",inactive_days:"L'tudiant est inactif depuis {{count}} jours.",no_risk:"Aucun risque critique n'a t identifi pour le moment, mais un suivi est recommand.",subject_label:"Sujet (en fonction du risque)",auto_generated_label:"Document gnr automatiquement",auto_generated_desc:"Cette documentation est base sur les donnes du systme et est envoye par courrier lectronique.",teacher_notes_label:"Vos commentaires / Plan d'action",teacher_notes_placeholder:"Rdigez un message personnalis, des instructions ou des actions spcifiques que l'lve doit faire...",report_and_send:"Rapport et envoi",sending:"Envoi...",sent_success:"Message envoy !",send_error:"Impossible d'envoyer le message.",divider:"Commentaire de l'enseignant :",regards:"Je vous prie d'agrer, Monsieur le Prsident, l'expression de mes sentiments distingus.",templates:{follow_up_subject:"Suivi de vos tudes",no_login_subject:"Important : Vous n'tes pas encore connect",no_login_body:"Je vois que vous ne vous tes pas encore connect  EduFlex. Afin de bnficier du cours, il est important que vous commenciez rapidement.",need_help_login:"Vous avez besoin d'aide pour vous connecter ou pour trouver le bon matriel ?",warning_inactivity_subject:"Avertissement : taux lev d'absentisme et d'inactivit",warning_inactivity_body:"Je constate que vous n'tes plus actif sur EduFlex depuis {{count}} jours. Ceci est inquitant et affecte ngativement vos tudes.",review_plan:"Nous devrons revoir votre plan d'tudes afin de nous assurer que vous disposez de suffisamment de temps pour complter tous les modules.",follow_up_absence_subject:"Suivi : Absence",follow_up_absence_body:"J'ai remarqu que cela fait {{count}} jours que vous n'avez pas t actif.",reach_out:"N'hsitez pas  nous contacter si vous avez besoin d'aide pour une tape spcifique.",generic_body:"Je veux savoir comment vous vous dbrouillez dans le cours."}},Yse={tags_placeholder:"Tags (sparer par une virgule, par exemple AI, Maths, Algebra)",group_rooms:"Salle de groupe",room_name_placeholder:"Nom de l'organisation",link:"Lien vers",add_room:"+ Ajouter une salle de groupe",course_color:"Couleur du cours",error_create:"Impossible de crer le cours.",error_update:"Impossible de mettre  jour le cours.",course_name:"Nom du cours",course_code:"Code du cours"},Zse={nav:{features:"Caractristiques et fonctions",architecture:"Architecture",pricing:"Prix",login:"Se connecter au site web",get_started:"Pour commencer"},hero:{badge:"v2.0 disponible",title_start:"Le LMS en tant que",title_highlight:"Les tudiants aiment",subtitle:"EduFlex comble le foss entre les LMS d'entreprise et les applications grand public modernes. L'apprentissage gamifi, rapide et beau pour la nouvelle gnration.",cta_trial:"Rserver une dmonstration",cta_docs:"Voir la documentation de l'API"},features:{badge:"Pourquoi EduFlex ?",title:"Tout ce dont vous avez besoin pour grer une cole moderne",subtitle:"Des outils d'valuation robustes  l'assistance rvolutionnaire en matire d'IA, nous avons tout ce qu'il vous faut.",ai_creator:{title:"Crateur de cours d'IA",desc:"Tlchargez un guide d'tude (PDF) et laissez Gemini AI crer un cours complet avec des leons, des dates et des codes intelligents en moins de 60 secondes. Maintenant avec synchronisation automatique de la base de donnes."},cascading_deletes:{title:"Annulation de la cascade",desc:"Gestion transparente du contenu des cours. Lorsqu'un cours est supprim, tous les documents et leons associs sont automatiquement supprims pour que la base de donnes reste propre."},lti_ready:{title:"LTI 1.3 prt",desc:"Prise en charge entirement vrifie des lancements de l'OIDC. Intgration transparente avec des plateformes externes telles que Canvas et Moodle."},gamification:{title:"Gamification 2.0",desc:"XP, badges, niveaux, classements et dfis quotidiens intgrs pour accrotre l'engagement des lves."},multi_tenancy:{title:"Une vritable multi-tenance",desc:`Isolation totale des donnes grce  l'architecture "schma par locataire". Vos donnes vous appartiennent.`},analytics:{title:"Analyses et aperus",desc:"Tableaux de bord en temps rel pour les directeurs et les enseignants. Cartes de chaleur et prdiction des abandons."},security:{title:"Scurit des entreprises",desc:"Contrle d'accs bas sur les rles (RBAC), enregistrement des audits et intgration scurise de Keycloak SSO."}},architecture:{badge:"Conu pour s'adapter",title:"Architecture d'entreprise",powered_by:"Les normes de l'industrie",items:{0:"Spring Boot 3.4 Microservices",1:"PostgreSQL avec Schema-per-Tenant",2:"Stockage en cache Redis",3:"Stockage compatible MinIO S3",4:"Gestion de l'identit SSO de Keycloak",5:"Kubernetes et graphiques Helm"}},pricing:{title:"Une tarification simple et transparente",subtitle:"Choisissez le plan qui convient  votre cole.",basic:{name:"De base",price:"990 SEK / mois",features:{0:"Jusqu' 100 utilisateurs",1:"Gestion de base des cours",2:"Rapports faciles  tablir",3:"Soutien communautaire"},cta:"Pour commencer"},pro:{name:"Pro",price:"2 990 SEK / mois",features:{0:"Jusqu' 500 utilisateurs",1:"Gamification complte",2:"Skolverket-Intgration",3:"CSN export",4:"Soutien prioritaire"},cta:"Rserver une dmonstration",badge:"Les plus populaires"},enterprise:{name:"Entreprise",price:"Nous contacter",features:{0:"Nombre illimit d'utilisateurs",1:"Marque blanche",2:"Keycloak SSO",3:"SLA 99.99%",4:"Infrastructure ddie"},cta:"Contacter les ventes"}},footer:{tagline:"Renforcer l'ducation grce  la technologie moderne. Construit sur  en Sude.",product:"Produit",features:"Caractristiques et fonctions",pricing:"Prix",roadmap:"Feuille de route",resources:"Ressources",documentation:"Documentation",api_reference:"Rfrence API",system_status:"tat du systme",connect:"Contactez nous",contact_sales:"Contacter les ventes",twitter:"Twitter",github:"GitHub",copyright:" 2026 EduFlex. Tous droits rservs.",developed_by:"Dvelopp par",fenrir:"Studio Fenrir"}},Qse={title:"Rserver une dmonstration",name:"Nom de l'organisation",name_placeholder:"Votre nom",email:"Adresse lectronique",email_placeholder:"din@email.se",organization:"Organisation",organization_placeholder:"[MISSING] Skolans namn",phone:"Numro de tlphone",phone_placeholder:"+46 70 123 45 67",message:"Notification",message_placeholder:"Parlez-nous un peu de vos besoins...",submit:"Envoyer la demande",sending:"Envoi...",success_message:"Merci beaucoup ! Nous vous contacterons dans les 24 heures.",error_message:"Un problme s'est produit. Veuillez ressayer ou nous envoyer un courriel directement."},Jse={title:"Perspectives et recommandations en matire d'IA",risk_low:"Risque faible",risk_medium:"Risque moyen",risk_high:"Risque lev",suggested_activities:"Activits proposes",coaching_advice:"Conseils d'accompagnement",update_analysis:"Mise  jour de l'analyse de l'IA",lesson_type:"leon",practice_type:"Exercice",rationale_prefix:"Raisonnement de l'IA :",no_data:"Il n'y a pas encore assez de donnes pour l'analyse de l'IA. Continuez  travailler dans les cours !"},eie={common:bse,sidebar:yse,dashboard:vse,chat:kse,forum:wse,attendance:jse,assessment:Nse,evaluation:_se,license:Sse,auth:Ase,admin:Ese,catalog:Cse,docs:Tse,calendar:Ose,course:Ise,assignments:Dse,quiz:Mse,profile:Lse,messages:Rse,gamification:Pse,teacher_dashboard:zse,shortcuts:$se,widgets:Fse,course_modal:Bse,analytics:Use,invoices:Kse,subscription_plans:Gse,admin_tabs:qse,library:Vse,teacher_widgets:Hse,teacher_tables:Wse,student_contact:Xse,teacher_modals:Yse,landing:Zse,contact:Qse,ai_personalization:Jse},tie={save:"Speichern",cancel:"Abbrechen",delete:"Lschen",edit:"Bearbeiten",upload:"Hochladen",download:"Herunterladen",search:"Suchen...",filter:"Filtern",name:"Name",action:"Aktion",description:"Beschreibung",date:"Datum",size:"Gre",loading:"Laden...",close:"Schlieen",back:"Zurck",send:"Senden",yes:"Ja",no:"Nein",unknown:"Unbekannt",light_mode:"Helle Lage",dark_mode:"Dunkler Modus",choose:"Whlen Sie...",optional:"Optional",minimize_menu:"Men minimieren",expand_menu:"Men ausklappen",online_friends:"Online-Freunde",today:"Heute sind wir",tomorrow:"Morgen",all:"Alle"},rie={dashboard:"Dashboard",admin:"Verwaltung",my_profile:"Mein Profil",logout:"Abmelden",documents:"Dokumente",catalog:"Kurskatalog",calendar:"Kalender",resource_bank:"Ressourcenbank",library:"Bibliothek",analytics:"Analysen & Einblicke",support:"Untersttzung & Kontakt",my_courses:"Meine Kurse",ebooks:"E-books",system:"System",ai_quiz:"AI-Quiz"},nie={welcome:"Willkommen, {{name}}!",logged_in_as:"Angemeldet als",my_courses:"Meine Kurse",files:"Dateien",no_active_courses:"Keine aktiven Kurse.",evaluations:"Bewertungen",give_rating:"Bewerten",to_grade:"Zu benoten",submissions:"Einreichungen",no_pending_grades:"Keine offenen Einreichungen!",upcoming_deadlines:"Nchste Fristen",no_deadlines:"Keine anstehenden Fristen.",urgent:"Dringend!",go_to:"Gehe zu",avg_grade:"Durchschnittsnote",based_on:"Basierend auf {{count}} abgeschlossenen Kursen",live_overview:"Systembersicht (Live)",realtime_data:"Echtzeitdaten.",users:"Benutzer",courses:"Kurse",archived_files:"Archivierte Dateien",latest_registered:"Zuletzt registriert",latest_uploads:"Neueste Uploads",archive:"Archiv",no_archive_docs:"Keine Dokumente.",teacher_panel:"Lehrer-Panel",overview_for:"bersicht fr {{name}}",my_students:"Meine Studenten",active_courses:"Aktive Kurse",students_at_risk:"Gefhrdete Studenten",missed_deadlines:"Hat {{count}} Fristen verpasst",no_risk_students:"Keine Versptungen!",all_in_phase:"Alle Studenten sind im Plan.",grading_todo:"Zu erledigen: Benotung",grade_now:"Benoten",all_graded:"Alles benotet! Gute Arbeit.",hi_student:"Hallo, {{name}}! ",student_subtitle:"Hier ist dein aktueller Lernstand.",not_registered:"Du bist in keinen Kursen eingeschrieben.",comming_assignments:"Kommende Aufgaben",no_upcoming_assignments:"Nichts anstehend.",admin_overview:"Systembersicht",admin_subtitle:"Verwaltung und Steuerung",total_courses:"Gesamtkurse",active_students:"Aktive Studenten",locked_courses:"Gesperrte Kurse",files_in_system:"Dateien im System",course_registry:"Kursregister",search_placeholder:"Code oder Namen suchen...",all_statuses:"Alle Status",open:"Offen",closed:"Geschlossen",no_match:"Keine Treffer.",showing_x_of_y:"Zeige {{count}} von {{total}} Kursen",manage:"Verwalten",welcome_back:"Willkommen zurck in der Sendung,",tabs:{overview:"berblick ber das Programm",communication:"Kommunikation"},widgets:{stats:"Statistik",calendar:"Kalender & Zeitplan",recent_users:"Neueste Benutzer",recent_docs:"Krzlich hochgeladen",messages:"Aktuelle Meldungen",online_friends:"Online-Freunde",tickets:"Untersttzungsflle",gamification:"Status der Gamifizierung",attendance:"Meine Anwesenheit",my_courses:"Meine Kurse",tasks:"Aufgaben & Feedback",daily_challenges:"Die heutigen Herausforderungen",achievements:"Meine Errungenschaften",ai_insights:"KI-Einsichten",ai_personalization:"Persnliche Lerntipps",daily_challenges_widget:{title:"Die heutigen Herausforderungen",subtitle:"Abschlieen, um XP zu verdienen",days:"{{Zahl}} Tage",empty:"Noch keine Herausforderungen verfgbar",completed:" Klar",reset_in:"Neue Herausforderungen am {{Stunden}}h {{Minuten}}m"}},total_users:"Benutzer insgesamt",realtime_update_notice:"Die Daten werden in Echtzeit aktualisiert.",new_messages:"Neue Benachrichtigungen",go_to_inbox:"Zum Posteingang gehen",students:"Studenten",teachers:"Lehrerinnen und Lehrer",admins:"Admins",mentors:"Mentoren",principals:"Rektoren",new_course:"Neuer Kurs",search_course:"Suche nach Kursen...",table:{status:"Status",code:"Code",name:"Name der Organisation",date:"Datum",action:"Aktion",user:"Benutzer",email:"E-Mail",role:"Rolle"},course_color:"Farbe des Kurses",edit_course:"Kurs bearbeiten",delete_course:"Kurs entfernen",recent_users:"Neueste Benutzer",new:"Neu",no_new_users:"Keine neuen Benutzer registriert.",recent_uploads:"Letzte Uploads",unknown_file:"Unbekannte Datei",unknown_size:"Unbekannte Gre",unknown_date:"Unbekanntes Datum",no_files_uploaded:"Es wurden noch keine Dateien hochgeladen.",user_registry:"Register der Benutzer",new_user:"Neuer Benutzer",search_user:"Benutzer suchen...",all_roles:"Alle Rollen",active:"Aktiv",edit_user:"Benutzer bearbeiten",delete_user:"Benutzer entfernen",feedback:{new:"Neues Feedback",course:"Kurs: {{Name}}",praise:"Gut gemacht!",details:"Details anzeigen"}},aie={title:"Chat & Support",messenger:"Nachrichten",contacts:"Kontakte",type_placeholder:"Schreiben...",image:"Bild"},sie={title:"Klassenforum",threads:"Themen",all_categories:"Alle Kategorien",new_thread:"Neues Thema",empty_title:"Hier ist es leer.",empty_student:"Starte eine Diskussion!",empty_teacher:"Warte auf Informationen vom Lehrer.",replies:"Antworten",create_header:'Neue Diskussion in "{{category}}"',subject:"Betreff",subject_placeholder:"Thema...",content:"Inhalt",content_placeholder:"Deine Nachricht...",publish_btn:"Verffentlichen",back_to:"Zurck zu {{category}}",answers_header:"Antworten",write_reply:"Antwort schreiben...",create_error:"Fehler beim Erstellen.",reply_error:"Fehler beim Antworten."},iie={title:"Anwesenheitsbericht",presence:"Anwesenheit:",occasions:"Anlsse",no_records:"Keine Eintrge.",not_reported:"Nicht gemeldet",present:"Anwesend",absent:"Abwesend",description:"Beschreibung",no_description:"Keine Beschreibung.",note:"Notiz",manage_attendance:"Prsenz verwalten",new_event:"Neue Chance",create_event_title:"Neue Mglichkeiten schaffen",event_title:"Titel",event_start:"Datum des Beginns",event_end:"Das Ende",event_type:"Typ",type_lesson:"Lektion",type_workshop:"Workshop",type_exam:"Muster",type_other:"Andere",create_btn:"erstellen.",save_attendance:"Anwesenheit speichern",saved_success:"Anwesenheit gespeichert!",save_error:"Fehler beim Speichern",create_error:"Konnte keine Ereignisse erstellen"},oie={title:"Bewertung & Ergebnisse",no_assignments:"Keine Aufgaben.",deadline:"Frist",go_to_task:"Zur Aufgabe",my_file:"Meine Datei",grade:"Note",waiting:"Wartet auf Benotung",submitted_at:"Eingereicht",not_submitted:"Nicht eingereicht",submit_now:"Jetzt einreichen"},lie={title:"Kursevaluation",intro:"Deine Antworten sind anonym. Bewerte von 1 bis 10.",your_rating:"Deine Bewertung (1 = Schlecht, 10 = Exzellent)",comment_label:"Kommentar (Optional)",comment_placeholder:"Deine Meinung...",submit_btn:"Senden",validation_error:"Bitte bewerte alle Fragen.",manage_btn:"Bewertung verwalten",saved_success:"Bewertung gespeichert!",save_error:"Die Auswertung konnte nicht gespeichert werden."},cie={locked_title:"System Gesperrt",locked_desc:"Keine gltige Lizenz.",key_label:"Lizenzschlssel",key_placeholder:"XXXX-XXXX-XXXX-XXXX",activate_btn:"Aktivieren"},die={login_header:"Anmelden",register_header:"Konto erstellen",username:"Benutzername",password:"Passwort",login_button:"Anmelden",no_account:"Kein Konto?",register_link:"Registrieren",has_account:"Bereits ein Konto?",login_link:"Anmelden",firstname:"Vorname",lastname:"Nachname",ssn:"Sozialversicherungsnummer",email:"E-Mail",generate:"Generieren",choose_or_generate:"Whlen oder generieren...",profane:"Unangemessenes Wort.",taken:"Benutzername vergeben.",available:"Verfgbar!",role:"Rolle",student:"Student",admin:"Admin",teacher:"Lehrer",contact_address:"Kontakt & Adresse",phone:"Telefon",street:"Strae",zip:"PLZ",city:"Stadt",country:"Land",register_user_btn:"Benutzer registrieren",create_account_btn:"Mein Konto erstellen"},uie={title:"Systemverwaltung",subtitle:"Benutzer, Kurse und Archive verwalten.",tab_users:"Benutzer",tab_courses:"Kurse",tab_docs:"Dokumente",tab_settings:"Einstellungen",register_new:"Neuen Benutzer registrieren",firstname:"Vorname",lastname:"Nachname",ssn:"SV-Nummer (12 Ziffern)",email:"E-Mail",account_role:"Konto & Rolle",generate:"Generieren",password:"Passwort",create_account:"Konto erstellen",registered_users:"Registrierte Benutzer",course_overview:"Kursbersicht",create_course:"Neuen Kurs erstellen",search_course:"Suchen...",no_courses:"Keine Kurse gefunden.",teacher:"Lehrer",students:"Studenten",settings:"Einstellungen",content:"Inhalt",global_docs:"Globales Archiv",upload_file:"Datei hochladen",no_docs:"Archiv ist leer.",module_management:"Modulverwaltung",site_name:"Seitenname",chat_module:"Chat-Modul",chat_desc:"Ermglicht Echtzeit-Chat.",registration:"Registrierung",registration_desc:"Erlaubt Admin neue Konten zu erstellen.",version:"Version",edit_course_settings:"Kurseinstellungen bearbeiten",course_name:"Kursname",course_code:"Kurscode",color_theme:"Farbthema",register_new_user:"Neuen Benutzer registrieren",edit_user:"Benutzer bearbeiten",edit_course:"Kurs bearbeiten",base_on_skolverket:"Basierend auf dem Skolverk-Kurs",choose_skolverket_course:"Skolverk Kurs auswhlen",max_seats:"Maximale Sitzpltze",tags:"Tags",digital_classroom:"Digitales Klassenzimmer (optional)",choose_platform:"Whlen Sie Ihre Plattform...",paste_link:"Link einfgen...",choose_teacher:"Whlen Sie Ihren Lehrer..."},hie={title:"Kurskatalog",subtitle:"Finde und belege neue Kurse.",search_placeholder:"Suchen...",no_results:"Keine Kurse gefunden.",teacher:"Lehrer",start:"Start",not_set:"Nicht festgelegt",join:"Beitreten",closed_msg:"Anmeldung geschlossen"},fie={title:"Dokumentenverwaltung",upload_title:"Datei hochladen",drop_text:"Klicken oder Datei hierher ziehen",search_placeholder:"Suchen...",save_btn:"Speichern",saving:"Speichern...",no_results:"Keine Dokumente gefunden."},gie={title:"Kalender",subtitle:"Behalte deine Fristen im Blick.",events_in:"Ereignisse im",no_events:"Nichts geplant.",days:["Mo","Di","Mi","Do","Fr","Sa","So"]},mie={back:"Zurck",material:"Material",assignments:"Aufgaben",quiz:"Quiz",forum:"Forum",students:"Studenten",participants:"Teilnehmer",role:"Rolle",status:"Status",active:"Aktiv",add_student:"Hinzufgen",select_student:"Auswhlen...",create_quiz:"Quiz erstellen",start_quiz:"Quiz starten",title:"Titel",description:"Beschreibung",upload:"Hochladen",type_text:"Text",type_video:"Video",type_link:"Link",type_file:"Datei",link:"Link (URL)",add_material:"Material hinzufgen",no_material:"Kein Material.",open_link:"Link ffnen",read:"Gelesen",mark_read:"Als gelesen markieren",scorm:"Interaktive Module",kursinformation:"Informationen zum Kurs",attendance:"Anwesenheit",connect_classroom:"Mit dem Klassenzimmer verbinden",evaluate_course:"Kurs evaluieren",feedback_thanks:"Vielen Dank fr Ihr Feedback!",error_occurred:"Es ist ein Fehler aufgetreten:",result_passed:"Autorisiert",result_failed:"Gescheitert",result_pending:"Nicht bewertet",mark_passed:"Autorisieren Sie",mark_failed:"Ablehnen",certificate:"Zertifikat",course_completed:"Der Kurs ist geschlossen",view_certificate:"Visumbescheinigung",claim_certificate:"Zertifikat herunterladen"},pie={header:"Aufgaben",new:"Neu",create_header:"Aufgabe erstellen",cancel:"Abbrechen",save:"Speichern",deadline:"Frist",no_assignments:"Keine Aufgaben.",submissions:"Einreichungen",no_submissions:"Keine Einreichungen.",file_received:"Datei empfangen",grade_placeholder:"- Note -",feedback_placeholder:"Feedback...",submitted:"Eingereicht!",submitted_desc:"Du hast diese Aufgabe eingereicht.",submit_button:"Einreichen",select_file_alert:"Whle eine Datei!"},xie={header:"Quiz & Prfungen",subtitle:"Teste dein Wissen.",questions_count:"Fragen",knowledge_check:"Wissensberprfung.",no_quizzes:"Keine Quiz verfgbar.",updated_alert:"Quiz aktualisiert!",created_alert:"Quiz erstellt!",save_error:"Fehler beim Speichern.",delete_confirm:"Lschen?",delete_error:"Lschen fehlgeschlagen.",result_saved:"Ergebnis gespeichert",create_title:"Quiz erstellen",edit_title:"Quiz bearbeiten",modal_quiz_title:"Quiz Titel",title_placeholder:"z.B. Java Basics",question:"Frage",question_placeholder:"Frage eingeben...",option:"Option",add_option:"Option hinzufgen",add_question:"Frage hinzufgen",save_btn:"Speichern",update_btn:"Aktualisieren",submit_btn:"Einreichen",result_header:"Ergebnis",result_msg:"Gut gemacht! Ergebnis gespeichert."},bie={title:"Mein Profil",details:"Persnliche Daten",security:"Sicherheit",language:"Sprache",firstname:"Vorname",lastname:"Nachname",email:"E-Mail",phone:"Telefon",address_header:"ADRESSE",street:"Strae",zip:"PLZ",city:"Stadt",country:"Land",current_password:"Aktuelles Passwort",new_password:"Neues Passwort",confirm_password:"Passwort besttigen",update_password:"Aktualisieren",save_changes:"Speichern",password_mismatch:"Passwrter stimmen nicht berein!",password_error:"Passwort konnte nicht gendert werden.",choose_strong_password:"Whlen Sie ein starkes Passwort zum Schutz Ihres Kontos.",settings:"Einstellungen",settings_header:"Startseite Anpassen",settings_desc:"Whlen Sie aus, welche Widgets in Ihrer bersicht angezeigt werden sollen.",show_calendar:"Kalender Anzeigen",show_messages:"Nachrichten Anzeigen",show_stats:"Statistiken Anzeigen"},yie={profile_updated:"Profil gespeichert!",password_changed:"Passwort gendert!",login_failed:"Anmeldung fehlgeschlagen.",login_error:"Anmeldefehler.",account_created:"Konto erstellt!",register_error:"Registrierungsfehler.",license_approved:"Lizenz genehmigt!",license_error:"Aktivierung fehlgeschlagen.",upload_success:"Datei hochgeladen!",upload_error:"Upload fehlgeschlagen.",setting_saved:"Gespeichert!",setting_error:"Fehler beim Speichern.",user_deleted:"Benutzer gelscht.",delete_error:"Lschen fehlgeschlagen.",course_deleted:"Kurs gelscht.",course_delete_error:"Lschen fehlgeschlagen.",joined_course:"Beigetreten!",loading:"Laden...",loading_course:"Lade Kurs..."},vie={level_title:"AKTUELLES LEVEL",points_to_next:"Punkte bis zum nchsten Level",my_badges:"Meine Abzeichen",rank_newbie:"Neuling",rank_apprentice:"Lehrling",rank_expert:"Experte",rank_master:"Meister",rank_legend:"Legende"},kie={tab_overview:"bersicht",tab_grading:"Zu Bewerten",tab_applications:"Bewerbungen",tab_courses:"Meine Kurse",tab_students:"Studentenfortschritt",tab_communication:"Kommunikation",section_schedule:"Kommender Zeitplan",section_shortcuts:"Verknpfungen",section_admin:"Verwaltung",ongoing_course:"Laufender Kurs",upcoming_event:"Kommendes Ereignis",no_events:"Keine geplanten Ereignisse.",new_message:"Neue Nachricht",course_start:"Datum des Kursbeginns: {{Name}}"},wie={calendar:"Zum Kalender",students:"Studenten Verwalten",grading:"Aufgaben Bewerten",messages:"Nachrichten",create_course:"Neuen Kurs Erstellen"},jie={recent_messages:{title:"Neueste Nachrichten",view_all:"Alle Anzeigen",empty:"Keine neuen Nachrichten.",from:"Von"},online_friends:{title:"Online-Freunde",x_online:"{{Zahl}} online",empty:"Im Moment sind keine Freunde online.",profile:"Profil von",view_all:"Alle Freunde anzeigen"},live_lessons:{title:"Live-Unterricht",subtitle:"Kommende Video-Meetings",soon:"Bald",host:"Gastgeber",join:"Mitmachen",prepare:"Vorbereiten",view:"Visum",see_all_calendar:"Siehe alle im Kalender",error_load:"Lektionen knnen nicht geladen werden",error_join:"Keine Verbindung zur Lektion mglich"},tickets:{active:"Aktive Untersttzungsflle",critical:"Kritisch",high:"Hohe Prioritt",medium:"Mittlere Prioritt",low:"Niedrige Prioritt",open:"Offene Flle",empty:"Zurzeit sind keine Flle offen."},student_progress:{title:"Meine Kursergebnisse",on_track:"Gut gelegen",at_risk:"Warnung",assignments:"Aufgaben",quizzes:"Quiz",detailed_overview:"Detaillierte bersicht",latest_results:"Neueste Ergebnisse",no_results:"Noch keine Ergebnisse.",catch_up:"Vergewissern Sie sich, dass Sie auf dem Laufenden sind!",go_to_course:"Zum Kurs gehen"},attendance_widget:{title:"Meine digitale Prsenz",activity_level:"Niveau der Aktivitt",registered_time:"Registrierte Zeit",goal_week:"Ziel (Woche)",low_warning:"Bitte beachten Sie. Ihre Anwesenheit ist gering. Bitte kontaktieren Sie Ihren Mentor."},schedule:{title:"Tages- und Wochenplan",loading:"Zeitplan laden...",campus:"Campus",online:"Online",connect:"Verbinden Sie",empty:"Heute kein Unterricht",view_full:"Siehe den vollstndigen Zeitplan",upcoming_submissions:"Kommende Einreichungen",go_to_task:"Weiter zur Aufgabe",no_deadlines:"Keine bevorstehenden Fristen",view_all_count:"Alle anzeigen ({{count}})",room_missing:"Zimmer fehlt"}},Nie={create_title:"Neuen Kurs Erstellen",edit_title:"Kurs Bearbeiten",name:"Kursname",code:"Kurs-Code",category:"Kategorie",description:"Kursbeschreibung",start_date:"Startdatum",end_date:"Enddatum",max_students:"Max Studenten",classroom_section:"Digitales Klassenzimmer",classroom_link:"Meeting-Link",exam_link:"Prfungsraum-Link",create_btn:"Erstellen",go_to_course:"Zum Kurs gehen"},_ie={title:"Systemeinblicke",subtitle:"Tiefgehende Analyse der Plattformleistung und des Wachstums.",financial_overview:"Finanzbersicht",revenue_analytics:"Umsatzanalyse",student_insights:"Schlereinblicke",system_infrastructure:"Systeminfrastruktur",monthly_recurring_revenue:"Monatlich wiederkehrender Umsatz (MRR)",total_users:"Gesamtnutzer",active_sessions:"Aktive Sitzungen",server_health:"Serverzustand",operational:"Betriebsbereit",stable:"Stabil",revenue_growth:"Umsatzwachstum",user_acquisition:"Nutzergewinnung",export_csv:"CSV exportieren",day:"Tag",week:"Woche",month:"Monat",year:"Jahr",vs_last_month:"vs letzten Monat",system_status:"Systemstatus",total_students:"Gesamtschler",at_risk:"Gefhrdet",avg_time_online:"Durchschn. Online-Zeit",student_performance_registry:"Schlerleistungsregister",student_name:"Schlername",status:"Status",courses:"Kurse",completion:"Abschluss",total_time_online:"Gesamte Online-Zeit",risk_factor:"Risikofaktor",no_student_data:"Keine Schlerdaten verfgbar.",grafana_dashboard:"Grafana Dashboard",grafana_description:"Echtzeit-Metriken fr das System (CPU, Speicher, Anfragen).",open_full_grafana:"Vollstndiges Grafana ffnen",prometheus_metrics:"Prometheus Metriken",prometheus_description:"Rohdaten-Metrik-Explorer.",open_prometheus:"Prometheus ffnen",all_systems_normal:"Alle Systeme arbeiten normal.",uptime:"Betriebszeit",revenue_title:"Umsatzanalyse",revenue_subtitle:"Umfassende Einblicke in Umsatz und Zahlungen",loading_revenue_data:"Umsatzdaten werden geladen...",annual_recurring_revenue:"Jhrlich wiederkehrender Umsatz (ARR)",payment_success_rate:"Zahlungserfolgsrate",avg_payment_amount:"Durchschnittlicher Zahlungsbetrag",excellent:"Ausgezeichnet",good:"Gut",revenue_growth_trend:"Umsatzwachstumstrend",payment_methods:"Zahlungsmethoden",no_payment_data:"Keine Zahlungsdaten verfgbar",total_payments:"Gesamtzahlungen",successful:"Erfolgreich",failed:"Fehlgeschlagen"},Sie={title:"Rechnungsverwaltung",create_invoice:"Rechnung erstellen",export_csv:"CSV exportieren",exporting:"Exportiere...",loading:"Rechnungen werden geladen...",all:"Alle",draft:"Entwurf",pending:"Ausstehend",sent:"Gesendet",paid:"Bezahlt",overdue:"berfllig",cancelled:"Storniert",invoice_number:"Rechnungsnummer",customer:"Kunde",amount:"Betrag",issue_date:"Ausstellungsdatum",due_date:"Flligkeitsdatum",status:"Status",actions:"Aktionen",no_invoices_found:"Keine Rechnungen gefunden",total_invoices:"Gesamte Rechnungen",send_reminder_confirm:"Zahlungserinnerung an den Kunden senden?",reminder_sent:"Zahlungserinnerung gesendet!",delete_confirm:"Mchten Sie diese Rechnung wirklich lschen?",refund_confirm:"Mchten Sie diese Zahlung wirklich erstatten? Diese Aktion kann nicht rckgngig gemacht werden.",refund_success:"Erstattung eingeleitet",refund_failed:"Erstattung fehlgeschlagen. Details in der Konsole prfen.",no_payment_details:"Zahlungsdetails fr diese Rechnung nicht gefunden.",view_pdf:"PDF anzeigen",generate_pdf:"PDF generieren"},Aie={title:"Abonnementplne",subtitle:"Preisstufen und Abonnementoptionen verwalten",create_plan:"Plan erstellen",loading:"Abonnementplne werden geladen...",default_badge:"STANDARD",inactive_badge:"INAKTIV",unlimited:"Unbegrenzt",users:"Benutzer",courses:"Kurse",storage:"Speicher",features:"Funktionen",edit:"Bearbeiten",activate:"Aktivieren",deactivate:"Deaktivieren",delete_confirm:"Mchten Sie diesen Plan wirklich lschen?",edit_plan:"Plan bearbeiten",create_new_plan:"Neuen Plan erstellen",plan_name_internal:"Planname (Intern)",display_name:"Anzeigename",description:"Beschreibung",price:"Preis",currency:"Whrung",trial_period_days:"Testzeitraum (Tage)",billing_interval:"Abrechnungsintervall",monthly:"Monatlich",yearly:"Jhrlich",lifetime:"Lebenslang",max_users:"Max Benutzer (-1 = unbegrenzt)",max_courses:"Max Kurse (-1 = unbegrenzt)",max_storage:"Speicher GB (-1 = unbegrenzt)",add_feature:"+ Funktion hinzufgen",enter_feature:"Funktionsname eingeben:",active:"Aktiv",default_plan:"Standardplan",sort_order:"Sortierung",cancel:"Abbrechen",update_plan:"Plan aktualisieren",create_plan_btn:"Plan erstellen"},Eie={administration:"Administration",system_settings:"Systemeinstellungen",skolverket_import:"Skolverket Import",skolverket_data:"Skolverket Daten",users:"Benutzer",courses:"Kurse",roles:"Rollen",revenue:"Umsatz",invoices:"Rechnungen",subscription_plans:"Abonnementplne",payment_settings:"Zahlungseinstellungen",promo_codes:"Aktionscodes",tickets:"Ausgaben"},Cie={title:"Bibliothek",subtitle:"E-Books erkunden und lesen",search_placeholder:"Suche nach Titel oder Autor...",categories:"Kategorien",all_categories:"Alle",read_book:"Das Buch lesen",edit_book:"Buch bearbeiten",delete_book:"Buch entfernen",upload_book:"Neues Buch hochladen",no_books_found:"Es wurden keine Bcher gefunden.",edit_modal_title:"E-Book bearbeiten",upload_modal_title:"Neues E-Book hochladen",title_label:"Titel",author_label:"Autor",category_label:"Kategorie",description_label:"Beschreibung des Programms",save_changes:"nderungen speichern",upload_btn:"Hochladen",language_label:"Sprache",epub_file_label:"EPUB-Datei",cover_image_label:"Titelbild",no_cover:"Keine Abdeckung",select_file_alert:"Bitte whlen Sie eine EPUB-Datei",delete_confirm:"Sind Sie sicher, dass Sie dieses Buch lschen wollen?",delete_success:"Buch entfernt",no_books_desc:"Versuchen Sie, nach etwas anderem zu suchen, oder laden Sie Ihr erstes E-Book in die Bibliothek hoch."},Tie={active_courses:"Aktive Kurse",my_students:"Meine Studenten",to_grade:"Zu korrigieren",applications:"Anwendungen",risk_zone:"Risikozone",at_risk_title:"Schlerinnen und Schler in der Gefahrenzone",students_count:"{{count}} st",no_at_risk:"Zurzeit sind keine Schler gefhrdet. ",completion_prefix:"fertiggestellt",view_all_risk:"Alle gefhrdeten Schler anzeigen"},Oie={all_graded_title:"Alles ist korrigiert!",all_graded_desc:"Gute Arbeit, keine ausstehenden Einreichungen.",pending_submissions_count:"Ausstehende Einreichungen ({{count}})",action_required:"Erfordert eine Aktion",student:"Studenten",assignment:"Aufgabe",course:"Kurs",submitted:"Eingereicht",go_to_grading:"Gehe zu Berichtigung",no_pending_applications:"Zurzeit sind keine Antrge anhngig.",applying_to:"Bewerbung fr einen Kurs",date:"Datum",decision:"Entscheidung",approve:"Autorisieren Sie",reject:"Ablehnen",never:"Niemals",days_ago:"vor {{count}} Tagen",contact:"Kontakt",admitted_msg:"Student akzeptiert!",rejected_msg:"Antrag abgelehnt.",error_msg:"Etwas ist schief gelaufen.",unknown_student:"Unbekannt"},Iie={title:"Kontakt Student",subtitle:"Bericht und Nachverfolgung mit {{Name}}",risk_factor:"Identifizierter Risikofaktor",never_logged_in:"Der Schler hat sich noch nie bei der Plattform angemeldet.",inactive_days:"Der Schler ist seit {{count}} Tagen inaktiv.",no_risk:"Zum jetzigen Zeitpunkt wurde kein kritisches Risiko festgestellt, aber es werden Folgemanahmen empfohlen.",subject_label:"Thema (je nach Risiko)",auto_generated_label:"Automatisch erzeugtes Dokument",auto_generated_desc:"Diese Dokumentation basiert auf den Daten des Systems und wird mit der E-Mail versandt.",teacher_notes_label:"Ihre Kommentare / Aktionsplan",teacher_notes_placeholder:"Schreiben Sie eine persnliche Nachricht, Anweisungen oder spezifische Aktionen, die der Schler tun muss...",report_and_send:"Berichten & Senden",sending:"Ich schicke...",sent_success:"Nachricht gesendet!",send_error:"Die Nachricht konnte nicht gesendet werden.",divider:"Kommentar des Lehrers:",regards:"Mit freundlichen Gren",templates:{follow_up_subject:"Nachbereitung Ihres Studiums",no_login_subject:"Wichtig: Sie haben sich noch nicht angemeldet",no_login_body:"Ich sehe, dass Sie sich noch nicht bei EduFlex angemeldet haben. Um von dem Kurs zu profitieren, ist es wichtig, dass Sie bald damit beginnen.",need_help_login:"Brauchen Sie Hilfe beim Einloggen oder bei der Suche nach dem richtigen Material?",warning_inactivity_subject:"Warnung: Hohe Fehlzeiten und Nichterwerbsttigkeit",warning_inactivity_body:"Ich sehe, dass Sie seit {{count}} Tagen nicht mehr auf EduFlex aktiv sind. Das ist besorgniserregend und wirkt sich negativ auf Ihr Studium aus.",review_plan:"Wir mssen Ihren Studienplan berprfen, um sicherzustellen, dass Sie gengend Zeit haben, um alle Module zu absolvieren.",follow_up_absence_subject:"Follow-up: Abwesenheit",follow_up_absence_body:"Mir ist aufgefallen, dass es {{count}} Tage her ist, dass Sie zuletzt aktiv waren.",reach_out:"Bitte kontaktieren Sie uns, wenn Sie Hilfe bei einem bestimmten Schritt bentigen.",generic_body:"Ich mchte berprfen, wie Sie im Kurs vorankommen."}},Die={tags_placeholder:"Tags (mit Komma getrennt, z. B. AI, Mathe, Algebra)",group_rooms:"Gruppenraum",room_name_placeholder:"Name der Organisation",link:"Link zu",add_room:"+ Gruppenraum hinzufgen",course_color:"Farbe des Kurses",error_create:"Der Kurs konnte nicht erstellt werden.",error_update:"Der Kurs konnte nicht aktualisiert werden.",course_name:"Name des Kurses",course_code:"Kurs-Code"},Mie={nav:{features:"Merkmale und Funktionen",architecture:"Architektur",pricing:"Preise",login:"Einloggen auf der Website",get_started:"Erste Schritte"},hero:{badge:"v2.0 jetzt verfgbar",title_start:"Das LMS als",title_highlight:"Studenten lieben",subtitle:"EduFlex berbrckt die Lcke zwischen Unternehmens-LMS und modernen Verbraucher-Apps. Gamified, schnelles und schnes Lernen fr die nchste Generation.",cta_trial:"Demo buchen",cta_docs:"API-Dokumentation anzeigen"},features:{badge:"Warum EduFlex?",title:"Alles, was Sie fr den Betrieb einer modernen Schule brauchen",subtitle:"Von robusten Bewertungstools bis hin zu revolutionrer KI-Untersttzung - wir haben alles fr Sie.",ai_creator:{title:"AI-Kursersteller",desc:"Laden Sie einen Studienfhrer (PDF) hoch und lassen Sie Gemini AI einen kompletten Kurs mit Lektionen, Terminen und Smart Codes in weniger als 60 Sekunden erstellen. Jetzt mit automatischer Datenbanksynchronisation."},cascading_deletes:{title:"Kaskadenstornierung",desc:"Nahtlose Verwaltung von Kursinhalten. Wenn ein Kurs gelscht wird, werden alle zugehrigen Materialien und Lektionen automatisch bereinigt, um die Datenbank sauber zu halten."},lti_ready:{title:"LTI 1.3 Bereit",desc:"Vollstndig verifizierte Untersttzung fr OIDC-Einfhrungen. Nahtlose Integration mit externen Plattformen wie Canvas und Moodle."},gamification:{title:"Gamifizierung 2.0",desc:"Eingebaute XP, Abzeichen, Levels, Bestenlisten und tgliche Herausforderungen zur Steigerung des Engagements der Schler."},multi_tenancy:{title:"Echte Multi-Tenancy",desc:"Vollstndige Datenisolierung mit Schema-per-Tenant-Architektur. Ihre Daten gehren Ihnen."},analytics:{title:"Analysen & Einblicke",desc:"Echtzeit-Dashboards fr Schulleiter und Lehrer. Heatmaps und Abbrecherprognosen."},security:{title:"Sicherheit im Unternehmen",desc:"Rollenbasierte Zugriffskontrolle (RBAC), Audit-Protokollierung und sichere Keycloak SSO-Integration."}},architecture:{badge:"Gebaut fr Skalierung",title:"Unternehmensarchitektur",powered_by:"Angetrieben von Industriestandards",items:{0:"Spring Boot 3.4 Microservices",1:"PostgreSQL mit Schema-per-Tenant",2:"Redis-Zwischenspeicher",3:"MinIO S3-kompatibler Speicher",4:"Keycloak SSO Identittsmanagement",5:"Kubernetes & Helm-Diagramme"}},pricing:{title:"Einfache, transparente Preisgestaltung",subtitle:"Whlen Sie den Plan, der zu Ihrer Schule passt.",basic:{name:"Grundlegend",price:"990 SEK / Monat",features:{0:"Bis zu 100 Benutzer",1:"Grundlegendes Kursmanagement",2:"Einfache Berichterstattung",3:"Untersttzung der Gemeinschaft"},cta:"Erste Schritte"},pro:{name:"Pro",price:"2 990 SEK / Monat",features:{0:"Bis zu 500 Benutzer",1:"Vollstndige Gamifizierung",2:"Skolverket-Integration",3:"CSN-Ausfuhr",4:"Vorrangige Untersttzung"},cta:"Demo buchen",badge:"Am beliebtesten"},enterprise:{name:"Unternehmen",price:"Kontakt",features:{0:"Unbegrenzte Anzahl von Benutzern",1:"White-Label-Branding",2:"Keycloak SSO",3:"SLA 99,99%",4:"Dedizierte Infrastruktur"},cta:"Kontakt Vertrieb"}},footer:{tagline:"Frderung der Bildung mit moderner Technologie. Gebaut mit  in Schweden.",product:"Produkt",features:"Merkmale und Funktionen",pricing:"Preise",roadmap:"Straenkarte",resources:"Ressourcen",documentation:"Dokumentation",api_reference:"API-Referenz",system_status:"Systemstatus",connect:"Kontakt",contact_sales:"Kontakt Vertrieb",twitter:"Twitter",github:"GitHub",copyright:" 2026 EduFlex. Alle Rechte vorbehalten.",developed_by:"Entwickelt von",fenrir:"Fenrir Studio"}},Lie={title:"Demo buchen",name:"Name der Organisation",name_placeholder:"Ihr Name",email:"E-Mail Adresse",email_placeholder:"din@email.se",organization:"Organisation",organization_placeholder:"Name der Schule",phone:"Rufnummer",phone_placeholder:"+46 70 123 45 67",message:"Benachrichtigung",message_placeholder:"Erzhlen Sie uns ein wenig ber Ihre Bedrfnisse...",submit:"Anfrage senden",sending:"Ich schicke...",success_message:"Herzlichen Dank! Wir werden Sie innerhalb von 24 Stunden kontaktieren.",error_message:"Es ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal oder senden Sie uns direkt eine E-Mail."},Rie={title:"AI Insights & Empfehlungen",risk_low:"Geringes Risiko",risk_medium:"Mittleres Risiko",risk_high:"Hohes Risiko",suggested_activities:"Vorgeschlagene Aktivitten",coaching_advice:"Coaching-Beratung",update_analysis:"Aktualisierung der AI-Analyse",lesson_type:"Lektion",practice_type:"bung",rationale_prefix:"KI-berlegungen:",no_data:"Noch nicht genug Daten fr eine KI-Analyse. Arbeiten Sie weiter an den Kursen!"},Pie={common:tie,sidebar:rie,dashboard:nie,chat:aie,forum:sie,attendance:iie,assessment:oie,evaluation:lie,license:cie,auth:die,admin:uie,catalog:hie,docs:fie,calendar:gie,course:mie,assignments:pie,quiz:xie,profile:bie,messages:yie,gamification:vie,teacher_dashboard:kie,shortcuts:wie,widgets:jie,course_modal:Nie,analytics:_ie,invoices:Sie,subscription_plans:Aie,admin_tabs:Eie,library:Cie,teacher_widgets:Tie,teacher_tables:Oie,student_contact:Iie,teacher_modals:Die,landing:Mie,contact:Lie,ai_personalization:Rie},zie={save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",upload:"Subir",download:"Descargar",search:"Buscar...",filter:"Filtrar",name:"Nombre",action:"Accin",description:"Descripcin",date:"Fecha",size:"Tamao",loading:"Cargando...",close:"Cerrar",back:"Atrs",send:"Enviar",yes:"S",no:"No",unknown:"Desconocido",light_mode:"Ubicacin luminosa",dark_mode:"Modo oscuro",choose:"Elige...",optional:"Opcional",minimize_menu:"Minimizar men",expand_menu:"Ampliar el men",online_friends:"Amigos en lnea",today:"Hoy estamos",tomorrow:"Maana",all:"Todos"},$ie={dashboard:"Panel",admin:"Administracin",my_profile:"Mi Perfil",logout:"Cerrar sesin",documents:"Documentos",catalog:"Catlogo de Cursos",calendar:"Calendario",resource_bank:"Banco de Recursos",library:"Biblioteca",analytics:"Anlisis e informacin",support:"Asistencia y contacto",my_courses:"Mis cursos",ebooks:"Libros electrnicos",system:"Sistema",ai_quiz:"AI Quiz"},Fie={welcome:"Bienvenido, {{name}}!",logged_in_as:"Conectado como",my_courses:"Mis Cursos",files:"Archivos",no_active_courses:"No tienes cursos activos.",evaluations:"Evaluaciones",give_rating:"Calificar",to_grade:"Por calificar",submissions:"Entregas",no_pending_grades:"No hay entregas pendientes!",upcoming_deadlines:"Prximas fechas lmite",no_deadlines:"No hay fechas lmite.",urgent:"Urgente!",go_to:"Ir a",avg_grade:"Nota media",based_on:"Basado en {{count}} cursos completados",live_overview:"Resumen del sistema (En vivo)",realtime_data:"Datos en tiempo real.",users:"Usuarios",courses:"Cursos",archived_files:"Archivos archivados",latest_registered:"ltimos registrados",latest_uploads:"ltimas subidas",archive:"Archivo",no_archive_docs:"No hay documentos.",teacher_panel:"Panel de Profesor",overview_for:"Resumen para {{name}}",my_students:"Mis Estudiantes",active_courses:"Cursos Activos",students_at_risk:"Estudiantes en riesgo",missed_deadlines:"Ha perdido {{count}} fechas lmite",no_risk_students:"Sin retrasos!",all_in_phase:"Todos tus estudiantes estn al da.",grading_todo:"Por hacer: Calificar",grade_now:"Calificar",all_graded:"Todo calificado! Buen trabajo.",hi_student:"Hola, {{name}}! ",student_subtitle:"Aqu estn tus estudios ahora mismo.",not_registered:"No ests inscrito en ningn curso.",comming_assignments:"Prximas Tareas",no_upcoming_assignments:"Nada pendiente.",admin_overview:"Resumen del Sistema",admin_subtitle:"Administracin y Control",total_courses:"Total de Cursos",active_students:"Estudiantes Activos",locked_courses:"Cursos Bloqueados",files_in_system:"Archivos en sistema",course_registry:"Registro de Cursos",search_placeholder:"Buscar cdigo o nombre...",all_statuses:"Todos los estados",open:"Abierto",closed:"Cerrado",no_match:"Sin coincidencias.",showing_x_of_y:"Mostrando {{count}} de {{total}} cursos",manage:"Gestionar",welcome_back:"Bienvenidos de nuevo al programa,",tabs:{overview:"Panorama del programa",communication:"Comunicacin"},widgets:{stats:"Estadsticas",calendar:"Calendario y horario",recent_users:"ltimos usuarios",recent_docs:"Cargado recientemente",messages:"ltimas notificaciones",online_friends:"Amigos en lnea",tickets:"Casos de apoyo",gamification:"Estado de la gamificacin",attendance:"Mi presencia",my_courses:"Mis cursos",tasks:"Tareas y comentarios",daily_challenges:"Los retos de hoy",achievements:"Mis logros",ai_insights:"Inteligencia Artificial",ai_personalization:"Consejos de estudio personalizados",daily_challenges_widget:{title:"Los retos de hoy",subtitle:"Completar para ganar XP",days:"{{cuenta}} das",empty:"An no hay retos disponibles",completed:" Claro",reset_in:"Nuevos retos en {{horas}}h {{minutos}}m"}},total_users:"Usuarios totales",realtime_update_notice:"Los datos se actualizan en tiempo real.",new_messages:"Nuevas notificaciones",go_to_inbox:"Ir a la bandeja de entrada",students:"Estudiantes",teachers:"Profesores",admins:"Admins",mentors:"Mentores",principals:"Rectores",new_course:"Nuevo curso",search_course:"Buscar cursos...",table:{status:"Estado",code:"Cdigo",name:"Nombre de la organizacin",date:"Fecha",action:"Accin",user:"Usuarios",email:"Correo electrnico",role:"Rollo"},course_color:"Color del curso",edit_course:"Editar curso",delete_course:"Eliminar curso",recent_users:"ltimos usuarios",new:"Nuevo",no_new_users:"No se han registrado nuevos usuarios.",recent_uploads:"ltimas cargas",unknown_file:"Archivo desconocido",unknown_size:"Tamao desconocido",unknown_date:"Fecha desconocida",no_files_uploaded:"An no se han cargado archivos.",user_registry:"Registro de usuarios",new_user:"Nuevo usuario",search_user:"Buscar usuarios...",all_roles:"Todas las funciones",active:"Activo",edit_user:"Editar usuario",delete_user:"Eliminar usuarios",feedback:{new:"Nuevos comentarios",course:"Curso: {{nombre}}",praise:"Bien hecho!",details:"Ver detalles"}},Bie={title:"Chat y Soporte",messenger:"Mensajera",contacts:"Contactos",type_placeholder:"Escribir...",image:"Imagen"},Uie={title:"Foro de Clase",threads:"Temas",all_categories:"Todas las categoras",new_thread:"Nuevo Tema",empty_title:"Est vaco aqu.",empty_student:"Inicia una discusin!",empty_teacher:"Espera informacin del profesor.",replies:"respuestas",create_header:'Nueva discusin en "{{category}}"',subject:"Asunto",subject_placeholder:"Tema...",content:"Contenido",content_placeholder:"Tu mensaje...",publish_btn:"Publicar",back_to:"Volver a {{category}}",answers_header:"Respuestas",write_reply:"Escribir respuesta...",create_error:"Error al crear.",reply_error:"Error al responder."},Kie={title:"Informe de Asistencia",presence:"Asistencia:",occasions:"ocasiones",no_records:"Sin registros.",not_reported:"No reportado",present:"Presente",absent:"Ausente",description:"Descripcin",no_description:"Sin descripcin.",note:"Nota",manage_attendance:"Gestionar la presencia",new_event:"Nueva oportunidad",create_event_title:"Crear nuevas oportunidades",event_title:"Ttulo",event_start:"Fecha de inicio",event_end:"Fin",event_type:"Tipo",type_lesson:"leccin",type_workshop:"Taller",type_exam:"Muestra",type_other:"Otros",create_btn:"Cree",save_attendance:"Guardar presencia",saved_success:"Asistencia salvada",save_error:"Errores al guardar",create_error:"No se han podido crear eventos"},Gie={title:"Evaluacin y Resultados",no_assignments:"Sin tareas.",deadline:"Fecha lmite",go_to_task:"Ir a tarea",my_file:"Mi archivo",grade:"Nota",waiting:"Esperando calificacin",submitted_at:"Entregado",not_submitted:"No entregado",submit_now:"Entregar ahora"},qie={title:"Evaluacin del Curso",intro:"Tus respuestas son annimas. Califica del 1 al 10.",your_rating:"Tu calificacin (1 = Malo, 10 = Excelente)",comment_label:"Comentario (Opcional)",comment_placeholder:"Tu opinin...",submit_btn:"Enviar",validation_error:"Por favor califica todas las preguntas.",manage_btn:"Gestionar la evaluacin",saved_success:"Evaluacin salvada!",save_error:"No se ha podido guardar la evaluacin."},Vie={locked_title:"Sistema Bloqueado",locked_desc:"Sin licencia vlida.",key_label:"Clave de Licencia",key_placeholder:"XXXX-XXXX-XXXX-XXXX",activate_btn:"Activar"},Hie={login_header:"Iniciar Sesin",register_header:"Crear cuenta",username:"Usuario",password:"Contrasea",login_button:"Entrar",no_account:"Sin cuenta?",register_link:"Registrarse",has_account:"Ya tienes cuenta?",login_link:"Entrar",firstname:"Nombre",lastname:"Apellidos",ssn:"DNI/NIF",email:"Email",generate:"Generar",choose_or_generate:"Elegir o generar...",profane:"Palabra inapropiada.",taken:"Usuario ocupado.",available:"Disponible!",role:"Rol",student:"Estudiante",admin:"Admin",teacher:"Profesor",contact_address:"Contacto y Direccin",phone:"Telfono",street:"Calle",zip:"Cdigo Postal",city:"Ciudad",country:"Pas",register_user_btn:"Registrar Usuario",create_account_btn:"Crear Mi Cuenta"},Wie={title:"Administracin del Sistema",subtitle:"Gestionar usuarios, cursos y archivos.",tab_users:"Usuarios",tab_courses:"Cursos",tab_docs:"Documentos",tab_settings:"Ajustes",register_new:"Registrar Nuevo Usuario",firstname:"Nombre",lastname:"Apellidos",ssn:"DNI (12 dgitos)",email:"Email",account_role:"Cuenta y Rol",generate:"Generar",password:"Contrasea",create_account:"Crear Cuenta",registered_users:"Usuarios Registrados",course_overview:"Resumen de Cursos",create_course:"Crear Nuevo Curso",search_course:"Buscar...",no_courses:"No se encontraron cursos.",teacher:"Profesor",students:"Estudiantes",settings:"Ajustes",content:"Contenido",global_docs:"Archivo Global",upload_file:"Subir archivo",no_docs:"El archivo est vaco.",module_management:"Gestin de Mdulos",site_name:"Nombre del Sitio",chat_module:"Mdulo de Chat",chat_desc:"Permite chat en tiempo real.",registration:"Registro",registration_desc:"Permite al admin crear cuentas.",version:"Versin",edit_course_settings:"Editar ajustes del curso",course_name:"Nombre del curso",course_code:"Cdigo del curso",color_theme:"Tema de color",register_new_user:"Registrar nuevo usuario",edit_user:"Editar usuario",edit_course:"Editar curso",base_on_skolverket:"Basado en el curso Skolverk",choose_skolverket_course:"Seleccionar curso Skolverk",max_seats:"Nmero mximo de plazas",tags:"Etiquetas",digital_classroom:"Aula digital (opcional)",choose_platform:"Elija su plataforma...",paste_link:"Pegar enlace...",choose_teacher:"Elige a tu profesor..."},Xie={title:"Catlogo de Cursos",subtitle:"Encuentra e inscrbete en nuevos cursos.",search_placeholder:"Buscar...",no_results:"No se encontraron cursos.",teacher:"Profesor",start:"Inicio",not_set:"No definido",join:"Unirse",closed_msg:"Inscripcin cerrada"},Yie={title:"Gestin Documental",upload_title:"Subir archivo",drop_text:"Clic o arrastrar archivo aqu",search_placeholder:"Buscar...",save_btn:"Guardar",saving:"Guardando...",no_results:"No se encontraron documentos."},Zie={title:"Calendario",subtitle:"Sigue tus plazos.",events_in:"Eventos en",no_events:"Nada programado.",days:["Lun","Mar","Mi","Jue","Vie","Sb","Dom"]},Qie={back:"Atrs",material:"Material",assignments:"Tareas",quiz:"Cuestionarios",forum:"Foro",students:"Estudiantes",participants:"Participantes",role:"Rol",status:"Estado",active:"Activo",add_student:"Aadir",select_student:"Seleccionar...",create_quiz:"Crear Cuestionario",start_quiz:"Iniciar Cuestionario",title:"Ttulo",description:"Descripcin",upload:"Subir",type_text:"Texto",type_video:"Vdeo",type_link:"Enlace",type_file:"Archivo",link:"Enlace (URL)",add_material:"Aadir Material",no_material:"Sin material.",open_link:"Abrir enlace",read:"Ledo",mark_read:"Marcar como ledo",scorm:"Mdulos interactivos",kursinformation:"Informacin sobre el curso",attendance:"Presencia",connect_classroom:"Conectar con el aula",evaluate_course:"Evaluar el curso",feedback_thanks:"Gracias por sus comentarios.",error_occurred:"Se ha producido un error:",result_passed:"Autorizado",result_failed:"Fallido",result_pending:"No evaluado",mark_passed:"Autorizar",mark_failed:"Rechazar",certificate:"Certificado",course_completed:"El curso est cerrado",view_certificate:"Certificado de visado",claim_certificate:"Descargar certificado"},Jie={header:"Tareas",new:"Nueva",create_header:"Crear Tarea",cancel:"Cancelar",save:"Guardar",deadline:"Fecha lmite",no_assignments:"Sin tareas.",submissions:"Entregas",no_submissions:"Sin entregas.",file_received:"Archivo recibido",grade_placeholder:"- Nota -",feedback_placeholder:"Comentarios...",submitted:"Entregado!",submitted_desc:"Has entregado esta tarea.",submit_button:"Entregar",select_file_alert:"Selecciona un archivo!"},eoe={header:"Cuestionarios y Exmenes",subtitle:"Pon a prueba tus conocimientos.",questions_count:"Preguntas",knowledge_check:"Comprobacin de conocimientos.",no_quizzes:"Sin cuestionarios.",updated_alert:"Cuestionario actualizado!",created_alert:"Cuestionario creado!",save_error:"Error al guardar.",delete_confirm:"Eliminar?",delete_error:"Error al eliminar.",result_saved:"Resultado guardado",create_title:"Crear Cuestionario",edit_title:"Editar Cuestionario",modal_quiz_title:"Ttulo del Cuestionario",title_placeholder:"Ej. Java Bsico",question:"Pregunta",question_placeholder:"Escribe la pregunta...",option:"Opcin",add_option:"Aadir opcin",add_question:"Aadir pregunta",save_btn:"Guardar",update_btn:"Actualizar",submit_btn:"Entregar",result_header:"Resultado",result_msg:"Buen trabajo! Resultado guardado."},toe={title:"Mi Perfil",details:"Detalles Personales",security:"Seguridad",language:"Idioma",firstname:"Nombre",lastname:"Apellidos",email:"Email",phone:"Telfono",address_header:"DIRECCIN",street:"Calle",zip:"C.P.",city:"Ciudad",country:"Pas",current_password:"Contrasea actual",new_password:"Nueva contrasea",confirm_password:"Confirmar contrasea",update_password:"Actualizar",save_changes:"Guardar",password_mismatch:"Las contraseas no coinciden!",password_error:"No se pudo cambiar la contrasea.",choose_strong_password:"Elige una contrasea segura para proteger tu cuenta.",settings:"Configuracin",settings_header:"Personalizar Inicio",settings_desc:"Elige qu nodos quieres ver en tu resumen.",show_calendar:"Mostrar Calendario",show_messages:"Mostrar Mensajes",show_stats:"Mostrar Estadsticas"},roe={profile_updated:"Perfil guardado!",password_changed:"Contrasea cambiada!",login_failed:"Fallo al iniciar sesin.",login_error:"Error de inicio de sesin.",account_created:"Cuenta creada!",register_error:"Error de registro.",license_approved:"Licencia aprobada!",license_error:"Fallo de activacin.",upload_success:"Archivo subido!",upload_error:"Error de subida.",setting_saved:"Guardado!",setting_error:"Error al guardar.",user_deleted:"Usuario eliminado.",delete_error:"Fallo al eliminar.",course_deleted:"Curso eliminado.",course_delete_error:"Fallo al eliminar.",joined_course:"Unido!",loading:"Cargando...",loading_course:"Cargando curso..."},noe={level_title:"NIVEL ACTUAL",points_to_next:"puntos para el siguiente nivel",my_badges:"Mis Insignias",rank_newbie:"Novato",rank_apprentice:"Aprendiz",rank_expert:"Experto",rank_master:"Maestro",rank_legend:"Leyenda"},aoe={tab_overview:"Resumen",tab_grading:"Por Calificar",tab_applications:"Solicitudes",tab_courses:"Mis Cursos",tab_students:"Progreso Estudiantil",tab_communication:"Comunicacin",section_schedule:"Prximo Horario",section_shortcuts:"Accesos Directos",section_admin:"Administracin",ongoing_course:"Curso en Curso",upcoming_event:"Prximo Evento",no_events:"No hay eventos programados.",new_message:"Nuevo Mensaje",course_start:"Fecha de inicio del curso: {{name}}"},soe={calendar:"Ir al Calendario",students:"Gestionar Estudiantes",grading:"Calificar Tareas",messages:"Mensajes",create_course:"Crear Nuevo Curso"},ioe={recent_messages:{title:"Mensajes Recientes",view_all:"Ver Todo",empty:"No hay mensajes nuevos.",from:"De"},online_friends:{title:"Amigos en lnea",x_online:"{{cuenta}} en lnea",empty:"No hay amigos en lnea en este momento.",profile:"Perfil de",view_all:"Mostrar todos los amigos"},live_lessons:{title:"Clases en directo",subtitle:"Prximas videoconferencias",soon:"Pronto",host:"Anfitrin",join:"nete a nosotros",prepare:"Prepare",view:"Visados",see_all_calendar:"Ver todo en el calendario",error_load:"No se pueden cargar las lecciones",error_join:"No se ha podido conectar a la clase"},tickets:{active:"Casos de asistencia activos",critical:"Crtica",high:"Alta prioridad",medium:"Prioridad media",low:"Prioridad baja",open:"Casos abiertos",empty:"No hay casos abiertos por el momento."},student_progress:{title:"Resultados de mi curso",on_track:"Bien situado",at_risk:"Advertencia",assignments:"Tareas",quizzes:"Cuestionario",detailed_overview:"Resumen detallado",latest_results:"ltimos resultados",no_results:"An no hay resultados.",catch_up:"Pngase al da.",go_to_course:"Ir al curso"},attendance_widget:{title:"Mi presencia digital",activity_level:"Nivel de actividad",registered_time:"Hora de registro",goal_week:"Objetivo (semana)",low_warning:"Tenga en cuenta. Su asistencia es baja. Pngase en contacto con su tutor."},schedule:{title:"Horario del da y de la semana",loading:"Cargando programa...",campus:"Campus",online:"En lnea",connect:"Conectar",empty:"Hoy no hay clases",view_full:"Ver el programa completo",upcoming_submissions:"Prximos envos",go_to_task:"Ir a la tarea",no_deadlines:"No hay plazos prximos",view_all_count:"Mostrar todo ({{count}})",room_missing:"Falta una habitacin"}},ooe={create_title:"Crear Nuevo Curso",edit_title:"Editar Curso",name:"Nombre del Curso",code:"Cdigo del Curso",category:"Categora",description:"Descripcin del Curso",start_date:"Fecha de Inicio",end_date:"Fecha de Finalizacin",max_students:"Max Estudiantes",classroom_section:"Aula Digital",classroom_link:"Enlace de Reunin",exam_link:"Enlace de Sala de Examen",create_btn:"Crear",go_to_course:"Ir al curso"},loe={title:"Perspectivas del Sistema",subtitle:"Anlisis profundo del rendimiento y crecimiento de la plataforma.",financial_overview:"Resumen Financiero",revenue_analytics:"Anlisis de Ingresos",student_insights:"Perspectivas de Estudiantes",system_infrastructure:"Infraestructura del Sistema",monthly_recurring_revenue:"Ingresos Recurrentes Mensuales (MRR)",total_users:"Usuarios Totales",active_sessions:"Sesiones Activas",server_health:"Estado del Servidor",operational:"Operativo",stable:"Estable",revenue_growth:"Crecimiento de Ingresos",user_acquisition:"Adquisicin de Usuarios",export_csv:"Exportar CSV",day:"Da",week:"Semana",month:"Mes",year:"Ao",vs_last_month:"vs mes anterior",system_status:"Estado del Sistema",total_students:"Estudiantes Totales",at_risk:"En Riesgo",avg_time_online:"Tiempo Promedio en Lnea",student_performance_registry:"Registro de Rendimiento Estudiantil",student_name:"Nombre del Estudiante",status:"Estado",courses:"Cursos",completion:"Completado",total_time_online:"Tiempo Total en Lnea",risk_factor:"Factor de Riesgo",no_student_data:"No hay datos de estudiantes disponibles.",grafana_dashboard:"Panel de Grafana",grafana_description:"Mtricas en tiempo real del sistema (CPU, Memoria, Solicitudes).",open_full_grafana:"Abrir Grafana Completo",prometheus_metrics:"Mtricas de Prometheus",prometheus_description:"Explorador de mtricas sin procesar.",open_prometheus:"Abrir Prometheus",all_systems_normal:"Todos los sistemas funcionan con normalidad.",uptime:"Tiempo de Actividad",revenue_title:"Anlisis de Ingresos",revenue_subtitle:"Perspectivas completas de ingresos y pagos",loading_revenue_data:"Cargando datos de ingresos...",annual_recurring_revenue:"Ingresos Recurrentes Anuales (ARR)",payment_success_rate:"Tasa de xito de Pagos",avg_payment_amount:"Monto Promedio de Pago",excellent:"Excelente",good:"Bueno",revenue_growth_trend:"Tendencia de Crecimiento de Ingresos",payment_methods:"Mtodos de Pago",no_payment_data:"No hay datos de pago disponibles",total_payments:"Pagos Totales",successful:"Exitoso",failed:"Fallido"},coe={title:"Gestin de Facturas",create_invoice:"Crear Factura",export_csv:"Exportar CSV",exporting:"Exportando...",loading:"Cargando facturas...",all:"Todas",draft:"Borrador",pending:"Pendiente",sent:"Enviada",paid:"Pagada",overdue:"Vencida",cancelled:"Cancelada",invoice_number:"Nmero de Factura",customer:"Cliente",amount:"Monto",issue_date:"Fecha de Emisin",due_date:"Fecha de Vencimiento",status:"Estado",actions:"Acciones",no_invoices_found:"No se encontraron facturas",total_invoices:"Total de Facturas",send_reminder_confirm:"Enviar recordatorio de pago al cliente?",reminder_sent:"Recordatorio de pago enviado!",delete_confirm:"Est seguro de que desea eliminar esta factura?",refund_confirm:"Est seguro de que desea reembolsar este pago? Esta accin no se puede deshacer.",refund_success:"Reembolso iniciado",refund_failed:"No se pudo reembolsar. Consulte la consola para ms detalles.",no_payment_details:"No se encontraron detalles de pago para esta factura.",view_pdf:"Ver PDF",generate_pdf:"Generar PDF"},doe={title:"Planes de Suscripcin",subtitle:"Gestionar niveles de precios y opciones de suscripcin",create_plan:"Crear Plan",loading:"Cargando planes de suscripcin...",default_badge:"PREDETERMINADO",inactive_badge:"INACTIVO",unlimited:"Ilimitado",users:"Usuarios",courses:"Cursos",storage:"Almacenamiento",features:"Caractersticas",edit:"Editar",activate:"Activar",deactivate:"Desactivar",delete_confirm:"Est seguro de que desea eliminar este plan?",edit_plan:"Editar Plan",create_new_plan:"Crear Nuevo Plan",plan_name_internal:"Nombre del Plan (Interno)",display_name:"Nombre para Mostrar",description:"Descripcin",price:"Precio",currency:"Moneda",trial_period_days:"Perodo de Prueba (Das)",billing_interval:"Intervalo de Facturacin",monthly:"Mensual",yearly:"Anual",lifetime:"De por Vida",max_users:"Mx Usuarios (-1 = ilimitado)",max_courses:"Mx Cursos (-1 = ilimitado)",max_storage:"Almacenamiento GB (-1 = ilimitado)",add_feature:"+ Agregar Caracterstica",enter_feature:"Ingrese nombre de caracterstica:",active:"Activo",default_plan:"Plan Predeterminado",sort_order:"Orden",cancel:"Cancelar",update_plan:"Actualizar Plan",create_plan_btn:"Crear Plan"},uoe={administration:"Administracin",system_settings:"Configuracin del Sistema",skolverket_import:"Importar Skolverket",skolverket_data:"Datos de Skolverket",users:"Usuarios",courses:"Cursos",roles:"Roles",revenue:"Ingresos",invoices:"Facturas",subscription_plans:"Planes de Suscripcin",payment_settings:"Configuracin de Pagos",promo_codes:"Cdigos Promocionales",tickets:"Cuestiones"},hoe={title:"Biblioteca",subtitle:"Explorar y leer libros electrnicos",search_placeholder:"Buscar por ttulo o autor...",categories:"Categoras",all_categories:"Todos",read_book:"Leer el libro",edit_book:"Editar libro",delete_book:"Quitar libro",upload_book:"Cargar nuevo libro",no_books_found:"No se han encontrado libros.",edit_modal_title:"Editar libro electrnico",upload_modal_title:"Cargar nuevo libro electrnico",title_label:"Ttulo",author_label:"Autor",category_label:"Categora",description_label:"Descripcin del programa",save_changes:"Guardar cambios",upload_btn:"Cargar",language_label:"Idioma",epub_file_label:"Archivo EPUB",cover_image_label:"Imagen de portada",no_cover:"Sin cobertura",select_file_alert:"Seleccione un archivo EPUB",delete_confirm:"Seguro que quieres borrar este libro?",delete_success:"Libro retirado",no_books_desc:"Intenta buscar otra cosa o subir tu primer libro electrnico a la biblioteca."},foe={active_courses:"Cursos activos",my_students:"Mis alumnos",to_grade:"Corregir",applications:"Aplicaciones",risk_zone:"Zona de riesgo",at_risk_title:"Alumnos en la zona de peligro",students_count:"{{cuenta}} st",no_at_risk:"No hay estudiantes en riesgo en este momento. ",completion_prefix:"finalizado",view_all_risk:"Mostrar todos los alumnos en riesgo"},goe={all_graded_title:"Todo est corregido!",all_graded_desc:"Buen trabajo, no hay envos pendientes.",pending_submissions_count:"Envos pendientes ({{count}})",action_required:"Requiere accin",student:"estudiante",assignment:"Tarea",course:"Curso",submitted:"Enviado",go_to_grading:"Ir a Correccin",no_pending_applications:"No hay solicitudes pendientes en este momento.",applying_to:"Solicitar un curso",date:"Fecha",decision:"Decisin",approve:"Autorizar",reject:"Rechazar",never:"Nunca",days_ago:"{{count}} das atrs",contact:"Pngase en contacto con nosotros",admitted_msg:"Alumno aceptado!",rejected_msg:"Solicitud rechazada.",error_msg:"Algo sali mal.",unknown_student:"Desconocido"},moe={title:"Estudiante de contacto",subtitle:"Informe y seguimiento de {{name}}",risk_factor:"Factor de riesgo identificado",never_logged_in:"El estudiante nunca se ha conectado a la plataforma.",inactive_days:"El alumno ha estado inactivo durante {{count}} das.",no_risk:"No se ha identificado ningn riesgo crtico en este momento, pero se recomienda un seguimiento.",subject_label:"Asunto (en funcin del riesgo)",auto_generated_label:"Documento generado automticamente",auto_generated_desc:"Esta documentacin se basa en los datos del sistema y se enva por correo electrnico.",teacher_notes_label:"Sus comentarios / Plan de accin",teacher_notes_placeholder:"Escriba un mensaje personalizado, instrucciones o acciones concretas que el alumno deba realizar...",report_and_send:"Informar y enviar",sending:"Enviando...",sent_success:"Mensaje enviado!",send_error:"No se ha podido enviar el mensaje.",divider:"Comentario del profesor:",regards:"Atentamente",templates:{follow_up_subject:"Seguimiento de sus estudios",no_login_subject:"Importante: An no ha iniciado sesin",no_login_body:"Veo que an no ha iniciado sesin en EduFlex. Para sacar provecho del curso, es importante que empiece pronto.",need_help_login:"Necesita ayuda para iniciar sesin o encontrar el material adecuado?",warning_inactivity_subject:"Advertencia: Alto absentismo e inactividad",warning_inactivity_body:"Veo que no has estado activo en EduFlex durante {{count}} das. Esto es preocupante y afecta negativamente a tus estudios.",review_plan:"Tendremos que revisar su plan de estudios para asegurarnos de que dispone de tiempo suficiente para completar todos los mdulos.",follow_up_absence_subject:"Seguimiento: Ausencia",follow_up_absence_body:"Me he dado cuenta de que han pasado {{count}} das desde la ltima vez que estuviste activo.",reach_out:"Pngase en contacto con nosotros si necesita ayuda con algn paso concreto.",generic_body:"Quiero comprobar cmo te va en el curso."}},poe={tags_placeholder:"Etiquetas (separadas por comas, por ejemplo, AI, Maths, Algebra)",group_rooms:"Sala para grupos",room_name_placeholder:"Nombre de la organizacin",link:"Enlace",add_room:"+ Aadir sala de grupo",course_color:"Color del curso",error_create:"No se ha podido crear el curso.",error_update:"No se ha podido actualizar el curso.",course_name:"Nombre del curso",course_code:"Cdigo del curso"},xoe={nav:{features:"Caractersticas y funciones",architecture:"Arquitectura",pricing:"Precios",login:"Acceder al sitio web",get_started:"Para empezar"},hero:{badge:"Ya est disponible la versin 2.0",title_start:"El LMS como",title_highlight:"Los estudiantes aman",subtitle:"EduFlex tiende un puente entre los LMS empresariales y las modernas aplicaciones de consumo. Aprendizaje gamificado, rpido y atractivo para la prxima generacin.",cta_trial:"Reservar una demostracin",cta_docs:"Ver la documentacin de la API"},features:{badge:"Por qu EduFlex?",title:"Todo lo que necesita para dirigir una escuela moderna",subtitle:"Desde slidas herramientas de evaluacin hasta un revolucionario soporte de inteligencia artificial.",ai_creator:{title:"Creador de cursos de AI",desc:"Cargue una gua de estudio (PDF) y deje que Gemini AI cree un curso completo con lecciones, fechas y cdigos inteligentes en menos de 60 segundos. Ahora con sincronizacin automtica de la base de datos."},cascading_deletes:{title:"Cancelacin en cascada",desc:"Gestin transparente del contenido de los cursos. Cuando se elimina un curso, todos los materiales y lecciones asociados se purgan automticamente para mantener limpia la base de datos."},lti_ready:{title:"LTI 1.3 Listo",desc:"Soporte totalmente verificado para lanzamientos OIDC. Perfecta integracin con plataformas externas como Canvas y Moodle."},gamification:{title:"Gamificacin 2.0",desc:"XP incorporado, insignias, niveles, tablas de clasificacin y desafos diarios para aumentar el compromiso de los estudiantes."},multi_tenancy:{title:"Multi-Tenancy real",desc:"Aislamiento total de los datos con arquitectura de esquema por inquilino. Sus datos son suyos."},analytics:{title:"Anlisis e informacin",desc:"Cuadros de mando en tiempo real para directores y profesores. Mapas de calor y prediccin del abandono escolar."},security:{title:"Seguridad de las empresas",desc:"Control de acceso basado en roles (RBAC), registro de auditoras e integracin segura de Keycloak SSO."}},architecture:{badge:"Diseado para escalar",title:"Arquitectura empresarial",powered_by:"Impulsado por las normas del sector",items:{0:"Microservicios de Spring Boot 3.4",1:"PostgreSQL con esquema por arrendatario",2:"Almacenamiento en cach Redis",3:"Almacenamiento compatible con MinIO S3",4:"Keycloak SSO Gestin de identidades",5:"Kubernetes y grficos Helm"}},pricing:{title:"Precios sencillos y transparentes",subtitle:"Elija el plan que mejor se adapte a su centro.",basic:{name:"Bsico",price:"990 SEK / mes",features:{0:"Hasta 100 usuarios",1:"Gestin bsica de cursos",2:"Informes sencillos",3:"Apoyo comunitario"},cta:"Cmo empezar"},pro:{name:"Pro",price:"2 990 SEK / mes",features:{0:"Hasta 500 usuarios",1:"Gamificacin total",2:"Skolverket-Integracin",3:"Exportacin CSN",4:"Apoyo prioritario"},cta:"Reservar una demostracin",badge:"Ms populares"},enterprise:{name:"Empresa",price:"Contacte con nosotros",features:{0:"Nmero ilimitado de usuarios",1:"Marca blanca",2:"Keycloak SSO",3:"SLA 99,99",4:"Infraestructura dedicada"},cta:"Contacto de ventas"}},footer:{tagline:"Potenciar la educacin con tecnologa moderna. Construido con  en Suecia.",product:"Producto",features:"Caractersticas y funciones",pricing:"Precios",roadmap:"Mapa de carreteras",resources:"Recursos",documentation:"Documentacin",api_reference:"Referencia API",system_status:"Estado del sistema",connect:"Pngase en contacto con nosotros",contact_sales:"Contacto de ventas",twitter:"Twitter",github:"GitHub",copyright:"2026 EduFlex. Todos los derechos reservados.",developed_by:"Desarrollado por",fenrir:"Estudio Fenrir"}},boe={title:"Reservar una demostracin",name:"Nombre de la organizacin",name_placeholder:"Su nombre",email:"Correo electrnico",email_placeholder:"din@email.se",organization:"Organizacin",organization_placeholder:"Nombre de la escuela",phone:"Nmero de telfono",phone_placeholder:"+46 70 123 45 67",message:"Notificacin",message_placeholder:"Hblenos un poco de sus necesidades...",submit:"Enviar solicitud",sending:"Enviando...",success_message:"Muchas gracias. Nos pondremos en contacto con usted en un plazo de 24 horas.",error_message:"Algo ha ido mal. Vuelva a intentarlo o envenos un correo electrnico directamente."},yoe={title:"Inteligencia Artificial",risk_low:"Riesgo bajo",risk_medium:"Riesgo medio",risk_high:"Alto riesgo",suggested_activities:"Actividades propuestas",coaching_advice:"Consejos de coaching",update_analysis:"Actualizar el anlisis de la IA",lesson_type:"leccin",practice_type:"Ejercicio",rationale_prefix:"Razonamiento AI:",no_data:"An no hay suficientes datos para el anlisis de IA. Sigue trabajando en los cursos!"},voe={common:zie,sidebar:$ie,dashboard:Fie,chat:Bie,forum:Uie,attendance:Kie,assessment:Gie,evaluation:qie,license:Vie,auth:Hie,admin:Wie,catalog:Xie,docs:Yie,calendar:Zie,course:Qie,assignments:Jie,quiz:eoe,profile:toe,messages:roe,gamification:noe,teacher_dashboard:aoe,shortcuts:soe,widgets:ioe,course_modal:ooe,analytics:loe,invoices:coe,subscription_plans:doe,admin_tabs:uoe,library:hoe,teacher_widgets:foe,teacher_tables:goe,student_contact:moe,teacher_modals:poe,landing:xoe,contact:boe,ai_personalization:yoe},koe={save:"",cancel:"",delete:"",edit:"",upload:"",download:"",search:"...",filter:"",name:"",action:"",description:"",date:"",size:"",loading:" ...",close:"",back:"",send:"",yes:"",no:"",unknown:"",light_mode:"[MISSING] Ljust lge",dark_mode:"[MISSING] Mrkt lge",choose:"[MISSING] Vlj...",optional:"[MISSING] Valfritt",minimize_menu:"[MISSING] Minimera meny",expand_menu:"[MISSING] Expandera meny",online_friends:"[MISSING] Online Vnner",today:"[MISSING] Idag",tomorrow:"[MISSING] Imorgon",all:"[MISSING] Alla"},woe={dashboard:" ",admin:"",my_profile:" ",logout:" ",documents:"",catalog:" ",calendar:"",resource_bank:" ",library:"[MISSING] Bibliotek",analytics:"[MISSING] Analyser & Insikter",support:"[MISSING] Support & Kontakt",my_courses:"[MISSING] Mina kurser",ebooks:"[MISSING] E-bcker",system:"[MISSING] System",ai_quiz:"[MISSING] AI Quiz"},joe={welcome:" {{name}}!",logged_in_as:"  ",my_courses:"",files:"",no_active_courses:"   .",evaluations:"",give_rating:"",to_grade:"",submissions:"",no_pending_grades:"  !",upcoming_deadlines:"  ",no_deadlines:"  .",urgent:"!",go_to:" ",avg_grade:" ",based_on:"  {{count}}  ",live_overview:"    ()",realtime_data:"   .",users:"",courses:"",archived_files:" ",latest_registered:" ",latest_uploads:" ",archive:"",no_archive_docs:"  .",teacher_panel:" ",overview_for:"   {{name}}",my_students:"",active_courses:" ",students_at_risk:"  ",missed_deadlines:" {{count}}  ",no_risk_students:" !",all_in_phase:"    .",grading_todo:": ",grade_now:" ",all_graded:"  !  .",hi_student:" {{name}}! ",student_subtitle:"  .",not_registered:"    .",comming_assignments:" ",no_upcoming_assignments:"  .",admin_overview:"   ",admin_subtitle:" ",total_courses:" ",active_students:" ",locked_courses:" ",files_in_system:"  ",course_registry:" ",search_placeholder:"    ...",all_statuses:" ",open:"",closed:"",no_match:"  .",showing_x_of_y:" {{count}}  {{total}} ",manage:"",welcome_back:"[MISSING] Vlkommen tillbaka,",tabs:{overview:"[MISSING] versikt",communication:"[MISSING] Kommunikation"},widgets:{stats:"[MISSING] Statistik",calendar:"[MISSING] Kalender & Schema",recent_users:"[MISSING] Senaste Anvndare",recent_docs:"[MISSING] Nyligen Uppladdat",messages:"[MISSING] Senaste Meddelanden",online_friends:"[MISSING] Online Vnner",tickets:"[MISSING] Supportrenden",gamification:"[MISSING] Gamification Status",attendance:"[MISSING] Min Nrvaro",my_courses:"[MISSING] Mina Kurser",tasks:"[MISSING] Uppgifter & Feedback",daily_challenges:"[MISSING] Dagens Utmaningar",achievements:"[MISSING] Mina Prestationer",ai_insights:"[MISSING] AI-Insikter",ai_personalization:"[MISSING] Personliga Studietips",daily_challenges_widget:{title:"[MISSING] Dagens Utmaningar",subtitle:"[MISSING] Slutfr fr att tjna XP",days:"[MISSING] {{count}} dagar",empty:"[MISSING] Inga utmaningar tillgngliga n",completed:"[MISSING]  Klar",reset_in:"[MISSING] Nya utmaningar om {{hours}}h {{minutes}}m"}},total_users:"[MISSING] Totalt Anvndare",realtime_update_notice:"[MISSING] Data uppdateras i realtid.",new_messages:"[MISSING] Nya Meddelanden",go_to_inbox:"[MISSING] G till inkorgen",students:"[MISSING] Studenter",teachers:"[MISSING] Lrare",admins:"[MISSING] Admins",mentors:"[MISSING] Mentorer",principals:"[MISSING] Rektorer",new_course:"[MISSING] Ny Kurs",search_course:"[MISSING] Sk kurs...",table:{status:"[MISSING] Status",code:"[MISSING] Kod",name:"[MISSING] Namn",date:"[MISSING] Datum",action:"[MISSING] tgrd",user:"[MISSING] Anvndare",email:"[MISSING] Email",role:"[MISSING] Roll"},course_color:"[MISSING] Kursfrg",edit_course:"[MISSING] Redigera kurs",delete_course:"[MISSING] Ta bort kurs",recent_users:"[MISSING] Senaste anvndare",new:"[MISSING] Ny",no_new_users:"[MISSING] Inga nya anvndare registrerade.",recent_uploads:"[MISSING] Senaste uppladdningar",unknown_file:"[MISSING] Oknd fil",unknown_size:"[MISSING] Oknd storlek",unknown_date:"[MISSING] Oknt datum",no_files_uploaded:"[MISSING] Inga filer uppladdade n.",user_registry:"[MISSING] Anvndarregister",new_user:"[MISSING] Ny Anvndare",search_user:"[MISSING] Sk anvndare...",all_roles:"[MISSING] Alla Roller",active:"[MISSING] Aktiv",edit_user:"[MISSING] Redigera anvndare",delete_user:"[MISSING] Ta bort anvndare",feedback:{new:"[MISSING] Ny Feedback",course:"[MISSING] Kurs: {{name}}",praise:"[MISSING] Bra jobbat!",details:"[MISSING] Visa detaljer"}},Noe={title:" ",messenger:"",contacts:" ",type_placeholder:"...",image:""},_oe={title:" ",threads:"",all_categories:" ",new_thread:" ",empty_title:" .",empty_student:" !",empty_teacher:"   .",replies:"",create_header:'   "{{category}}"',subject:"",subject_placeholder:"...",content:"",content_placeholder:"...",publish_btn:"",back_to:"  {{category}}",answers_header:"",write_reply:" ...",create_error:"  .",reply_error:"  ."},Soe={title:" ",presence:":",occasions:"",no_records:" .",not_reported:"  ",present:"",absent:"",description:"",no_description:"  .",note:"",manage_attendance:"[MISSING] Hantera Nrvaro",new_event:"[MISSING] Nytt Tillflle",create_event_title:"[MISSING] Skapa nytt tillflle",event_title:"[MISSING] Titel",event_start:"[MISSING] Start",event_end:"[MISSING] Slut",event_type:"[MISSING] Typ",type_lesson:"[MISSING] Lektion",type_workshop:"[MISSING] Workshop",type_exam:"[MISSING] Prov",type_other:"[MISSING] Annat",create_btn:"[MISSING] Skapa",save_attendance:"[MISSING] Spara Nrvaro",saved_success:"[MISSING] Nrvaro sparad!",save_error:"[MISSING] Fel vid sparande",create_error:"[MISSING] Kunde inte skapa event"},Aoe={title:" ",no_assignments:" .",deadline:" ",go_to_task:" ",my_file:"",grade:"",waiting:" ",submitted_at:" ",not_submitted:"  ",submit_now:" "},Eoe={title:" ",intro:" .   1  10.",your_rating:" (1 =  10 = )",comment_label:" ()",comment_placeholder:"...",submit_btn:"",validation_error:"   .",manage_btn:"[MISSING] Hantera Utvrdering",saved_success:"[MISSING] Utvrdering sparad!",save_error:"[MISSING] Kunde inte spara utvrderingen."},Coe={locked_title:" ",locked_desc:"   .",key_label:" ",key_placeholder:"XXXX-XXXX-XXXX-XXXX",activate_btn:""},Toe={login_header:" ",register_header:" ",username:" ",password:" ",login_button:"",no_account:"  ",register_link:"",has_account:" ",login_link:"",firstname:" ",lastname:" ",ssn:" ",email:" ",generate:"",choose_or_generate:"  ...",profane:"  .",taken:" .",available:"!",role:"",student:"",admin:"",teacher:"",contact_address:" ",phone:"",street:"",zip:" ",city:"",country:"",register_user_btn:" ",create_account_btn:" "},Ooe={title:" ",subtitle:"   .",tab_users:"",tab_courses:"",tab_docs:"",tab_settings:"",register_new:"  ",firstname:" ",lastname:" ",ssn:"  (12 )",email:" ",account_role:" ",generate:"",password:" ",create_account:" ",registered_users:" ",course_overview:"   ",create_course:"  ",search_course:"...",no_courses:"    .",teacher:"",students:"",settings:"",content:"",global_docs:" ",upload_file:" ",no_docs:" .",module_management:" ",site_name:" ",chat_module:" ",chat_desc:"    .",registration:"",registration_desc:"   .",version:"",edit_course_settings:"  ",course_name:" ",course_code:" ",color_theme:" ",register_new_user:"[MISSING] Registrera ny anvndare",edit_user:"[MISSING] Redigera anvndare",edit_course:"[MISSING] Redigera kurs",base_on_skolverket:"[MISSING] Baserad p Skolverkskurs",choose_skolverket_course:"[MISSING] Vlj Skolverkskurs",max_seats:"[MISSING] Max platser",tags:"[MISSING] Taggar",digital_classroom:"[MISSING] Digitalt Klassrum (Frivilligt)",choose_platform:"[MISSING] Vlj plattform...",paste_link:"[MISSING] Klistra in lnk...",choose_teacher:"[MISSING] Vlj lrare..."},Ioe={title:" ",subtitle:"    .",search_placeholder:"...",no_results:"    .",teacher:"",start:"",not_set:" ",join:"",closed_msg:" "},Doe={title:" ",upload_title:" ",drop_text:"    ",search_placeholder:"...",save_btn:"",saving:" ...",no_results:"    ."},Moe={title:"",subtitle:"  .",events_in:" ",no_events:"  .",days:["","","","","","",""]},Loe={back:"",material:"",assignments:"",quiz:"",forum:"",students:"",participants:"",role:"",status:"",active:"",add_student:"",select_student:"...",create_quiz:" ",start_quiz:" ",title:"",description:"",upload:"",type_text:"",type_video:"",type_link:"",type_file:"",link:" (URL)",add_material:" ",no_material:"  .",open_link:" ",read:"",mark_read:" ",scorm:"[MISSING] Interaktiva Moduler",kursinformation:"[MISSING] Kursinformation",attendance:"[MISSING] Nrvaro",connect_classroom:"[MISSING] Anslut till Klassrum",evaluate_course:"[MISSING] Utvrdera Kurs",feedback_thanks:"[MISSING] Tack fr din feedback!",error_occurred:"[MISSING] Ett fel uppstod:",result_passed:"[MISSING] Godknd",result_failed:"[MISSING] Underknd",result_pending:"[MISSING] Ej bedmd",mark_passed:"[MISSING] Godknn",mark_failed:"[MISSING] Underknn",certificate:"[MISSING] Certifikat",course_completed:"[MISSING] Kursen avslutad",view_certificate:"[MISSING] Visa Certifikat",claim_certificate:"[MISSING] Hmta Certifikat"},Roe={header:"",new:"",create_header:" ",cancel:"",save:"",deadline:" ",no_assignments:" .",submissions:"",no_submissions:" .",file_received:"  ",grade_placeholder:"-  -",feedback_placeholder:"...",submitted:" !",submitted_desc:"    .",submit_button:"",select_file_alert:" !"},Poe={header:" ",subtitle:" .",questions_count:"",knowledge_check:" .",no_quizzes:"  .",updated_alert:"  !",created_alert:"  !",save_error:"  .",delete_confirm:"",delete_error:" .",result_saved:"  ",create_title:" ",edit_title:" ",modal_quiz_title:" ",title_placeholder:":  ",question:"",question_placeholder:" ...",option:"",add_option:" ",add_question:" ",save_btn:"",update_btn:"",submit_btn:"",result_header:"",result_msg:" !   ."},zoe={title:" ",details:" ",security:"",language:"",firstname:" ",lastname:" ",email:" ",phone:"",address_header:"",street:"",zip:" ",city:"",country:"",current_password:"  ",new_password:"  ",confirm_password:"  ",update_password:"",save_changes:"",password_mismatch:"   !",password_error:"    .",choose_strong_password:"     .",settings:"",settings_header:"  ",settings_desc:"       .",show_calendar:" ",show_messages:" ",show_stats:" "},$oe={profile_updated:"   !",password_changed:"   !",login_failed:"  .",login_error:"   .",account_created:"  !",register_error:"  .",license_approved:"   !",license_error:" .",upload_success:"  !",upload_error:" .",setting_saved:" !",setting_error:"  .",user_deleted:"  .",delete_error:" .",course_deleted:"  .",course_delete_error:" .",joined_course:" !",loading:" ...",loading_course:"  ..."},Foe={level_title:" ",points_to_next:"  ",my_badges:"",rank_newbie:"",rank_apprentice:"",rank_expert:"",rank_master:"",rank_legend:""},Boe={tab_overview:" ",tab_grading:"",tab_applications:"",tab_courses:"",tab_students:" ",tab_communication:"",section_schedule:" ",section_shortcuts:"",section_admin:"",ongoing_course:" ",upcoming_event:" ",no_events:"   .",new_message:" ",course_start:"[MISSING] Kursstart: {{name}}"},Uoe={calendar:"  ",students:" ",grading:" ",messages:"",create_course:"  "},Koe={recent_messages:{title:" ",view_all:" ",empty:"   .",from:""},online_friends:{title:"[MISSING] Online Vnner",x_online:"[MISSING] {{count}} online",empty:"[MISSING] Inga vnner online just nu.",profile:"[MISSING] Profil",view_all:"[MISSING] Visa alla vnner"},live_lessons:{title:"[MISSING] Live-lektioner",subtitle:"[MISSING] Kommande videomten",soon:"[MISSING] Snart",host:"[MISSING] Vrd",join:"[MISSING] G med",prepare:"[MISSING] Frbered",view:"[MISSING] Visa",see_all_calendar:"[MISSING] Se alla i kalendern",error_load:"[MISSING] Kunde inte ladda lektioner",error_join:"[MISSING] Kunde inte ansluta till lektion"},tickets:{active:"[MISSING] Aktiva Supportrenden",critical:"[MISSING] Kritiska",high:"[MISSING] Hg prioritet",medium:"[MISSING] Medium prioritet",low:"[MISSING] Lg prioritet",open:"[MISSING] ppna renden",empty:"[MISSING] Inga ppna renden just nu."},student_progress:{title:"[MISSING] Mina Kursresultat",on_track:"[MISSING] Ligger bra till",at_risk:"[MISSING] Varning",assignments:"[MISSING] Uppgifter",quizzes:"[MISSING] Quiz",detailed_overview:"[MISSING] Detaljerad versikt",latest_results:"[MISSING] Senaste Resultat",no_results:"[MISSING] Inga resultat n.",catch_up:"[MISSING] Se till att komma ikapp!",go_to_course:"[MISSING] G till kursen"},attendance_widget:{title:"[MISSING] Min Digitala Nrvaro",activity_level:"[MISSING] Aktivitetsniv",registered_time:"[MISSING] Registrerad tid",goal_week:"[MISSING] Ml (Vecka)",low_warning:"[MISSING] Obs! Din nrvaro r lg. Kontakta din mentor."},schedule:{title:"[MISSING] Dagens & Veckans Schema",loading:"[MISSING] Laddar schema...",campus:"[MISSING] Campus",online:"[MISSING] Online",connect:"[MISSING] Anslut",empty:"[MISSING] Inga lektioner idag",view_full:"[MISSING] Se hela schemat",upcoming_submissions:"[MISSING] Kommande Inlmningar",go_to_task:"[MISSING] G till uppgift",no_deadlines:"[MISSING] Inga kommande deadlines",view_all_count:"[MISSING] Visa alla ({{count}})",room_missing:"[MISSING] Sal saknas"}},Goe={create_title:"  ",edit_title:" ",name:" ",code:" ",category:"",description:" ",start_date:" ",end_date:" ",max_students:"  ",classroom_section:" ",classroom_link:" ",exam_link:"  ",create_btn:"",go_to_course:"[MISSING] G till kurs"},qoe={title:" ",subtitle:"     .",financial_overview:"  ",revenue_analytics:" ",student_insights:" ",system_infrastructure:"  ",monthly_recurring_revenue:"  ",total_users:" ",active_sessions:" ",server_health:" ",operational:"",stable:"",revenue_growth:" ",user_acquisition:" ",export_csv:" CSV",day:"",week:"",month:"",year:"",vs_last_month:"  ",system_status:" ",total_students:" ",at_risk:" ",avg_time_online:"  ",student_performance_registry:"  ",student_name:" ",status:"",courses:"",completion:"",total_time_online:"  ",risk_factor:" ",no_student_data:"   .",grafana_dashboard:"  Grafana",grafana_description:"    (CPU  ).",open_full_grafana:" Grafana ",prometheus_metrics:" Prometheus",prometheus_description:"  .",open_prometheus:" Prometheus",all_systems_normal:"    .",uptime:" ",revenue_title:" ",revenue_subtitle:"    ",loading_revenue_data:"   ...",annual_recurring_revenue:"  ",payment_success_rate:"  ",avg_payment_amount:"  ",excellent:"",good:"",revenue_growth_trend:"  ",payment_methods:" ",no_payment_data:"   ",total_payments:" ",successful:"",failed:""},Voe={title:" ",create_invoice:" ",export_csv:" CSV",exporting:" ...",loading:"  ...",all:"",draft:"",pending:" ",sent:"",paid:"",overdue:"",cancelled:"",invoice_number:" ",customer:"",amount:"",issue_date:" ",due_date:" ",status:"",actions:"",no_invoices_found:"    ",total_invoices:" ",send_reminder_confirm:"   ",reminder_sent:"   !",delete_confirm:"       ",refund_confirm:"             .",refund_success:"  ",refund_failed:" .     .",no_payment_details:"      .",view_pdf:" PDF",generate_pdf:" PDF"},Hoe={title:" ",subtitle:"    ",create_plan:" ",loading:"   ...",default_badge:"",inactive_badge:" ",unlimited:" ",users:"",courses:"",storage:"",features:"",edit:"",activate:"",deactivate:"",delete_confirm:"       ",edit_plan:" ",create_new_plan:"  ",plan_name_internal:"  ()",display_name:" ",description:"",price:"",currency:"",trial_period_days:"  ()",billing_interval:" ",monthly:"",yearly:"",lifetime:" ",max_users:"   (-1 =  )",max_courses:"   (-1 =  )",max_storage:"  (-1 =  )",add_feature:"+  ",enter_feature:"  :",active:"",default_plan:" ",sort_order:" ",cancel:"",update_plan:" ",create_plan_btn:" "},Woe={administration:"",system_settings:" ",skolverket_import:" Skolverket",skolverket_data:" Skolverket",users:"",courses:"",roles:"",revenue:"",invoices:"",subscription_plans:" ",payment_settings:" ",promo_codes:" ",tickets:"[MISSING] renden"},Xoe={title:"[MISSING] Bibliotek",subtitle:"[MISSING] Utforska och ls e-bcker",search_placeholder:"[MISSING] Sk efter titel eller frfattare...",categories:"[MISSING] Kategorier",all_categories:"[MISSING] Alla",read_book:"[MISSING] Ls bok",edit_book:"[MISSING] Redigera bok",delete_book:"[MISSING] Ta bort bok",upload_book:"[MISSING] Ladda upp ny bok",no_books_found:"[MISSING] Inga bcker hittades.",edit_modal_title:"[MISSING] Redigera E-bok",upload_modal_title:"[MISSING] Ladda upp ny E-bok",title_label:"[MISSING] Titel",author_label:"[MISSING] Frfattare",category_label:"[MISSING] Kategori",description_label:"[MISSING] Beskrivning",save_changes:"[MISSING] Spara ndringar",upload_btn:"[MISSING] Ladda upp",language_label:"[MISSING] Sprk",epub_file_label:"[MISSING] EPUB-fil",cover_image_label:"[MISSING] Omslagsbild",no_cover:"[MISSING] Inget omslag",select_file_alert:"[MISSING] Vnligen vlj en EPUB-fil",delete_confirm:"[MISSING] r du sker p att du vill ta bort denna bok?",delete_success:"[MISSING] Bok borttagen",no_books_desc:"[MISSING] Prova att ska p ngot annat eller ladda upp din frsta e-bok till biblioteket."},Yoe={active_courses:"[MISSING] Aktiva Kurser",my_students:"[MISSING] Mina Studenter",to_grade:"[MISSING] Att Rtta",applications:"[MISSING] Anskningar",risk_zone:"[MISSING] Riskzon",at_risk_title:"[MISSING] Elever i Farozonen",students_count:"[MISSING] {{count}} st",no_at_risk:"[MISSING] Inga elever i riskzonen just nu. ",completion_prefix:"[MISSING] slutfrt",view_all_risk:"[MISSING] Visa alla risk-elever"},Zoe={all_graded_title:"[MISSING] Allt r rttat!",all_graded_desc:"[MISSING] Bra jobbat, inga vntande inlmningar.",pending_submissions_count:"[MISSING] Vntande inlmningar ({{count}})",action_required:"[MISSING] Krver tgrd",student:"[MISSING] Student",assignment:"[MISSING] Uppgift",course:"[MISSING] Kurs",submitted:"[MISSING] Inlmnad",go_to_grading:"[MISSING] G till Rttning",no_pending_applications:"[MISSING] Inga vntande anskningar just nu.",applying_to:"[MISSING] Sker till kurs",date:"[MISSING] Datum",decision:"[MISSING] Beslut",approve:"[MISSING] Godknn",reject:"[MISSING] Avsl",never:"[MISSING] Aldrig",days_ago:"[MISSING] {{count}} dagar sedan",contact:"[MISSING] Kontakta",admitted_msg:"[MISSING] Student antagen!",rejected_msg:"[MISSING] Anskan avslagen.",error_msg:"[MISSING] Ngot gick fel.",unknown_student:"[MISSING] Oknd"},Qoe={title:"[MISSING] Kontakta Student",subtitle:"[MISSING] Rapportera och flj upp med {{name}}",risk_factor:"[MISSING] Identifierad Riskfaktor",never_logged_in:"[MISSING] Studenten har aldrig loggat in p plattformen.",inactive_days:"[MISSING] Studenten har varit inaktiv i {{count}} dagar.",no_risk:"[MISSING] Ingen kritisk risk identifierad fr tillfllet, men uppfljning rekommenderas.",subject_label:"[MISSING] mne (Baserat p risk)",auto_generated_label:"[MISSING] Automatiskt Genererat Underlag",auto_generated_desc:"[MISSING] Detta underlag baseras p systemets data och skickas med i mailet.",teacher_notes_label:"[MISSING] Dina kommentarer / tgrdsplan",teacher_notes_placeholder:"[MISSING] Skriv ett personligt meddelande, instruktioner eller specifika tgrder som studenten behver gra...",report_and_send:"[MISSING] Rapportera & Skicka",sending:"[MISSING] Skickar...",sent_success:"[MISSING] Meddelande skickat!",send_error:"[MISSING] Kunde inte skicka meddelandet.",divider:"[MISSING] Lrarens kommentar:",regards:"[MISSING] Med vnlig hlsning,",templates:{follow_up_subject:"[MISSING] Uppfljning av dina studier",no_login_subject:"[MISSING] Viktigt: Du har inte loggat in nnu",no_login_body:"[MISSING] Jag ser att du nnu inte har loggat in p EduFlex. Fr att kunna tillgodogra dig kursen r det viktigt att du kommer igng snart.",need_help_login:"[MISSING] Behver du hjlp med inloggningen eller att hitta rtt material?",warning_inactivity_subject:"[MISSING] Varning: Hg frnvaro och inaktivitet",warning_inactivity_body:"[MISSING] Jag ser att du inte har varit aktiv p EduFlex p {{count}} dagar. Detta r oroande och pverkar dina studier negativt.",review_plan:"[MISSING] Vi behver se ver din studieplan fr att skerstlla att du hinner med alla moment.",follow_up_absence_subject:"[MISSING] Uppfljning: Frnvaro",follow_up_absence_body:"[MISSING] Jag noterade att det var {{count}} dagar sedan du senast var aktiv.",reach_out:"[MISSING] Hr av dig om du behver hjlp med ngot specifikt moment.",generic_body:"[MISSING] Jag vill stmma av hur det gr fr dig i kursen."}},Joe={tags_placeholder:"[MISSING] Taggar (separera med komma, t.ex. AI, Matematik, Algebra)",group_rooms:"[MISSING] Grupprum",room_name_placeholder:"[MISSING] Namn",link:"[MISSING] Lnk",add_room:"[MISSING] + Lgg till grupprum",course_color:"[MISSING] Kursfrg",error_create:"[MISSING] Kunde inte skapa kursen.",error_update:"[MISSING] Kunde inte uppdatera kursen.",course_name:"[MISSING] Kursnamn",course_code:"[MISSING] Kurskod"},ele={nav:{features:"[MISSING] Funktioner",architecture:"[MISSING] Arkitektur",pricing:"[MISSING] Priser",login:"[MISSING] Logga in",get_started:"[MISSING] Kom igng"},hero:{badge:"[MISSING] v2.0 Nu Tillgnglig",title_start:"[MISSING] LMS:et som ",title_highlight:"[MISSING] Studenter lskar",subtitle:"[MISSING] EduFlex verbryggar klyftan mellan enterprise-LMS och moderna konsumentappar. Gamifierat, snabbt och vackert lrande fr nsta generation.",cta_trial:"[MISSING] Boka Demo",cta_docs:"[MISSING] Visa API-dokumentation"},features:{badge:"[MISSING] Varfr EduFlex?",title:"[MISSING] Allt du behver fr att driva en modern skola",subtitle:"[MISSING] Frn robusta bedmningsverktyg till revolutionerande AI-std - vi har dig tckt.",ai_creator:{title:"[MISSING] AI Course Creator",desc:"[MISSING] Ladda upp en studiehandledning (PDF) och lt Gemini AI skapa en komplett kurs med lektioner, datum och smarta koder p under 60 sekunder. Nu med automatisk databassynkronisering."},cascading_deletes:{title:"[MISSING] Kaskadradering",desc:"[MISSING] Smls hantering av kursinnehll. Nr en kurs raderas stdas allt tillhrande material och lektioner bort automatiskt fr att hlla databasen ren."},lti_ready:{title:"[MISSING] LTI 1.3 Ready",desc:"[MISSING] Fullt verifierat std fr OIDC-lanseringar. Smls integration med externa plattformar som Canvas och Moodle."},gamification:{title:"[MISSING] Gamification 2.0",desc:"[MISSING] Inbyggd XP, utmrkelser, niver, topplistor och dagliga utmaningar fr att ka elevengagemanget."},multi_tenancy:{title:"[MISSING] kta Multi-Tenancy",desc:"[MISSING] Fullstndig dataisolering med schema-per-tenant-arkitektur. Din data r din."},analytics:{title:"[MISSING] Analyser & Insikter",desc:"[MISSING] Realtidsdashboards fr rektorer och lrare. Vrmekartor och avhoppsfrutsgelse."},security:{title:"[MISSING] Enterprise-Skerhet",desc:"[MISSING] Rollbaserad tkomstkontroll (RBAC), granskningsloggning och sker Keycloak SSO-integration."}},architecture:{badge:"[MISSING] Byggd fr Skalning",title:"[MISSING] Enterprise-Arkitektur",powered_by:"[MISSING] Drivs av Branschstandarder",items:{0:"[MISSING] Spring Boot 3.4 Mikrotjnster",1:"[MISSING] PostgreSQL med Schema-per-Tenant",2:"[MISSING] Redis Caching-lager",3:"[MISSING] MinIO S3-Kompatibel Lagring",4:"[MISSING] Keycloak SSO Identitetshantering",5:"[MISSING] Kubernetes & Helm Charts"}},pricing:{title:"[MISSING] Enkel, Transparent Prissttning",subtitle:"[MISSING] Vlj planen som passar din skola.",basic:{name:"[MISSING] Basic",price:"[MISSING] 990 SEK / mnad",features:{0:"[MISSING] Upp till 100 anvndare",1:"[MISSING] Grundlggande Kurshantering",2:"[MISSING] Enkel Rapportering",3:"[MISSING] Community Support"},cta:"[MISSING] Kom igng"},pro:{name:"[MISSING] Pro",price:"[MISSING] 2 990 SEK / mnad",features:{0:"[MISSING] Upp till 500 anvndare",1:"[MISSING] Fullstndig Gamification",2:"[MISSING] Skolverket-Integration",3:"[MISSING] CSN-Export",4:"[MISSING] Prioriterad Support"},cta:"[MISSING] Boka Demo",badge:"[MISSING] Mest Populr"},enterprise:{name:"[MISSING] Enterprise",price:"[MISSING] Kontakta Oss",features:{0:"[MISSING] Obegrnsat Antal Anvndare",1:"[MISSING] White-label Branding",2:"[MISSING] Keycloak SSO",3:"[MISSING] SLA 99.99%",4:"[MISSING] Dedikerad Infrastruktur"},cta:"[MISSING] Kontakta Frsljning"}},footer:{tagline:"[MISSING] Strker utbildning med modern teknik. Byggd med  i Sverige.",product:"[MISSING] Produkt",features:"[MISSING] Funktioner",pricing:"[MISSING] Priser",roadmap:"[MISSING] Roadmap",resources:"[MISSING] Resurser",documentation:"[MISSING] Dokumentation",api_reference:"[MISSING] API-Referens",system_status:"[MISSING] Systemstatus",connect:"[MISSING] Kontakt",contact_sales:"[MISSING] Kontakta Frsljning",twitter:"[MISSING] Twitter",github:"[MISSING] GitHub",copyright:"[MISSING]  2026 EduFlex. Alla rttigheter frbehllna.",developed_by:"[MISSING] Utvecklad av",fenrir:"[MISSING] Fenrir Studio"}},tle={title:"[MISSING] Boka Demo",name:"[MISSING] Namn",name_placeholder:"[MISSING] Ditt namn",email:"[MISSING] E-post",email_placeholder:"[MISSING] din@email.se",organization:"[MISSING] Organisation",organization_placeholder:"[MISSING] Skolans namn",phone:"[MISSING] Telefon",phone_placeholder:"[MISSING] +46 70 123 45 67",message:"[MISSING] Meddelande",message_placeholder:"[MISSING] Bertta lite om era behov...",submit:"[MISSING] Skicka frfrgan",sending:"[MISSING] Skickar...",success_message:"[MISSING] Tack! Vi kontaktar dig inom 24 timmar.",error_message:"[MISSING] Ngot gick fel. Frsk igen eller maila oss direkt."},rle={title:"[MISSING] AI-Insikter & Rekommendationer",risk_low:"[MISSING] Lg risk",risk_medium:"[MISSING] Medelrisk",risk_high:"[MISSING] Hg risk",suggested_activities:"[MISSING] Freslagna aktiviteter",coaching_advice:"[MISSING] Coachande rd",update_analysis:"[MISSING] Uppdatera AI-analys",lesson_type:"[MISSING] Lektion",practice_type:"[MISSING] vning",rationale_prefix:"[MISSING] AI-resonemang:",no_data:"[MISSING] Inte tillrckligt med data fr AI-analys n. Fortstt arbeta i kurserna!"},nle={common:koe,sidebar:woe,dashboard:joe,chat:Noe,forum:_oe,attendance:Soe,assessment:Aoe,evaluation:Eoe,license:Coe,auth:Toe,admin:Ooe,catalog:Ioe,docs:Doe,calendar:Moe,course:Loe,assignments:Roe,quiz:Poe,profile:zoe,messages:$oe,gamification:Foe,teacher_dashboard:Boe,shortcuts:Uoe,widgets:Koe,course_modal:Goe,analytics:qoe,invoices:Voe,subscription_plans:Hoe,admin_tabs:Woe,library:Xoe,teacher_widgets:Yoe,teacher_tables:Zoe,student_contact:Qoe,teacher_modals:Joe,landing:ele,contact:tle,ai_personalization:rle},ale={save:"Lagre",cancel:"Avbryt",delete:"Slett",edit:"Rediger",upload:"Last opp",download:"Last ned",search:"Sk...",filter:"Filtrer",name:"Navn",action:"Handling",description:"Beskrivelse",date:"Dato",size:"Strrelse",loading:"Laster...",close:"Lukk",back:"Tilbake",send:"Send",yes:"Ja",no:"Nei",unknown:"Ukjent",light_mode:"Lyst modus",dark_mode:"Mrkt modus",choose:"Velg...",optional:"Valgfritt",minimize_menu:"Minimer menyen",expand_menu:"Utvid menyen",online_friends:"Venner p nett",today:"I dag er vi",tomorrow:"I morgen",all:"Alle"},sle={dashboard:"Oversikt",admin:"Administrasjon",my_profile:"Min Profil",logout:"Logg ut",documents:"Filer & Dokumenter",catalog:"Kurskatalog",calendar:"Kalender",resource_bank:"Ressursbank",analytics:"Analyser & Innsikt",library:"Bibliotek",support:"Support og kontakt",my_courses:"Mine kurs",ebooks:"E-bker",system:"System",ai_quiz:"AI-quiz"},ile={welcome:"Velkommen tilbake, {{name}}!",logged_in_as:"Du er logget inn som",my_courses:"Mine Kurs",files:"Filer",no_active_courses:"Du har ingen aktive kurs.",evaluations:"Evalueringer",give_rating:"Gi karakter",to_grade:" rette",submissions:"Innleveringer",no_pending_grades:"Ingen innleveringer venter!",upcoming_deadlines:"Neste Frister",no_deadlines:"Ingen kommende frister.",urgent:"Haster!",go_to:"G til",avg_grade:"Gjennomsnittskarakter",based_on:"Basert p {{count}} fullfrte kurs",live_overview:"Systemoversikt (Live)",realtime_data:"Sanntidsdata fra databasen.",users:"Brukere",courses:"Kurs",archived_files:"Arkiverte Filer",latest_registered:"Sist registrerte",latest_uploads:"Siste opplastinger",archive:"Arkiv",no_archive_docs:"Ingen dokumenter i arkivet.",teacher_panel:"Lrerpanel",overview_for:"Oversikt for {{name}}",my_students:"Mine Studenter",active_courses:"Aktive Kurs",students_at_risk:"Studenter i risikosonen (Sene innleveringer)",missed_deadlines:"Har mistet {{count}} frister",no_risk_students:"Ingen sene innleveringer!",all_in_phase:"Alle studentene dine er i rute.",grading_todo:" gjre: Retting",grade_now:"Rett n",all_graded:"Alt er rettet! Godt jobbet.",hi_student:"Hei, {{name}}! ",student_subtitle:"Her er studiene dine akkurat n.",not_registered:"Du er ikke registrert p noen kurs.",comming_assignments:"Kommende Oppgaver",no_upcoming_assignments:"Ingen kommende oppgaver akkurat n.",admin_overview:"Systemoversikt",admin_subtitle:"Administrasjon og Kursstyring",total_courses:"Totalt antall kurs",active_students:"Aktive Studenter",locked_courses:"Lste Kurs",files_in_system:"Filer i systemet",course_registry:"Kursregister",search_placeholder:"Skurskode eller navn...",all_statuses:"Alle Statuser",open:"pen",closed:"Lukket",no_match:"Ingen kurs matchet sket ditt.",showing_x_of_y:"Viser {{count}} av {{total}} kurs",manage:"Administrer",welcome_back:"Velkommen tilbake til programmet,",tabs:{overview:"Oversikt over programmet",communication:"Kommunikasjon"},widgets:{stats:"Statistikk",calendar:"Kalender og rutetabell",recent_users:"Siste brukere",recent_docs:"Nylig opplastet",messages:"Siste varsler",online_friends:"Venner p nett",tickets:"Stttesaker",gamification:"Status for gamification",attendance:"Mitt nrvr",my_courses:"Mine kurs",tasks:"Oppgaver og tilbakemeldinger",daily_challenges:"Dagens utfordringer",achievements:"Mine prestasjoner",ai_insights:"AI-innsikt",ai_personalization:"Personlig tilpassede studietips",daily_challenges_widget:{title:"Dagens utfordringer",subtitle:"Fullfr for  tjene XP",days:"{{antall}} dager",empty:"Ingen utfordringer tilgjengelig enn",completed:" Klar",reset_in:"Nye utfordringer p {{timer}}h {{minutter}}m"}},total_users:"Totalt antall brukere",realtime_update_notice:"Dataene oppdateres i sanntid.",new_messages:"Nye varsler",go_to_inbox:"G til innboksen",students:"Studenter",teachers:"Lrere",admins:"Administratorer",mentors:"Mentorer",principals:"Rektorer",new_course:"Nytt kurs",search_course:"Sk etter kurs...",table:{status:"Status",code:"Kode",name:"Navn p organisasjonen",date:"Dato",action:"Handling",user:"Brukere",email:"E-post",role:"Rull"},course_color:"Kursfarge",edit_course:"Rediger kurs",delete_course:"Fjern kurs",recent_users:"Siste brukere",new:"Ny",no_new_users:"Ingen nye brukere registrert.",recent_uploads:"Siste opplastinger",unknown_file:"Ukjent fil",unknown_size:"Ukjent strrelse",unknown_date:"Ukjent dato",no_files_uploaded:"Ingen filer er lastet opp enn.",user_registry:"Register over brukere",new_user:"Ny bruker",search_user:"Sk etter brukere...",all_roles:"Alle roller",active:"Aktiv",edit_user:"Rediger bruker",delete_user:"Fjern brukere",feedback:{new:"Ny tilbakemelding",course:"Kurs: {{navn}}",praise:"Godt gjort!",details:"Vis detaljer"}},ole={title:"Chat & Support",messenger:"Messenger",contacts:"Kontakter",type_placeholder:"Skriv...",image:"Bilde"},lle={title:"Klasseforum",threads:"Trder",all_categories:"Alle Kategorier",new_thread:"Ny Trd",empty_title:"Her var det tomt.",empty_student:"Start en diskusjon!",empty_teacher:"Vent p informasjon fra lreren.",replies:"svar",create_header:'Start ny diskusjon i "{{category}}"',subject:"Emne",subject_placeholder:"Emne...",content:"Innhold",content_placeholder:"Skriv meldingen din her...",publish_btn:"Publiser Trd",back_to:"Tilbake til {{category}}",answers_header:"Svar",write_reply:"Skriv et svar...",create_error:"Kunne ikke opprette trd.",reply_error:"Kunne ikke svare."},cle={title:"Nrvrsrapport",presence:"Nrvr:",occasions:"tilfeller",no_records:"Ingen obligatoriske hendelser registrert enn.",not_reported:"Ikke rapportert",present:"Tilstede",absent:"Fravrende",description:"Beskrivelse",no_description:"Ingen beskrivelse tilgjengelig.",note:"Notat",manage_attendance:"Administrer Nrvr",new_event:"Ny Hendelse",create_event_title:"Opprett ny hendelse",event_title:"Tittel",event_start:"Start",event_end:"Slutt",event_type:"Type",type_lesson:"Time",type_workshop:"Workshop",type_exam:"Eksamen",type_other:"Annet",create_btn:"Opprett",save_attendance:"Lagre Nrvr",saved_success:"Nrvr lagret!",save_error:"Feil ved lagring",create_error:"Kunne ikke opprette hendelse"},dle={title:"Vurdering & Resultater",no_assignments:"Ingen oppgaver i dette kurset.",deadline:"Frist",go_to_task:"G til oppgave",my_file:"Min fil",grade:"Karakter",waiting:"Venter p retting",submitted_at:"Innlevert",not_submitted:"Ikke innlevert",submit_now:"Lever n"},ule={title:"Kursevaluering",intro:"Dine svar er anonyme og hjelper oss  forbedre utdanningen. Gi karakter 1-10 og skriv gjerne en kommentar.",your_rating:"Din karakter (1 = Drlig, 10 = Utmerket)",comment_label:"Kommentar (Valgfritt)",comment_placeholder:"Skriv din mening her...",submit_btn:"Send inn evaluering",validation_error:"Vennligst gi en karakter p alle sprsml.",manage_btn:"Administrer Evaluering",saved_success:"Evaluering lagret!",save_error:"Kunne ikke lagre evalueringen."},hle={locked_title:"Systemet er Lst",locked_desc:"Ingen gyldig lisens funnet.",key_label:"Lisensnkkel",key_placeholder:"XXXX-XXXX-XXXX-XXXX",activate_btn:"Aktiver System"},fle={login_header:"Logg inn",register_header:"Opprett konto",username:"Brukernavn",password:"Passord",login_button:"Logg inn",no_account:"Ingen konto?",register_link:"Registrer deg",has_account:"Har du allerede en konto?",login_link:"Logg inn",firstname:"Fornavn",lastname:"Etternavn",ssn:"Fdselsnummer (YYYYMMDD-XXXX)",email:"E-post",generate:"Generer forslag",choose_or_generate:"Velg eller generer...",profane:" upassende ord valgt.",taken:"Opptatt brukernavn.",available:"Tilgjengelig!",role:"Rolle",student:"Student",admin:"Administrator",teacher:"Lrer",contact_address:"Kontakt & Adresse",phone:"Telefon",street:"Gateadresse",zip:"Postnr",city:"Sted",country:"Land",register_user_btn:"Registrer Bruker",create_account_btn:"Opprett Min Konto"},gle={title:"Systemadministrasjon",subtitle:"Administrer brukere, kurs og systemarkiv.",tab_users:"Brukere",tab_courses:"Kurs",tab_docs:"Dokumentarkiv",tab_settings:"Innstillinger",register_new:"Registrer ny bruker",firstname:"Fornavn",lastname:"Etternavn",ssn:"Fdselsnummer (12 siffer)",email:"E-post",account_role:"Konto & Rolle",generate:"Generer",password:"Passord",create_account:"Opprett Konto",registered_users:"Registrerte Brukere",course_overview:"Kursoversikt",create_course:"Opprett Nytt Kurs",search_course:"Sk p kursnavn eller kurskode...",no_courses:"Ingen kurs funnet.",teacher:"Lrer",students:"Studenter",settings:"Innstillinger",content:"Innhold",global_docs:"Globalt Dokumentarkiv",upload_file:"Last opp fil",no_docs:"Systemet er tomt for arkiverte filer.",module_management:"Modulhndtering & Systeminfo",site_name:"Sidenavn",chat_module:"Chatmodul",chat_desc:"Tillater elever og lrere  chatte i sanntid.",registration:"Nyregistrering",registration_desc:"Tillater admin  opprette nye brukerkontoer.",version:"Systemversjon",edit_course_settings:"Rediger Kursinnstillinger",course_name:"Kursnavn",course_code:"Kurskode",color_theme:"Fargetema",register_new_user:"Registrer ny bruker",edit_user:"Rediger bruker",edit_course:"Rediger kurs",base_on_skolverket:"Basert p Skolverk-kurset",choose_skolverket_course:"Velg Skolverk-kurs",max_seats:"Maks antall seter",tags:"Tagger",digital_classroom:"Digitalt klasserom (valgfritt)",choose_platform:"Velg din plattform...",paste_link:"Lim inn lenken...",choose_teacher:"Velg din lrer..."},mle={title:"Kurskatalog",subtitle:"Finn og meld deg p nye kurs.",search_placeholder:"Sk kurs...",no_results:"Ingen kurs funnet.",teacher:"Lrer",start:"Start",not_set:"Ikke satt",join:"Bli med i kurs",closed_msg:"Kurset er ikke pent for sknad enn"},ple={title:"Dokumenthndtering",upload_title:"Last opp fil",drop_text:"Klikk eller dra fil hit",search_placeholder:"Sk blant filer...",save_btn:"Lagre fil",saving:"Lagrer...",no_results:"Ingen dokumenter funnet."},xle={title:"Kalender",subtitle:"Hold oversikt over dine frister og kursstarter.",events_in:"Skjer i",no_events:"Ingenting planlagt denne mneden.",days:["Man","Tir","Ons","Tor","Fre","Lr","Sn"]},ble={back:"Tilbake til oversikten",material:"Materiell",assignments:"Oppgaver",quiz:"Quiz & Prver",forum:"Forum",students:"Studenter & Karakterer",create_quiz:"Opprett Ny Quiz",start_quiz:"Start Quiz",no_material:"Inget kursmateriell lastet opp enn.",add_material:"Legg til Materiell",upload:"Last opp",title:"Tittel",description:"Beskrivelse",link:"Lenke (URL)",type_text:"Tekst / Artikkel",type_video:"Video",type_link:"Ekstern Lenke",type_file:"Fil",read:"Lest",mark_read:"Marker som lest",open_link:"pne lenke",participants:"Kursdeltakere",add_student:"Legg til",select_student:"Velg student...",role:"Rolle",status:"Status",active:"Aktiv",attendance:"Nrvr",connect_classroom:"Koble til Klasserom",evaluate_course:"Evaluer Kurs",feedback_thanks:"Takk for din feedback!",error_occurred:"En feil oppstod:",result_passed:"Godkjent",result_failed:"Ikke godkjent",result_pending:"Ikke vurdert",mark_passed:"Godkjenn",mark_failed:"Underkjenn",certificate:"Sertifikat",course_completed:"Kurs fullfrt",scorm:"Interaktive moduler",kursinformation:"Kursinformasjon",view_certificate:"Visumsertifikat",claim_certificate:"Last ned sertifikat"},yle={header:"Innleveringsoppgaver",new:"Ny Oppgave",create_header:"Opprett Oppgave",cancel:"Avbryt",save:"Lagre",deadline:"Frist",no_assignments:"Ingen oppgaver.",submissions:"Innleveringer",no_submissions:"Ingen innleveringer enn.",file_received:"Fil mottatt",grade_placeholder:"- Sett Karakter -",feedback_placeholder:"Feedback...",submitted:"Innlevert!",submitted_desc:"Du har levert denne oppgaven.",submit_button:"Lever oppgave",select_file_alert:"Velg fil!"},vle={header:"Quiz & Diagnostiske Prver",subtitle:"Test dine kunnskaper og f direkte feedback.",questions_count:"Sprsml",knowledge_check:"Test dine kunnskaper innen dette omrdet.",no_quizzes:"Ingen quiz tilgjengelig for dette kurset enn.",updated_alert:"Quiz oppdatert!",created_alert:"Quiz opprettet!",save_error:"Feil ved lagring av quiz.",delete_confirm:"Er du sikker p at du vil slette denne quizen?",delete_error:"Kunne ikke slette quiz.",result_saved:"Resultat lagret",create_title:"Opprett Quiz",edit_title:"Rediger Quiz",modal_quiz_title:"Quiz Tittel",title_placeholder:"F.eks. Kunnskapskontroll Java Basics",question:"Sprsml",question_placeholder:"Skriv sprsmlet her...",option:"Alternativ",add_option:"Legg til alternativ",add_question:"Legg til sprsml",save_btn:"Lagre Quiz",update_btn:"Oppdater Quiz",submit_btn:"Lever Quiz",result_header:"Resultat",result_msg:"Godt jobbet! Ditt resultat er lagret."},kle={title:"Min Profil",details:"Personopplysninger",security:"Sikkerhet",language:"Sprk",firstname:"Fornavn",lastname:"Etternavn",email:"E-post",phone:"Telefon",address_header:"ADRESSEOPPLYSNINGER",street:"Gateadresse",zip:"Postnr",city:"Sted",country:"Land",current_password:"Nvrende Passord",new_password:"Nytt Passord",confirm_password:"Bekreft Nytt Passord",update_password:"Oppdater Passord",save_changes:"Lagre Endringer",password_mismatch:"Passordene stemmer ikke!",password_error:"Kunne ikke endre passord.",choose_strong_password:"Velg et sterkt passord for  beskytte kontoen din.",settings:"Innstillinger",settings_header:"Tilpass Startside",settings_desc:"Velg hvilke noder du vil se p din oversikt.",show_calendar:"Vis Kalender",show_messages:"Vis Meldinger",show_stats:"Vis Statistikk"},wle={profile_updated:"Profil lagret!",password_changed:"Passord endret!",login_failed:"Feil innlogging.",login_error:"Innlogging mislyktes.",account_created:"Konto opprettet!",register_error:"Kunne ikke registrere.",license_approved:"Lisens godkjent!",license_error:"Kunne ikke aktivere.",upload_success:"Fil lastet opp!",upload_error:"Opplasting mislyktes.",setting_saved:"Lagret!",setting_error:"Kunne ikke lagre innstilling.",user_deleted:"Bruker slettet.",delete_error:"Kunne ikke slette bruker.",course_deleted:"Kurs slettet.",course_delete_error:"Kunne ikke slette kurs.",joined_course:"Ble med!",loading:"Laster...",loading_course:"Laster kurs..."},jle={level_title:"NVRENDE NIV",points_to_next:"poeng til neste niv",my_badges:"Mine Utmerkelser",rank_newbie:"Nybegynner",rank_apprentice:"Lrling",rank_expert:"Ekspert",rank_master:"Mester",rank_legend:"Legende"},Nle={tab_overview:"Oversikt",tab_grading:" Rette",tab_applications:"Sknader",tab_courses:"Mine Kurs",tab_students:"Studentoppflging",tab_communication:"Kommunikasjon",section_schedule:"Kommende Skjema",section_shortcuts:"Snarveier",section_admin:"Administrasjon",ongoing_course:"Pgende kurs",upcoming_event:"Kommende hendelse",no_events:"Ingen planlagte hendelser.",new_message:"Ny Melding",course_start:"Dato for kursstart: {{navn}}"},_le={calendar:"G til Kalender",students:"Administrer Studenter",grading:"Rett Oppgaver",messages:"Meldinger",create_course:"Opprett nytt kurs"},Sle={recent_messages:{title:"Siste Meldinger",view_all:"Vis alle",empty:"Ingen nye meldinger.",from:"Fra"},online_friends:{title:"Venner p nett",x_online:"{{antall}} p nett",empty:"Ingen venner p nett for yeblikket.",profile:"Profil av",view_all:"Vis alle venner"},live_lessons:{title:"Live-leksjoner",subtitle:"Kommende videomter",soon:"Snart",host:"Vert",join:"Bli med oss",prepare:"Forberede",view:"Visum",see_all_calendar:"Se alt i kalenderen",error_load:"Kunne ikke laste inn leksjoner",error_join:"Kunne ikke koble til leksjonen"},tickets:{active:"Aktive supportsaker",critical:"Kritisk",high:"Hy prioritet",medium:"Middels prioritet",low:"Lav prioritet",open:"pne saker",empty:"Ingen pne saker for yeblikket."},student_progress:{title:"Mine kursresultater",on_track:"Godt plassert",at_risk:"Advarsel",assignments:"Oppgaver",quizzes:"Quiz",detailed_overview:"Detaljert oversikt",latest_results:"Siste resultater",no_results:"Ingen resultater enn.",catch_up:"Srg for at du tar igjen det tapte!",go_to_course:"G til kurset"},attendance_widget:{title:"Min digitale tilstedevrelse",activity_level:"Aktivitetsniv",registered_time:"Registrert tid",goal_week:"Ml (uke)",low_warning:"Vr oppmerksom p dette. Oppmtet ditt er lavt. Ta kontakt med mentoren din."},schedule:{title:"Tidsplan for dagen og uken",loading:"Laster tidsplan...",campus:"Campus",online:"Online",connect:"Koble til",empty:"Ingen undervisning i dag",view_full:"Se hele timeplanen",upcoming_submissions:"Kommende innsendinger",go_to_task:"G til oppgaven",no_deadlines:"Ingen kommende tidsfrister",view_all_count:"Vis alle ({{antall}})",room_missing:"Rom mangler"}},Ale={create_title:"Opprett nytt kurs",edit_title:"Rediger kurs",name:"Kursnavn",code:"Kurskode",category:"Kategori",description:"Kursbeskrivelse",start_date:"Startdato",end_date:"Sluttdato",max_students:"Maks plasser",classroom_section:"Digitalt Klasserom",classroom_link:"Mtelenke",exam_link:"Lenke til Eksamensrom",create_btn:"Opprett",go_to_course:"G til kurset"},Ele={title:"Systeminnsikt",subtitle:"Dybdeanalyse av plattformens ytelse og vekst.",financial_overview:"konomisk oversikt",revenue_analytics:"Inntektsanalyse",student_insights:"Studentinnsikt",system_infrastructure:"Systeminfrastruktur",monthly_recurring_revenue:"Mnedlig tilbakevendende inntekt (MRR)",total_users:"Totale brukere",active_sessions:"Aktive kter",server_health:"Serverhelse",operational:"Operativ",stable:"Stabil",revenue_growth:"Inntektsvekst",user_acquisition:"Brukeranskaffelse",export_csv:"Eksporter CSV",day:"Dag",week:"Uke",month:"Mned",year:"r",vs_last_month:"vs forrige mned",system_status:"Systemstatus",total_students:"Totale studenter",at_risk:"I risikosonen",avg_time_online:"Gj.sn. tid online",student_performance_registry:"Studentprestasjonsregister",student_name:"Studentnavn",status:"Status",courses:"Kurs",completion:"Fullfring",total_time_online:"Total tid online",risk_factor:"Risikofaktor",no_student_data:"Ingen studentdata tilgjengelig.",grafana_dashboard:"Grafana-dashboard",grafana_description:"Sanntidsmetrikker for systemet (CPU, minne, foresprsler).",open_full_grafana:"pne Fullstendig Grafana",prometheus_metrics:"Prometheus-metrikker",prometheus_description:"Rdatametrikk-utforsker.",open_prometheus:"pne Prometheus",all_systems_normal:"Alle systemer kjrer normalt.",uptime:"Oppetid",revenue_title:"Inntektsanalyse",revenue_subtitle:"Omfattende inntekts- og betalingsinnsikt",loading_revenue_data:"Laster inntektsdata...",annual_recurring_revenue:"rlig tilbakevendende inntekt (ARR)",payment_success_rate:"Betalingssuksessrate",avg_payment_amount:"Gjennomsnittlig betalingsbelp",excellent:"Utmerket",good:"God",revenue_growth_trend:"Inntektsveksttrend",payment_methods:"Betalingsmetoder",no_payment_data:"Ingen betalingsdata tilgjengelig",total_payments:"Totale betalinger",successful:"Vellykket",failed:"Mislykket"},Cle={title:"Fakturastyring",create_invoice:"Opprett faktura",export_csv:"Eksporter CSV",exporting:"Eksporterer...",loading:"Laster fakturaer...",all:"Alle",draft:"Utkast",pending:"Venter",sent:"Sendt",paid:"Betalt",overdue:"Forfalt",cancelled:"Kansellert",invoice_number:"Fakturanummer",customer:"Kunde",amount:"Belp",issue_date:"Utstedelsesdato",due_date:"Forfallsdato",status:"Status",actions:"Handlinger",no_invoices_found:"Ingen fakturaer funnet",total_invoices:"Totale fakturaer",send_reminder_confirm:"Send betalingspminnelse til kunden?",reminder_sent:"Betalingspminnelse sendt!",delete_confirm:"Er du sikker p at du vil slette denne fakturaen?",refund_confirm:"Er du sikker p at du vil refundere denne betalingen? Denne handlingen kan ikke angres.",refund_success:"Refusjon igangsatt",refund_failed:"Kunne ikke refundere. Sjekk konsollen for detaljer.",no_payment_details:"Finner ikke betalingsdetaljer for denne fakturaen.",view_pdf:"Vis PDF",generate_pdf:"Generer PDF"},Tle={title:"Abonnementsplaner",subtitle:"Administrer prisniver og abonnementsalternativer",create_plan:"Opprett plan",loading:"Laster abonnementsplaner...",default_badge:"STANDARD",inactive_badge:"INAKTIV",unlimited:"Ubegrenset",users:"Brukere",courses:"Kurs",storage:"Lagring",features:"Funksjoner",edit:"Rediger",activate:"Aktiver",deactivate:"Deaktiver",delete_confirm:"Er du sikker p at du vil slette denne planen?",edit_plan:"Rediger plan",create_new_plan:"Opprett ny plan",plan_name_internal:"Plannavn (Internt)",display_name:"Visningsnavn",description:"Beskrivelse",price:"Pris",currency:"Valuta",trial_period_days:"Prveperiode (Dager)",billing_interval:"Faktureringsintervall",monthly:"Mnedlig",yearly:"rlig",lifetime:"Livstid",max_users:"Maks brukere (-1 = ubegrenset)",max_courses:"Maks kurs (-1 = ubegrenset)",max_storage:"Lagring GB (-1 = ubegrenset)",add_feature:"+ Legg til funksjon",enter_feature:"Skriv inn funksjonsnavn:",active:"Aktiv",default_plan:"Standardplan",sort_order:"Sortering",cancel:"Avbryt",update_plan:"Oppdater plan",create_plan_btn:"Opprett plan"},Ole={administration:"Administrasjon",system_settings:"Systeminnstillinger",skolverket_import:"Skolverket-import",skolverket_data:"Skolverket-data",users:"Brukere",courses:"Kurs",roles:"Roller",revenue:"Inntekt",invoices:"Fakturaer",subscription_plans:"Abonnementsplaner",payment_settings:"Betalingsinnstillinger",promo_codes:"Kampanjekoder",tickets:"Problemstillinger"},Ile={title:"Bibliotek",subtitle:"Utforsk og les e-bker",search_placeholder:"Sk etter tittel eller forfatter...",categories:"Kategorier",all_categories:"Alle",read_book:"Les boken",edit_book:"Rediger bok",delete_book:"Fjern bok",upload_book:"Last opp ny bok",no_books_found:"Ingen bker ble funnet.",edit_modal_title:"Rediger e-bok",upload_modal_title:"Last opp ny e-bok",title_label:"Tittel",author_label:"Forfatter",category_label:"Kategori",description_label:"Beskrivelse av programmet",save_changes:"Lagre endringer",upload_btn:"Opplasting",language_label:"Sprk",epub_file_label:"EPUB-fil",cover_image_label:"Forsidebilde",no_cover:"Ingen dekning",select_file_alert:"Vennligst velg en EPUB-fil",delete_confirm:"Er du sikker p at du vil slette denne boken?",delete_success:"Bok fjernet",no_books_desc:"Prv  ske etter noe annet, eller last opp din frste e-bok til biblioteket."},Dle={active_courses:"Aktive kurs",my_students:"Mine studenter",to_grade:" korrigere",applications:"Bruksomrder",risk_zone:"Risikosone",at_risk_title:"Elever i faresonen",students_count:"{{count}} st",no_at_risk:"Ingen studenter i faresonen p nvrende tidspunkt. ",completion_prefix:"ferdigstilt",view_all_risk:"Vis alle risikoutsatte elever"},Mle={all_graded_title:"Alt er korrigert!",all_graded_desc:"Bra jobbet, ingen ubehandlede innleveringer.",pending_submissions_count:"Ventende innsendinger ({{antall}})",action_required:"Krever handling",student:"student",assignment:"Oppgave",course:"Kurs",submitted:"Innsendt",go_to_grading:"G til korrigering",no_pending_applications:"Ingen ubehandlede sknader p nvrende tidspunkt.",applying_to:"Ske om et kurs",date:"Dato",decision:"Avgjrelse",approve:"Godkjenne",reject:"Avvis",never:"Aldri",days_ago:"{{antall}} dager siden",contact:"Kontakt oss",admitted_msg:"Student akseptert!",rejected_msg:"Sknad avsltt.",error_msg:"Noe gikk galt.",unknown_student:"Ukjent"},Lle={title:"Kontakt Student",subtitle:"Rapporter og flg opp med {{navn}}",risk_factor:"Identifisert risikofaktor",never_logged_in:"Studenten har aldri logget inn p plattformen.",inactive_days:"Studenten har vrt inaktiv i {{antall}} dager.",no_risk:"Ingen kritisk risiko identifisert p nvrende tidspunkt, men oppflging anbefales.",subject_label:"Emne (basert p risiko)",auto_generated_label:"Automatisk generert dokument",auto_generated_desc:"Denne dokumentasjonen er basert p systemets data og sendes i e-posten.",teacher_notes_label:"Dine kommentarer / Handlingsplan",teacher_notes_placeholder:"Skriv en personlig melding, instruksjoner eller spesifikke handlinger som eleven m gjre...",report_and_send:"Rapporter og send",sending:"Sender...",sent_success:"Melding sendt!",send_error:"Kunne ikke sende meldingen.",divider:"Lrerens kommentar:",regards:"Med vennlig hilsen",templates:{follow_up_subject:"Oppflging av studiene dine",no_login_subject:"Viktig: Du har ikke logget inn enn",no_login_body:"Jeg ser at du enn ikke har logget inn p EduFlex. For  f utbytte av kurset er det viktig at du kommer i gang snart.",need_help_login:"Trenger du hjelp med  logge inn eller finne riktig materiale?",warning_inactivity_subject:"Advarsel: Hyt fravr og inaktivitet",warning_inactivity_body:"Jeg ser at du ikke har vrt aktiv p EduFlex p {{antall}} dager. Dette er bekymringsfullt og pvirker studiene dine negativt.",review_plan:"Vi m g gjennom studieplanen din for  sikre at du har nok tid til  fullfre alle modulene.",follow_up_absence_subject:"Oppflging: Fravr",follow_up_absence_body:"Jeg la merke til at det har gtt {{antall}} dager siden du sist var aktiv.",reach_out:"Ta kontakt med oss hvis du trenger hjelp med et spesifikt trinn.",generic_body:"Jeg vil sjekke hvordan det gr med kurset."}},Rle={tags_placeholder:"Tagger (adskilt med komma, f.eks. AI, Maths, Algebra)",group_rooms:"Grupperom",room_name_placeholder:"Navn p organisasjonen",link:"Lenke til",add_room:"+ Legg til grupperom",course_color:"Kursfarge",error_create:"Kunne ikke opprette kurset.",error_update:"Kunne ikke oppdatere kurset.",course_name:"Navn p kurset",course_code:"Kurskode"},Ple={nav:{features:"Funksjoner og egenskaper",architecture:"Arkitektur",pricing:"Priser",login:"Logg inn p nettstedet",get_started:"Kom godt i gang"},hero:{badge:"v2.0 n tilgjengelig",title_start:"LMS som",title_highlight:"Studentene elsker",subtitle:"EduFlex bygger bro mellom bedriftens LMS og moderne forbrukerapper. Spillbasert, rask og vakker lring for neste generasjon.",cta_trial:"Bestill en demo",cta_docs:"Se API-dokumentasjon"},features:{badge:"Hvorfor EduFlex?",title:"Alt du trenger for  drive en moderne skole",subtitle:"Vi har alt fra robuste vurderingsverkty til revolusjonerende AI-sttte.",ai_creator:{title:"AI Course Creator",desc:"Last opp en studieguide (PDF) og la Gemini AI lage et komplett kurs med leksjoner, datoer og smartkoder p under 60 sekunder. N med automatisk databasesynkronisering."},cascading_deletes:{title:"Kaskadeavbestilling",desc:"Smls administrasjon av kursinnhold. Nr et kurs slettes, blir alt tilknyttet materiale og alle leksjoner automatisk slettet for  holde databasen ren."},lti_ready:{title:"LTI 1.3 klar",desc:"Fullstendig verifisert sttte for OIDC-lanseringer. Smls integrering med eksterne plattformer som Canvas og Moodle."},gamification:{title:"Gamification 2.0",desc:"Innebygd XP, merker, niver, ledertavler og daglige utfordringer for  ke elevenes engasjement."},multi_tenancy:{title:"Ekte multitenancy",desc:"Fullstendig dataisolering med skjema per leietaker-arkitektur. Dine data er dine."},analytics:{title:"Analyser og innsikt",desc:"Dashbord i sanntid for rektorer og lrere. Varmekart og prediksjon av frafall."},security:{title:"Bedriftssikkerhet",desc:"Rollebasert tilgangskontroll (RBAC), revisjonslogging og sikker Keycloak SSO-integrasjon."}},architecture:{badge:"Bygget for skalering",title:"Virksomhetsarkitektur",powered_by:"Drevet av bransjestandarder",items:{0:"Spring Boot 3.4 Mikrotjenester",1:"PostgreSQL med Schema-per-leietaker",2:"Redis caching-lagring",3:"MinIO S3-kompatibel lagring",4:"Keycloak SSO Identity Management",5:"Kubernetes og Helm-diagrammer"}},pricing:{title:"Enkel og gjennomsiktig prising",subtitle:"Velg den planen som passer for din skole.",basic:{name:"Grunnleggende",price:"990 SEK / mned",features:{0:"Opptil 100 brukere",1:"Grunnleggende kursadministrasjon",2:"Enkel rapportering",3:"Sttte fra lokalsamfunnet"},cta:"Kom godt i gang"},pro:{name:"Pro",price:"2 990 SEK / mned",features:{0:"Opptil 500 brukere",1:"Full gamification",2:"Skolverket-Integrasjon",3:"CSN eksport",4:"Prioritert sttte"},cta:"Bestill en demo",badge:"Mest populre"},enterprise:{name:"Enterprise",price:"Kontakt oss",features:{0:"Ubegrenset antall brukere",1:"White label-merkevarebygging",2:"Keycloak SSO",3:"SLA 99,99 PROSENT",4:"Dedikert infrastruktur"},cta:"Kontakt Salg"}},footer:{tagline:"Styrker utdanning med moderne teknologi. Bygget med  i Sverige.",product:"Produkt",features:"Funksjoner og egenskaper",pricing:"Priser",roadmap:"Veikart",resources:"Ressurser",documentation:"Dokumentasjon",api_reference:"API-referanse",system_status:"Systemstatus",connect:"Kontakt oss",contact_sales:"Kontakt Salg",twitter:"Twitter",github:"GitHub",copyright:" 2026 EduFlex. Alle rettigheter forbeholdt.",developed_by:"Utviklet av",fenrir:"Fenrir Studio"}},zle={title:"Bestill en demo",name:"Navn p organisasjonen",name_placeholder:"Ditt navn",email:"E-postadresse",email_placeholder:"din@email.se",organization:"Organisasjon",organization_placeholder:"Navn p skolen",phone:"Telefonnummer",phone_placeholder:"+46 70 123 45 67",message:"Varsling",message_placeholder:"Fortell oss litt om dine behov...",submit:"Send foresprsel",sending:"Sender...",success_message:"Tusen takk skal du ha! Vi vil kontakte deg innen 24 timer.",error_message:"Noe gikk galt. Vennligst prv igjen eller send oss en e-post direkte."},$le={title:"AI-innsikt og anbefalinger",risk_low:"Lav risiko",risk_medium:"Middels risiko",risk_high:"Hy risiko",suggested_activities:"Foresltte aktiviteter",coaching_advice:"Rd om coaching",update_analysis:"Oppdater AI-analyse",lesson_type:"leksjon",practice_type:"Trening",rationale_prefix:"AI-argumentasjon:",no_data:"Ikke nok data for AI-analyse enn. Fortsett  jobbe med kursene!"},Fle={common:ale,sidebar:sle,dashboard:ile,chat:ole,forum:lle,attendance:cle,assessment:dle,evaluation:ule,license:hle,auth:fle,admin:gle,catalog:mle,docs:ple,calendar:xle,course:ble,assignments:yle,quiz:vle,profile:kle,messages:wle,gamification:jle,teacher_dashboard:Nle,shortcuts:_le,widgets:Sle,course_modal:Ale,analytics:Ele,invoices:Cle,subscription_plans:Tle,admin_tabs:Ole,library:Ile,teacher_widgets:Dle,teacher_tables:Mle,student_contact:Lle,teacher_modals:Rle,landing:Ple,contact:zle,ai_personalization:$le},Ble={save:"Gem",cancel:"Annuller",delete:"Slet",edit:"Rediger",upload:"Upload",download:"Download",search:"Sg...",filter:"Filtrer",name:"Navn",action:"Handling",description:"Beskrivelse",date:"Dato",size:"Strrelse",loading:"Indlser...",close:"Luk",back:"Tilbage",send:"Send",yes:"Ja",no:"Nej",unknown:"Ukendt",light_mode:"Lys tilstand",dark_mode:"Mrk tilstand",choose:"Vlg...",optional:"Valgfrit",minimize_menu:"Minimer menuen",expand_menu:"Udvid menuen",online_friends:"Online venner",today:"I dag er vi",tomorrow:"I morgen",all:"Alle"},Ule={dashboard:"Oversigt",admin:"Administration",my_profile:"Min Profil",logout:"Log ud",documents:"Filer & Dokumenter",catalog:"Kursuskatalog",calendar:"Kalender",resource_bank:"Ressourcebank",analytics:"Analyser & Indsigt",library:"Bibliotek",support:"Support og kontakt",my_courses:"Mine kurser",ebooks:"E-bger",system:"System",ai_quiz:"AI-quiz"},Kle={welcome:"Velkommen tilbage, {{name}}!",logged_in_as:"Du er logget ind som",my_courses:"Mine Kurser",files:"Filer",no_active_courses:"Du har ingen aktive kurser.",evaluations:"Evalueringer",give_rating:"Giv karakter",to_grade:"At Rette",submissions:"Afleveringer",no_pending_grades:"Ingen afleveringer venter!",upcoming_deadlines:"Nste Deadlines",no_deadlines:"Ingen kommende frister.",urgent:"Haster!",go_to:"G til",avg_grade:"Gennemsnitskarakter",based_on:"Baseret p {{count}} afsluttede kurser",live_overview:"Systemoversigt (Live)",realtime_data:"Realtidsdata fra databasen.",users:"Brugere",courses:"Kurser",archived_files:"Arkiverede Filer",latest_registered:"Senest registrerede",latest_uploads:"Seneste uploads",archive:"Arkiv",no_archive_docs:"Ingen dokumenter i arkivet.",teacher_panel:"Lrerpanel",overview_for:"Oversigt for {{name}}",my_students:"Mine Studerende",active_courses:"Aktive Kurser",students_at_risk:"Studerende i risikozonen (Sene afleveringer)",missed_deadlines:"Har misset {{count}} deadlines",no_risk_students:"Ingen sene afleveringer!",all_in_phase:"Alle dine studerende er med.",grading_todo:"At gre: Retning",grade_now:"Ret nu",all_graded:"Alt er rettet! Godt get.",hi_student:"Hej, {{name}}! ",student_subtitle:"Her er dine studier lige nu.",not_registered:"Du er ikke tilmeldt nogen kurser.",comming_assignments:"Kommende Opgaver",no_upcoming_assignments:"Ingen kommende opgaver lige nu.",admin_overview:"Systemoversigt",admin_subtitle:"Administration og Kursusstyring",total_courses:"Totalt antal kurser",active_students:"Aktive Studerende",locked_courses:"Lste Kurser",files_in_system:"Filer i systemet",course_registry:"Kursusregister",search_placeholder:"Sg kursuskode eller navn...",all_statuses:"Alle Statusser",open:"ben",closed:"Lukket",no_match:"Ingen kurser matchede din sgning.",showing_x_of_y:"Viser {{count}} af {{total}} kurser",manage:"Administrer",welcome_back:"Velkommen tilbage til programmet,",tabs:{overview:"Oversigt over programmet",communication:"Kommunikation"},widgets:{stats:"Statistik",calendar:"Kalender og tidsplan",recent_users:"Seneste brugere",recent_docs:"Nyligt uploadet",messages:"Seneste meddelelser",online_friends:"Online venner",tickets:"Stttesager",gamification:"Status for gamification",attendance:"Min tilstedevrelse",my_courses:"Mine kurser",tasks:"Opgaver og feedback",daily_challenges:"Dagens udfordringer",achievements:"Mine prstationer",ai_insights:"Indsigt i AI",ai_personalization:"Personlige studietips",daily_challenges_widget:{title:"Dagens udfordringer",subtitle:"Gennemfr for at optjene XP",days:"{{antal}} dage",empty:"Ingen udfordringer tilgngelige endnu",completed:" Klar",reset_in:"Nye udfordringer p {{timer}}h {{minutter}}m"}},total_users:"Brugere i alt",realtime_update_notice:"Data opdateres i realtid.",new_messages:"Nye notifikationer",go_to_inbox:"G til indbakken",students:"Studerende",teachers:"Lrere",admins:"Administratorer",mentors:"Mentorer",principals:"Rektorer",new_course:"Nyt kursus",search_course:"[MISSING] Sk kurs...",table:{status:"[MISSING] Status",code:"[MISSING] Kod",name:"Organisationens navn",date:"Dato",action:"Handling",user:"Brugere",email:"E-mail",role:"Rulle"},course_color:"Kursets farve",edit_course:"Rediger kursus",delete_course:"Fjern kursus",recent_users:"Seneste brugere",new:"Ny",no_new_users:"Ingen nye brugere registreret.",recent_uploads:"Seneste uploads",unknown_file:"Ukendt fil",unknown_size:"Ukendt strrelse",unknown_date:"Ukendt dato",no_files_uploaded:"Ingen filer er uploadet endnu.",user_registry:"Register over brugere",new_user:"Ny bruger",search_user:"Sg efter brugere...",all_roles:"Alle roller",active:"Aktiv",edit_user:"Rediger bruger",delete_user:"Fjern brugere",feedback:{new:"Ny feedback",course:"Kursus: {{name}}",praise:"Godt get!",details:"Se detaljer"}},Gle={title:"Chat & Support",messenger:"Messenger",contacts:"Kontakter",type_placeholder:"Skriv...",image:"Billede"},qle={title:"Klasseforum",threads:"Trde",all_categories:"Alle Kategorier",new_thread:"Ny Trd",empty_title:"Her var det tomt.",empty_student:"Start en diskussion!",empty_teacher:"Afvent information fra lreren.",replies:"svar",create_header:'Start ny diskussion i "{{category}}"',subject:"Emne",subject_placeholder:"Emne...",content:"Indhold",content_placeholder:"Skriv din besked her...",publish_btn:"Udgiv Trd",back_to:"Tilbage til {{category}}",answers_header:"Svar",write_reply:"Skriv et svar...",create_error:"Kunne ikke oprette trd.",reply_error:"Kunne ikke svare."},Vle={title:"Fremmderapport",presence:"Fremmde:",occasions:"tilflde",no_records:"Ingen obligatoriske begivenheder registreret endnu.",not_reported:"Ikke rapporteret",present:"Til stede",absent:"Fravrende",description:"Beskrivelse",no_description:"Ingen beskrivelse tilgngelig.",note:"Note",manage_attendance:"Administrer Fremmde",new_event:"Ny Begivenhed",create_event_title:"Opret ny begivenhed",event_title:"Titel",event_start:"Start",event_end:"Slut",event_type:"Type",type_lesson:"Time",type_workshop:"Workshop",type_exam:"Eksamen",type_other:"Andet",create_btn:"Opret",save_attendance:"Gem Fremmde",saved_success:"Fremmde gemt!",save_error:"Fejl ved lagring",create_error:"Kunne ikke oprette begivenhed"},Hle={title:"Vurdering & Resultater",no_assignments:"Ingen opgaver i dette kursus.",deadline:"Deadline",go_to_task:"G til opgave",my_file:"Min fil",grade:"Karakter",waiting:"Venter p retning",submitted_at:"Afleveret",not_submitted:"Ikke afleveret",submit_now:"Aflever nu"},Wle={title:"Kursusevaluering",intro:"Dine svar er anonyme og hjlper os med at forbedre uddannelsen. Giv karakter 1-10 og skriv gerne en kommentar.",your_rating:"Din karakter (1 = Drlig, 10 = Fremragende)",comment_label:"Kommentar (Valgfrit)",comment_placeholder:"Skriv din mening her...",submit_btn:"Indsend evaluering",validation_error:"Venligst giv en karakter p alle sprgsml.",manage_btn:"Administrer Evaluering",saved_success:"Evaluering gemt!",save_error:"Kunne ikke gemme evalueringen."},Xle={locked_title:"Systemet er Lst",locked_desc:"Ingen gyldig licens fundet.",key_label:"Licensngle",key_placeholder:"XXXX-XXXX-XXXX-XXXX",activate_btn:"Aktiver System"},Yle={login_header:"Log ind",register_header:"Opret konto",username:"Brugernavn",password:"Password",login_button:"Log ind",no_account:"Ingen konto?",register_link:"Registrer dig",has_account:"Har du allerede en konto?",login_link:"Log ind",firstname:"Fornavn",lastname:"Efternavn",ssn:"CPR-nummer (YYYYMMDD-XXXX)",email:"E-mail",generate:"Generer forslag",choose_or_generate:"Vlg eller generer...",profane:" upassende ord valgt.",taken:"Optaget brugernavn.",available:"Tilgngeligt!",role:"Rolle",student:"Studerende",admin:"Administrator",teacher:"Lrer",contact_address:"Kontakt & Adresse",phone:"Telefon",street:"Gadeadresse",zip:"Postnr",city:"By",country:"Land",register_user_btn:"Registrer Bruger",create_account_btn:"Opret Min Konto"},Zle={title:"Systemadministration",subtitle:"Administrer brugere, kurser og systemarkiv.",tab_users:"Brugere",tab_courses:"Kurser",tab_docs:"Dokumentarkiv",tab_settings:"Indstillinger",register_new:"Registrer ny bruger",firstname:"Fornavn",lastname:"Efternavn",ssn:"CPR-nummer (12 cifre)",email:"E-mail",account_role:"Konto & Rolle",generate:"Generer",password:"Password",create_account:"Opret Konto",registered_users:"Registrerede Brugere",course_overview:"Kursusoversigt",create_course:"Opret Ny Kursus",search_course:"Sg p kursusnavn eller kode...",no_courses:"Ingen kurser fundet.",teacher:"Lrer",students:"Studerende",settings:"Indstillinger",content:"Indhold",global_docs:"Globalt Dokumentarkiv",upload_file:"Upload fil",no_docs:"Systemet er tomt for arkiverede filer.",module_management:"Modulhndtering & Systeminfo",site_name:"Sidenavn",chat_module:"Chatmodul",chat_desc:"Tillader elever og lrere at chatte i realtid.",registration:"Nyregistrering",registration_desc:"Tillader admin at oprette nye brugerkonti.",version:"Systemversion",edit_course_settings:"Rediger Kursusindstillinger",course_name:"Kursusnavn",course_code:"Kursuskode",color_theme:"Farvetema",register_new_user:"Registrer ny bruger",edit_user:"Rediger bruger",edit_course:"Rediger kursus",base_on_skolverket:"Baseret p Skolverk-kursus",choose_skolverket_course:"Vlg Skolverk-kursus",max_seats:"Maks. antal sder",tags:"Tags",digital_classroom:"Digitalt klassevrelse (valgfrit)",choose_platform:"Vlg din platform...",paste_link:"Indst link...",choose_teacher:"Vlg din lrer..."},Qle={title:"Kursuskatalog",subtitle:"Find og tilmeld dig nye kurser.",search_placeholder:"Sg kurser...",no_results:"Ingen kurser fundet.",teacher:"Lrer",start:"Start",not_set:"Ikke sat",join:"Deltag i kursus",closed_msg:"Kurset er ikke bent for tilmelding endnu"},Jle={title:"Dokumenthndtering",upload_title:"Upload fil",drop_text:"Klik eller trk fil hertil",search_placeholder:"Sg blandt filer...",save_btn:"Gem fil",saving:"Gemmer...",no_results:"Ingen dokumenter fundet."},ece={title:"Kalender",subtitle:"Hold je med dine deadlines og kursusstarter.",events_in:"Sker i",no_events:"Intet planlagt denne mned.",days:["Man","Tir","Ons","Tor","Fre","Lr","Sn"]},tce={back:"Tilbage til oversigten",material:"Materiale",assignments:"Opgaver",quiz:"Quiz & Prver",forum:"Forum",students:"Studerende & Karakterer",create_quiz:"Opret Ny Quiz",start_quiz:"Start Quiz",no_material:"Intet kursusmateriale uploadet endnu.",add_material:"Tilfj Materiale",upload:"Upload",title:"Titel",description:"Beskrivelse",link:"Link (URL)",type_text:"Tekst / Artikel",type_video:"Video",type_link:"Eksternt Link",type_file:"Fil",read:"Lst",mark_read:"Marker som lst",open_link:"bn link",participants:"Kursusdeltagere",add_student:"Tilfj",select_student:"Vlg studerende...",role:"Rolle",status:"Status",active:"Aktiv",attendance:"Fremmde",connect_classroom:"Forbind til Klassevrelse",evaluate_course:"Evaluer Kursus",feedback_thanks:"Tak for din feedback!",error_occurred:"Der opstod en fejl:",result_passed:"Bestet",result_failed:"Ikke bestet",result_pending:"Ikke bedmt",mark_passed:"Godkend",mark_failed:"Afvis",certificate:"Certifikat",course_completed:"Kursus afsluttet",scorm:"Interaktive moduler",kursinformation:"Information om kurset",view_certificate:"Visum-certifikat",claim_certificate:"Download certifikat"},rce={header:"Afleveringsopgaver",new:"Ny Opgave",create_header:"Opret Opgave",cancel:"Annuller",save:"Gem",deadline:"Deadline",no_assignments:"Ingen opgaver.",submissions:"Afleveringer",no_submissions:"Ingen afleveringer endnu.",file_received:"Fil modtaget",grade_placeholder:"- St Karakter -",feedback_placeholder:"Feedback...",submitted:"Afleveret!",submitted_desc:"Du har afleveret denne opgave.",submit_button:"Aflever opgave",select_file_alert:"Vlg fil!"},nce={header:"Quiz & Diagnostiske Prver",subtitle:"Test dine kundskaber og f direkte feedback.",questions_count:"Sprgsml",knowledge_check:"Test dine kundskaber inden for dette omrde.",no_quizzes:"Ingen quiz tilgngelig for dette kursus endnu.",updated_alert:"Quiz opdateret!",created_alert:"Quiz oprettet!",save_error:"Fejl ved lagring af quiz.",delete_confirm:"Er du sikker p, at du vil slette denne quiz?",delete_error:"Kunne ikke slette quiz.",result_saved:"Resultat gemt",create_title:"Opret Quiz",edit_title:"Rediger Quiz",modal_quiz_title:"Quiz Titel",title_placeholder:"F.eks. Videnscheck Java Basics",question:"Sprgsml",question_placeholder:"Skriv sprgsmlet her...",option:"Mulighed",add_option:"Tilfj mulighed",add_question:"Tilfj sprgsml",save_btn:"Gem Quiz",update_btn:"Opdater Quiz",submit_btn:"Aflever Quiz",result_header:"Resultat",result_msg:"Godt get! Dit resultat er gemt."},ace={title:"Min Profil",details:"Personlige oplysninger",security:"Sikkerhed",language:"Sprog",firstname:"Fornavn",lastname:"Efternavn",email:"E-mail",phone:"Telefon",address_header:"ADRESSEOPLYSNINGER",street:"Gadeadresse",zip:"Postnr",city:"By",country:"Land",current_password:"Nuvrende Password",new_password:"Nyt Password",confirm_password:"Bekrft Nyt Password",update_password:"Opdater Password",save_changes:"Gem ndringer",password_mismatch:"Passwords stemmer ikke overens!",password_error:"Kunne ikke ndre password.",choose_strong_password:"Vlg et strkt password for at beskytte din konto.",settings:"Indstillinger",settings_header:"Tilpas Startside",settings_desc:"Vlg hvilke widgets du vil se p din oversigt.",show_calendar:"Vis Kalender",show_messages:"Vis Beskeder",show_stats:"Vis Statistik"},sce={profile_updated:"Profil gemt!",password_changed:"Password ndret!",login_failed:"Forkert login.",login_error:"Login mislykkedes.",account_created:"Konto oprettet!",register_error:"Kunne ikke registrere.",license_approved:"Licens godkendt!",license_error:"Kunne ikke aktivere.",upload_success:"Fil uploadet!",upload_error:"Upload mislykkedes.",setting_saved:"Gemt!",setting_error:"Kunne ikke gemme indstilling.",user_deleted:"Bruger slettet.",delete_error:"Kunne ikke slette bruger.",course_deleted:"Kursus slettet.",course_delete_error:"Kunne ikke slette kursus.",joined_course:"Tilmeldt!",loading:"Indlser...",loading_course:"Indlser kursus..."},ice={level_title:"NUVRENDE NIVEAU",points_to_next:"point til nste niveau",my_badges:"Mine Udmrkelser",rank_newbie:"Nybegynder",rank_apprentice:"Lrling",rank_expert:"Ekspert",rank_master:"Mester",rank_legend:"Legende"},oce={tab_overview:"Oversigt",tab_grading:"At Rette",tab_applications:"Ansgninger",tab_courses:"Mine Kurser",tab_students:"Studenteropflgning",tab_communication:"Kommunikation",section_schedule:"Kommende Skema",section_shortcuts:"Genveje",section_admin:"Administration",ongoing_course:"Igangvrende kursus",upcoming_event:"Kommende begivenhed",no_events:"Ingen planlagte begivenheder.",new_message:"Ny Besked",course_start:"Kursets startdato: {{name}}"},lce={calendar:"G til Kalender",students:"Administrer Studerende",grading:"Ret Opgaver",messages:"Beskeder",create_course:"Opret nyt kursus"},cce={recent_messages:{title:"Seneste Beskeder",view_all:"Vis alle",empty:"Ingen nye beskeder.",from:"Fra"},online_friends:{title:"Online venner",x_online:"{{antal}} online",empty:"Ingen venner online i jeblikket.",profile:"Profil af",view_all:"Vis alle venner"},live_lessons:{title:"Live-lektioner",subtitle:"Kommende videomder",soon:"Snart",host:"Vrt",join:"Bliv en del af os",prepare:"Forbered dig",view:"Visum",see_all_calendar:"Se alt i kalenderen",error_load:"Kunne ikke indlse lektioner",error_join:"Kunne ikke oprette forbindelse til lektionen"},tickets:{active:"Aktive supportsager",critical:"Kritisk",high:"Hj prioritet",medium:"Mellemhj prioritet",low:"Lav prioritet",open:"bne sager",empty:"Ingen bne sager i jeblikket."},student_progress:{title:"Mine kursusresultater",on_track:"Godt placeret",at_risk:"Advarsel",assignments:"Opgaver",quizzes:"Quiz",detailed_overview:"Detaljeret oversigt",latest_results:"Seneste resultater",no_results:"Ingen resultater endnu.",catch_up:"Srg for at indhente det forsmte!",go_to_course:"G til kurset"},attendance_widget:{title:"Min digitale tilstedevrelse",activity_level:"Aktivitetsniveau",registered_time:"Registreret tid",goal_week:"Ml (uge)",low_warning:"Vr opmrksom p det. Dit fremmde er lavt. Kontakt venligst din mentor."},schedule:{title:"Skema for dagen og ugen",loading:"Indlser tidsplan...",campus:"Campus",online:"On-line",connect:"Opret forbindelse",empty:"Ingen undervisning i dag",view_full:"Se det fulde program",upcoming_submissions:"Kommende indsendelser",go_to_task:"G til opgaven",no_deadlines:"Ingen kommende deadlines",view_all_count:"Vis alle ({{antal}})",room_missing:"Vrelse mangler"}},dce={create_title:"Opret nyt kursus",edit_title:"Rediger kursus",name:"Kursusnavn",code:"Kursuskode",category:"Kategori",description:"Kursusbeskrivelse",start_date:"Startdato",end_date:"Slutdato",max_students:"Maks pladser",classroom_section:"Digitalt Klassevrelse",classroom_link:"Mdelink",exam_link:"Link til Eksamensrum",create_btn:"Opret",go_to_course:"G til kurset"},uce={title:"Systemindsigt",subtitle:"Dybdegende analyse af platformens ydeevne og vkst.",financial_overview:"konomisk Oversigt",revenue_analytics:"Omstningsanalyse",student_insights:"Elevindsigt",system_infrastructure:"Systeminfrastruktur",monthly_recurring_revenue:"Mnedlig Tilbagevendende Indtgt (MRR)",total_users:"Totale Brugere",active_sessions:"Aktive Sessioner",server_health:"Server Helbred",operational:"Operationel",stable:"Stabil",revenue_growth:"Omstningsvkst",user_acquisition:"Brugeranskaffelse",export_csv:"Eksporter CSV",day:"Dag",week:"Uge",month:"Mned",year:"r",vs_last_month:"vs sidste mned",system_status:"Systemstatus",total_students:"Totale Elever",at_risk:"I Risikozonen",avg_time_online:"Gns. Tid Online",student_performance_registry:"Elevprstationsregister",student_name:"Elevnavn",status:"Status",courses:"Kurser",completion:"Gennemfrelse",total_time_online:"Total Tid Online",risk_factor:"Risikofaktor",no_student_data:"Ingen elevdata tilgngelige.",grafana_dashboard:"Grafana Dashboard",grafana_description:"Realtidsmlinger for systemet (CPU, Hukommelse, Foresprgsler).",open_full_grafana:"bn Fuld Grafana",prometheus_metrics:"Prometheus Mlinger",prometheus_description:"Ubehandlede mlinger explorer.",open_prometheus:"bn Prometheus",all_systems_normal:"Alle systemer krer normalt.",uptime:"Oppetid",revenue_title:"Omstningsanalyse",revenue_subtitle:"Omfattende indsigt i indtgter og betalinger",loading_revenue_data:"Indlser omstningsdata...",annual_recurring_revenue:"rlig Tilbagevendende Indtgt (ARR)",payment_success_rate:"Betalingssuccesrate",avg_payment_amount:"Gennemsnitligt Betalingsbelb",excellent:"Fremragende",good:"God",revenue_growth_trend:"Omstningsvksttrend",payment_methods:"Betalingsmetoder",no_payment_data:"Ingen betalingsdata tilgngelige",total_payments:"Totale Betalinger",successful:"Succesfuld",failed:"Fejlet"},hce={title:"Fakturastyring",create_invoice:"Opret Faktura",export_csv:"Eksporter CSV",exporting:"Eksporterer...",loading:"Indlser fakturaer...",all:"Alle",draft:"Kladde",pending:"Afventer",sent:"Sendt",paid:"Betalt",overdue:"Forfalden",cancelled:"Annulleret",invoice_number:"Fakturanummer",customer:"Kunde",amount:"Belb",issue_date:"Udstedelsesdato",due_date:"Forfaldsdato",status:"Status",actions:"Handlinger",no_invoices_found:"Ingen fakturaer fundet",total_invoices:"Totale Fakturaer",send_reminder_confirm:"Send betalingspmindelse til kunden?",reminder_sent:"Betalingspmindelse sendt!",delete_confirm:"Er du sikker p, at du vil slette denne faktura?",refund_confirm:"Er du sikker p, at du vil refundere denne betaling? Denne handling kan ikke fortrydes.",refund_success:"Refundering igangsat",refund_failed:"Kunne ikke refundere. Tjek konsollen for detaljer.",no_payment_details:"Kan ikke finde betalingsoplysninger for denne faktura.",view_pdf:"Vis PDF",generate_pdf:"Generer PDF"},fce={title:"Abonnementsplaner",subtitle:"Administrer prisstning og abonnementsmuligheder",create_plan:"Opret Plan",loading:"Indlser abonnementsplaner...",default_badge:"STANDARD",inactive_badge:"INAKTIV",unlimited:"Ubegrnset",users:"Brugere",courses:"Kurser",storage:"Lagerplads",features:"Funktioner",edit:"Rediger",activate:"Aktiver",deactivate:"Deaktiver",delete_confirm:"Er du sikker p, at du vil slette denne plan?",edit_plan:"Rediger Plan",create_new_plan:"Opret Ny Plan",plan_name_internal:"Plannavn (Internt)",display_name:"Visningsnavn",description:"Beskrivelse",price:"Pris",currency:"Valuta",trial_period_days:"Prveperiode (Dage)",billing_interval:"Faktureringsinterval",monthly:"Mnedlig",yearly:"rlig",lifetime:"Livstid",max_users:"Max Brugere (-1 = ubegrnset)",max_courses:"Max Kurser (-1 = ubegrnset)",max_storage:"Lagerplads GB (-1 = ubegrnset)",add_feature:"+ Tilfj Funktion",enter_feature:"Indtast funktionsnavn:",active:"Aktiv",default_plan:"Standardplan",sort_order:"Sortering",cancel:"Annuller",update_plan:"Opdater Plan",create_plan_btn:"Opret Plan"},gce={administration:"Administration",system_settings:"Systemindstillinger",skolverket_import:"Skolverket Import",skolverket_data:"Skolverket Data",users:"Brugere",courses:"Kurser",roles:"Roller",revenue:"Omstning",invoices:"Fakturaer",subscription_plans:"Abonnementsplaner",payment_settings:"Betalingsindstillinger",promo_codes:"Kampagnekoder",tickets:"Problemstillinger"},mce={title:"Bibliotek",subtitle:"Udforsk og ls e-bger",search_placeholder:"Sg p titel eller forfatter...",categories:"Kategorier",all_categories:"Alle",read_book:"Ls bogen",edit_book:"Rediger bog",delete_book:"Fjern bog",upload_book:"Upload ny bog",no_books_found:"Der blev ikke fundet nogen bger.",edit_modal_title:"Rediger e-bog",upload_modal_title:"Upload ny e-bog",title_label:"Titel",author_label:"Forfatter",category_label:"Kategori",description_label:"Beskrivelse af programmet",save_changes:"Gem ndringer",upload_btn:"Uploading",language_label:"Sprog",epub_file_label:"EPUB-fil",cover_image_label:"Forsidebillede",no_cover:"Ingen dkning",select_file_alert:"Vlg venligst en EPUB-fil",delete_confirm:"Er du sikker p, at du vil slette denne bog?",delete_success:"Bog fjernet",no_books_desc:"Prv at sge efter noget andet eller upload din frste e-bog til biblioteket."},pce={active_courses:"Aktive kurser",my_students:"Mine studerende",to_grade:"At korrigere",applications:"Anvendelser",risk_zone:"Risikozone",at_risk_title:"Elever i farezonen",students_count:"{{count}} st",no_at_risk:"Ingen elever i farezonen p nuvrende tidspunkt. ",completion_prefix:"frdiggjort",view_all_risk:"Vis alle udsatte elever"},xce={all_graded_title:"Alt er rettet op!",all_graded_desc:"Godt arbejde, ingen ventende indsendelser.",pending_submissions_count:"Afventende indsendelser ({{antal}})",action_required:"Krver handling",student:"studerende",assignment:"Opgave",course:"Kursus",submitted:"Indsendt",go_to_grading:"G til korrektion",no_pending_applications:"Ingen verserende ansgninger p nuvrende tidspunkt.",applying_to:"Ansg om et kursus",date:"Dato",decision:"Beslutning",approve:"Godkend",reject:"Afvis",never:"Aldrig",days_ago:"{{antal}} dage siden",contact:"Kontakt os",admitted_msg:"Studerende accepteret!",rejected_msg:"Ansgning afvist.",error_msg:"Noget gik galt.",unknown_student:"Ukendt"},bce={title:"Kontakt studerende",subtitle:"Rapporter og flg op med {{name}}",risk_factor:"Identificeret risikofaktor",never_logged_in:"Den studerende har aldrig logget ind p platformen.",inactive_days:"Den studerende har vret inaktiv i {{antal}} dage.",no_risk:"Der er ikke identificeret nogen kritisk risiko p nuvrende tidspunkt, men opflgning anbefales.",subject_label:"Emne (baseret p risiko)",auto_generated_label:"Automatisk genereret dokument",auto_generated_desc:"Denne dokumentation er baseret p systemets data og sendes i e-mailen.",teacher_notes_label:"Dine kommentarer/handlingsplan",teacher_notes_placeholder:"Skriv en personlig besked, instruktioner eller specifikke handlinger, som den studerende skal gre...",report_and_send:"Rapporter og send",sending:"Sender...",sent_success:"Besked sendt!",send_error:"Kunne ikke sende beskeden.",divider:"Lrerens kommentar:",regards:"Med venlig hilsen",templates:{follow_up_subject:"Opflgning p dine studier",no_login_subject:"Vigtigt: Du er ikke logget ind endnu",no_login_body:"Jeg kan se, at du endnu ikke er logget ind p EduFlex. For at f udbytte af kurset er det vigtigt, at du snart kommer i gang.",need_help_login:"Har du brug for hjlp til at logge ind eller finde det rigtige materiale?",warning_inactivity_subject:"Advarsel: Hjt fravr og inaktivitet",warning_inactivity_body:"Jeg kan se, at du ikke har vret aktiv p EduFlex i {{antal}} dage. Det er bekymrende og pvirker dine studier negativt.",review_plan:"Vi bliver ndt til at gennemg din studieplan for at sikre, at du har tid nok til at gennemfre alle moduler.",follow_up_absence_subject:"Opflgning: Fravr",follow_up_absence_body:"Jeg har bemrket, at der er get {{antal}} dage, siden du sidst var aktiv.",reach_out:"Kontakt os, hvis du har brug for hjlp til et bestemt trin.",generic_body:"Jeg vil gerne hre, hvordan det gr med kurset."}},yce={tags_placeholder:"Tags (adskilt med komma, f.eks. AI, matematik, algebra)",group_rooms:"Grupperum",room_name_placeholder:"Organisationens navn",link:"Link til",add_room:"+ Tilfj grupperum",course_color:"Kursets farve",error_create:"Kunne ikke oprette kurset.",error_update:"Kunne ikke opdatere kurset.",course_name:"Kursets navn",course_code:"Kursuskode"},vce={nav:{features:"Egenskaber og funktioner",architecture:"Arkitektur",pricing:"Priser",login:"Log ind p hjemmesiden",get_started:"Kom godt i gang"},hero:{badge:"v2.0 er nu tilgngelig",title_start:"LMS'et som",title_highlight:"Studerende elsker",subtitle:"EduFlex bygger bro mellem virksomheders LMS'er og moderne forbrugerapps. Spilbaseret, hurtig og smuk lring for den nste generation.",cta_trial:"Book en demo",cta_docs:"Se API-dokumentation"},features:{badge:"Hvorfor EduFlex?",title:"Alt hvad du behver for at drive en moderne skole",subtitle:"Fra robuste vurderingsvrktjer til revolutionerende AI-support - vi dkker dig ind.",ai_creator:{title:"Skaber af AI-kurser",desc:"Upload en studievejledning (PDF), og lad Gemini AI oprette et komplet kursus med lektioner, datoer og smartkoder p under 60 sekunder. Nu med automatisk databasesynkronisering."},cascading_deletes:{title:"Kaskade-annullering",desc:"Problemfri administration af kursusindhold. Nr et kursus slettes, renses alle tilknyttede materialer og lektioner automatisk for at holde databasen ren."},lti_ready:{title:"LTI 1.3 klar",desc:"Fuldt verificeret sttte til OIDC-lanceringer. Smls integration med eksterne platforme som Canvas og Moodle."},gamification:{title:"Gamification 2.0",desc:"Indbygget XP, badges, niveauer, leaderboards og daglige udfordringer for at ge elevernes engagement."},multi_tenancy:{title:"gte multi-tenancy",desc:"Fuld dataisolering med schema-per-tenant-arkitektur. Dine data er dine."},analytics:{title:"Analyser og indsigt",desc:"Dashboards i realtid til skoleledere og lrere. Varmekort og forudsigelse af frafald."},security:{title:"Virksomhedens sikkerhed",desc:"Rollebaseret adgangskontrol (RBAC), revisionslogning og sikker Keycloak SSO-integration."}},architecture:{badge:"Bygget til skalering",title:"Virksomhedsarkitektur",powered_by:"Drevet af industristandarder",items:{0:"Spring Boot 3.4 Microservices",1:"PostgreSQL med Schema-per-Tenant",2:"Redis caching-lagring",3:"MinIO S3-kompatibel opbevaring",4:"Keycloak SSO Identity Management",5:"Kubernetes og Helm-diagrammer"}},pricing:{title:"Enkel, gennemsigtig prisstning",subtitle:"Vlg den plan, der passer til din skole.",basic:{name:"Grundlggende",price:"990 SEK / mned",features:{0:"Op til 100 brugere",1:"Grundlggende kursusadministration",2:"Nem rapportering",3:"Sttte fra samfundet"},cta:"Kom godt i gang"},pro:{name:"Pro",price:"2 990 SEK / mned",features:{0:"Op til 500 brugere",1:"Fuld gamification",2:"Skolverket-Integration",3:"CSN-eksport",4:"Prioriteret sttte"},cta:"Book en demo",badge:"Mest populre"},enterprise:{name:"Virksomhed",price:"Kontakt os",features:{0:"Ubegrnset antal brugere",1:"White label-branding",2:"Keycloak SSO",3:"SLA 99,99 %.",4:"Dedikeret infrastruktur"},cta:"Kontakt salg"}},footer:{tagline:"Styrker uddannelse med moderne teknologi. Bygget med  i Sverige.",product:"Produkt",features:"Egenskaber og funktioner",pricing:"Priser",roadmap:"Kreplan",resources:"Ressourcer",documentation:"Dokumentation",api_reference:"API-reference",system_status:"Systemets status",connect:"Kontakt os",contact_sales:"Kontakt salg",twitter:"Twitter",github:"GitHub",copyright:" 2026 EduFlex. Alle rettigheder forbeholdes.",developed_by:"Udviklet af",fenrir:"Fenrir Studio"}},kce={title:"Book en demo",name:"Organisationens navn",name_placeholder:"Dit navn",email:"E-mail-adresse",email_placeholder:"din@email.se",organization:"Organisation",organization_placeholder:"Navn p skolen",phone:"Telefonnummer",phone_placeholder:"+46 70 123 45 67",message:"Meddelelse",message_placeholder:"Fortl os lidt om dine behov...",submit:"Send anmodning",sending:"Sender...",success_message:"Tusind tak skal du have! Vi kontakter dig inden for 24 timer.",error_message:"Noget gik galt. Prv venligst igen eller send os en e-mail."},wce={title:"AI-indsigter og -anbefalinger",risk_low:"Lav risiko",risk_medium:"Middel risiko",risk_high:"Hj risiko",suggested_activities:"Foreslede aktiviteter",coaching_advice:"Rd om coaching",update_analysis:"Opdatering af AI-analyse",lesson_type:"Lektion",practice_type:"Trning",rationale_prefix:"AI rsonnement:",no_data:"Ikke nok data til AI-analyse endnu. Fortst med at arbejde p kurserne!"},jce={common:Ble,sidebar:Ule,dashboard:Kle,chat:Gle,forum:qle,attendance:Vle,assessment:Hle,evaluation:Wle,license:Xle,auth:Yle,admin:Zle,catalog:Qle,docs:Jle,calendar:ece,course:tce,assignments:rce,quiz:nce,profile:ace,messages:sce,gamification:ice,teacher_dashboard:oce,shortcuts:lce,widgets:cce,course_modal:dce,analytics:uce,invoices:hce,subscription_plans:fce,admin_tabs:gce,library:mce,teacher_widgets:pce,teacher_tables:xce,student_contact:bce,teacher_modals:yce,landing:vce,contact:kce,ai_personalization:wce},Nce={save:"Tallenna",cancel:"Peruuta",delete:"Poista",edit:"Muokkaa",upload:"Lataa",download:"Lataa",search:"Etsi...",filter:"Suodata",name:"Nimi",action:"Toiminto",description:"Kuvaus",date:"Pivmr",size:"Koko",loading:"Ladataan...",close:"Sulje",back:"Takaisin",send:"Lhet",yes:"Kyll",no:"Ei",unknown:"Tuntematon",light_mode:"Vaalea tila",dark_mode:"Tumma tila",choose:"Valitse...",optional:"Valinnainen",minimize_menu:"Minimoi valikko",expand_menu:"Laajenna valikko",online_friends:"Online-ystvt",today:"Tnn olemme",tomorrow:"Huomenna",all:"Kaikki"},_ce={dashboard:"Kojelauta",admin:"Hallinta",my_profile:"Oma Profiili",logout:"Kirjaudu ulos",documents:"Tiedostot & Asiakirjat",catalog:"Kurssiluettelo",calendar:"Kalenteri",resource_bank:"Resurssipankki",analytics:"Analytiikka",library:"Kirjasto",support:"Tuki & Yhteystiedot",my_courses:"Kurssini",ebooks:"E-kirjat",system:"Jrjestelm",ai_quiz:"AI Quiz"},Sce={welcome:"Tervetuloa takaisin, {{name}}!",logged_in_as:"Kirjautuneena sisn",my_courses:"Omat Kurssit",files:"Tiedostot",no_active_courses:"Sinulla ei ole aktiivisia kursseja.",evaluations:"Arvioinnit",give_rating:"Arvostele",to_grade:"Arvosteltavaa",submissions:"Palautukset",no_pending_grades:"Ei odottavia palautuksia!",upcoming_deadlines:"Tulevat mrajat",no_deadlines:"Ei tulevia mraikoja.",urgent:"Kiireellinen!",go_to:"Mene",avg_grade:"Keskiarvosana",based_on:"Perustuu {{count}} suoritettuun kurssiin",live_overview:"Jrjestelmn yleiskatsaus (Live)",realtime_data:"Reaaliaikaista dataa.",users:"Kyttjt",courses:"Kurssit",archived_files:"Arkistoidut tiedostot",latest_registered:"Viimeksi rekisterity",latest_uploads:"Viimeisimmt lataukset",archive:"Arkisto",no_archive_docs:"Ei asiakirjoja arkistossa.",teacher_panel:"Opettajan paneeli",overview_for:"Yleiskatsaus: {{name}}",my_students:"Opiskelijani",active_courses:"Aktiiviset kurssit",students_at_risk:"Riskiryhmn opiskelijat (Myhstyneet)",missed_deadlines:"Myhstynyt {{count}} mrajasta",no_risk_students:"Ei myhstyneit palautuksia!",all_in_phase:"Kaikki opiskelijat aikataulussa.",grading_todo:"Tehtv: Arvostelu",grade_now:"Arvostele",all_graded:"Kaikki arvosteltu! Hyv tyt.",hi_student:"Hei, {{name}}! ",student_subtitle:"Tss on opintosi juuri nyt.",not_registered:"Et ole ilmoittautunut millekn kurssille.",comming_assignments:"Tulevat tehtvt",no_upcoming_assignments:"Ei tulevia tehtvi.",admin_overview:"Jrjestelmn yleiskatsaus",admin_subtitle:"Hallinto ja kurssien hallinta",total_courses:"Kurssien kokonaismr",active_students:"Aktiiviset opiskelijat",locked_courses:"Lukitut kurssit",files_in_system:"Tiedostoja jrjestelmss",course_registry:"Kurssirekisteri",search_placeholder:"Hae kurssikoodilla tai nimell...",all_statuses:"Kaikki tilat",open:"Avoin",closed:"Suljettu",no_match:"Ei tuloksia.",showing_x_of_y:"Nytetn {{count}} / {{total}} kurssia",manage:"Hallitse",welcome_back:"Tervetuloa takaisin ohjelmaan,",tabs:{overview:"Yleiskatsaus ohjelmaan",communication:"Viestint"},widgets:{stats:"Tilastot",calendar:"Kalenteri & aikataulu",recent_users:"Viimeisimmt kyttjt",recent_docs:"Hiljattain ladattu",messages:"Viimeisimmt ilmoitukset",online_friends:"Online-ystvt",tickets:"Tukitapaukset",gamification:"Pelillistmisen tila",attendance:"Lsnoloni",my_courses:"Kurssini",tasks:"Tehtvt ja palaute",daily_challenges:"Tmn pivn haasteet",achievements:"Saavutukseni",ai_insights:"Tekolyn oivallukset",ai_personalization:"Henkilkohtaiset opiskeluvinkit",daily_challenges_widget:{title:"Tmn pivn haasteet",subtitle:"Tyt ansaita XP",days:"{{count}} piv",empty:"Haasteita ei ole viel saatavilla",completed:" Tyhj",reset_in:"Uusia haasteita {{tunnit}}h {{minuutit}}m"}},total_users:"Kyttji yhteens",realtime_update_notice:"Tiedot pivitetn reaaliajassa.",new_messages:"Uudet ilmoitukset",go_to_inbox:"Siirry postilaatikkoon",students:"Opiskelijat",teachers:"Opettajat",admins:"Yllpitjt",mentors:"Mentorit",principals:"Rehtorit",new_course:"Uusi kurssi",search_course:"Etsi kursseja...",table:{status:"Tila",code:"Koodi",name:"Organisaation nimi",date:"Pivmr",action:"Toiminta",user:"Kyttjt",email:"Shkposti",role:"Rulla"},course_color:"Kurssin vri",edit_course:"Muokkaa kurssia",delete_course:"Poista kurssi",recent_users:"Viimeisimmt kyttjt",new:"Uusi",no_new_users:"Uusia kyttji ei ole rekisteritynyt.",recent_uploads:"Viimeisimmt lataukset",unknown_file:"Tuntematon tiedosto",unknown_size:"Tuntematon koko",unknown_date:"Tuntematon pivmr",no_files_uploaded:"Tiedostoja ei ole viel ladattu.",user_registry:"Kyttjrekisteri",new_user:"Uusi kyttj",search_user:"Etsi kyttji...",all_roles:"Kaikki roolit",active:"Aktiivinen",edit_user:"Muokkaa kyttj",delete_user:"Poista kyttjt",feedback:{new:"Uusi palaute",course:"Kurssi: {{nimi}}",praise:"Hyvin tehty!",details:"Nyt tiedot"}},Ace={title:"Chat & Tuki",messenger:"Viestin",contacts:"Yhteystiedot",type_placeholder:"Kirjoita...",image:"Kuva"},Ece={title:"Keskustelufoorumi",threads:"Ketjut",all_categories:"Kaikki kategoriat",new_thread:"Uusi ketju",empty_title:"Tll on tyhj.",empty_student:"Aloita keskustelu!",empty_teacher:"Odota tietoa opettajalta.",replies:"vastausta",create_header:'Aloita keskustelu kategoriassa "{{category}}"',subject:"Aihe",subject_placeholder:"Aihe...",content:"Sislt",content_placeholder:"Kirjoita viestisi thn...",publish_btn:"Julkaise",back_to:"Takaisin: {{category}}",answers_header:"Vastaukset",write_reply:"Kirjoita vastaus...",create_error:"Ketjun luonti eponnistui.",reply_error:"Vastaaminen eponnistui."},Cce={title:"Lsnoloraportti",presence:"Lsnolo:",occasions:"kertaa",no_records:"Ei pakollisia tapahtumia kirjattu.",not_reported:"Ei raportoitu",present:"Lsn",absent:"Poissa",description:"Kuvaus",no_description:"Ei kuvausta.",note:"Huomautus",manage_attendance:"Hallitse lsnoloa",new_event:"Uusi tapahtuma",create_event_title:"Luo uusi tapahtuma",event_title:"Otsikko",event_start:"Alkaa",event_end:"Pttyy",event_type:"Tyyppi",type_lesson:"Oppitunti",type_workshop:"Typaja",type_exam:"Koe",type_other:"Muu",create_btn:"Luo",save_attendance:"Tallenna",saved_success:"Tallennettu!",save_error:"Tallennusvirhe",create_error:"Luonti eponnistui"},Tce={title:"Arviointi & Tulokset",no_assignments:"Ei tehtvi tll kurssilla.",deadline:"Mraika",go_to_task:"Mene tehtvn",my_file:"Tiedostoni",grade:"Arvosana",waiting:"Odottaa arvostelua",submitted_at:"Palautettu",not_submitted:"Ei palautettu",submit_now:"Palauta nyt"},Oce={title:"Kurssiarviointi",intro:"Vastauksesi ovat anonyymej ja auttavat meit parantamaan koulutusta. Arvioi 1-10 ja jt kommentti.",your_rating:"Arvosanasi (1 = Huono, 10 = Erinomainen)",comment_label:"Kommentti (Vapaaehtoinen)",comment_placeholder:"Kirjoita mielipiteesi...",submit_btn:"Lhet arviointi",validation_error:"Arvioi kaikki kohdat.",manage_btn:"Hallitse arviointia",saved_success:"Arviointi tallennettu!",save_error:"Tallennus eponnistui."},Ice={locked_title:"Jrjestelm lukittu",locked_desc:"Voimassa olevaa lisenssi ei lytynyt.",key_label:"Lisenssiavain",key_placeholder:"XXXX-XXXX-XXXX-XXXX",activate_btn:"Aktivoi jrjestelm"},Dce={login_header:"Kirjaudu sisn",register_header:"Luo tili",username:"Kyttjtunnus",password:"Salasana",login_button:"Kirjaudu",no_account:"Ei tili?",register_link:"Rekisteridy",has_account:"Onko sinulla jo tili?",login_link:"Kirjaudu sisn",firstname:"Etunimi",lastname:"Sukunimi",ssn:"Henkiltunnus (VVVVKKPP-XXXX)",email:"Shkposti",generate:"Luoda",choose_or_generate:"Valitse tai luo...",profane:"Sopimaton sana valittu.",taken:"Kyttjtunnus varattu.",available:"Vapaana!",role:"Rooli",student:"Opiskelija",admin:"Yllpitj",teacher:"Opettaja",contact_address:"Yhteystiedot & Osoite",phone:"Puhelin",street:"Katuosoite",zip:"Postinumero",city:"Kaupunki",country:"Maa",register_user_btn:"Rekisteri kyttj",create_account_btn:"Luo tili"},Mce={title:"Jrjestelmnhallinta",subtitle:"Hallitse kyttji, kursseja ja arkistoa.",tab_users:"Kyttjt",tab_courses:"Kurssit",tab_docs:"Asiakirjat",tab_settings:"Asetukset",register_new:"Rekisteri uusi kyttj",firstname:"Etunimi",lastname:"Sukunimi",ssn:"Henkiltunnus",email:"Shkposti",account_role:"Tili & Rooli",generate:"Luo",password:"Salasana",create_account:"Luo tili",registered_users:"Rekisteridyt kyttjt",course_overview:"Kurssitiedot",create_course:"Luo uusi kurssi",search_course:"Hae...",no_courses:"Ei kursseja.",teacher:"Opettaja",students:"Opiskelijat",settings:"Asetukset",content:"Sislt",global_docs:"Globaali arkisto",upload_file:"Lataa tiedosto",no_docs:"Ei arkistoituja tiedostoja.",module_management:"Moduulit & Jrjestelm",site_name:"Sivuston nimi",chat_module:"Chat-moduuli",chat_desc:"Mahdollistaa reaaliaikaisen keskustelun.",registration:"Rekisterinti",registration_desc:"Sallii uusien tilien luomisen.",version:"Jrjestelmversio",edit_course_settings:"Muokkaa kurssiasetuksia",course_name:"Kurssin nimi",course_code:"Kurssikoodi",color_theme:"Vriteema",register_new_user:"Rekisteri uusi kyttj",edit_user:"Muokkaa kyttj",edit_course:"Muokkaa kurssia",base_on_skolverket:"Perustuu Skolverkin kurssiin",choose_skolverket_course:"Valitse Skolverk-kurssi",max_seats:"Maksimi paikat",tags:"Tunnisteet",digital_classroom:"Digitaalinen luokkahuone (valinnainen)",choose_platform:"Valitse alustasi...",paste_link:"Liit linkki...",choose_teacher:"Valitse opettajasi..."},Lce={title:"Kurssiluettelo",subtitle:"Etsi ja ilmoittaudu kursseille.",search_placeholder:"Etsi kursseja...",no_results:"Ei tuloksia.",teacher:"Opettaja",start:"Alkaa",not_set:"Ei asetettu",join:"Liity kurssille",closed_msg:"Ilmoittautuminen ei ole auki"},Rce={title:"Dokumenttien hallinta",upload_title:"Lataa tiedosto",drop_text:"Pudota tiedosto thn",search_placeholder:"Etsi...",save_btn:"Tallenna",saving:"Tallennetaan...",no_results:"Ei tiedostoja."},Pce={title:"Kalenteri",subtitle:"Seuraa mraikoja ja kurssien alkamista.",events_in:"Tapahtumat:",no_events:"Ei tapahtumia tss kuussa.",days:["Ma","Ti","Ke","To","Pe","La","Su"]},zce={back:"Takaisin",material:"Materiaali",assignments:"Tehtvt",quiz:"Quiz & Kokeet",forum:"Foorumi",students:"Opiskelijat",create_quiz:"Luo uusi Quiz",start_quiz:"Aloita Quiz",no_material:"Ei materiaalia.",add_material:"Lis materiaalia",upload:"Lataa",title:"Otsikko",description:"Kuvaus",link:"Linkki (URL)",type_text:"Teksti / Artikkeli",type_video:"Video",type_link:"Ulkoinen linkki",type_file:"Tiedosto",read:"Luettu",mark_read:"Merkitse luetuksi",open_link:"Avaa linkki",participants:"Osallistujat",add_student:"Lis",select_student:"Valitse opiskelija...",role:"Rooli",status:"Tila",active:"Aktiivinen",attendance:"Lsnolo",connect_classroom:"Liity luokkahuoneeseen",evaluate_course:"Arvioi kurssi",feedback_thanks:"Kiitos palautteesta!",error_occurred:"Virhe tapahtui:",result_passed:"Hyvksytty",result_failed:"Hyltty",result_pending:"Odottaa",mark_passed:"Hyvksy",mark_failed:"Hylk",certificate:"Sertifikaatti",course_completed:"Kurssi suoritettu",scorm:"Interaktiiviset moduulit",kursinformation:"Kurssin tiedot",view_certificate:"Viisumitodistus",claim_certificate:"Lataa todistus"},$ce={header:"Palautettavat tehtvt",new:"Uusi tehtv",create_header:"Luo tehtv",cancel:"Peruuta",save:"Tallenna",deadline:"Mraika",no_assignments:"Ei tehtvi.",submissions:"Palautukset",no_submissions:"Ei palautuksia.",file_received:"Tiedosto vastaanotettu",grade_placeholder:"- Arvosana -",feedback_placeholder:"Palaute...",submitted:"Palautettu!",submitted_desc:"Olet palauttanut tmn tehtvn.",submit_button:"Palauta tehtv",select_file_alert:"Valitse tiedosto!"},Fce={header:"Quiz & Kokeet",subtitle:"Testaa osaamisesi.",questions_count:"Kysymyst",knowledge_check:"Tarkista tietosi.",no_quizzes:"Ei saatavilla olevia quizzeja.",updated_alert:"Pivitetty!",created_alert:"Luotu!",save_error:"Virhe tallennuksessa.",delete_confirm:"Haluatko varmasti poistaa tmn?",delete_error:"Poistaminen eponnistui.",result_saved:"Tulos tallennettu",create_title:"Luo Quiz",edit_title:"Muokkaa",modal_quiz_title:"Otsikko",title_placeholder:"Esim. Java-perusteet",question:"Kysymys",question_placeholder:"Kirjoita kysymys...",option:"Vaihtoehto",add_option:"Lis vaihtoehto",add_question:"Lis kysymys",save_btn:"Tallenna",update_btn:"Pivit",submit_btn:"Lhet",result_header:"Tulos",result_msg:"Hyv tyt! Tuloksesi on tallennettu."},Bce={title:"Oma Profiili",details:"Henkiltiedot",security:"Turvallisuus",language:"Kieli",firstname:"Etunimi",lastname:"Sukunimi",email:"Shkposti",phone:"Puhelin",address_header:"OSOITETIEDOT",street:"Katuosoite",zip:"Postinumero",city:"Kaupunki",country:"Maa",current_password:"Nykyinen salasana",new_password:"Uusi salasana",confirm_password:"Vahvista salasana",update_password:"Pivit salasana",save_changes:"Tallenna muutokset",password_mismatch:"Salasanat eivt tsm!",password_error:"Salasanan vaihto eponnistui.",choose_strong_password:"Valitse vahva salasana.",settings:"Asetukset",settings_header:"Mukauta",settings_desc:"Valitse mit nytetn.",show_calendar:"Nyt kalenteri",show_messages:"Nyt viestit",show_stats:"Nyt tilastot"},Uce={profile_updated:"Profiili tallennettu!",password_changed:"Salasana vaihdettu!",login_failed:"Kirjautuminen eponnistui.",login_error:"Virhe kirjautumisessa.",account_created:"Tili luotu!",register_error:"Rekisterinti eponnistui.",license_approved:"Lisenssi hyvksytty!",license_error:"Aktivointi eponnistui.",upload_success:"Tiedosto ladattu!",upload_error:"Lataus eponnistui.",setting_saved:"Tallennettu!",setting_error:"Virhe tallennuksessa.",user_deleted:"Kyttj poistettu.",delete_error:"Poistaminen eponnistui.",course_deleted:"Kurssi poistettu.",course_delete_error:"Poistaminen eponnistui.",joined_course:"Liittyi!",loading:"Ladataan...",loading_course:"Ladataan kurssia..."},Kce={level_title:"NYKYINEN TASO",points_to_next:"pistett seuraavaan tasoon",my_badges:"Merkkini",rank_newbie:"Aloittelija",rank_apprentice:"Oppipoika",rank_expert:"Asiantuntija",rank_master:"Mestari",rank_legend:"Legenda"},Gce={tab_overview:"Yleiskatsaus",tab_grading:"Arvosteltavaa",tab_applications:"Hakemukset",tab_courses:"Kurssini",tab_students:"Opiskelijaseuranta",tab_communication:"Viestint",section_schedule:"Aikataulu",section_shortcuts:"Pikavalinnat",section_admin:"Hallinta",ongoing_course:"Meneilln oleva kurssi",upcoming_event:"Tuleva tapahtuma",no_events:"Ei tapahtumia.",new_message:"Uusi viesti",course_start:"Kurssin alkamispiv: {{name}}"},qce={calendar:"Kalenteriin",students:"Opiskelijat",grading:"Arvostelu",messages:"Viestit",create_course:"Uusi kurssi"},Vce={recent_messages:{title:"Viimeisimmt viestit",view_all:"Nyt kaikki",empty:"Ei uusia viestej.",from:"Lhettj"},online_friends:{title:"Online-ystvt",x_online:"{{count}} verkossa",empty:"Ei ystvi verkossa tll hetkell.",profile:"Profiili",view_all:"Nyt kaikki ystvt"},live_lessons:{title:"Elvt oppitunnit",subtitle:"Tulevat videokokoukset",soon:"Pian",host:"Isnt",join:"Liity meihin",prepare:"Valmistele",view:"Viisumit",see_all_calendar:"Katso kaikki kalenterista",error_load:"Oppitunteja ei voitu ladata",error_join:"Yhteytt oppitunnille ei saatu muodostettua"},tickets:{active:"Aktiiviset tukitapaukset",critical:"Kriittinen",high:"Korkea prioriteetti",medium:"Keskisuuri prioriteetti",low:"Alhainen prioriteetti",open:"Avoimet tapaukset",empty:"Tll hetkell ei ole avoimia tapauksia."},student_progress:{title:"Kurssini tulokset",on_track:"Hyvll paikalla",at_risk:"Varoitus",assignments:"Tehtvt",quizzes:"Tietokilpailu",detailed_overview:"Yksityiskohtainen yleiskatsaus",latest_results:"Viimeisimmt tulokset",no_results:"Ei viel tuloksia.",catch_up:"Varmista, ett olet perill!",go_to_course:"Siirry kurssille"},attendance_widget:{title:"Digitaalinen lsnoloni",activity_level:"Toiminnan taso",registered_time:"Rekisterity aika",goal_week:"Tavoite (viikko)",low_warning:"Huom. Osallistujamrnne on alhainen. Ota yhteytt mentoriisi."},schedule:{title:"Pivn ja viikon aikataulu",loading:"Aikataulun lataaminen...",campus:"Kampus",online:"On-line",connect:"Yhdist",empty:"Ei oppitunteja tnn",view_full:"Katso koko aikataulu",upcoming_submissions:"Tulevat toimitukset",go_to_task:"Siirry tehtvn",no_deadlines:"Ei tulevia mraikoja",view_all_count:"Nyt kaikki ({{count}})",room_missing:"Huone puuttuu"}},Hce={create_title:"Luo uusi kurssi",edit_title:"Muokkaa kurssia",name:"Kurssin nimi",code:"Kurssikoodi",category:"Kategoria",description:"Kuvaus",start_date:"Alkamispiv",end_date:"Pttymispiv",max_students:"Max opiskelijat",classroom_section:"Digitaalinen luokka",classroom_link:"Kokouslinkki",exam_link:"Koetilan linkki",create_btn:"Luo",go_to_course:"Siirry kurssille"},Wce={title:"Jrjestelmn tiedot",subtitle:"Syvllinen analyysi alustan suorituskyvyst ja kasvusta.",financial_overview:"Taloudellinen yleiskatsaus",revenue_analytics:"Liikevaihtoanalytiikka",student_insights:"Opiskelijatiedot",system_infrastructure:"Jrjestelminfrastruktuuri",monthly_recurring_revenue:"Kuukausittainen toistuva liikevaihto (MRR)",total_users:"Kyttjt yhteens",active_sessions:"Aktiiviset istunnot",server_health:"Palvelimen tila",operational:"Toiminnassa",stable:"Vakaa",revenue_growth:"Liikevaihdon kasvu",user_acquisition:"Kyttjhankinta",export_csv:"Vie CSV",day:"Piv",week:"Viikko",month:"Kuukausi",year:"Vuosi",vs_last_month:"vs viime kuukausi",system_status:"Jrjestelmn tila",total_students:"Opiskelijat yhteens",at_risk:"Riskiryhmss",avg_time_online:"Keskim. aika verkossa",student_performance_registry:"Opiskelijoiden suoritusrekisteri",student_name:"Opiskelijan nimi",status:"Tila",courses:"Kurssit",completion:"Suoritus",total_time_online:"Kokonaisaika verkossa",risk_factor:"Riskitekij",no_student_data:"Opiskelijatietoja ei saatavilla.",grafana_dashboard:"Grafana-nkym",grafana_description:"Reaaliaikaiset jrjestelmmittarit (CPU, muisti, pyynnt).",open_full_grafana:"Avaa tysi Grafana",prometheus_metrics:"Prometheus-mittarit",prometheus_description:"Raakatietojen selain.",open_prometheus:"Avaa Prometheus",all_systems_normal:"Kaikki jrjestelmt toimivat normaalisti.",uptime:"Kyttaika",revenue_title:"Liikevaihtoanalytiikka",revenue_subtitle:"Kattavat liikevaihto- ja maksutiedot",loading_revenue_data:"Ladataan liikevaihdon tietoja...",annual_recurring_revenue:"Vuosittainen toistuva liikevaihto (ARR)",payment_success_rate:"Maksun onnistumisprosentti",avg_payment_amount:"Keskimrinen maksusumma",excellent:"Erinomainen",good:"Hyv",revenue_growth_trend:"Liikevaihdon kasvutrendi",payment_methods:"Maksutavat",no_payment_data:"Maksutietoja ei saatavilla",total_payments:"Maksut yhteens",successful:"Onnistunut",failed:"Eponnistunut"},Xce={title:"Laskujen hallinta",create_invoice:"Luo lasku",export_csv:"Vie CSV",exporting:"Viedn...",loading:"Ladataan laskuja...",all:"Kaikki",draft:"Luonnos",pending:"Odottaa",sent:"Lhetetty",paid:"Maksettu",overdue:"Erntynyt",cancelled:"Peruutettu",invoice_number:"Laskunumero",customer:"Asiakas",amount:"Summa",issue_date:"Laskun pivmr",due_date:"Erpiv",status:"Tila",actions:"Toiminnot",no_invoices_found:"Laskuja ei lytynyt",total_invoices:"Laskuja yhteens",send_reminder_confirm:"Lhet maksumuistutus asiakkaalle?",reminder_sent:"Maksumuistutus lhetetty!",delete_confirm:"Haluatko varmasti poistaa tmn laskun?",refund_confirm:"Haluatko varmasti palauttaa tmn maksun? Toimintoa ei voi peruuttaa.",refund_success:"Palautus aloitettu",refund_failed:"Palautus eponnistui. Tarkista konsoli listiedoista.",no_payment_details:"Laskun maksutietoja ei lydy.",view_pdf:"Nyt PDF",generate_pdf:"Luo PDF"},Yce={title:"Tilaussuunnitelmat",subtitle:"Hallitse hinnoittelutasoja ja tilausvaihtoehtoja",create_plan:"Luo suunnitelma",loading:"Ladataan tilaussuunnitelmia...",default_badge:"OLETUS",inactive_badge:"EI AKTIIVINEN",unlimited:"Rajoittamaton",users:"Kyttjt",courses:"Kurssit",storage:"Tallennustila",features:"Ominaisuudet",edit:"Muokkaa",activate:"Aktivoi",deactivate:"Poista kytst",delete_confirm:"Haluatko varmasti poistaa tmn suunnitelman?",edit_plan:"Muokkaa suunnitelmaa",create_new_plan:"Luo uusi suunnitelma",plan_name_internal:"Suunnitelman nimi (sisinen)",display_name:"Nyttnimi",description:"Kuvaus",price:"Hinta",currency:"Valuutta",trial_period_days:"Kokeilujakso (piv)",billing_interval:"Laskutusvli",monthly:"Kuukausittain",yearly:"Vuosittain",lifetime:"Elinikinen",max_users:"Max kyttjt (-1 = rajoittamaton)",max_courses:"Max kurssit (-1 = rajoittamaton)",max_storage:"Tallennustila GB (-1 = rajoittamaton)",add_feature:"+ Lis ominaisuus",enter_feature:"Anna ominaisuuden nimi:",active:"Aktiivinen",default_plan:"Oletussuunnitelma",sort_order:"Jrjestys",cancel:"Peruuta",update_plan:"Pivit suunnitelma",create_plan_btn:"Luo suunnitelma"},Zce={administration:"Hallinta",system_settings:"Jrjestelmasetukset",skolverket_import:"Skolverket-tuonti",skolverket_data:"Skolverket-tiedot",users:"Kyttjt",courses:"Kurssit",roles:"Roolit",revenue:"Liikevaihto",invoices:"Laskut",subscription_plans:"Tilaussuunnitelmat",payment_settings:"Maksuasetukset",promo_codes:"Kampanjakoodit",tickets:"Asiat"},Qce={title:"Kirjasto",subtitle:"Tutki ja lue e-kirjoja",search_placeholder:"Etsi otsikon tai kirjoittajan mukaan...",categories:"Kategoriat",all_categories:"Kaikki",read_book:"Lue kirja",edit_book:"Muokkaa kirjaa",delete_book:"Poista kirja",upload_book:"Lataa uusi kirja",no_books_found:"Kirjoja ei lytynyt.",edit_modal_title:"Muokkaa E-kirjaa",upload_modal_title:"Lataa uusi e-kirja",title_label:"Otsikko",author_label:"Kirjoittaja",category_label:"Luokka",description_label:"Ohjelman kuvaus",save_changes:"Tallenna muutokset",upload_btn:"lataaminen",language_label:"Kieli",epub_file_label:"EPUB-tiedosto",cover_image_label:"Kannen kuva",no_cover:"Ei suojaa",select_file_alert:"Valitse EPUB-tiedosto",delete_confirm:"Haluatko varmasti poistaa tmn kirjan?",delete_success:"Kirja poistettu",no_books_desc:"Yrit etsi jotain muuta tai lataa ensimminen e-kirjasi kirjastoon."},Jce={active_courses:"Aktiiviset kurssit",my_students:"Opiskelijani",to_grade:"Korjata",applications:"Sovellukset",risk_zone:"Riskialue",at_risk_title:"Oppilaat vaaravyhykkeell",students_count:"{{count}} st",no_at_risk:"Tll hetkell yksikn opiskelija ei ole vaarassa. ",completion_prefix:"viimeistelty",view_all_risk:"Nyt kaikki riskiryhmn kuuluvat oppilaat"},ede={all_graded_title:"Kaikki on korjattu!",all_graded_desc:"Hyv tyt, ei vireill olevia hakemuksia.",pending_submissions_count:"Vireill olevat toimitukset ({{count}})",action_required:"Vaatii toimia",student:"opiskelija",assignment:"Tehtv",course:"Kurssi",submitted:"Lhetetty",go_to_grading:"Siirry oikaisuun",no_pending_applications:"Tll hetkell ei ole vireill hakemuksia.",applying_to:"Kurssille hakeminen",date:"Pivmr",decision:"Pts",approve:"Valtuutus",reject:"Hylk",never:"Ei koskaan",days_ago:"{{count}} piv sitten",contact:"Ota yhteytt",admitted_msg:"Opiskelija hyvksytty!",rejected_msg:"Hakemus hyltty.",error_msg:"Jokin meni pieleen.",unknown_student:"Tuntematon"},tde={title:"Yhteystiedot Opiskelija",subtitle:"Ilmoita ja seuraa {{name}}",risk_factor:"Tunnistettu riskitekij",never_logged_in:"Opiskelija ei ole koskaan kirjautunut alustalle.",inactive_days:"Opiskelija on ollut passiivinen {{count}} piv.",no_risk:"Tll hetkell ei ole havaittu kriittist riski, mutta seurantaa suositellaan.",subject_label:"Aihe (riskin perusteella)",auto_generated_label:"Automaattisesti luotu asiakirja",auto_generated_desc:"Tm dokumentaatio perustuu jrjestelmn tietoihin, ja se lhetetn shkpostitse.",teacher_notes_label:"Kommenttisi / Toimintasuunnitelma",teacher_notes_placeholder:"Kirjoita henkilkohtainen viesti, ohjeita tai erityistoimia, jotka oppilaan on tehtv...",report_and_send:"Raportti & Lhet",sending:"Lhett...",sent_success:"Viesti lhetetty!",send_error:"Viesti ei voitu lhett.",divider:"Opettajan kommentti:",regards:"Ystvllisin terveisin",templates:{follow_up_subject:"Opintojen seuranta",no_login_subject:"Trke: Et ole viel kirjautunut sisn",no_login_body:"Nen, ett et ole viel kirjautunut sisn EduFlexiin. Jotta voisit hyty kurssista, on trke, ett aloitat pian.",need_help_login:"Tarvitsetko apua kirjautumisessa tai oikean materiaalin lytmisess?",warning_inactivity_subject:"Varoitus: Suuri poissaolojen mr ja passiivisuus.",warning_inactivity_body:"Huomaan, ettet ole ollut aktiivinen EduFlexiss {{count}} piviin. Tm on huolestuttavaa ja vaikuttaa kielteisesti opiskeluusi.",review_plan:"Meidn on tarkistettava opintosuunnitelmasi varmistaaksemme, ett sinulla on riittvsti aikaa suorittaa kaikki moduulit.",follow_up_absence_subject:"Seuranta: poissaolo",follow_up_absence_body:"Huomasin, ett viimeisimmst aktiivisuudestasi on kulunut {{count}} piv.",reach_out:"Ota meihin yhteytt, jos tarvitset apua jonkin tietyn vaiheen kanssa.",generic_body:"Haluan tarkistaa, miten sinulla menee kurssilla."}},rde={tags_placeholder:"Tunnisteet (erotetaan pilkulla, esim. AI, Maths, Algebra)",group_rooms:"Ryhmhuone",room_name_placeholder:"Organisaation nimi",link:"Linkki",add_room:"+ Lis ryhmhuone",course_color:"Kurssin vri",error_create:"Kurssia ei voitu luoda.",error_update:"Kurssia ei voitu pivitt.",course_name:"Kurssin nimi",course_code:"Kurssin koodi"},nde={nav:{features:"Ominaisuudet ja toiminnot",architecture:"Arkkitehtuuri",pricing:"Hinnat",login:"Kirjaudu sisn verkkosivustolle",get_started:"Aloittaminen"},hero:{badge:"v2.0 nyt saatavilla",title_start:"LMS kuin",title_highlight:"Opiskelijat rakastavat",subtitle:"EduFlex kuroo umpeen kuilun yritysten LMS-jrjestelmien ja nykyaikaisten kuluttajasovellusten vlill. Pelillistetty, nopeaa ja kaunista oppimista seuraavalle sukupolvelle.",cta_trial:"Varaa esittely",cta_docs:"Nyt API-dokumentaatio"},features:{badge:"Miksi EduFlex?",title:"Kaikki mit tarvitset nykyaikaisen koulun yllpitmiseen",subtitle:"Meilt saat kaiken irti vankoista arviointitykaluista vallankumoukselliseen tekolytukeen.",ai_creator:{title:"AI Course Creator",desc:"Lataa opinto-opas (PDF) ja anna Gemini AI:n luoda tydellinen kurssi oppitunneilla, pivmrill ja lykoodeilla alle 60 sekunnissa. Nyt automaattinen tietokannan synkronointi."},cascading_deletes:{title:"Cascade peruutus",desc:"Kurssisislln saumaton hallinta. Kun kurssi poistetaan, kaikki siihen liittyvt materiaalit ja oppitunnit poistetaan automaattisesti, jotta tietokanta pysyy puhtaana."},lti_ready:{title:"LTI 1.3 valmis",desc:"Tysin todennettu tuki OIDC-kynnistyksille. Saumaton integrointi ulkoisten alustojen, kuten Canvasin ja Moodlen kanssa."},gamification:{title:"Pelillistminen 2.0",desc:"Sisnrakennettu XP, merkit, tasot, pistetaulukot ja pivittiset haasteet lisvt oppilaiden sitoutumista."},multi_tenancy:{title:"Todellinen monikyttisyys",desc:"Tydellinen tietojen eristminen skeema-per-tenant-arkkitehtuurin avulla. Tietosi ovat sinun."},analytics:{title:"Analyysit ja nkemykset",desc:"Reaaliaikaiset mittaristot rehtoreille ja opettajille. Lmpkartat ja keskeyttmisen ennustaminen."},security:{title:"Yrityksen turvallisuus",desc:"Roolipohjainen kyttoikeuksien hallinta (RBAC), audit-lokitus ja turvallinen Keycloak SSO -integraatio."}},architecture:{badge:"Rakennettu skaalautumista varten",title:"Yritysarkkitehtuuri",powered_by:"Toimialan standardien ohjaamana",items:{0:"Spring Boot 3.4 mikropalvelut",1:"PostgreSQL ja Schema-per-Tenant -palvelu",2:"Redisin vlimuistitallennus",3:"MinIO S3 -yhteensopiva tallennustila",4:"Keycloak SSO Identity Management",5:"Kubernetes & Helm-kaaviot"}},pricing:{title:"Yksinkertainen, lpinkyv hinnoittelu",subtitle:"Valitse koulullesi sopiva suunnitelma.",basic:{name:"Basic",price:"990 SEK / kuukausi",features:{0:"Enintn 100 kyttj",1:"Peruskurssin hallinta",2:"Helppo raportointi",3:"Yhteisn tuki"},cta:"Aloittaminen"},pro:{name:"Pro",price:"2 990 SEK / kuukausi",features:{0:"Enintn 500 kyttj",1:"Tydellinen pelillistminen",2:"Skolverket-Integration",3:"CSN-vienti",4:"Priorisoitu tuki"},cta:"Varaa esittely",badge:"Suosituimmat"},enterprise:{name:"Yritys",price:"[MISSING] Kontakta Oss",features:{0:"[MISSING] Obegrnsat Antal Anvndare",1:"[MISSING] White-label Branding",2:"Keycloak SSO",3:"SLA 99.99%",4:"Omistettu infrastruktuuri"},cta:"Ota yhteytt myyntiin"}},footer:{tagline:"Koulutuksen tehostaminen nykyaikaisen teknologian avulla. Rakennettu Ruotsissa osoitteessa .",product:"Tuote",features:"Ominaisuudet ja toiminnot",pricing:"Hinnat",roadmap:"Tiekartta",resources:"Resurssit",documentation:"Dokumentaatio",api_reference:"API-viite",system_status:"Jrjestelmn tila",connect:"Ota yhteytt",contact_sales:"Ota yhteytt myyntiin",twitter:"Twitter",github:"GitHub",copyright:" 2026 EduFlex. Kaikki oikeudet pidtetn.",developed_by:"Kehittnyt",fenrir:"Fenrir Studio"}},ade={title:"Varaa esittely",name:"Organisaation nimi",name_placeholder:"Nimesi",email:"Shkpostiosoite",email_placeholder:"din@email.se",organization:"Organisaatio",organization_placeholder:"Koulun nimi",phone:"Puhelinnumero",phone_placeholder:"+46 70 123 45 67",message:"Ilmoitus",message_placeholder:"Kerro meille hieman tarpeistasi...",submit:"Lhet pyynt",sending:"Lhett...",success_message:"Kiitos paljon! Otamme sinuun yhteytt 24 tunnin kuluessa.",error_message:"Jokin meni pieleen. Yrit uudelleen tai lhet meille suoraan shkpostia."},sde={title:"AI Insights & Recommendations",risk_low:"Pieni riski",risk_medium:"Keskisuuri riski",risk_high:"Korkea riski",suggested_activities:"Ehdotetut toimet",coaching_advice:"Valmennusneuvonta",update_analysis:"Pivit tekolyanalyysi",lesson_type:"oppitunti",practice_type:"Harjoitus",rationale_prefix:"Tekolyn pttely:",no_data:"Tietoja ei ole viel riittvsti tekolyanalyysi varten. Jatkakaa tyskentely kursseilla!"},ide={common:Nce,sidebar:_ce,dashboard:Sce,chat:Ace,forum:Ece,attendance:Cce,assessment:Tce,evaluation:Oce,license:Ice,auth:Dce,admin:Mce,catalog:Lce,docs:Rce,calendar:Pce,course:zce,assignments:$ce,quiz:Fce,profile:Bce,messages:Uce,gamification:Kce,teacher_dashboard:Gce,shortcuts:qce,widgets:Vce,course_modal:Hce,analytics:Wce,invoices:Xce,subscription_plans:Yce,admin_tabs:Zce,library:Qce,teacher_widgets:Jce,teacher_tables:ede,student_contact:tde,teacher_modals:rde,landing:nde,contact:ade,ai_personalization:sde},ode="Quiz & Diagnostiska Prov",lde="Testa dina kunskaper och f direkt feedback.",cde="Frgor",dde="Testa dina kunskaper inom detta omrde.",ude="Inga quiz tillgngliga fr denna kurs n.",hde="Quiz uppdaterat!",fde="Quiz skapat!",gde="Fel vid sparande av quiz.",mde="r du sker p att du vill ta bort detta quiz?",pde="Kunde inte ta bort quiz.",xde="Resultat sparat",bde="Skapa Quiz",yde="Redigera Quiz",vde="Quiz Titel",kde="T.ex. Kunskapskontroll Java Basics",wde="Frga",jde="Skriv frgan hr...",Nde="Alternativ",_de="Lgg till alternativ",Sde="Lgg till frga",Ade="Spara Quiz",Ede="Uppdatera Quiz",Cde="Lmna in Quiz",Tde="Resultat",Ode="Bra jobbat! Ditt resultat har sparats.",Ide="Starta Quiz",Dde={header:ode,subtitle:lde,questions_count:cde,knowledge_check:dde,no_quizzes:ude,updated_alert:hde,created_alert:fde,save_error:gde,delete_confirm:mde,delete_error:pde,result_saved:xde,create_title:bde,edit_title:yde,modal_quiz_title:vde,title_placeholder:kde,question:wde,question_placeholder:jde,option:Nde,add_option:_de,add_question:Sde,save_btn:Ade,update_btn:Ede,submit_btn:Cde,result_header:Tde,result_msg:Ode,start_quiz:Ide},Mde="Chatt & Support",Lde="Messenger",Rde="Kontakter",Pde="Skriv...",zde="Bild",$de={title:Mde,messenger:Lde,contacts:Rde,type_placeholder:Pde,image:zde},Fde="Klassforum",Bde="Trdar",Ude="Alla Kategorier",Kde="Ny Trd",Gde="Hr var det tomt.",qde="Starta en diskussion!",Vde="Invnta information frn lraren.",Hde="svar",Wde='Starta ny diskussion i "{{category}}"',Xde="Rubrik",Yde="mne...",Zde="Innehll",Qde="Skriv ditt meddelande hr...",Jde="Publicera Trd",eue="Tillbaka till {{category}}",tue="Svar",rue="Skriv ett svar...",nue="Kunde inte skapa trd.",aue="Kunde inte svara.",sue={title:Fde,threads:Bde,all_categories:Ude,new_thread:Kde,empty_title:Gde,empty_student:qde,empty_teacher:Vde,replies:Hde,create_header:Wde,subject:Xde,subject_placeholder:Yde,content:Zde,content_placeholder:Qde,publish_btn:Jde,back_to:eue,answers_header:tue,write_reply:rue,create_error:nue,reply_error:aue},iue="Inlmningsuppgifter",oue="Skapa Uppgift",lue="Avbryt",cue="Spara",due="Deadline",uue="Inga uppgifter.",hue="Inlmningar",fue="Inga inlmningar n.",gue="Fil mottagen",mue="- Stt Betyg -",pue="Feedback...",xue="Inlmnad!",bue="Du har lmnat in denna uppgift.",yue="Lmna in uppgift",vue="Vlj fil!",kue={header:iue,new:"Ny Uppgift",create_header:oue,cancel:lue,save:cue,deadline:due,no_assignments:uue,submissions:hue,no_submissions:fue,file_received:gue,grade_placeholder:mue,feedback_placeholder:pue,submitted:xue,submitted_desc:bue,submit_button:yue,select_file_alert:vue},wue="Nuvarande Niv",jue="Elevranking",Nue="pong till nsta niv",_ue="Mina Utmrkelser",Sue="Inga utmrkelser nnu. Fortstt kmpa!",Aue="Visa alla utmrkelser",Eue="Nybrjare",Cue="Lrling",Tue="Expert",Oue="Mstare",Iue="Legend",Due={level_title:wue,student_rank:jue,points_to_next:Nue,my_badges:_ue,no_awards:Sue,view_all:Aue,rank_newbie:Eue,rank_apprentice:Cue,rank_expert:Tue,rank_master:Oue,rank_legend:Iue},Mue="Kalender",Lue="Hll koll p dina deadlines och kursstarter.",Rue="Hnder i",Pue="Ingenting inplanerat denna mnad.",zue=["Mn","Tis","Ons","Tor","Fre","Lr","Sn"],$ue={title:Mue,subtitle:Lue,events_in:Rue,no_events:Pue,days:zue},Fue="Dokumenthantering",Bue="Ladda upp fil",Uue="Klicka eller dra fil hit",Kue="Sk bland filer...",Gue="Spara fil",que="Sparar...",Vue="Inga dokument hittades.",Hue={title:Fue,upload_title:Bue,drop_text:Uue,search_placeholder:Kue,save_btn:Gue,saving:que,no_results:Vue},Wue="Kurskatalog",Xue="Hitta och anml dig till nya kurser.",Yue="Sk kurser...",Zue="Inga kurser hittades.",Que="Lrare",Jue="Start",ehe="Ej satt",the="G med i kurs",rhe="Kursen ej ppen fr anskan n",nhe={title:Wue,subtitle:Xue,search_placeholder:Yue,no_results:Zue,teacher:Que,start:Jue,not_set:ehe,join:the,closed_msg:rhe},ahe="Min Profil",she="Personuppgifter",ihe="Skerhet",ohe="Sprk",lhe="Frnamn",che="Efternamn",dhe="E-post",uhe="Telefon",hhe="ADRESSUPPGIFTER",fhe="Gatuadress",ghe="Postnr",mhe="Ort",phe="Land",xhe="Nuvarande Lsenord",bhe="Nytt Lsenord",yhe="Bekrfta Nytt Lsenord",vhe="Uppdatera Lsenord",khe="Spara ndringar",whe="Lsenorden matchar inte!",jhe="Kunde inte byta lsenord.",Nhe="Vlj ett starkt lsenord fr att skydda ditt konto.",_he="Instllningar",She="Anpassa Startsidan",Ahe="Vlj vilka noder du vill se p din versikt.",Ehe="Visa Kalender",Che="Visa Meddelanden",The="Visa Statistik",Ohe={title:ahe,details:she,security:ihe,language:ohe,firstname:lhe,lastname:che,email:dhe,phone:uhe,address_header:hhe,street:fhe,zip:ghe,city:mhe,country:phe,current_password:xhe,new_password:bhe,confirm_password:yhe,update_password:vhe,save_changes:khe,password_mismatch:whe,password_error:jhe,choose_strong_password:Nhe,settings:_he,settings_header:She,settings_desc:Ahe,show_calendar:Ehe,show_messages:Che,show_stats:The},Ihe=(t,...e)=>{let r={...t};return r.quiz=Dde,r.chat=$de,r.forum=sue,r.assignments=kue,r.gamification=Due,r.calendar=$ue,r.docs=Hue,r.catalog=nhe,r.profile=Ohe,r},Dhe={sv:{translation:Ihe(Mae)},en:{translation:xse},fr:{translation:eie},de:{translation:Pie},es:{translation:voe},ar:{translation:nle},no:{translation:Fle},da:{translation:jce},fi:{translation:ide}};jn.use(FU).use(gne).init({resources:Dhe,fallbackLng:"sv",debug:!1,interpolation:{escapeValue:!1}});/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R0.apply(this,arguments)}var Xc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xc||(Xc={}));const TD="popstate";function Mhe(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:l}=n.location;return I4("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:O1(s)}return Rhe(e,r,null,t)}function un(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function n5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Lhe(){return Math.random().toString(36).substr(2,8)}function OD(t,e){return{usr:t.state,key:t.key,idx:e}}function I4(t,e,r,n){return r===void 0&&(r=null),R0({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?im(e):e,{state:r,key:e&&e.key||n||Lhe()})}function O1(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function im(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Rhe(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Xc.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(R0({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Xc.Pop;let p=u(),b=p==null?null:p-d;d=p,c&&c({action:l,location:m.location,delta:b})}function f(p,b){l=Xc.Push;let v=I4(m.location,p,b);d=u()+1;let y=OD(v,d),w=m.createHref(v);try{o.pushState(y,"",w)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(w)}i&&c&&c({action:l,location:m.location,delta:1})}function g(p,b){l=Xc.Replace;let v=I4(m.location,p,b);d=u();let y=OD(v,d),w=m.createHref(v);o.replaceState(y,"",w),i&&c&&c({action:l,location:m.location,delta:0})}function x(p){let b=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof p=="string"?p:O1(p);return v=v.replace(/ $/,"%20"),un(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let m={get action(){return l},get location(){return t(s,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(TD,h),c=p,()=>{s.removeEventListener(TD,h),c=null}},createHref(p){return e(s,p)},createURL:x,encodeLocation(p){let b=x(p);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:g,go(p){return o.go(p)}};return m}var ID;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ID||(ID={}));function Phe(t,e,r){return r===void 0&&(r="/"),zhe(t,e,r)}function zhe(t,e,r,n){let s=typeof e=="string"?im(e):e,i=ug(s.pathname||"/",r);if(i==null)return null;let o=BU(t);$he(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Yhe(i);l=Whe(o[c],d)}return l}function BU(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(un(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=hd([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(un(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),BU(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Vhe(d,i.index),routesMeta:u})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of UU(i.path))s(i,o,c)}),e}function UU(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=UU(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function $he(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Hhe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Fhe=/^:[\w-]+$/,Bhe=3,Uhe=2,Khe=1,Ghe=10,qhe=-2,DD=t=>t==="*";function Vhe(t,e){let r=t.split("/"),n=r.length;return r.some(DD)&&(n+=qhe),e&&(n+=Uhe),r.filter(s=>!DD(s)).reduce((s,i)=>s+(Fhe.test(i)?Bhe:i===""?Khe:Ghe),n)}function Hhe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function Whe(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=D4({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:hd([i,h.pathname]),pathnameBase:tfe(hd([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=hd([i,h.pathnameBase]))}return o}function D4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Xhe(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:f,isOptional:g}=u;if(f==="*"){let m=l[h]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const x=l[h];return g&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Xhe(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),n5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Yhe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return n5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ug(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Zhe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qhe=t=>Zhe.test(t);function Jhe(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?im(t):t,i;if(r)if(Qhe(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),n5(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=MD(r.substring(1),"/"):i=MD(r,e)}else i=e;return{pathname:i,search:rfe(n),hash:nfe(s)}}function MD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function IN(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function efe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function a5(t,e){let r=efe(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function s5(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=im(t):(s=R0({},t),un(!s.pathname||!s.pathname.includes("?"),IN("?","pathname","search",s)),un(!s.pathname||!s.pathname.includes("#"),IN("#","pathname","hash",s)),un(!s.search||!s.search.includes("#"),IN("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=Jhe(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const hd=t=>t.join("/").replace(/\/\/+/g,"/"),tfe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rfe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nfe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function afe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const KU=["post","put","patch","delete"];new Set(KU);const sfe=["get",...KU];new Set(sfe);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function P0(){return P0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},P0.apply(this,arguments)}const V2=N.createContext(null),GU=N.createContext(null),hc=N.createContext(null),H2=N.createContext(null),fc=N.createContext({outlet:null,matches:[],isDataRoute:!1}),qU=N.createContext(null);function ife(t,e){let{relative:r}=e===void 0?{}:e;om()||un(!1);let{basename:n,navigator:s}=N.useContext(hc),{hash:i,pathname:o,search:l}=W2(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:hd([n,o])),s.createHref({pathname:c,search:l,hash:i})}function om(){return N.useContext(H2)!=null}function zn(){return om()||un(!1),N.useContext(H2).location}function VU(t){N.useContext(hc).static||N.useLayoutEffect(t)}function Et(){let{isDataRoute:t}=N.useContext(fc);return t?yfe():ofe()}function ofe(){om()||un(!1);let t=N.useContext(V2),{basename:e,future:r,navigator:n}=N.useContext(hc),{matches:s}=N.useContext(fc),{pathname:i}=zn(),o=JSON.stringify(a5(s,r.v7_relativeSplatPath)),l=N.useRef(!1);return VU(()=>{l.current=!0}),N.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=s5(d,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:hd([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,o,i,t])}function uh(){let{matches:t}=N.useContext(fc),e=t[t.length-1];return e?e.params:{}}function W2(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=N.useContext(hc),{matches:s}=N.useContext(fc),{pathname:i}=zn(),o=JSON.stringify(a5(s,n.v7_relativeSplatPath));return N.useMemo(()=>s5(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function lfe(t,e){return cfe(t,e)}function cfe(t,e,r,n){om()||un(!1);let{navigator:s}=N.useContext(hc),{matches:i}=N.useContext(fc),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=zn(),u;if(e){var h;let p=typeof e=="string"?im(e):e;c==="/"||(h=p.pathname)!=null&&h.startsWith(c)||un(!1),u=p}else u=d;let f=u.pathname||"/",g=f;if(c!=="/"){let p=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(p.length).join("/")}let x=Phe(t,{pathname:g}),m=gfe(x&&x.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:hd([c,s.encodeLocation?s.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:hd([c,s.encodeLocation?s.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,r,n);return e&&m?N.createElement(H2.Provider,{value:{location:P0({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Xc.Pop}},m):m}function dfe(){let t=bfe(),e=afe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),r?N.createElement("pre",{style:s},r):null,null)}const ufe=N.createElement(dfe,null);class hfe extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?N.createElement(fc.Provider,{value:this.props.routeContext},N.createElement(qU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ffe(t){let{routeContext:e,match:r,children:n}=t,s=N.useContext(V2);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(fc.Provider,{value:e},n)}function gfe(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||un(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:g}=r,x=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let g,x=!1,m=null,p=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,m=h.route.errorElement||ufe,c&&(d<0&&f===0?(vfe("route-fallback"),x=!0,p=null):d===f&&(x=!0,p=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,f+1)),v=()=>{let y;return g?y=m:x?y=p:h.route.Component?y=N.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=u,N.createElement(ffe,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:r!=null},children:y})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(hfe,{location:r.location,revalidation:r.revalidation,component:m,error:g,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var HU=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(HU||{}),WU=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(WU||{});function mfe(t){let e=N.useContext(V2);return e||un(!1),e}function pfe(t){let e=N.useContext(GU);return e||un(!1),e}function xfe(t){let e=N.useContext(fc);return e||un(!1),e}function XU(t){let e=xfe(),r=e.matches[e.matches.length-1];return r.route.id||un(!1),r.route.id}function bfe(){var t;let e=N.useContext(qU),r=pfe(),n=XU();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function yfe(){let{router:t}=mfe(HU.UseNavigateStable),e=XU(WU.UseNavigateStable),r=N.useRef(!1);return VU(()=>{r.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,P0({fromRouteId:e},i)))},[t,e])}const LD={};function vfe(t,e,r){LD[t]||(LD[t]=!0)}function kfe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Sl(t){let{to:e,replace:r,state:n,relative:s}=t;om()||un(!1);let{future:i,static:o}=N.useContext(hc),{matches:l}=N.useContext(fc),{pathname:c}=zn(),d=Et(),u=s5(e,a5(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(u);return N.useEffect(()=>d(JSON.parse(h),{replace:r,state:n,relative:s}),[d,h,s,r,n]),null}function It(t){un(!1)}function wfe(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Xc.Pop,navigator:i,static:o=!1,future:l}=t;om()&&un(!1);let c=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:c,navigator:i,static:o,future:P0({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=im(n));let{pathname:u="/",search:h="",hash:f="",state:g=null,key:x="default"}=n,m=N.useMemo(()=>{let p=ug(u,c);return p==null?null:{location:{pathname:p,search:h,hash:f,state:g,key:x},navigationType:s}},[c,u,h,f,g,x,s]);return m==null?null:N.createElement(hc.Provider,{value:d},N.createElement(H2.Provider,{children:r,value:m}))}function jfe(t){let{children:e,location:r}=t;return lfe(M4(e),r)}new Promise(()=>{});function M4(t,e){e===void 0&&(e=[]);let r=[];return N.Children.forEach(t,(n,s)=>{if(!N.isValidElement(n))return;let i=[...e,s];if(n.type===N.Fragment){r.push.apply(r,M4(n.props.children,i));return}n.type!==It&&un(!1),!n.props.index||!n.props.children||un(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=M4(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function I1(){return I1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},I1.apply(this,arguments)}function YU(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Nfe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _fe(t,e){return t.button===0&&(!e||e==="_self")&&!Nfe(t)}function L4(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function Sfe(t,e){let r=L4(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}const Afe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Efe=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Cfe="6";try{window.__reactRouterVersion=Cfe}catch{}const Tfe=N.createContext({isTransitioning:!1}),Ofe="startTransition",RD=_ee[Ofe];function Ife(t){let{basename:e,children:r,future:n,window:s}=t,i=N.useRef();i.current==null&&(i.current=Mhe({window:s,v5Compat:!0}));let o=i.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=N.useCallback(h=>{d&&RD?RD(()=>c(h)):c(h)},[c,d]);return N.useLayoutEffect(()=>o.listen(u),[o,u]),N.useEffect(()=>kfe(n),[n]),N.createElement(wfe,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const Dfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nd=N.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=YU(e,Afe),{basename:g}=N.useContext(hc),x,m=!1;if(typeof d=="string"&&Mfe.test(d)&&(x=d,Dfe))try{let y=new URL(window.location.href),w=d.startsWith("//")?new URL(y.protocol+d):new URL(d),k=ug(w.pathname,g);w.origin===y.origin&&k!=null?d=k+w.search+w.hash:m=!0}catch{}let p=ife(d,{relative:s}),b=Rfe(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function v(y){n&&n(y),y.defaultPrevented||b(y)}return N.createElement("a",I1({},f,{href:x||p,onClick:m||i?n:v,ref:r,target:c}))}),lm=N.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:u}=e,h=YU(e,Efe),f=W2(c,{relative:h.relative}),g=zn(),x=N.useContext(GU),{navigator:m,basename:p}=N.useContext(hc),b=x!=null&&Pfe(f)&&d===!0,v=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=g.pathname,w=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(y=y.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&p&&(w=ug(w,p)||w);const k=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let j=y===v||!o&&y.startsWith(v)&&y.charAt(k)==="/",_=w!=null&&(w===v||!o&&w.startsWith(v)&&w.charAt(v.length)==="/"),S={isActive:j,isPending:_,isTransitioning:b},A=j?n:void 0,T;typeof i=="function"?T=i(S):T=[i,j?"active":null,_?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let E=typeof l=="function"?l(S):l;return N.createElement(Nd,I1({},h,{"aria-current":A,className:T,ref:r,style:E,to:c,viewTransition:d}),typeof u=="function"?u(S):u)});var R4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(R4||(R4={}));var PD;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(PD||(PD={}));function Lfe(t){let e=N.useContext(V2);return e||un(!1),e}function Rfe(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Et(),d=zn(),u=W2(t,{relative:o});return N.useCallback(h=>{if(_fe(h,r)){h.preventDefault();let f=n!==void 0?n:O1(d)===O1(u);c(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,s,r,t,i,o,l])}function db(t){let e=N.useRef(L4(t)),r=N.useRef(!1),n=zn(),s=N.useMemo(()=>Sfe(n.search,r.current?null:e.current),[n.search]),i=Et(),o=N.useCallback((l,c)=>{const d=L4(typeof l=="function"?l(s):l);r.current=!0,i("?"+d,c)},[i,s]);return[s,o]}function Pfe(t,e){e===void 0&&(e={});let r=N.useContext(Tfe);r==null&&un(!1);let{basename:n}=Lfe(R4.useViewTransitionState),s=W2(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=ug(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=ug(r.nextLocation.pathname,n)||r.nextLocation.pathname;return D4(s.pathname,o)!=null||D4(s.pathname,i)!=null}const ks="/api",X2=()=>{const t=window.location.hostname,e=localStorage.getItem("force_tenant");if(e==="public")return null;if(e)return e;if(t.endsWith(".localhost")&&t!=="localhost")return t.split(".")[0];if(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(t)||t.includes("ngrok")||t.includes("loca.lt")||t.includes("trycloudflare.com"))return null;const r=t.split(".");if(r.length>2){const n=r[0];return["www","api","eduflexlms"].includes(n)?null:n}return null},ep=(t="application/json")=>{const e=localStorage.getItem("token"),r={};e&&e!=="null"&&e!=="undefined"&&(r.Authorization=`Bearer ${e}`);const n=X2();return n&&(r["X-Tenant-ID"]=n),t&&(r["Content-Type"]=t),r},tp=async t=>{if(localStorage.getItem("debug_api")&&console.log("[API DEBUG]",t.status,t.url),!t.ok){if(t.status===402)throw window.dispatchEvent(new Event("license-lock")),new Error("LICENSE_REQUIRED");if(t.status===401)throw t.url.includes("/api/")&&!t.url.includes("/auth/login")&&(console.warn("[API] Unauthorised (401). Signalling logout."),localStorage.setItem("eduflex_logout_signal",Date.now().toString()),window.dispatchEvent(new Event("session-expired"))),new Error("UNAUTHORIZED");let r="";try{const s=await t.clone().text();try{const i=JSON.parse(s);r=i&&i.message?i.message:JSON.stringify(i)}catch{r=s}}catch(n){console.error("[API] Failed to read error body",n)}throw console.error("[API ERROR]",t.status,r.substring(0,200)),new Error(r||`HTTP Error: ${t.status}`)}if(t.status===204)return null;const e=t.headers.get("content-type");return e&&e.includes("application/json")?t.json():t.text()},O={get:t=>fetch(`${ks}${t}`,{headers:ep()}).then(tp),post:(t,e)=>{const r=e instanceof FormData;return fetch(`${ks}${t}`,{method:"POST",headers:ep(r?null:"application/json"),body:r?e:JSON.stringify(e)}).then(tp)},put:(t,e)=>{const r=e instanceof FormData;return fetch(`${ks}${t}`,{method:"PUT",headers:ep(r?null:"application/json"),body:r?e:JSON.stringify(e)}).then(tp)},delete:t=>fetch(`${ks}${t}`,{method:"DELETE",headers:ep()}).then(tp),patch:(t,e)=>{const r=e instanceof FormData;return fetch(`${ks}${t}`,{method:"PATCH",headers:ep(r?null:"application/json"),body:r?e:JSON.stringify(e)}).then(tp)},auth:{login:t=>O.post("/auth/login",t),register:t=>O.post("/auth/register",t)},search:{global:t=>O.get(`/search/global?q=${encodeURIComponent(t)}`)},modules:{getAll:()=>O.get("/modules"),toggle:(t,e)=>O.put(`/modules/${t}/toggle`,{active:e}),init:()=>O.post("/modules/init")},forum:{getCategories:t=>O.get(`/forum/course/${t}/categories`),createCategory:(t,e)=>O.post(`/forum/course/${t}/categories`,e),getThreads:(t,e=0,r=10)=>O.get(`/forum/category/${t}/threads?page=${e}&size=${r}`),createThread:(t,e,r,n)=>O.post(`/forum/category/${t}/thread`,{userId:e,title:r,content:n}),reply:(t,e,r)=>O.post(`/forum/thread/${t}/reply`,{userId:e,content:r}),deleteThread:t=>O.delete(`/forum/thread/${t}`),deletePost:t=>O.delete(`/forum/post/${t}`),toggleLockThread:(t,e)=>O.put(`/forum/thread/${t}/lock`,{locked:e})},analytics:{getOverview:()=>O.get("/analytics/overview"),getStudentProgress:t=>O.get(`/analytics/student/${t}`),getActivityTrend:t=>O.get(`/analytics/activity-trend?range=${t||"30d"}`),getCoursePerformance:()=>O.get("/analytics/course-performance"),getAtRiskStudents:()=>O.get("/analytics/at-risk-students"),getAtRiskAiSummary:t=>O.get(`/analytics/at-risk/${t}/ai-summary`),getHeatmap:t=>O.get(`/analytics/heatmap${t?`?userId=${t}`:""}`),getDropOff:t=>O.get(`/analytics/drop-off/${t}`),predictive:{getHighRisk:()=>O.get("/analytics/predictive/high-risk"),getHighRiskForMentor:t=>O.get(`/analytics/predictive/mentor/${t}/high-risk`),analyzeStudent:t=>O.post(`/analytics/predictive/analyze/${t}`),analyzeAll:()=>O.post("/analytics/predictive/analyze-all"),getPrincipalCoach:()=>O.get("/analytics/predictive/coach/principal"),getMentorCoach:t=>O.get(`/analytics/predictive/coach/mentor/${t}`)}},skolverket:{getCourses:()=>O.get("/skolverket/courses"),search:t=>O.get(`/skolverket/courses/search?q=${t}`),getBySubject:t=>O.get(`/skolverket/courses/subject/${t}`),getSubjects:()=>O.get("/skolverket/subjects"),getStats:()=>O.get("/skolverket/stats"),getCriteria:t=>O.get(`/skolverket/courses/${t}/criteria`),updateDetails:(t,e)=>O.put(`/skolverket/courses/${t}/details`,e),saveCriteria:(t,e)=>O.post(`/skolverket/courses/${t}/criteria`,e)},adaptiveLearning:{getMyRecommendations:()=>O.get("/adaptive-learning/recommendations"),markAsViewed:t=>O.put(`/adaptive-learning/recommendations/${t}/view`),triggerAnalysis:()=>O.post("/adaptive-learning/trigger")},messages:{getInbox:()=>O.get("/messages/inbox"),getFolder:t=>O.get(`/messages/folder/${t}`),getSent:()=>O.get("/messages/sent"),getFolders:()=>O.get("/messages/folders"),createFolder:t=>O.post("/messages/folders",{name:t}),moveMessage:(t,e)=>O.put(`/messages/${t}/move`,{folderId:e}),getUnreadCount:()=>O.get("/messages/unread"),markAsRead:t=>O.put(`/messages/${t}/read`),getThread:t=>O.get(`/messages/thread/${t}`),send:t=>O.post("/messages/send",t),getRecentContacts:t=>O.get(`/messages/contacts/${t}`).catch(()=>[]),getContacts:()=>O.get("/messages/contacts"),bulkMarkAsRead:t=>O.put("/messages/bulk/read",{ids:t}),markAllAsRead:t=>O.put(`/messages/read-all${t?`?folder=${t}`:""}`),bulkDelete:t=>O.post("/messages/bulk/delete",{ids:t})},tenants:{getAll:()=>O.get("/tenants"),create:t=>O.post("/tenants",t),update:(t,e)=>O.put(`/tenants/${t}`,e),delete:t=>O.delete(`/tenants/${t}`),initSchema:t=>O.post(`/tenants/${t}/init-schema`)},roles:{getAll:()=>O.get("/roles"),getPermissions:()=>O.get("/roles/permissions"),create:t=>O.post("/roles",t),update:(t,e)=>O.put(`/roles/${t}`,e),delete:t=>O.delete(`/roles/${t}`)},connections:{request:t=>O.post(`/connections/request/${t}`),accept:t=>O.post(`/connections/accept/${t}`),reject:t=>O.post(`/connections/reject/${t}`),getRequests:()=>O.get("/connections/requests"),getStatus:t=>O.get(`/connections/status/${t}`),remove:t=>O.delete(`/connections/${t}`),block:t=>O.post(`/connections/block/${t}`),unblock:t=>O.post(`/connections/unblock/${t}`)},users:{getAll:(t=0,e=20)=>O.get(`/users?page=${t}&size=${e}`),getRelated:()=>O.get("/users/related"),search:t=>O.get(`/users/search?query=${encodeURIComponent(t)}`),getById:t=>O.get(`/users/${t}?t=${new Date().getTime()}`),register:t=>O.post("/users/register",t),generateUsernames:t=>O.post("/users/generate-usernames",t),delete:t=>O.delete(`/users/${t}`),update:(t,e)=>O.put(`/users/${t}`,e),exportData:()=>O.get("/users/me/export"),ping:()=>O.post("/users/ping")},courses:{getAll:()=>O.get("/courses"),getOne:t=>O.get(`/courses/${t}`),getMyCourses:t=>O.get(`/courses/student/${t}`),create:(t,e)=>O.post("/courses",{...t,teacherId:e||1}),enroll:(t,e)=>O.post(`/courses/${t}/enroll/${e}`),delete:t=>O.delete(`/courses/${t}`),update:(t,e)=>O.put(`/courses/${t}`,e),apply:(t,e)=>O.post(`/courses/${t}/apply/${e}`),getApplications:t=>O.get(`/courses/applications/teacher/${t}`),handleApplication:(t,e)=>O.post(`/courses/applications/${t}/${e}`),checkCompletion:(t,e)=>O.get(`/courses/${t}/check-completion/${e}`),claimCertificate:(t,e)=>O.post(`/courses/${t}/claim-certificate/${e}`),setResult:(t,e,r)=>O.post(`/courses/${t}/result/${e}`,{status:r}),getResult:(t,e)=>O.get(`/courses/${t}/result/${e}`),getMyResults:t=>O.get(`/courses/results/student/${t}`),getOptions:(t,e)=>O.get(`/courses/options?userId=${t}&role=${e}`)},shop:{getItems:()=>O.get("/edugame/shop/items"),buyItem:t=>O.post(`/edugame/shop/buy/${t}`,{}),equipItem:t=>O.post(`/edugame/shop/equip/${t}`,{}),unequipItem:t=>O.post(`/edugame/shop/unequip/${t}`,{}),getInventory:()=>O.get("/edugame/shop/inventory")},lessons:{getByCourse:t=>O.get(`/courses/${t}/materials`),create:(t,e,r)=>O.post(`/courses/${t}/materials?userId=${e}`,r),createGlobal:(t,e)=>O.post(`/lessons/create?userId=${t}`,e),getMy:t=>O.get(`/lessons/my?userId=${t}`),getOne:t=>O.get(`/courses/materials/${t}`),update:(t,e)=>O.put(`/courses/materials/${t}`,e),delete:t=>O.delete(`/courses/materials/${t}`)},documents:{getAll:()=>O.get("/documents/all"),upload:(t,e,r)=>new Promise((n,s)=>{const i=new XMLHttpRequest;i.open("POST",`${ks}/documents/user/${t}`);const o=localStorage.getItem("token");o&&i.setRequestHeader("Authorization",`Bearer ${o}`);const l=X2();l&&i.setRequestHeader("X-Tenant-ID",l),r&&(i.upload.onprogress=c=>{if(c.lengthComputable){const d=Math.round(c.loaded/c.total*100);r(d)}}),i.onload=()=>{if(i.status>=200&&i.status<300)try{n(JSON.parse(i.responseText))}catch{n(i.responseText)}else s(new Error(i.statusText||"Upload failed"))},i.onerror=()=>s(new Error("Network error")),i.send(e)}),delete:t=>O.delete(`/documents/${t}`),getUserDocs:t=>O.get(`/documents/user/${t}`),getFolderDocs:(t,e)=>O.get(`/documents/folder/${t}?userId=${e}`),getRootDocs:t=>O.get(`/documents/user/${t}/root`),share:(t,e)=>O.post(`/documents/${t}/share?userId=${e}`),getUsage:t=>O.get(`/documents/usage/${t}`),getAdminStats:()=>O.get("/admin/storage-stats"),getMerits:t=>O.get(`/documents/merits/${t}`),getSystemDocs:()=>O.get("/documents/system"),getConsolidatedGradesUrl:t=>`${ks}/documents/grades/consolidated/${t}`},folders:{create:(t,e,r)=>O.post(`/folders/user/${t}`,{name:e,parentId:r}),getRoot:t=>O.get(`/folders/user/${t}/root`),getContent:(t,e)=>O.get(`/folders/${t}/content?userId=${e}`),delete:t=>O.delete(`/folders/${t}`),rename:(t,e)=>O.put(`/folders/${t}/rename`,{name:e})},shares:{create:(t,e,r)=>O.post(`/shares/file/${t}?sharedById=${e}`,r),createPublicLink:(t,e,r)=>O.post(`/shares/file/${t}/public?sharedById=${e}${r?`&expiresAt=${r}`:""}`),getTargetShares:(t,e)=>O.get(`/shares/target/${t}/${e}`),revoke:t=>O.delete(`/shares/${t}`)},system:{getModules:()=>O.get("/modules"),updateSetting:(t,e)=>O.put(`/settings/${t}`,{value:e}),getSettings:()=>O.get("/settings"),checkLicense:()=>O.get("/system/license/status"),activateLicense:t=>O.post("/system/license/activate",{key:t}),healthCheck:()=>O.get("/system/health")},onlyoffice:{checkHealth:()=>O.get("/onlyoffice/health")},admin:{listBackups:()=>O.get("/admin/backups"),getBackupStatus:()=>O.get("/admin/backups/status"),createBackup:()=>O.post("/admin/backups/create"),restoreBackup:t=>O.post(`/admin/backups/restore/${t}`),deleteBackup:t=>O.delete(`/admin/backups/${t}`),downloadBackup:t=>`${ks}/admin/backups/download/${t}`,getDatabaseConnections:()=>O.get("/admin/database/connections"),switchDatabase:(t,e)=>O.post(`/admin/database/switch/${t}`,{adminPassword:e}),addDatabase:t=>O.post("/admin/database/add",t),importUsers:t=>O.post("/admin/import/users",t),getAuditLogs:(t={})=>{const e=new URLSearchParams;return t.user&&e.set("user",t.user),t.action&&e.set("action",t.action),t.entity&&e.set("entity",t.entity),O.get(`/admin/audit?${e}`)},getAuditLog:t=>O.get(`/admin/audit/${t}`),guardians:{getAll:()=>O.get("/admin/guardians"),getDetails:t=>O.get(`/admin/guardians/${t}/details`),link:(t,e)=>O.post(`/admin/guardians/${t}/link/${e}`),unlink:t=>O.delete(`/admin/guardians/links/${t}`),searchStudents:t=>O.get(`/users/search?role=STUDENT&query=${t}`)}},license:{getStatus:()=>O.get("/system/license/status"),activate:t=>O.post("/system/license/activate",{key:t})},settings:{getAll:()=>O.get("/settings").then(t=>Array.isArray(t)?t.reduce((e,r)=>(e[r.key]=r.value,e),{}):t),update:(t,e)=>O.put(`/settings/${t}`,{value:e})},notifications:{getUserNotifs:t=>O.get(`/notifications/user/${t}`),markRead:t=>O.put(`/notifications/${t}/read`),getUnreadCount:t=>O.get(`/notifications/user/${t}/unread-count`),markAllAsRead:t=>O.put(`/notifications/user/${t}/mark-all-read`)},assignments:{getByCourse:t=>O.get(`/courses/${t}/assignments`),getOne:t=>O.get(`/assignments/${t}`),create:(t,e,r)=>O.post(`/courses/${t}/assignments?userId=${e}`,r),createGlobal:(t,e)=>O.post(`/assignments/create?userId=${t}`,e),update:(t,e)=>O.put(`/assignments/${t}`,e),delete:t=>O.delete(`/assignments/${t}`),getMy:t=>O.get(`/assignments/my?userId=${t}`),submit:(t,e,r)=>O.post(`/assignments/${t}/submit/${e}`,r),getSubmissions:t=>O.get(`/assignments/${t}/submissions`),getMySubmission:(t,e)=>O.get(`/assignments/${t}/my-submission/${e}`),grade:(t,e,r)=>O.post(`/submissions/${t}/grade?grade=${e}&feedback=${r||""}`),addAttachmentFile:(t,e)=>O.post(`/assignments/${t}/attachments/file`,e),addAttachmentLink:(t,e)=>O.post(`/assignments/${t}/attachments/link`,e),removeAttachment:(t,e)=>O.delete(`/assignments/${t}/attachments/${e}`)},events:{getAll:()=>O.get("/events"),getDashboardSummary:()=>O.get("/events/dashboard-summary"),getByCourse:t=>O.get(`/events/course/${t}`),create:t=>O.post("/events",t)},attendance:{getByEvent:t=>O.get(`/attendance/event/${t}`),mark:(t,e)=>O.post(`/attendance/event/${t}/mark`,e)},elevhalsa:{getMetrics:()=>O.get("/elevhalsa/metrics"),getRisks:()=>O.get("/elevhalsa/risks"),getCases:()=>O.get("/elevhalsa/cases"),createCase:t=>O.post("/elevhalsa/cases",t),getTemplates:()=>O.get("/elevhalsa/surveys/templates"),createTemplate:t=>O.post("/elevhalsa/surveys/templates",t),updateTemplate:(t,e)=>O.put(`/elevhalsa/surveys/templates/${t}`,e),deleteTemplate:t=>O.delete(`/elevhalsa/surveys/templates/${t}`),distribute:t=>O.post("/elevhalsa/surveys/distribute",t),getDistributions:()=>O.get("/elevhalsa/surveys/distributions"),closeDistribution:t=>O.post(`/elevhalsa/surveys/distributions/${t}/close`),getMyPendingSurveys:()=>O.get("/elevhalsa/surveys/my-pending"),getSurveyDetails:t=>O.get(`/elevhalsa/surveys/distributions/${t}/details`),submitSurvey:(t,e)=>O.post(`/elevhalsa/surveys/distributions/${t}/submit`,e),getSurveyResults:t=>O.get(`/elevhalsa/surveys/distributions/${t}/results`),getSurveyRoles:()=>O.get("/elevhalsa/surveys/roles"),getWellbeingDrilldown:()=>O.get("/elevhalsa/wellbeing/drilldown")},sickLeave:{report:t=>O.post("/sick-leave/report",t),cancel:t=>O.delete(`/sick-leave/${t}`),getMy:()=>O.get("/sick-leave/my"),getActive:()=>O.get("/sick-leave/active"),getToday:()=>O.get("/sick-leave/today")},pdfTemplates:{getAll:()=>O.get("/pdf-templates"),get:t=>O.get(`/pdf-templates/${t}`),getActive:t=>O.get(`/pdf-templates/active/${t}`),update:(t,e)=>O.put(`/pdf-templates/${t}`,e),uploadLogo:(t,e)=>{const r=new FormData;return r.append("file",e),O.post(`/pdf-templates/${t}/logo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadBackground:(t,e)=>{const r=new FormData;return r.append("file",e),O.post(`/pdf-templates/${t}/background`,r,{headers:{"Content-Type":"multipart/form-data"}})},remove:t=>O.delete(`/pdf-templates/${t}`)},quiz:{getByCourse:t=>O.get(`/quizzes/course/${t}`),create:(t,e,r)=>O.post(`/quizzes/course/${t}?userId=${e}`,r),createGlobal:(t,e)=>O.post(`/quizzes/create?userId=${t}`,e),getMy:t=>O.get(`/quizzes/my?userId=${t}`),update:(t,e)=>O.put(`/quizzes/${t}`,e),submit:(t,e)=>O.post(`/quizzes/${t}/submit`,e),delete:t=>O.delete(`/quizzes/${t}`),generate:t=>O.post("/quizzes/generate",t)},questionBank:{getMy:t=>O.get(`/question-bank/my?userId=${t}`),add:(t,e)=>O.post(`/question-bank/add?userId=${t}`,e),import:(t,e)=>O.post(`/question-bank/import?userId=${t}`,e),getCategories:t=>O.get(`/question-bank/categories?userId=${t}`),delete:t=>O.delete(`/question-bank/${t}`)},scorm:{upload:(t,e)=>O.post(`/scorm/upload/${t}`,e),getPackages:t=>O.get(`/scorm/course/${t}`),getByCourse:t=>O.get(`/scorm/course/${t}`),getOne:t=>O.get(`/scorm/${t}`),update:(t,e)=>O.put(`/scorm/${t}`,e),delete:t=>O.delete(`/scorm/${t}`)},cmi5:{upload:(t,e)=>O.post(`/cmi5/upload/${t}`,e),getPackages:t=>O.get(`/cmi5/course/${t}`),getByCourse:t=>O.get(`/cmi5/course/${t}`),getOne:t=>O.get(`/cmi5/${t}`),update:(t,e)=>O.put(`/cmi5/${t}`,e),delete:t=>O.delete(`/cmi5/${t}`)},teacher:{getCourseAnalytics:t=>O.get(`/teacher/analytics/course/${t}`)},mentors:{getClassOverview:()=>O.get("/mentors/class-overview"),getMyClassPupils:()=>O.get("/mentors/my-class/pupils"),getMyStudents:()=>O.get("/mentors/my-students"),getAssignments:()=>O.get("/mentors/assignments")},activity:{log:t=>O.post("/activity/log",t),getCourseLogs:t=>O.get(`/activity/course/${t}`),getStudentLogs:(t,e)=>O.get(`/activity/course/${t}/student/${e}`),getGlobalStudentLogs:t=>O.get(`/activity/student/${t}`)},logs:{getFiles:()=>O.get("/logs/files"),getContent:(t,e)=>O.get(`/logs/content?filename=${t||""}&lines=${e||100}`),reportError:t=>O.post("/logs/client",t)},branding:{get:(t="default")=>O.get(`/branding?organizationKey=${t}`),getAll:()=>O.get("/branding/all"),update:(t,e="default")=>O.put(`/branding?organizationKey=${e}`,t),uploadLogo:(t,e="default")=>O.post(`/branding/logo?organizationKey=${e}`,t),uploadFavicon:(t,e="default")=>O.post(`/branding/favicon?organizationKey=${e}`,t),uploadLoginBackground:(t,e="default")=>O.post(`/branding/login-background?organizationKey=${e}`,t),reset:(t="default")=>O.post(`/branding/reset?organizationKey=${t}`),checkAccess:()=>O.get("/branding/access")},gamification:{getConfig:()=>O.get("/gamification/config/system"),updateConfig:t=>O.put("/gamification/config/system",t),getDailyChallenges:t=>O.get(`/gamification/challenges/daily/${t}`),claimChallenge:t=>O.post(`/gamification/challenges/${t}/claim`),getStreak:t=>O.get(`/gamification/streak/login/${t}`),getMyStreak:()=>O.get("/gamification/streak"),getMyAchievements:()=>O.get("/gamification/achievements/my"),getQuests:(t="daily")=>O.get(`/edugame/quests/${t}`),social:{getFriends:()=>O.get("/edugame/social/friends"),sendRequest:t=>O.post(`/edugame/social/request/${t}`,{}),getPendingRequests:()=>O.get("/edugame/social/requests/pending"),acceptRequest:t=>O.post(`/edugame/social/request/${t}/accept`,{})}},evaluations:{getMyActive:()=>O.get("/evaluations/my-active"),submit:(t,e)=>O.post(`/evaluations/instance/${t}/submit`,e)},support:{createTicket:t=>O.post("/support/tickets",t),getMyTickets:t=>O.get(`/support/tickets/my?userId=${t}`),getAllTickets:()=>O.get("/support/tickets"),updateStatus:(t,e)=>O.patch(`/support/tickets/${t}/status?status=${e}`),respond:(t,e,r)=>O.post(`/support/tickets/${t}/respond?response=${encodeURIComponent(e)}&severity=${r}`),getWellbeingRequests:()=>O.get("/wellbeing/requests/my"),getWellbeingInbox:()=>O.get("/wellbeing/requests/inbox"),getWellbeingRequest:t=>O.get(`/wellbeing/requests/${t}`),updateWellbeingStatus:(t,e)=>O.patch(`/wellbeing/requests/${t}/status`,{status:e}),getWellbeingMessages:t=>O.get(`/wellbeing/requests/${t}/messages`),sendWellbeingMessage:(t,e)=>O.post(`/wellbeing/requests/${t}/messages`,{content:e})},lti:{getAll:()=>O.get("/lti/platforms"),save:t=>O.post("/lti/platforms",t),delete:t=>O.delete(`/lti/platforms/${t}`)},ai:{generatePractice:t=>O.post("/ai/quiz/practice/generate",t),status:()=>O.get("/ai/quiz/status"),generateFromText:t=>O.post("/ai/quiz/generate-from-text",t),save:t=>O.post("/ai/quiz/save",t),completePractice:t=>O.post("/ai/quiz/practice/complete",t),tutor:{chat:(t,e)=>O.post("/ai-tutor/chat",{courseId:t,question:e}),ingest:(t,e)=>O.post("/ai-tutor/ingest",{courseId:t,documentId:e}),ingestCourse:t=>O.post("/ai-tutor/ingest-course",{courseId:t})},resources:{generate:(t,e,r,n)=>{const s=new URLSearchParams({userId:t.toString(),type:e,prompt:r});return n&&s.append("context",n),O.post(`/ai/resources/generate?${s}`)}}},resources:{getMy:(t,e)=>{const r=new URLSearchParams({userId:t.toString()});return e&&r.append("type",e),O.get(`/resources/my?${r}`)},getCommunity:()=>O.get("/resources/community"),getOne:t=>O.get(`/resources/${t}`),create:(t,e)=>O.post(`/resources?userId=${t}`,e),update:(t,e)=>O.put(`/resources/${t}`,e),delete:t=>O.delete(`/resources/${t}`),updateVisibility:(t,e)=>O.patch(`/resources/${t}/visibility?visibility=${e}`)},community:{browse:(t={})=>{const e=new URLSearchParams;return t.subject&&e.set("subject",t.subject),t.type&&e.set("type",t.type),t.sort&&e.set("sort",t.sort),t.page!==void 0&&e.set("page",t.page),t.size&&e.set("size",t.size),O.get(`/community/browse?${e}`)},search:(t,e=0,r=20)=>O.get(`/community/search?q=${encodeURIComponent(t)}&page=${e}&size=${r}`),getSubjects:()=>O.get("/community/subjects"),getItem:t=>O.get(`/community/items/${t}`),delete:t=>O.delete(`/community/items/${t}`),update:(t,e)=>O.put(`/community/items/${t}`,e),publishQuiz:(t,e)=>O.post(`/community/publish/quiz/${t}`,e),publishAssignment:(t,e)=>O.post(`/community/publish/assignment/${t}`,e),publishLesson:(t,e)=>O.post(`/community/publish/lesson/${t}`,e),install:(t,e=null)=>O.post(`/community/items/${t}/install${e?`?courseId=${e}`:""}`),rate:(t,e,r)=>O.post(`/community/items/${t}/rate`,{rating:e,comment:r}),getMyPublished:()=>O.get("/community/my-published"),getAuthorProfile:t=>O.get(`/community/authors/${t}`),getLeaderboard:()=>O.get("/community/leaderboard"),admin:{getPending:(t=0,e=20)=>O.get(`/community/admin/pending?page=${t}&size=${e}`),getPendingCount:()=>O.get("/community/admin/pending/count"),approve:t=>O.post(`/community/admin/approve/${t}`),reject:(t,e)=>O.post(`/community/admin/reject/${t}`,{reason:e})}},personalization:{getMyAnalysis:()=>O.get("/personalization/analyze"),getUserAnalysis:t=>O.get(`/personalization/analyze/${t}`)},principal:{structure:{getDepartments:()=>O.get("/admin/structure/departments"),createDepartment:t=>O.post("/admin/structure/departments",t),deleteDepartment:t=>O.delete(`/admin/structure/departments/${t}`),getPrograms:t=>O.get(`/admin/structure/programs?departmentId=${t}`),createProgram:t=>O.post("/admin/structure/programs",t),deleteProgram:t=>O.delete(`/admin/structure/programs/${t}`),getClasses:t=>O.get(`/admin/structure/classes?programId=${t}`),createClass:t=>O.post("/admin/structure/classes",t),updateClass:(t,e)=>O.put(`/admin/structure/classes/${t}`,e),deleteClass:t=>O.delete(`/admin/structure/classes/${t}`),getStudents:t=>O.get(`/admin/structure/classes/${t}/students`),addStudent:(t,e)=>O.post(`/admin/structure/classes/${t}/students/${e}`),removeStudent:(t,e)=>O.delete(`/admin/structure/classes/${t}/students/${e}`),getTeachers:t=>O.get(`/admin/structure/classes/${t}/teachers`),addTeacher:(t,e)=>O.post(`/admin/structure/classes/${t}/teachers/${e}`),removeTeacher:(t,e)=>O.delete(`/admin/structure/classes/${t}/teachers/${e}`)},governance:{getTerms:()=>O.get("/admin/governance/terms"),createTerm:t=>O.post("/admin/governance/terms",t),lockTerm:(t,e)=>O.patch(`/admin/governance/terms/${t}/lock?locked=${e}`),getPolicies:()=>O.get("/admin/governance/policies"),createPolicy:t=>O.post("/admin/governance/policies",t),acceptPolicy:t=>O.post(`/admin/governance/policies/${t}/accept`),checkPolicy:t=>O.get(`/admin/governance/policies/${t}/check`)},dashboard:{getMetrics:()=>O.get("/principal/dashboard/metrics")},quality:{getIncidents:()=>O.get("/principal/incidents"),createIncident:t=>O.post("/principal/incidents",t),updateIncident:(t,e)=>O.put(`/principal/incidents/${t}`,e),getIncident:t=>O.get(`/principal/incidents/${t}`),recordObservation:t=>O.post("/admin/quality/observations",t),getObservationsByTeacher:t=>O.get(`/admin/quality/observations/teacher/${t}`),getGoals:()=>O.get("/quality/goals"),createGoal:t=>O.post("/quality/goals",t),calculateIndicators:t=>O.post(`/quality/goals/${t}/calculate`)},staffing:{getSickLeave:()=>O.get("/principal/staffing/sick-leave"),reportSickLeave:t=>O.post("/principal/staffing/sick-leave",t),getSubstitutes:()=>O.get("/principal/staffing/substitutes"),bookSubstitute:t=>O.post("/principal/staffing/substitutes/book",t)},reports:{getAll:()=>O.get("/principal/reports"),generate:t=>O.post(`/principal/reports/generate?type=${t}`),download:t=>`${ks}/principal/reports/${t}/download`}},guardian:{getChildren:()=>O.get("/guardian/children"),getDashboard:t=>O.get(`/guardian/dashboard/${t}`),getAiSummary:t=>O.get(`/guardian/dashboard/${t}/ai-summary`)}},wo=t=>{if(!t)return null;let e=t;const r=window.location.origin;return e.includes("minio:9000")&&(e=e.replace(/http:\/\/minio:9000/g,r+"/api/files")),e.includes("/api/storage/")&&(e=e.replace("/api/storage/","/api/files/")),e.includes("/uploads/")&&(e=e.replace("/uploads/","/api/files/")),e.startsWith("/")?`${r}${e}`:e.includes(":9000")?e.replace(/^http:\/\/[^/]+:9000/g,r+"/api/files"):e},i5=Object.freeze(Object.defineProperty({__proto__:null,API_BASE:ks,api:O,getSafeUrl:wo,getTenantFromUrl:X2},Symbol.toStringTag,{value:"Module"})),ZU=N.createContext({currentUser:null,systemSettings:{},theme:"light",licenseStatus:"checking",licenseLocked:!1,login:()=>{},logout:()=>{},refreshUser:()=>{},loadSettings:()=>{},updateSystemSetting:()=>{},toggleTheme:()=>{},API_BASE:"",token:null,api:{},activeAudiobook:null,setActiveAudiobook:()=>{},isAudioPlayerMinimized:!1,setIsAudioPlayerMinimized:()=>{},activeCourseId:null,setActiveCourseId:()=>{}}),zfe=({children:t})=>{const[e,r]=N.useState(null),[n,s]=N.useState({}),[i,o]=N.useState(localStorage.getItem("theme")||"light"),[l,c]=N.useState("checking"),[d,u]=N.useState(!1),[h,f]=N.useState(localStorage.getItem("token")),[g,x]=N.useState(null),[m,p]=N.useState(!1),[b,v]=N.useState(null),y="/api";N.useEffect(()=>{const E=localStorage.getItem("user");if(E)try{const M=JSON.parse(E);r(M),M.id&&T(M.id)}catch(M){console.error("Kunde inte lsa anvndardata",M),localStorage.removeItem("user")}k(),_();const C=()=>u(!0),z=()=>{console.warn("[AppContext] Detected expired session event. Performing global logout."),A()};return window.addEventListener("license-lock",C),window.addEventListener("session-expired",z),()=>{window.removeEventListener("license-lock",C),window.removeEventListener("session-expired",z)}},[]),N.useEffect(()=>{i==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",i)},[i]);const w=()=>o(E=>E==="dark"?"light":"dark"),k=async()=>{try{const E=await O.settings.getAll();s(E||{}),E!=null&&E.site_name&&(document.title=E.site_name);const C=e==null?void 0:e.language,z=E==null?void 0:E.default_language;C?jn.changeLanguage(C):z?jn.changeLanguage(z):jn.changeLanguage("sv")}catch(E){console.error("Settings load failed",E)}},j=(E,C)=>{s(z=>({...z,[E]:C})),E==="site_name"&&(document.title=C)},_=async()=>{try{const E=await O.system.checkLicense();E&&E.status==="valid"?c("active"):c("locked")}catch{c("error")}},S=(E,C,z)=>{localStorage.setItem("token",C),f(C),localStorage.setItem("user",JSON.stringify(E)),z&&localStorage.setItem("force_tenant",z),r(E),k()},A=()=>{localStorage.removeItem("token"),f(null),localStorage.removeItem("user"),localStorage.removeItem("force_tenant"),r(null);const E=(n==null?void 0:n.default_language)||"sv";jn.changeLanguage(E)},T=async E=>{const C=E||(e==null?void 0:e.id);if(C)try{const z=await O.users.getById(C),M={...e||{},...z};localStorage.setItem("user",JSON.stringify(M)),r(M)}catch(z){console.error("Failed to refresh user:",z),z.message&&(z.message.includes("401")||z.message.includes("403")||z.message.includes("LICENSE"))&&(console.warn("Session invalid or license locked, logging out..."),A())}};return a.jsx(ZU.Provider,{value:{currentUser:e,login:S,logout:A,refreshUser:T,systemSettings:n,loadSettings:k,updateSystemSetting:j,theme:i,toggleTheme:w,licenseStatus:l,licenseLocked:d,API_BASE:y,token:h,api:O,activeAudiobook:g,setActiveAudiobook:x,isAudioPlayerMinimized:m,setIsAudioPlayerMinimized:p,activeCourseId:b,setActiveCourseId:v},children:t})},At=()=>{const t=N.useContext(ZU);return t===void 0&&console.error("useAppContext must be used within an AppProvider. Returning default empty context to prevent crash, but app may behave unexpectedly."),t},QU=N.createContext(),$fe=({children:t})=>{const{currentUser:e}=At(),[r,n]=N.useState([]),[s,i]=N.useState(!0),o=async(d=0)=>{var u;if(e){if(d===0&&!localStorage.getItem("token")){setTimeout(()=>o(1),300);return}try{const h=await O.modules.getAll();Array.isArray(h)?(n(h),i(!1)):(console.warn("API returned non-array for modules:",h),n([]),i(!1))}catch(h){console.error("Kunde inte hmta moduler",h),(u=h.message)!=null&&u.includes("UNAUTHORIZED")&&d<1?setTimeout(()=>o(d+1),1e3):(n([]),i(!1))}}};N.useEffect(()=>{o()},[e]);const l=ae.useCallback(d=>{if(!Array.isArray(r))return!1;const u=r.find(h=>h.moduleKey===d);return u?u.active:!1},[r]),c=ae.useMemo(()=>({modules:r,isModuleActive:l,refreshModules:o,loading:s}),[r,l,s]);return a.jsx(QU.Provider,{value:c,children:t})},oa=()=>N.useContext(QU),JU=N.createContext(),Y2=()=>{const t=N.useContext(JU);if(!t)throw new Error("useGamification must be used within GamificationProvider");return t},Ffe=({children:t})=>{const{isModuleActive:e}=oa(),[r,n]=N.useState(null),[s,i]=N.useState(!0),[o,l]=N.useState([]),[c,d]=N.useState([]);N.useEffect(()=>{if(e("GAMIFICATION")){const m=async()=>{try{const b=await O.gamification.getMyAchievements();if(b&&Array.isArray(b)){const v=b.filter(w=>w.unlocked),y=v.map(w=>w.achievementId);l(w=>{if(w.length===0&&y.length>0)return y;const k=y.filter(j=>!w.includes(j));return k.length>0&&k.forEach(j=>{const _=v.find(S=>S.achievementId===j);_&&_.achievement&&d(S=>[...S,_.achievement])}),y})}}catch(b){console.error("Polling achievements failed",b)}};m();const p=setInterval(m,6e4);return()=>clearInterval(p)}},[e]),N.useEffect(()=>{e("GAMIFICATION")?u():i(!1)},[e]);const u=ae.useCallback(async()=>{try{const m=await O.gamification.getConfig();n(m)}catch(m){console.error("Failed to fetch gamification config:",m)}finally{i(!1)}},[]),h=e("GAMIFICATION"),f=(r==null?void 0:r.enabled)!==!1,g=ae.useMemo(()=>h&&f,[h,f]),x=ae.useMemo(()=>({isEnabled:g,config:r,loading:s,refreshConfig:u,isLeaderboardsEnabled:g&&(r==null?void 0:r.leaderboardsEnabled)!==!1,isAchievementsEnabled:g&&(r==null?void 0:r.achievementsEnabled)!==!1,isStreaksEnabled:g&&(r==null?void 0:r.streaksEnabled)!==!1,isDailyChallengesEnabled:g&&(r==null?void 0:r.dailyChallengesEnabled)!==!1,isTimeBonusEnabled:g&&(r==null?void 0:r.timeBonusEnabled)!==!1,isShopEnabled:g&&(r==null?void 0:r.shopEnabled)===!0,xpMultiplierMax:(r==null?void 0:r.xpMultiplierMax)||5,achievementNotification:c.length>0?c[0]:null,dismissNotification:()=>d(m=>m.slice(1))}),[g,r,s,u,c]);return a.jsx(JU.Provider,{value:x,children:t})},eK=N.createContext(),Bfe=()=>{var t;try{const e=localStorage.getItem("user");if(!e)return!1;const r=JSON.parse(e),n=((t=r.role)==null?void 0:t.name)||r.role;return n==="ADMIN"||n==="ROLE_ADMIN"}catch{return!1}},io=()=>{const t=N.useContext(eK);if(!t)throw new Error("useBranding must be used within BrandingProvider");return t},Ufe=({children:t})=>{const[e,r]=N.useState({brandName:"EduFlex",logoUrl:null,faviconUrl:null,loginBackgroundUrl:null,customTheme:null,defaultThemeId:"default",footerText:"Powered by EduFlex",welcomeMessage:null,showPoweredBy:!0,enforceOrgTheme:!1,customEmailTemplates:!1,customCss:null}),[n,s]=N.useState(!0),[i,o]=N.useState(!1);N.useEffect(()=>{l(),c()},[]);const l=async()=>{try{const y=await O.branding.get();y&&(r(y),y.faviconUrl&&x(y.faviconUrl),y.customCss&&m(y.customCss),y.brandName&&(document.title=y.brandName))}catch(y){console.error("Failed to load branding:",y)}finally{s(!1)}},c=async()=>{if(!Bfe()){o(!1);return}try{const y=await O.branding.checkAccess();o((y==null?void 0:y.hasAccess)||!1)}catch{o(!1)}},d=async y=>{try{console.log("Updating branding with:",y);const w=await O.branding.update(y);return console.log("Backend returned branding:",w),r(w),w.faviconUrl&&x(w.faviconUrl),w.customCss&&m(w.customCss),w.brandName&&(document.title=w.brandName),w}catch(w){throw console.error("Failed to update branding:",w),w}},u=async y=>{try{const w=new FormData;w.append("file",y);const k=await O.branding.uploadLogo(w);return r(k),k}catch(w){throw console.error("Failed to upload logo:",w),w}},h=async y=>{try{const w=new FormData;w.append("file",y);const k=await O.branding.uploadFavicon(w);return r(k),k.faviconUrl&&x(k.faviconUrl),k}catch(w){throw console.error("Failed to upload favicon:",w),w}},f=async y=>{try{const w=new FormData;w.append("file",y);const k=await O.branding.uploadLoginBackground(w);return r(k),k}catch(w){throw console.error("Failed to upload login background:",w),w}},g=async()=>{try{const y=await O.branding.reset();return r(y),x("/vite.svg"),p(),document.title="EduFlex",y}catch(y){throw console.error("Failed to reset branding:",y),y}},x=y=>{let w=document.querySelector("link[rel~='icon']");w||(w=document.createElement("link"),w.rel="icon",document.head.appendChild(w)),w.href=y},m=y=>{const w=document.getElementById("org-custom-css");w&&w.remove();const k=document.createElement("style");k.id="org-custom-css",k.textContent=y,document.head.appendChild(k)},p=()=>{const y=document.getElementById("org-custom-css");y&&y.remove()},v={branding:e,loading:n,hasAccess:i,loadBranding:l,updateBranding:d,uploadLogo:u,uploadFavicon:h,uploadLoginBackground:f,resetBranding:g,getCustomTheme:()=>{if(!e.customTheme)return null;try{return JSON.parse(e.customTheme)}catch(y){return console.error("Failed to parse custom theme:",y),null}}};return a.jsx(eK.Provider,{value:v,children:t})},tK=N.createContext(),Dc={focus:{id:"focus",name:"EduFlex Focus",description:"Djupt fokus. Grn, lugnande och avskalad.",card:{radius:{sm:"8px",md:"12px",lg:"16px",xl:"20px","2xl":"24px","3xl":"32px",full:"9999px"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px -1px rgba(0, 0, 0, 0.02)",background:"#ffffff",backgroundDark:"#1e1f20",backdrop:"none",border:"1px solid transparent",borderDark:"1px solid #3c4043"},button:{radius:"20px",shadow:"none",hoverScale:"1.02"},page:{light:"#F8F9FA",dark:"#131314"},colors:{primary:{50:"#F0F9F4",100:"#D9F0E3",200:"#B5E0C8",300:"#8CCBA8",400:"#64B58A",500:"#3FA06D",600:"#2D8A5B",700:"#1F6D48",800:"#14452F",900:"#0E3323",950:"#061D13"}},layout:{spacing:"32px",maxWidth:"1600px",style:"floating"},effects:{useGradients:"false",useBlur:"false",useGlow:"false"}},horizon:{id:"horizon",name:"EduFlex Horizon",description:"Expansiv vy. Guld, beige och topp-navigering.",card:{radius:{sm:"12px",md:"16px",lg:"24px",xl:"32px","2xl":"40px","3xl":"48px",full:"9999px"},shadow:"0 20px 40px -4px rgba(0, 0, 0, 0.05)",background:"#ffffff",backgroundDark:"#1e1f20",backdrop:"none",border:"none",borderDark:"1px solid #3c4043"},button:{radius:"30px",shadow:"0 4px 12px rgba(255, 213, 79, 0.3)",hoverScale:"1.05"},page:{light:"linear-gradient(135deg, #fdfbf7 0%, #f4eecf 100%)",dark:"linear-gradient(135deg, #131314 0%, #1c1c1a 100%)"},colors:{primary:{50:"#FFFBE6",100:"#FFF6C6",200:"#FFEB8F",300:"#FFD54F",400:"#FFCA28",500:"#FFC107",600:"#FFA000",700:"#FF8F00",800:"#FF6F00",900:"#E65100",950:"#F57F17"}},layout:{spacing:"32px",maxWidth:"100%",style:"horizon"},effects:{useGradients:"true",useBlur:"true",useGlow:"false"}},nebula:{id:"nebula",name:"EduFlex Nebula",description:"Futuristisk glas-estetik. Lila toner med korall-accenter.",card:{radius:{sm:"12px",md:"16px",lg:"24px",xl:"32px","2xl":"40px","3xl":"48px",full:"9999px"},shadow:"0 8px 32px 0 rgba(31, 38, 135, 0.07)",background:"rgba(255, 255, 255, 0.65)",backgroundDark:"rgba(30, 31, 32, 0.70)",backdrop:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.4)",borderDark:"1px solid rgba(255, 255, 255, 0.05)"},button:{radius:"16px",shadow:"0 4px 15px rgba(255, 138, 101, 0.4)",hoverScale:"1.05"},page:{light:"linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%)",dark:"linear-gradient(to top, #09203f 0%, #537895 100%)"},colors:{primary:{50:"#FBE9E7",100:"#FFCCBC",200:"#FFAB91",300:"#FF8A65",400:"#FF7043",500:"#FF5722",600:"#F4511E",700:"#E64A19",800:"#D84315",900:"#BF360C",950:"#3E1205"}},layout:{spacing:"40px",maxWidth:"100%",style:"nebula"},effects:{useGradients:"true",useBlur:"true",useGlow:"true"}},ember:{id:"ember",name:"EduFlex Ember",description:"Energisk och avskalad. Orangea accenter p mrk bakgrund.",card:{radius:{sm:"12px",md:"16px",lg:"24px",xl:"32px","2xl":"40px","3xl":"48px",full:"9999px"},shadow:"0 4px 20px rgba(0,0,0,0.08)",background:"#ffffff",backgroundDark:"#1E1F20",backdrop:"none",border:"none",borderDark:"1px solid #333"},button:{radius:"100px",shadow:"0 4px 14px rgba(255, 87, 34, 0.4)",hoverScale:"1.05"},page:{light:"#263238",dark:"#000000"},colors:{primary:{50:"#FBE9E7",100:"#FFCCBC",200:"#FFAB91",300:"#FF8A65",400:"#FF7043",500:"#FF5722",600:"#F4511E",700:"#E64A19",800:"#D84315",900:"#BF360C",950:"#3E1205"}},layout:{spacing:"32px",maxWidth:"1800px",style:"ember"},effects:{useGradients:"false",useBlur:"false",useGlow:"false"}},voltage:{id:"voltage",name:"EduFlex Voltage",description:"Hgspnning. Syrlig lime och djup svrta.",card:{radius:{sm:"16px",md:"20px",lg:"24px",xl:"32px","2xl":"40px","3xl":"48px",full:"9999px"},shadow:"0 4px 0px rgba(0,0,0,0.1)",background:"#ffffff",backgroundDark:"#1E1E1E",backdrop:"none",border:"2px solid #E5E7EB",borderDark:"2px solid #333"},button:{radius:"16px",shadow:"4px 4px 0px rgba(0,0,0,1)",hoverScale:"1.02"},page:{light:"#C7C9CB",dark:"#000000"},colors:{primary:{50:"#F9FFD1",100:"#F1FF99",200:"#E6FF5C",300:"#DBFF1F",400:"#CCFF00",500:"#B3E600",600:"#8FB300",700:"#6B8600",800:"#4A5C00",900:"#2C3600",950:"#1A2100"}},layout:{spacing:"40px",maxWidth:"1600px",style:"voltage"},effects:{useGradients:"true",useBlur:"false",useGlow:"true"}},midnight:{id:"midnight",name:"EduFlex Midnight",description:"Fintech-inspirerad. Djupsvart med mintgrna accenter.",card:{radius:{sm:"12px",md:"16px",lg:"24px",xl:"30px","2xl":"36px","3xl":"48px",full:"9999px"},shadow:"0 8px 32px rgba(0,0,0,0.4)",background:"#1A1A1A",backgroundDark:"#1A1A1A",backdrop:"none",border:"1px solid rgba(255,255,255,0.05)",borderDark:"1px solid rgba(255,255,255,0.05)"},button:{radius:"100px",shadow:"0 4px 12px rgba(0, 220, 130, 0.2)",hoverScale:"1.05"},page:{light:"#050505",dark:"#050505"},colors:{primary:{50:"#E6FFF5",100:"#CCFFE6",200:"#99FFCC",300:"#66FFB3",400:"#33FF99",500:"#00DC82",600:"#00B36B",700:"#008A52",800:"#00613A",900:"#003822",950:"#001F12"}},layout:{spacing:"32px",maxWidth:"1600px",style:"midnight"},effects:{useGradients:"true",useBlur:"false",useGlow:"true"}},pulse:{id:"pulse",name:"EduFlex Pulse",description:"Musikspelare-inspirerad. Rd accent, runda former.",card:{radius:{sm:"16px",md:"24px",lg:"32px",xl:"40px","2xl":"48px","3xl":"60px",full:"9999px"},shadow:"0 10px 40px rgba(0,0,0,0.05)",background:"#F4F4F4",backgroundDark:"#1E1E1E",backdrop:"none",border:"none",borderDark:"none"},button:{radius:"999px",shadow:"0 4px 15px rgba(255, 45, 45, 0.3)",hoverScale:"1.05"},page:{light:"#E8E8E8",dark:"#121212"},colors:{primary:{50:"#FFEBEE",100:"#FFCDD2",200:"#EF9A9A",300:"#E57373",400:"#EF5350",500:"#FF2D2D",600:"#E53935",700:"#D32F2F",800:"#C62828",900:"#B71C1C",950:"#FF0000"}},layout:{spacing:"32px",maxWidth:"1500px",style:"pulse"},effects:{useGradients:"true",useBlur:"true",useGlow:"false"}},classic:{id:"classic",name:"EduFlex Classic",description:"Tidls standard. Ren och professionell.",card:{radius:{sm:"6px",md:"10px",lg:"14px",xl:"20px","2xl":"24px","3xl":"32px",full:"9999px"},shadow:"0 2px 10px rgba(0, 0, 0, 0.03), 0 10px 25px -5px rgba(0, 0, 0, 0.04)",background:"#ffffff",backgroundDark:"#1e1f20",backdrop:"none",border:"1px solid #f1f5f9",borderDark:"1px solid #3c4043"},button:{radius:"10px",shadow:"0 2px 4px rgba(0, 0, 0, 0.05)",hoverScale:"1.02"},page:{light:"#f9fafb",dark:"#131314"},layout:{spacing:"24px",maxWidth:"1600px",style:"standard"},effects:{useGradients:"false",useBlur:"false",useGlow:"false"}},glassmorphism:{id:"glassmorphism",name:"Glass OS",description:"Modern, transparent design med levande gradienter.",card:{radius:{sm:"12px",md:"16px",lg:"24px",xl:"32px","2xl":"40px","3xl":"48px",full:"9999px"},shadow:"0 8px 32px 0 rgba(31, 38, 135, 0.15)",background:"rgba(255, 255, 255, 0.65)",backgroundDark:"rgba(30, 31, 32, 0.65)",backdrop:"blur(16px)",border:"1px solid rgba(255, 255, 255, 0.3)",borderDark:"1px solid rgba(255, 255, 255, 0.1)"},button:{radius:"20px",shadow:"0 4px 15px rgba(0, 0, 0, 0.1)",hoverScale:"1.05"},page:{light:"linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%)",dark:"linear-gradient(to right, #0f2027, #203a43, #2c5364)"},layout:{spacing:"32px",maxWidth:"1400px"},effects:{useGradients:"true",useBlur:"true",useGlow:"true"}},soft:{id:"soft",name:"Soft UI",description:"Mjuk, minimalistisk design med fokus p innehll.",card:{radius:{sm:"8px",md:"12px",lg:"20px",xl:"28px","2xl":"36px","3xl":"48px",full:"9999px"},shadow:"0 10px 40px -10px rgba(0,0,0,0.08)",background:"#ffffff",backgroundDark:"#1e1f20",backdrop:"none",border:"none"},button:{radius:"14px",shadow:"0 4px 12px rgba(0,0,0,0.08)",hoverScale:"1.01"},page:{light:"#e0e5ec",dark:"#1e1f20"},layout:{spacing:"28px",maxWidth:"1500px"},effects:{useGradients:"false",useBlur:"false",useGlow:"false"}},brutalist:{id:"brutalist",name:"Brutalist Bold",description:"Stark kontrast och skarpa linjer.",card:{radius:{sm:"0px",md:"0px",lg:"0px",xl:"0px","2xl":"0px","3xl":"0px",full:"0px"},shadow:"4px 4px 0px 0px rgba(0,0,0,1)",background:"#ffffff",backgroundDark:"#000000",backdrop:"none",border:"2px solid #000000",borderDark:"2px solid #ffffff"},button:{radius:"0px",shadow:"3px 3px 0px 0px rgba(0,0,0,1)",hoverScale:"1.0"},page:{light:"#ffffff",dark:"#121212"},layout:{spacing:"24px",maxWidth:"1400px"},effects:{useGradients:"false",useBlur:"false",useGlow:"false"}},enterprise:{id:"enterprise",name:"Enterprise Dark",description:"Optimerad fr stora skrmar och mrkt lge.",card:{radius:{sm:"4px",md:"6px",lg:"8px",xl:"12px","2xl":"16px","3xl":"24px",full:"9999px"},shadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",background:"#ffffff",backgroundDark:"#161b22",backdrop:"none",border:"1px solid #e5e7eb",borderDark:"1px solid #30363d"},button:{radius:"6px",shadow:"none",hoverScale:"1.0"},page:{light:"#f6f8fa",dark:"#0d1117"},layout:{spacing:"16px",maxWidth:"1920px"},effects:{useGradients:"false",useBlur:"false",useGlow:"false"}}},Kfe=({children:t})=>{const{branding:e}=io(),[r,n]=N.useState("classic");N.useEffect(()=>{let l=e==null?void 0:e.designSystem;l==="professional"&&(l="classic"),l==="donezo"&&(l="focus"),l&&Dc[l]?(n(l),s(Dc[l])):s(Dc.classic)},[e]);const s=l=>{const c=document.documentElement;if(c.style.setProperty("--radius-sm",l.card.radius.sm),c.style.setProperty("--radius-md",l.card.radius.md),c.style.setProperty("--radius-lg",l.card.radius.lg),c.style.setProperty("--radius-xl",l.card.radius.xl),c.style.setProperty("--radius-2xl",l.card.radius["2xl"]),l.page?(c.style.setProperty("--app-background",l.page.light),c.style.setProperty("--app-background-dark",l.page.dark)):(c.style.setProperty("--app-background","#f9fafb"),c.style.setProperty("--app-background-dark","#131314")),l.colors&&l.colors.primary)Object.keys(l.colors.primary).forEach(d=>{c.style.setProperty(`--color - primary - ${d} `,l.colors.primary[d])});else{const d={50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"};Object.keys(d).forEach(u=>{c.style.setProperty(`--color - primary - ${u} `,d[u])})}c.style.setProperty("--radius-3xl",l.card.radius["3xl"]),c.style.setProperty("--radius-full",l.card.radius.full),c.style.setProperty("--card-shadow",l.card.shadow),c.style.setProperty("--card-shadow-dark",l.card.shadowDark||l.card.shadow),c.style.setProperty("--card-background",l.card.background),c.style.setProperty("--card-background-dark",l.card.backgroundDark),c.style.setProperty("--card-backdrop",l.card.backdrop),c.style.setProperty("--card-border",l.card.border||"none"),c.style.setProperty("--card-border-dark",l.card.borderDark||"none"),c.style.setProperty("--button-border-radius",l.button.radius),c.style.setProperty("--button-shadow",l.button.shadow),c.style.setProperty("--button-shadow-dark",l.button.shadowDark||l.button.shadow),c.style.setProperty("--button-hover-scale",l.button.hoverScale),c.style.setProperty("--layout-spacing",l.layout.spacing),c.style.setProperty("--layout-max-width",l.layout.maxWidth),c.setAttribute("data-use-gradients",l.effects.useGradients),c.setAttribute("data-use-blur",l.effects.useBlur),c.setAttribute("data-use-glow",l.effects.useGlow)},i=()=>Dc[r]||Dc.minimal,o={designSystem:r,availableDesignSystems:Object.values(Dc),currentDesignSystem:i()};return a.jsx(tK.Provider,{value:o,children:t})},Z2=()=>{const t=N.useContext(tK);if(!t)throw new Error("useDesignSystem must be used within DesignSystemProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,e)=>{const r=N.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>N.createElement("svg",{ref:u,...Gfe,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${qfe(t)}`,l].join(" "),...d},[...e.map(([h,f])=>N.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=fe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=fe("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=fe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=fe("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wfe=fe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xfe=fe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=fe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=fe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zfe=fe("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=fe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=fe("BadgeAlert",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qfe=fe("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=fe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=fe("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=fe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=fe("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=fe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=fe("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jfe=fe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ege=fe("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=fe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=fe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=fe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tge=fe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rge=fe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nge=fe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=fe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const age=fe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=fe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=fe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sge=fe("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ige=fe("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oge=fe("Component",[["path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z",key:"1kciei"}],["path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z",key:"1ome0g"}],["path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z",key:"vbupec"}],["path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z",key:"16csic"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lge=fe("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=fe("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=fe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cge=fe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=fe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=fe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=fe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dge=fe("FastForward",[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uge=fe("FileCode",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=fe("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=fe("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hge=fe("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=fe("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=fe("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=fe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fge=fe("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=fe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=fe("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=fe("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=fe("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=fe("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=fe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=fe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=fe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mge=fe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pge=fe("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=fe("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=fe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=fe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bge=fe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yge=fe("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=fe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=fe("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=fe("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kge=fe("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=fe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=fe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=fe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jge=fe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=fe("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nge=fe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=fe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=fe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=fe("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=fe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=fe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ge=fe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=fe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=fe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=fe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=fe("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=fe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=fe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sge=fe("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Age=fe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fK=fe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=fe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=fe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gK=fe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=fe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ege=fe("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=fe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=fe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=fe("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=fe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=fe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=fe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=fe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cge=fe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=fe("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=fe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=fe("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tge=fe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=fe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oge=fe("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=fe("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ige=fe("Rewind",[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dge=fe("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mge=fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lge=fe("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rge=fe("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=fe("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=fe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=fe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=fe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=fe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=fe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pge=fe("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zge=fe("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=fe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=fe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=fe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ge=fe("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=fe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=fe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=fe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=fe("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=fe("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=fe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fge=fe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=fe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bge=fe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uge=fe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=fe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=fe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=fe("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kge=fe("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=fe("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=fe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gge=fe("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qge=fe("UserSearch",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vge=fe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hge=fe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=fe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=fe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wge=fe("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xge=fe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yge=fe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=fe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=fe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=fe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bK=fe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=fe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);let vK=class extends ae.Component{constructor(r){super(r);st(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,errorId:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){try{const s={message:r.toString(),stack:n.componentStack,url:window.location.href,userAgent:navigator.userAgent};O.logs.reportError(s).then(()=>{console.log("Error reported to server")}).catch(i=>console.error("Failed to report error",i))}catch(s){console.error("Error reporting failed",s)}}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-[#151718] p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-[#1e2022] rounded-xl shadow-lg border border-gray-200 dark:border-[#3c4043] p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Dr,{className:"text-red-500",size:32})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"Ojd, ngot gick fel"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Vi har sttt p ett ovntat fel. Vrt team har automatiskt notifierats om detta. Frsk att ladda om sidan."}),a.jsxs("button",{onClick:this.handleReload,className:"w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(sn,{size:20}),"Ladda om sidan"]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-800",children:a.jsx("button",{onClick:()=>window.location.href="/",className:"text-sm text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"G till startsidan"})})]})}):this.props.children}};const Zge="modulepreload",Qge=function(t){return"/"+t},qD={},m5=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Qge(c),c in qD)return;qD[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Zge,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var kK={exports:{}},K4={};Fe.crypto&&Fe.crypto.getRandomValues?K4.randomBytes=function(t){var e=new Uint8Array(t);return Fe.crypto.getRandomValues(e),e}:K4.randomBytes=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=Math.floor(Math.random()*256);return e};var Jge=K4,VD="abcdefghijklmnopqrstuvwxyz012345",dm={string:function(t){for(var e=VD.length,r=Jge.randomBytes(t),n=[],s=0;s<t;s++)n.push(VD.substr(r[s]%e,1));return n.join("")},number:function(t){return Math.floor(Math.random()*t)},numberString:function(t){var e=(""+(t-1)).length,r=new Array(e+1).join("0");return(r+this.number(t)).slice(-e)}};(function(t){var e=dm,r={},n=!1,s=Fe.chrome&&Fe.chrome.app&&Fe.chrome.app.runtime;t.exports={attachEvent:function(o,l){typeof Fe.addEventListener<"u"?Fe.addEventListener(o,l,!1):Fe.document&&Fe.attachEvent&&(Fe.document.attachEvent("on"+o,l),Fe.attachEvent("on"+o,l))},detachEvent:function(o,l){typeof Fe.addEventListener<"u"?Fe.removeEventListener(o,l,!1):Fe.document&&Fe.detachEvent&&(Fe.document.detachEvent("on"+o,l),Fe.detachEvent("on"+o,l))},unloadAdd:function(o){if(s)return null;var l=e.string(8);return r[l]=o,n&&setTimeout(this.triggerUnloadCallbacks,0),l},unloadDel:function(o){o in r&&delete r[o]},triggerUnloadCallbacks:function(){for(var o in r)r[o](),delete r[o]}};var i=function(){n||(n=!0,t.exports.triggerUnloadCallbacks())};s||t.exports.attachEvent("unload",i)})(kK);var Md=kK.exports,eme=function(e,r){if(r=r.split(":")[0],e=+e,!e)return!1;switch(r){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0},p5={},tme=Object.prototype.hasOwnProperty,rme;function HD(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch{return null}}function WD(t){try{return encodeURIComponent(t)}catch{return null}}function nme(t){for(var e=/([^=?#&]+)=?([^&]*)/g,r={},n;n=e.exec(t);){var s=HD(n[1]),i=HD(n[2]);s===null||i===null||s in r||(r[s]=i)}return r}function ame(t,e){e=e||"";var r=[],n,s;typeof e!="string"&&(e="?");for(s in t)if(tme.call(t,s)){if(n=t[s],!n&&(n===null||n===rme||isNaN(n))&&(n=""),s=WD(s),n=WD(n),s===null||n===null)continue;r.push(s+"="+n)}return r.length?e+r.join("&"):""}p5.stringify=ame;p5.parse=nme;var wK=eme,uw=p5,sme=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,jK=/[\n\r\t]/g,ime=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,NK=/:\d+$/,ome=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,lme=/^[a-zA-Z]:/;function x5(t){return(t||"").toString().replace(sme,"")}var G4=[["#","hash"],["?","query"],function(e,r){return Lo(r.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],XD={hash:1,query:1};function _K(t){var e;typeof window<"u"?e=window:typeof Fe<"u"?e=Fe:typeof self<"u"?e=self:e={};var r=e.location||{};t=t||r;var n={},s=typeof t,i;if(t.protocol==="blob:")n=new Zo(unescape(t.pathname),{});else if(s==="string"){n=new Zo(t,{});for(i in XD)delete n[i]}else if(s==="object"){for(i in t)i in XD||(n[i]=t[i]);n.slashes===void 0&&(n.slashes=ime.test(t.href))}return n}function Lo(t){return t==="file:"||t==="ftp:"||t==="http:"||t==="https:"||t==="ws:"||t==="wss:"}function SK(t,e){t=x5(t),t=t.replace(jK,""),e=e||{};var r=ome.exec(t),n=r[1]?r[1].toLowerCase():"",s=!!r[2],i=!!r[3],o=0,l;return s?i?(l=r[2]+r[3]+r[4],o=r[2].length+r[3].length):(l=r[2]+r[4],o=r[2].length):i?(l=r[3]+r[4],o=r[3].length):l=r[4],n==="file:"?o>=2&&(l=l.slice(2)):Lo(n)?l=r[4]:n?s&&(l=l.slice(2)):o>=2&&Lo(e.protocol)&&(l=r[4]),{protocol:n,slashes:s||Lo(n),slashesCount:o,rest:l}}function cme(t,e){if(t==="")return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,s=r[n-1],i=!1,o=0;n--;)r[n]==="."?r.splice(n,1):r[n]===".."?(r.splice(n,1),o++):o&&(n===0&&(i=!0),r.splice(n,1),o--);return i&&r.unshift(""),(s==="."||s==="..")&&r.push(""),r.join("/")}function Zo(t,e,r){if(t=x5(t),t=t.replace(jK,""),!(this instanceof Zo))return new Zo(t,e,r);var n,s,i,o,l,c,d=G4.slice(),u=typeof e,h=this,f=0;for(u!=="object"&&u!=="string"&&(r=e,e=null),r&&typeof r!="function"&&(r=uw.parse),e=_K(e),s=SK(t||"",e),n=!s.protocol&&!s.slashes,h.slashes=s.slashes||n&&e.slashes,h.protocol=s.protocol||e.protocol||"",t=s.rest,(s.protocol==="file:"&&(s.slashesCount!==2||lme.test(t))||!s.slashes&&(s.protocol||s.slashesCount<2||!Lo(h.protocol)))&&(d[3]=[/(.*)/,"pathname"]);f<d.length;f++){if(o=d[f],typeof o=="function"){t=o(t,h);continue}i=o[0],c=o[1],i!==i?h[c]=t:typeof i=="string"?(l=i==="@"?t.lastIndexOf(i):t.indexOf(i),~l&&(typeof o[2]=="number"?(h[c]=t.slice(0,l),t=t.slice(l+o[2])):(h[c]=t.slice(l),t=t.slice(0,l)))):(l=i.exec(t))&&(h[c]=l[1],t=t.slice(0,l.index)),h[c]=h[c]||n&&o[3]&&e[c]||"",o[4]&&(h[c]=h[c].toLowerCase())}r&&(h.query=r(h.query)),n&&e.slashes&&h.pathname.charAt(0)!=="/"&&(h.pathname!==""||e.pathname!=="")&&(h.pathname=cme(h.pathname,e.pathname)),h.pathname.charAt(0)!=="/"&&Lo(h.protocol)&&(h.pathname="/"+h.pathname),wK(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(l=h.auth.indexOf(":"),~l?(h.username=h.auth.slice(0,l),h.username=encodeURIComponent(decodeURIComponent(h.username)),h.password=h.auth.slice(l+1),h.password=encodeURIComponent(decodeURIComponent(h.password))):h.username=encodeURIComponent(decodeURIComponent(h.auth)),h.auth=h.password?h.username+":"+h.password:h.username),h.origin=h.protocol!=="file:"&&Lo(h.protocol)&&h.host?h.protocol+"//"+h.host:"null",h.href=h.toString()}function dme(t,e,r){var n=this;switch(t){case"query":typeof e=="string"&&e.length&&(e=(r||uw.parse)(e)),n[t]=e;break;case"port":n[t]=e,wK(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="");break;case"hostname":n[t]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[t]=e,NK.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(e){var s=t==="pathname"?"/":"#";n[t]=e.charAt(0)!==s?s+e:e}else n[t]=e;break;case"username":case"password":n[t]=encodeURIComponent(e);break;case"auth":var i=e.indexOf(":");~i?(n.username=e.slice(0,i),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=e.slice(i+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<G4.length;o++){var l=G4[o];l[4]&&(n[l[1]]=n[l[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin=n.protocol!=="file:"&&Lo(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function ume(t){(!t||typeof t!="function")&&(t=uw.stringify);var e,r=this,n=r.host,s=r.protocol;s&&s.charAt(s.length-1)!==":"&&(s+=":");var i=s+(r.protocol&&r.slashes||Lo(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):r.protocol!=="file:"&&Lo(r.protocol)&&!n&&r.pathname!=="/"&&(i+="@"),(n[n.length-1]===":"||NK.test(r.hostname)&&!r.port)&&(n+=":"),i+=n+r.pathname,e=typeof r.query=="object"?t(r.query):r.query,e&&(i+=e.charAt(0)!=="?"?"?"+e:e),r.hash&&(i+=r.hash),i}Zo.prototype={set:dme,toString:ume};Zo.extractProtocol=SK;Zo.location=_K;Zo.trimLeft=x5;Zo.qs=uw;var AK=Zo,hme=AK,ji={getOrigin:function(t){if(!t)return null;var e=new hme(t);if(e.protocol==="file:")return null;var r=e.port;return r||(r=e.protocol==="https:"?"443":"80"),e.protocol+"//"+e.hostname+":"+r},isOriginEqual:function(t,e){var r=this.getOrigin(t)===this.getOrigin(e);return r},isSchemeEqual:function(t,e){return t.split(":")[0]===e.split(":")[0]},addPath:function(t,e){var r=t.split("?");return r[0]+e+(r[1]?"?"+r[1]:"")},addQuery:function(t,e){return t+(t.indexOf("?")===-1?"?"+e:"&"+e)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}},q4={exports:{}};typeof Object.create=="function"?q4.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:q4.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var vr=q4.exports,Da={};function hw(){this._listeners={}}hw.prototype.addEventListener=function(t,e){t in this._listeners||(this._listeners[t]=[]);var r=this._listeners[t];r.indexOf(e)===-1&&(r=r.concat([e])),this._listeners[t]=r};hw.prototype.removeEventListener=function(t,e){var r=this._listeners[t];if(r){var n=r.indexOf(e);if(n!==-1){r.length>1?this._listeners[t]=r.slice(0,n).concat(r.slice(n+1)):delete this._listeners[t];return}}};hw.prototype.dispatchEvent=function(){var t=arguments[0],e=t.type,r=arguments.length===1?[t]:Array.apply(null,arguments);if(this["on"+e]&&this["on"+e].apply(this,r),e in this._listeners)for(var n=this._listeners[e],s=0;s<n.length;s++)n[s].apply(this,r)};var EK=hw,fme=vr,fw=EK;function Sd(){fw.call(this)}fme(Sd,fw);Sd.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}};Sd.prototype.once=function(t,e){var r=this,n=!1;function s(){r.removeListener(t,s),n||(n=!0,e.apply(this,arguments))}this.on(t,s)};Sd.prototype.emit=function(){var t=arguments[0],e=this._listeners[t];if(e){for(var r=arguments.length,n=new Array(r-1),s=1;s<r;s++)n[s-1]=arguments[s];for(var i=0;i<e.length;i++)e[i].apply(this,n)}};Sd.prototype.on=Sd.prototype.addListener=fw.prototype.addEventListener;Sd.prototype.removeListener=fw.prototype.removeEventListener;Da.EventEmitter=Sd;var V4={exports:{}},YD=Fe.WebSocket||Fe.MozWebSocket;YD?V4.exports=function(e){return new YD(e)}:V4.exports=void 0;var gme=V4.exports,CK=Md,mme=ji,pme=vr,TK=Da.EventEmitter,OK=gme,ZD=function(){};function gc(t,e,r){if(!gc.enabled())throw new Error("Transport created when disabled");TK.call(this);var n=this,s=mme.addPath(t,"/websocket");s.slice(0,5)==="https"?s="wss"+s.slice(5):s="ws"+s.slice(4),this.url=s,this.ws=new OK(this.url,[],r),this.ws.onmessage=function(i){ZD("message event",i.data),n.emit("message",i.data)},this.unloadRef=CK.unloadAdd(function(){n.ws.close()}),this.ws.onclose=function(i){ZD("close event",i.code,i.reason),n.emit("close",i.code,i.reason),n._cleanup()},this.ws.onerror=function(i){n.emit("close",1006,"WebSocket connection broken"),n._cleanup()}}pme(gc,TK);gc.prototype.send=function(t){var e="["+t+"]";this.ws.send(e)};gc.prototype.close=function(){var t=this.ws;this._cleanup(),t&&t.close()};gc.prototype._cleanup=function(){var t=this.ws;t&&(t.onmessage=t.onclose=t.onerror=null),CK.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};gc.enabled=function(){return!!OK};gc.transportName="websocket";gc.roundTrips=2;var xme=gc,bme=vr,IK=Da.EventEmitter,yme=function(){};function gh(t,e){IK.call(this),this.sendBuffer=[],this.sender=e,this.url=t}bme(gh,IK);gh.prototype.send=function(t){this.sendBuffer.push(t),this.sendStop||this.sendSchedule()};gh.prototype.sendScheduleWait=function(){var t=this,e;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){t.sendStop=null,t.sendSchedule()},25)};gh.prototype.sendSchedule=function(){yme("sendSchedule",this.sendBuffer.length);var t=this;if(this.sendBuffer.length>0){var e="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,e,function(r){t.sendStop=null,r?(t.emit("close",r.code||1006,"Sending error: "+r),t.close()):t.sendScheduleWait()}),this.sendBuffer=[]}};gh.prototype._cleanup=function(){this.removeAllListeners()};gh.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};var vme=gh,kme=vr,DK=Da.EventEmitter,wme=function(){};function gw(t,e,r){DK.call(this),this.Receiver=t,this.receiveUrl=e,this.AjaxObject=r,this._scheduleReceiver()}kme(gw,DK);gw.prototype._scheduleReceiver=function(){var t=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on("message",function(r){t.emit("message",r)}),e.once("close",function(r,n){wme("close",r,n,t.pollIsClosing),t.poll=e=null,t.pollIsClosing||(n==="network"?t._scheduleReceiver():(t.emit("close",r||1006,n),t.removeAllListeners()))})};gw.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};var jme=gw,Nme=vr,_me=ji,b5=vme,Sme=jme;function y5(t,e,r,n,s){var i=_me.addPath(t,e),o=this;b5.call(this,t,r),this.poll=new Sme(n,i,s),this.poll.on("message",function(l){o.emit("message",l)}),this.poll.once("close",function(l,c){o.poll=null,o.emit("close",l,c),o.close()})}Nme(y5,b5);y5.prototype.close=function(){b5.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};var MK=y5,Ame=vr,Eme=ji,LK=MK;function Cme(t){return function(e,r,n){var s={};typeof r=="string"&&(s.headers={"Content-type":"text/plain"});var i=Eme.addPath(e,"/xhr_send"),o=new t("POST",i,r,s);return o.once("finish",function(l){if(o=null,l!==200&&l!==204)return n(new Error("http status "+l));n()}),function(){o.close(),o=null;var l=new Error("Aborted");l.code=1e3,n(l)}}}function RK(t,e,r,n){LK.call(this,t,e,Cme(n),r,n)}Ame(RK,LK);var um=RK,Tme=vr,PK=Da.EventEmitter;function ub(t,e){PK.call(this);var r=this;this.bufferPosition=0,this.xo=new e("POST",t,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(n,s){r._chunkHandler(n,s),r.xo=null;var i=n===200?"network":"permanent";r.emit("close",null,i),r._cleanup()})}Tme(ub,PK);ub.prototype._chunkHandler=function(t,e){if(!(t!==200||!e))for(var r=-1;;this.bufferPosition+=r+1){var n=e.slice(this.bufferPosition);if(r=n.indexOf(`
`),r===-1)break;var s=n.slice(0,r);s&&this.emit("message",s)}};ub.prototype._cleanup=function(){this.removeAllListeners()};ub.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()};var mw=ub,zK=Da.EventEmitter,Ome=vr,$K=Md,Ime=ji,H0=Fe.XMLHttpRequest,MN=function(){};function Qo(t,e,r,n){var s=this;zK.call(this),setTimeout(function(){s._start(t,e,r,n)},0)}Ome(Qo,zK);Qo.prototype._start=function(t,e,r,n){var s=this;try{this.xhr=new H0}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}e=Ime.addQuery(e,"t="+ +new Date),this.unloadRef=$K.unloadAdd(function(){s._cleanup(!0)});try{this.xhr.open(t,e,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){MN("xhr timeout"),s.emit("finish",0,""),s._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!n||!n.noCredentials)&&Qo.supportsCORS&&(this.xhr.withCredentials=!0),n&&n.headers)for(var i in n.headers)this.xhr.setRequestHeader(i,n.headers[i]);this.xhr.onreadystatechange=function(){if(s.xhr){var o=s.xhr,l,c;switch(MN("readyState",o.readyState),o.readyState){case 3:try{c=o.status,l=o.responseText}catch{}c===1223&&(c=204),c===200&&l&&l.length>0&&s.emit("chunk",c,l);break;case 4:c=o.status,c===1223&&(c=204),(c===12005||c===12029)&&(c=0),MN("finish",c,o.responseText),s.emit("finish",c,o.responseText),s._cleanup(!1);break}}};try{s.xhr.send(r)}catch{s.emit("finish",0,""),s._cleanup(!1)}};Qo.prototype._cleanup=function(t){if(this.xhr){if(this.removeAllListeners(),$K.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),t)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}};Qo.prototype.close=function(){this._cleanup(!0)};Qo.enabled=!!H0;var QD=["Active"].concat("Object").join("X");!Qo.enabled&&QD in Fe&&(H0=function(){try{return new Fe[QD]("Microsoft.XMLHTTP")}catch{return null}},Qo.enabled=!!new H0);var FK=!1;try{FK="withCredentials"in new H0}catch{}Qo.supportsCORS=FK;var BK=Qo,Dme=vr,$1=BK;function v5(t,e,r,n){$1.call(this,t,e,r,n)}Dme(v5,$1);v5.enabled=$1.enabled&&$1.supportsCORS;var pw=v5,Mme=vr,k5=BK;function w5(t,e,r){k5.call(this,t,e,r,{noCredentials:!0})}Mme(w5,k5);w5.enabled=k5.enabled;var hb=w5,fb={isOpera:function(){return Fe.navigator&&/opera/i.test(Fe.navigator.userAgent)},isKonqueror:function(){return Fe.navigator&&/konqueror/i.test(Fe.navigator.userAgent)},hasDomain:function(){if(!Fe.document)return!0;try{return!!Fe.document.domain}catch{return!1}}},Lme=vr,UK=um,Rme=mw,H4=pw,Pme=hb,zme=fb;function hm(t){if(!Pme.enabled&&!H4.enabled)throw new Error("Transport created when disabled");UK.call(this,t,"/xhr_streaming",Rme,H4)}Lme(hm,UK);hm.enabled=function(t){return t.nullOrigin||zme.isOpera()?!1:H4.enabled};hm.transportName="xhr-streaming";hm.roundTrips=2;hm.needBody=!!Fe.document;var $me=hm,KK=Da.EventEmitter,Fme=vr,GK=Md,Bme=fb,Ume=ji,Kme=function(){};function mh(t,e,r){var n=this;KK.call(this),setTimeout(function(){n._start(t,e,r)},0)}Fme(mh,KK);mh.prototype._start=function(t,e,r){var n=this,s=new Fe.XDomainRequest;e=Ume.addQuery(e,"t="+ +new Date),s.onerror=function(){n._error()},s.ontimeout=function(){n._error()},s.onprogress=function(){Kme("progress",s.responseText),n.emit("chunk",200,s.responseText)},s.onload=function(){n.emit("finish",200,s.responseText),n._cleanup(!1)},this.xdr=s,this.unloadRef=GK.unloadAdd(function(){n._cleanup(!0)});try{this.xdr.open(t,e),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch{this._error()}};mh.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};mh.prototype._cleanup=function(t){if(this.xdr){if(this.removeAllListeners(),GK.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,t)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}};mh.prototype.close=function(){this._cleanup(!0)};mh.enabled=!!(Fe.XDomainRequest&&Bme.hasDomain());var j5=mh,Gme=vr,qK=um,qme=mw,W4=j5;function gb(t){if(!W4.enabled)throw new Error("Transport created when disabled");qK.call(this,t,"/xhr_streaming",qme,W4)}Gme(gb,qK);gb.enabled=function(t){return t.cookie_needed||t.nullOrigin?!1:W4.enabled&&t.sameScheme};gb.transportName="xdr-streaming";gb.roundTrips=2;var VK=gb,HK=Fe.EventSource,Vme=vr,WK=Da.EventEmitter,Hme=HK,JD=function(){};function mb(t){WK.call(this);var e=this,r=this.es=new Hme(t);r.onmessage=function(n){JD("message",n.data),e.emit("message",decodeURI(n.data))},r.onerror=function(n){JD("error",r.readyState);var s=r.readyState!==2?"network":"permanent";e._cleanup(),e._close(s)}}Vme(mb,WK);mb.prototype.abort=function(){this._cleanup(),this._close("user")};mb.prototype._cleanup=function(){var t=this.es;t&&(t.onmessage=t.onerror=null,t.close(),this.es=null)};mb.prototype._close=function(t){var e=this;setTimeout(function(){e.emit("close",null,t),e.removeAllListeners()},200)};var Wme=mb,Xme=vr,XK=um,Yme=Wme,Zme=pw,Qme=HK;function fm(t){if(!fm.enabled())throw new Error("Transport created when disabled");XK.call(this,t,"/eventsource",Yme,Zme)}Xme(fm,XK);fm.enabled=function(){return!!Qme};fm.transportName="eventsource";fm.roundTrips=2;var eM=fm,LN,tM;function YK(){return tM||(tM=1,LN="1.6.1"),LN}var ZK={exports:{}};(function(t){var e=Md,r=fb;t.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){t.exports.WPrefix in Fe||(Fe[t.exports.WPrefix]={})},postMessage:function(n,s){Fe.parent!==Fe&&Fe.parent.postMessage(JSON.stringify({windowId:t.exports.currentWindowId,type:n,data:s||""}),"*")},createIframe:function(n,s){var i=Fe.document.createElement("iframe"),o,l,c=function(){clearTimeout(o);try{i.onload=null}catch{}i.onerror=null},d=function(){i&&(c(),setTimeout(function(){i&&i.parentNode.removeChild(i),i=null},0),e.unloadDel(l))},u=function(f){i&&(d(),s(f))},h=function(f,g){setTimeout(function(){try{i&&i.contentWindow&&i.contentWindow.postMessage(f,g)}catch{}},0)};return i.src=n,i.style.display="none",i.style.position="absolute",i.onerror=function(){u("onerror")},i.onload=function(){clearTimeout(o),o=setTimeout(function(){u("onload timeout")},2e3)},Fe.document.body.appendChild(i),o=setTimeout(function(){u("timeout")},15e3),l=e.unloadAdd(d),{post:h,cleanup:d,loaded:c}},createHtmlfile:function(n,s){var i=["Active"].concat("Object").join("X"),o=new Fe[i]("htmlfile"),l,c,d,u=function(){clearTimeout(l),d.onerror=null},h=function(){o&&(u(),e.unloadDel(c),d.parentNode.removeChild(d),d=o=null,CollectGarbage())},f=function(m){o&&(h(),s(m))},g=function(m,p){try{setTimeout(function(){d&&d.contentWindow&&d.contentWindow.postMessage(m,p)},0)}catch{}};o.open(),o.write('<html><script>document.domain="'+Fe.document.domain+'";<\/script></html>'),o.close(),o.parentWindow[t.exports.WPrefix]=Fe[t.exports.WPrefix];var x=o.createElement("div");return o.body.appendChild(x),d=o.createElement("iframe"),x.appendChild(d),d.src=n,d.onerror=function(){f("onerror")},l=setTimeout(function(){f("timeout")},15e3),c=e.unloadAdd(h),{post:g,cleanup:h,loaded:u}}},t.exports.iframeEnabled=!1,Fe.document&&(t.exports.iframeEnabled=(typeof Fe.postMessage=="function"||typeof Fe.postMessage=="object")&&!r.isKonqueror())})(ZK);var pb=ZK.exports,Jme=vr,QK=Da.EventEmitter,epe=YK(),X4=ji,JK=pb,eG=Md,tpe=dm,rp=function(){};function ol(t,e,r){if(!ol.enabled())throw new Error("Transport created when disabled");QK.call(this);var n=this;this.origin=X4.getOrigin(r),this.baseUrl=r,this.transUrl=e,this.transport=t,this.windowId=tpe.string(8);var s=X4.addPath(r,"/iframe.html")+"#"+this.windowId;this.iframeObj=JK.createIframe(s,function(i){n.emit("close",1006,"Unable to load an iframe ("+i+")"),n.close()}),this.onmessageCallback=this._message.bind(this),eG.attachEvent("message",this.onmessageCallback)}Jme(ol,QK);ol.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){eG.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};ol.prototype._message=function(t){if(rp("message",t.data),!X4.isOriginEqual(t.origin,this.origin)){rp("not same origin",t.origin,this.origin);return}var e;try{e=JSON.parse(t.data)}catch{rp("bad json",t.data);return}if(e.windowId!==this.windowId){rp("mismatched window id",e.windowId,this.windowId);return}switch(e.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([epe,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",e.data);break;case"c":var r;try{r=JSON.parse(e.data)}catch{rp("bad json",e.data);return}this.emit("close",r[0],r[1]),this.close();break}};ol.prototype.postMessage=function(t,e){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:t,data:e||""}),this.origin)};ol.prototype.send=function(t){this.postMessage("m",t)};ol.enabled=function(){return JK.iframeEnabled};ol.transportName="iframe";ol.roundTrips=2;var tG=ol,N5={isObject:function(t){var e=typeof t;return e==="function"||e==="object"&&!!t},extend:function(t){if(!this.isObject(t))return t;for(var e,r,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}},rpe=vr,wy=tG,npe=N5,RN=function(t){function e(r,n){wy.call(this,t.transportName,r,n)}return rpe(e,wy),e.enabled=function(r,n){if(!Fe.document)return!1;var s=npe.extend({},n);return s.sameOrigin=!0,t.enabled(s)&&wy.enabled()},e.transportName="iframe-"+t.transportName,e.needBody=!0,e.roundTrips=wy.roundTrips+t.roundTrips-1,e.facadeTransport=t,e},ape=vr,fu=pb,spe=ji,rG=Da.EventEmitter,ipe=dm,ope=function(){};function to(t){rG.call(this);var e=this;fu.polluteGlobalNamespace(),this.id="a"+ipe.string(6),t=spe.addQuery(t,"c="+decodeURIComponent(fu.WPrefix+"."+this.id)),ope("using htmlfile",to.htmlfileEnabled);var r=to.htmlfileEnabled?fu.createHtmlfile:fu.createIframe;Fe[fu.WPrefix][this.id]={start:function(){e.iframeObj.loaded()},message:function(n){e.emit("message",n)},stop:function(){e._cleanup(),e._close("network")}},this.iframeObj=r(t,function(){e._cleanup(),e._close("permanent")})}ape(to,rG);to.prototype.abort=function(){this._cleanup(),this._close("user")};to.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete Fe[fu.WPrefix][this.id]};to.prototype._close=function(t){this.emit("close",null,t),this.removeAllListeners()};to.htmlfileEnabled=!1;var rM=["Active"].concat("Object").join("X");if(rM in Fe)try{to.htmlfileEnabled=!!new Fe[rM]("htmlfile")}catch{}to.enabled=to.htmlfileEnabled||fu.iframeEnabled;var lpe=to,cpe=vr,Y4=lpe,dpe=hb,nG=um;function xb(t){if(!Y4.enabled)throw new Error("Transport created when disabled");nG.call(this,t,"/htmlfile",Y4,dpe)}cpe(xb,nG);xb.enabled=function(t){return Y4.enabled&&t.sameOrigin};xb.transportName="htmlfile";xb.roundTrips=2;var nM=xb,upe=vr,aG=um,hpe=mw,Z4=pw,sG=hb;function bb(t){if(!sG.enabled&&!Z4.enabled)throw new Error("Transport created when disabled");aG.call(this,t,"/xhr",hpe,Z4)}upe(bb,aG);bb.enabled=function(t){return t.nullOrigin?!1:sG.enabled&&t.sameOrigin?!0:Z4.enabled};bb.transportName="xhr-polling";bb.roundTrips=2;var aM=bb,fpe=vr,iG=um,gpe=VK,mpe=mw,sM=j5;function yb(t){if(!sM.enabled)throw new Error("Transport created when disabled");iG.call(this,t,"/xhr",mpe,sM)}fpe(yb,iG);yb.enabled=gpe.enabled;yb.transportName="xdr-polling";yb.roundTrips=2;var ppe=yb,Jp=pb,oG=dm,xpe=fb,bpe=ji,ype=vr,lG=Da.EventEmitter,vpe=function(){};function vi(t){var e=this;lG.call(this),Jp.polluteGlobalNamespace(),this.id="a"+oG.string(6);var r=bpe.addQuery(t,"c="+encodeURIComponent(Jp.WPrefix+"."+this.id));Fe[Jp.WPrefix][this.id]=this._callback.bind(this),this._createScript(r),this.timeoutId=setTimeout(function(){e._abort(new Error("JSONP script loaded abnormally (timeout)"))},vi.timeout)}ype(vi,lG);vi.prototype.abort=function(){if(Fe[Jp.WPrefix][this.id]){var t=new Error("JSONP user aborted read");t.code=1e3,this._abort(t)}};vi.timeout=35e3;vi.scriptErrorTimeout=1e3;vi.prototype._callback=function(t){this._cleanup(),!this.aborting&&(t&&this.emit("message",t),this.emit("close",null,"network"),this.removeAllListeners())};vi.prototype._abort=function(t){this._cleanup(),this.aborting=!0,this.emit("close",t.code,t.message),this.removeAllListeners()};vi.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var t=this.script;t.parentNode.removeChild(t),t.onreadystatechange=t.onerror=t.onload=t.onclick=null,this.script=null}delete Fe[Jp.WPrefix][this.id]};vi.prototype._scriptError=function(){var t=this;this.errorTimer||(this.errorTimer=setTimeout(function(){t.loadedOkay||t._abort(new Error("JSONP script loaded abnormally (onerror)"))},vi.scriptErrorTimeout))};vi.prototype._createScript=function(t){var e=this,r=this.script=Fe.document.createElement("script"),n;if(r.id="a"+oG.string(8),r.src=t,r.type="text/javascript",r.charset="UTF-8",r.onerror=this._scriptError.bind(this),r.onload=function(){e._abort(new Error("JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(){if(vpe("onreadystatechange",r.readyState),/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){e.loadedOkay=!0;try{r.onclick()}catch{}}r&&e._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof r.async>"u"&&Fe.document.attachEvent)if(xpe.isOpera())n=this.script2=Fe.document.createElement("script"),n.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=n.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch{}r.async=!0}typeof r.async<"u"&&(r.async=!0);var s=Fe.document.getElementsByTagName("head")[0];s.insertBefore(r,s.firstChild),n&&s.insertBefore(n,s.firstChild)};var kpe=vi,wpe=dm,iM=ji,jpe=function(){},js,e0;function Npe(t){try{return Fe.document.createElement('<iframe name="'+t+'">')}catch{var e=Fe.document.createElement("iframe");return e.name=t,e}}function _pe(){js=Fe.document.createElement("form"),js.style.display="none",js.style.position="absolute",js.method="POST",js.enctype="application/x-www-form-urlencoded",js.acceptCharset="UTF-8",e0=Fe.document.createElement("textarea"),e0.name="d",js.appendChild(e0),Fe.document.body.appendChild(js)}var Spe=function(t,e,r){js||_pe();var n="a"+wpe.string(8);js.target=n,js.action=iM.addQuery(iM.addPath(t,"/jsonp_send"),"i="+n);var s=Npe(n);s.id=n,s.style.display="none",js.appendChild(s);try{e0.value=e}catch{}js.submit();var i=function(o){s.onerror&&(s.onreadystatechange=s.onerror=s.onload=null,setTimeout(function(){s.parentNode.removeChild(s),s=null},500),e0.value="",r(o))};return s.onerror=function(){i()},s.onload=function(){i()},s.onreadystatechange=function(o){jpe("onreadystatechange",n,s.readyState),s.readyState==="complete"&&i()},function(){i(new Error("Aborted"))}},Ape=vr,cG=MK,Epe=kpe,Cpe=Spe;function ph(t){if(!ph.enabled())throw new Error("Transport created when disabled");cG.call(this,t,"/jsonp",Cpe,Epe)}Ape(ph,cG);ph.enabled=function(){return!!Fe.document};ph.transportName="jsonp-polling";ph.roundTrips=1;ph.needBody=!0;var Tpe=ph,Ope=[xme,$me,VK,eM,RN(eM),nM,RN(nM),aM,ppe,RN(aM),Tpe],W0=Array.prototype,_5=Object.prototype,Ipe=Function.prototype,X0=String.prototype,PN=W0.slice,S5=_5.toString,dG=function(t){return _5.toString.call(t)==="[object Function]"},Dpe=function(e){return S5.call(e)==="[object Array]"},uG=function(e){return S5.call(e)==="[object String]"},Mpe=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),Q4;Mpe?Q4=function(t,e,r,n){!n&&e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:r})}:Q4=function(t,e,r,n){!n&&e in t||(t[e]=r)};var vb=function(t,e,r){for(var n in e)_5.hasOwnProperty.call(e,n)&&Q4(t,n,e[n],r)},hG=function(t){if(t==null)throw new TypeError("can't convert "+t+" to object");return Object(t)};function Lpe(t){var e=+t;return e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function Rpe(t){return t>>>0}function zN(){}vb(Ipe,{bind:function(e){var r=this;if(!dG(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n=PN.call(arguments,1),s=function(){if(this instanceof c){var d=r.apply(this,n.concat(PN.call(arguments)));return Object(d)===d?d:this}else return r.apply(e,n.concat(PN.call(arguments)))},i=Math.max(0,r.length-n.length),o=[],l=0;l<i;l++)o.push("$"+l);var c=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")(s);return r.prototype&&(zN.prototype=r.prototype,c.prototype=new zN,zN.prototype=null),c}});vb(Array,{isArray:Dpe});var oM=Object("a"),fG=oM[0]!=="a"||!(0 in oM),Ppe=function(e){var r=!0,n=!0;return e&&(e.call("foo",function(s,i,o){typeof o!="object"&&(r=!1)}),e.call([1],function(){n=typeof this=="string"},"x")),!!e&&r&&n};vb(W0,{forEach:function(e){var r=hG(this),n=fG&&uG(this)?this.split(""):r,s=arguments[1],i=-1,o=n.length>>>0;if(!dG(e))throw new TypeError;for(;++i<o;)i in n&&e.call(s,n[i],i,r)}},!Ppe(W0.forEach));var zpe=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;vb(W0,{indexOf:function(e){var r=fG&&uG(this)?this.split(""):hG(this),n=r.length>>>0;if(!n)return-1;var s=0;for(arguments.length>1&&(s=Lpe(arguments[1])),s=s>=0?s:Math.max(0,n+s);s<n;s++)if(s in r&&r[s]===e)return s;return-1}},zpe);var lM=X0.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var t=/()??/.exec("")[1]===void 0;X0.split=function(e,r){var n=this;if(e===void 0&&r===0)return[];if(S5.call(e)!=="[object RegExp]")return lM.call(this,e,r);var s=[],i=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),o=0,l,c,d,u;for(e=new RegExp(e.source,i+"g"),n+="",t||(l=new RegExp("^"+e.source+"$(?!\\s)",i)),r=r===void 0?-1>>>0:Rpe(r);(c=e.exec(n))&&(d=c.index+c[0].length,!(d>o&&(s.push(n.slice(o,c.index)),!t&&c.length>1&&c[0].replace(l,function(){for(var h=1;h<arguments.length-2;h++)arguments[h]===void 0&&(c[h]=void 0)}),c.length>1&&c.index<n.length&&W0.push.apply(s,c.slice(1)),u=c[0].length,o=d,s.length>=r)));)e.lastIndex===c.index&&e.lastIndex++;return o===n.length?(u||!e.test(""))&&s.push(""):s.push(n.slice(o)),s.length>r?s.slice(0,r):s}}():"0".split(void 0,0).length&&(X0.split=function(e,r){return e===void 0&&r===0?[]:lM.call(this,e,r)});var $pe=X0.substr,Fpe="".substr&&"0b".substr(-1)!=="b";vb(X0,{substr:function(e,r){return $pe.call(this,e<0&&(e=this.length+e)<0?0:e,r)}},Fpe);var jy=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,$N,Bpe=function(t){var e,r={},n=[];for(e=0;e<65536;e++)n.push(String.fromCharCode(e));return t.lastIndex=0,n.join("").replace(t,function(s){return r[s]="\\u"+("0000"+s.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,r},Upe={quote:function(t){var e=JSON.stringify(t);return jy.lastIndex=0,jy.test(e)?($N||($N=Bpe(jy)),e.replace(jy,function(r){return $N[r]})):e}},FN=function(){},Kpe=function(t){return{filterToEnabled:function(e,r){var n={main:[],facade:[]};return e?typeof e=="string"&&(e=[e]):e=[],t.forEach(function(s){if(s&&!(s.transportName==="websocket"&&r.websocket===!1)){if(e.length&&e.indexOf(s.transportName)===-1){FN("not in whitelist",s.transportName);return}s.enabled(r)?(FN("enabled",s.transportName),n.main.push(s),s.facadeTransport&&n.facade.push(s.facadeTransport)):FN("disabled",s.transportName)}}),n}}},J4={};["log","debug","warn"].forEach(function(t){var e;try{e=Fe.console&&Fe.console[t]&&Fe.console[t].apply}catch{}J4[t]=e?function(){return Fe.console[t].apply(Fe.console,arguments)}:t==="log"?function(){}:J4.log});var Gpe=J4;function xh(t){this.type=t}xh.prototype.initEvent=function(t,e,r){return this.type=t,this.bubbles=e,this.cancelable=r,this.timeStamp=+new Date,this};xh.prototype.stopPropagation=function(){};xh.prototype.preventDefault=function(){};xh.CAPTURING_PHASE=1;xh.AT_TARGET=2;xh.BUBBLING_PHASE=3;var A5=xh,gG=Fe.location||{protocol:"http:",href:"http://localhost/",hash:""},qpe=vr,mG=A5;function pG(){mG.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}qpe(pG,mG);var Vpe=pG,Hpe=vr,xG=A5;function bG(t){xG.call(this),this.initEvent("message",!1,!1),this.data=t}Hpe(bG,xG);var Wpe=bG,yG=Da.EventEmitter,Xpe=vr;function kb(){var t=this;yG.call(this),this.to=setTimeout(function(){t.emit("finish",200,"{}")},kb.timeout)}Xpe(kb,yG);kb.prototype.close=function(){clearTimeout(this.to)};kb.timeout=2e3;var Ype=kb,vG=Da.EventEmitter,Zpe=vr,Qpe=N5;function E5(t,e){vG.call(this);var r=this,n=+new Date;this.xo=new e("GET",t),this.xo.once("finish",function(s,i){var o,l;if(s===200){if(l=+new Date-n,i)try{o=JSON.parse(i)}catch{}Qpe.isObject(o)||(o={})}r.emit("finish",o,l),r.removeAllListeners()})}Zpe(E5,vG);E5.prototype.close=function(){this.removeAllListeners(),this.xo.close()};var kG=E5,BN,cM;function wG(){if(cM)return BN;cM=1;var t=vr,e=Da.EventEmitter,r=hb,n=kG;function s(i){var o=this;e.call(this),this.ir=new n(i,r),this.ir.once("finish",function(l,c){o.ir=null,o.emit("message",JSON.stringify([l,c]))})}return t(s,e),s.transportName="iframe-info-receiver",s.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},BN=s,BN}var jG=Da.EventEmitter,Jpe=vr,e0e=Md,NG=tG,t0e=wG();function xw(t,e){var r=this;jG.call(this);var n=function(){var s=r.ifr=new NG(t0e.transportName,e,t);s.once("message",function(i){if(i){var o;try{o=JSON.parse(i)}catch{r.emit("finish"),r.close();return}var l=o[0],c=o[1];r.emit("finish",l,c)}r.close()}),s.once("close",function(){r.emit("finish"),r.close()})};Fe.document.body?n():e0e.attachEvent("load",n)}Jpe(xw,jG);xw.enabled=function(){return NG.enabled()};xw.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};var r0e=xw,_G=Da.EventEmitter,n0e=vr,a0e=ji,dM=j5,uM=pw,s0e=hb,i0e=Ype,hM=r0e,Ny=kG;function zl(t,e){var r=this;_G.call(this),setTimeout(function(){r.doXhr(t,e)},0)}n0e(zl,_G);zl._getReceiver=function(t,e,r){return r.sameOrigin?new Ny(e,s0e):uM.enabled?new Ny(e,uM):dM.enabled&&r.sameScheme?new Ny(e,dM):hM.enabled()?new hM(t,e):new Ny(e,i0e)};zl.prototype.doXhr=function(t,e){var r=this,n=a0e.addPath(t,"/info");this.xo=zl._getReceiver(t,n,e),this.timeoutRef=setTimeout(function(){r._cleanup(!1),r.emit("finish")},zl.timeout),this.xo.once("finish",function(s,i){r._cleanup(!0),r.emit("finish",s,i)})};zl.prototype._cleanup=function(t){clearTimeout(this.timeoutRef),this.timeoutRef=null,!t&&this.xo&&this.xo.close(),this.xo=null};zl.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)};zl.timeout=8e3;var o0e=zl,UN,fM;function l0e(){if(fM)return UN;fM=1;var t=pb;function e(r){this._transport=r,r.on("message",this._transportMessage.bind(this)),r.on("close",this._transportClose.bind(this))}return e.prototype._transportClose=function(r,n){t.postMessage("c",JSON.stringify([r,n]))},e.prototype._transportMessage=function(r){t.postMessage("t",r)},e.prototype._send=function(r){this._transport.send(r)},e.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},UN=e,UN}var KN,gM;function c0e(){if(gM)return KN;gM=1;var t=ji,e=Md,r=l0e(),n=wG(),s=pb,i=gG,o=function(){};return KN=function(l,c){var d={};c.forEach(function(h){h.facadeTransport&&(d[h.facadeTransport.transportName]=h.facadeTransport)}),d[n.transportName]=n;var u;l.bootstrap_iframe=function(){var h;s.currentWindowId=i.hash.slice(1);var f=function(g){if(g.source===parent&&(typeof u>"u"&&(u=g.origin),g.origin===u)){var x;try{x=JSON.parse(g.data)}catch{o("bad json",g.data);return}if(x.windowId===s.currentWindowId)switch(x.type){case"s":var m;try{m=JSON.parse(x.data)}catch{o("bad json",x.data);break}var p=m[0],b=m[1],v=m[2],y=m[3];if(p!==l.version)throw new Error('Incompatible SockJS! Main site uses: "'+p+'", the iframe: "'+l.version+'".');if(!t.isOriginEqual(v,i.href)||!t.isOriginEqual(y,i.href))throw new Error("Can't connect to different domain from within an iframe. ("+i.href+", "+v+", "+y+")");h=new r(new d[b](v,y));break;case"m":h._send(x.data);break;case"c":h&&h._close(),h=null;break}}};e.attachEvent("message",f),s.postMessage("s")}},KN}var d0e=AK,u0e=vr,mM=dm,h0e=Upe,Op=ji,f0e=Md,g0e=Kpe,m0e=N5,p0e=fb,x0e=Gpe,C5=A5,SG=EK,_y=gG,b0e=Vpe,pM=Wpe,y0e=o0e,Ro=function(){},AG;function fr(t,e,r){if(!(this instanceof fr))return new fr(t,e,r);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");SG.call(this),this.readyState=fr.CONNECTING,this.extensions="",this.protocol="",r=r||{},r.protocols_whitelist&&x0e.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=r.transports,this._transportOptions=r.transportOptions||{},this._timeout=r.timeout||0;var n=r.sessionId||8;if(typeof n=="function")this._generateSessionId=n;else if(typeof n=="number")this._generateSessionId=function(){return mM.string(n)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=r.server||mM.numberString(1e3);var s=new d0e(t);if(!s.host||!s.protocol)throw new SyntaxError("The URL '"+t+"' is invalid");if(s.hash)throw new SyntaxError("The URL must not contain a fragment");if(s.protocol!=="http:"&&s.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+s.protocol+"' is not allowed.");var i=s.protocol==="https:";if(_y.protocol==="https:"&&!i&&!Op.isLoopbackAddr(s.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");e?Array.isArray(e)||(e=[e]):e=[];var o=e.sort();o.forEach(function(c,d){if(!c)throw new SyntaxError("The protocols entry '"+c+"' is invalid.");if(d<o.length-1&&c===o[d+1])throw new SyntaxError("The protocols entry '"+c+"' is duplicated.")});var l=Op.getOrigin(_y.href);this._origin=l?l.toLowerCase():null,s.set("pathname",s.pathname.replace(/\/+$/,"")),this.url=s.href,Ro("using url",this.url),this._urlInfo={nullOrigin:!p0e.hasDomain(),sameOrigin:Op.isOriginEqual(this.url,_y.href),sameScheme:Op.isSchemeEqual(this.url,_y.href)},this._ir=new y0e(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}u0e(fr,SG);function EG(t){return t===1e3||t>=3e3&&t<=4999}fr.prototype.close=function(t,e){if(t&&!EG(t))throw new Error("InvalidAccessError: Invalid code");if(e&&e.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===fr.CLOSING||this.readyState===fr.CLOSED)){var r=!0;this._close(t||1e3,e||"Normal closure",r)}};fr.prototype.send=function(t){if(typeof t!="string"&&(t=""+t),this.readyState===fr.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===fr.OPEN&&this._transport.send(h0e.quote(t))};fr.version=YK();fr.CONNECTING=0;fr.OPEN=1;fr.CLOSING=2;fr.CLOSED=3;fr.prototype._receiveInfo=function(t,e){if(this._ir=null,!t){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(e),this._transUrl=t.base_url?t.base_url:this.url,t=m0e.extend(t,this._urlInfo);var r=AG.filterToEnabled(this._transportsWhitelist,t);this._transports=r.main,Ro(this._transports.length+" enabled transports"),this._connect()};fr.prototype._connect=function(){for(var t=this._transports.shift();t;t=this._transports.shift()){if(Ro("attempt",t.transportName),t.needBody&&(!Fe.document.body||typeof Fe.document.readyState<"u"&&Fe.document.readyState!=="complete"&&Fe.document.readyState!=="interactive")){this._transports.unshift(t),f0e.attachEvent("load",this._connect.bind(this));return}var e=Math.max(this._timeout,this._rto*t.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),e);var r=Op.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),n=this._transportOptions[t.transportName],s=new t(r,this._transUrl,n);s.on("message",this._transportMessage.bind(this)),s.once("close",this._transportClose.bind(this)),s.transportName=t.transportName,this._transport=s;return}this._close(2e3,"All transports failed",!1)};fr.prototype._transportTimeout=function(){this.readyState===fr.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};fr.prototype._transportMessage=function(t){var e=this,r=t.slice(0,1),n=t.slice(1),s;switch(r){case"o":this._open();return;case"h":this.dispatchEvent(new C5("heartbeat")),Ro("heartbeat",this.transport);return}if(n)try{s=JSON.parse(n)}catch{}if(!(typeof s>"u"))switch(r){case"a":Array.isArray(s)&&s.forEach(function(i){Ro("message",e.transport),e.dispatchEvent(new pM(i))});break;case"m":Ro("message",this.transport),this.dispatchEvent(new pM(s));break;case"c":Array.isArray(s)&&s.length===2&&this._close(s[0],s[1],!0);break}};fr.prototype._transportClose=function(t,e){if(Ro("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!EG(t)&&t!==2e3&&this.readyState===fr.CONNECTING){this._connect();return}this._close(t,e)};fr.prototype._open=function(){Ro("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===fr.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=fr.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new C5("open")),Ro("connected",this.transport)):this._close(1006,"Server lost session")};fr.prototype._close=function(t,e,r){Ro("_close",this.transport,t,e,r,this.readyState);var n=!1;if(this._ir&&(n=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===fr.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=fr.CLOSING,setTimeout((function(){this.readyState=fr.CLOSED,n&&this.dispatchEvent(new C5("error"));var s=new b0e;s.wasClean=r||!1,s.code=t||1e3,s.reason=e,this.dispatchEvent(s),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)};fr.prototype.countRTO=function(t){return t>100?4*t:300+t};var v0e=function(t){return AG=g0e(t),c0e()(fr,t),fr},k0e=Ope,w0e=v0e(k0e);"_sockjs_onload"in Fe&&setTimeout(Fe._sockjs_onload,1);const T5=Vt(w0e);var bw={exports:{}},O5={};(function(t){(function(){var e,r,n,s,i={}.hasOwnProperty,o=[].slice;e={LF:`
`,NULL:"\0"},n=function(){var l;function c(d,u,h){this.command=d,this.headers=u??{},this.body=h??""}return c.prototype.toString=function(){var d,u,h,f,g;d=[this.command],h=this.headers["content-length"]===!1,h&&delete this.headers["content-length"],g=this.headers;for(u in g)i.call(g,u)&&(f=g[u],d.push(""+u+":"+f));return this.body&&!h&&d.push("content-length:"+c.sizeOfUTF8(this.body)),d.push(e.LF+this.body),d.join(e.LF)},c.sizeOfUTF8=function(d){return d?encodeURI(d).match(/%..|./g).length:0},l=function(d){var u,h,f,g,x,m,p,b,v,y,w,k,j,_,S,A,T;for(g=d.search(RegExp(""+e.LF+e.LF)),x=d.substring(0,g).split(e.LF),f=x.shift(),m={},k=function(E){return E.replace(/^\s+|\s+$/g,"")},A=x.reverse(),j=0,S=A.length;j<S;j++)y=A[j],b=y.indexOf(":"),m[k(y.substring(0,b))]=k(y.substring(b+1));if(u="",w=g+2,m["content-length"])v=parseInt(m["content-length"]),u=(""+d).substring(w,w+v);else for(h=null,p=_=w,T=d.length;(w<=T?_<T:_>T)&&(h=d.charAt(p),h!==e.NULL);p=w<=T?++_:--_)u+=h;return new c(f,m,u)},c.unmarshall=function(d){var u;return function(){var h,f,g,x;for(g=d.split(RegExp(""+e.NULL+e.LF+"*")),x=[],h=0,f=g.length;h<f;h++)u=g[h],(u!=null?u.length:void 0)>0&&x.push(l(u));return x}()},c.marshall=function(d,u,h){var f;return f=new c(d,u,h),f.toString()+e.NULL},c}(),r=function(){var l;function c(d){this.ws=d,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16*1024,this.subscriptions={}}return c.prototype.debug=function(d){var u;return typeof window<"u"&&window!==null&&(u=window.console)!=null?u.log(d):void 0},l=function(){return Date.now?Date.now():new Date().valueOf},c.prototype._transmit=function(d,u,h){var f;for(f=n.marshall(d,u,h),typeof this.debug=="function"&&this.debug(">>> "+f);;)if(f.length>this.maxWebSocketFrameSize)this.ws.send(f.substring(0,this.maxWebSocketFrameSize)),f=f.substring(this.maxWebSocketFrameSize),typeof this.debug=="function"&&this.debug("remaining = "+f.length);else return this.ws.send(f)},c.prototype._setupHeartbeat=function(d){var u,h,f,g,x,m;if(!((x=d.version)!==s.VERSIONS.V1_1&&x!==s.VERSIONS.V1_2)&&(m=function(){var p,b,v,y;for(v=d["heart-beat"].split(","),y=[],p=0,b=v.length;p<b;p++)g=v[p],y.push(parseInt(g));return y}(),h=m[0],u=m[1],this.heartbeat.outgoing===0||u===0||(f=Math.max(this.heartbeat.outgoing,u),typeof this.debug=="function"&&this.debug("send PING every "+f+"ms"),this.pinger=s.setInterval(f,function(p){return function(){return p.ws.send(e.LF),typeof p.debug=="function"?p.debug(">>> PING"):void 0}}(this))),!(this.heartbeat.incoming===0||h===0)))return f=Math.max(this.heartbeat.incoming,h),typeof this.debug=="function"&&this.debug("check PONG every "+f+"ms"),this.ponger=s.setInterval(f,function(p){return function(){var b;if(b=l()-p.serverActivity,b>f*2)return typeof p.debug=="function"&&p.debug("did not receive server activity for the last "+b+"ms"),p.ws.close()}}(this))},c.prototype._parseConnect=function(){var d,u,h,f;switch(d=1<=arguments.length?o.call(arguments,0):[],f={},d.length){case 2:f=d[0],u=d[1];break;case 3:d[1]instanceof Function?(f=d[0],u=d[1],h=d[2]):(f.login=d[0],f.passcode=d[1],u=d[2]);break;case 4:f.login=d[0],f.passcode=d[1],u=d[2],h=d[3];break;default:f.login=d[0],f.passcode=d[1],u=d[2],h=d[3],f.host=d[4]}return[f,u,h]},c.prototype.connect=function(){var d,u,h,f;return d=1<=arguments.length?o.call(arguments,0):[],f=this._parseConnect.apply(this,d),h=f[0],this.connectCallback=f[1],u=f[2],typeof this.debug=="function"&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(g){return function(x){var m,p,b,v,y,w,k,j,_,S,A,T;if(v=typeof ArrayBuffer<"u"&&x.data instanceof ArrayBuffer?(m=new Uint8Array(x.data),typeof g.debug=="function"&&g.debug("--- got data length: "+m.length),function(){var E,C,z;for(z=[],E=0,C=m.length;E<C;E++)p=m[E],z.push(String.fromCharCode(p));return z}().join("")):x.data,g.serverActivity=l(),v===e.LF){typeof g.debug=="function"&&g.debug("<<< PONG");return}for(typeof g.debug=="function"&&g.debug("<<< "+v),A=n.unmarshall(v),T=[],_=0,S=A.length;_<S;_++)switch(y=A[_],y.command){case"CONNECTED":typeof g.debug=="function"&&g.debug("connected to server "+y.headers.server),g.connected=!0,g._setupHeartbeat(y.headers),T.push(typeof g.connectCallback=="function"?g.connectCallback(y):void 0);break;case"MESSAGE":j=y.headers.subscription,k=g.subscriptions[j]||g.onreceive,k?(b=g,w=y.headers["message-id"],y.ack=function(E){return E==null&&(E={}),b.ack(w,j,E)},y.nack=function(E){return E==null&&(E={}),b.nack(w,j,E)},T.push(k(y))):T.push(typeof g.debug=="function"?g.debug("Unhandled received MESSAGE: "+y):void 0);break;case"RECEIPT":T.push(typeof g.onreceipt=="function"?g.onreceipt(y):void 0);break;case"ERROR":T.push(typeof u=="function"?u(y):void 0);break;default:T.push(typeof g.debug=="function"?g.debug("Unhandled frame: "+y):void 0)}return T}}(this),this.ws.onclose=function(g){return function(){var x;return x="Whoops! Lost connection to "+g.ws.url,typeof g.debug=="function"&&g.debug(x),g._cleanUp(),typeof u=="function"?u(x):void 0}}(this),this.ws.onopen=function(g){return function(){return typeof g.debug=="function"&&g.debug("Web Socket Opened..."),h["accept-version"]=s.VERSIONS.supportedVersions(),h["heart-beat"]=[g.heartbeat.outgoing,g.heartbeat.incoming].join(","),g._transmit("CONNECT",h)}}(this)},c.prototype.disconnect=function(d,u){return u==null&&(u={}),this._transmit("DISCONNECT",u),this.ws.onclose=null,this.ws.close(),this._cleanUp(),typeof d=="function"?d():void 0},c.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&s.clearInterval(this.pinger),this.ponger)return s.clearInterval(this.ponger)},c.prototype.send=function(d,u,h){return u==null&&(u={}),h==null&&(h=""),u.destination=d,this._transmit("SEND",u,h)},c.prototype.subscribe=function(d,u,h){var f;return h==null&&(h={}),h.id||(h.id="sub-"+this.counter++),h.destination=d,this.subscriptions[h.id]=u,this._transmit("SUBSCRIBE",h),f=this,{id:h.id,unsubscribe:function(){return f.unsubscribe(h.id)}}},c.prototype.unsubscribe=function(d){return delete this.subscriptions[d],this._transmit("UNSUBSCRIBE",{id:d})},c.prototype.begin=function(d){var u,h;return h=d||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:h}),u=this,{id:h,commit:function(){return u.commit(h)},abort:function(){return u.abort(h)}}},c.prototype.commit=function(d){return this._transmit("COMMIT",{transaction:d})},c.prototype.abort=function(d){return this._transmit("ABORT",{transaction:d})},c.prototype.ack=function(d,u,h){return h==null&&(h={}),h["message-id"]=d,h.subscription=u,this._transmit("ACK",h)},c.prototype.nack=function(d,u,h){return h==null&&(h={}),h["message-id"]=d,h.subscription=u,this._transmit("NACK",h)},c}(),s={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(l,c){var d,u;return c==null&&(c=["v10.stomp","v11.stomp"]),d=s.WebSocketClass||WebSocket,u=new d(l,c),new r(u)},over:function(l){return new r(l)},Frame:n},t!==null&&(t.Stomp=s),typeof window<"u"&&window!==null?(s.setInterval=function(l,c){return window.setInterval(c,l)},s.clearInterval=function(l){return window.clearInterval(l)},window.Stomp=s):t||(self.Stomp=s)}).call(Fe)})(O5);var eA={};const j0e={},N0e=Object.freeze(Object.defineProperty({__proto__:null,default:j0e},Symbol.toStringTag,{value:"Module"})),_0e=see(N0e);var GN,xM;function S0e(){if(xM)return GN;xM=1;var t=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return GN=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}(),GN}const A0e="1.0.35",E0e={version:A0e};var qN,bM;function C0e(){return bM||(bM=1,qN=E0e.version),qN}var VN,yM;function T0e(){if(yM)return VN;yM=1;var t;if(typeof globalThis=="object")t=globalThis;else try{t=S0e()}catch{}finally{if(!t&&typeof window<"u"&&(t=window),!t)throw new Error("Could not determine global this")}var e=t.WebSocket||t.MozWebSocket,r=C0e();function n(s,i){var o;return i?o=new e(s,i):o=new e(s),o}return e&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(s){Object.defineProperty(n,s,{get:function(){return e[s]}})}),VN={w3cwebsocket:e?n:null,version:r},VN}(function(){var t,e,r,n,s,i;t=O5,e=_0e,t.Stomp.setInterval=function(o,l){return setInterval(l,o)},t.Stomp.clearInterval=function(o){return clearInterval(o)},s=function(o,l){var c,d;return c=null,d={url:"tcp:// "+l+":"+o,send:function(u){return c.write(u)},close:function(){return c.end()}},c=e.connect(o,l,function(u){return d.onopen()}),c.on("error",function(u){return typeof d.onclose=="function"?d.onclose(u):void 0}),c.on("close",function(u){return typeof d.onclose=="function"?d.onclose(u):void 0}),c.on("data",function(u){var h;return h={data:u.toString()},d.onmessage(h)}),d},i=function(o){var l,c,d,u;return l=T0e().client,c=null,u={url:o,send:function(h){return c.sendUTF(h)},close:function(){return c.close()}},d=new l,d.on("connect",function(h){return c=h,u.onopen(),c.on("error",function(f){return typeof u.onclose=="function"?u.onclose(f):void 0}),c.on("close",function(){return typeof u.onclose=="function"?u.onclose():void 0}),c.on("message",function(f){var g;if(f.type==="utf8")return g={data:f.utf8Data},u.onmessage(g)})}),d.connect(o),u},r=function(o,l){var c;return c=s(l,o),t.Stomp.over(c)},n=function(o){var l;return l=i(o),t.Stomp.over(l)},eA.overTCP=r,eA.overWS=n}).call(Fe);var O0e=O5,CG=eA;bw.exports=O0e.Stomp;bw.exports.overTCP=CG.overTCP;bw.exports.overWS=CG.overWS;var I0e=bw.exports;const D0e=Vt(I0e),M0e=new Audio("https://assets.mixkit.co/active_storage/sfx/2354/2354-preview.mp3"),L0e=()=>{const{t}=nt(),{currentUser:e,activeCourseId:r}=At(),n=zn(),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState([]),[u,h]=N.useState([]),[f,g]=N.useState(""),[x,m]=N.useState(null),[p,b]=N.useState(0),[v,y]=N.useState(!1),[w,k]=N.useState(!1),[j,_]=N.useState([]),[S,A]=N.useState(!1),[T,E]=N.useState(0),[C,z]=N.useState(!0),[M,F]=N.useState(!1),[D,L]=N.useState({friends:[],classmates:[],administration:[],others:[]}),[K,$]=N.useState("friends"),R=N.useRef(s),Y=N.useRef(o),ee=N.useRef(null),B=N.useRef(null);N.useEffect(()=>{R.current=s,s&&(b(0),y(!1))},[s]),N.useEffect(()=>{Y.current=o},[o]),N.useEffect(()=>{if(!e)return;const Z=new T5(`${window.location.origin}/ws`),te=D0e.over(Z);return te.debug=null,te.connect({},()=>{te.subscribe(`/topic/messages/${e.id}`,ge=>{U(JSON.parse(ge.body))})},ge=>console.error("Chat error:",ge)),m(te),Ne(),()=>{te&&te.connected&&te.disconnect()}},[e]),N.useEffect(()=>{d(D[K]||[])},[K,D]);const U=Z=>{h(Ce=>[...Ce,Z]);const te=R.current,ge=Y.current;if(!te||ge&&ge.id!==Z.senderId){b(Ce=>Ce+1),y(!0);try{M0e.play().catch(()=>{})}catch{}}};N.useEffect(()=>{var Z;(Z=ee.current)==null||Z.scrollIntoView({behavior:"smooth"})},[u,o,s]),N.useEffect(()=>{var Z;(Z=B.current)==null||Z.scrollIntoView({behavior:"smooth"})},[j,w]),N.useEffect(()=>{o&&(h([]),E(0),z(!0),V(0,!0))},[o]),N.useEffect(()=>{j.length===0&&_([{role:"ai",text:"Hej!  Jag r din AI-tutor. ppna en kurs fr att stlla frgor om materialet."}])},[]);const V=(Z,te=!1)=>{if(!e||!o)return;F(!0);const ge=localStorage.getItem("token");fetch(`${ks}/messages/${e.id}/${o.id}?page=${Z}&size=20`,{headers:{Authorization:`Bearer ${ge}`}}).then(Ce=>Ce.json()).then(Ce=>{const He=[...Ce.content].reverse();h(te?He:le=>[...He,...le]),z(!Ce.last),F(!1)}).catch(Ce=>{console.error(Ce),F(!1)})},se=Z=>{const{scrollTop:te}=Z.target;if(te===0&&C&&!M&&!w){const ge=T+1;E(ge),V(ge)}};N.useEffect(()=>{var Z;T===0&&((Z=ee.current)==null||Z.scrollIntoView({behavior:"smooth"}))},[u,o,s]);const Ne=async()=>{var Z,te;try{const ge=await O.messages.getContacts();L({friends:ge.friends||[],classmates:ge.classmates||[],administration:ge.administration||[],others:ge.others||[]}),((Z=ge.friends)==null?void 0:Z.length)>0?$("friends"):((te=ge.classmates)==null?void 0:te.length)>0?$("classmates"):$("administration")}catch(ge){console.error(ge)}},ie=(Z,te="TEXT")=>{if(!Z.trim()&&te==="TEXT")return;if(w){q(Z);return}if(!x||!o)return;const ge={senderId:e.id,recipientId:o.id,senderName:e.fullName,recipientName:o.fullName,content:Z,type:te,isRead:!1};try{x.send("/app/chat",{},JSON.stringify(ge)),h(Ce=>[...Ce,{...ge,timestamp:new Date}]),te==="TEXT"&&g("")}catch(Ce){console.error("Kunde inte skicka",Ce)}},q=async Z=>{const te=n.pathname.match(/\/course\/([^\/]+)/),ge=te?te[1]:null,Ce=r||ge;if(_(Le=>[...Le,{role:"user",text:Z}]),g(""),A(!0),!Ce){setTimeout(()=>{_(Le=>[...Le,{role:"ai",text:" Du mste vara inne p en kurssida fr att jag ska kunna svara p frgor om kursen."}]),A(!1)},500);return}try{const Le=await O.ai.tutor.chat(Ce,Z);_(He=>[...He,{role:"ai",text:Le.answer}])}catch(Le){console.error("Failed to chat with AI",Le),Le.message&&Le.message.includes("403")?_(He=>[...He,{role:"ai",text:` **Denna funktion krver PRO eller ENTERPRISE.**

Uppgradera din licens fr att f tillgng till din personliga AI-tutor.`}]):_(He=>[...He,{role:"ai",text:"Ojd, ngot gick fel. Frsk igen senare. "}])}finally{A(!1)}},H=async Z=>{if(w)return;const te=Z.target.files[0];if(!te)return;const ge=new FormData;ge.append("file",te),ge.append("title","Chat Image"),ge.append("type","IMAGE");try{const Ce=await O.documents.upload(e.id,ge);Ce&&Ce.fileUrl&&ie(Ce.fileUrl,"IMAGE")}catch{}};return s?a.jsxs("div",{className:"fixed bottom-24 lg:bottom-6 right-6 w-96 h-[500px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden z-50 animate-in slide-in-from-bottom-10 flex flex-col ring-1 ring-black/5 max-w-[calc(100vw-3rem)]",children:[a.jsxs("div",{className:`p-4 text-white flex justify-between items-center shrink-0 shadow-md z-10 transition-colors duration-300 ${w?"bg-gradient-to-r from-purple-600 to-pink-600":"bg-indigo-600"}`,children:[a.jsx("div",{className:"flex items-center gap-3",children:w?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jfe,{size:20}),a.jsx("span",{className:"font-bold text-sm",children:"AI Tutor"}),a.jsx("span",{className:"text-[10px] bg-white/20 px-1.5 py-0.5 rounded font-mono",children:"BETA"})]}):o?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>l(null),className:"hover:bg-white/20 p-1.5 rounded-full transition-colors",children:a.jsx(vt,{size:18})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{className:"font-bold text-sm flex items-center gap-1",children:[o.fullName,a.jsx(Nd,{to:`/profile/${o.id}`,className:"text-indigo-200 hover:text-white",title:"Visa profil",children:a.jsx(Wo,{size:12})})]}),a.jsx("span",{className:"text-[10px] text-indigo-200 uppercase tracking-wider",children:o.role})]})]}):a.jsxs("span",{className:"font-bold flex items-center gap-2",children:[a.jsx(Yl,{size:20})," ",t("chat.messenger")]})}),a.jsx("button",{onClick:()=>i(!1),className:"hover:bg-white/20 p-1.5 rounded-full transition-colors",children:a.jsx(Age,{size:20})})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex relative bg-gray-50",children:[!o&&a.jsxs("div",{className:"w-16 bg-gray-100 dark:bg-[#1E1F20] border-r border-gray-200 dark:border-[#3c4043] flex flex-col items-center py-4 gap-4 shrink-0",children:[a.jsx("button",{onClick:()=>{k(!1),$("friends")},title:"Vnner",className:`p-2 rounded-xl transition-all ${!w&&K==="friends"?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:a.jsx(vt,{size:20})}),a.jsxs("button",{onClick:()=>{k(!1),$("classmates")},title:"Klasskamrater",className:`p-2 rounded-xl transition-all ${!w&&K==="classmates"?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[a.jsx(vt,{size:20}),a.jsx("span",{className:"text-[8px] font-bold block text-center -mt-1",children:"Klass"})]}),a.jsxs("button",{onClick:()=>{k(!1),$("administration")},title:"Administration & Lrare",className:`p-2 rounded-xl transition-all ${!w&&K==="administration"?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[a.jsx(vt,{size:20}),a.jsx("span",{className:"text-[8px] font-bold block text-center -mt-1",children:"Admin"})]}),a.jsx("div",{className:"w-8 h-[1px] bg-gray-300 dark:bg-gray-700 my-1"}),a.jsxs("button",{onClick:()=>{k(!0),l(null)},title:"AI Tutor",className:`p-2 rounded-xl transition-all ${w?"bg-gradient-to-br from-purple-500 to-pink-500 text-white shadow-md":"text-purple-600 hover:bg-purple-100"}`,children:[a.jsx(dr,{size:20}),a.jsx("span",{className:"text-[8px] font-bold block text-center -mt-1",children:"AI"})]})]}),a.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:w?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50/50",children:[j.map((Z,te)=>a.jsx("div",{className:`flex ${Z.role==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[85%] px-3 py-2 rounded-2xl text-sm shadow-sm ${Z.role==="user"?"bg-purple-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-100 rounded-bl-none"}`,children:a.jsx("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:Z.text.replace(/\n/g,"<br/>")}})})},te)),S&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-white px-4 py-3 rounded-2xl rounded-bl-none shadow-sm border border-gray-100",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full animate-bounce"})]})})}),a.jsx("div",{ref:B})]}),a.jsxs("div",{className:"p-3 bg-white border-t flex items-center gap-2",children:[a.jsx("input",{className:"flex-1 bg-gray-100 border-none rounded-full px-4 py-2 text-sm focus:ring-2 focus:ring-purple-500 outline-none transition-all",placeholder:"Frga AI om kursen...",value:f,onChange:Z=>g(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&ie(f)}),a.jsx("button",{onClick:()=>ie(f),disabled:!f.trim()||S,className:"p-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full hover:opacity-90 transition-opacity disabled:opacity-50",children:a.jsx(Wr,{size:18})})]})]}):o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",onScroll:se,children:[M&&a.jsx("div",{className:"text-center text-xs text-gray-400",children:"Loading..."}),u.filter(Z=>Z.senderId===e.id&&Z.recipientId===o.id||Z.senderId===o.id&&Z.recipientId===e.id).map((Z,te)=>{const ge=Z.senderId===e.id;return a.jsx("div",{className:`flex ${ge?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[75%] p-3 rounded-2xl shadow-sm text-sm ${ge?"bg-indigo-600 text-white rounded-br-none":"bg-white border text-gray-800 rounded-bl-none"}`,children:[Z.type==="IMAGE"?a.jsx("img",{src:Z.content,alt:t("chat.image"),className:"rounded-lg max-w-full border border-white/20"}):a.jsx("p",{children:Z.content}),a.jsx("div",{className:"text-[10px] mt-1 text-right opacity-70",children:new Date(Z.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},te)}),a.jsx("div",{ref:ee})]}),a.jsxs("div",{className:"p-3 bg-white border-t flex items-center gap-2",children:[a.jsxs("label",{className:"p-2 text-gray-400 hover:text-indigo-600 cursor-pointer hover:bg-gray-100 rounded-full transition-colors",children:[a.jsx(Dd,{size:20}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:H})]}),a.jsx("input",{className:"flex-1 bg-gray-100 border-none rounded-full px-4 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:t("chat.type_placeholder"),value:f,onChange:Z=>g(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&ie(f)}),a.jsx("button",{onClick:()=>ie(f),disabled:!f.trim(),className:"p-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition-colors disabled:opacity-50",children:a.jsx(Wr,{size:18})})]})]}):a.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[a.jsxs("div",{className:"text-xs font-bold text-gray-400 uppercase p-3 tracking-wider border-b border-gray-100 mb-2",children:[K==="friends"&&"Vnner",K==="classmates"&&"Klasskamrater",K==="administration"&&"Administration"]}),c.length===0&&a.jsx("div",{className:"text-center text-gray-400 p-4 text-xs italic",children:"Inga kontakter i denna kategori."}),c.map(Z=>{var te,ge;return a.jsxs("div",{onClick:()=>l(Z),className:"p-3 bg-white mb-2 rounded-xl shadow-sm border border-gray-100 cursor-pointer flex items-center gap-3 hover:bg-indigo-50 hover:border-indigo-200 transition-all group",children:[a.jsxs("div",{className:"w-10 h-10 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold shrink-0 border border-indigo-50 group-hover:bg-indigo-600 group-hover:text-white transition-colors overflow-hidden",children:[Z.profilePictureUrl?a.jsx("img",{src:Z.profilePictureUrl,className:"w-full h-full object-cover",onError:Ce=>{Ce.target.style.display="none",Ce.target.nextSibling.style.display="block"}}):null,a.jsxs("span",{style:{display:Z.profilePictureUrl?"none":"block"},children:[(te=Z.firstName)==null?void 0:te[0],(ge=Z.lastName)==null?void 0:ge[0]]})]}),a.jsxs("div",{className:"overflow-hidden",children:[a.jsx("div",{className:"font-bold text-gray-800 text-sm truncate",children:Z.fullName}),a.jsx("div",{className:"text-xs text-gray-500 truncate",children:Z.role})]})]},Z.id)})]})})]})]}):a.jsxs("div",{className:"fixed bottom-24 lg:bottom-6 right-6 z-50 group transition-all duration-300",children:[p>0&&a.jsx("div",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full border-2 border-white shadow-lg animate-bounce z-50",children:p}),a.jsx("button",{onClick:()=>i(!0),className:`w-14 h-14 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full shadow-2xl flex items-center justify-center transition-all hover:scale-110 hover:rotate-3 ${v?"ring-4 ring-red-400 animate-pulse":""}`,children:a.jsx(Yl,{size:28})}),a.jsx("div",{className:"absolute bottom-16 right-0 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:t("chat.title")})]})},Ld=({currentUser:t,API_BASE:e,token:r})=>a.jsx(L0e,{currentUser:t,API_BASE:e,token:r}),gm=({className:t="w-96",inputClassName:e="bg-gray-100 dark:bg-[#282a2c]"})=>{const[r,n]=N.useState(""),[s,i]=N.useState({users:[],courses:[],documents:[],events:[]}),[o,l]=N.useState(!1),[c,d]=N.useState(!1),[u,h]=N.useState(-1),f=N.useRef(null),g=N.useRef(null),x=Et();N.useEffect(()=>{const j=setTimeout(async()=>{if(r.trim().length>=2){d(!0);try{const _=await O.search.global(r);i(_||{users:[],courses:[],documents:[],events:[]}),l(!0)}catch(_){console.error("Search failed:",_),i({users:[],courses:[],documents:[],events:[]})}finally{d(!1)}}else i({users:[],courses:[],documents:[],events:[]}),l(!1)},300);return()=>clearTimeout(j)},[r]),N.useEffect(()=>{const j=_=>{g.current&&!g.current.contains(_.target)&&!f.current.contains(_.target)&&l(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]);const m=[...s.users.map(j=>({...j,type:"user"})),...s.courses.map(j=>({...j,type:"course"})),...s.documents.map(j=>({...j,type:"document"})),...s.events.map(j=>({...j,type:"event"}))],p=m.length>0,b=j=>{var _;j.key==="ArrowDown"?(j.preventDefault(),h(S=>S<m.length-1?S+1:S)):j.key==="ArrowUp"?(j.preventDefault(),h(S=>S>0?S-1:S)):j.key==="Enter"?(j.preventDefault(),u>=0&&u<m.length&&v(m[u])):j.key==="Escape"&&(l(!1),(_=f.current)==null||_.blur())},v=j=>{j.type==="user"?x(`/profile/${j.id}`):j.type==="course"?x(`/courses/${j.id}`):j.type==="document"?window.open(j.url,"_blank"):j.type==="event"&&x(`/calendar?event=${j.id}`),l(!1),n("")},y=j=>{switch(j){case"user":return a.jsx(jr,{size:16,className:"text-blue-500"});case"course":return a.jsx(gt,{size:16,className:"text-orange-500"});case"document":return a.jsx(xt,{size:16,className:"text-green-500"});case"event":return a.jsx(zt,{size:16,className:"text-purple-500"});default:return a.jsx(gr,{size:16})}},w=j=>{switch(j){case"user":return"Anvndare";case"course":return"Kurs";case"document":return"Dokument";case"event":return"Hndelse";default:return"Resultat"}},k=j=>j.type==="user"?`${j.firstName} ${j.lastName}`:j.title||j.name;return a.jsxs("div",{className:`relative ${t}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:f,type:"text",value:r,onChange:j=>n(j.target.value),onKeyDown:b,onFocus:()=>r.length>=2&&p&&l(!0),placeholder:"Sk...",className:`w-full border-none rounded-2xl pl-5 pr-14 py-3 text-sm font-medium outline-none focus:ring-2 focus:ring-opacity-20 transition-all ${e}`}),a.jsx(gr,{size:18,className:`absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none ${e.includes("text-white")||e.includes("text-black")?"opacity-50 inherit":"text-gray-400"}`}),r&&a.jsx("button",{onClick:()=>{n(""),l(!1)},className:"absolute right-10 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Je,{size:16})}),c&&a.jsx(ft,{size:16,className:"absolute right-10 top-1/2 -translate-y-1/2 text-gray-400 animate-spin"})]}),o&&a.jsxs("div",{ref:g,className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-[#1E1F20] rounded-2xl shadow-xl border border-gray-100 dark:border-gray-800 overflow-hidden z-50 max-h-96 overflow-y-auto",children:[!p&&!c&&a.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:['Inga resultat fr "',r,'"']}),p&&a.jsx("div",{className:"py-2",children:m.map((j,_)=>a.jsxs("button",{onClick:()=>v(j),className:`w-full px-4 py-3 flex items-center gap-3 text-left transition-colors ${_===u?"bg-gray-100 dark:bg-[#282a2c]":"hover:bg-gray-50 dark:hover:bg-[#282a2c]"}`,children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-[#282a2c] flex items-center justify-center",children:y(j.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:k(j)}),a.jsx("p",{className:"text-xs text-gray-500",children:w(j.type)})]})]},`${j.type}-${j.id}`))}),p&&a.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-800",children:a.jsx("p",{className:"text-xs text-gray-400",children:"Tryck  fr att navigera, Enter fr att vlja, Esc fr att stnga"})})]})]})},bh=({className:t=""})=>{const{currentUser:e}=At(),[r,n]=N.useState(0),[s,i]=N.useState([]),[o,l]=N.useState(!1),[c,d]=N.useState(!1),u=N.useRef(null),h=Et();N.useEffect(()=>{if(!(e!=null&&e.id))return;const b=async()=>{try{const y=await O.notifications.getUnreadCount(e.id);n(y.count||0)}catch(y){console.error("Failed to fetch unread count:",y)}};b();const v=setInterval(b,3e4);return()=>clearInterval(v)},[e==null?void 0:e.id]),N.useEffect(()=>{o&&(e!=null&&e.id)&&f()},[o,e==null?void 0:e.id]),N.useEffect(()=>{const b=v=>{u.current&&!u.current.contains(v.target)&&l(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const f=async()=>{d(!0);try{const b=await O.notifications.getUserNotifs(e.id);i(b||[])}catch(b){console.error("Failed to fetch notifications:",b)}finally{d(!1)}},g=async b=>{if(!b.isRead)try{await O.notifications.markRead(b.id),n(v=>Math.max(0,v-1)),i(v=>v.map(y=>y.id===b.id?{...y,isRead:!0}:y))}catch(v){console.error("Failed to mark notification as read:",v)}b.actionUrl&&(h(b.actionUrl),l(!1))},x=async()=>{try{await O.notifications.markAllAsRead(e.id),n(0),i(b=>b.map(v=>({...v,isRead:!0})))}catch(b){console.error("Failed to mark all as read:",b)}},m=b=>{switch(b){case"SUCCESS":return"";case"WARNING":return"";case"INFO":default:return""}},p=b=>{const v=new Date(b),w=new Date-v,k=Math.floor(w/6e4),j=Math.floor(k/60),_=Math.floor(j/24);return k<1?"Just nu":k<60?`${k}m sedan`:j<24?`${j}h sedan`:_<7?`${_}d sedan`:v.toLocaleDateString("sv-SE")};return a.jsxs("div",{className:`relative ${t}`,ref:u,children:[a.jsxs("button",{onClick:()=>l(!o),className:"w-10 h-10 rounded-full bg-zinc-900/50 border border-white/5 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 transition-all relative group",children:[a.jsx(hh,{size:18}),r>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-[#121212]",children:r>9?"9+":r})]}),o&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white dark:bg-[#1E1F20] rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 overflow-hidden z-50",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-800 flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-sm text-gray-900 dark:text-white",children:"Notifikationer"}),r>0&&a.jsxs("button",{onClick:x,className:"text-xs text-blue-500 hover:text-blue-600 font-medium flex items-center gap-1",children:[a.jsx(nge,{size:14}),"Markera alla som lsta"]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:c?a.jsx("div",{className:"p-8 text-center text-gray-500 text-sm",children:"Laddar notifikationer..."}):s.length===0?a.jsx("div",{className:"p-8 text-center text-gray-500 text-sm",children:"Inga notifikationer"}):s.slice(0,10).map(b=>a.jsxs("button",{onClick:()=>g(b),className:`w-full px-4 py-3 flex items-start gap-3 text-left transition-colors border-b border-gray-50 dark:border-gray-800 last:border-b-0 ${b.isRead?"bg-white dark:bg-[#1E1F20] hover:bg-gray-50 dark:hover:bg-[#282a2c]":"bg-blue-50 dark:bg-blue-900/10 hover:bg-blue-100 dark:hover:bg-blue-900/20"}`,children:[a.jsx("div",{className:"text-xl mt-0.5",children:m(b.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm ${b.isRead?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white font-medium"}`,children:b.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p(b.createdAt)})]}),!b.isRead&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})]},b.id))}),s.length>0&&a.jsx("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-800 text-center",children:a.jsx("button",{onClick:()=>{h("/notifications"),l(!1)},className:"text-xs text-blue-500 hover:text-blue-600 font-medium",children:"Visa alla notifikationer"})})]})]})},I5=({isOpen:t,onClose:e})=>{const r=Et(),[n,s]=N.useState([]),[i,o]=N.useState(!1);N.useEffect(()=>{if(t){l();const c=setInterval(l,3e4);return()=>clearInterval(c)}},[t]);const l=async()=>{o(!0);try{const c=await O.users.getRelated(),d=new Date(Date.now()-5*60*1e3),u=c.filter(h=>{if(!h.lastActive)return!1;let f;return Array.isArray(h.lastActive)?f=new Date(h.lastActive[0],h.lastActive[1]-1,h.lastActive[2],h.lastActive[3],h.lastActive[4],h.lastActive[5]||0):f=new Date(h.lastActive),f>d}).map(h=>({id:h.id,name:h.fullName||`${h.firstName} ${h.lastName}`,status:"online",avatar:h.profilePictureUrl}));s(u)}catch(c){console.error("Failed to fetch friends",c)}finally{o(!1)}};return t?a.jsxs("div",{className:"absolute top-16 right-20 w-80 bg-white dark:bg-[#1E1F20] rounded-2xl shadow-xl border border-gray-100 dark:border-[#3c4043] z-50 animate-in slide-in-from-top-2 fade-in duration-200 overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center bg-gray-50 dark:bg-[#282a2c]",children:[a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(jr,{size:18,className:"text-indigo-500"}),"Online Vnner",a.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-2 py-0.5 rounded-full",children:n.length})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:a.jsx(Je,{size:18})})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto custom-scrollbar p-2",children:i&&n.length===0?a.jsx("div",{className:"text-center py-4 text-gray-400 text-xs",children:"Laddar..."}):n.length>0?a.jsx("div",{className:"space-y-1",children:n.map(c=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-xl hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-700 dark:text-indigo-300 font-bold overflow-hidden",children:c.avatar?a.jsx("img",{src:c.avatar,alt:c.name,className:"w-full h-full object-cover"}):c.name.charAt(0)}),a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white dark:border-[#1E1F20] bg-green-500"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.name}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:"Online"})]})]}),a.jsx("button",{onClick:()=>r("/messages",{state:{recipientId:c.id}}),className:"p-2 text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Skicka meddelande",children:a.jsx(Yl,{size:18})})]},c.id))}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Inga vnner online just nu."})}),a.jsx("div",{className:"p-3 border-t border-gray-100 dark:border-[#3c4043] bg-gray-50 dark:bg-[#282a2c]",children:a.jsx("button",{className:"w-full py-2 text-xs font-bold text-center text-gray-500 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Visa alla vnner"})})]}):null},As=({title:t,items:e,sidebarOpen:r,roleName:n})=>{const s=zn(),[i,o]=N.useState(!1);return e.length===0?null:a.jsxs("div",{className:"mb-3",children:[r?a.jsxs("button",{onClick:()=>o(!i),className:"w-full flex items-center justify-between px-4 mb-2 text-[11px] font-bold uppercase tracking-widest text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:[a.jsx("span",{children:t}),i?a.jsx(or,{size:14}):a.jsx(Mo,{size:14})]}):a.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-800 mx-4"}),a.jsx("div",{className:`space-y-1 transition-all duration-300 overflow-hidden ${i&&r?"max-h-0 opacity-0":"max-h-[1000px] opacity-100"}`,children:e.map(l=>(s.pathname===l.path||l.path==="/admin"&&s.pathname.startsWith("/enterprise"),a.jsx(lm,{to:l.path,className:({isActive:c})=>`relative flex items-center px-4 py-2 rounded-xl transition-all duration-200 group ${c||l.path==="/admin"&&s.pathname.startsWith("/enterprise")?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-[#282a2c] hover:text-gray-900 dark:hover:text-gray-200"}`,children:({isActive:c})=>{const d=c||l.path==="/admin"&&s.pathname.startsWith("/enterprise");return a.jsxs(a.Fragment,{children:[d&&r&&a.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-indigo-600 rounded-r-full"}),a.jsx("div",{className:`${!r&&"mx-auto"} ${d?"scale-110 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:ae.cloneElement(l.icon,{size:20})}),r&&a.jsx("span",{className:`ml-3 text-sm font-medium ${d?"font-semibold":""}`,children:l.label}),!r&&a.jsxs("div",{className:"absolute left-16 bg-gray-900 dark:bg-gray-800 text-white text-xs px-3 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-lg",children:[l.label,a.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 dark:bg-gray-800 rotate-45"})]})]})}},l.path)))})]})},Vu="/assets/Logo_top-msSSKKpP.png",R0e=({children:t})=>{var _;const{currentUser:e,logout:r,systemSettings:n,theme:s,toggleTheme:i,API_BASE:o}=At(),{isModuleActive:l}=oa(),{t:c}=nt(),d=Et();zn();const[u,h]=N.useState(!0),[f,g]=N.useState(!1),[x,m]=N.useState(!1),p=()=>{r(),d("/login")},v=wo(e==null?void 0:e.profilePictureUrl);l("GAMIFICATION"),l("ANALYTICS");const y=l("DARK_MODE"),w=localStorage.getItem("token"),k=((_=e==null?void 0:e.role)==null?void 0:_.name)||(e==null?void 0:e.role);N.useEffect(()=>{if(!e)return;const S=async()=>{var T,E;try{if((E=(T=window.api)==null?void 0:T.users)!=null&&E.ping)await window.api.users.ping();else{const{api:C}=await m5(async()=>{const{api:z}=await Promise.resolve().then(()=>i5);return{api:z}},void 0);await C.users.ping()}}catch(C){console.error("Activity ping failed",C)}};S();const A=setInterval(S,5*60*1e3);return()=>clearInterval(A)},[e]),N.useEffect(()=>{const S=()=>{m(window.scrollY>0)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]);const j={main:[{path:"/",icon:a.jsx(wi,{size:20}),label:c("sidebar.dashboard")},{path:"/catalog",icon:a.jsx(Ha,{size:20}),label:c("sidebar.catalog")}],education:[...k==="TEACHER"||k==="ADMIN"?[{path:"/resources",icon:a.jsx(gt,{size:20}),label:c("sidebar.resource_bank")}]:[],...k==="TEACHER"||k==="ADMIN"?[{path:"/evaluations/manage",icon:a.jsx(Va,{size:20}),label:"Utvrderingar"}]:[],...k==="TEACHER"?[{path:"/?tab=COURSES",icon:a.jsx(gt,{size:20}),label:c("sidebar.my_courses")||"Mina kurser"}]:[],...k==="STUDENT"?[{path:"/my-courses",icon:a.jsx(gt,{size:20}),label:c("sidebar.my_courses")||"Mina kurser"}]:[],...["STUDENT","TEACHER","ADMIN"].includes(k)?[{path:"/ebooks",icon:a.jsx(il,{size:20}),label:c("sidebar.ebooks")}]:[]],tools:[{path:"/calendar",icon:a.jsx(zt,{size:20}),label:c("sidebar.calendar")},{path:"/documents",icon:a.jsx(xt,{size:20}),label:c("sidebar.documents")},{path:"/communication",icon:a.jsx(er,{size:20}),label:c("shortcuts.messages")||"Meddelanden"},{path:"/support",icon:a.jsx(Pn,{size:20}),label:c("sidebar.support")},...l("EDUGAME")?[{path:"/shop",icon:a.jsx(cw,{size:20}),label:"Butik"}]:[],...l("WELLBEING_CENTER")&&["STUDENT","ROLE_STUDENT","ADMIN","ROLE_ADMIN","REKTOR","ROLE_REKTOR","PRINCIPAL","ROLE_PRINCIPAL"].includes(k)?[{path:"/wellbeing-center",icon:a.jsx(Lr,{size:20}),label:"Well-being Center"}]:[]],admin:[...k==="ADMIN"||k==="ROLE_ADMIN"?[{path:"/admin",icon:a.jsx(yn,{size:20}),label:c("sidebar.admin")}]:[],...l("WELLBEING_CENTER")&&(k==="HALSOTEAM"||k==="ROLE_HALSOTEAM")?[{path:"/wellbeing-center/inbox",icon:a.jsx(Lr,{size:20}),label:"E-hlsa Inbox"}]:[],...l("ANALYTICS")&&(k==="ADMIN"||k==="ROLE_ADMIN")?[{path:"/analytics",icon:a.jsx(z0,{size:20}),label:c("sidebar.analytics")}]:[]],rektor:[...["REKTOR","ROLE_REKTOR","PRINCIPAL","ROLE_PRINCIPAL"].includes(k)?[{path:"/principal/dashboard",icon:a.jsx(md,{size:20}),label:"Rektorspaket"},{path:"/principal/management-reports",icon:a.jsx(Sr,{size:20}),label:"Ledningsrapport"},{path:"/principal/tools",icon:a.jsx(yn,{size:20}),label:"Verktyg & Admin"}]:[]]};return a.jsxs("div",{className:"flex min-h-screen text-gray-900 dark:text-[#E3E3E3] font-sans transition-colors duration-300",style:{background:"var(--app-background)"},children:[a.jsx("style",{children:`
                @media (prefers-color-scheme: dark) {
                    .dark-mode-bg { background: var(--app-background-dark) !important; }
                }
                :root.dark body { background: var(--app-background-dark) !important; }
                /* Helper for React wrapper */
                .app-wrapper { background: var(--app-background); }
                .dark .app-wrapper { background: var(--app-background-dark); }
            `}),a.jsx("div",{className:"fixed inset-0 -z-10 app-wrapper transition-colors duration-300 pointer-events-none"}),a.jsxs("aside",{className:`
                sticky top-0 h-screen transition-all duration-300 z-50 flex flex-col
                ${u?"w-72":"w-20"}
                bg-white dark:bg-[#1E1F20] border-r border-gray-100 dark:border-[#282a2c]
                hidden lg:flex
            `,style:{backdropFilter:"none"},children:[a.jsx("div",{className:"h-16 flex items-center justify-between px-6 border-b border-gray-100 dark:border-[#282a2c] shrink-0",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-9 h-9 flex items-center justify-center mr-3",children:a.jsx("img",{src:Vu,alt:"EduFlex Logo",className:"w-full h-full object-contain"})}),a.jsx("span",{className:`font-bold text-xl tracking-tight text-gray-800 dark:text-white truncate block ${!u&&"lg:hidden"}`,children:(n==null?void 0:n.site_name)||"EduFlex"})]})}),a.jsxs("nav",{className:"flex-1 py-2 px-3 space-y-1 overflow-y-auto custom-scrollbar",children:[a.jsx(As,{title:c("sidebar.categories.main"),items:j.main,sidebarOpen:u}),j.rektor.length>0&&a.jsx(As,{title:"Rektorspaket",items:j.rektor,sidebarOpen:u}),a.jsx(As,{title:c("sidebar.categories.education"),items:j.education,sidebarOpen:u}),a.jsx(As,{title:c("sidebar.categories.tools"),items:j.tools,sidebarOpen:u}),j.admin.length>0&&a.jsx(As,{title:c("sidebar.categories.admin"),items:j.admin,sidebarOpen:u})]}),a.jsx("div",{className:`p-4 border-t border-gray-100 dark:border-[#282a2c] transition-all ${!u&&"px-2"}`,children:a.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors relative group",onClick:()=>d("/profile"),children:[a.jsx("div",{className:"shrink-0 w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 flex items-center justify-center overflow-hidden",children:v?a.jsx("img",{src:v,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx(jr,{size:20,className:"text-indigo-600 dark:text-indigo-400"})}),u&&a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-bold text-sm text-gray-900 dark:text-gray-200 truncate",children:e==null?void 0:e.fullName}),a.jsx("p",{className:"text-[10px] uppercase font-bold text-indigo-600 dark:text-indigo-400 tracking-wider truncate",children:k})]}),!u&&a.jsxs("div",{className:"absolute left-16 bg-gray-900 dark:bg-gray-800 text-white text-xs px-3 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-lg",children:[c("sidebar.my_profile"),a.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 dark:bg-gray-800 rotate-45"})]})]})}),a.jsxs("div",{className:"p-4 border-t border-gray-100 dark:border-[#282a2c] space-y-2",children:[y&&a.jsxs("button",{onClick:i,className:`flex items-center w-full px-3 py-2 rounded-xl transition-colors bg-gray-50 dark:bg-[#282a2c] hover:bg-gray-100 dark:hover:bg-[#3c4043] text-gray-600 dark:text-gray-300 ${!u&&"justify-center"}`,children:[s==="dark"?a.jsx(xK,{size:20}):a.jsx(ow,{size:20}),u&&a.jsx("span",{className:"ml-3 font-medium text-sm",children:c(s==="dark"?"common.light_mode":"common.dark_mode")})]}),a.jsxs("button",{onClick:p,className:`flex items-center w-full px-3 py-3 rounded-xl text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-colors ${!u&&"justify-center"}`,children:[a.jsx(oo,{size:20}),u&&a.jsx("span",{className:"ml-3 font-bold text-sm",children:c("sidebar.logout")})]}),u&&a.jsx("p",{className:"text-[10px] text-gray-300 dark:text-gray-600 text-center flex justify-center mt-2",children:"EduFlex v1.0.3"})]})]}),a.jsxs("main",{className:"flex-1 transition-all duration-300 ml-0 p-0 bg-gray-50 dark:bg-[#131314]",children:[a.jsxs("header",{className:`h-16 flex items-center justify-between px-8 sticky top-0 z-40 transition-all ${x?"bg-white/80 dark:bg-[#1E1F20]/80 backdrop-blur-md border-b border-gray-100 dark:border-[#282a2c]":"bg-transparent"}`,children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>h(!u),className:"p-2 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-xl text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hidden lg:block",title:u?c("common.minimize_menu")||"Minimera meny":c("common.expand_menu")||"Expandera meny",children:u?a.jsx(Je,{size:20}):a.jsx(sw,{size:20})}),a.jsx(gm,{})]}),a.jsxs("div",{className:"flex items-center gap-2 relative",children:[a.jsxs("button",{onClick:()=>g(!f),className:`relative p-2.5 rounded-full transition-colors ${f?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400":"hover:bg-gray-100 text-gray-500 dark:text-gray-400 dark:hover:bg-[#282a2c]"}`,title:c("common.online_friends")||"Online Vnner",children:[a.jsx(vt,{size:20}),a.jsxs("span",{className:"absolute top-2 right-2 flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})]}),a.jsx(I5,{isOpen:f,onClose:()=>g(!1)}),a.jsx(bh,{})]})]}),a.jsx("div",{className:"flex-1 p-4 lg:p-8 relative custom-scrollbar",children:t})]}),l("CHAT")&&a.jsx("div",{className:"hidden lg:block",children:a.jsx(Ld,{currentUser:e,API_BASE:o,token:w})})]})},P0e=({children:t})=>{var _,S;const{currentUser:e,logout:r,systemSettings:n,theme:s,toggleTheme:i,API_BASE:o}=At(),{isModuleActive:l}=oa(),{t:c}=nt(),d=Et(),u=zn(),[h,f]=ae.useState(!0),[g,x]=ae.useState(!1),m=()=>{r(),d("/login")},b=(()=>{if(!(e!=null&&e.profilePictureUrl))return null;let A=e.profilePictureUrl;return A.includes("minio:9000")&&(A=A.replace("minio:9000","localhost:9000")),A.startsWith("http")?A:`${window.location.origin}${A}`})();l("GAMIFICATION");const v=l("ANALYTICS"),y=l("DARK_MODE"),w=localStorage.getItem("token"),k=((_=e==null?void 0:e.role)==null?void 0:_.name)||(e==null?void 0:e.role),j=[{path:"/",icon:a.jsx(wi,{size:20}),label:c("sidebar.dashboard")},{path:"/documents",icon:a.jsx(xt,{size:20}),label:c("sidebar.documents")},{path:"/catalog",icon:a.jsx(gt,{size:20}),label:c("sidebar.catalog")},...["STUDENT","TEACHER","ADMIN"].includes(k)?[{path:"/ebooks",icon:a.jsx(il,{size:20}),label:c("sidebar.library")||"Bibliotek"}]:[],{path:"/calendar",icon:a.jsx(zt,{size:20}),label:c("sidebar.calendar")||"Kalender"},{path:"/communication",icon:a.jsx(er,{size:20}),label:c("shortcuts.messages")||"Meddelanden"},...k==="TEACHER"||k==="ADMIN"?[{path:"/resources",icon:a.jsx(Ha,{size:20}),label:c("sidebar.resource_bank")}]:[],...k==="ADMIN"?[{path:"/admin",icon:a.jsx(yn,{size:20}),label:c("sidebar.admin")}]:[],...v&&(k==="ADMIN"||k==="ROLE_ADMIN")?[{path:"/analytics",icon:a.jsx(Sr,{size:20}),label:c("sidebar.analytics")}]:[],{path:"/support",icon:a.jsx(Pn,{size:20}),label:c("sidebar.support")||"Kontakt & Support"},...l("WELLBEING_CENTER")&&["STUDENT","ROLE_STUDENT","ADMIN","ROLE_ADMIN","REKTOR","ROLE_REKTOR"].includes(k)?[{path:"/wellbeing-center",icon:a.jsx(Lr,{size:20}),label:"Well-being Center"}]:[],...l("WELLBEING_CENTER")&&(k==="HALSOTEAM"||k==="ROLE_HALSOTEAM")?[{path:"/wellbeing-center/inbox",icon:a.jsx(Lr,{size:20}),label:"E-hlsa Inbox"}]:[]];return a.jsxs("div",{className:"flex min-h-screen w-full text-gray-900 dark:text-[#E3E3E3] font-sans transition-colors duration-300 p-4 gap-4",style:{background:"var(--app-background)"},children:[a.jsx("style",{children:`
                @media (prefers-color-scheme: dark) {
                    .dark-mode-bg { background: var(--app-background-dark) !important; }
                }
                :root.dark body { background: var(--app-background-dark) !important; }
                /* Helper for React wrapper */
                .app-wrapper { background: var(--app-background); }
                .dark .app-wrapper { background: var(--app-background-dark); }
            `}),a.jsx("div",{className:"fixed inset-0 -z-10 app-wrapper transition-colors duration-300 pointer-events-none"}),a.jsxs("aside",{className:`
                ${h?"w-64":"w-20"} 
                rounded-[30px] border-none shadow-none bg-white dark:bg-[#1E1F20]
                transition-all duration-300 flex flex-col z-20 sticky top-4 h-[calc(100vh-2rem)]
            `,children:[a.jsxs("div",{className:"h-24 flex items-center px-8",children:[a.jsx("div",{className:"w-8 h-8 bg-black dark:bg-white rounded-lg flex items-center justify-center text-white dark:text-black font-bold text-xl mr-3 shadow-sm",children:n!=null&&n.site_name?n.site_name[0]:"E"}),h&&a.jsx("span",{className:"font-bold text-xl tracking-tight text-gray-800 dark:text-white truncate",children:(n==null?void 0:n.site_name)||"EduFlex"})]}),a.jsx("nav",{className:"flex-1 py-3 px-4 space-y-1 overflow-y-auto custom-scrollbar",children:j.map(A=>a.jsx(lm,{to:A.path,className:({isActive:T})=>`flex items-center px-4 py-3 transition-all duration-200 group relative
                                    ${T||A.path==="/admin"&&u.pathname.startsWith("/enterprise")?"text-gray-900 dark:text-white font-bold":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}
                                    `,children:({isActive:T})=>{const E=T||A.path==="/admin"&&u.pathname.startsWith("/enterprise");return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`${!h&&"mx-auto"} ${E?"text-green-800 dark:text-green-400":""}`,children:A.icon}),h&&a.jsx("span",{className:"ml-4 font-medium text-sm",children:A.label})]})}},A.path))}),a.jsxs("div",{className:"p-8 space-y-2",children:[y&&a.jsxs("button",{onClick:i,className:`flex items-center w-full px-3 py-2 rounded-xl transition-colors bg-gray-50 dark:bg-[#282a2c] hover:bg-gray-100 dark:hover:bg-[#3c4043] text-gray-600 dark:text-gray-300 ${!h&&"justify-center"}`,children:[s==="dark"?a.jsx(xK,{size:20}):a.jsx(ow,{size:20}),h&&a.jsx("span",{className:"ml-3 font-medium text-sm",children:c(s==="dark"?"common.light_mode":"common.dark_mode")})]}),a.jsxs("button",{onClick:m,className:`flex items-center w-full px-3 py-3 rounded-xl text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-colors ${!h&&"justify-center"}`,children:[a.jsx(oo,{size:20}),h&&a.jsx("span",{className:"ml-3 font-bold text-sm",children:c("sidebar.logout")})]}),h&&a.jsx("p",{className:"text-[10px] text-gray-300 dark:text-gray-600 text-center mt-2",children:"EduFlex v1.0.3"})]})]}),a.jsxs("main",{className:"flex-1 transition-all duration-300 bg-white dark:bg-[#1E1F20] rounded-[30px] shadow-sm ml-0 p-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsx(gm,{inputClassName:"bg-[var(--app-background)] dark:bg-[var(--app-background-dark)] shadow-inner border-none w-64 text-sm placeholder-gray-500"})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:()=>x(!g),className:`p-2 rounded-full transition-colors relative ${g?"bg-indigo-100 text-indigo-600":"hover:bg-gray-100 text-gray-500"}`,children:[a.jsx(jr,{size:20}),a.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 rounded-full bg-green-500 border border-white"})]}),a.jsx(I5,{isOpen:g,onClose:()=>x(!1)}),a.jsx(bh,{}),a.jsxs("div",{className:"flex flex-col text-right",children:[a.jsx("span",{className:"font-bold text-sm text-gray-900 dark:text-white",children:e==null?void 0:e.fullName}),a.jsx("span",{className:"text-xs text-gray-500",children:e==null?void 0:e.email})]}),a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-gray-100 dark:border-gray-700 cursor-pointer",onClick:()=>d("/profile"),children:b?a.jsx("img",{src:b,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-indigo-100 flex items-center justify-center font-bold text-indigo-800",children:(S=e==null?void 0:e.firstName)==null?void 0:S[0]})})]})]}),t]}),l("CHAT")&&a.jsx(Ld,{currentUser:e,API_BASE:o,token:w})]})},z0e=({children:t})=>{var b,v;const{currentUser:e,logout:r,systemSettings:n,theme:s,toggleTheme:i,API_BASE:o}=At(),{isModuleActive:l}=oa(),{t:c}=nt(),d=Et(),u=zn(),f=(()=>{if(!(e!=null&&e.profilePictureUrl))return null;let y=e.profilePictureUrl;return y.includes("minio:9000")&&(y=y.replace("minio:9000","localhost:9000")),y.startsWith("http")?y:`${window.location.origin}${y}`})();l("GAMIFICATION");const g=l("ANALYTICS");l("DARK_MODE");const x=localStorage.getItem("token"),m=((b=e==null?void 0:e.role)==null?void 0:b.name)||(e==null?void 0:e.role),p=[{path:"/",icon:a.jsx(wi,{size:18}),label:c("sidebar.dashboard")},{path:"/calendar",icon:a.jsx(zt,{size:18}),label:c("sidebar.calendar")||"Kalender"},...m==="TEACHER"||m==="ADMIN"?[{path:"/resources",icon:a.jsx(gt,{size:18}),label:c("sidebar.resource_bank")}]:[],...m==="ADMIN"?[{path:"/admin",icon:a.jsx(yn,{size:18}),label:c("sidebar.admin")}]:[],...g&&m==="ADMIN"?[{path:"/analytics",icon:a.jsx(Sr,{size:18}),label:c("sidebar.analytics")}]:[],{path:"/catalog",icon:a.jsx(Ha,{size:18}),label:c("sidebar.catalog")},...["STUDENT","TEACHER","ADMIN"].includes(m)?[{path:"/ebooks",icon:a.jsx(il,{size:18}),label:c("sidebar.library")||"Bibliotek"}]:[],{path:"/documents",icon:a.jsx(xt,{size:18}),label:c("sidebar.documents")},{path:"/communication",icon:a.jsx(er,{size:18}),label:c("shortcuts.messages")||"Meddelanden"},{path:"/support",icon:a.jsx(Pn,{size:18}),label:c("sidebar.support")||"Kontakt & Support"},...l("WELLBEING_CENTER")&&["STUDENT","ROLE_STUDENT","ADMIN","ROLE_ADMIN","REKTOR","ROLE_REKTOR"].includes(m)?[{path:"/wellbeing-center",icon:a.jsx(Lr,{size:18}),label:"Well-being Center"}]:[],...l("WELLBEING_CENTER")&&(m==="HALSOTEAM"||m==="ROLE_HALSOTEAM")?[{path:"/wellbeing-center/inbox",icon:a.jsx(Lr,{size:18}),label:"E-hlsa Inbox"}]:[]];return a.jsxs("div",{className:"flex flex-col min-h-screen text-gray-900 dark:text-[#E3E3E3] font-sans transition-colors duration-300",style:{background:"var(--app-background)"},children:[a.jsx("style",{children:`
                @media (prefers-color-scheme: dark) {
                    .dark-mode-bg { background: var(--app-background-dark) !important; }
                }
                :root.dark body { background: var(--app-background-dark) !important; }
                .app-wrapper { background: var(--app-background); }
                .dark .app-wrapper { background: var(--app-background-dark); }
            `}),a.jsx("div",{className:"fixed inset-0 -z-10 app-wrapper transition-colors duration-300 pointer-events-none"}),a.jsxs("header",{className:"h-20 px-8 flex items-center justify-between shrink-0 sticky top-0 z-50 bg-[var(--app-background)]/80 backdrop-blur-md transition-colors duration-300",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("div",{className:"h-10 px-4 bg-white dark:bg-[#1E1F20] rounded-full flex items-center justify-center border border-gray-100 dark:border-[#3c4043] shadow-sm",children:a.jsx("span",{className:"font-bold text-lg tracking-tight text-gray-900 dark:text-white",children:(n==null?void 0:n.site_name)||"EduFlex"})})}),a.jsx("nav",{className:"hidden lg:flex items-center gap-2 bg-white/50 dark:bg-[#1E1F20]/50 backdrop-blur-md p-1.5 rounded-full border border-white/20 dark:border-white/10 shadow-sm",children:p.map(y=>{const w=u.pathname===y.path||y.path==="/admin"&&u.pathname.startsWith("/enterprise");return a.jsx(lm,{to:y.path,className:`flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-200 text-sm font-medium
                                ${w?"bg-black text-white dark:bg-white dark:text-black shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-white/80 dark:hover:bg-[#2c2e30]"}`,children:y.label},y.path)})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{className:"p-2.5 bg-white dark:bg-[#1E1F20] rounded-full text-gray-500 hover:text-gray-900 transition-colors shadow-sm border border-gray-100 dark:border-[#3c4043]",children:a.jsx(gr,{size:20})}),a.jsx(bh,{}),a.jsxs("div",{className:"flex items-center gap-3 pl-2 pr-2 py-1.5 bg-white dark:bg-[#1E1F20] rounded-full border border-gray-100 dark:border-[#3c4043] shadow-sm cursor-pointer hover:shadow-md transition-all",onClick:()=>d("/profile"),children:[a.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-100",children:f?a.jsx("img",{src:f,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-xs",children:(v=e==null?void 0:e.firstName)==null?void 0:v[0]})}),a.jsx("span",{className:"text-sm font-bold pr-2 hidden xl:block",children:e==null?void 0:e.firstName})]})]})]}),a.jsx("main",{className:"flex-1 p-4 md:p-6 flex flex-col",children:a.jsx("div",{className:"flex-1 bg-white/80 dark:bg-[#1E1F20]/90 backdrop-blur-xl rounded-[40px] shadow-sm border border-white/50 dark:border-white/5 p-8 relative",children:t})}),l("CHAT")&&a.jsx(Ld,{currentUser:e,API_BASE:o,token:x})]})},$0e=({children:t})=>{var b,v;const{currentUser:e,logout:r,systemSettings:n,theme:s,toggleTheme:i,API_BASE:o}=At(),{isModuleActive:l}=oa(),{t:c}=nt(),d=Et(),u=zn(),h=()=>{r(),d("/login")},g=(()=>{if(!(e!=null&&e.profilePictureUrl))return null;let y=e.profilePictureUrl;return y.includes("minio:9000")&&(y=y.replace("minio:9000","localhost:9000")),y.startsWith("http")?y:`${window.location.origin}${y} `})();l("GAMIFICATION"),l("ANALYTICS");const x=localStorage.getItem("token"),m=((b=e==null?void 0:e.role)==null?void 0:b.name)||(e==null?void 0:e.role),p=[{path:"/",icon:a.jsx(wi,{size:20}),label:c("sidebar.dashboard")},{path:"/catalog",icon:a.jsx($4,{size:20}),label:c("sidebar.catalog")},{path:"/my-courses",icon:a.jsx(gt,{size:20}),label:c("sidebar.my_courses")},...["STUDENT","TEACHER","ADMIN"].includes(m)?[{path:"/ebooks",icon:a.jsx(il,{size:18}),label:c("sidebar.ebooks")}]:[],{path:"/calendar",icon:a.jsx(zt,{size:20}),label:c("sidebar.calendar")},{path:"/documents",icon:a.jsx(xt,{size:20}),label:c("sidebar.documents")},{path:"/communication",icon:a.jsx(er,{size:20}),label:c("shortcuts.messages")||"Meddelanden"},...m==="TEACHER"||m==="ADMIN"?[{path:"/resources",icon:a.jsx(gt,{size:20}),label:c("sidebar.resource_bank")}]:[],...m==="TEACHER"||m==="ADMIN"?[{path:"/evaluations/manage",icon:a.jsx(Va,{size:20}),label:"Utvrderingar"}]:[],{path:"/support",icon:a.jsx(Pn,{size:20}),label:c("sidebar.support")},...l("WELLBEING_CENTER")&&["STUDENT","ROLE_STUDENT","ADMIN","ROLE_ADMIN","REKTOR","ROLE_REKTOR"].includes(m)?[{path:"/wellbeing-center",icon:a.jsx(Lr,{size:20}),label:"Well-being Center"}]:[],...l("WELLBEING_CENTER")&&(m==="HALSOTEAM"||m==="ROLE_HALSOTEAM")?[{path:"/wellbeing-center/inbox",icon:a.jsx(Lr,{size:20}),label:"E-hlsa Inbox"}]:[],...m==="ADMIN"?[{path:"/analytics",icon:a.jsx(Cge,{size:20}),label:c("sidebar.analytics")}]:[],...m==="ADMIN"?[{path:"/admin",icon:a.jsx(yn,{size:20}),label:c("sidebar.admin")}]:[]];return a.jsxs("div",{className:"flex flex-col min-h-screen w-full text-gray-800 dark:text-[#E3E3E3] font-sans transition-colors duration-300",style:{background:"var(--app-background)"},children:[a.jsx("style",{children:`
@media(prefers - color - scheme: dark) {
                    .dark - mode - bg { background: var(--app - background - dark)!important; }
}
                : root.dark body { background: var(--app - background - dark)!important; }
                .app - wrapper { background: var(--app - background); }
                .dark.app - wrapper { background: var(--app - background - dark); }
`}),a.jsx("div",{className:"fixed inset - 0 - z - 10 app - wrapper transition - colors duration - 300 pointer - events - none"}),a.jsxs("header",{className:"h-24 px-10 flex items-center justify-between shrink-0 sticky top-0 z-50 backdrop-blur-md bg-white/40 dark:bg-[#131314]/40 transition-colors duration-300",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 flex items-center justify-center",children:a.jsx("img",{src:Vu,alt:"EduFlex Logo",className:"w-full h-full object-contain"})}),a.jsx("span",{className:"font-black text-2xl tracking-tight text-gray-800 dark:text-white opacity-80 uppercase",children:(n==null?void 0:n.site_name)||"EduFlex"})]})}),a.jsx("nav",{className:"hidden lg:flex items-center gap-4",children:p.map(y=>{const w=u.pathname===y.path||y.path==="/admin"&&u.pathname.startsWith("/enterprise");return a.jsx(lm,{to:y.path,className:`p - 3.5 rounded - 2xl transition - all duration - 300 group
                                ${w?"bg-white dark:bg-[#2D2D2D] text-purple-600 dark:text-purple-400 shadow-xl shadow-purple-900/5 scale-110":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-white/50 dark:hover:bg-white/5"} `,children:y.icon},y.path)})}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white/40 dark:bg-black/20 p-2 rounded-full border border-white/20",children:[a.jsxs("div",{className:"flex flex-col text-right px-2",children:[a.jsx("span",{className:"font-bold text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Welcome"}),a.jsx("span",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:e==null?void 0:e.firstName})]}),a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-white/50 cursor-pointer hover:border-purple-400 transition-colors",onClick:()=>d("/profile"),children:g?a.jsx("img",{src:g,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-purple-100 flex items-center justify-center font-bold text-purple-800",children:(v=e==null?void 0:e.firstName)==null?void 0:v[0]})})]}),m==="ADMIN"&&a.jsx("button",{onClick:()=>d("/admin"),className:"p-3 bg-white/40 dark:bg-black/20 rounded-full text-gray-500 hover:text-purple-600 transition-colors",title:c("sidebar.admin"),children:a.jsx(yn,{size:20})}),a.jsx("button",{onClick:h,className:"p-3 bg-white/40 dark:bg-black/20 rounded-full text-gray-500 hover:text-red-600 transition-colors",title:c("sidebar.logout"),children:a.jsx(oo,{size:20})})]})]}),a.jsx("main",{className:"flex-1 px-6 pb-6",children:a.jsx("div",{className:"flex-1 bg-white/60 dark:bg-[#1E1F20]/60 backdrop-blur-3xl rounded-[40px] shadow-2xl shadow-purple-900/5 border border-white/60 dark:border-white/5 p-10 relative",children:t})}),l("CHAT")&&a.jsx(Ld,{currentUser:e,API_BASE:o,token:x})]})},F0e=({children:t})=>{var p,b;const{currentUser:e,logout:r,systemSettings:n,theme:s,toggleTheme:i,API_BASE:o}=At(),{isModuleActive:l}=oa(),{t:c}=nt(),d=Et();zn();const u=()=>{r(),d("/login")},f=(()=>{if(!(e!=null&&e.profilePictureUrl))return null;let v=e.profilePictureUrl;return v.includes("minio:9000")&&(v=v.replace("minio:9000","localhost:9000")),v.startsWith("http")?v:`${window.location.origin}${v}`})(),g=localStorage.getItem("token"),x=((p=e==null?void 0:e.role)==null?void 0:p.name)||(e==null?void 0:e.role),m={main:[{path:"/",icon:a.jsx(wi,{size:18}),label:c("sidebar.dashboard")},{path:"/catalog",icon:a.jsx(Ha,{size:18}),label:c("sidebar.catalog")}],education:[...x==="TEACHER"||x==="ADMIN"?[{path:"/resources",icon:a.jsx(gt,{size:18}),label:c("sidebar.resource_bank")}]:[],...x==="TEACHER"||x==="ADMIN"?[{path:"/evaluations/manage",icon:a.jsx(Va,{size:18}),label:"Utvrderingar"}]:[],...x==="TEACHER"?[{path:"/?tab=COURSES",icon:a.jsx(gt,{size:18}),label:c("sidebar.my_courses")||"Mina kurser"}]:[],...x==="STUDENT"?[{path:"/my-courses",icon:a.jsx(gt,{size:18}),label:c("sidebar.my_courses")||"Mina kurser"}]:[],...["STUDENT","TEACHER","ADMIN"].includes(x)?[{path:"/ebooks",icon:a.jsx(il,{size:18}),label:c("sidebar.ebooks")}]:[]],tools:[{path:"/calendar",icon:a.jsx(zt,{size:18}),label:c("sidebar.calendar")},{path:"/documents",icon:a.jsx(xt,{size:18}),label:c("sidebar.documents")},{path:"/communication",icon:a.jsx(er,{size:18}),label:c("shortcuts.messages")||"Meddelanden"},{path:"/support",icon:a.jsx(Pn,{size:18}),label:c("sidebar.support")},...l("WELLBEING_CENTER")&&["STUDENT","ROLE_STUDENT","ADMIN","ROLE_ADMIN","REKTOR","ROLE_REKTOR"].includes(x)?[{path:"/wellbeing-center",icon:a.jsx(Lr,{size:18}),label:"Well-being Center"}]:[]],admin:[...x==="ADMIN"||x==="ROLE_ADMIN"?[{path:"/admin",icon:a.jsx(yn,{size:18}),label:c("sidebar.admin")}]:[],...l("WELLBEING_CENTER")&&(x==="HALSOTEAM"||x==="ROLE_HALSOTEAM")?[{path:"/wellbeing-center/inbox",icon:a.jsx(Lr,{size:18}),label:"E-hlsa Inbox"}]:[],...l("ANALYTICS")&&(x==="ADMIN"||x==="ROLE_ADMIN")?[{path:"/analytics",icon:a.jsx(Sr,{size:18}),label:c("sidebar.analytics")}]:[]]};return a.jsxs("div",{className:"flex items-center justify-center p-6 min-h-screen w-full text-[#1E1E1E] font-sans transition-colors duration-300",style:{background:"var(--app-background)"},children:[a.jsx("style",{children:`
                @media (prefers-color-scheme: dark) {
                    .dark-mode-bg { background: var(--app-background-dark) !important; }
                }
                :root.dark body { background: var(--app-background-dark) !important; }
                .app-wrapper { background: var(--app-background); }
                .dark .app-wrapper { background: var(--app-background-dark); }
            `}),a.jsx("div",{className:"fixed inset-0 -z-10 app-wrapper transition-colors duration-300 pointer-events-none"}),a.jsxs("div",{className:"w-full min-h-screen max-w-[1800px] bg-white dark:bg-[#1E1F20] rounded-[30px] shadow-2xl flex flex-row border border-white/10 relative",children:[a.jsxs("aside",{className:"sticky top-0 h-screen w-64 lg:w-72 bg-white dark:bg-[#1E1F20] flex flex-col border-r border-gray-100 dark:border-gray-800 shrink-0",children:[a.jsx("div",{className:"h-24 flex items-center px-8",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 flex items-center justify-center",children:a.jsx("img",{src:Vu,alt:"EduFlex Logo",className:"w-full h-full object-contain"})}),a.jsx("span",{className:"font-bold text-xl tracking-tight text-gray-900 dark:text-white",children:(n==null?void 0:n.site_name)||"EduFlex"})]})}),a.jsx("div",{className:"px-6 mb-8",children:a.jsx(gm,{className:"w-full",inputClassName:"bg-[#FF5722] text-white placeholder-white/70 shadow-lg shadow-orange-500/20 focus:ring-orange-500/40"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-2 space-y-1 scrollbar-hide",children:[a.jsx(As,{title:c("sidebar.categories.main"),items:m.main,sidebarOpen:!0}),a.jsx(As,{title:c("sidebar.categories.education"),items:m.education,sidebarOpen:!0}),a.jsx(As,{title:c("sidebar.categories.tools"),items:m.tools,sidebarOpen:!0}),m.admin.length>0&&a.jsx(As,{title:c("sidebar.categories.admin"),items:m.admin,sidebarOpen:!0})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{onClick:()=>d("/profile"),className:"flex items-center gap-3 p-2 rounded-xl cursor-pointer hover:bg-orange-50 dark:hover:bg-orange-900/10 transition-colors group",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 flex items-center justify-center overflow-hidden shrink-0",children:f?a.jsx("img",{src:f,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx(jr,{size:18,className:"text-[#FF5722]"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:e==null?void 0:e.firstName}),a.jsx("p",{className:"text-[10px] uppercase font-bold text-[#FF5722] tracking-wider",children:x})]})]}),a.jsxs("button",{onClick:u,className:"w-full mt-4 flex items-center gap-2 px-4 py-2 text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/10 rounded-xl transition-colors text-xs font-bold",children:[a.jsx(oo,{size:16})," ",c("sidebar.logout")]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col bg-white dark:bg-[#1E1F20]",children:[a.jsxs("header",{className:"h-24 flex items-center justify-between px-8 border-b border-gray-50 dark:border-gray-800 shrink-0",children:[a.jsx("div",{className:"w-96"}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Pn,{size:20})}),a.jsx(bh,{}),a.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"text-right hidden md:block",children:[a.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none mb-1",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),a.jsx("p",{className:"text-xs text-gray-500",children:x})]}),a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 overflow-hidden border border-gray-100 dark:border-gray-700 cursor-pointer",onClick:()=>d("/profile"),children:f?a.jsx("img",{src:f,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center font-bold text-gray-500",children:(b=e==null?void 0:e.firstName)==null?void 0:b[0]})})]})]})]}),a.jsx("main",{className:"flex-1 p-8 relative",children:t})]})]}),l("CHAT")&&a.jsx(Ld,{currentUser:e,API_BASE:o,token:g})]})},B0e=({children:t})=>{var p,b;const{currentUser:e,logout:r,systemSettings:n,theme:s,toggleTheme:i,API_BASE:o}=At(),{isModuleActive:l}=oa(),{t:c}=nt(),d=Et();zn();const u=()=>{r(),d("/login")},f=(()=>{if(!(e!=null&&e.profilePictureUrl))return null;let v=e.profilePictureUrl;return v.includes("minio:9000")&&(v=v.replace("minio:9000","localhost:9000")),v.startsWith("http")?v:`${window.location.origin}${v} `})(),g=localStorage.getItem("token"),x=((p=e==null?void 0:e.role)==null?void 0:p.name)||(e==null?void 0:e.role),m={main:[{path:"/",icon:a.jsx(wi,{size:20}),label:c("sidebar.dashboard")},{path:"/catalog",icon:a.jsx(Ha,{size:18}),label:c("sidebar.catalog")}],education:[...x==="TEACHER"||x==="ADMIN"?[{path:"/resources",icon:a.jsx(gt,{size:18}),label:c("sidebar.resource_bank")}]:[],...x==="TEACHER"||x==="ADMIN"?[{path:"/evaluations/manage",icon:a.jsx(Va,{size:18}),label:"Utvrderingar"}]:[],...x==="TEACHER"?[{path:"/?tab=COURSES",icon:a.jsx(gt,{size:18}),label:c("sidebar.my_courses")||"Mina kurser"}]:[],...x==="STUDENT"?[{path:"/my-courses",icon:a.jsx(gt,{size:18}),label:c("sidebar.my_courses")||"Mina kurser"}]:[],...["STUDENT","TEACHER","ADMIN"].includes(x)?[{path:"/ebooks",icon:a.jsx(il,{size:18}),label:c("sidebar.ebooks")}]:[]],tools:[{path:"/calendar",icon:a.jsx(zt,{size:18}),label:c("sidebar.calendar")},{path:"/documents",icon:a.jsx(xt,{size:18}),label:c("sidebar.documents")},{path:"/communication",icon:a.jsx(er,{size:18}),label:c("shortcuts.messages")||"Meddelanden"},{path:"/support",icon:a.jsx(Pn,{size:18}),label:c("sidebar.support")},...l("WELLBEING_CENTER")&&["STUDENT","ROLE_STUDENT","ADMIN","ROLE_ADMIN","REKTOR","ROLE_REKTOR"].includes(x)?[{path:"/wellbeing-center",icon:a.jsx(Lr,{size:18}),label:"Well-being Center"}]:[]],admin:[...x==="ADMIN"||x==="ROLE_ADMIN"?[{path:"/admin",icon:a.jsx(yn,{size:20}),label:c("sidebar.admin")}]:[],...l("WELLBEING_CENTER")&&(x==="HALSOTEAM"||x==="ROLE_HALSOTEAM")?[{path:"/wellbeing-center/inbox",icon:a.jsx(Lr,{size:20}),label:"E-hlsa Inbox"}]:[],...l("ANALYTICS")&&(x==="ADMIN"||x==="ROLE_ADMIN")?[{path:"/analytics",icon:a.jsx(z0,{size:20}),label:c("sidebar.analytics")}]:[]]};return a.jsxs("div",{className:"flex items-center justify-center p-8 min-h-screen w-full text-[#1E1E1E] font-sans transition-colors duration-300",style:{background:"var(--app-background)"},children:[a.jsx("style",{children:`
@media(prefers - color - scheme: dark) {
                    .dark - mode - bg { background: var(--app - background - dark)!important; }
}
                : root.dark body { background: var(--app - background - dark)!important; }
                .app - wrapper { background: var(--app - background); }
                .dark.app - wrapper { background: var(--app - background - dark); }
`}),a.jsx("div",{className:"fixed inset - 0 - z - 10 app - wrapper transition - colors duration - 300 pointer - events - none"}),a.jsxs("div",{className:"w-full min-h-screen max-w-[1600px] bg-[#F2F3F5] dark:bg-[#121212] rounded-[40px] shadow-2xl flex flex-row relative ring-4 ring-black/5 dark:ring-white/5",children:[a.jsxs("aside",{className:"sticky top-0 h-screen w-24 lg:w-72 bg-[#0A0A0A] text-white flex flex-col shrink-0 relative z-10 transition-all duration-300",children:[a.jsx("div",{className:"h-24 flex items-center justify-center lg:justify-start lg:px-8",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:a.jsx("img",{src:Vu,alt:"EduFlex Logo",className:"w-full h-full object-contain"})}),a.jsx("span",{className:"font-bold text-xl tracking-tight text-white hidden lg:block",children:(n==null?void 0:n.site_name)||"EduFlex"})]})}),a.jsx("div",{className:"px-4 lg:px-6 mb-8 mt-2",children:a.jsx(gm,{className:"w-full",inputClassName:"bg-[#CCFF00] text-black placeholder-black/60 font-bold shadow-[0_0_20px_rgba(204,255,0,0.3)] focus:ring-[#CCFF00]/40"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-4 lg:px-6 py-2 space-y-2 scrollbar-hide flex flex-col items-center lg:items-stretch transition-all duration-300",children:[a.jsx(As,{title:c("sidebar.categories.main"),items:m.main,sidebarOpen:!0}),a.jsx(As,{title:c("sidebar.categories.education"),items:m.education,sidebarOpen:!0}),a.jsx(As,{title:c("sidebar.categories.tools"),items:m.tools,sidebarOpen:!0}),m.admin.length>0&&a.jsx(As,{title:c("sidebar.categories.admin"),items:m.admin,sidebarOpen:!0})]}),a.jsxs("div",{className:"p-6 mt-auto border-t border-gray-800",children:[a.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-4 cursor-pointer hover:bg-white/5 p-2 rounded-2xl transition-colors group relative",onClick:()=>d("/profile"),children:[a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-gray-700 group-hover:border-[#CCFF00] transition-colors shrink-0",children:f?a.jsx("img",{src:f,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center font-bold text-xs text-white",children:(b=e==null?void 0:e.firstName)==null?void 0:b[0]})}),a.jsxs("div",{className:"hidden lg:block min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-white truncate",children:e==null?void 0:e.firstName}),a.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:x})]})]}),a.jsxs("button",{onClick:u,className:"w-full mt-4 flex items-center justify-center lg:justify-start gap-3 px-4 py-2 text-[#FF4444] hover:bg-red-500/10 rounded-xl transition-colors text-xs font-bold",children:[a.jsx(oo,{size:18})," ",a.jsx("span",{className:"hidden lg:block",children:c("sidebar.logout")})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col bg-[#F2F3F5] dark:bg-[#121212] relative",children:[a.jsxs("header",{className:"h-20 flex items-center justify-between px-8 shrink-0 bg-transparent",children:[a.jsx("div",{children:a.jsx("h1",{className:"text-2xl font-black tracking-tight text-[#0A0A0A] dark:text-white",children:c("sidebar.dashboard")})}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsx(bh,{})})]}),a.jsx("main",{className:"flex-1 p-4 lg:p-8 relative",children:t})]})]}),l("CHAT")&&a.jsx(Ld,{currentUser:e,API_BASE:o,token:g})]})},U0e=({children:t})=>{var b,v;const{currentUser:e,logout:r,systemSettings:n,theme:s,toggleTheme:i,API_BASE:o}=At(),{isModuleActive:l}=oa(),{t:c}=nt(),d=Et(),u=zn(),h=()=>{r(),d("/login")},g=(()=>{if(!(e!=null&&e.profilePictureUrl))return null;let y=e.profilePictureUrl;return y.includes("minio:9000")&&(y=y.replace("minio:9000","localhost:9000")),y.startsWith("http")?y:`${window.location.origin}${y} `})(),x=localStorage.getItem("token"),m=((b=e==null?void 0:e.role)==null?void 0:b.name)||(e==null?void 0:e.role),p=[{path:"/",icon:a.jsx(wi,{size:18}),label:c("sidebar.dashboard")},{path:"/catalog",icon:a.jsx(Xge,{size:18}),label:c("sidebar.catalog")},{path:"/my-courses",icon:a.jsx(gt,{size:18}),label:c("sidebar.my_courses")},...["STUDENT","TEACHER","ADMIN"].includes(m)?[{path:"/ebooks",icon:a.jsx(il,{size:18}),label:c("sidebar.ebooks")}]:[],{path:"/calendar",icon:a.jsx(zt,{size:18}),label:c("sidebar.calendar")},{path:"/documents",icon:a.jsx(xt,{size:18}),label:c("sidebar.documents")},{path:"/communication",icon:a.jsx(er,{size:18}),label:c("shortcuts.messages")||"Meddelanden"},...l("WELLBEING_CENTER")&&["STUDENT","ROLE_STUDENT","ADMIN","ROLE_ADMIN","REKTOR","ROLE_REKTOR"].includes(m)?[{path:"/wellbeing-center",icon:a.jsx(Lr,{size:18}),label:"Well-being Center"}]:[],...l("WELLBEING_CENTER")&&(m==="HALSOTEAM"||m==="ROLE_HALSOTEAM")?[{path:"/wellbeing-center/inbox",icon:a.jsx(Lr,{size:18}),label:"E-hlsa Inbox"}]:[],...m==="TEACHER"||m==="ADMIN"?[{path:"/resources",icon:a.jsx(gt,{size:18}),label:c("sidebar.resource_bank")}]:[],...l("ANALYTICS")&&(m==="ADMIN"||m==="ROLE_ADMIN")?[{path:"/analytics",icon:a.jsx(hs,{size:18}),label:c("sidebar.analytics")}]:[],...m==="ADMIN"||m==="ROLE_ADMIN"?[{path:"/admin",icon:a.jsx(yn,{size:18}),label:c("sidebar.admin")}]:[]];return a.jsxs("div",{className:"flex items-center justify-center p-6 min-h-screen w-full text-zinc-300 font-sans transition-colors duration-300",style:{background:"var(--app-background)"},children:[" ",a.jsx("style",{children:`
@media(prefers - color - scheme: dark) {
                    .dark - mode - bg { background: var(--app - background - dark)!important; }
}
                : root.dark body { background: var(--app - background - dark)!important; }
                .app - wrapper { background: var(--app - background); }
                .dark.app - wrapper { background: var(--app - background - dark); }
                .midnight - scroll:: -webkit - scrollbar { width: 6px; }
                .midnight - scroll:: -webkit - scrollbar - track { background: #121212; }
                .midnight - scroll:: -webkit - scrollbar - thumb { background: #27272a; border - radius: 10px; }
                .midnight - scroll:: -webkit - scrollbar - thumb:hover { background: #3f3f46; }
`}),a.jsxs("div",{className:"w-full min-h-screen max-w-[1700px] bg-[#121212] rounded-[32px] shadow-2xl flex flex-col border border-white/10 relative items-stretch",children:[a.jsxs("header",{className:"h-20 flex items-center justify-between px-8 shrink-0 border-b border-white/5 bg-[#121212]/50 backdrop-blur-md sticky top-0 z-50",children:[a.jsxs("div",{className:"flex items-center gap-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 flex items-center justify-center",children:a.jsx("img",{src:Vu,alt:"EduFlex Logo",className:"w-full h-full object-contain filter brightness-0 invert"})}),a.jsx("span",{className:"font-bold text-lg tracking-tight text-white/90",children:(n==null?void 0:n.site_name)||"EduFlex"})]}),a.jsx("nav",{className:"hidden lg:flex items-center gap-1 bg-black/20 p-1 rounded-full border border-white/5 backdrop-blur-sm",children:p.map(y=>a.jsx(lm,{to:y.path,className:({isActive:w})=>`px - 4 py - 1.5 rounded - full text - xs font - medium transition - all duration - 300 flex items - center gap - 2
                                        ${w||y.path==="/admin"&&u.pathname.startsWith("/enterprise")?"bg-zinc-800 text-white shadow-sm ring-1 ring-white/10":"text-zinc-500 hover:text-zinc-200 hover:bg-white/5"} `,children:({isActive:w})=>{const k=w||y.path==="/admin"&&u.pathname.startsWith("/enterprise");return a.jsxs(a.Fragment,{children:[k&&a.jsx("div",{className:"w-1.5 h-1.5 bg-[#00DC82] rounded-full animate-pulse"}),a.jsx("span",{children:y.label})]})}},y.path))})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(gm,{className:"w-72",inputClassName:"bg-zinc-900/50 text-white placeholder-zinc-600 border border-white/10 rounded-xl focus:border-[#00DC82]/50 focus:ring-1 focus:ring-[#00DC82]/20"}),a.jsx("div",{className:"h-8 w-px bg-white/10 mx-2"}),a.jsx(bh,{}),a.jsxs("div",{className:"flex items-center gap-3 pl-2 cursor-pointer group",onClick:()=>d("/profile"),children:[a.jsx("div",{className:"w-9 h-9 rounded-full overflow-hidden border border-white/10 ring-2 ring-transparent group-hover:ring-[#00DC82]/30 transition-all",children:g?a.jsx("img",{src:g,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-zinc-800 flex items-center justify-center font-bold text-xs text-[#00DC82]",children:(v=e==null?void 0:e.firstName)==null?void 0:v[0]})}),a.jsxs("div",{className:"hidden xl:block",children:[a.jsx("p",{className:"text-xs font-semibold text-white/90 leading-tight",children:e==null?void 0:e.firstName}),a.jsx("p",{className:"text-[10px] text-zinc-500 font-medium tracking-wide uppercase",children:m})]})]}),a.jsx("button",{onClick:h,className:"w-9 h-9 flex items-center justify-center rounded-full text-zinc-500 hover:text-red-400 hover:bg-red-500/10 transition-colors ml-1",children:a.jsx(oo,{size:18})})]})]}),a.jsxs("main",{className:"flex-1 px-8 py-6 midnight-scroll relative bg-gradient-to-b from-[#121212] to-[#0D0D0D]",children:[a.jsx("div",{className:"absolute top-0 right-1/4 w-[600px] h-[400px] bg-[#00DC82] opacity-[0.02] blur-[120px] pointer-events-none rounded-full mix-blend-screen"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-500 opacity-[0.02] blur-[150px] pointer-events-none rounded-full mix-blend-screen"}),a.jsx("div",{className:"max-w-7xl mx-auto space-y-8 relative z-10",children:t})]})]}),l("CHAT")&&a.jsx(Ld,{currentUser:e,API_BASE:o,token:x})]})},K0e=({children:t})=>{var y,w;const{currentUser:e,logout:r,systemSettings:n,theme:s,toggleTheme:i,API_BASE:o}=At(),{isModuleActive:l}=oa(),{t:c}=nt(),d=Et(),u=zn(),[h,f]=N.useState(!1),g=()=>{r(),d("/login")},m=(()=>{if(!(e!=null&&e.profilePictureUrl))return null;let k=e.profilePictureUrl;return k.includes("minio:9000")&&(k=k.replace("minio:9000","localhost:9000")),k.startsWith("http")?k:`${window.location.origin}${k}`})(),p=localStorage.getItem("token"),b=((y=e==null?void 0:e.role)==null?void 0:y.name)||(e==null?void 0:e.role),v=[{path:"/",icon:a.jsx(wi,{size:20}),label:c("sidebar.dashboard")},{path:"/documents",icon:a.jsx(xt,{size:20}),label:c("sidebar.documents")},{path:"/catalog",icon:a.jsx(gt,{size:20}),label:c("sidebar.courses")},{path:"/catalog",icon:a.jsx(Ha,{size:18}),label:c("sidebar.catalog")},...["STUDENT","TEACHER","ADMIN"].includes(b)?[{path:"/ebooks",icon:a.jsx(il,{size:18}),label:c("sidebar.library")||"Bibliotek"}]:[],{path:"/calendar",icon:a.jsx(zt,{size:18}),label:c("sidebar.calendar")||"Kalender"},{path:"/communication",icon:a.jsx(er,{size:18}),label:c("shortcuts.messages")||"Meddelanden"},{path:"/support",icon:a.jsx(Pn,{size:20}),label:c("sidebar.support")||"Kontakt & Support"},...l("WELLBEING_CENTER")&&["STUDENT","ROLE_STUDENT","ADMIN","ROLE_ADMIN","REKTOR","ROLE_REKTOR"].includes(b)?[{path:"/wellbeing-center",icon:a.jsx(Lr,{size:20}),label:"Well-being Center"}]:[],...l("WELLBEING_CENTER")&&(b==="HALSOTEAM"||b==="ROLE_HALSOTEAM")?[{path:"/wellbeing-center/inbox",icon:a.jsx(Lr,{size:20}),label:"E-hlsa Inbox"}]:[],...b==="TEACHER"||b==="ADMIN"?[{path:"/resources",icon:a.jsx(gt,{size:18}),label:c("sidebar.resource_bank")}]:[],...l("ANALYTICS")&&(b==="ADMIN"||b==="ROLE_ADMIN")?[{path:"/analytics",icon:a.jsx(z0,{size:20}),label:c("sidebar.analytics")}]:[],...b==="ADMIN"||b==="ROLE_ADMIN"?[{path:"/admin",icon:a.jsx(yn,{size:20}),label:c("sidebar.admin")}]:[]];return a.jsxs("div",{className:"flex items-center justify-center p-8 min-h-screen w-full text-gray-800 font-sans transition-colors duration-300",style:{background:"var(--app-background)"},children:[" ",a.jsx("style",{children:`
                @media (prefers-color-scheme: dark) {
                    .dark-mode-bg { background: var(--app-background-dark) !important; }
                }
                :root.dark body { background: var(--app-background-dark) !important; }
                .app-wrapper { background: var(--app-background); }
                .dark .app-wrapper { background: var(--app-background-dark); }
                .pulse-scroll::-webkit-scrollbar { width: 0px; background: transparent; } /* Hidden scrollbar for clean look */
            `}),a.jsxs("div",{className:"w-full min-h-screen max-w-[1500px] bg-[#F4F4F4] dark:bg-[#1E1E1E] rounded-[40px] shadow-2xl flex flex-row relative border border-white/40",children:[a.jsxs("aside",{className:"w-24 bg-[#F4F4F4] dark:bg-[#1E1E1E] flex flex-col items-center py-8 shrink-0 z-20 sticky top-8 h-[calc(100vh-4rem)]",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center shadow-lg shadow-red-500/30 mb-8",children:a.jsx("span",{className:"text-white font-black text-lg",children:"E"})}),a.jsx("nav",{className:"flex flex-col gap-4 w-full items-center",children:v.map(k=>a.jsx(lm,{to:k.path,className:({isActive:j})=>`w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300
                                ${j||k.path==="/admin"&&u.pathname.startsWith("/enterprise")?"bg-black dark:bg-white text-white dark:text-black shadow-lg scale-110":"text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-white dark:hover:bg-white/10"}`,title:k.label,children:k.icon},k.path))}),a.jsxs("div",{className:"mt-auto flex flex-col gap-6 items-center",children:[a.jsx("button",{onClick:g,className:"w-12 h-12 rounded-full flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-white transition-all",children:a.jsx(oo,{size:20})}),a.jsx("button",{onClick:()=>d("/profile"),className:"w-12 h-12 rounded-full overflow-hidden border-2 border-white shadow-sm hover:scale-105 transition-transform",children:m?a.jsx("img",{src:m,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-red-100 flex items-center justify-center font-bold text-xs text-red-600",children:(w=e==null?void 0:e.firstName)==null?void 0:w[0]})})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col relative bg-[#F4F4F4] dark:bg-[#1E1E1E]",children:[a.jsxs("header",{className:"h-24 flex items-center justify-between px-8 shrink-0",children:[a.jsx("div",{children:a.jsxs("h1",{className:"text-3xl tracking-tight",children:[a.jsx("span",{className:"font-black text-black dark:text-white",children:"Hej, "}),a.jsx("span",{className:"font-black text-red-600",children:e==null?void 0:e.firstName}),a.jsx("span",{className:"ml-2",children:""})]})}),a.jsxs("div",{className:"flex items-center gap-4 relative",children:[a.jsxs("button",{onClick:()=>f(!h),className:`relative p-2.5 rounded-full transition-colors ${h?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400":"hover:bg-gray-100 text-gray-500 dark:text-gray-400 dark:hover:bg-[#282a2c]"}`,title:"Online Vnner",children:[a.jsx(vt,{size:20}),a.jsxs("span",{className:"absolute top-2 right-2 flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})]}),a.jsx(I5,{isOpen:h,onClose:()=>f(!1)}),a.jsx(gm,{className:"w-64",inputClassName:"bg-white dark:bg-[#2A2A2A] shadow-sm border border-gray-100 dark:border-gray-800"}),a.jsx(bh,{})]})]}),a.jsx("main",{className:"flex-1 px-8 pb-32 pulse-scroll",children:t})]})]}),l("CHAT")&&a.jsx(Ld,{currentUser:e,API_BASE:o,token:p})]})},Yt=({children:t})=>{var l;const{systemSettings:e,currentUser:r}=At(),{branding:n}=io();N.useEffect(()=>{e&&e.site_name&&(document.title=e.site_name)},[e]),N.useEffect(()=>{if(!r)return;const c=async()=>{try{const{api:u}=await m5(async()=>{const{api:h}=await Promise.resolve().then(()=>i5);return{api:h}},void 0);await u.users.ping()}catch(u){console.error("Activity ping failed",u)}};c();const d=setInterval(c,5*60*1e3);return()=>clearInterval(d)},[r]);let s=n==null?void 0:n.designSystem;s==="professional"&&(s="classic"),s==="donezo"&&(s="focus");const i=s?Dc[s]:null,o=(l=i==null?void 0:i.layout)==null?void 0:l.style;return o==="floating"?a.jsx(P0e,{children:t}):o==="horizon"?a.jsx(z0e,{children:t}):o==="nebula"?a.jsx($0e,{children:t}):o==="ember"?a.jsx(F0e,{children:t}):o==="voltage"?a.jsx(B0e,{children:t}):o==="midnight"?a.jsx(U0e,{children:t}):o==="pulse"?a.jsx(K0e,{children:t}):a.jsx(R0e,{children:t})},G0e="/assets/Hero-ChUe4dWV.jpg",q0e="/assets/eduflex_connect-mBCrfvCb.png",V0e=({isOpen:t,onClose:e})=>{const{t:r}=nt(),[n,s]=N.useState({name:"",email:"",organization:"",phone:"",message:""}),[i,o]=N.useState({type:"",message:""}),[l,c]=N.useState(!1),d=h=>{s({...n,[h.target.name]:h.target.value})},u=async h=>{h.preventDefault(),c(!0),o({type:"",message:""});try{if((await fetch("/api/contact/demo-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)o({type:"success",message:r("contact.success_message")||"Tack! Vi kontaktar dig inom 24 timmar."}),s({name:"",email:"",organization:"",phone:"",message:""}),setTimeout(()=>e(),2e3);else throw new Error("Failed to send")}catch{o({type:"error",message:r("contact.error_message")||"Ngot gick fel. Frsk igen eller maila oss direkt."})}finally{c(!1)}};return t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r("contact.title")||"Boka Demo"}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:a.jsx(Je,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r("contact.name")||"Namn"," *"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",name:"name",value:n.name,onChange:d,required:!0,className:"w-full pl-4 pr-11 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:r("contact.name_placeholder")||"Ditt namn"}),a.jsx(jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r("contact.email")||"E-post"," *"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"email",name:"email",value:n.email,onChange:d,required:!0,className:"w-full pl-4 pr-11 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:r("contact.email_placeholder")||"din@email.se"}),a.jsx(Qi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r("contact.organization")||"Organisation"," *"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",name:"organization",value:n.organization,onChange:d,required:!0,className:"w-full pl-4 pr-11 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:r("contact.organization_placeholder")||"Skolans namn"}),a.jsx(tge,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("contact.phone")||"Telefon"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:d,className:"w-full pl-4 pr-11 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:r("contact.phone_placeholder")||"+46 70 123 45 67"}),a.jsx(lw,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("contact.message")||"Meddelande"}),a.jsx("textarea",{name:"message",value:n.message,onChange:d,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:r("contact.message_placeholder")||"Bertta lite om era behov..."})]}),i.message&&a.jsx("div",{className:`p-4 rounded-lg ${i.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:i.message}),a.jsx("button",{type:"submit",disabled:l,className:"w-full py-3 px-4 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),r("contact.sending")||"Skickar..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Wr,{className:"w-5 h-5"}),r("contact.submit")||"Skicka frfrgan"]})})]})]})}):null},H0e=({screenshots:t})=>{const[e,r]=N.useState(0),[n,s]=N.useState(!0),i=N.useCallback(()=>{r(l=>l===t.length-1?0:l+1)},[t.length]),o=()=>{r(l=>l===0?t.length-1:l-1)};return N.useEffect(()=>{let l;return n&&(l=setInterval(i,5e3)),()=>clearInterval(l)},[n,i]),a.jsxs("div",{className:"relative w-full max-w-6xl mx-auto px-4 py-12 group",onMouseEnter:()=>s(!1),onMouseLeave:()=>s(!0),children:[a.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-3xl shadow-2xl border border-white/20 bg-gray-900/5",children:[t.map((l,c)=>a.jsxs("div",{className:`absolute inset-0 w-full h-full transition-all duration-1000 ease-in-out ${c===e?"opacity-100 translate-x-0 scale-100":"opacity-0 translate-x-8 scale-95"}`,children:[a.jsx("img",{src:l.src,alt:l.title,className:"w-full h-full object-cover"}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/80 via-black/40 to-transparent",children:[a.jsx("h4",{className:"text-white text-xl font-bold mb-1",children:l.title}),a.jsx("p",{className:"text-white/80 text-sm",children:l.description})]})]},c)),a.jsx("button",{onClick:o,className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-white/20 hover:scale-110 active:scale-95","aria-label":"Previous slide",children:a.jsx(Ho,{className:"w-6 h-6"})}),a.jsx("button",{onClick:i,className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-white/20 hover:scale-110 active:scale-95","aria-label":"Next slide",children:a.jsx(or,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex justify-center gap-3 mt-8",children:t.map((l,c)=>a.jsx("button",{onClick:()=>r(c),className:`transition-all duration-300 rounded-full h-2 ${c===e?"bg-blue-600 w-8":"bg-gray-300 w-2 hover:bg-gray-400"}`,"aria-label":`Go to slide ${c+1}`},c))})]})},W0e="/assets/admin_dashboard-Bw4IthQl.png",X0e="/assets/teacher_dashboard-B0CZlGBR.png",Y0e="/assets/AIQuizGenerator-Cc2hYDiu.png",Z0e="/assets/Analytics-BroENRp0.png",Q0e="/assets/Kurskatalog-V449B1qW.png",J0e="/assets/Library-n7vwF0Dw.png",exe="/assets/LiveDebugTerminal-BxA68udU.png",txe="/assets/Resursbank-CP9ARMAv.png",rxe="/assets/SystemSettings-ChE-bBpT.png",nxe=()=>{const t=Et(),{t:e,i18n:r}=nt(),[n,s]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[d,u]=N.useState(0);N.useEffect(()=>{const x=()=>{c(window.scrollY>20),u(window.scrollY)};return window.addEventListener("scroll",x,{passive:!0}),()=>window.removeEventListener("scroll",x)},[]),N.useEffect(()=>{const x={threshold:.1,rootMargin:"0px 0px -50px 0px"},m=new IntersectionObserver(b=>{b.forEach(v=>{v.isIntersecting&&(v.target.classList.add("animate-in"),m.unobserve(v.target))})},x);return document.querySelectorAll(".fade-in-section").forEach(b=>m.observe(b)),()=>m.disconnect()},[]),N.useEffect(()=>{const x=()=>{window.innerWidth>=768&&o(!1)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const h=[{icon:a.jsx(Ha,{className:"w-7 h-7"}),title:e("landing.features.multi_tenancy.title"),description:e("landing.features.multi_tenancy.desc"),color:"text-brand-teal",bgColor:"bg-brand-teal/10",hoverBorder:"hover:border-brand-teal/50"},{icon:a.jsx(cK,{className:"w-7 h-7"}),title:e("landing.features.gamification.title"),description:e("landing.features.gamification.desc"),color:"text-brand-blue",bgColor:"bg-brand-blue/10",hoverBorder:"hover:border-brand-blue/50"},{icon:a.jsx(Ki,{className:"w-7 h-7"}),title:e("landing.features.ai_creator.title"),description:e("landing.features.ai_creator.desc"),color:"text-emerald-400",bgColor:"bg-emerald-500/10",hoverBorder:"hover:border-emerald-500/50"}],f=[{icon:a.jsx(dr,{className:"w-6 h-6"}),title:"AI Course Creator",description:"Skapa kompletta kurser frn PDF-dokument p under 60 sekunder. Autogenererade lektioner, datum och smarta koder med inbyggd databassynkronisering.",color:"text-purple-400",bgColor:"bg-purple-500/10"},{icon:a.jsx(Sr,{className:"w-6 h-6"}),title:"Prediktiv AI-Analys",description:"Identifiera riskstudenter innan det r fr sent. AI analyserar beteendemnster och ger lrare beslutsstd samt elever personliga studietips.",color:"text-rose-400",bgColor:"bg-rose-500/10"},{icon:a.jsx(zs,{className:"w-6 h-6"}),title:"LTI 1.3 Advantage",description:"Fullt verifierat std fr AGS (Betyg) och NRPS (Roller/Namn). Smls integration med Canvas, Moodle och Blackboard fr sker autentisering och datautbyte.",color:"text-brand-blue",bgColor:"bg-brand-blue/10"},{icon:a.jsx(Gi,{className:"w-6 h-6"}),title:"xAPI & CMI5 LRS",description:"Nsta generations sprning. Kr simuleringar och offline-mobilkurser med full detaljrapportering via vrt inbyggda Learning Record Store.",color:"text-brand-teal",bgColor:"bg-brand-teal/10"},{icon:a.jsx(Uf,{className:"w-6 h-6"}),title:"MinIO & S3 Storage",description:"Skalbar Enterprise-lagring. All media (ljudbcker, video) streamas blixtsnabbt med std fr uppspelning dr du slutade.",color:"text-pink-400",bgColor:"bg-pink-500/10"},{icon:a.jsx(di,{className:"w-6 h-6"}),title:"EduGame Engine",description:"XP-system, Shop, Profilteman, dagliga utmaningar och streaks. Gr lrandet till ett ventyr.",color:"text-brand-gold",bgColor:"bg-brand-gold/10"},{icon:a.jsx(Gi,{className:"w-6 h-6"}),title:"Schema-per-Tenant",description:"kta multi-tenancy med komplett dataisolering. Varje organisation fr sitt eget PostgreSQL-schema automatiskt.",color:"text-purple-400",bgColor:"bg-purple-500/10"},{icon:a.jsx(vt,{className:"w-6 h-6"}),title:"Resursbank & Community",description:"Ett unifierat bibliotek fr alla dina quiz, uppgifter och lektioner. Dela och importera material frn andra lrare med ett klick.",color:"text-cyan-400",bgColor:"bg-cyan-500/10"},{icon:a.jsx(va,{className:"w-6 h-6"}),title:"Cascading Deletes",description:"Underhllsfri hantering. Nr du tar bort en kurs raderas allt tillhrande material och lektioner automatiskt utan databaskonflikter.",color:"text-emerald-400",bgColor:"bg-emerald-500/10"},{icon:a.jsx(pi,{className:"w-6 h-6"}),title:"Enterprise SSO",description:"Keycloak-integration med OAuth2/OIDC. Full kontroll ver identiteter och tkomstniver i organisationen.",color:"text-orange-400",bgColor:"bg-orange-500/10"},{icon:a.jsx(va,{className:"w-6 h-6"}),title:"Friendly URLs (Slugs)",description:"Skmotorvnliga och lsbara adresser fr alla kurser. Navigera via lsbara namn istllet fr tekniska ID:n.",color:"text-sky-400",bgColor:"bg-sky-500/10"},{icon:a.jsx(dr,{className:"w-6 h-6"}),title:"Quiz Generator",description:"Slumpa quiz automatiskt frn din frgebank (Math, Java, Svenska etc.) fr snabb kunskapskontroll utan manuellt arbete.",color:"text-fuchsia-400",bgColor:"bg-fuchsia-500/10"},{icon:a.jsx(pi,{className:"w-6 h-6"}),title:"Enterprise Security",description:"Fullstndig AES-256 GCM kryptering av knslig data, domn-lst licensiering och rate-limiting skyddar din organisation dygnet runt.",color:"text-indigo-400",bgColor:"bg-indigo-500/10"},{icon:a.jsx(o5,{className:"w-6 h-6"}),title:"Kursutvrdering & Insikter",description:"Komplett system fr kurskvalitet, automatiserade studentnotiser och AI-analys av fritextsvar fr att mta ROI.",color:"text-blue-400",bgColor:"bg-blue-500/10"},{icon:a.jsx(er,{className:"w-6 h-6"}),title:"Contextual Social Learning",description:"Diskutera lektioner och kurser i realtid direkt i spelaren. Lr av dina kurskamrater genom trdade konversationer och realtidsnotiser.",color:"text-brand-teal",bgColor:"bg-brand-teal/10"},{icon:a.jsx(F0,{className:"w-6 h-6"}),title:"Milestone Streaks",description:'Fortstt din "Learning Streak" och ls upp exklusiva XP-bonusar och mrken. Centraliserad sprning som motiverar dig varje dag.',color:"text-brand-orange",bgColor:"bg-brand-orange/10"},{icon:a.jsx(zs,{className:"w-6 h-6"}),title:"Rektorspaket (Mission Control)",description:"Fullstndigt skolledningslager med realtids-KPIer. Hantera organisationshierarki (Avdelning, Program, Klass), se aggregerad statistik och hantera incidenter i en unifierad, live-vy.",color:"text-brand-teal",bgColor:"bg-brand-teal/10"},{title:"Prediktiv AI-Analys 2.0",description:"Identifierar elever i riskzonen innan de sjlva vet det. Deep learning mnsteranalys av nrvaro, aktivitet och resultat.",icon:a.jsx(Ki,{className:"text-pink-500"}),tag:"Roadmap 2026+"},{title:"Skolverket Sync 2.0",description:"Smls integration med hela Skolverkets kurskatalog. Automatiserad uppdatering av kursml och betygskriterier.",icon:a.jsx(Vi,{className:"text-indigo-500"}),tag:"v1.0.5"},{title:"Gamification Expansion",description:"Nya Quest-system, Social-hub och utkad Shop. ka engagemanget genom meningsfullt spelifierat lrande.",icon:a.jsx(di,{className:"text-orange-500"}),tag:"Stable"},{icon:a.jsx(di,{className:"w-6 h-6"}),title:"Expansiv Gamification",description:"XP fr allt! Tjna pong genom AI-chatt, lektionsvisningar och utmaningar. Profilteman, shop, streaks och badges gr lrandet beroendeframkallande.",color:"text-brand-gold",bgColor:"bg-brand-gold/10"},{icon:a.jsx(pi,{className:"w-6 h-6"}),title:"Guardian & Health Control",description:"Vrdnadshavarportal, digital sjukanmlan och enkter fr elevhlsa. Allt samlat med AES-256 kryptering och sekretessvakter fr sker datahantering.",color:"text-brand-teal",bgColor:"bg-brand-teal/10"}],g=[{src:W0e,title:"Admin Dashboard 2.0",description:"Total kontroll ver organisationen med live-data och widgets."},{src:X0e,title:"Lrarpanelen",description:"Effektiv versikt av elevers nrvaro, framsteg och inlmningar."},{src:Y0e,title:"AI Quiz Generator",description:"Ladda upp dokument och lt AI skapa provfrgor p sekunder."},{src:J0e,title:"E-boksbibliotek",description:"Ett centralt bibliotek fr litteratur med inbyggd lsare."},{src:Q0e,title:"Kurskatalog",description:"Visuell och filtrerbar katalog fr elever att hitta nya kurser."},{src:txe,title:"Resursbank & Community",description:"Dela och hmta material frn ett gemensamt Community-bibliotek."},{src:Z0e,title:"Djupgende Statistik",description:"Analysera intkter, anvndarengagemang och kursresultat."},{src:rxe,title:"Systeminstllningar",description:"Hantera LTI, moduler, tema och lagringsbackends."},{src:exe,title:"Live Debug Terminal",description:"Matrix-inspirerad loggvisning fr teknisk felskning i realtid."}];return a.jsxs("div",{className:"min-h-screen bg-[#06141b] text-slate-100 font-display antialiased overflow-x-hidden",children:[a.jsx("style",{children:`
                :root {
                    --brand-teal: #00d4aa;
                    --brand-emerald: #10b981;
                    --brand-blue: #0ea5e9;
                    --brand-orange: #ff9f1c;
                    --brand-gold: #ffb703;
                }
                .glass-card {
                    background: rgba(0, 212, 170, 0.03);
                    backdrop-filter: blur(16px);
                    -webkit-backdrop-filter: blur(16px);
                    border: 1px solid rgba(0, 212, 170, 0.15);
                }
                .glass-card-dark {
                    background: rgba(6, 20, 27, 0.8);
                    backdrop-filter: blur(16px);
                    -webkit-backdrop-filter: blur(16px);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                }
                .brand-gradient {
                    background: linear-gradient(135deg, var(--brand-teal), var(--brand-emerald), var(--brand-blue));
                }
                .text-gradient {
                    background: linear-gradient(to right, var(--brand-teal), var(--brand-blue));
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                }
                .glow-teal {
                    box-shadow: 0 0 40px -10px rgba(0, 212, 170, 0.3);
                }
                .glow-gold {
                    box-shadow: 0 0 30px -5px rgba(255, 183, 3, 0.4);
                }
                @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-20px); }
                }
                @keyframes blob {
                    0%, 100% { transform: translate(0px, 0px) scale(1); }
                    33% { transform: translate(30px, -50px) scale(1.1); }
                    66% { transform: translate(-20px, 20px) scale(0.9); }
                }
                @keyframes ping-slow {
                    75%, 100% { transform: scale(2); opacity: 0; }
                }
                .animate-float { animation: float 6s ease-in-out infinite; }
                .animate-blob { animation: blob 7s infinite; }
                .animate-ping-slow { animation: ping-slow 2s cubic-bezier(0, 0, 0.2, 1) infinite; }
                .animation-delay-2000 { animation-delay: 2s; }
                .animation-delay-4000 { animation-delay: 4s; }
                .feature-card {
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                }
                .feature-card:hover {
                    transform: translateY(-8px);
                }

                /* Parallax & Scroll Animations */
                .fade-in-section {
                    opacity: 0;
                    transform: translateY(40px);
                    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
                                transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
                }
                .fade-in-section.animate-in {
                    opacity: 1;
                    transform: translateY(0);
                }
                .fade-in-section:nth-child(2) { transition-delay: 0.1s; }
                .fade-in-section:nth-child(3) { transition-delay: 0.2s; }
                .fade-in-section:nth-child(4) { transition-delay: 0.3s; }

                .parallax-slow {
                    will-change: transform;
                }
                .parallax-medium {
                    will-change: transform;
                }
                .parallax-fast {
                    will-change: transform;
                }

                /* Stagger animation for cards */
                .stagger-animation > * {
                    opacity: 0;
                    transform: translateY(30px);
                }
                .stagger-animation.animate-in > *:nth-child(1) { animation: staggerFadeIn 0.6s 0.1s forwards; }
                .stagger-animation.animate-in > *:nth-child(2) { animation: staggerFadeIn 0.6s 0.2s forwards; }
                .stagger-animation.animate-in > *:nth-child(3) { animation: staggerFadeIn 0.6s 0.3s forwards; }
                .stagger-animation.animate-in > *:nth-child(4) { animation: staggerFadeIn 0.6s 0.4s forwards; }
                .stagger-animation.animate-in > *:nth-child(5) { animation: staggerFadeIn 0.6s 0.5s forwards; }
                .stagger-animation.animate-in > *:nth-child(6) { animation: staggerFadeIn 0.6s 0.6s forwards; }
                .stagger-animation.animate-in > *:nth-child(7) { animation: staggerFadeIn 0.6s 0.7s forwards; }
                .stagger-animation.animate-in > *:nth-child(8) { animation: staggerFadeIn 0.6s 0.8s forwards; }
                .stagger-animation.animate-in > *:nth-child(9) { animation: staggerFadeIn 0.6s 0.9s forwards; }
                .stagger-animation.animate-in > *:nth-child(10) { animation: staggerFadeIn 0.6s 1s forwards; }
                .stagger-animation.animate-in > *:nth-child(n+11) { animation: staggerFadeIn 0.6s 1.1s forwards; }

                @keyframes staggerFadeIn {
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                /* Smooth scroll behavior */
                html {
                    scroll-behavior: smooth;
                }
            `}),a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-teal/5 via-transparent to-brand-blue/5"}),a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-brand-teal/10 rounded-full blur-[120px] parallax-slow",style:{transform:`translateY(${d*.15}px)`}}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-brand-blue/10 rounded-full blur-[100px] parallax-medium",style:{transform:`translateY(${d*-.1}px)`}}),a.jsx("div",{className:"absolute top-1/4 right-10 opacity-[0.03] scale-150 rotate-12 text-brand-teal parallax-fast",style:{transform:`translateY(${d*.25}px) rotate(${12+d*.02}deg)`},children:a.jsxs("svg",{className:"w-[600px] h-[600px]",fill:"none",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"currentColor",strokeDasharray:"10 5",strokeWidth:"2"}),a.jsx("path",{d:"M50 20C33.4 20 20 33.4 20 50C20 66.6 33.4 80 50 80C66.6 80 80 66.6 80 50",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"4"})]})}),a.jsx("div",{className:"absolute top-[60%] left-[5%] w-[20%] h-[20%] bg-purple-500/5 rounded-full blur-[80px]",style:{transform:`translateY(${d*-.2}px)`}}),a.jsx("div",{className:"absolute top-[30%] right-[20%] w-[15%] h-[15%] bg-brand-gold/5 rounded-full blur-[60px]",style:{transform:`translateY(${d*.12}px)`}})]}),a.jsx("header",{className:"sticky top-0 z-50 px-4 sm:px-6 py-4 flex items-center justify-center",children:a.jsxs("nav",{className:`max-w-7xl w-full glass-card rounded-2xl px-4 sm:px-6 py-3 flex items-center justify-between transition-all duration-300 ${l?"shadow-lg shadow-black/20":""}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"size-10 brand-gradient rounded-full flex items-center justify-center shadow-lg shadow-brand-teal/20 relative",children:a.jsx("img",{src:Vu,alt:"EduFlex",className:"w-6 h-6 brightness-0 invert"})}),a.jsxs("span",{className:"text-xl font-bold tracking-tight",children:["EduFlex ",a.jsx("span",{className:"text-brand-teal",children:"2.0"})]})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-8 text-slate-300",children:[a.jsx("a",{className:"text-sm font-medium hover:text-brand-teal transition-colors",href:"#features",children:e("landing.nav.features")}),a.jsx("a",{className:"text-sm font-medium hover:text-brand-teal transition-colors",href:"#showcase",children:"Showcase"}),a.jsx("a",{className:"text-sm font-medium hover:text-brand-teal transition-colors",href:"#gamification",children:"Gamification"}),a.jsx("a",{className:"text-sm font-medium hover:text-brand-teal transition-colors",href:"#highlights",children:"Teknologi"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"hidden sm:flex items-center gap-1 px-2 py-1.5 bg-white/5 rounded-full border border-white/10",children:[a.jsx("button",{onClick:()=>r.changeLanguage("sv"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-all duration-200 ${r.language==="sv"?"bg-brand-teal text-slate-900":"text-slate-400 hover:text-white"}`,children:"SV"}),a.jsx("button",{onClick:()=>r.changeLanguage("en"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-all duration-200 ${r.language==="en"?"bg-brand-teal text-slate-900":"text-slate-400 hover:text-white"}`,children:"EN"})]}),a.jsx("button",{onClick:()=>t("/login"),className:"hidden sm:block text-sm font-semibold px-4 py-2 hover:bg-white/5 rounded-lg transition-colors text-slate-300",children:e("landing.nav.login")}),a.jsx("button",{onClick:()=>s(!0),className:"bg-brand-gold text-slate-900 text-sm font-bold px-5 py-2.5 rounded-xl hover:brightness-110 transition-all shadow-lg glow-gold",children:"Boka Demo"}),a.jsx("button",{onClick:()=>o(!i),className:"md:hidden p-2 rounded-lg hover:bg-white/10 transition-colors text-slate-300","aria-label":"Toggle menu",children:i?a.jsx(Je,{className:"w-6 h-6"}):a.jsx(sw,{className:"w-6 h-6"})})]})]})}),a.jsx("div",{className:`md:hidden fixed inset-x-4 top-20 z-40 glass-card-dark rounded-2xl transition-all duration-300 ${i?"opacity-100 translate-y-0":"opacity-0 -translate-y-4 pointer-events-none"}`,children:a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsx("a",{href:"#features",onClick:()=>o(!1),className:"block py-3 px-4 text-slate-300 hover:bg-white/5 rounded-lg transition-colors",children:e("landing.nav.features")}),a.jsx("a",{href:"#showcase",onClick:()=>o(!1),className:"block py-3 px-4 text-slate-300 hover:bg-white/5 rounded-lg transition-colors",children:"Showcase"}),a.jsx("a",{href:"#gamification",onClick:()=>o(!1),className:"block py-3 px-4 text-slate-300 hover:bg-white/5 rounded-lg transition-colors",children:"Gamification"}),a.jsx("a",{href:"#highlights",onClick:()=>o(!1),className:"block py-3 px-4 text-slate-300 hover:bg-white/5 rounded-lg transition-colors",children:"Teknologi"}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-t border-white/10 mt-2",children:[a.jsx("button",{onClick:()=>r.changeLanguage("sv"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all ${r.language==="sv"?"bg-brand-teal text-slate-900":"bg-white/5 text-slate-400"}`,children:"Svenska"}),a.jsx("button",{onClick:()=>r.changeLanguage("en"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all ${r.language==="en"?"bg-brand-teal text-slate-900":"bg-white/5 text-slate-400"}`,children:"English"})]}),a.jsxs("div",{className:"pt-2 space-y-2 border-t border-white/10",children:[a.jsx("button",{onClick:()=>{t("/login"),o(!1)},className:"w-full py-3 text-center text-slate-300 font-medium hover:bg-white/5 rounded-lg transition-colors",children:e("landing.nav.login")}),a.jsx("button",{onClick:()=>{t("/register-org"),o(!1)},className:"w-full py-3 text-center bg-brand-gold text-slate-900 font-bold rounded-xl",children:"Kom igng"})]})]})}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[a.jsxs("section",{className:"py-16 lg:py-28 grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-brand-teal/10 border border-brand-teal/20 text-brand-teal text-xs font-bold uppercase tracking-widest",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping-slow absolute inline-flex h-full w-full rounded-full bg-brand-teal opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-brand-teal"})]}),e("landing.hero.badge")]}),a.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-black leading-[1.1] tracking-tight",children:[e("landing.hero.title_start")," ",a.jsx("span",{className:"text-gradient",children:e("landing.hero.title_highlight")})]}),a.jsx("p",{className:"text-lg text-slate-400 max-w-xl leading-relaxed",children:e("landing.hero.subtitle")}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("button",{onClick:()=>t("/register-org"),className:"brand-gradient text-white font-bold px-8 py-4 rounded-xl hover:scale-105 transition-transform text-lg shadow-xl shadow-brand-teal/30 flex items-center gap-2",children:["Kom igng gratis ",a.jsx(Wa,{className:"w-5 h-5"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"glass-card font-bold px-8 py-4 rounded-xl hover:bg-white/10 transition-all text-lg flex items-center gap-2 text-slate-200",children:[a.jsx(Yo,{className:"w-5 h-5 text-brand-teal"})," Se demo"]})]}),a.jsxs("div",{className:"flex flex-col gap-4 pt-4",children:[a.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.2em] text-slate-500",children:"Drivs av modern AI & beprvad pedagogik"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-6 opacity-60 hover:opacity-100 transition-all duration-500",children:[a.jsxs("div",{className:"flex items-center gap-2 group",children:[a.jsx(Ki,{className:"w-5 h-5 text-blue-400 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-slate-400 group-hover:text-slate-200",children:"Google Gemini"})]}),a.jsxs("div",{className:"flex items-center gap-2 group",children:[a.jsx(Gi,{className:"w-5 h-5 text-emerald-400 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-slate-400 group-hover:text-slate-200",children:"PostgreSQL"})]}),a.jsxs("div",{className:"flex items-center gap-2 group",children:[a.jsx(dr,{className:"w-5 h-5 text-brand-teal group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-slate-400 group-hover:text-slate-200",children:"OpenAI API"})]})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -inset-4 brand-gradient blur-3xl rounded-full opacity-20"}),a.jsx("div",{className:"relative glass-card rounded-3xl p-4 glow-teal overflow-hidden",children:a.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[a.jsx("img",{src:G0e,alt:"EduFlex Student",className:"w-full aspect-square object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#06141b] via-transparent to-transparent"}),a.jsx("div",{className:"absolute bottom-4 left-4 glass-card rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 brand-gradient rounded-xl flex items-center justify-center",children:a.jsx(Sr,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xl font-bold text-white",children:"+47%"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Engagemang"})]})]})}),a.jsx("div",{className:"absolute top-4 right-4 glass-card rounded-xl p-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-brand-gold/20 rounded-lg flex items-center justify-center",children:a.jsx(Mr,{className:"w-4 h-4 text-brand-gold"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-white",children:"Ny niv!"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Level 12"})]})]})})]})})]})]}),a.jsxs("section",{id:"features",className:"py-16 lg:py-24 space-y-12 fade-in-section",children:[a.jsxs("div",{className:"text-center max-w-3xl mx-auto space-y-4",children:[a.jsx("h2",{className:"text-3xl lg:text-5xl font-black",children:e("landing.features.title")}),a.jsx("p",{className:"text-slate-400 text-lg",children:e("landing.features.subtitle")})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 stagger-animation fade-in-section",children:h.map((x,m)=>a.jsxs("div",{className:`glass-card p-8 rounded-3xl group ${x.hoverBorder} transition-all duration-300 feature-card`,children:[a.jsx("div",{className:`size-14 ${x.bgColor} rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform`,children:a.jsx("span",{className:x.color,children:x.icon})}),a.jsx("h3",{className:"text-2xl font-bold mb-3",children:x.title}),a.jsx("p",{className:"text-slate-400 leading-relaxed",children:x.description})]},m))})]}),a.jsxs("section",{id:"showcase",className:"py-16 lg:py-24 fade-in-section",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-brand-teal/10 border border-brand-teal/20 mb-4",children:[a.jsx(Yo,{className:"w-4 h-4 text-brand-teal mr-2"}),a.jsx("span",{className:"text-sm font-semibold text-brand-teal",children:"Showcase"})]}),a.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-black mb-4",children:"Upplev EduFlex i Aktion"})]}),a.jsx(H0e,{screenshots:g})]}),a.jsxs("section",{id:"gamification",className:"py-16 lg:py-24 relative overflow-hidden rounded-3xl fade-in-section",children:[a.jsx("div",{className:"absolute inset-0 brand-gradient opacity-5 -z-10"}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center px-6 lg:px-10",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold leading-tight",children:"Gr lrandet till ett ventyr"}),a.jsx("p",{className:"text-slate-400 text-lg",children:"Med EduFlex 2.0 frsvinner trskeln fr att brja plugga. Genom att implementera spelmekanik p djupet skapar vi ett naturligt driv hos anvndaren."}),a.jsxs("ul",{className:"space-y-4",children:[a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(Gr,{className:"w-5 h-5 text-brand-teal"}),a.jsx("span",{children:"Dagliga uppdrag och streaks"})]}),a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(Gr,{className:"w-5 h-5 text-brand-teal"}),a.jsx("span",{children:"Globala och interna topplistor"})]}),a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(Gr,{className:"w-5 h-5 text-brand-teal"}),a.jsx("span",{children:"Unik avatar-anpassning"})]}),a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(Gr,{className:"w-5 h-5 text-brand-teal"}),a.jsx("span",{children:"XP, niver och mrken"})]})]})]}),a.jsxs("div",{className:"relative py-10",children:[a.jsxs("div",{className:"glass-card rounded-2xl p-6 glow-teal max-w-sm ml-auto relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"size-12 rounded-full brand-gradient border-2 border-white/20"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:"Mikael K."}),a.jsx("p",{className:"text-xs text-slate-400",children:"Level 24 Explorer"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx(F0,{className:"w-6 h-6 text-brand-orange mx-auto"}),a.jsx("p",{className:"text-xs font-bold text-brand-orange",children:"12 DAGAR STREAK"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-300",children:[a.jsx("span",{children:"PROGRESS XP"}),a.jsx("span",{children:"1,240 / 2,000"})]}),a.jsx("div",{className:"h-3 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full brand-gradient rounded-full shadow-[0_0_15px_rgba(0,212,170,0.4)]",style:{width:"62%"}})})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/10 flex flex-col items-center gap-2",children:[a.jsx(di,{className:"w-5 h-5 text-brand-gold"}),a.jsx("span",{className:"text-[10px] font-bold",children:"BSTA ELEV"})]}),a.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/10 flex flex-col items-center gap-2",children:[a.jsx(Ki,{className:"w-5 h-5 text-brand-blue"}),a.jsx("span",{className:"text-[10px] font-bold",children:"SNABBTNKT"})]}),a.jsxs("div",{className:"bg-white/10 p-3 rounded-lg border border-brand-teal/40 flex flex-col items-center gap-2",children:[a.jsx(Mr,{className:"w-5 h-5 text-brand-teal"}),a.jsx("span",{className:"text-[10px] font-bold",children:"TOPP 1%"})]})]})]})]}),a.jsx("div",{className:"absolute top-0 right-10 glass-card rounded-2xl p-6 w-full max-w-xs opacity-40 translate-x-12 translate-y-12 -z-10"})]})]})]}),a.jsx("section",{className:"py-16 lg:py-24 border-t border-white/10 fade-in-section",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-20 items-center",children:[a.jsx("div",{className:"order-2 lg:order-1 relative",children:a.jsxs("div",{className:"glass-card rounded-3xl p-4 aspect-[4/3] flex items-center justify-center relative overflow-hidden",children:[a.jsx("img",{src:q0e,alt:"EduFlex Connect",className:"w-full h-full object-cover rounded-2xl"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#06141b]/80 via-transparent to-transparent rounded-2xl"}),a.jsx("div",{className:"absolute bottom-6 right-6",children:a.jsxs("div",{className:"glass-card p-4 rounded-xl border-brand-teal/30 border bg-[#06141b]/80",children:[a.jsxs("div",{className:"flex items-center gap-2 text-brand-teal font-bold mb-1",children:[a.jsx(Gi,{className:"w-4 h-4"})," Skolverket Sync"]}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-tighter",children:"Status: Realtid aktiv"})]})})]})}),a.jsxs("div",{className:"order-1 lg:order-2 space-y-6",children:[a.jsx("div",{className:"size-12 bg-brand-teal/20 rounded-xl flex items-center justify-center",children:a.jsx(uK,{className:"w-6 h-6 text-brand-teal"})}),a.jsx("h2",{className:"text-3xl font-bold",children:"Smls integration med Svenska skolsystemet"}),a.jsx("p",{className:"text-slate-400 text-lg leading-relaxed",children:"Vi har byggt EduFlex med fokus p den svenska lroplanen. Full integration med Skolverkets API:er och std fr BankID gr oss till det sjlvklara valet fr svenska kommuner och friskolor."}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-3xl font-black text-white",children:"100%"}),a.jsx("p",{className:"text-sm text-slate-400",children:"GDPR Compliance"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-3xl font-black text-white",children:"Byggd fr"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Framtidens utbildare"})]})]})]})]})}),a.jsxs("section",{id:"highlights",className:"py-16 lg:py-24 fade-in-section",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-purple-500/10 border border-purple-500/20 mb-4",children:[a.jsx(va,{className:"w-4 h-4 text-purple-400 mr-2"}),a.jsx("span",{className:"text-sm font-semibold text-purple-400",children:"Tekniska Hjdpunkter"})]}),a.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-black mb-4",children:"Byggd med Modern Teknologi"}),a.jsx("p",{className:"text-lg text-slate-400 max-w-2xl mx-auto",children:"React 19, Spring Boot 3.4, PostgreSQL 15 och en komplett DevOps-stack fr enterprise-klass prestanda"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 stagger-animation fade-in-section",children:f.map((x,m)=>a.jsxs("div",{className:"glass-card p-6 rounded-2xl group hover:border-white/20 transition-all duration-300 feature-card",children:[a.jsx("div",{className:`size-12 ${x.bgColor} rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:a.jsx("span",{className:x.color,children:x.icon})}),a.jsx("h3",{className:"text-lg font-bold mb-2 group-hover:text-brand-teal transition-colors",children:x.title}),a.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:x.description})]},m))}),a.jsxs("div",{className:"mt-16 glass-card rounded-2xl p-8 md:p-12 fade-in-section",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Full Technology Stack"}),a.jsx("p",{className:"text-slate-400",children:"Enterprise-grade open source teknologier"})]}),a.jsx("div",{className:"flex flex-wrap justify-center gap-3 stagger-animation fade-in-section",children:[{name:"React 19",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},{name:"Spring Boot 3.4",color:"bg-green-500/20 text-green-400 border-green-500/30"},{name:"PostgreSQL 15",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},{name:"Redis 7",color:"bg-red-500/20 text-red-400 border-red-500/30"},{name:"MinIO S3",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},{name:"Keycloak 24",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},{name:"Docker",color:"bg-sky-500/20 text-sky-400 border-sky-500/30"},{name:"Kubernetes",color:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"},{name:"Prometheus",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},{name:"Grafana",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},{name:"Tailwind CSS",color:"bg-teal-500/20 text-teal-400 border-teal-500/30"},{name:"Vite 5",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"}].map((x,m)=>a.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium border ${x.color}`,children:x.name},m))})]})]}),a.jsx("section",{className:"py-16 lg:py-24 fade-in-section",children:a.jsxs("div",{className:"brand-gradient rounded-3xl p-12 lg:p-20 text-center space-y-8 shadow-2xl shadow-brand-teal/30 relative overflow-hidden",children:[a.jsx("div",{className:"absolute -top-12 -right-12 w-64 h-64 bg-white/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -bottom-12 -left-12 w-48 h-48 bg-brand-blue/20 rounded-full blur-3xl"}),a.jsx("h2",{className:"text-3xl lg:text-5xl font-black text-white max-w-4xl mx-auto leading-tight relative z-10",children:"Redo att transformera er utbildning?"}),a.jsx("p",{className:"text-white/80 text-xl max-w-2xl mx-auto relative z-10",children:"Brja resan mot ett modernare stt att lra och utvecklas."}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-4 relative z-10",children:[a.jsx("button",{onClick:()=>s(!0),className:"bg-brand-gold text-slate-900 font-bold px-10 py-4 rounded-2xl hover:scale-105 transition-transform shadow-xl glow-gold text-lg",children:"Boka en gratis demo"}),a.jsx("button",{onClick:()=>t("/register-org"),className:"bg-[#06141b]/30 backdrop-blur-md text-white border border-white/30 font-bold px-10 py-4 rounded-2xl hover:bg-white/10 transition-all text-lg",children:"Testa gratis"})]})]})})]}),a.jsxs("footer",{className:"bg-[#040c11] pt-20 pb-10 mt-20 border-t border-white/10",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-12 mb-16",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"brand-gradient p-2 rounded-lg",children:a.jsx("img",{src:Vu,alt:"EduFlex",className:"w-5 h-5 brightness-0 invert"})}),a.jsxs("span",{className:"text-xl font-bold",children:["EduFlex ",a.jsx("span",{className:"text-brand-teal",children:"2.0"})]})]}),a.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:e("landing.footer.tagline")}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("a",{className:"text-slate-500 hover:text-brand-teal transition-colors",href:"#",children:a.jsx("svg",{className:"size-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),a.jsx("a",{className:"text-slate-500 hover:text-brand-teal transition-colors",href:"#",children:a.jsx("svg",{className:"size-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold mb-6",children:e("landing.footer.product")}),a.jsxs("ul",{className:"space-y-4 text-sm text-slate-500",children:[a.jsx("li",{children:a.jsx("a",{className:"hover:text-brand-teal transition-colors",href:"#features",children:e("landing.footer.features")})}),a.jsx("li",{children:a.jsx("a",{className:"hover:text-brand-teal transition-colors",href:"#",children:"Skerhet"})}),a.jsx("li",{children:a.jsx("a",{className:"hover:text-brand-teal transition-colors",href:"#",children:"API"})}),a.jsx("li",{children:a.jsx("a",{className:"hover:text-brand-teal transition-colors",href:"#",children:e("landing.footer.roadmap")})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold mb-6",children:"Support"}),a.jsxs("ul",{className:"space-y-4 text-sm text-slate-500",children:[a.jsx("li",{children:a.jsx("a",{className:"hover:text-brand-teal transition-colors",href:"#",children:"Hjlpcenter"})}),a.jsx("li",{children:a.jsx("a",{className:"hover:text-brand-teal transition-colors",href:"#",children:e("landing.footer.documentation")})}),a.jsx("li",{children:a.jsx("a",{className:"hover:text-brand-teal transition-colors",href:"#",children:e("landing.footer.system_status")})}),a.jsx("li",{children:a.jsx("a",{className:"hover:text-brand-teal transition-colors",href:"#",children:e("landing.footer.contact_sales")})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold mb-6",children:"Nyhetsbrev"}),a.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"F de senaste insikterna om digitalt lrande."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:"bg-white/5 border border-white/10 rounded-xl text-sm flex-1 px-4 py-2.5 focus:ring-brand-teal focus:border-brand-teal placeholder:text-slate-600 text-white",placeholder:"Din e-post",type:"email"}),a.jsx("button",{className:"brand-gradient p-2.5 rounded-xl shadow-lg shadow-brand-teal/20",children:a.jsx(Wa,{className:"w-5 h-5 text-white"})})]})]})]}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-slate-600",children:[a.jsx("p",{children:e("landing.footer.copyright")}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{className:"hover:text-white transition-colors",href:"#",children:"Integritetspolicy"}),a.jsx("a",{className:"hover:text-white transition-colors",href:"#",children:"Anvndarvillkor"}),a.jsx("a",{className:"hover:text-white transition-colors",href:"#",children:"Cookie-instllningar"})]})]})]}),a.jsx(V0e,{isOpen:n,onClose:()=>s(!1)})]})},axe=()=>{const{t}=nt(),e=Et(),r=At();r||console.error("Login component: AppContext is missing/undefined!");const{login:n,API_BASE:s="/api"}=r||{},[i,o]=N.useState({username:"",password:""}),[l,c]=N.useState(""),[d,u]=N.useState(""),[h,f]=N.useState(!1);ae.useEffect(()=>{const v=new URLSearchParams(window.location.search).get("tenantId");v&&c(v)},[]);const g=b=>{o({...i,[b.target.name]:b.target.value}),u("")},x=async b=>{b.preventDefault(),f(!0),u("");try{const v=s.endsWith("/")?s.slice(0,-1):s,y=()=>{if(l)return l;const S=window.location.hostname,A=localStorage.getItem("force_tenant");if(A==="public")return null;if(A)return A;if(/^[\d.]+$/.test(S)||S.includes("ngrok")||S.includes("loca.lt")||S.includes("trycloudflare.com"))return null;if(S.endsWith(".localhost")&&S!=="localhost")return S.split(".")[0];const T=S.split(".");if(T.length>2){const E=T[0];return["www","api","eduflexlms"].includes(E)?null:E}return null},w={"Content-Type":"application/json"},k=y();k&&(w["X-Tenant-ID"]=k);const j=await fetch(`${v}/auth/login`,{method:"POST",headers:w,body:JSON.stringify(i)}),_=await j.json();if(j.ok)if(_.token){localStorage.setItem("token",_.token);const S={id:_.id,username:_.username,firstName:_.firstName||_.username,lastName:_.lastName||"",fullName:_.fullName||_.username,role:_.role,profilePictureUrl:_.profilePictureUrl||null,points:_.points||0,level:_.level||1,earnedBadges:_.earnedBadges||[]};n&&n(S,_.token,k),e("/")}else console.error("Svaret saknade token:",_),u("Servern skickade ett ofullstndigt svar (ingen token).");else u(t("messages.login_failed")||"Fel anvndarnamn eller lsenord.")}catch(v){console.error("Login error:",v),u(t("messages.login_error")||"Kunde inte ansluta till servern.")}finally{f(!1)}},m=()=>{const b=s.endsWith("/")?s.slice(0,-1):s;window.location.href=`${b}/oauth2/authorization/keycloak`},p=()=>{console.log("Google login not implemented yet"),alert("Google login is coming soon!")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-[#121212] p-4 font-sans transition-colors duration-300",children:a.jsxs("div",{className:"max-w-[400px] w-full bg-white dark:bg-[#1E1F20] rounded-3xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-300",children:[a.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-indigo-800 px-8 pt-12 pb-8 text-center relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-white/10 rounded-full blur-3xl pointer-events-none"}),a.jsx("div",{className:"relative w-16 h-16 bg-white text-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-5 text-3xl font-black shadow-xl shadow-indigo-900/20 select-none transform transition-transform hover:scale-105",children:"E"}),a.jsx("h2",{className:"relative text-2xl font-bold text-white mb-2 tracking-tight",children:t("auth.login_header")||"Logga in"}),a.jsx("p",{className:"relative text-indigo-100 text-sm font-medium opacity-90",children:"Vlkommen tillbaka till EduFlex"})]}),a.jsxs("div",{className:"p-8 pt-10",children:[d&&a.jsxs("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-300 px-4 py-3 rounded-xl flex items-center gap-3 text-sm font-medium animate-in slide-in-from-top-2",children:[a.jsx(Er,{size:18,className:"shrink-0"}),d]}),a.jsxs("form",{onSubmit:x,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 ml-1",children:"Organization ID (Optional)"}),a.jsx("div",{className:"relative group",children:a.jsx("input",{type:"text",className:"w-full pl-4 pr-12 py-3.5 bg-gray-50 dark:bg-[#131314] border border-gray-200 dark:border-[#3c4043] rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 dark:focus:border-indigo-500 focus:bg-white dark:focus:bg-[#131314] transition-all font-medium text-sm shadow-sm",placeholder:"e.g. saas-test-school",value:l,onChange:b=>c(b.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 ml-1",children:t("auth.username")||"Anvndarnamn"}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{name:"username",type:"text",className:"w-full pl-4 pr-12 py-3.5 bg-gray-50 dark:bg-[#131314] border border-gray-200 dark:border-[#3c4043] rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 dark:focus:border-indigo-500 focus:bg-white dark:focus:bg-[#131314] transition-all font-medium text-sm shadow-sm",placeholder:"Ditt anvndarnamn",value:i.username,onChange:g,required:!0}),a.jsx("div",{className:"absolute inset-y-0 right-0 w-12 flex items-center justify-center pointer-events-none text-gray-400 group-focus-within:text-indigo-600 transition-colors",children:a.jsx(jr,{size:20})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 ml-1",children:t("auth.password")||"Lsenord"}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{name:"password",type:"password",className:"w-full pl-4 pr-12 py-3.5 bg-gray-50 dark:bg-[#131314] border border-gray-200 dark:border-[#3c4043] rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 dark:focus:border-indigo-500 focus:bg-white dark:focus:bg-[#131314] transition-all font-medium text-sm shadow-sm",placeholder:"",value:i.password,onChange:g,required:!0}),a.jsx("div",{className:"absolute inset-y-0 right-0 w-12 flex items-center justify-center pointer-events-none text-gray-400 group-focus-within:text-indigo-600 transition-colors",children:a.jsx(Mn,{size:20})})]})]}),a.jsxs("button",{type:"submit",disabled:h,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-indigo-600/30 hover:shadow-indigo-600/50 dark:shadow-none transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-4",children:[h?a.jsx(ft,{className:"animate-spin",size:20}):a.jsx(_ge,{size:20}),a.jsx("span",{className:"text-sm",children:h?t("common.loading")||"Loggar in...":t("auth.login_button")||"Logga in"})]})]}),a.jsxs("div",{className:"relative my-8",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-200 dark:border-[#3c4043]"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-white dark:bg-[#1E1F20] px-3 text-gray-400 font-bold tracking-wider",children:"Eller"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{type:"button",onClick:m,className:"w-full bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 font-bold py-3.5 rounded-xl border border-indigo-200 dark:border-indigo-800 transition-all flex items-center justify-center gap-3 group text-sm shadow-sm",children:"Logga in med Keycloak"}),a.jsx("button",{type:"button",onClick:p,className:"w-full bg-white dark:bg-[#282a2c] hover:bg-gray-50 dark:hover:bg-[#3c4043] text-gray-700 dark:text-white font-bold py-3.5 rounded-xl border border-gray-200 dark:border-[#3c4043] hover:border-gray-300 dark:hover:border-gray-500 transition-all flex items-center justify-center gap-3 group text-sm shadow-sm hover:shadow-md",children:"Logga in med Google"})]}),a.jsxs("p",{className:"text-center mt-8 text-xs text-gray-400 font-medium",children:[t("auth.no_account")||"Har du inget konto?"," ",a.jsx("span",{className:"font-bold text-indigo-600 dark:text-indigo-400 cursor-pointer hover:underline",children:"Kontakta Admin"})]})]})]})})},sxe=()=>{const t=Et(),[e,r]=N.useState(1),[n,s]=N.useState(!1),[i,o]=N.useState(null),[l,c]=N.useState(null),[d,u]=N.useState({name:"",domain:"",adminFirstName:"",adminLastName:"",adminEmail:"",adminPassword:""}),h=g=>{u({...d,[g.target.name]:g.target.value})},f=async g=>{g.preventDefault(),s(!0),o(null);const x={name:d.name,domain:d.domain.toLowerCase(),adminFirstName:d.adminFirstName,adminLastName:d.adminLastName,adminEmail:d.adminEmail,adminPassword:d.adminPassword};try{const m=await fetch("/api/public/tenants/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!m.ok){const b=await m.json();throw new Error(b.error||"Registreringen misslyckades.")}const p=await m.json();c(p),r(3)}catch(m){console.error(m),o(m.message)}finally{s(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg",children:a.jsx(P1,{size:24})})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Registrera din Skola"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Kom igng med EduFlex p mindre n 2 minuter."})]}),a.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-100",children:e===3&&l?a.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6",children:a.jsx(Gr,{className:"h-8 w-8 text-green-600"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Vlkommen till EduFlex!"}),a.jsxs("p",{className:"text-gray-500 mb-6",children:["Din organisation ",a.jsx("strong",{children:l.tenantId})," r nu skapad."]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-left mb-6 border border-blue-100",children:[a.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Inloggningsuppgifter:"}),a.jsxs("p",{className:"text-sm text-blue-800",children:["Email: ",d.adminEmail]}),a.jsx("p",{className:"text-sm text-blue-800",children:"Lsenord: ******"})]}),a.jsx("a",{href:l.loginUrl||"/login",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"G till din Inloggning"})]}):a.jsxs("form",{className:"space-y-6",onSubmit:f,children:[i&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Er,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:i})})]})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Skolans Namn"}),a.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(P1,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:"T.ex. Centralskolan",value:d.name,onChange:h})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"domain",className:"block text-sm font-medium text-gray-700",children:"nskad Subdomn"}),a.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:"https://"})}),a.jsx("input",{id:"domain",name:"domain",type:"text",required:!0,pattern:"[a-zA-Z0-9-]+",className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-16 pr-24 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:"centralskolan",value:d.domain,onChange:h}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:".eduflex.se"})})]})]}),a.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[a.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-4",children:"Administratrskonto"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Frnamn"}),a.jsx("input",{name:"adminFirstName",required:!0,className:"block w-full sm:text-sm border-gray-300 rounded-md py-2 border px-3",value:d.adminFirstName,onChange:h})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Efternamn"}),a.jsx("input",{name:"adminLastName",required:!0,className:"block w-full sm:text-sm border-gray-300 rounded-md py-2 border px-3",value:d.adminLastName,onChange:h})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsxs("div",{className:"relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(jr,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{name:"adminEmail",type:"email",required:!0,className:"block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:"admin@skola.se",value:d.adminEmail,onChange:h})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lsenord"}),a.jsxs("div",{className:"relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Mn,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{name:"adminPassword",type:"password",required:!0,minLength:8,className:"block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:"",value:d.adminPassword,onChange:h})]})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:scale-[1.02]",children:n?a.jsxs(a.Fragment,{children:[a.jsx(M1,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Skapar din milj..."]}):a.jsxs(a.Fragment,{children:["Starta min 14-dagars testperiod",a.jsx(Wa,{className:"ml-2 h-4 w-4"})]})})})]})}),e!==3&&a.jsx("div",{className:"text-center mt-4",children:a.jsx("button",{onClick:()=>t("/"),className:"text-sm text-gray-500 hover:text-gray-900",children:"Tillbaka till startsidan"})})]})]})},ixe=()=>{const[t]=db(),e=Et(),{login:r}=At();N.useEffect(()=>{const s=t.get("token");s?(localStorage.setItem("token",s),n(s)):e("/login?error=no_token")},[t,e]);const n=async s=>{try{const i=await m5(()=>Promise.resolve().then(()=>i5),void 0).then(o=>o.api.get("/users/me"));if(i)r(i,s),e("/");else throw new Error("Failed to fetch user data")}catch(i){console.error(i),e("/login?error=auth_failed")}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-[#121212]",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ft,{className:"w-10 h-10 animate-spin text-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Autentiserar..."})]})})},oxe=()=>{const t=Et(),e=zn();N.useEffect(()=>{const s=new URLSearchParams(e.search),i=s.get("token"),o=s.get("error");i?(localStorage.setItem("token",i),setTimeout(()=>{window.location.href="/"},1500)):o?console.error("LTI Error:",o):(console.warn("No token received in LTI Success"),setTimeout(()=>{t("/login?error=LTI_Missing_Token")},2e3))},[e,t]);const r=new URLSearchParams(e.search),n=r.get("error")||!r.get("token")&&"Missing Token";return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-[#121212] p-4",children:a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] p-8 rounded-3xl shadow-xl max-w-md w-full text-center",children:n?a.jsxs("div",{className:"flex flex-col items-center animate-in zoom-in duration-300",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 text-red-600 rounded-full flex items-center justify-center mb-4",children:a.jsx(eo,{size:32})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Anslutning Misslyckades"}),a.jsx("p",{className:"text-gray-500 mb-6 break-words w-full",children:r.get("message")||"Kunde inte verifiera LTI-token."}),a.jsx("button",{onClick:()=>t("/login"),className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition",children:"Till Inloggning"})]}):a.jsxs("div",{className:"flex flex-col items-center animate-in zoom-in duration-300",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-4",children:a.jsx(nr,{size:32})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Inloggning Lyckades!"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"EduFlex LTI-anslutning accepterad. Vidarebefordrar..."}),a.jsx(ft,{className:"animate-spin text-indigo-600",size:24})]})})})},lxe=()=>{const[t]=db(),{refreshUser:e,currentUser:r}=At(),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState([]),d=t.get("token"),u=t.get("settings"),h=t.get("deploy"),f=t.get("iss");N.useEffect(()=>{(async()=>{if(d){localStorage.setItem("token",d),e&&await e();try{const m=await O.quiz.getMy("me")}catch(m){console.error("Failed to load content",m)}}s(!1)})()},[d]),N.useEffect(()=>{r&&(async()=>{try{const m=await O.quiz.getMy(r.id);c(m||[])}catch(m){console.error("Error loading quizzes",m)}})()},[r]);const g=async x=>{o(!0);try{const m=atob(u),p=JSON.parse(m),b=p.deep_link_return_url,v=p.data,y={type:"ltiResourceLink",title:x.title,text:x.description,url:window.location.origin+"/quiz/"+x.id,custom:{resource_id:x.id,resource_type:"quiz"}},w={iss:f,deploy:h,data:v,contentItems:[y]},k=await fetch("/api/lti/deep_link_response",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(w)});if(!k.ok)throw new Error("Failed to sign response");const _=(await k.json()).jwt,S=document.createElement("form");S.method="POST",S.action=b;const A=document.createElement("input");A.type="hidden",A.name="JWT",A.value=_,S.appendChild(A),document.body.appendChild(S),S.submit()}catch(m){console.error("Selection failed",m),alert("Kunde inte lnka materialet. Se konsolen."),o(!1)}};return n?a.jsx("div",{className:"h-screen flex items-center justify-center",children:a.jsx(ft,{className:"animate-spin"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#121212] p-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("header",{className:"mb-8",children:[a.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2 text-indigo-700 dark:text-indigo-400",children:[a.jsx(Gu,{})," Vlj Material att Lnka"]}),a.jsx("p",{className:"text-gray-500",children:"Klicka p ett quiz fr att lgga till det i din kurs (LMS)."})]}),i?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ft,{className:"animate-spin mx-auto mb-4",size:32}),a.jsx("p",{children:"Lnkar materialet..."})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.map(x=>a.jsxs("div",{onClick:()=>g(x),className:"bg-white dark:bg-[#1E1F20] p-6 rounded-xl border border-gray-200 dark:border-[#3c4043] cursor-pointer hover:border-indigo-500 hover:shadow-md transition-all group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"font-bold text-lg",children:x.title}),a.jsx(Mr,{className:"text-indigo-200 group-hover:text-indigo-600 transition-colors"})]}),a.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:x.description||"Ingen beskrivning"}),a.jsx("div",{className:"mt-4 text-xs font-bold text-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"Klicka fr att vlja"})]},x.id)),l.length===0&&a.jsx("div",{className:"col-span-full py-12 text-center text-gray-400 border-2 border-dashed border-gray-200 rounded-xl",children:"Inga quiz hittades. Skapa ett quiz i Resursbanken frst."})]})]})})},TG=({onViewAll:t})=>{const{t:e}=nt(),[r,n]=N.useState([]),[s,i]=N.useState(!0);N.useEffect(()=>{o()},[]);const o=async()=>{try{const l=await O.messages.getInbox(),c=Array.isArray(l)?l.slice(0,10):[];n(c)}catch(l){console.error("Failed to load recent messages",l)}finally{i(!1)}};return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex flex-col h-full",children:[a.jsxs("div",{className:"p-6 border-b border-card dark:border-card-dark flex justify-between items-center",children:[a.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Qi,{className:"text-indigo-600",size:20})," ",e("widgets.recent_messages.title")]}),a.jsxs("button",{onClick:t,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 hover:underline flex items-center gap-1",children:[e("widgets.recent_messages.view_all")," ",a.jsx(Wa,{size:14})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:s?a.jsx("div",{className:"p-8 text-center text-gray-400 text-sm",children:e("messages.loading")}):r.length===0?a.jsx("div",{className:"p-8 text-center text-gray-400 text-sm italic",children:e("widgets.recent_messages.empty")}):a.jsx("div",{className:"flex flex-col gap-2",children:r.map(l=>a.jsxs("div",{onClick:t,className:`p-3 rounded-xl cursor-pointer transition-colors border border-transparent ${l.isRead?"hover:bg-gray-50 dark:hover:bg-[#282a2c]":"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-100 dark:border-indigo-800"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:`text-sm ${l.isRead?"font-medium text-gray-700 dark:text-gray-300":"font-black text-gray-900 dark:text-white"}`,children:l.senderName}),a.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[a.jsx(Tt,{size:10})," ",new Date(l.timestamp).toLocaleDateString()]})]}),a.jsx("p",{className:`text-xs truncate ${l.isRead?"text-gray-500":"font-bold text-gray-800 dark:text-gray-200"}`,children:l.subject})]},l.id))})})]})},cxe=({users:t=[],courses:e=[],documents:r=[],onViewMessages:n,unreadCount:s=0})=>{const{t:i}=nt(),o=Array.isArray(t)?t:(t==null?void 0:t.content)||[],l=Array.isArray(e)?e:(e==null?void 0:e.content)||[],c=Array.isArray(r)?r:(r==null?void 0:r.content)||[],d=o.filter(p=>{var b;return p.role==="STUDENT"||((b=p.role)==null?void 0:b.name)==="STUDENT"}).length,u=o.filter(p=>{var b;return p.role==="TEACHER"||((b=p.role)==null?void 0:b.name)==="TEACHER"}).length,h=o.filter(p=>{var b;return p.role==="ADMIN"||((b=p.role)==null?void 0:b.name)==="ADMIN"}).length,f=o.filter(p=>{var b;return p.role==="MENTOR"||((b=p.role)==null?void 0:b.name)==="MENTOR"}).length,g=o.filter(p=>{var b;return p.role==="PRINCIPAL"||((b=p.role)==null?void 0:b.name)==="PRINCIPAL"}).length,x=l.filter(p=>p.isOpen).length,m=l.length-x;return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8 animate-in fade-in slide-in-from-bottom-4",children:[a.jsxs("div",{className:"bg-card dark:bg-card-dark p-6 rounded-[var(--radius-xl)] border border-card dark:border-card-dark shadow-sm flex flex-col justify-between min-h-[160px]",style:{backdropFilter:"var(--card-backdrop)"},children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-[10px] font-bold uppercase tracking-wider",children:i("dashboard.total_users")}),a.jsx("p",{className:"text-4xl font-black text-gray-900 dark:text-white mt-1",children:o.length})]}),a.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-3 rounded-full text-blue-600 dark:text-blue-400",children:a.jsx(vt,{size:24})})]}),a.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mt-4 pt-4 border-t border-gray-100 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 dark:text-gray-400",title:i("dashboard.students"),children:[a.jsx(dw,{size:11,className:"text-green-500"})," ",d," S"]}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 dark:text-gray-400",title:i("dashboard.teachers"),children:[a.jsx($0,{size:11,className:"text-indigo-500"})," ",u," L"]}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 dark:text-gray-400",title:i("dashboard.admins"),children:[a.jsx(pi,{size:11,className:"text-red-500"})," ",h," A"]}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 dark:text-gray-400",title:i("dashboard.mentors"),children:[a.jsx(vt,{size:11,className:"text-orange-500"})," ",f," M"]}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 dark:text-gray-400",title:i("dashboard.principals"),children:[a.jsx(pi,{size:11,className:"text-purple-500"})," ",g," R"]})]})]}),a.jsxs("div",{className:"bg-card dark:bg-card-dark p-6 rounded-[var(--radius-xl)] border border-card dark:border-card-dark shadow-sm flex flex-col justify-between h-40",style:{backdropFilter:"var(--card-backdrop)"},children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase",children:"Totalt Kurser"}),a.jsx("p",{className:"text-4xl font-black text-gray-900 dark:text-white mt-1",children:l.length})]}),a.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 p-3 rounded-full text-indigo-600 dark:text-indigo-400",children:a.jsx($0,{size:24})})]}),a.jsxs("div",{className:"flex gap-4 mt-4 pt-4 border-t border-gray-100 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex items-center gap-1 text-xs font-bold text-green-600",children:[a.jsx(nr,{size:12})," ",x," ",i("dashboard.open")]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs font-bold text-red-500",children:[a.jsx(eo,{size:12})," ",m," ",i("dashboard.closed")]})]})]}),a.jsxs("div",{className:"bg-card dark:bg-card-dark p-6 rounded-[var(--radius-xl)] border border-card dark:border-card-dark shadow-sm flex flex-col justify-between h-40",style:{backdropFilter:"var(--card-backdrop)"},children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase",children:i("dashboard.archived_files")}),a.jsx("p",{className:"text-4xl font-black text-gray-900 dark:text-white mt-1",children:c.length})]}),a.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 p-3 rounded-full text-orange-600 dark:text-orange-400",children:a.jsx(xt,{size:24})})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-[#3c4043]",children:a.jsx("p",{className:"text-xs text-gray-400 italic",children:i("dashboard.realtime_update_notice")})})]}),a.jsxs("div",{onClick:n,className:"bg-card dark:bg-card-dark p-6 rounded-[var(--radius-xl)] border border-card dark:border-card-dark shadow-sm flex flex-col justify-between h-40 cursor-pointer hover:border-indigo-400 transition-all group",style:{backdropFilter:"var(--card-backdrop)"},children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase",children:i("dashboard.new_messages")}),a.jsx("p",{className:"text-4xl font-black text-gray-900 dark:text-white mt-1",children:s})]}),a.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-3 rounded-full text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform",children:a.jsx(er,{size:24})})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("p",{className:"text-xs text-gray-500 font-bold group-hover:text-indigo-600 transition-colors",children:i("dashboard.go_to_inbox")}),a.jsx(Wa,{size:14,className:"text-gray-400 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]})]})},OG=({currentPage:t,totalPages:e,onPageChange:r})=>{if(e<=1)return null;const n=()=>{const s=[];if(e<=5)for(let o=1;o<=e;o++)s.push(o);else t<=3?s.push(1,2,3,4,"...",e):t>=e-2?s.push(1,"...",e-3,e-2,e-1,e):s.push(1,"...",t-1,t,t+1,"...",e);return s};return a.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200 dark:border-[#3c4043] sm:px-6",children:a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["Visar sida ",a.jsx("span",{className:"font-medium",children:t})," av ",a.jsx("span",{className:"font-medium",children:e})]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsxs("button",{onClick:()=>r(t-1),disabled:t===1,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#1E1F20] text-sm font-medium ${t===1?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"text-gray-500 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-[#282a2c]"}`,children:[a.jsx("span",{className:"sr-only",children:"Fregende"}),a.jsx(Ho,{size:16})]}),n().map((s,i)=>a.jsx("button",{onClick:()=>typeof s=="number"?r(s):null,disabled:typeof s!="number",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${s===t?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600 dark:bg-indigo-900/40 dark:border-indigo-500 dark:text-indigo-400":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-[#1E1F20] dark:border-gray-600 dark:text-gray-400 dark:hover:bg-[#282a2c]"} ${typeof s!="number"?"cursor-default":"cursor-pointer"}`,children:s},i)),a.jsxs("button",{onClick:()=>r(t+1),disabled:t===e,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#1E1F20] text-sm font-medium ${t===e?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"text-gray-500 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-[#282a2c]"}`,children:[a.jsx("span",{className:"sr-only",children:"Nsta"}),a.jsx(or,{size:16})]})]})})]})})},dxe=({courses:t,onEdit:e,onManage:r,onNewCourse:n,onAiCourseClick:s,onDelete:i})=>{const{t:o}=nt(),[l,c]=N.useState(""),[d,u]=N.useState("ALL"),[h,f]=N.useState(1),g=10,x=y=>y?new Date(y).toLocaleDateString("sv-SE"):"",m=(t==null?void 0:t.filter(y=>{const w=(y.name+y.courseCode).toLowerCase().includes(l.toLowerCase()),k=d==="ALL"||(d==="OPEN"?y.isOpen:!y.isOpen);return w&&k}))||[],p=Math.ceil(m.length/g),b=(h-1)*g,v=m.slice(b,b+g);return a.jsxs("div",{className:"bg-card dark:bg-card-dark rounded-[var(--radius-xl)] border border-card dark:border-card-dark shadow-sm overflow-hidden animate-in slide-in-from-bottom-8",style:{backdropFilter:"var(--card-backdrop)"},children:[a.jsxs("div",{className:"p-6 border-b border-card dark:border-card-dark flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-gray-50/50 dark:bg-[#131314]/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h3",{className:"font-bold text-gray-800 dark:text-white",children:o("dashboard.course_registry")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:s,className:"text-xs bg-gradient-to-r from-indigo-600 to-violet-600 text-white px-3 py-1.5 rounded-lg font-bold shadow-sm hover:opacity-90 transition-opacity flex items-center gap-1",children:[a.jsx(gt,{size:14}),"Skapa med AI"]}),a.jsxs("button",{onClick:n,className:"text-xs bg-gray-900 dark:bg-white text-white dark:text-black px-3 py-1.5 rounded-lg font-bold hover:opacity-80 flex items-center gap-1",children:[a.jsx(jt,{size:14})," ",o("dashboard.new_course")]})]})]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[a.jsxs("div",{className:"relative flex-1 md:flex-none",children:[a.jsx(gr,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),a.jsx("input",{className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm dark:bg-[#1E1F20] dark:text-white dark:border-[#3c4043]",placeholder:o("dashboard.search_course"),value:l,onChange:y=>{c(y.target.value),f(1)}})]}),a.jsxs("select",{className:"border dark:border-[#3c4043] rounded-lg px-3 py-2 text-sm bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white",value:d,onChange:y=>{u(y.target.value),f(1)},children:[a.jsx("option",{value:"ALL",children:o("dashboard.all_statuses")}),a.jsx("option",{value:"OPEN",children:o("dashboard.open")}),a.jsx("option",{value:"CLOSED",children:o("dashboard.closed")})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#282a2c] text-gray-500 dark:text-gray-400 border-b dark:border-[#3c4043]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:o("dashboard.table.status")}),a.jsx("th",{className:"p-4",children:o("dashboard.table.code")}),a.jsx("th",{className:"p-4",children:o("dashboard.table.name")}),a.jsx("th",{className:"p-4",children:o("dashboard.table.date")}),a.jsx("th",{className:"p-4 text-right",children:o("dashboard.table.action")})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:v.map(y=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c]",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${y.color||"bg-gray-300"}`,title:o("dashboard.course_color")}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${y.isOpen?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:y.isOpen?o("dashboard.open"):o("dashboard.closed")})]})}),a.jsx("td",{className:"p-4 font-mono text-gray-600 dark:text-gray-400",children:y.courseCode}),a.jsx("td",{className:"p-4 font-bold text-gray-900 dark:text-white",children:y.name}),a.jsxs("td",{className:"p-4 text-gray-500 dark:text-gray-400 text-xs",children:[x(y.startDate)," - ",x(y.endDate)]}),a.jsxs("td",{className:"p-4 text-right flex justify-end gap-2 text-gray-500",children:[a.jsx("button",{onClick:()=>e(y),className:"p-2 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-gray-700 rounded-lg transition-colors",title:o("dashboard.edit_course"),children:a.jsx(Zl,{size:16})}),a.jsx("button",{onClick:()=>i(y.id),className:"p-2 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:o("dashboard.delete_course"),children:a.jsx(qt,{size:16})}),a.jsx("button",{onClick:()=>r(y.id),className:"text-indigo-600 dark:text-indigo-400 font-bold hover:underline px-2 py-1 ml-2",children:o("dashboard.manage")})]})]},y.id))})]})}),a.jsx(OG,{currentPage:h,totalPages:p,onPageChange:f})]})},uxe=({latestUsers:t,onNewUserClick:e})=>{const{t:r}=nt();return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm p-6 overflow-hidden animate-in slide-in-from-bottom-8 h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[a.jsx(jr,{size:18,className:"text-indigo-600"}),r("dashboard.recent_users")]}),a.jsxs("button",{onClick:e,className:"text-xs bg-indigo-600 text-white px-3 py-1.5 rounded-lg font-bold hover:bg-indigo-700 flex items-center gap-1",children:[a.jsx(jt,{size:12})," ",r("dashboard.new")]})]}),a.jsx("div",{className:"space-y-3",children:(t==null?void 0:t.length)>0?t.map((n,s)=>{var i,o;return a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-100 dark:border-[#3c4043] hover:border-indigo-200 transition-colors",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold text-xs uppercase border border-indigo-200",children:((i=n.firstName)==null?void 0:i[0])||"?"}),a.jsxs("div",{className:"overflow-hidden",children:[a.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:[n.firstName," ",n.lastName]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono capitalize",children:(((o=n.role)==null?void 0:o.name)||n.role||"").toLowerCase()})]})]},n.id??`user-${s}`)}):a.jsx("p",{className:"text-sm text-gray-400 italic",children:r("dashboard.no_new_users")})})]})},hxe=({latestDocs:t})=>{var i,o;const{t:e}=nt(),[r,n]=N.useState(null),s=l=>l?l.startsWith("image/")?a.jsx(Dd,{size:16}):l.includes("pdf")?a.jsx(xt,{size:16}):l.includes("word")||l.includes("document")?a.jsx(xt,{size:16}):l.includes("excel")||l.includes("sheet")?a.jsx(xt,{size:16}):l.includes("code")||l.includes("javascript")||l.includes("html")?a.jsx(uge,{size:16}):a.jsx(Qp,{size:16}):a.jsx(Qp,{size:16});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm p-6 overflow-hidden animate-in slide-in-from-bottom-8 h-full flex flex-col",children:[a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[a.jsx(Qp,{size:18,className:"text-blue-600"}),e("dashboard.recent_uploads")]})}),a.jsx("div",{className:"space-y-3 flex-1",children:(t==null?void 0:t.length)>0?t.map((l,c)=>a.jsxs("div",{onClick:()=>n(l),className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-100 dark:border-[#3c4043] hover:border-blue-400 hover:shadow-sm cursor-pointer transition-all group",children:[a.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg border border-blue-100 dark:bg-blue-900/20 dark:border-blue-800 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/40 transition-colors",children:s(l.fileType)}),a.jsxs("div",{className:"overflow-hidden flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",title:l.fileName||l.title||e("dashboard.unknown_file"),children:l.fileName||l.title||e("dashboard.unknown_file")}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[l.size?`${(l.size/1024).toFixed(1)} KB`:e("dashboard.unknown_size"),"  ",l.uploadedAt?new Date(l.uploadedAt).toLocaleDateString("sv-SE"):e("dashboard.unknown_date")]})]})]},l.id??`doc-${c}`)):a.jsx("p",{className:"text-sm text-gray-400 italic",children:e("dashboard.no_files_uploaded")})})]}),r&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:()=>n(null),children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95",onClick:l=>l.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg dark:text-white truncate pr-4",children:r.fileName||r.title}),a.jsx("button",{onClick:()=>n(null),className:"p-1 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-full text-gray-500",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"m6 6 12 12"})]})})]}),a.jsxs("div",{className:"p-8 flex flex-col items-center text-center",children:[(i=r.fileType)!=null&&i.startsWith("image/")?a.jsx("img",{src:`${window.location.origin}${r.fileUrl}`,alt:"Preview",className:"max-h-64 rounded-lg shadow-sm mb-6 object-contain"}):a.jsx("div",{className:"w-24 h-24 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mb-6",children:ae.cloneElement(s(r.fileType),{size:48})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full text-sm mb-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-[#131314] p-3 rounded-lg",children:[a.jsx("p",{className:"text-gray-500 text-xs uppercase mb-1",children:"Storlek"}),a.jsxs("p",{className:"font-mono font-bold dark:text-white",children:[(r.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-[#131314] p-3 rounded-lg",children:[a.jsx("p",{className:"text-gray-500 text-xs uppercase mb-1",children:"Typ"}),a.jsx("p",{className:"font-mono font-bold dark:text-white uppercase",children:((o=r.fileType)==null?void 0:o.split("/")[1])||"FIL"})]})]}),a.jsxs("a",{href:`${window.location.origin}${r.fileUrl}`,download:!0,target:"_blank",rel:"noreferrer",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7 10 12 15 17 10"}),a.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),e("common.download_file")||"Ladda ner fil"]})]})]})})]})},fxe=({users:t,onNewUser:e,onEdit:r,onDelete:n})=>{const{t:s}=nt(),[i,o]=ae.useState(""),[l,c]=ae.useState("ALL"),[d,u]=N.useState([]),[h,f]=N.useState(1),[g,x]=N.useState({key:null,direction:"DEFAULT"}),m=10;N.useEffect(()=>{O.roles.getAll().then(u).catch(console.error)},[]);const p=(t==null?void 0:t.filter(_=>{var T;const S=(_.firstName+" "+_.lastName+_.email).toLowerCase().includes(i.toLowerCase()),A=l==="ALL"||(((T=_.role)==null?void 0:T.name)||_.role)===l;return S&&A}))||[],b=ae.useMemo(()=>{let _=[...p];return g.key&&g.direction!=="DEFAULT"?_.sort((S,A)=>{var C,z;let T,E;switch(g.key){case"user":T=(S.firstName+" "+S.lastName).toLowerCase(),E=(A.firstName+" "+A.lastName).toLowerCase();break;case"email":T=(S.email||"").toLowerCase(),E=(A.email||"").toLowerCase();break;case"role":T=(((C=S.role)==null?void 0:C.name)||S.role||"").toLowerCase(),E=(((z=A.role)==null?void 0:z.name)||A.role||"").toLowerCase();break;case"status":T=s("dashboard.active"),E=s("dashboard.active");break;default:T=S.id,E=A.id}return T<E?g.direction==="ASC"?-1:1:T>E?g.direction==="ASC"?1:-1:0}):_.sort((S,A)=>A.id-S.id),_},[p,g,s]),v=Math.ceil(b.length/m),y=(h-1)*m,w=b.slice(y,y+m),k=_=>{let S="ASC";g.key===_&&(g.direction==="ASC"?S="DESC":g.direction==="DESC"&&(S="DEFAULT")),x({key:_,direction:S}),f(1)},j=_=>g.key!==_||g.direction==="DEFAULT"?a.jsx(Xfe,{size:14,className:"opacity-30"}):g.direction==="ASC"?a.jsx(J2,{size:14,className:"text-indigo-600"}):a.jsx(Mo,{size:14,className:"text-indigo-600"});return a.jsxs("div",{className:"bg-card dark:bg-card-dark rounded-[var(--radius-xl)] border border-card dark:border-card-dark shadow-sm overflow-hidden animate-in slide-in-from-bottom-8",style:{backdropFilter:"var(--card-backdrop)"},children:[a.jsxs("div",{className:"p-6 border-b border-card dark:border-card-dark flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-gray-50/50 dark:bg-[#131314]/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h3",{className:"font-bold text-gray-800 dark:text-white",children:s("dashboard.user_registry")}),a.jsxs("button",{onClick:e,className:"text-xs bg-indigo-600 text-white px-3 py-1.5 rounded-lg font-bold hover:bg-indigo-700 flex items-center gap-1",children:[a.jsx(jt,{size:14})," ",s("dashboard.new_user")]})]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[a.jsxs("div",{className:"relative flex-1 md:flex-none",children:[a.jsx(gr,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),a.jsx("input",{className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm dark:bg-[#1E1F20] dark:text-white dark:border-[#3c4043]",placeholder:s("dashboard.search_user"),value:i,onChange:_=>{o(_.target.value),f(1)}})]}),a.jsxs("select",{className:"border dark:border-[#3c4043] rounded-lg px-3 py-2 text-sm bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white",value:l,onChange:_=>{c(_.target.value),f(1)},children:[a.jsx("option",{value:"ALL",children:s("dashboard.all_roles")}),d&&d.length>0?d.map(_=>a.jsx("option",{value:_.name,children:_.name},_.id)):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"STUDENT",children:s("dashboard.students")}),a.jsx("option",{value:"TEACHER",children:s("dashboard.teachers")}),a.jsx("option",{value:"ADMIN",children:s("dashboard.admins")})]})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#282a2c] text-gray-500 dark:text-gray-400 border-b dark:border-[#3c4043]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-[#323436] transition-colors group",onClick:()=>k("user"),children:a.jsxs("div",{className:"flex items-center gap-1",children:[s("dashboard.table.user"),j("user")]})}),a.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-[#323436] transition-colors group",onClick:()=>k("email"),children:a.jsxs("div",{className:"flex items-center gap-1",children:[s("dashboard.table.email"),j("email")]})}),a.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-[#323436] transition-colors group",onClick:()=>k("role"),children:a.jsxs("div",{className:"flex items-center gap-1",children:[s("dashboard.table.role"),j("role")]})}),a.jsx("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-[#323436] transition-colors group",onClick:()=>k("status"),children:a.jsxs("div",{className:"flex items-center gap-1",children:[s("dashboard.table.status"),j("status")]})}),a.jsx("th",{className:"p-4 text-right",children:s("dashboard.table.action")})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:w.map(_=>{var S,A,T,E;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c]",children:[a.jsxs("td",{className:"p-4 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold text-xs uppercase",children:((S=_.firstName)==null?void 0:S[0])||"?"}),a.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[_.firstName," ",_.lastName]})]}),a.jsx("td",{className:"p-4 text-gray-500 dark:text-gray-400",children:_.email}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${(((A=_.role)==null?void 0:A.name)||_.role)==="ADMIN"?"bg-purple-100 text-purple-700":(((T=_.role)==null?void 0:T.name)||_.role)==="TEACHER"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:((E=_.role)==null?void 0:E.name)||_.role})}),a.jsx("td",{className:"p-4 text-gray-400 text-xs",children:s("dashboard.active")}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[r&&a.jsx("button",{onClick:()=>r(_),className:"p-2 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-gray-700 rounded-lg transition-colors",title:s("dashboard.edit_user"),children:a.jsx(Zl,{size:16})}),n&&a.jsx("button",{onClick:()=>n(_.id),className:"p-2 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:s("dashboard.delete_user"),children:a.jsx(qt,{size:16})})]})})]},_.id)})})]})}),a.jsx(OG,{currentPage:h,totalPages:v,onPageChange:f})]})},Hu=({user:t,size:e="w-12 h-12",fontSize:r="text-base"})=>{var i;const[n,s]=N.useState(!1);return!(t!=null&&t.profilePictureUrl)||n?a.jsx("div",{className:`${e} rounded-full bg-gray-200 dark:bg-[#282a2c] flex items-center justify-center font-bold text-gray-500 overflow-hidden shrink-0`,children:a.jsx("span",{className:r,children:(i=t==null?void 0:t.firstName)==null?void 0:i[0]})}):a.jsx("div",{className:`${e} rounded-full overflow-hidden bg-gray-200 dark:bg-[#282a2c] shrink-0`,children:a.jsx("img",{src:wo(t.profilePictureUrl),onError:()=>s(!0),className:"w-full h-full object-cover",alt:t.firstName})})},IG=()=>{const{t}=nt(),[e,r]=N.useState([]),[n,s]=N.useState(!0);return N.useEffect(()=>{const i=async()=>{try{const c=(await O.messages.getContacts()).friends||[],d=new Date,u=new Date(d.getTime()-15*60*1e3),h=c.filter(f=>f.lastLogin?new Date(f.lastLogin)>u:!1);r(h)}catch(l){console.error("Failed to load online friends",l)}finally{s(!1)}};i();const o=setInterval(i,6e4);return()=>clearInterval(o)},[]),n?a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] p-6 shadow-sm h-full flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})}):a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 p-6 shadow-sm h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-bold text-lg dark:text-white flex items-center gap-2",children:[a.jsx(vt,{size:20,className:"text-indigo-600"}),t("widgets.online_friends.title")]}),a.jsxs("span",{className:"bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("widgets.online_friends.x_online",{count:e.length})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2 scrollbar-thin",children:e.length===0?a.jsx("div",{className:"text-center text-gray-400 py-8 text-sm italic",children:t("widgets.online_friends.empty")}):e.map(i=>a.jsxs(Nd,{to:`/profile/${i.id}`,className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-[#282a2c] rounded-xl transition-colors group",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Hu,{user:i,size:"w-10 h-10",fontSize:"text-sm"}),a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white dark:border-[#1E1F20] rounded-full"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm truncate",children:i.fullName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:i.role})]}),a.jsx("div",{className:"text-[10px] text-green-600 font-bold opacity-0 group-hover:opacity-100 transition-opacity",children:t("widgets.online_friends.profile")})]},i.id))}),a.jsx("div",{className:"pt-4 mt-auto border-t border-gray-100 dark:border-[#3c4043]",children:a.jsx(Nd,{to:"/profile",className:"text-xs text-indigo-600 hover:underline font-bold block text-center",children:t("widgets.online_friends.view_all")})})]})},gxe=({onManage:t})=>{const{t:e}=nt(),[r,n]=N.useState([]),[s,i]=N.useState(!0),o={CRITICAL:0,HIGH:1,MEDIUM:2,LOW:3};N.useEffect(()=>{const c=async()=>{try{const h=(await O.support.getAllTickets()).filter(f=>f.status!=="RESOLVED").sort((f,g)=>(o[f.severity]??99)-(o[g.severity]??99));n(h)}catch(u){console.error("Kunde inte hmta renden",u)}finally{i(!1)}};c();const d=setInterval(c,3e4);return()=>clearInterval(d)},[]);const l={total:r.length,critical:r.filter(c=>c.severity==="CRITICAL").length,high:r.filter(c=>c.severity==="HIGH").length,medium:r.filter(c=>c.severity==="MEDIUM").length,low:r.filter(c=>c.severity==="LOW").length};return s?a.jsx("div",{className:"bg-card dark:bg-card-dark p-6 rounded-[var(--radius-xl)] border border-card dark:border-card-dark shadow-sm h-full flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm overflow-hidden flex flex-col h-full animate-in slide-in-from-bottom-8",children:[a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-[10px] font-bold uppercase tracking-wider",children:e("widgets.tickets.active")}),a.jsx("p",{className:"text-4xl font-black text-gray-900 dark:text-white mt-1",children:l.total})]}),a.jsx("div",{className:`p-3 rounded-full ${l.critical>0?"bg-red-100 text-red-600 animate-pulse":"bg-indigo-100 text-indigo-600"}`,children:a.jsx(nK,{size:24})})]}),a.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mt-4 pt-4 border-t border-gray-100 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 dark:text-gray-400",title:e("widgets.tickets.critical"),children:[a.jsx(Dr,{size:11,className:"text-red-500"})," ",l.critical," K"]}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 dark:text-gray-400",title:e("widgets.tickets.high"),children:[a.jsx(pi,{size:11,className:"text-orange-500"})," ",l.high," H"]}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 dark:text-gray-400",title:e("widgets.tickets.medium"),children:[a.jsx(Er,{size:11,className:"text-yellow-500"})," ",l.medium," M"]}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 dark:text-gray-400",title:e("widgets.tickets.low"),children:[a.jsx(Tt,{size:11,className:"text-green-500"})," ",l.low," L"]})]})]}),a.jsxs("div",{className:"px-6 pb-6 flex-1 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 pt-2 border-t border-gray-100 dark:border-[#3c4043]",children:[a.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:e("widgets.tickets.open")}),a.jsxs("button",{onClick:t,className:"text-[10px] font-black uppercase text-indigo-600 hover:underline flex items-center gap-1",children:[e("dashboard.manage")," ",a.jsx(Wa,{size:10})]})]}),a.jsx("div",{className:"space-y-3 overflow-y-auto custom-scrollbar flex-1 pr-1",children:r.length>0?r.map(c=>a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-100 dark:border-[#3c4043] hover:border-indigo-200 transition-colors cursor-pointer group",onClick:t,children:[a.jsx("div",{className:`mt-1 w-2 h-2 rounded-full shrink-0 ${c.severity==="CRITICAL"?"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)] animate-pulse":c.severity==="HIGH"?"bg-orange-500":c.severity==="MEDIUM"?"bg-yellow-400":"bg-green-500"}`}),a.jsxs("div",{className:"overflow-hidden flex-1",children:[a.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[a.jsx("p",{className:"text-xs font-bold text-gray-900 dark:text-white truncate",children:c.category}),a.jsxs("span",{className:"text-[8px] font-black text-gray-400 uppercase ml-2 shrink-0",children:["#",c.id]})]}),a.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 line-clamp-1 italic",children:['"',c.message,'"']}),a.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[8px] font-black text-gray-400 uppercase",children:[a.jsx(jr,{size:8})," ",c.userName||c("common.unknown")]}),a.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"}),a.jsx("div",{className:"text-[8px] font-black text-gray-400 uppercase",children:new Date(c.createdAt).toLocaleDateString()})]})]})]},c.id)):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[a.jsx(Tt,{size:32,className:"text-gray-200 mb-2"}),a.jsx("p",{className:"text-xs text-gray-400 italic",children:e("widgets.tickets.empty")})]})})]})]})},mxe=()=>{const[t,e]=N.useState(null),[r,n]=N.useState(!0),[s,i]=N.useState(null);if(N.useEffect(()=>{(async()=>{try{const d=await O.events.getDashboardSummary();e(d)}catch(d){console.error("Failed to fetch calendar summary",d),i(d.message)}finally{n(!1)}})()},[]),r)return a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 h-full flex flex-col items-center justify-center animate-pulse",children:[a.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),a.jsx("div",{className:"h-20 w-full bg-gray-100 dark:bg-gray-900 rounded"})]});if(s)return a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-red-100 dark:border-red-900/30 h-full flex flex-col items-center justify-center text-red-500",children:[a.jsx(Er,{size:24,className:"mb-2"}),a.jsx("p",{className:"text-sm",children:"Kunde inte ladda kalender"})]});const{todayEvents:o,stats:l}=t;return a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(zt,{size:18,className:"text-indigo-600 dark:text-indigo-400"}),"Dagens Schema"]}),a.jsx("span",{className:"text-xs font-medium bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded-full",children:new Date().toLocaleDateString("sv-SE",{weekday:"long",day:"numeric",month:"short"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto min-h-[150px] mb-4 space-y-3 custom-scrollbar",children:o&&o.length>0?o.map(c=>a.jsxs("div",{className:"flex gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-100 dark:border-gray-700 hover:border-indigo-200 transition-colors group",children:[a.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[50px] text-center border-r border-gray-200 dark:border-gray-600 pr-3",children:[a.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:new Date(c.startTime).toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"})}),a.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:new Date(c.endTime).toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:c.title}),c.topic&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate flex items-center gap-1 mt-0.5",children:c.topic})]}),a.jsx("div",{className:`w-1.5 rounded-full ${c.type==="MEETING"?"bg-orange-400":c.type==="LESSON"?"bg-blue-500":c.type==="EXAM"?"bg-red-500":"bg-gray-400"}`})]},c.id)):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 dark:text-gray-500 italic text-sm",children:[a.jsx(Tt,{size:32,className:"mb-2 opacity-20"}),"Inga hndelser idag"]})}),a.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-4 grid grid-cols-3 gap-2",children:[a.jsxs("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-700/30",children:[a.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:l.today}),a.jsx("span",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400 font-medium",children:"Idag"})]}),a.jsxs("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-700/30",children:[a.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:l.week}),a.jsx("span",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400 font-medium",children:"Vecka"})]}),a.jsxs("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-700/30",children:[a.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:l.month}),a.jsx("span",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400 font-medium",children:"Mnad"})]})]})]})},pxe=({onSelect:t,onClose:e})=>{const[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState(""),[c,d]=N.useState(""),[u,h]=N.useState(!0);N.useEffect(()=>{f(),g()},[]);const f=async()=>{try{const p=await O.get("/skolverket/subjects");i(p)}catch(p){console.error("Failed to load subjects",p)}},g=async()=>{h(!0);try{const p=await O.get("/skolverket/courses");n(p)}catch(p){console.error("Failed to load courses",p)}finally{h(!1)}},x=async()=>{if(!o&&!c){g();return}h(!0);try{let p;c?p=await O.get(`/skolverket/courses/subject/${c}`):o&&(p=await O.get(`/skolverket/courses/search?q=${o}`)),n(p)}catch(p){console.error("Search failed",p)}finally{h(!1)}};N.useEffect(()=>{const p=setTimeout(()=>{x()},300);return()=>clearTimeout(p)},[o,c]);const m=p=>{t(p),e()};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Vlj Skolverkskurs"}),a.jsx("button",{onClick:e,children:a.jsx(Je,{className:"text-gray-500",size:20})})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Sk kurskod eller kursnamn...",value:o,onChange:p=>l(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg dark:bg-[#131314] dark:text-white"})]}),a.jsxs("select",{value:c,onChange:p=>d(p.target.value),className:"px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg dark:bg-[#131314] dark:text-white",children:[a.jsx("option",{value:"",children:"Alla mnen"}),s.map(p=>a.jsx("option",{value:p,children:p},p))]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:u?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Laddar kurser..."}):r.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Inga kurser hittades"}):r.map(p=>a.jsx("button",{onClick:()=>m(p),className:"w-full p-4 text-left border border-gray-200 dark:border-[#3c4043] rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:border-indigo-300 dark:hover:border-indigo-700 transition-colors",children:a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-mono text-sm font-bold text-indigo-600 dark:text-indigo-400",children:p.courseCode}),a.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:[p.points,"p"]})]}),a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:p.courseName}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.subject})]})})},p.id))})]})]})})},Ou=["Affrsutveckling och ledarskap","Artificiell intelligens","Barn och fritid","Beteende- och samhllsvetenskap","Butik, administration och personal","Bygg och anlggning","CAD","Data/IT","Ekonomi, administration och frsljning","El och energi","Fotografisk bild","Frberedande och orienterande","Hotell och turism","Hlso- och sjukvrd samt socialt arbete","Inkp och logistik","Journalistik och information","Juridik","Kombinationsutbildning","Komvuxarbete","Lantbruk, djurvrd, trdgrd","Marknadsfring","Matematik och naturvetenskap","Media och kommunikation","Mleri","Samhllsbyggnad och byggteknik","SFI","Sjfart","Sprk","Teknik och tillverkning","Transporttjnster","Vrd och omsorg","vrigt"],DG=[{value:"bg-indigo-600",label:"Indigo"},{value:"bg-blue-600",label:"Blue"},{value:"bg-green-600",label:"Green"},{value:"bg-red-600",label:"Red"},{value:"bg-yellow-500",label:"Yellow"},{value:"bg-purple-600",label:"Purple"},{value:"bg-pink-600",label:"Pink"},{value:"bg-gray-800",label:"Black"}],MG=({isOpen:t,onClose:e,onUserCreated:r})=>{const{t:n}=nt(),[s,i]=N.useState({firstName:"",lastName:"",email:"",username:"",password:"",role:"STUDENT"}),[o,l]=N.useState(!1),[c,d]=N.useState([]),[u,h]=N.useState("");N.useEffect(()=>{t&&O.roles.getAll().then(d).catch(g=>console.error("Failed to fetch roles",g))},[t]);const f=async g=>{g.preventDefault(),l(!0),h("");try{await O.users.register(s),r(),e()}catch{h(n("messages.register_error")||"Kunde inte skapa anvndare. Kontrollera uppgifterna.")}finally{l(!1)}};return t?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:n("admin.register_new_user")}),a.jsx("button",{onClick:e,children:a.jsx(Je,{className:"text-gray-500",size:20})})]}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[u&&a.jsx("div",{className:"p-3 bg-red-100 text-red-700 text-sm rounded-lg",children:u}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:n("admin.firstname"),value:s.firstName,onChange:g=>i({...s,firstName:g.target.value})}),a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:n("admin.lastname"),value:s.lastName,onChange:g=>i({...s,lastName:g.target.value})})]}),a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:n("auth.username"),value:s.username,onChange:g=>i({...s,username:g.target.value})}),a.jsx("input",{required:!0,type:"email",className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:n("admin.email"),value:s.email,onChange:g=>i({...s,email:g.target.value})}),a.jsx("input",{required:!0,type:"password",className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:n("admin.password"),value:s.password,onChange:g=>i({...s,password:g.target.value})}),a.jsx("select",{className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:s.role,onChange:g=>i({...s,role:g.target.value}),children:c&&c.length>0?c.map(g=>a.jsx("option",{value:g.name,children:g.name},g.id)):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"STUDENT",children:n("auth.student")}),a.jsx("option",{value:"TEACHER",children:n("auth.teacher")}),a.jsx("option",{value:"ADMIN",children:n("auth.admin")})]})}),a.jsx("button",{disabled:o,type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg mt-2",children:n(o?"common.loading":"admin.create_account")})]})]})}):null},xxe=({isOpen:t,onClose:e,onUserUpdated:r,userToEdit:n})=>{const{t:s}=nt(),[i,o]=N.useState({firstName:"",lastName:"",email:"",username:"",role:"",storageQuotaGb:1}),[l,c]=N.useState(!1),[d,u]=N.useState([]),[h,f]=N.useState("");N.useEffect(()=>{var x;n&&o({firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",username:n.username||"",role:((x=n.role)==null?void 0:x.name)||n.role||"STUDENT",storageQuotaGb:n.storageQuota?Math.round(n.storageQuota/(1024*1024*1024)*10)/10:1})},[n]),N.useEffect(()=>{t&&O.roles.getAll().then(u).catch(x=>console.error("Failed to fetch roles",x))},[t]);const g=async x=>{x.preventDefault(),c(!0),f("");try{const m={...i,storageQuota:Math.round(parseFloat(i.storageQuotaGb)*1024*1024*1024)};delete m.storageQuotaGb,await O.users.update(n.id,m),r(),e()}catch{f(s("messages.setting_error")||"Kunde inte uppdatera anvndare. Kontrollera uppgifterna.")}finally{c(!1)}};return!t||!n?null:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:s("admin.edit_user")}),a.jsx("button",{onClick:e,children:a.jsx(Je,{className:"text-gray-500",size:20})})]}),a.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[h&&a.jsx("div",{className:"p-3 bg-red-100 text-red-700 text-sm rounded-lg",children:h}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:"Frnamn",value:i.firstName,onChange:x=>o({...i,firstName:x.target.value})}),a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:"Efternamn",value:i.lastName,onChange:x=>o({...i,lastName:x.target.value})})]}),a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:"Anvndarnamn",value:i.username,onChange:x=>o({...i,username:x.target.value})}),a.jsx("input",{required:!0,type:"email",className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:"Email",value:i.email,onChange:x=>o({...i,email:x.target.value})}),a.jsx("select",{className:"w-full p-2 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.role,onChange:x=>o({...i,role:x.target.value}),children:d&&d.length>0?d.map(x=>a.jsx("option",{value:x.name,children:x.name},x.id)):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"STUDENT",children:s("auth.student")}),a.jsx("option",{value:"TEACHER",children:s("auth.teacher")}),a.jsx("option",{value:"ADMIN",children:s("auth.admin")})]})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest pl-1",children:"Lagringsutrymme (GB)"}),a.jsx("input",{type:"number",step:"0.1",className:"w-full p-2.5 rounded-xl border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white outline-none focus:border-indigo-500/50 transition-all font-bold",placeholder:"T.ex 1.0",value:i.storageQuotaGb,onChange:x=>o({...i,storageQuotaGb:x.target.value})})]}),a.jsx("button",{disabled:l,type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg mt-2",children:s(l?"common.loading":"dashboard.active")})]})]})})},bxe=({isOpen:t,onClose:e,onCourseCreated:r,teachers:n})=>{const{t:s}=nt(),[i,o]=N.useState({name:"",courseCode:"",description:"",category:"vrigt",tags:"",teacherId:"",startDate:"",endDate:"",color:"bg-indigo-600",maxStudents:30,isOpen:!0}),[l,c]=N.useState(!1),[d,u]=N.useState(!1),[h,f]=N.useState(!1),[g,x]=N.useState(null),m=async b=>{b.preventDefault(),c(!0);try{const v=i.teacherId?Number(i.teacherId):null;await O.courses.create({...i,maxStudents:parseInt(i.maxStudents),skolverketCourseId:g==null?void 0:g.id,teacherId:v},v),r(),e(),x(null),u(!1)}catch{alert(s("course.error_occurred")||"Kunde inte skapa kursen.")}finally{c(!1)}},p=b=>{x(b),o({...i,name:b.courseName,courseCode:b.courseCode,category:b.subject,description:b.description||i.description})};return t?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:s("admin.create_course")}),a.jsx("button",{onClick:e,children:a.jsx(Je,{className:"text-gray-500",size:20})})]}),a.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-100 dark:border-[#3c4043]",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ppen fr studenter"}),a.jsx("button",{type:"button",onClick:()=>o({...i,isOpen:!i.isOpen}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${i.isOpen?"bg-indigo-600":"bg-gray-200 dark:bg-gray-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i.isOpen?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg",children:[a.jsx("input",{type:"checkbox",id:"useSkolverket",checked:d,onChange:b=>{u(b.target.checked),b.target.checked||x(null)},className:"w-4 h-4"}),a.jsx("label",{htmlFor:"useSkolverket",className:"text-sm font-medium text-indigo-900 dark:text-indigo-100",children:s("admin.base_on_skolverket")})]}),d&&a.jsx("div",{children:g?a.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-mono text-sm font-bold text-green-700 dark:text-green-400",children:g.courseCode}),a.jsx("h4",{className:"font-bold text-green-900 dark:text-green-100 mt-1",children:g.courseName}),a.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[g.subject,"  ",g.points,"p"]})]}),a.jsx("button",{type:"button",onClick:()=>x(null),className:"text-green-600",children:a.jsx(Je,{size:20})})]})}):a.jsx("button",{type:"button",onClick:()=>f(!0),className:"w-full p-3 border-2 border-dashed border-indigo-300 dark:border-indigo-700 rounded-lg text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 font-medium",children:s("admin.choose_skolverket_course")})}),a.jsx("input",{required:!0,className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:s("admin.course_name"),value:i.name,onChange:b=>o({...i,name:b.target.value})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{required:!0,className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:s("admin.course_code"),value:i.courseCode,onChange:b=>o({...i,courseCode:b.target.value})}),a.jsxs("select",{className:"w-full p2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.category,onChange:b=>o({...i,category:b.target.value}),children:[a.jsxs("option",{value:"",children:[s("course_modal.category"),"..."]}),Ou.map(b=>a.jsx("option",{value:b,children:b},b))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500",children:s("admin.start_date")||"Startdatum"}),a.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.startDate,onChange:b=>o({...i,startDate:b.target.value})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500",children:s("admin.end_date")||"Slutdatum"}),a.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.endDate,onChange:b=>o({...i,endDate:b.target.value})})]})]}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:s("admin.max_seats"),value:i.maxStudents,onChange:b=>o({...i,maxStudents:b.target.value})}),a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.tags,onChange:b=>o({...i,tags:b.target.value}),placeholder:s("admin.tags")}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#131314] border border-gray-100 dark:border-[#3c4043] rounded-lg space-y-3",children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:s("admin.digital_classroom")}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("select",{className:"w-full p-2 text-sm border rounded dark:bg-[#1E1F20] dark:border-[#3c4043] dark:text-white",value:i.classroomType||"",onChange:b=>o({...i,classroomType:b.target.value}),children:[a.jsx("option",{value:"",children:s("admin.choose_platform")}),a.jsx("option",{value:"ZOOM",children:"Zoom"}),a.jsx("option",{value:"TEAMS",children:"Microsoft Teams"}),a.jsx("option",{value:"MEET",children:"Google Meet"}),a.jsx("option",{value:"DISCORD",children:"Discord"})]}),a.jsx("input",{className:"w-full p-2 text-sm border rounded dark:bg-[#1E1F20] dark:border-[#3c4043] dark:text-white",placeholder:s("admin.paste_link"),value:i.classroomLink||"",onChange:b=>o({...i,classroomLink:b.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 mb-2 block",children:s("admin.color_theme")}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:DG.map(b=>a.jsx("button",{type:"button",onClick:()=>o({...i,color:b.value}),className:`w-8 h-8 rounded-full ${b.value} ${i.color===b.value?"ring-2 ring-offset-2 ring-gray-400":"opacity-70 hover:opacity-100"}`,title:b.label},b.value))})]}),a.jsxs("select",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.teacherId,onChange:b=>o({...i,teacherId:b.target.value}),children:[a.jsx("option",{value:"",children:s("admin.choose_teacher")}),n.map(b=>a.jsxs("option",{value:b.id,children:[b.fullName," (",b.email,")"]},b.id))]}),a.jsx("textarea",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white h-20 resize-none",placeholder:s("admin.content"),value:i.description,onChange:b=>o({...i,description:b.target.value})}),a.jsx("button",{disabled:l,type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg mt-2",children:s(l?"common.loading":"admin.create_course")})]})]})}),h&&a.jsx(pxe,{onSelect:p,onClose:()=>f(!1)})]}):null},yxe=({isOpen:t,onClose:e,onCourseUpdated:r,teachers:n,courseToEdit:s})=>{const{t:i}=nt(),[o,l]=N.useState({name:"",courseCode:"",category:"",description:"",tags:"",teacherId:"",startDate:"",endDate:"",color:"",maxStudents:30,isOpen:!0}),[c,d]=N.useState(!1);N.useEffect(()=>{var h;s&&l({name:s.name||"",courseCode:s.courseCode||"",category:s.category||"vrigt",description:s.description||"",tags:s.tags||"",teacherId:((h=s.teacher)==null?void 0:h.id)||"",startDate:s.startDate||"",endDate:s.endDate||"",color:s.color||"bg-indigo-600",maxStudents:s.maxStudents||30,classroomType:s.classroomType||"",classroomLink:s.classroomLink||"",isOpen:s.isOpen!==void 0?s.isOpen:!0})},[s]);const u=async h=>{h.preventDefault(),d(!0);try{const f={...o,maxStudents:parseInt(o.maxStudents),teacherId:o.teacherId?Number(o.teacherId):null};await O.courses.update(s.id,f),r(),e()}catch{alert(i("course.error_occurred")||"Kunde inte uppdatera kursen.")}finally{d(!1)}};return!t||!s?null:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:i("admin.edit_course")}),a.jsx("button",{onClick:e,children:a.jsx(Je,{className:"text-gray-500",size:20})})]}),a.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-100 dark:border-[#3c4043]",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ppen fr studenter"}),a.jsx("button",{type:"button",onClick:()=>l({...o,isOpen:!o.isOpen}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${o.isOpen?"bg-indigo-600":"bg-gray-200 dark:bg-gray-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.isOpen?"translate-x-6":"translate-x-1"}`})})]}),a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:o.name,onChange:h=>l({...o,name:h.target.value})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:o.courseCode,onChange:h=>l({...o,courseCode:h.target.value})}),a.jsxs("select",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:o.category,onChange:h=>l({...o,category:h.target.value}),children:[a.jsxs("option",{value:"",children:[i("course_modal.category"),"..."]}),Ou.map(h=>a.jsx("option",{value:h,children:h},h))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500",children:i("admin.start_date")}),a.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:o.startDate,onChange:h=>l({...o,startDate:h.target.value})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500",children:i("admin.end_date")}),a.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:o.endDate,onChange:h=>l({...o,endDate:h.target.value})})]})]}),a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",type:"number",value:o.maxStudents,onChange:h=>l({...o,maxStudents:h.target.value})}),a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:o.tags,onChange:h=>l({...o,tags:h.target.value}),placeholder:i("admin.tags")}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#131314] border border-gray-100 dark:border-[#3c4043] rounded-lg space-y-3",children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:i("admin.digital_classroom")}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("select",{className:"w-full p-2 text-sm border rounded dark:bg-[#1E1F20] dark:border-[#3c4043] dark:text-white",value:o.classroomType||"",onChange:h=>l({...o,classroomType:h.target.value}),children:[a.jsx("option",{value:"",children:i("admin.choose_platform")}),a.jsx("option",{value:"ZOOM",children:"Zoom"}),a.jsx("option",{value:"TEAMS",children:"Microsoft Teams"}),a.jsx("option",{value:"MEET",children:"Google Meet"}),a.jsx("option",{value:"DISCORD",children:"Discord"})]}),a.jsx("input",{className:"w-full p-2 text-sm border rounded dark:bg-[#1E1F20] dark:border-[#3c4043] dark:text-white",placeholder:i("admin.paste_link"),value:o.classroomLink||"",onChange:h=>l({...o,classroomLink:h.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 mb-2 block",children:i("admin.color_theme")}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:DG.map(h=>a.jsx("button",{type:"button",onClick:()=>l({...o,color:h.value}),className:`w-8 h-8 rounded-full ${h.value} ${o.color===h.value?"ring-2 ring-offset-2 ring-gray-400":"opacity-70 hover:opacity-100"}`,title:h.label},h.value))})]}),a.jsxs("select",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:o.teacherId,onChange:h=>l({...o,teacherId:h.target.value}),children:[a.jsx("option",{value:"",children:i("admin.choose_teacher")}),n==null?void 0:n.map(h=>a.jsxs("option",{value:h.id,children:[h.fullName," (",h.email,")"]},h.id))]}),a.jsx("button",{disabled:c,type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg mt-2",children:i("common.save")})]})]})})},vxe=({users:t,courses:e,documents:r,fetchStats:n,setActiveTab:s,widgets:i,unreadCount:o})=>{const{currentUser:l}=At(),[c,d]=ae.useState(!1),u=(t==null?void 0:t.length)>0?[...t].reverse().slice(0,5):[],h=(r==null?void 0:r.length)>0?[...r].reverse().slice(0,5):[],f=[i.calendar,i.recentUsers,i.recentDocs,i.onlineFriends,i.tickets].filter(Boolean).length,g=f===1?"grid-cols-1":f===2?"grid-cols-1 lg:grid-cols-2":"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3";return a.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[i.stats&&a.jsx(cxe,{users:t,courses:e,documents:r,unreadCount:o,onViewMessages:()=>s("communication")}),a.jsxs("div",{className:`grid ${g} gap-8`,children:[i.calendar&&a.jsx(mxe,{}),i.recentUsers&&a.jsx(uxe,{latestUsers:u,onNewUserClick:()=>d(!0)}),i.recentDocs&&a.jsx(hxe,{latestDocs:h}),i.tickets&&a.jsx(gxe,{onManage:()=>window.location.href="/admin?tab=tickets"}),i.onlineFriends&&a.jsx(IG,{}),i.messages&&a.jsx(TG,{onViewAll:()=>s("communication")})]}),a.jsx(MG,{isOpen:c,onClose:()=>d(!1),onUserCreated:n})]})};var LG=typeof global=="object"&&global&&global.Object===Object&&global,kxe=typeof self=="object"&&self&&self.Object===Object&&self,ll=LG||kxe||Function("return this")(),Ad=ll.Symbol,RG=Object.prototype,wxe=RG.hasOwnProperty,jxe=RG.toString,np=Ad?Ad.toStringTag:void 0;function Nxe(t){var e=wxe.call(t,np),r=t[np];try{t[np]=void 0;var n=!0}catch{}var s=jxe.call(t);return n&&(e?t[np]=r:delete t[np]),s}var _xe=Object.prototype,Sxe=_xe.toString;function Axe(t){return Sxe.call(t)}var Exe="[object Null]",Cxe="[object Undefined]",vM=Ad?Ad.toStringTag:void 0;function mm(t){return t==null?t===void 0?Cxe:Exe:vM&&vM in Object(t)?Nxe(t):Axe(t)}function Jl(t){return t!=null&&typeof t=="object"}var Wu=Array.isArray;function Rd(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function PG(t){return t}var Txe="[object AsyncFunction]",Oxe="[object Function]",Ixe="[object GeneratorFunction]",Dxe="[object Proxy]";function D5(t){if(!Rd(t))return!1;var e=mm(t);return e==Oxe||e==Ixe||e==Txe||e==Dxe}var HN=ll["__core-js_shared__"],kM=function(){var t=/[^.]+$/.exec(HN&&HN.keys&&HN.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Mxe(t){return!!kM&&kM in t}var Lxe=Function.prototype,Rxe=Lxe.toString;function yh(t){if(t!=null){try{return Rxe.call(t)}catch{}try{return t+""}catch{}}return""}var Pxe=/[\\^$.*+?()[\]{}|]/g,zxe=/^\[object .+?Constructor\]$/,$xe=Function.prototype,Fxe=Object.prototype,Bxe=$xe.toString,Uxe=Fxe.hasOwnProperty,Kxe=RegExp("^"+Bxe.call(Uxe).replace(Pxe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gxe(t){if(!Rd(t)||Mxe(t))return!1;var e=D5(t)?Kxe:zxe;return e.test(yh(t))}function qxe(t,e){return t==null?void 0:t[e]}function vh(t,e){var r=qxe(t,e);return Gxe(r)?r:void 0}var tA=vh(ll,"WeakMap"),wM=Object.create,Vxe=function(){function t(){}return function(e){if(!Rd(e))return{};if(wM)return wM(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Hxe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Wxe(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Xxe=800,Yxe=16,Zxe=Date.now;function Qxe(t){var e=0,r=0;return function(){var n=Zxe(),s=Yxe-(n-r);if(r=n,s>0){if(++e>=Xxe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Jxe(t){return function(){return t}}var F1=function(){try{var t=vh(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ebe=F1?function(t,e){return F1(t,"toString",{configurable:!0,enumerable:!1,value:Jxe(e),writable:!0})}:PG,tbe=Qxe(ebe);function rbe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var nbe=9007199254740991,abe=/^(?:0|[1-9]\d*)$/;function zG(t,e){var r=typeof t;return e=e??nbe,!!e&&(r=="number"||r!="symbol"&&abe.test(t))&&t>-1&&t%1==0&&t<e}function M5(t,e,r){e=="__proto__"&&F1?F1(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function wb(t,e){return t===e||t!==t&&e!==e}var sbe=Object.prototype,ibe=sbe.hasOwnProperty;function $G(t,e,r){var n=t[e];(!(ibe.call(t,e)&&wb(n,r))||r===void 0&&!(e in t))&&M5(t,e,r)}function obe(t,e,r,n){var s=!r;r||(r={});for(var i=-1,o=e.length;++i<o;){var l=e[i],c=void 0;c===void 0&&(c=t[l]),s?M5(r,l,c):$G(r,l,c)}return r}var jM=Math.max;function lbe(t,e,r){return e=jM(e===void 0?t.length-1:e,0),function(){for(var n=arguments,s=-1,i=jM(n.length-e,0),o=Array(i);++s<i;)o[s]=n[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=n[s];return l[e]=r(o),Hxe(t,this,l)}}function cbe(t,e){return tbe(lbe(t,e,PG),t+"")}var dbe=9007199254740991;function FG(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=dbe}function yw(t){return t!=null&&FG(t.length)&&!D5(t)}function ube(t,e,r){if(!Rd(r))return!1;var n=typeof e;return(n=="number"?yw(r)&&zG(e,r.length):n=="string"&&e in r)?wb(r[e],t):!1}function hbe(t){return cbe(function(e,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,o&&ube(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++n<s;){var l=r[n];l&&t(e,l,n,i)}return e})}var fbe=Object.prototype;function L5(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||fbe;return t===r}function gbe(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var mbe="[object Arguments]";function NM(t){return Jl(t)&&mm(t)==mbe}var BG=Object.prototype,pbe=BG.hasOwnProperty,xbe=BG.propertyIsEnumerable,rA=NM(function(){return arguments}())?NM:function(t){return Jl(t)&&pbe.call(t,"callee")&&!xbe.call(t,"callee")};function bbe(){return!1}var UG=typeof Is=="object"&&Is&&!Is.nodeType&&Is,_M=UG&&typeof Ds=="object"&&Ds&&!Ds.nodeType&&Ds,ybe=_M&&_M.exports===UG,SM=ybe?ll.Buffer:void 0,vbe=SM?SM.isBuffer:void 0,Y0=vbe||bbe,kbe="[object Arguments]",wbe="[object Array]",jbe="[object Boolean]",Nbe="[object Date]",_be="[object Error]",Sbe="[object Function]",Abe="[object Map]",Ebe="[object Number]",Cbe="[object Object]",Tbe="[object RegExp]",Obe="[object Set]",Ibe="[object String]",Dbe="[object WeakMap]",Mbe="[object ArrayBuffer]",Lbe="[object DataView]",Rbe="[object Float32Array]",Pbe="[object Float64Array]",zbe="[object Int8Array]",$be="[object Int16Array]",Fbe="[object Int32Array]",Bbe="[object Uint8Array]",Ube="[object Uint8ClampedArray]",Kbe="[object Uint16Array]",Gbe="[object Uint32Array]",Zr={};Zr[Rbe]=Zr[Pbe]=Zr[zbe]=Zr[$be]=Zr[Fbe]=Zr[Bbe]=Zr[Ube]=Zr[Kbe]=Zr[Gbe]=!0;Zr[kbe]=Zr[wbe]=Zr[Mbe]=Zr[jbe]=Zr[Lbe]=Zr[Nbe]=Zr[_be]=Zr[Sbe]=Zr[Abe]=Zr[Ebe]=Zr[Cbe]=Zr[Tbe]=Zr[Obe]=Zr[Ibe]=Zr[Dbe]=!1;function qbe(t){return Jl(t)&&FG(t.length)&&!!Zr[mm(t)]}function R5(t){return function(e){return t(e)}}var KG=typeof Is=="object"&&Is&&!Is.nodeType&&Is,t0=KG&&typeof Ds=="object"&&Ds&&!Ds.nodeType&&Ds,Vbe=t0&&t0.exports===KG,WN=Vbe&&LG.process,pg=function(){try{var t=t0&&t0.require&&t0.require("util").types;return t||WN&&WN.binding&&WN.binding("util")}catch{}}(),AM=pg&&pg.isTypedArray,P5=AM?R5(AM):qbe,Hbe=Object.prototype,Wbe=Hbe.hasOwnProperty;function GG(t,e){var r=Wu(t),n=!r&&rA(t),s=!r&&!n&&Y0(t),i=!r&&!n&&!s&&P5(t),o=r||n||s||i,l=o?gbe(t.length,String):[],c=l.length;for(var d in t)(e||Wbe.call(t,d))&&!(o&&(d=="length"||s&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||zG(d,c)))&&l.push(d);return l}function qG(t,e){return function(r){return t(e(r))}}var Xbe=qG(Object.keys,Object),Ybe=Object.prototype,Zbe=Ybe.hasOwnProperty;function Qbe(t){if(!L5(t))return Xbe(t);var e=[];for(var r in Object(t))Zbe.call(t,r)&&r!="constructor"&&e.push(r);return e}function Jbe(t){return yw(t)?GG(t):Qbe(t)}function eye(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var tye=Object.prototype,rye=tye.hasOwnProperty;function nye(t){if(!Rd(t))return eye(t);var e=L5(t),r=[];for(var n in t)n=="constructor"&&(e||!rye.call(t,n))||r.push(n);return r}function VG(t){return yw(t)?GG(t,!0):nye(t)}var Z0=vh(Object,"create");function aye(){this.__data__=Z0?Z0(null):{},this.size=0}function sye(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var iye="__lodash_hash_undefined__",oye=Object.prototype,lye=oye.hasOwnProperty;function cye(t){var e=this.__data__;if(Z0){var r=e[t];return r===iye?void 0:r}return lye.call(e,t)?e[t]:void 0}var dye=Object.prototype,uye=dye.hasOwnProperty;function hye(t){var e=this.__data__;return Z0?e[t]!==void 0:uye.call(e,t)}var fye="__lodash_hash_undefined__";function gye(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Z0&&e===void 0?fye:e,this}function Xu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Xu.prototype.clear=aye;Xu.prototype.delete=sye;Xu.prototype.get=cye;Xu.prototype.has=hye;Xu.prototype.set=gye;function mye(){this.__data__=[],this.size=0}function vw(t,e){for(var r=t.length;r--;)if(wb(t[r][0],e))return r;return-1}var pye=Array.prototype,xye=pye.splice;function bye(t){var e=this.__data__,r=vw(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():xye.call(e,r,1),--this.size,!0}function yye(t){var e=this.__data__,r=vw(e,t);return r<0?void 0:e[r][1]}function vye(t){return vw(this.__data__,t)>-1}function kye(t,e){var r=this.__data__,n=vw(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function mc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}mc.prototype.clear=mye;mc.prototype.delete=bye;mc.prototype.get=yye;mc.prototype.has=vye;mc.prototype.set=kye;var Q0=vh(ll,"Map");function wye(){this.size=0,this.__data__={hash:new Xu,map:new(Q0||mc),string:new Xu}}function jye(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function kw(t,e){var r=t.__data__;return jye(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Nye(t){var e=kw(this,t).delete(t);return this.size-=e?1:0,e}function _ye(t){return kw(this,t).get(t)}function Sye(t){return kw(this,t).has(t)}function Aye(t,e){var r=kw(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function kh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}kh.prototype.clear=wye;kh.prototype.delete=Nye;kh.prototype.get=_ye;kh.prototype.has=Sye;kh.prototype.set=Aye;function Eye(t,e){for(var r=-1,n=e.length,s=t.length;++r<n;)t[s+r]=e[r];return t}var HG=qG(Object.getPrototypeOf,Object),Cye="[object Object]",Tye=Function.prototype,Oye=Object.prototype,WG=Tye.toString,Iye=Oye.hasOwnProperty,Dye=WG.call(Object);function Mye(t){if(!Jl(t)||mm(t)!=Cye)return!1;var e=HG(t);if(e===null)return!0;var r=Iye.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&WG.call(r)==Dye}function Lye(){this.__data__=new mc,this.size=0}function Rye(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Pye(t){return this.__data__.get(t)}function zye(t){return this.__data__.has(t)}var $ye=200;function Fye(t,e){var r=this.__data__;if(r instanceof mc){var n=r.__data__;if(!Q0||n.length<$ye-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new kh(n)}return r.set(t,e),this.size=r.size,this}function Po(t){var e=this.__data__=new mc(t);this.size=e.size}Po.prototype.clear=Lye;Po.prototype.delete=Rye;Po.prototype.get=Pye;Po.prototype.has=zye;Po.prototype.set=Fye;var XG=typeof Is=="object"&&Is&&!Is.nodeType&&Is,EM=XG&&typeof Ds=="object"&&Ds&&!Ds.nodeType&&Ds,Bye=EM&&EM.exports===XG,CM=Bye?ll.Buffer:void 0,TM=CM?CM.allocUnsafe:void 0;function YG(t,e){if(e)return t.slice();var r=t.length,n=TM?TM(r):new t.constructor(r);return t.copy(n),n}function Uye(t,e){for(var r=-1,n=t==null?0:t.length,s=0,i=[];++r<n;){var o=t[r];e(o,r,t)&&(i[s++]=o)}return i}function Kye(){return[]}var Gye=Object.prototype,qye=Gye.propertyIsEnumerable,OM=Object.getOwnPropertySymbols,Vye=OM?function(t){return t==null?[]:(t=Object(t),Uye(OM(t),function(e){return qye.call(t,e)}))}:Kye;function Hye(t,e,r){var n=e(t);return Wu(t)?n:Eye(n,r(t))}function nA(t){return Hye(t,Jbe,Vye)}var aA=vh(ll,"DataView"),sA=vh(ll,"Promise"),iA=vh(ll,"Set"),IM="[object Map]",Wye="[object Object]",DM="[object Promise]",MM="[object Set]",LM="[object WeakMap]",RM="[object DataView]",Xye=yh(aA),Yye=yh(Q0),Zye=yh(sA),Qye=yh(iA),Jye=yh(tA),Fi=mm;(aA&&Fi(new aA(new ArrayBuffer(1)))!=RM||Q0&&Fi(new Q0)!=IM||sA&&Fi(sA.resolve())!=DM||iA&&Fi(new iA)!=MM||tA&&Fi(new tA)!=LM)&&(Fi=function(t){var e=mm(t),r=e==Wye?t.constructor:void 0,n=r?yh(r):"";if(n)switch(n){case Xye:return RM;case Yye:return IM;case Zye:return DM;case Qye:return MM;case Jye:return LM}return e});var eve=Object.prototype,tve=eve.hasOwnProperty;function rve(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&tve.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var B1=ll.Uint8Array;function z5(t){var e=new t.constructor(t.byteLength);return new B1(e).set(new B1(t)),e}function nve(t,e){var r=z5(t.buffer);return new t.constructor(r,t.byteOffset,t.byteLength)}var ave=/\w*$/;function sve(t){var e=new t.constructor(t.source,ave.exec(t));return e.lastIndex=t.lastIndex,e}var PM=Ad?Ad.prototype:void 0,zM=PM?PM.valueOf:void 0;function ive(t){return zM?Object(zM.call(t)):{}}function ZG(t,e){var r=e?z5(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var ove="[object Boolean]",lve="[object Date]",cve="[object Map]",dve="[object Number]",uve="[object RegExp]",hve="[object Set]",fve="[object String]",gve="[object Symbol]",mve="[object ArrayBuffer]",pve="[object DataView]",xve="[object Float32Array]",bve="[object Float64Array]",yve="[object Int8Array]",vve="[object Int16Array]",kve="[object Int32Array]",wve="[object Uint8Array]",jve="[object Uint8ClampedArray]",Nve="[object Uint16Array]",_ve="[object Uint32Array]";function Sve(t,e,r){var n=t.constructor;switch(e){case mve:return z5(t);case ove:case lve:return new n(+t);case pve:return nve(t);case xve:case bve:case yve:case vve:case kve:case wve:case jve:case Nve:case _ve:return ZG(t,r);case cve:return new n;case dve:case fve:return new n(t);case uve:return sve(t);case hve:return new n;case gve:return ive(t)}}function QG(t){return typeof t.constructor=="function"&&!L5(t)?Vxe(HG(t)):{}}var Ave="[object Map]";function Eve(t){return Jl(t)&&Fi(t)==Ave}var $M=pg&&pg.isMap,Cve=$M?R5($M):Eve,Tve="[object Set]";function Ove(t){return Jl(t)&&Fi(t)==Tve}var FM=pg&&pg.isSet,Ive=FM?R5(FM):Ove,Dve=1,JG="[object Arguments]",Mve="[object Array]",Lve="[object Boolean]",Rve="[object Date]",Pve="[object Error]",eq="[object Function]",zve="[object GeneratorFunction]",$ve="[object Map]",Fve="[object Number]",tq="[object Object]",Bve="[object RegExp]",Uve="[object Set]",Kve="[object String]",Gve="[object Symbol]",qve="[object WeakMap]",Vve="[object ArrayBuffer]",Hve="[object DataView]",Wve="[object Float32Array]",Xve="[object Float64Array]",Yve="[object Int8Array]",Zve="[object Int16Array]",Qve="[object Int32Array]",Jve="[object Uint8Array]",e1e="[object Uint8ClampedArray]",t1e="[object Uint16Array]",r1e="[object Uint32Array]",Fr={};Fr[JG]=Fr[Mve]=Fr[Vve]=Fr[Hve]=Fr[Lve]=Fr[Rve]=Fr[Wve]=Fr[Xve]=Fr[Yve]=Fr[Zve]=Fr[Qve]=Fr[$ve]=Fr[Fve]=Fr[tq]=Fr[Bve]=Fr[Uve]=Fr[Kve]=Fr[Gve]=Fr[Jve]=Fr[e1e]=Fr[t1e]=Fr[r1e]=!0;Fr[Pve]=Fr[eq]=Fr[qve]=!1;function Iv(t,e,r,n,s,i){var o,l=e&Dve;if(o!==void 0)return o;if(!Rd(t))return t;var c=Wu(t);if(c)o=rve(t);else{var d=Fi(t),u=d==eq||d==zve;if(Y0(t))return YG(t,l);if(d==tq||d==JG||u&&!s)o=u?{}:QG(t);else{if(!Fr[d])return s?t:{};o=Sve(t,d,l)}}i||(i=new Po);var h=i.get(t);if(h)return h;i.set(t,o),Ive(t)?t.forEach(function(x){o.add(Iv(x,e,r,x,t,i))}):Cve(t)&&t.forEach(function(x,m){o.set(m,Iv(x,e,r,m,t,i))});var f=nA,g=c?void 0:f(t);return rbe(g||t,function(x,m){g&&(m=x,x=t[m]),$G(o,m,Iv(x,e,r,m,t,i))}),o}var n1e=1,a1e=4;function Kf(t){return Iv(t,n1e|a1e)}var s1e="__lodash_hash_undefined__";function i1e(t){return this.__data__.set(t,s1e),this}function o1e(t){return this.__data__.has(t)}function U1(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new kh;++e<r;)this.add(t[e])}U1.prototype.add=U1.prototype.push=i1e;U1.prototype.has=o1e;function l1e(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function c1e(t,e){return t.has(e)}var d1e=1,u1e=2;function rq(t,e,r,n,s,i){var o=r&d1e,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(t),u=i.get(e);if(d&&u)return d==e&&u==t;var h=-1,f=!0,g=r&u1e?new U1:void 0;for(i.set(t,e),i.set(e,t);++h<l;){var x=t[h],m=e[h];if(n)var p=o?n(m,x,h,e,t,i):n(x,m,h,t,e,i);if(p!==void 0){if(p)continue;f=!1;break}if(g){if(!l1e(e,function(b,v){if(!c1e(g,v)&&(x===b||s(x,b,r,n,i)))return g.push(v)})){f=!1;break}}else if(!(x===m||s(x,m,r,n,i))){f=!1;break}}return i.delete(t),i.delete(e),f}function h1e(t){var e=-1,r=Array(t.size);return t.forEach(function(n,s){r[++e]=[s,n]}),r}function f1e(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var g1e=1,m1e=2,p1e="[object Boolean]",x1e="[object Date]",b1e="[object Error]",y1e="[object Map]",v1e="[object Number]",k1e="[object RegExp]",w1e="[object Set]",j1e="[object String]",N1e="[object Symbol]",_1e="[object ArrayBuffer]",S1e="[object DataView]",BM=Ad?Ad.prototype:void 0,XN=BM?BM.valueOf:void 0;function A1e(t,e,r,n,s,i,o){switch(r){case S1e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _1e:return!(t.byteLength!=e.byteLength||!i(new B1(t),new B1(e)));case p1e:case x1e:case v1e:return wb(+t,+e);case b1e:return t.name==e.name&&t.message==e.message;case k1e:case j1e:return t==e+"";case y1e:var l=h1e;case w1e:var c=n&g1e;if(l||(l=f1e),t.size!=e.size&&!c)return!1;var d=o.get(t);if(d)return d==e;n|=m1e,o.set(t,e);var u=rq(l(t),l(e),n,s,i,o);return o.delete(t),u;case N1e:if(XN)return XN.call(t)==XN.call(e)}return!1}var E1e=1,C1e=Object.prototype,T1e=C1e.hasOwnProperty;function O1e(t,e,r,n,s,i){var o=r&E1e,l=nA(t),c=l.length,d=nA(e),u=d.length;if(c!=u&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:T1e.call(e,f)))return!1}var g=i.get(t),x=i.get(e);if(g&&x)return g==e&&x==t;var m=!0;i.set(t,e),i.set(e,t);for(var p=o;++h<c;){f=l[h];var b=t[f],v=e[f];if(n)var y=o?n(v,b,f,e,t,i):n(b,v,f,t,e,i);if(!(y===void 0?b===v||s(b,v,r,n,i):y)){m=!1;break}p||(p=f=="constructor")}if(m&&!p){var w=t.constructor,k=e.constructor;w!=k&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(t),i.delete(e),m}var I1e=1,UM="[object Arguments]",KM="[object Array]",Sy="[object Object]",D1e=Object.prototype,GM=D1e.hasOwnProperty;function M1e(t,e,r,n,s,i){var o=Wu(t),l=Wu(e),c=o?KM:Fi(t),d=l?KM:Fi(e);c=c==UM?Sy:c,d=d==UM?Sy:d;var u=c==Sy,h=d==Sy,f=c==d;if(f&&Y0(t)){if(!Y0(e))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new Po),o||P5(t)?rq(t,e,r,n,s,i):A1e(t,e,c,r,n,s,i);if(!(r&I1e)){var g=u&&GM.call(t,"__wrapped__"),x=h&&GM.call(e,"__wrapped__");if(g||x){var m=g?t.value():t,p=x?e.value():e;return i||(i=new Po),s(m,p,r,n,i)}}return f?(i||(i=new Po),O1e(t,e,r,n,s,i)):!1}function nq(t,e,r,n,s){return t===e?!0:t==null||e==null||!Jl(t)&&!Jl(e)?t!==t&&e!==e:M1e(t,e,r,n,nq,s)}function L1e(t){return function(e,r,n){for(var s=-1,i=Object(e),o=n(e),l=o.length;l--;){var c=o[++s];if(r(i[c],c,i)===!1)break}return e}}var R1e=L1e();function oA(t,e,r){(r!==void 0&&!wb(t[e],r)||r===void 0&&!(e in t))&&M5(t,e,r)}function P1e(t){return Jl(t)&&yw(t)}function lA(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function z1e(t){return obe(t,VG(t))}function $1e(t,e,r,n,s,i,o){var l=lA(t,r),c=lA(e,r),d=o.get(c);if(d){oA(t,r,d);return}var u=i?i(l,c,r+"",t,e,o):void 0,h=u===void 0;if(h){var f=Wu(c),g=!f&&Y0(c),x=!f&&!g&&P5(c);u=c,f||g||x?Wu(l)?u=l:P1e(l)?u=Wxe(l):g?(h=!1,u=YG(c,!0)):x?(h=!1,u=ZG(c,!0)):u=[]:Mye(c)||rA(c)?(u=l,rA(l)?u=z1e(l):(!Rd(l)||D5(l))&&(u=QG(c))):h=!1}h&&(o.set(c,u),s(u,c,n,i,o),o.delete(c)),oA(t,r,u)}function aq(t,e,r,n,s){t!==e&&R1e(e,function(i,o){if(s||(s=new Po),Rd(i))$1e(t,e,o,r,aq,n,s);else{var l=n?n(lA(t,o),i,o+"",t,e,s):void 0;l===void 0&&(l=i),oA(t,o,l)}},VG)}function $c(t,e){return nq(t,e)}var pd=hbe(function(t,e,r){aq(t,e,r)}),pt=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(pt||{});class Jo{constructor(e,r,n={}){this.attrName=e,this.keyName=r;const s=pt.TYPE&pt.ATTRIBUTE;this.scope=n.scope!=null?n.scope&pt.LEVEL|s:pt.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(e){return Array.from(e.attributes).map(r=>r.name)}add(e,r){return this.canAdd(e,r)?(e.setAttribute(this.keyName,r),!0):!1}canAdd(e,r){return this.whitelist==null?!0:typeof r=="string"?this.whitelist.indexOf(r.replace(/["']/g,""))>-1:this.whitelist.indexOf(r)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const r=e.getAttribute(this.keyName);return this.canAdd(e,r)&&r?r:""}}class Gf extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const sq=class cA{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,r=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(r){let n=null;try{n=e.parentNode}catch{return null}return this.find(n,r)}return null}create(e,r,n){const s=this.query(r);if(s==null)throw new Gf(`Unable to create ${r} blot`);const i=s,o=r instanceof Node||r.nodeType===Node.TEXT_NODE?r:i.create(n),l=new i(e,o,n);return cA.blots.set(l.domNode,l),l}find(e,r=!1){return cA.find(e,r)}query(e,r=pt.ANY){let n;return typeof e=="string"?n=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?n=this.types.text:typeof e=="number"?e&pt.LEVEL&pt.BLOCK?n=this.types.block:e&pt.LEVEL&pt.INLINE&&(n=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(s=>(n=this.classes[s],!!n)),n=n||this.tags[e.tagName]),n==null?null:"scope"in n&&r&pt.LEVEL&n.scope&&r&pt.TYPE&n.scope?n:null}register(...e){return e.map(r=>{const n="blotName"in r,s="attrName"in r;if(!n&&!s)throw new Gf("Invalid definition");if(n&&r.blotName==="abstract")throw new Gf("Cannot register abstract class");const i=n?r.blotName:s?r.attrName:void 0;return this.types[i]=r,s?typeof r.keyName=="string"&&(this.attributes[r.keyName]=r):n&&(r.className&&(this.classes[r.className]=r),r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map(o=>o.toUpperCase()):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach(o=>{(this.tags[o]==null||r.className==null)&&(this.tags[o]=r)}))),r})}};sq.blots=new WeakMap;let xg=sq;function qM(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(r=>r.indexOf(`${e}-`)===0)}class F1e extends Jo{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(r=>r.split("-").slice(0,-1).join("-"))}add(e,r){return this.canAdd(e,r)?(this.remove(e),e.classList.add(`${this.keyName}-${r}`),!0):!1}remove(e){qM(e,this.keyName).forEach(r=>{e.classList.remove(r)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const r=(qM(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,r)?r:""}}const lo=F1e;function YN(t){const e=t.split("-"),r=e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return e[0]+r}class B1e extends Jo{static keys(e){return(e.getAttribute("style")||"").split(";").map(r=>r.split(":")[0].trim())}add(e,r){return this.canAdd(e,r)?(e.style[YN(this.keyName)]=r,!0):!1}remove(e){e.style[YN(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const r=e.style[YN(this.keyName)];return this.canAdd(e,r)?r:""}}const Pd=B1e;class U1e{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,r){r?e.add(this.domNode,r)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=xg.find(this.domNode);if(e==null)return;const r=Jo.keys(this.domNode),n=lo.keys(this.domNode),s=Pd.keys(this.domNode);r.concat(n).concat(s).forEach(i=>{const o=e.scroll.query(i,pt.ATTRIBUTE);o instanceof Jo&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(r=>{const n=this.attributes[r].value(this.domNode);e.format(r,n)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(r=>{this.attributes[r].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,r)=>(e[r]=this.attributes[r].value(this.domNode),e),{})}}const ww=U1e,iq=class{constructor(e,r){this.scroll=e,this.domNode=r,xg.blots.set(r,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Gf("Blot definition missing tagName");let r,n;return Array.isArray(this.tagName)?(typeof e=="string"?(n=e.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):typeof e=="number"&&(n=e),typeof n=="number"?r=document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?r=document.createElement(n):r=document.createElement(this.tagName[0])):r=document.createElement(this.tagName),this.className&&r.classList.add(this.className),r}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),xg.blots.delete(this.domNode)}deleteAt(e,r){this.isolate(e,r).remove()}formatAt(e,r,n,s){const i=this.isolate(e,r);if(this.scroll.query(n,pt.BLOT)!=null&&s)i.wrap(n,s);else if(this.scroll.query(n,pt.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);i.wrap(o),o.format(n,s)}}insertAt(e,r,n){const s=n==null?this.scroll.create("text",r):this.scroll.create(r,n),i=this.split(e);this.parent.insertBefore(s,i||void 0)}isolate(e,r){const n=this.split(e);if(n==null)throw new Error("Attempt to isolate at end");return n.split(r),n}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,r){const n=typeof e=="string"?this.scroll.create(e,r):e;return this.parent!=null&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(e,r){return e===0?this:this.next}update(e,r){}wrap(e,r){const n=typeof e=="string"?this.scroll.create(e,r):e;if(this.parent!=null&&this.parent.insertBefore(n,this.next||void 0),typeof n.appendChild!="function")throw new Gf(`Cannot wrap ${e}`);return n.appendChild(this),n}};iq.blotName="abstract";let oq=iq;const lq=class extends oq{static value(e){return!0}index(e,r){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(r,1):-1}position(e,r){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};lq.scope=pt.INLINE_BLOT;let K1e=lq;const Ta=K1e;class G1e{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const r=e.slice(1);this.append(...r)}}at(e){const r=this.iterator();let n=r();for(;n&&e>0;)e-=1,n=r();return n}contains(e){const r=this.iterator();let n=r();for(;n;){if(n===e)return!0;n=r()}return!1}indexOf(e){const r=this.iterator();let n=r(),s=0;for(;n;){if(n===e)return s;s+=1,n=r()}return-1}insertBefore(e,r){e!=null&&(this.remove(e),e.next=r,r!=null?(e.prev=r.prev,r.prev!=null&&(r.prev.next=e),r.prev=e,r===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let r=0,n=this.head;for(;n!=null;){if(n===e)return r;r+=n.length(),n=n.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const r=e;return e!=null&&(e=e.next),r}}find(e,r=!1){const n=this.iterator();let s=n();for(;s;){const i=s.length();if(e<i||r&&e===i&&(s.next==null||s.next.length()!==0))return[s,e];e-=i,s=n()}return[null,0]}forEach(e){const r=this.iterator();let n=r();for(;n;)e(n),n=r()}forEachAt(e,r,n){if(r<=0)return;const[s,i]=this.find(e);let o=e-i;const l=this.iterator(s);let c=l();for(;c&&o<e+r;){const d=c.length();e>o?n(c,e-o,Math.min(r,o+d-e)):n(c,0,Math.min(d,e+r-o)),o+=d,c=l()}}map(e){return this.reduce((r,n)=>(r.push(e(n)),r),[])}reduce(e,r){const n=this.iterator();let s=n();for(;s;)r=e(r,s),s=n();return r}}function VM(t,e){const r=e.find(t);if(r)return r;try{return e.create(t)}catch{const n=e.create(pt.INLINE);return Array.from(t.childNodes).forEach(s=>{n.domNode.appendChild(s)}),t.parentNode&&t.parentNode.replaceChild(n.domNode,t),n.attach(),n}}const cq=class Ec extends oq{constructor(e,r){super(e,r),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Ec.uiClass&&this.uiNode.classList.add(Ec.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new G1e,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const r=VM(e,this.scroll);this.insertBefore(r,this.children.head||void 0)}catch(r){if(r instanceof Gf)return;throw r}})}deleteAt(e,r){if(e===0&&r===this.length())return this.remove();this.children.forEachAt(e,r,(n,s,i)=>{n.deleteAt(s,i)})}descendant(e,r=0){const[n,s]=this.children.find(r);return e.blotName==null&&e(n)||e.blotName!=null&&n instanceof e?[n,s]:n instanceof Ec?n.descendant(e,s):[null,-1]}descendants(e,r=0,n=Number.MAX_VALUE){let s=[],i=n;return this.children.forEachAt(r,n,(o,l,c)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&s.push(o),o instanceof Ec&&(s=s.concat(o.descendants(e,l,i))),i-=c}),s}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(r=>{e||this.statics.allowedChildren.some(n=>r instanceof n)||(r.statics.scope===pt.BLOCK_BLOT?(r.next!=null&&this.splitAfter(r),r.prev!=null&&this.splitAfter(r.prev),r.parent.unwrap(),e=!0):r instanceof Ec?r.unwrap():r.remove())})}formatAt(e,r,n,s){this.children.forEachAt(e,r,(i,o,l)=>{i.formatAt(o,l,n,s)})}insertAt(e,r,n){const[s,i]=this.children.find(e);if(s)s.insertAt(i,r,n);else{const o=n==null?this.scroll.create("text",r):this.scroll.create(r,n);this.appendChild(o)}}insertBefore(e,r){e.parent!=null&&e.parent.children.remove(e);let n=null;this.children.insertBefore(e,r||null),e.parent=this,r!=null&&(n=r.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(e.domNode,n),e.attach()}length(){return this.children.reduce((e,r)=>e+r.length(),0)}moveChildren(e,r){this.children.forEach(n=>{e.insertBefore(n,r)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const r=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(r)}else this.remove()}path(e,r=!1){const[n,s]=this.children.find(e,r),i=[[this,e]];return n instanceof Ec?i.concat(n.path(s,r)):(n!=null&&i.push([n,s]),i)}removeChild(e){this.children.remove(e)}replaceWith(e,r){const n=typeof e=="string"?this.scroll.create(e,r):e;return n instanceof Ec&&this.moveChildren(n),super.replaceWith(n)}split(e,r=!1){if(!r){if(e===0)return this;if(e===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(e,this.length(),(s,i,o)=>{const l=s.split(i,r);l!=null&&n.appendChild(l)}),n}splitAfter(e){const r=this.clone();for(;e.next!=null;)r.appendChild(e.next);return this.parent&&this.parent.insertBefore(r,this.next||void 0),r}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,r){const n=[],s=[];e.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(n.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(i);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),n.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,o)=>i===o?0:i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let o=null;i.nextSibling!=null&&(o=this.scroll.find(i.nextSibling));const l=VM(i,this.scroll);(l.next!==o||l.next==null)&&(l.parent!=null&&l.parent.removeChild(this),this.insertBefore(l,o||void 0))}),this.enforceAllowedChildren()}};cq.uiClass="";let q1e=cq;const Hi=q1e;function V1e(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}const tf=class rf extends Hi{static create(e){return super.create(e)}static formats(e,r){const n=r.query(rf.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,r){super(e,r),this.attributes=new ww(this.domNode)}format(e,r){if(e===this.statics.blotName&&!r)this.children.forEach(n=>{n instanceof rf||(n=n.wrap(rf.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(e,pt.INLINE);if(n==null)return;n instanceof Jo?this.attributes.attribute(n,r):r&&(e!==this.statics.blotName||this.formats()[e]!==r)&&this.replaceWith(e,r)}}formats(){const e=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(e[this.statics.blotName]=r),e}formatAt(e,r,n,s){this.formats()[n]!=null||this.scroll.query(n,pt.ATTRIBUTE)?this.isolate(e,r).format(n,s):super.formatAt(e,r,n,s)}optimize(e){super.optimize(e);const r=this.formats();if(Object.keys(r).length===0)return this.unwrap();const n=this.next;n instanceof rf&&n.prev===this&&V1e(r,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(e,r){const n=super.replaceWith(e,r);return this.attributes.copy(n),n}update(e,r){super.update(e,r),e.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(e,r){const n=super.wrap(e,r);return n instanceof rf&&this.attributes.move(n),n}};tf.allowedChildren=[tf,Ta],tf.blotName="inline",tf.scope=pt.INLINE_BLOT,tf.tagName="SPAN";let H1e=tf;const $5=H1e,nf=class dA extends Hi{static create(e){return super.create(e)}static formats(e,r){const n=r.query(dA.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,r){super(e,r),this.attributes=new ww(this.domNode)}format(e,r){const n=this.scroll.query(e,pt.BLOCK);n!=null&&(n instanceof Jo?this.attributes.attribute(n,r):e===this.statics.blotName&&!r?this.replaceWith(dA.blotName):r&&(e!==this.statics.blotName||this.formats()[e]!==r)&&this.replaceWith(e,r))}formats(){const e=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(e[this.statics.blotName]=r),e}formatAt(e,r,n,s){this.scroll.query(n,pt.BLOCK)!=null?this.format(n,s):super.formatAt(e,r,n,s)}insertAt(e,r,n){if(n==null||this.scroll.query(r,pt.INLINE)!=null)super.insertAt(e,r,n);else{const s=this.split(e);if(s!=null){const i=this.scroll.create(r,n);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,r){const n=super.replaceWith(e,r);return this.attributes.copy(n),n}update(e,r){super.update(e,r),e.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};nf.blotName="block",nf.scope=pt.BLOCK_BLOT,nf.tagName="P",nf.allowedChildren=[$5,nf,Ta];let W1e=nf;const J0=W1e,uA=class extends Hi{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,r){super.deleteAt(e,r),this.enforceAllowedChildren()}formatAt(e,r,n,s){super.formatAt(e,r,n,s),this.enforceAllowedChildren()}insertAt(e,r,n){super.insertAt(e,r,n),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};uA.blotName="container",uA.scope=pt.BLOCK_BLOT;let X1e=uA;const jw=X1e;class Y1e extends Ta{static formats(e,r){}format(e,r){super.formatAt(0,this.length(),e,r)}formatAt(e,r,n,s){e===0&&r===this.length()?this.format(n,s):super.formatAt(e,r,n,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ks=Y1e,Z1e={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Q1e=100,af=class extends Hi{constructor(e,r){super(null,r),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,Z1e),this.attach()}create(e,r){return this.registry.create(this,e,r)}find(e,r=!1){const n=this.registry.find(e,r);return n?n.scroll===this?n:r?this.find(n.scroll.domNode.parentNode,!0):null:null}query(e,r=pt.ANY){return this.registry.query(e,r)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,r){this.update(),e===0&&r===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(e,r)}formatAt(e,r,n,s){this.update(),super.formatAt(e,r,n,s)}insertAt(e,r,n){this.update(),super.insertAt(e,r,n)}optimize(e=[],r={}){super.optimize(r);const n=r.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)e.push(s.pop());const i=(c,d=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(n.has(c.domNode)||n.set(c.domNode,[]),d&&i(c.parent))},o=c=>{n.has(c.domNode)&&(c instanceof Hi&&c.children.forEach(o),n.delete(c.domNode),c.optimize(r))};let l=e;for(let c=0;l.length>0;c+=1){if(c>=Q1e)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach(d=>{const u=this.find(d.target,!0);u!=null&&(u.domNode===d.target&&(d.type==="childList"?(i(this.find(d.previousSibling,!1)),Array.from(d.addedNodes).forEach(h=>{const f=this.find(h,!1);i(f,!1),f instanceof Hi&&f.children.forEach(g=>{i(g,!1)})})):d.type==="attributes"&&i(u.prev)),i(u))}),this.children.forEach(o),l=Array.from(this.observer.takeRecords()),s=l.slice();s.length>0;)e.push(s.pop())}}update(e,r={}){e=e||this.observer.takeRecords();const n=new WeakMap;e.map(s=>{const i=this.find(s.target,!0);return i==null?null:n.has(i.domNode)?(n.get(i.domNode).push(s),null):(n.set(i.domNode,[s]),i)}).forEach(s=>{s!=null&&s!==this&&n.has(s.domNode)&&s.update(n.get(s.domNode)||[],r)}),r.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),r),this.optimize(e,r)}};af.blotName="scroll",af.defaultChild=J0,af.allowedChildren=[J0,jw],af.scope=pt.BLOCK_BLOT,af.tagName="DIV";let J1e=af;const F5=J1e,hA=class dq extends Ta{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,r){super(e,r),this.text=this.statics.value(this.domNode)}deleteAt(e,r){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+r)}index(e,r){return this.domNode===e?r:-1}insertAt(e,r,n){n==null?(this.text=this.text.slice(0,e)+r+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,r,n)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof dq&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,r=!1){return[this.domNode,e]}split(e,r=!1){if(!r){if(e===0)return this;if(e===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(e,r){e.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};hA.blotName="text",hA.scope=pt.INLINE_BLOT;let eke=hA;const K1=eke,tke=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Jo,AttributorStore:ww,BlockBlot:J0,ClassAttributor:lo,ContainerBlot:jw,EmbedBlot:Ks,InlineBlot:$5,LeafBlot:Ta,ParentBlot:Hi,Registry:xg,Scope:pt,ScrollBlot:F5,StyleAttributor:Pd,TextBlot:K1},Symbol.toStringTag,{value:"Module"}));var fA={exports:{}},Ts=-1,Fa=1,qn=0;function ex(t,e,r,n,s){if(t===e)return t?[[qn,t]]:[];if(r!=null){var i=dke(t,e,r);if(i)return i}var o=B5(t,e),l=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=Nw(t,e);var c=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var d=rke(t,e);return l&&d.unshift([qn,l]),c&&d.push([qn,c]),U5(d,s),n&&ske(d),d}function rke(t,e){var r;if(!t)return[[Fa,e]];if(!e)return[[Ts,t]];var n=t.length>e.length?t:e,s=t.length>e.length?e:t,i=n.indexOf(s);if(i!==-1)return r=[[Fa,n.substring(0,i)],[qn,s],[Fa,n.substring(i+s.length)]],t.length>e.length&&(r[0][0]=r[2][0]=Ts),r;if(s.length===1)return[[Ts,t],[Fa,e]];var o=ake(t,e);if(o){var l=o[0],c=o[1],d=o[2],u=o[3],h=o[4],f=ex(l,d),g=ex(c,u);return f.concat([[qn,h]],g)}return nke(t,e)}function nke(t,e){for(var r=t.length,n=e.length,s=Math.ceil((r+n)/2),i=s,o=2*s,l=new Array(o),c=new Array(o),d=0;d<o;d++)l[d]=-1,c[d]=-1;l[i+1]=0,c[i+1]=0;for(var u=r-n,h=u%2!==0,f=0,g=0,x=0,m=0,p=0;p<s;p++){for(var b=-p+f;b<=p-g;b+=2){var v=i+b,y;b===-p||b!==p&&l[v-1]<l[v+1]?y=l[v+1]:y=l[v-1]+1;for(var w=y-b;y<r&&w<n&&t.charAt(y)===e.charAt(w);)y++,w++;if(l[v]=y,y>r)g+=2;else if(w>n)f+=2;else if(h){var k=i+u-b;if(k>=0&&k<o&&c[k]!==-1){var j=r-c[k];if(y>=j)return HM(t,e,y,w)}}}for(var _=-p+x;_<=p-m;_+=2){var k=i+_,j;_===-p||_!==p&&c[k-1]<c[k+1]?j=c[k+1]:j=c[k-1]+1;for(var S=j-_;j<r&&S<n&&t.charAt(r-j-1)===e.charAt(n-S-1);)j++,S++;if(c[k]=j,j>r)m+=2;else if(S>n)x+=2;else if(!h){var v=i+u-_;if(v>=0&&v<o&&l[v]!==-1){var y=l[v],w=i+y-v;if(j=r-j,y>=j)return HM(t,e,y,w)}}}}return[[Ts,t],[Fa,e]]}function HM(t,e,r,n){var s=t.substring(0,r),i=e.substring(0,n),o=t.substring(r),l=e.substring(n),c=ex(s,i),d=ex(o,l);return c.concat(d)}function B5(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var r=0,n=Math.min(t.length,e.length),s=n,i=0;r<s;)t.substring(i,s)==e.substring(i,s)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return uq(t.charCodeAt(s-1))&&s--,s}function WM(t,e){var r=t.length,n=e.length;if(r==0||n==0)return 0;r>n?t=t.substring(r-n):r<n&&(e=e.substring(0,r));var s=Math.min(r,n);if(t==e)return s;for(var i=0,o=1;;){var l=t.substring(s-o),c=e.indexOf(l);if(c==-1)return i;o+=c,(c==0||t.substring(s-o)==e.substring(0,o))&&(i=o,o++)}}function Nw(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var r=0,n=Math.min(t.length,e.length),s=n,i=0;r<s;)t.substring(t.length-s,t.length-i)==e.substring(e.length-s,e.length-i)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return hq(t.charCodeAt(t.length-s))&&s--,s}function ake(t,e){var r=t.length>e.length?t:e,n=t.length>e.length?e:t;if(r.length<4||n.length*2<r.length)return null;function s(g,x,m){for(var p=g.substring(m,m+Math.floor(g.length/4)),b=-1,v="",y,w,k,j;(b=x.indexOf(p,b+1))!==-1;){var _=B5(g.substring(m),x.substring(b)),S=Nw(g.substring(0,m),x.substring(0,b));v.length<S+_&&(v=x.substring(b-S,b)+x.substring(b,b+_),y=g.substring(0,m-S),w=g.substring(m+_),k=x.substring(0,b-S),j=x.substring(b+_))}return v.length*2>=g.length?[y,w,k,j,v]:null}var i=s(r,n,Math.ceil(r.length/4)),o=s(r,n,Math.ceil(r.length/2)),l;if(!i&&!o)return null;o?i?l=i[4].length>o[4].length?i:o:l=o:l=i;var c,d,u,h;t.length>e.length?(c=l[0],d=l[1],u=l[2],h=l[3]):(u=l[0],h=l[1],c=l[2],d=l[3]);var f=l[4];return[c,d,u,h,f]}function ske(t){for(var e=!1,r=[],n=0,s=null,i=0,o=0,l=0,c=0,d=0;i<t.length;)t[i][0]==qn?(r[n++]=i,o=c,l=d,c=0,d=0,s=t[i][1]):(t[i][0]==Fa?c+=t[i][1].length:d+=t[i][1].length,s&&s.length<=Math.max(o,l)&&s.length<=Math.max(c,d)&&(t.splice(r[n-1],0,[Ts,s]),t[r[n-1]+1][0]=Fa,n--,n--,i=n>0?r[n-1]:-1,o=0,l=0,c=0,d=0,s=null,e=!0)),i++;for(e&&U5(t),lke(t),i=1;i<t.length;){if(t[i-1][0]==Ts&&t[i][0]==Fa){var u=t[i-1][1],h=t[i][1],f=WM(u,h),g=WM(h,u);f>=g?(f>=u.length/2||f>=h.length/2)&&(t.splice(i,0,[qn,h.substring(0,f)]),t[i-1][1]=u.substring(0,u.length-f),t[i+1][1]=h.substring(f),i++):(g>=u.length/2||g>=h.length/2)&&(t.splice(i,0,[qn,u.substring(0,g)]),t[i-1][0]=Fa,t[i-1][1]=h.substring(0,h.length-g),t[i+1][0]=Ts,t[i+1][1]=u.substring(g),i++),i++}i++}}var XM=/[^a-zA-Z0-9]/,YM=/\s/,ZM=/[\r\n]/,ike=/\n\r?\n$/,oke=/^\r?\n\r?\n/;function lke(t){function e(g,x){if(!g||!x)return 6;var m=g.charAt(g.length-1),p=x.charAt(0),b=m.match(XM),v=p.match(XM),y=b&&m.match(YM),w=v&&p.match(YM),k=y&&m.match(ZM),j=w&&p.match(ZM),_=k&&g.match(ike),S=j&&x.match(oke);return _||S?5:k||j?4:b&&!y&&w?3:y||w?2:b||v?1:0}for(var r=1;r<t.length-1;){if(t[r-1][0]==qn&&t[r+1][0]==qn){var n=t[r-1][1],s=t[r][1],i=t[r+1][1],o=Nw(n,s);if(o){var l=s.substring(s.length-o);n=n.substring(0,n.length-o),s=l+s.substring(0,s.length-o),i=l+i}for(var c=n,d=s,u=i,h=e(n,s)+e(s,i);s.charAt(0)===i.charAt(0);){n+=s.charAt(0),s=s.substring(1)+i.charAt(0),i=i.substring(1);var f=e(n,s)+e(s,i);f>=h&&(h=f,c=n,d=s,u=i)}t[r-1][1]!=c&&(c?t[r-1][1]=c:(t.splice(r-1,1),r--),t[r][1]=d,u?t[r+1][1]=u:(t.splice(r+1,1),r--))}r++}}function U5(t,e){t.push([qn,""]);for(var r=0,n=0,s=0,i="",o="",l;r<t.length;){if(r<t.length-1&&!t[r][1]){t.splice(r,1);continue}switch(t[r][0]){case Fa:s++,o+=t[r][1],r++;break;case Ts:n++,i+=t[r][1],r++;break;case qn:var c=r-s-n-1;if(e){if(c>=0&&gq(t[c][1])){var d=t[c][1].slice(-1);if(t[c][1]=t[c][1].slice(0,-1),i=d+i,o=d+o,!t[c][1]){t.splice(c,1),r--;var u=c-1;t[u]&&t[u][0]===Fa&&(s++,o=t[u][1]+o,u--),t[u]&&t[u][0]===Ts&&(n++,i=t[u][1]+i,u--),c=u}}if(fq(t[r][1])){var d=t[r][1].charAt(0);t[r][1]=t[r][1].slice(1),i+=d,o+=d}}if(r<t.length-1&&!t[r][1]){t.splice(r,1);break}if(i.length>0||o.length>0){i.length>0&&o.length>0&&(l=B5(o,i),l!==0&&(c>=0?t[c][1]+=o.substring(0,l):(t.splice(0,0,[qn,o.substring(0,l)]),r++),o=o.substring(l),i=i.substring(l)),l=Nw(o,i),l!==0&&(t[r][1]=o.substring(o.length-l)+t[r][1],o=o.substring(0,o.length-l),i=i.substring(0,i.length-l)));var h=s+n;i.length===0&&o.length===0?(t.splice(r-h,h),r=r-h):i.length===0?(t.splice(r-h,h,[Fa,o]),r=r-h+1):o.length===0?(t.splice(r-h,h,[Ts,i]),r=r-h+1):(t.splice(r-h,h,[Ts,i],[Fa,o]),r=r-h+2)}r!==0&&t[r-1][0]===qn?(t[r-1][1]+=t[r][1],t.splice(r,1)):r++,s=0,n=0,i="",o="";break}}t[t.length-1][1]===""&&t.pop();var f=!1;for(r=1;r<t.length-1;)t[r-1][0]===qn&&t[r+1][0]===qn&&(t[r][1].substring(t[r][1].length-t[r-1][1].length)===t[r-1][1]?(t[r][1]=t[r-1][1]+t[r][1].substring(0,t[r][1].length-t[r-1][1].length),t[r+1][1]=t[r-1][1]+t[r+1][1],t.splice(r-1,1),f=!0):t[r][1].substring(0,t[r+1][1].length)==t[r+1][1]&&(t[r-1][1]+=t[r+1][1],t[r][1]=t[r][1].substring(t[r+1][1].length)+t[r+1][1],t.splice(r+1,1),f=!0)),r++;f&&U5(t,e)}function uq(t){return t>=55296&&t<=56319}function hq(t){return t>=56320&&t<=57343}function fq(t){return hq(t.charCodeAt(0))}function gq(t){return uq(t.charCodeAt(t.length-1))}function cke(t){for(var e=[],r=0;r<t.length;r++)t[r][1].length>0&&e.push(t[r]);return e}function ZN(t,e,r,n){return gq(t)||fq(n)?null:cke([[qn,t],[Ts,e],[Fa,r],[qn,n]])}function dke(t,e,r){var n=typeof r=="number"?{index:r,length:0}:r.oldRange,s=typeof r=="number"?null:r.newRange,i=t.length,o=e.length;if(n.length===0&&(s===null||s.length===0)){var l=n.index,c=t.slice(0,l),d=t.slice(l),u=s?s.index:null;e:{var h=l+o-i;if(u!==null&&u!==h||h<0||h>o)break e;var f=e.slice(0,h),g=e.slice(h);if(g!==d)break e;var x=Math.min(l,h),m=c.slice(0,x),p=f.slice(0,x);if(m!==p)break e;var b=c.slice(x),v=f.slice(x);return ZN(m,b,v,d)}e:{if(u!==null&&u!==l)break e;var y=l,f=e.slice(0,y),g=e.slice(y);if(f!==c)break e;var w=Math.min(i-y,o-y),k=d.slice(d.length-w),j=g.slice(g.length-w);if(k!==j)break e;var b=d.slice(0,d.length-w),v=g.slice(0,g.length-w);return ZN(c,b,v,k)}}if(n.length>0&&s&&s.length===0)e:{var m=t.slice(0,n.index),k=t.slice(n.index+n.length),x=m.length,w=k.length;if(o<x+w)break e;var p=e.slice(0,x),j=e.slice(o-w);if(m!==p||k!==j)break e;var b=t.slice(x,i-w),v=e.slice(x,o-w);return ZN(m,b,v,k)}return null}function _w(t,e,r,n){return ex(t,e,r,n,!0)}_w.INSERT=Fa;_w.DELETE=Ts;_w.EQUAL=qn;var uke=_w,G1={exports:{}};G1.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",o="[object Array]",l="[object Boolean]",c="[object Date]",d="[object Error]",u="[object Function]",h="[object GeneratorFunction]",f="[object Map]",g="[object Number]",x="[object Object]",m="[object Promise]",p="[object RegExp]",b="[object Set]",v="[object String]",y="[object Symbol]",w="[object WeakMap]",k="[object ArrayBuffer]",j="[object DataView]",_="[object Float32Array]",S="[object Float64Array]",A="[object Int8Array]",T="[object Int16Array]",E="[object Int32Array]",C="[object Uint8Array]",z="[object Uint8ClampedArray]",M="[object Uint16Array]",F="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,L=/\w*$/,K=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,R={};R[i]=R[o]=R[k]=R[j]=R[l]=R[c]=R[_]=R[S]=R[A]=R[T]=R[E]=R[f]=R[g]=R[x]=R[p]=R[b]=R[v]=R[y]=R[C]=R[z]=R[M]=R[F]=!0,R[d]=R[u]=R[w]=!1;var Y=typeof Fe=="object"&&Fe&&Fe.Object===Object&&Fe,ee=typeof self=="object"&&self&&self.Object===Object&&self,B=Y||ee||Function("return this")(),U=e&&!e.nodeType&&e,V=U&&!0&&t&&!t.nodeType&&t,se=V&&V.exports===U;function Ne(P,J){return P.set(J[0],J[1]),P}function ie(P,J){return P.add(J),P}function q(P,J){for(var ue=-1,Ie=P?P.length:0;++ue<Ie&&J(P[ue],ue,P)!==!1;);return P}function H(P,J){for(var ue=-1,Ie=J.length,Rt=P.length;++ue<Ie;)P[Rt+ue]=J[ue];return P}function Z(P,J,ue,Ie){for(var Rt=-1,yt=P?P.length:0;++Rt<yt;)ue=J(ue,P[Rt],Rt,P);return ue}function te(P,J){for(var ue=-1,Ie=Array(P);++ue<P;)Ie[ue]=J(ue);return Ie}function ge(P,J){return P==null?void 0:P[J]}function Ce(P){var J=!1;if(P!=null&&typeof P.toString!="function")try{J=!!(P+"")}catch{}return J}function Le(P){var J=-1,ue=Array(P.size);return P.forEach(function(Ie,Rt){ue[++J]=[Rt,Ie]}),ue}function He(P,J){return function(ue){return P(J(ue))}}function le(P){var J=-1,ue=Array(P.size);return P.forEach(function(Ie){ue[++J]=Ie}),ue}var Re=Array.prototype,Ze=Function.prototype,lt=Object.prototype,rt=B["__core-js_shared__"],ne=function(){var P=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),pe=Ze.toString,Ue=lt.hasOwnProperty,kt=lt.toString,Se=RegExp("^"+pe.call(Ue).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=se?B.Buffer:void 0,$e=B.Symbol,Ge=B.Uint8Array,Qe=He(Object.getPrototypeOf,Object),Lt=Object.create,wt=lt.propertyIsEnumerable,Nt=Re.splice,he=Object.getOwnPropertySymbols,Xe=me?me.isBuffer:void 0,W=He(Object.keys,Object),we=ur(B,"DataView"),ve=ur(B,"Map"),Te=ur(B,"Promise"),oe=ur(B,"Set"),Ee=ur(B,"WeakMap"),G=ur(Object,"create"),Oe=Qn(we),it=Qn(ve),I=Qn(Te),je=Qn(oe),ke=Qn(Ee),X=$e?$e.prototype:void 0,ce=X?X.valueOf:void 0;function _e(P){var J=-1,ue=P?P.length:0;for(this.clear();++J<ue;){var Ie=P[J];this.set(Ie[0],Ie[1])}}function ot(){this.__data__=G?G(null):{}}function et(P){return this.has(P)&&delete this.__data__[P]}function at(P){var J=this.__data__;if(G){var ue=J[P];return ue===n?void 0:ue}return Ue.call(J,P)?J[P]:void 0}function Ft(P){var J=this.__data__;return G?J[P]!==void 0:Ue.call(J,P)}function ca(P,J){var ue=this.__data__;return ue[P]=G&&J===void 0?n:J,this}_e.prototype.clear=ot,_e.prototype.delete=et,_e.prototype.get=at,_e.prototype.has=Ft,_e.prototype.set=ca;function Bt(P){var J=-1,ue=P?P.length:0;for(this.clear();++J<ue;){var Ie=P[J];this.set(Ie[0],Ie[1])}}function Ht(){this.__data__=[]}function Xr(P){var J=this.__data__,ue=mo(J,P);if(ue<0)return!1;var Ie=J.length-1;return ue==Ie?J.pop():Nt.call(J,ue,1),!0}function hn(P){var J=this.__data__,ue=mo(J,P);return ue<0?void 0:J[ue][1]}function _n(P){return mo(this.__data__,P)>-1}function fo(P,J){var ue=this.__data__,Ie=mo(ue,P);return Ie<0?ue.push([P,J]):ue[Ie][1]=J,this}Bt.prototype.clear=Ht,Bt.prototype.delete=Xr,Bt.prototype.get=hn,Bt.prototype.has=_n,Bt.prototype.set=fo;function ln(P){var J=-1,ue=P?P.length:0;for(this.clear();++J<ue;){var Ie=P[J];this.set(Ie[0],Ie[1])}}function $r(){this.__data__={hash:new _e,map:new(ve||Bt),string:new _e}}function Zn(P){return Xt(this,P).delete(P)}function cn(P){return Xt(this,P).get(P)}function Ra(P){return Xt(this,P).has(P)}function ja(P,J){return Xt(this,P).set(P,J),this}ln.prototype.clear=$r,ln.prototype.delete=Zn,ln.prototype.get=cn,ln.prototype.has=Ra,ln.prototype.set=ja;function $n(P){this.__data__=new Bt(P)}function Rm(){this.__data__=new Bt}function Ih(P){return this.__data__.delete(P)}function hl(P){return this.__data__.get(P)}function Dh(P){return this.__data__.has(P)}function go(P,J){var ue=this.__data__;if(ue instanceof Bt){var Ie=ue.__data__;if(!ve||Ie.length<r-1)return Ie.push([P,J]),this;ue=this.__data__=new ln(Ie)}return ue.set(P,J),this}$n.prototype.clear=Rm,$n.prototype.delete=Ih,$n.prototype.get=hl,$n.prototype.has=Dh,$n.prototype.set=go;function kc(P,J){var ue=Bm(P)||Lh(P)?te(P.length,String):[],Ie=ue.length,Rt=!!Ie;for(var yt in P)Ue.call(P,yt)&&!(Rt&&(yt=="length"||Zd(yt,Ie)))&&ue.push(yt);return ue}function fl(P,J,ue){var Ie=P[J];(!(Ue.call(P,J)&&Qb(Ie,ue))||ue===void 0&&!(J in P))&&(P[J]=ue)}function mo(P,J){for(var ue=P.length;ue--;)if(Qb(P[ue][0],J))return ue;return-1}function Gs(P,J){return P&&ct(J,Km(J),P)}function Xd(P,J,ue,Ie,Rt,yt,hr){var cr;if(Ie&&(cr=yt?Ie(P,Rt,yt,hr):Ie(P)),cr!==void 0)return cr;if(!po(P))return P;var Sn=Bm(P);if(Sn){if(cr=gl(P),!J)return Ye(P,cr)}else{var kr=fn(P),Na=kr==u||kr==h;if(Jb(P))return re(P,J);if(kr==x||kr==i||Na&&!yt){if(Ce(P))return yt?P:{};if(cr=Za(Na?{}:P),!J)return Ut(P,Gs(cr,P))}else{if(!R[kr])return yt?P:{};cr=$m(P,kr,Xd,J)}}hr||(hr=new $n);var Qa=hr.get(P);if(Qa)return Qa;if(hr.set(P,cr),!Sn)var Fn=ue?lr(P):Km(P);return q(Fn||P,function(_a,da){Fn&&(da=_a,_a=P[da]),fl(cr,da,Xd(_a,J,ue,Ie,da,P,hr))}),cr}function Yd(P){return po(P)?Lt(P):{}}function Pm(P,J,ue){var Ie=J(P);return Bm(P)?Ie:H(Ie,ue(P))}function zm(P){return kt.call(P)}function Q(P){if(!po(P)||Fm(P))return!1;var J=Um(P)||Ce(P)?Se:K;return J.test(Qn(P))}function de(P){if(!Mh(P))return W(P);var J=[];for(var ue in Object(P))Ue.call(P,ue)&&ue!="constructor"&&J.push(ue);return J}function re(P,J){if(J)return P.slice();var ue=new P.constructor(P.length);return P.copy(ue),ue}function be(P){var J=new P.constructor(P.byteLength);return new Ge(J).set(new Ge(P)),J}function ye(P,J){var ue=J?be(P.buffer):P.buffer;return new P.constructor(ue,P.byteOffset,P.byteLength)}function xe(P,J,ue){var Ie=J?ue(Le(P),!0):Le(P);return Z(Ie,Ne,new P.constructor)}function Me(P){var J=new P.constructor(P.source,L.exec(P));return J.lastIndex=P.lastIndex,J}function Be(P,J,ue){var Ie=J?ue(le(P),!0):le(P);return Z(Ie,ie,new P.constructor)}function Ke(P){return ce?Object(ce.call(P)):{}}function qe(P,J){var ue=J?be(P.buffer):P.buffer;return new P.constructor(ue,P.byteOffset,P.length)}function Ye(P,J){var ue=-1,Ie=P.length;for(J||(J=Array(Ie));++ue<Ie;)J[ue]=P[ue];return J}function ct(P,J,ue,Ie){ue||(ue={});for(var Rt=-1,yt=J.length;++Rt<yt;){var hr=J[Rt],cr=void 0;fl(ue,hr,cr===void 0?P[hr]:cr)}return ue}function Ut(P,J){return ct(P,pr(P),J)}function lr(P){return Pm(P,Km,pr)}function Xt(P,J){var ue=P.__data__;return Yb(J)?ue[typeof J=="string"?"string":"hash"]:ue.map}function ur(P,J){var ue=ge(P,J);return Q(ue)?ue:void 0}var pr=he?He(he,Object):qj,fn=zm;(we&&fn(new we(new ArrayBuffer(1)))!=j||ve&&fn(new ve)!=f||Te&&fn(Te.resolve())!=m||oe&&fn(new oe)!=b||Ee&&fn(new Ee)!=w)&&(fn=function(P){var J=kt.call(P),ue=J==x?P.constructor:void 0,Ie=ue?Qn(ue):void 0;if(Ie)switch(Ie){case Oe:return j;case it:return f;case I:return m;case je:return b;case ke:return w}return J});function gl(P){var J=P.length,ue=P.constructor(J);return J&&typeof P[0]=="string"&&Ue.call(P,"index")&&(ue.index=P.index,ue.input=P.input),ue}function Za(P){return typeof P.constructor=="function"&&!Mh(P)?Yd(Qe(P)):{}}function $m(P,J,ue,Ie){var Rt=P.constructor;switch(J){case k:return be(P);case l:case c:return new Rt(+P);case j:return ye(P,Ie);case _:case S:case A:case T:case E:case C:case z:case M:case F:return qe(P,Ie);case f:return xe(P,Ie,ue);case g:case v:return new Rt(P);case p:return Me(P);case b:return Be(P,Ie,ue);case y:return Ke(P)}}function Zd(P,J){return J=J??s,!!J&&(typeof P=="number"||$.test(P))&&P>-1&&P%1==0&&P<J}function Yb(P){var J=typeof P;return J=="string"||J=="number"||J=="symbol"||J=="boolean"?P!=="__proto__":P===null}function Fm(P){return!!ne&&ne in P}function Mh(P){var J=P&&P.constructor,ue=typeof J=="function"&&J.prototype||lt;return P===ue}function Qn(P){if(P!=null){try{return pe.call(P)}catch{}try{return P+""}catch{}}return""}function Zb(P){return Xd(P,!0,!0)}function Qb(P,J){return P===J||P!==P&&J!==J}function Lh(P){return Gj(P)&&Ue.call(P,"callee")&&(!wt.call(P,"callee")||kt.call(P)==i)}var Bm=Array.isArray;function Rh(P){return P!=null&&ey(P.length)&&!Um(P)}function Gj(P){return ty(P)&&Rh(P)}var Jb=Xe||Vj;function Um(P){var J=po(P)?kt.call(P):"";return J==u||J==h}function ey(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=s}function po(P){var J=typeof P;return!!P&&(J=="object"||J=="function")}function ty(P){return!!P&&typeof P=="object"}function Km(P){return Rh(P)?kc(P):de(P)}function qj(){return[]}function Vj(){return!1}t.exports=Zb})(G1,G1.exports);var mq=G1.exports,q1={exports:{}};q1.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",s=1,i=2,o=9007199254740991,l="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",f="[object Error]",g="[object Function]",x="[object GeneratorFunction]",m="[object Map]",p="[object Number]",b="[object Null]",v="[object Object]",y="[object Promise]",w="[object Proxy]",k="[object RegExp]",j="[object Set]",_="[object String]",S="[object Symbol]",A="[object Undefined]",T="[object WeakMap]",E="[object ArrayBuffer]",C="[object DataView]",z="[object Float32Array]",M="[object Float64Array]",F="[object Int8Array]",D="[object Int16Array]",L="[object Int32Array]",K="[object Uint8Array]",$="[object Uint8ClampedArray]",R="[object Uint16Array]",Y="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,V={};V[z]=V[M]=V[F]=V[D]=V[L]=V[K]=V[$]=V[R]=V[Y]=!0,V[l]=V[c]=V[E]=V[u]=V[C]=V[h]=V[f]=V[g]=V[m]=V[p]=V[v]=V[k]=V[j]=V[_]=V[T]=!1;var se=typeof Fe=="object"&&Fe&&Fe.Object===Object&&Fe,Ne=typeof self=="object"&&self&&self.Object===Object&&self,ie=se||Ne||Function("return this")(),q=e&&!e.nodeType&&e,H=q&&!0&&t&&!t.nodeType&&t,Z=H&&H.exports===q,te=Z&&se.process,ge=function(){try{return te&&te.binding&&te.binding("util")}catch{}}(),Ce=ge&&ge.isTypedArray;function Le(P,J){for(var ue=-1,Ie=P==null?0:P.length,Rt=0,yt=[];++ue<Ie;){var hr=P[ue];J(hr,ue,P)&&(yt[Rt++]=hr)}return yt}function He(P,J){for(var ue=-1,Ie=J.length,Rt=P.length;++ue<Ie;)P[Rt+ue]=J[ue];return P}function le(P,J){for(var ue=-1,Ie=P==null?0:P.length;++ue<Ie;)if(J(P[ue],ue,P))return!0;return!1}function Re(P,J){for(var ue=-1,Ie=Array(P);++ue<P;)Ie[ue]=J(ue);return Ie}function Ze(P){return function(J){return P(J)}}function lt(P,J){return P.has(J)}function rt(P,J){return P==null?void 0:P[J]}function ne(P){var J=-1,ue=Array(P.size);return P.forEach(function(Ie,Rt){ue[++J]=[Rt,Ie]}),ue}function pe(P,J){return function(ue){return P(J(ue))}}function Ue(P){var J=-1,ue=Array(P.size);return P.forEach(function(Ie){ue[++J]=Ie}),ue}var kt=Array.prototype,Se=Function.prototype,me=Object.prototype,$e=ie["__core-js_shared__"],Ge=Se.toString,Qe=me.hasOwnProperty,Lt=function(){var P=/[^.]+$/.exec($e&&$e.keys&&$e.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),wt=me.toString,Nt=RegExp("^"+Ge.call(Qe).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=Z?ie.Buffer:void 0,Xe=ie.Symbol,W=ie.Uint8Array,we=me.propertyIsEnumerable,ve=kt.splice,Te=Xe?Xe.toStringTag:void 0,oe=Object.getOwnPropertySymbols,Ee=he?he.isBuffer:void 0,G=pe(Object.keys,Object),Oe=pr(ie,"DataView"),it=pr(ie,"Map"),I=pr(ie,"Promise"),je=pr(ie,"Set"),ke=pr(ie,"WeakMap"),X=pr(Object,"create"),ce=Qn(Oe),_e=Qn(it),ot=Qn(I),et=Qn(je),at=Qn(ke),Ft=Xe?Xe.prototype:void 0,ca=Ft?Ft.valueOf:void 0;function Bt(P){var J=-1,ue=P==null?0:P.length;for(this.clear();++J<ue;){var Ie=P[J];this.set(Ie[0],Ie[1])}}function Ht(){this.__data__=X?X(null):{},this.size=0}function Xr(P){var J=this.has(P)&&delete this.__data__[P];return this.size-=J?1:0,J}function hn(P){var J=this.__data__;if(X){var ue=J[P];return ue===n?void 0:ue}return Qe.call(J,P)?J[P]:void 0}function _n(P){var J=this.__data__;return X?J[P]!==void 0:Qe.call(J,P)}function fo(P,J){var ue=this.__data__;return this.size+=this.has(P)?0:1,ue[P]=X&&J===void 0?n:J,this}Bt.prototype.clear=Ht,Bt.prototype.delete=Xr,Bt.prototype.get=hn,Bt.prototype.has=_n,Bt.prototype.set=fo;function ln(P){var J=-1,ue=P==null?0:P.length;for(this.clear();++J<ue;){var Ie=P[J];this.set(Ie[0],Ie[1])}}function $r(){this.__data__=[],this.size=0}function Zn(P){var J=this.__data__,ue=re(J,P);if(ue<0)return!1;var Ie=J.length-1;return ue==Ie?J.pop():ve.call(J,ue,1),--this.size,!0}function cn(P){var J=this.__data__,ue=re(J,P);return ue<0?void 0:J[ue][1]}function Ra(P){return re(this.__data__,P)>-1}function ja(P,J){var ue=this.__data__,Ie=re(ue,P);return Ie<0?(++this.size,ue.push([P,J])):ue[Ie][1]=J,this}ln.prototype.clear=$r,ln.prototype.delete=Zn,ln.prototype.get=cn,ln.prototype.has=Ra,ln.prototype.set=ja;function $n(P){var J=-1,ue=P==null?0:P.length;for(this.clear();++J<ue;){var Ie=P[J];this.set(Ie[0],Ie[1])}}function Rm(){this.size=0,this.__data__={hash:new Bt,map:new(it||ln),string:new Bt}}function Ih(P){var J=ur(this,P).delete(P);return this.size-=J?1:0,J}function hl(P){return ur(this,P).get(P)}function Dh(P){return ur(this,P).has(P)}function go(P,J){var ue=ur(this,P),Ie=ue.size;return ue.set(P,J),this.size+=ue.size==Ie?0:1,this}$n.prototype.clear=Rm,$n.prototype.delete=Ih,$n.prototype.get=hl,$n.prototype.has=Dh,$n.prototype.set=go;function kc(P){var J=-1,ue=P==null?0:P.length;for(this.__data__=new $n;++J<ue;)this.add(P[J])}function fl(P){return this.__data__.set(P,n),this}function mo(P){return this.__data__.has(P)}kc.prototype.add=kc.prototype.push=fl,kc.prototype.has=mo;function Gs(P){var J=this.__data__=new ln(P);this.size=J.size}function Xd(){this.__data__=new ln,this.size=0}function Yd(P){var J=this.__data__,ue=J.delete(P);return this.size=J.size,ue}function Pm(P){return this.__data__.get(P)}function zm(P){return this.__data__.has(P)}function Q(P,J){var ue=this.__data__;if(ue instanceof ln){var Ie=ue.__data__;if(!it||Ie.length<r-1)return Ie.push([P,J]),this.size=++ue.size,this;ue=this.__data__=new $n(Ie)}return ue.set(P,J),this.size=ue.size,this}Gs.prototype.clear=Xd,Gs.prototype.delete=Yd,Gs.prototype.get=Pm,Gs.prototype.has=zm,Gs.prototype.set=Q;function de(P,J){var ue=Lh(P),Ie=!ue&&Qb(P),Rt=!ue&&!Ie&&Rh(P),yt=!ue&&!Ie&&!Rt&&ty(P),hr=ue||Ie||Rt||yt,cr=hr?Re(P.length,String):[],Sn=cr.length;for(var kr in P)Qe.call(P,kr)&&!(hr&&(kr=="length"||Rt&&(kr=="offset"||kr=="parent")||yt&&(kr=="buffer"||kr=="byteLength"||kr=="byteOffset")||$m(kr,Sn)))&&cr.push(kr);return cr}function re(P,J){for(var ue=P.length;ue--;)if(Zb(P[ue][0],J))return ue;return-1}function be(P,J,ue){var Ie=J(P);return Lh(P)?Ie:He(Ie,ue(P))}function ye(P){return P==null?P===void 0?A:b:Te&&Te in Object(P)?fn(P):Mh(P)}function xe(P){return po(P)&&ye(P)==l}function Me(P,J,ue,Ie,Rt){return P===J?!0:P==null||J==null||!po(P)&&!po(J)?P!==P&&J!==J:Be(P,J,ue,Ie,Me,Rt)}function Be(P,J,ue,Ie,Rt,yt){var hr=Lh(P),cr=Lh(J),Sn=hr?c:Za(P),kr=cr?c:Za(J);Sn=Sn==l?v:Sn,kr=kr==l?v:kr;var Na=Sn==v,Qa=kr==v,Fn=Sn==kr;if(Fn&&Rh(P)){if(!Rh(J))return!1;hr=!0,Na=!1}if(Fn&&!Na)return yt||(yt=new Gs),hr||ty(P)?ct(P,J,ue,Ie,Rt,yt):Ut(P,J,Sn,ue,Ie,Rt,yt);if(!(ue&s)){var _a=Na&&Qe.call(P,"__wrapped__"),da=Qa&&Qe.call(J,"__wrapped__");if(_a||da){var wc=_a?P.value():P,ml=da?J.value():J;return yt||(yt=new Gs),Rt(wc,ml,ue,Ie,yt)}}return Fn?(yt||(yt=new Gs),lr(P,J,ue,Ie,Rt,yt)):!1}function Ke(P){if(!ey(P)||Yb(P))return!1;var J=Jb(P)?Nt:B;return J.test(Qn(P))}function qe(P){return po(P)&&Um(P.length)&&!!V[ye(P)]}function Ye(P){if(!Fm(P))return G(P);var J=[];for(var ue in Object(P))Qe.call(P,ue)&&ue!="constructor"&&J.push(ue);return J}function ct(P,J,ue,Ie,Rt,yt){var hr=ue&s,cr=P.length,Sn=J.length;if(cr!=Sn&&!(hr&&Sn>cr))return!1;var kr=yt.get(P);if(kr&&yt.get(J))return kr==J;var Na=-1,Qa=!0,Fn=ue&i?new kc:void 0;for(yt.set(P,J),yt.set(J,P);++Na<cr;){var _a=P[Na],da=J[Na];if(Ie)var wc=hr?Ie(da,_a,Na,J,P,yt):Ie(_a,da,Na,P,J,yt);if(wc!==void 0){if(wc)continue;Qa=!1;break}if(Fn){if(!le(J,function(ml,Qd){if(!lt(Fn,Qd)&&(_a===ml||Rt(_a,ml,ue,Ie,yt)))return Fn.push(Qd)})){Qa=!1;break}}else if(!(_a===da||Rt(_a,da,ue,Ie,yt))){Qa=!1;break}}return yt.delete(P),yt.delete(J),Qa}function Ut(P,J,ue,Ie,Rt,yt,hr){switch(ue){case C:if(P.byteLength!=J.byteLength||P.byteOffset!=J.byteOffset)return!1;P=P.buffer,J=J.buffer;case E:return!(P.byteLength!=J.byteLength||!yt(new W(P),new W(J)));case u:case h:case p:return Zb(+P,+J);case f:return P.name==J.name&&P.message==J.message;case k:case _:return P==J+"";case m:var cr=ne;case j:var Sn=Ie&s;if(cr||(cr=Ue),P.size!=J.size&&!Sn)return!1;var kr=hr.get(P);if(kr)return kr==J;Ie|=i,hr.set(P,J);var Na=ct(cr(P),cr(J),Ie,Rt,yt,hr);return hr.delete(P),Na;case S:if(ca)return ca.call(P)==ca.call(J)}return!1}function lr(P,J,ue,Ie,Rt,yt){var hr=ue&s,cr=Xt(P),Sn=cr.length,kr=Xt(J),Na=kr.length;if(Sn!=Na&&!hr)return!1;for(var Qa=Sn;Qa--;){var Fn=cr[Qa];if(!(hr?Fn in J:Qe.call(J,Fn)))return!1}var _a=yt.get(P);if(_a&&yt.get(J))return _a==J;var da=!0;yt.set(P,J),yt.set(J,P);for(var wc=hr;++Qa<Sn;){Fn=cr[Qa];var ml=P[Fn],Qd=J[Fn];if(Ie)var zI=hr?Ie(Qd,ml,Fn,J,P,yt):Ie(ml,Qd,Fn,P,J,yt);if(!(zI===void 0?ml===Qd||Rt(ml,Qd,ue,Ie,yt):zI)){da=!1;break}wc||(wc=Fn=="constructor")}if(da&&!wc){var ry=P.constructor,ny=J.constructor;ry!=ny&&"constructor"in P&&"constructor"in J&&!(typeof ry=="function"&&ry instanceof ry&&typeof ny=="function"&&ny instanceof ny)&&(da=!1)}return yt.delete(P),yt.delete(J),da}function Xt(P){return be(P,Km,gl)}function ur(P,J){var ue=P.__data__;return Zd(J)?ue[typeof J=="string"?"string":"hash"]:ue.map}function pr(P,J){var ue=rt(P,J);return Ke(ue)?ue:void 0}function fn(P){var J=Qe.call(P,Te),ue=P[Te];try{P[Te]=void 0;var Ie=!0}catch{}var Rt=wt.call(P);return Ie&&(J?P[Te]=ue:delete P[Te]),Rt}var gl=oe?function(P){return P==null?[]:(P=Object(P),Le(oe(P),function(J){return we.call(P,J)}))}:qj,Za=ye;(Oe&&Za(new Oe(new ArrayBuffer(1)))!=C||it&&Za(new it)!=m||I&&Za(I.resolve())!=y||je&&Za(new je)!=j||ke&&Za(new ke)!=T)&&(Za=function(P){var J=ye(P),ue=J==v?P.constructor:void 0,Ie=ue?Qn(ue):"";if(Ie)switch(Ie){case ce:return C;case _e:return m;case ot:return y;case et:return j;case at:return T}return J});function $m(P,J){return J=J??o,!!J&&(typeof P=="number"||U.test(P))&&P>-1&&P%1==0&&P<J}function Zd(P){var J=typeof P;return J=="string"||J=="number"||J=="symbol"||J=="boolean"?P!=="__proto__":P===null}function Yb(P){return!!Lt&&Lt in P}function Fm(P){var J=P&&P.constructor,ue=typeof J=="function"&&J.prototype||me;return P===ue}function Mh(P){return wt.call(P)}function Qn(P){if(P!=null){try{return Ge.call(P)}catch{}try{return P+""}catch{}}return""}function Zb(P,J){return P===J||P!==P&&J!==J}var Qb=xe(function(){return arguments}())?xe:function(P){return po(P)&&Qe.call(P,"callee")&&!we.call(P,"callee")},Lh=Array.isArray;function Bm(P){return P!=null&&Um(P.length)&&!Jb(P)}var Rh=Ee||Vj;function Gj(P,J){return Me(P,J)}function Jb(P){if(!ey(P))return!1;var J=ye(P);return J==g||J==x||J==d||J==w}function Um(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=o}function ey(P){var J=typeof P;return P!=null&&(J=="object"||J=="function")}function po(P){return P!=null&&typeof P=="object"}var ty=Ce?Ze(Ce):qe;function Km(P){return Bm(P)?de(P):Ye(P)}function qj(){return[]}function Vj(){return!1}t.exports=Gj})(q1,q1.exports);var pq=q1.exports,K5={};Object.defineProperty(K5,"__esModule",{value:!0});const hke=mq,fke=pq;var gA;(function(t){function e(i={},o={},l=!1){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});let c=hke(o);l||(c=Object.keys(c).reduce((d,u)=>(c[u]!=null&&(d[u]=c[u]),d),{}));for(const d in i)i[d]!==void 0&&o[d]===void 0&&(c[d]=i[d]);return Object.keys(c).length>0?c:void 0}t.compose=e;function r(i={},o={}){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});const l=Object.keys(i).concat(Object.keys(o)).reduce((c,d)=>(fke(i[d],o[d])||(c[d]=o[d]===void 0?null:o[d]),c),{});return Object.keys(l).length>0?l:void 0}t.diff=r;function n(i={},o={}){i=i||{};const l=Object.keys(o).reduce((c,d)=>(o[d]!==i[d]&&i[d]!==void 0&&(c[d]=o[d]),c),{});return Object.keys(i).reduce((c,d)=>(i[d]!==o[d]&&o[d]===void 0&&(c[d]=null),c),l)}t.invert=n;function s(i,o,l=!1){if(typeof i!="object")return o;if(typeof o!="object")return;if(!l)return o;const c=Object.keys(o).reduce((d,u)=>(i[u]===void 0&&(d[u]=o[u]),d),{});return Object.keys(c).length>0?c:void 0}t.transform=s})(gA||(gA={}));K5.default=gA;var Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});var mA;(function(t){function e(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}t.length=e})(mA||(mA={}));Sw.default=mA;var G5={};Object.defineProperty(G5,"__esModule",{value:!0});const QM=Sw;class gke{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const r=this.ops[this.index];if(r){const n=this.offset,s=QM.default.length(r);if(e>=s-n?(e=s-n,this.index+=1,this.offset=0):this.offset+=e,typeof r.delete=="number")return{delete:e};{const i={};return r.attributes&&(i.attributes=r.attributes),typeof r.retain=="number"?i.retain=e:typeof r.retain=="object"&&r.retain!==null?i.retain=r.retain:typeof r.insert=="string"?i.insert=r.insert.substr(n,e):i.insert=r.insert,i}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?QM.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,r=this.index,n=this.next(),s=this.ops.slice(this.index);return this.offset=e,this.index=r,[n].concat(s)}}else return[]}}G5.default=gke;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const r=uke,n=mq,s=pq,i=K5;e.AttributeMap=i.default;const o=Sw;e.Op=o.default;const l=G5;e.OpIterator=l.default;const c="\0",d=(h,f)=>{if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);const g=Object.keys(h)[0];if(!g||g!==Object.keys(f)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(f)[0]}`);return[g,h[g],f[g]]};class u{constructor(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}static registerEmbed(f,g){this.handlers[f]=g}static unregisterEmbed(f){delete this.handlers[f]}static getHandler(f){const g=this.handlers[f];if(!g)throw new Error(`no handlers for embed type "${f}"`);return g}insert(f,g){const x={};return typeof f=="string"&&f.length===0?this:(x.insert=f,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x))}delete(f){return f<=0?this:this.push({delete:f})}retain(f,g){if(typeof f=="number"&&f<=0)return this;const x={retain:f};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x)}push(f){let g=this.ops.length,x=this.ops[g-1];if(f=n(f),typeof x=="object"){if(typeof f.delete=="number"&&typeof x.delete=="number")return this.ops[g-1]={delete:x.delete+f.delete},this;if(typeof x.delete=="number"&&f.insert!=null&&(g-=1,x=this.ops[g-1],typeof x!="object"))return this.ops.unshift(f),this;if(s(f.attributes,x.attributes)){if(typeof f.insert=="string"&&typeof x.insert=="string")return this.ops[g-1]={insert:x.insert+f.insert},typeof f.attributes=="object"&&(this.ops[g-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof x.retain=="number")return this.ops[g-1]={retain:x.retain+f.retain},typeof f.attributes=="object"&&(this.ops[g-1].attributes=f.attributes),this}}return g===this.ops.length?this.ops.push(f):this.ops.splice(g,0,f),this}chop(){const f=this.ops[this.ops.length-1];return f&&typeof f.retain=="number"&&!f.attributes&&this.ops.pop(),this}filter(f){return this.ops.filter(f)}forEach(f){this.ops.forEach(f)}map(f){return this.ops.map(f)}partition(f){const g=[],x=[];return this.forEach(m=>{(f(m)?g:x).push(m)}),[g,x]}reduce(f,g){return this.ops.reduce(f,g)}changeLength(){return this.reduce((f,g)=>g.insert?f+o.default.length(g):g.delete?f-g.delete:f,0)}length(){return this.reduce((f,g)=>f+o.default.length(g),0)}slice(f=0,g=1/0){const x=[],m=new l.default(this.ops);let p=0;for(;p<g&&m.hasNext();){let b;p<f?b=m.next(f-p):(b=m.next(g-p),x.push(b)),p+=o.default.length(b)}return new u(x)}compose(f){const g=new l.default(this.ops),x=new l.default(f.ops),m=[],p=x.peek();if(p!=null&&typeof p.retain=="number"&&p.attributes==null){let v=p.retain;for(;g.peekType()==="insert"&&g.peekLength()<=v;)v-=g.peekLength(),m.push(g.next());p.retain-v>0&&x.next(p.retain-v)}const b=new u(m);for(;g.hasNext()||x.hasNext();)if(x.peekType()==="insert")b.push(x.next());else if(g.peekType()==="delete")b.push(g.next());else{const v=Math.min(g.peekLength(),x.peekLength()),y=g.next(v),w=x.next(v);if(w.retain){const k={};if(typeof y.retain=="number")k.retain=typeof w.retain=="number"?v:w.retain;else if(typeof w.retain=="number")y.retain==null?k.insert=y.insert:k.retain=y.retain;else{const _=y.retain==null?"insert":"retain",[S,A,T]=d(y[_],w.retain),E=u.getHandler(S);k[_]={[S]:E.compose(A,T,_==="retain")}}const j=i.default.compose(y.attributes,w.attributes,typeof y.retain=="number");if(j&&(k.attributes=j),b.push(k),!x.hasNext()&&s(b.ops[b.ops.length-1],k)){const _=new u(g.rest());return b.concat(_).chop()}}else typeof w.delete=="number"&&(typeof y.retain=="number"||typeof y.retain=="object"&&y.retain!==null)&&b.push(w)}return b.chop()}concat(f){const g=new u(this.ops.slice());return f.ops.length>0&&(g.push(f.ops[0]),g.ops=g.ops.concat(f.ops.slice(1))),g}diff(f,g){if(this.ops===f.ops)return new u;const x=[this,f].map(y=>y.map(w=>{if(w.insert!=null)return typeof w.insert=="string"?w.insert:c;const k=y===f?"on":"with";throw new Error("diff() called "+k+" non-document")}).join("")),m=new u,p=r(x[0],x[1],g,!0),b=new l.default(this.ops),v=new l.default(f.ops);return p.forEach(y=>{let w=y[1].length;for(;w>0;){let k=0;switch(y[0]){case r.INSERT:k=Math.min(v.peekLength(),w),m.push(v.next(k));break;case r.DELETE:k=Math.min(w,b.peekLength()),b.next(k),m.delete(k);break;case r.EQUAL:k=Math.min(b.peekLength(),v.peekLength(),w);const j=b.next(k),_=v.next(k);s(j.insert,_.insert)?m.retain(k,i.default.diff(j.attributes,_.attributes)):m.push(_).delete(k);break}w-=k}}),m.chop()}eachLine(f,g=`
`){const x=new l.default(this.ops);let m=new u,p=0;for(;x.hasNext();){if(x.peekType()!=="insert")return;const b=x.peek(),v=o.default.length(b)-x.peekLength(),y=typeof b.insert=="string"?b.insert.indexOf(g,v)-v:-1;if(y<0)m.push(x.next());else if(y>0)m.push(x.next(y));else{if(f(m,x.next(1).attributes||{},p)===!1)return;p+=1,m=new u}}m.length()>0&&f(m,{},p)}invert(f){const g=new u;return this.reduce((x,m)=>{if(m.insert)g.delete(o.default.length(m));else{if(typeof m.retain=="number"&&m.attributes==null)return g.retain(m.retain),x+m.retain;if(m.delete||typeof m.retain=="number"){const p=m.delete||m.retain;return f.slice(x,x+p).forEach(v=>{m.delete?g.push(v):m.retain&&m.attributes&&g.retain(o.default.length(v),i.default.invert(m.attributes,v.attributes))}),x+p}else if(typeof m.retain=="object"&&m.retain!==null){const p=f.slice(x,x+1),b=new l.default(p.ops).next(),[v,y,w]=d(m.retain,b.insert),k=u.getHandler(v);return g.retain({[v]:k.invert(y,w)},i.default.invert(m.attributes,b.attributes)),x+1}}return x},0),g.chop()}transform(f,g=!1){if(g=!!g,typeof f=="number")return this.transformPosition(f,g);const x=f,m=new l.default(this.ops),p=new l.default(x.ops),b=new u;for(;m.hasNext()||p.hasNext();)if(m.peekType()==="insert"&&(g||p.peekType()!=="insert"))b.retain(o.default.length(m.next()));else if(p.peekType()==="insert")b.push(p.next());else{const v=Math.min(m.peekLength(),p.peekLength()),y=m.next(v),w=p.next(v);if(y.delete)continue;if(w.delete)b.push(w);else{const k=y.retain,j=w.retain;let _=typeof j=="object"&&j!==null?j:v;if(typeof k=="object"&&k!==null&&typeof j=="object"&&j!==null){const S=Object.keys(k)[0];if(S===Object.keys(j)[0]){const A=u.getHandler(S);A&&(_={[S]:A.transform(k[S],j[S],g)})}}b.retain(_,i.default.transform(y.attributes,w.attributes,g))}}return b.chop()}transformPosition(f,g=!1){g=!!g;const x=new l.default(this.ops);let m=0;for(;x.hasNext()&&m<=f;){const p=x.peekLength(),b=x.peekType();if(x.next(),b==="delete"){f-=Math.min(p,f-m);continue}else b==="insert"&&(m<f||!g)&&(f+=p);m+=p}return f}}u.Op=o.default,u.OpIterator=l.default,u.AttributeMap=i.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u})(fA,fA.exports);var ui=fA.exports;const mt=Vt(ui);class co extends Ks{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}co.blotName="break";co.tagName="BR";let ro=class extends K1{};const mke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Aw(t){return t.replace(/[&<>"']/g,e=>mke[e])}const yo=class yo extends $5{static compare(e,r){const n=yo.order.indexOf(e),s=yo.order.indexOf(r);return n>=0||s>=0?n-s:e===r?0:e<r?-1:1}formatAt(e,r,n,s){if(yo.compare(this.statics.blotName,n)<0&&this.scroll.query(n,pt.BLOT)){const i=this.isolate(e,r);s&&i.wrap(n,s)}else super.formatAt(e,r,n,s)}optimize(e){if(super.optimize(e),this.parent instanceof yo&&yo.compare(this.statics.blotName,this.parent.statics.blotName)>0){const r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}};st(yo,"allowedChildren",[yo,co,Ks,ro]),st(yo,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let el=yo;const JM=1;class ka extends J0{constructor(){super(...arguments);st(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=xq(this)),this.cache.delta}deleteAt(r,n){super.deleteAt(r,n),this.cache={}}formatAt(r,n,s,i){n<=0||(this.scroll.query(s,pt.BLOCK)?r+n===this.length()&&this.format(s,i):super.formatAt(r,Math.min(n,this.length()-r-1),s,i),this.cache={})}insertAt(r,n,s){if(s!=null){super.insertAt(r,n,s),this.cache={};return}if(n.length===0)return;const i=n.split(`
`),o=i.shift();o.length>0&&(r<this.length()-1||this.children.tail==null?super.insertAt(Math.min(r,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let l=this;i.reduce((c,d)=>(l=l.split(c,!0),l.insertAt(0,d),d.length),r+o.length)}insertBefore(r,n){const{head:s}=this.children;super.insertBefore(r,n),s instanceof co&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+JM),this.cache.length}moveChildren(r,n){super.moveChildren(r,n),this.cache={}}optimize(r){super.optimize(r),this.cache={}}path(r){return super.path(r,!0)}removeChild(r){super.removeChild(r),this.cache={}}split(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(r===0||r>=this.length()-JM)){const i=this.clone();return r===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const s=super.split(r,n);return this.cache={},s}}ka.blotName="block";ka.tagName="P";ka.defaultChild=co;ka.allowedChildren=[co,el,Ks,ro];class ii extends Ks{attach(){super.attach(),this.attributes=new ww(this.domNode)}delta(){return new mt().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,r){const n=this.scroll.query(e,pt.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,r)}formatAt(e,r,n,s){this.format(n,s)}insertAt(e,r,n){if(n!=null){super.insertAt(e,r,n);return}const s=r.split(`
`),i=s.pop(),o=s.map(c=>{const d=this.scroll.create(ka.blotName);return d.insertAt(0,c),d}),l=this.split(e);o.forEach(c=>{this.parent.insertBefore(c,l)}),i&&this.parent.insertBefore(this.scroll.create("text",i),l)}}ii.scope=pt.BLOCK_BLOT;function xq(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Ta).reduce((r,n)=>n.length()===0?r:r.insert(n.value(),ei(n,{},e)),new mt).insert(`
`,ei(t))}function ei(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},r&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:ei(t.parent,e,r)}var za;let Ew=(za=class extends Ks{static value(){}constructor(e,r,n){super(e,r),this.selection=n,this.textNode=document.createTextNode(za.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,r){if(this.savedLength!==0){super.format(e,r);return}let n=this,s=0;for(;n!=null&&n.statics.scope!==pt.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=za.CONTENTS.length,n.optimize(),n.formatAt(s,za.CONTENTS.length,e,r),this.savedLength=0)}index(e,r){return e===this.textNode?0:super.index(e,r)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const r=this.prev instanceof ro?this.prev:null,n=r?r.length():0,s=this.next instanceof ro?this.next:null,i=s?s.text:"",{textNode:o}=this,l=o.data.split(za.CONTENTS).join("");o.data=za.CONTENTS;let c;if(r)c=r,(l||s)&&(r.insertAt(r.length(),l+i),s&&s.remove());else if(s)c=s,s.insertAt(0,l);else{const d=document.createTextNode(l);c=this.scroll.create(d),this.parent.insertBefore(c,this)}if(this.remove(),e){const d=(f,g)=>r&&f===r.domNode?g:f===o?n+g-1:s&&f===s.domNode?n+l.length+g:null,u=d(e.start.node,e.start.offset),h=d(e.end.node,e.end.offset);if(u!==null&&h!==null)return{startNode:c.domNode,startOffset:u,endNode:c.domNode,endOffset:h}}return null}update(e,r){if(e.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(r.range=n)}}optimize(e){super.optimize(e);let{parent:r}=this;for(;r;){if(r.domNode.tagName==="A"){this.savedLength=za.CONTENTS.length,r.isolate(this.offset(r),this.length()).unwrap(),this.savedLength=0;break}r=r.parent}}value(){return""}},st(za,"blotName","cursor"),st(za,"className","ql-cursor"),st(za,"tagName","span"),st(za,"CONTENTS","\uFEFF"),za);var bq={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new s(u,h||c,f),x=r?r+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],g]:c._events[x].push(g):(c._events[x]=g,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)e.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,g=h.length,x=new Array(g);f<g;f++)x[f]=h[f].fn;return x},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,g,x){var m=r?r+d:d;if(!this._events[m])return!1;var p=this._events[m],b=arguments.length,v,y;if(p.fn){switch(p.once&&this.removeListener(d,p.fn,void 0,!0),b){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,u),!0;case 3:return p.fn.call(p.context,u,h),!0;case 4:return p.fn.call(p.context,u,h,f),!0;case 5:return p.fn.call(p.context,u,h,f,g),!0;case 6:return p.fn.call(p.context,u,h,f,g,x),!0}for(y=1,v=new Array(b-1);y<b;y++)v[y-1]=arguments[y];p.fn.apply(p.context,v)}else{var w=p.length,k;for(y=0;y<w;y++)switch(p[y].once&&this.removeListener(d,p[y].fn,void 0,!0),b){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,u);break;case 3:p[y].fn.call(p[y].context,u,h);break;case 4:p[y].fn.call(p[y].context,u,h,f);break;default:if(!v)for(k=1,v=new Array(b-1);k<b;k++)v[k-1]=arguments[k];p[y].fn.apply(p[y].context,v)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var g=r?r+d:d;if(!this._events[g])return this;if(!u)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===u&&(!f||x.once)&&(!h||x.context===h)&&o(this,g);else{for(var m=0,p=[],b=x.length;m<b;m++)(x[m].fn!==u||f&&!x[m].once||h&&x[m].context!==h)&&p.push(x[m]);p.length?this._events[g]=p.length===1?p[0]:p:o(this,g)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(bq);var pke=bq.exports;const xke=Vt(pke),pA=new WeakMap,xA=["error","warn","log","info"];let bA="warn";function yq(t){if(bA&&xA.indexOf(t)<=xA.indexOf(bA)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];console[t](...r)}}function pc(t){return xA.reduce((e,r)=>(e[r]=yq.bind(console,r,t),e),{})}pc.level=t=>{bA=t};yq.level=pc.level;const QN=pc("quill:events"),bke=["selectionchange","mousedown","mouseup","click"];bke.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=pA.get(s);i&&i.emitter&&i.emitter.handleDOM(...r)})})});class ut extends xke{constructor(){super(),this.domListeners={},this.on("error",QN.error)}emit(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return QN.log.call(QN,...r),super.emit(...r)}handleDOM(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];(this.domListeners[e.type]||[]).forEach(i=>{let{node:o,handler:l}=i;(e.target===o||o.contains(e.target))&&l(e,...n)})}listenDOM(e,r,n){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:r,handler:n})}}st(ut,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),st(ut,"sources",{API:"api",SILENT:"silent",USER:"user"});const JN=pc("quill:selection");let Yu=class{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=r}};class yke{constructor(e,r){this.emitter=r,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Yu(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,ut.sources.USER),1)}),this.emitter.on(ut.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(ut.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const o=i.some(l=>l.type==="characterData"||l.type==="childList"||l.type==="attributes"&&l.target===this.root);this.update(o?ut.sources.SILENT:s)}catch{}})}),this.emitter.on(ut.events.SCROLL_OPTIMIZE,(n,s)=>{if(s.range){const{startNode:i,startOffset:o,endNode:l,endOffset:c}=s.range;this.setNativeRange(i,o,l,c),this.update(ut.sources.SILENT)}}),this.update(ut.sources.SILENT)}handleComposition(){this.emitter.on(ut.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(ut.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(ut.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,r){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(e,pt.BLOCK))){if(n.start.node!==this.cursor.textNode){const s=this.scroll.find(n.start.node,!1);if(s==null)return;if(s instanceof Ta){const i=s.split(n.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,r),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();e=Math.min(e,n-1),r=Math.min(e+r,n-1)-e;let s,[i,o]=this.scroll.leaf(e);if(i==null)return null;if(r>0&&o===i.length()){const[u]=this.scroll.leaf(e+1);if(u){const[h]=this.scroll.line(e),[f]=this.scroll.line(e+1);h===f&&(i=u,o=0)}}[s,o]=i.position(o,!0);const l=document.createRange();if(r>0)return l.setStart(s,o),[i,o]=this.scroll.leaf(e+r),i==null?null:([s,o]=i.position(o,!0),l.setEnd(s,o),l.getBoundingClientRect());let c="left",d;if(s instanceof Text){if(!s.data.length)return null;o<s.data.length?(l.setStart(s,o),l.setEnd(s,o+1)):(l.setStart(s,o-1),l.setEnd(s,o),c="right"),d=l.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;d=i.domNode.getBoundingClientRect(),o>0&&(c="right")}return{bottom:d.top+d.height,height:d.height,left:d[c],right:d[c],top:d.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const r=e.getRangeAt(0);if(r==null)return null;const n=this.normalizeNative(r);return JN.info("getNativeRange",n),n}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const r=this.getNativeRange();return r==null?[null,null]:[this.normalizedToRange(r),r]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&e_(this.root,document.activeElement)}normalizedToRange(e){const r=[[e.start.node,e.start.offset]];e.native.collapsed||r.push([e.end.node,e.end.offset]);const n=r.map(o=>{const[l,c]=o,d=this.scroll.find(l,!0),u=d.offset(this.scroll);return c===0?u:d instanceof Ta?u+d.index(l,c):u+d.length()}),s=Math.min(Math.max(...n),this.scroll.length()-1),i=Math.min(s,...n);return new Yu(i,s-i)}normalizeNative(e){if(!e_(this.root,e.startContainer)||!e.collapsed&&!e_(this.root,e.endContainer))return null;const r={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[r.start,r.end].forEach(n=>{let{node:s,offset:i}=n;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;n.node=s,n.offset=i}),r}rangeToNative(e){const r=this.scroll.length(),n=(s,i)=>{s=Math.min(r-1,s);const[o,l]=this.scroll.leaf(s);return o?o.position(l,i):[null,-1]};return[...n(e.index,!1),...n(e.index+e.length,!0)]}setNativeRange(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(JN.info("setNativeRange",e,r,n,s),e!=null&&(this.root.parentNode==null||e.parentNode==null||n.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:l}=this.getNativeRange()||{};if(l==null||i||e!==l.startContainer||r!==l.startOffset||n!==l.endContainer||s!==l.endOffset){e instanceof Element&&e.tagName==="BR"&&(r=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),n instanceof Element&&n.tagName==="BR"&&(s=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const c=document.createRange();c.setStart(e,r),c.setEnd(n,s),o.removeAllRanges(),o.addRange(c)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ut.sources.API;if(typeof r=="string"&&(n=r,r=!1),JN.info("setRange",e),e!=null){const s=this.rangeToNative(e);this.setNativeRange(...s,r)}else this.setNativeRange(null);this.update(n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ut.sources.USER;const r=this.lastRange,[n,s]=this.getRange();if(this.lastRange=n,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!$c(r,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const i=[ut.events.SELECTION_CHANGE,Kf(this.lastRange),Kf(r),e];this.emitter.emit(ut.events.EDITOR_CHANGE,...i),e!==ut.sources.SILENT&&this.emitter.emit(...i)}}}function e_(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const vke=/^[ -~]*$/;class kke{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let r=this.scroll.length();this.scroll.batchStart();const n=eL(e),s=new mt;return jke(n.ops.slice()).reduce((o,l)=>{const c=ui.Op.length(l);let d=l.attributes||{},u=!1,h=!1;if(l.insert!=null){if(s.retain(c),typeof l.insert=="string"){const x=l.insert;h=!x.endsWith(`
`)&&(r<=o||!!this.scroll.descendant(ii,o)[0]),this.scroll.insertAt(o,x);const[m,p]=this.scroll.line(o);let b=pd({},ei(m));if(m instanceof ka){const[v]=m.descendant(Ta,p);v&&(b=pd(b,ei(v)))}d=ui.AttributeMap.diff(b,d)||{}}else if(typeof l.insert=="object"){const x=Object.keys(l.insert)[0];if(x==null)return o;const m=this.scroll.query(x,pt.INLINE)!=null;if(m)(r<=o||this.scroll.descendant(ii,o)[0])&&(h=!0);else if(o>0){const[p,b]=this.scroll.descendant(Ta,o-1);p instanceof ro?p.value()[b]!==`
`&&(u=!0):p instanceof Ks&&p.statics.scope===pt.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(o,x,l.insert[x]),m){const[p]=this.scroll.descendant(Ta,o);if(p){const b=pd({},ei(p));d=ui.AttributeMap.diff(b,d)||{}}}}r+=c}else if(s.push(l),l.retain!==null&&typeof l.retain=="object"){const x=Object.keys(l.retain)[0];if(x==null)return o;this.scroll.updateEmbedAt(o,x,l.retain[x])}Object.keys(d).forEach(x=>{this.scroll.formatAt(o,c,x,d[x])});const f=u?1:0,g=h?1:0;return r+=f+g,s.retain(f),s.delete(g),o+c+f+g},0),s.reduce((o,l)=>typeof l.delete=="number"?(this.scroll.deleteAt(o,l.delete),o):o+ui.Op.length(l),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(e,r){return this.scroll.deleteAt(e,r),this.update(new mt().retain(e).delete(r))}formatLine(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(i=>{this.scroll.lines(e,Math.max(r,1)).forEach(o=>{o.format(i,n[i])})}),this.scroll.optimize();const s=new mt().retain(e).retain(r,Kf(n));return this.update(s)}formatText(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(i=>{this.scroll.formatAt(e,r,i,n[i])});const s=new mt().retain(e).retain(r,Kf(n));return this.update(s)}getContents(e,r){return this.delta.slice(e,e+r)}getDelta(){return this.scroll.lines().reduce((e,r)=>e.concat(r.delta()),new mt)}getFormat(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],s=[];r===0?this.scroll.path(e).forEach(l=>{const[c]=l;c instanceof ka?n.push(c):c instanceof Ta&&s.push(c)}):(n=this.scroll.lines(e,r),s=this.scroll.descendants(Ta,e,r));const[i,o]=[n,s].map(l=>{const c=l.shift();if(c==null)return{};let d=ei(c);for(;Object.keys(d).length>0;){const u=l.shift();if(u==null)return d;d=wke(ei(u),d)}return d});return{...i,...o}}getHTML(e,r){const[n,s]=this.scroll.line(e);if(n){const i=n.length();return n.length()>=s+r&&!(s===0&&r===i)?tx(n,s,r,!0):tx(this.scroll,e,r,!0)}return""}getText(e,r){return this.getContents(e,r).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(e,r){const n=eL(r),s=new mt().retain(e).concat(n);return this.scroll.insertContents(e,n),this.update(s)}insertEmbed(e,r,n){return this.scroll.insertAt(e,r,n),this.update(new mt().retain(e).insert({[r]:n}))}insertText(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r=r.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,r),Object.keys(n).forEach(s=>{this.scroll.formatAt(e,r.length,s,n[s])}),this.update(new mt().retain(e).insert(r,Kf(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==ka.blotName)return!1;const r=e;return r.children.length>1?!1:r.children.head instanceof co}removeFormat(e,r){const n=this.getText(e,r),[s,i]=this.scroll.line(e+r);let o=0,l=new mt;s!=null&&(o=s.length()-i,l=s.delta().slice(i,i+o-1).insert(`
`));const d=this.getContents(e,r+o).diff(new mt().insert(n).concat(l)),u=new mt().retain(e).concat(d);return this.applyDelta(u)}update(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(r.length===1&&r[0].type==="characterData"&&r[0].target.data.match(vke)&&this.scroll.find(r[0].target)){const i=this.scroll.find(r[0].target),o=ei(i),l=i.offset(this.scroll),c=r[0].oldValue.replace(Ew.CONTENTS,""),d=new mt().insert(c),u=new mt().insert(i.value()),h=n&&{oldRange:tL(n.oldRange,-l),newRange:tL(n.newRange,-l)};e=new mt().retain(l).concat(d.diff(u,h)).reduce((g,x)=>x.insert?g.insert(x.insert,o):g.push(x),new mt),this.delta=s.compose(e)}else this.delta=this.getDelta(),(!e||!$c(s.compose(e),this.delta))&&(e=s.diff(this.delta,n));return e}}function sf(t,e,r){if(t.length===0){const[g]=t_(r.pop());return e<=0?`</li></${g}>`:`</li></${g}>${sf([],e-1,r)}`}const[{child:n,offset:s,length:i,indent:o,type:l},...c]=t,[d,u]=t_(l);if(o>e)return r.push(l),o===e+1?`<${d}><li${u}>${tx(n,s,i)}${sf(c,o,r)}`:`<${d}><li>${sf(t,e+1,r)}`;const h=r[r.length-1];if(o===e&&l===h)return`</li><li${u}>${tx(n,s,i)}${sf(c,o,r)}`;const[f]=t_(r.pop());return`</li></${f}>${sf(t,e-1,r)}`}function tx(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,r);if(t instanceof ro)return Aw(t.value().slice(e,e+r)).replaceAll(" ","&nbsp;");if(t instanceof Hi){if(t.statics.blotName==="list-container"){const d=[];return t.children.forEachAt(e,r,(u,h,f)=>{const g="formats"in u&&typeof u.formats=="function"?u.formats():{};d.push({child:u,offset:h,length:f,indent:g.indent||0,type:g.list})}),sf(d,-1,[])}const s=[];if(t.children.forEachAt(e,r,(d,u,h)=>{s.push(tx(d,u,h))}),n||t.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:o}=t.domNode,[l,c]=i.split(`>${o}<`);return l==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${c}`:`${l}>${s.join("")}<${c}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function wke(t,e){return Object.keys(e).reduce((r,n)=>{if(t[n]==null)return r;const s=e[n];return s===t[n]?r[n]=s:Array.isArray(s)?s.indexOf(t[n])<0?r[n]=s.concat([t[n]]):r[n]=s:r[n]=[s,t[n]],r},{})}function t_(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function eL(t){return t.reduce((e,r)=>{if(typeof r.insert=="string"){const n=r.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(n,r.attributes)}return e.push(r)},new mt)}function tL(t,e){let{index:r,length:n}=t;return new Yu(r+e,n)}function jke(t){const e=[];return t.forEach(r=>{typeof r.insert=="string"?r.insert.split(`
`).forEach((s,i)=>{i&&e.push({insert:`
`,attributes:r.attributes}),s&&e.push({insert:s,attributes:r.attributes})}):e.push(r)}),e}class uo{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=r}}st(uo,"DEFAULTS",{});const Ay="\uFEFF";class q5 extends Ks{constructor(e,r){super(e,r),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(Ay),this.rightGuard=document.createTextNode(Ay),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,r){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,r)}restore(e){let r=null,n;const s=e.data.split(Ay).join("");if(e===this.leftGuard)if(this.prev instanceof ro){const i=this.prev.length();this.prev.insertAt(i,s),r={startNode:this.prev.domNode,startOffset:i+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this),r={startNode:n,startOffset:s.length};else e===this.rightGuard&&(this.next instanceof ro?(this.next.insertAt(0,s),r={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this.next),r={startNode:n,startOffset:s.length}));return e.data=Ay,r}update(e,r){e.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const s=this.restore(n.target);s&&(r.range=s)}})}}class Nke{constructor(e,r){st(this,"isComposing",!1);this.scroll=e,this.emitter=r,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const r=e.target instanceof Node?this.scroll.find(e.target,!0):null;r&&!(r instanceof q5)&&(this.emitter.emit(ut.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(ut.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(ut.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(ut.events.COMPOSITION_END,e),this.isComposing=!1}}const b0=class b0{constructor(e,r){st(this,"modules",{});this.quill=e,this.options=r}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const r=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new r(this.quill,this.options.modules[e]||{}),this.modules[e]}};st(b0,"DEFAULTS",{modules:{}}),st(b0,"themes",{default:b0});let bg=b0;const _ke=t=>t.parentElement||t.getRootNode().host||null,Ske=t=>{const e=t.getBoundingClientRect(),r="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,n="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*r,bottom:e.top+t.clientHeight*n,left:e.left}},Ey=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},rL=(t,e,r,n,s,i)=>t<r&&e>n?0:t<r?-(r-t+s):e>n?e-t>n-r?t+s-r:e-n+i:0,Ake=(t,e)=>{var i,o,l;const r=t.ownerDocument;let n=e,s=t;for(;s;){const c=s===r.body,d=c?{top:0,right:((i=window.visualViewport)==null?void 0:i.width)??r.documentElement.clientWidth,bottom:((o=window.visualViewport)==null?void 0:o.height)??r.documentElement.clientHeight,left:0}:Ske(s),u=getComputedStyle(s),h=rL(n.left,n.right,d.left,d.right,Ey(u.scrollPaddingLeft),Ey(u.scrollPaddingRight)),f=rL(n.top,n.bottom,d.top,d.bottom,Ey(u.scrollPaddingTop),Ey(u.scrollPaddingBottom));if(h||f)if(c)(l=r.defaultView)==null||l.scrollBy(h,f);else{const{scrollLeft:g,scrollTop:x}=s;f&&(s.scrollTop+=f),h&&(s.scrollLeft+=h);const m=s.scrollLeft-g,p=s.scrollTop-x;n={left:n.left-m,top:n.top-p,right:n.right-m,bottom:n.bottom-p}}s=c||u.position==="fixed"?null:_ke(s)}},Eke=100,Cke=["block","break","cursor","inline","scroll","text"],Tke=(t,e,r)=>{const n=new xg;return Cke.forEach(s=>{const i=e.query(s);i&&n.register(i)}),t.forEach(s=>{let i=e.query(s);i||r.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;i;)if(n.register(i),i="blotName"in i?i.requiredContainer??null:null,o+=1,o>Eke){r.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),n},qf=pc("quill"),Cy=new xg;Hi.uiClass="ql-ui";const Mi=class Mi{static debug(e){e===!0&&(e="log"),pc.level(e)}static find(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return pA.get(e)||Cy.find(e,r)}static import(e){return this.imports[e]==null&&qf.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],r=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in e?e.attrName:e.blotName;typeof n=="string"?this.register(`formats/${n}`,e,r):Object.keys(e).forEach(s=>{this.register(s,e[s],r)})}else{const e=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!n&&qf.warn(`Overwriting ${e} with`,r),this.imports[e]=r,(e.startsWith("blots/")||e.startsWith("formats/"))&&r&&typeof r!="boolean"&&r.blotName!=="abstract"&&Cy.register(r),typeof r.register=="function"&&r.register(Cy)}}constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Oke(e,r),this.container=this.options.container,this.container==null){qf.error("Invalid Quill container",e);return}this.options.debug&&Mi.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",pA.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new ut;const s=F5.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new kke(this.scroll),this.selection=new yke(this.scroll,this.emitter),this.composition=new Nke(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(ut.events.EDITOR_CHANGE,o=>{o===ut.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(ut.events.SCROLL_UPDATE,(o,l)=>{const c=this.selection.lastRange,[d]=this.selection.getRange(),u=c&&d?{oldRange:c,newRange:d}:void 0;Ai.call(this,()=>this.editor.update(null,l,u),o)}),this.emitter.on(ut.events.SCROLL_EMBED_UPDATE,(o,l)=>{const c=this.selection.lastRange,[d]=this.selection.getRange(),u=c&&d?{oldRange:c,newRange:d}:void 0;Ai.call(this,()=>{const h=new mt().retain(o.offset(this)).retain({[o.statics.blotName]:l});return this.editor.update(h,[],u)},Mi.sources.USER)}),n){const o=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const n=e;e=document.createElement("div"),e.classList.add(n)}return this.container.insertBefore(e,r),e}blur(){this.selection.setRange(null)}deleteText(e,r,n){return[e,r,,n]=vl(e,r,n),Ai.call(this,()=>this.editor.deleteText(e,r),n,e,-1*r)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const r=e();return this.allowReadOnlyEdits=!1,r}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ut.sources.API;return Ai.call(this,()=>{const s=this.getSelection(!0);let i=new mt;if(s==null)return i;if(this.scroll.query(e,pt.BLOCK))i=this.editor.formatLine(s.index,s.length,{[e]:r});else{if(s.length===0)return this.selection.format(e,r),i;i=this.editor.formatText(s.index,s.length,{[e]:r})}return this.setSelection(s,ut.sources.SILENT),i},n)}formatLine(e,r,n,s,i){let o;return[e,r,o,i]=vl(e,r,n,s,i),Ai.call(this,()=>this.editor.formatLine(e,r,o),i,e,0)}formatText(e,r,n,s,i){let o;return[e,r,o,i]=vl(e,r,n,s,i),Ai.call(this,()=>this.editor.formatText(e,r,o),i,e,0)}getBounds(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof e=="number"?n=this.selection.getBounds(e,r):n=this.selection.getBounds(e.index,e.length),!n)return null;const s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,r]=vl(e,r),this.editor.getContents(e,r)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,r):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,r)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(r=r??this.getLength()-e),[e,r]=vl(e,r),this.editor.getHTML(e,r)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(r=r??this.getLength()-e),[e,r]=vl(e,r),this.editor.getText(e,r)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Mi.sources.API;return Ai.call(this,()=>this.editor.insertEmbed(e,r,n),s,e)}insertText(e,r,n,s,i){let o;return[e,,o,i]=vl(e,0,n,s,i),Ai.call(this,()=>this.editor.insertText(e,r,o),i,e,r.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,r,n){return[e,r,,n]=vl(e,r,n),Ai.call(this,()=>this.editor.removeFormat(e,r),n,e)}scrollRectIntoView(e){Ake(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,r=e&&this.selection.getBounds(e.index,e.length);r&&this.scrollRectIntoView(r)}setContents(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ut.sources.API;return Ai.call(this,()=>{e=new mt(e);const n=this.getLength(),s=this.editor.deleteText(0,n),i=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(o)},r)}setSelection(e,r,n){e==null?this.selection.setRange(null,r||Mi.sources.API):([e,r,,n]=vl(e,r,n),this.selection.setRange(new Yu(Math.max(0,e),r),n),n!==ut.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ut.sources.API;const n=new mt().insert(e);return this.setContents(n,r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ut.sources.USER;const r=this.scroll.update(e);return this.selection.update(e),r}updateContents(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ut.sources.API;return Ai.call(this,()=>(e=new mt(e),this.editor.applyDelta(e)),r,!0)}};st(Mi,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Cy,theme:"default"}),st(Mi,"events",ut.events),st(Mi,"sources",ut.sources),st(Mi,"version","2.0.3"),st(Mi,"imports",{delta:mt,parchment:tke,"core/module":uo,"core/theme":bg});let Pe=Mi;function nL(t){return typeof t=="string"?document.querySelector(t):t}function r_(t){return Object.entries(t??{}).reduce((e,r)=>{let[n,s]=r;return{...e,[n]:s===!0?{}:s}},{})}function aL(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function Oke(t,e){const r=nL(t);if(!r)throw new Error("Invalid Quill container");const s=!e.theme||e.theme===Pe.DEFAULTS.theme?bg:Pe.import(`themes/${e.theme}`);if(!s)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:i,...o}=Pe.DEFAULTS,{modules:l,...c}=s.DEFAULTS;let d=r_(e.modules);d!=null&&d.toolbar&&d.toolbar.constructor!==Object&&(d={...d,toolbar:{container:d.toolbar}});const u=pd({},r_(i),r_(l),d),h={...o,...aL(c),...aL(e)};let f=e.registry;return f?e.formats&&qf.warn('Ignoring "formats" option because "registry" is specified'):f=e.formats?Tke(e.formats,h.registry,qf):h.registry,{...h,registry:f,container:r,theme:s,modules:Object.entries(u).reduce((g,x)=>{let[m,p]=x;if(!p)return g;const b=Pe.import(`modules/${m}`);return b==null?(qf.error(`Cannot load ${m} module. Are you sure you registered it?`),g):{...g,[m]:pd({},b.DEFAULTS||{},p)}},{}),bounds:nL(h.bounds)}}function Ai(t,e,r,n){if(!this.isEnabled()&&e===ut.sources.USER&&!this.allowReadOnlyEdits)return new mt;let s=r==null?null:this.getSelection();const i=this.editor.delta,o=t();if(s!=null&&(r===!0&&(r=s.index),n==null?s=sL(s,o,e):n!==0&&(s=sL(s,r,n,e)),this.setSelection(s,ut.sources.SILENT)),o.length()>0){const l=[ut.events.TEXT_CHANGE,o,i,e];this.emitter.emit(ut.events.EDITOR_CHANGE,...l),e!==ut.sources.SILENT&&this.emitter.emit(...l)}return o}function vl(t,e,r,n,s){let i={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(s=n,n=r,r=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(s=n,n=r,r=e,e=0),typeof r=="object"?(i=r,s=n):typeof r=="string"&&(n!=null?i[r]=n:s=r),s=s||ut.sources.API,[t,e,i,s]}function sL(t,e,r,n){const s=typeof r=="number"?r:0;if(t==null)return null;let i,o;return e&&typeof e.transformPosition=="function"?[i,o]=[t.index,t.index+t.length].map(l=>e.transformPosition(l,n!==ut.sources.USER)):[i,o]=[t.index,t.index+t.length].map(l=>l<e||l===e&&n===ut.sources.USER?l:s>=0?l+s:Math.max(e,l+s)),new Yu(i,o-i)}let wh=class extends jw{};function iL(t){return t instanceof ka||t instanceof ii}function oL(t){return typeof t.updateContent=="function"}class of extends F5{constructor(e,r,n){let{emitter:s}=n;super(e,r),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(ut.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(ut.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,r){this.emitter.emit(ut.events.SCROLL_EMBED_UPDATE,e,r)}deleteAt(e,r){const[n,s]=this.line(e),[i]=this.line(e+r);if(super.deleteAt(e,r),i!=null&&n!==i&&s>0){if(n instanceof ii||i instanceof ii){this.optimize();return}const o=i.children.head instanceof co?null:i.children.head;n.moveChildren(i,o),n.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,r,n,s){super.formatAt(e,r,n,s),this.optimize()}insertAt(e,r,n){if(e>=this.length())if(n==null||this.scroll.query(r,pt.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),n==null&&r.endsWith(`
`)?s.insertAt(0,r.slice(0,-1),n):s.insertAt(0,r,n)}else{const s=this.scroll.create(r,n);this.appendChild(s)}else super.insertAt(e,r,n);this.optimize()}insertBefore(e,r){if(e.statics.scope===pt.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(e),super.insertBefore(n,r)}else super.insertBefore(e,r)}insertContents(e,r){const n=this.deltaToRenderBlocks(r.concat(new mt().insert(`
`))),s=n.pop();if(s==null)return;this.batchStart();const i=n.shift();if(i){const c=i.type==="block"&&(i.delta.length()===0||!this.descendant(ii,e)[0]&&e<this.length()),d=i.type==="block"?i.delta:new mt().insert({[i.key]:i.value});n_(this,e,d);const u=i.type==="block"?1:0,h=e+d.length()+u;c&&this.insertAt(h-1,`
`);const f=ei(this.line(e)[0]),g=ui.AttributeMap.diff(f,i.attributes)||{};Object.keys(g).forEach(x=>{this.formatAt(h-1,1,x,g[x])}),e=h}let[o,l]=this.children.find(e);if(n.length&&(o&&(o=o.split(l),l=0),n.forEach(c=>{if(c.type==="block"){const d=this.createBlock(c.attributes,o||void 0);n_(d,0,c.delta)}else{const d=this.create(c.key,c.value);this.insertBefore(d,o||void 0),Object.keys(c.attributes).forEach(u=>{d.format(u,c.attributes[u])})}})),s.type==="block"&&s.delta.length()){const c=o?o.offset(o.scroll)+l:this.length();n_(this,c,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const r=this.path(e).pop();if(!r)return[null,-1];const[n,s]=r;return n instanceof Ta?[n,s]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(iL,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(s,i,o)=>{let l=[],c=o;return s.children.forEachAt(i,o,(d,u,h)=>{iL(d)?l.push(d):d instanceof jw&&(l=l.concat(n(d,u,c))),c-=h}),l};return n(this,e,r)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,r),e.length>0&&this.emitter.emit(ut.events.SCROLL_OPTIMIZE,e,r))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let r=ut.sources.USER;typeof e=="string"&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(n=>{let{target:s}=n;const i=this.find(s,!0);return i&&!oL(i)}),e.length>0&&this.emitter.emit(ut.events.SCROLL_BEFORE_UPDATE,r,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(ut.events.SCROLL_UPDATE,r,e)}updateEmbedAt(e,r,n){const[s]=this.descendant(i=>i instanceof ii,e);s&&s.statics.blotName===r&&oL(s)&&s.updateContent(n)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const r=[];let n=new mt;return e.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const o=i.split(`
`);o.slice(0,-1).forEach(c=>{n.insert(c,s.attributes),r.push({type:"block",delta:n,attributes:s.attributes??{}}),n=new mt});const l=o[o.length-1];l&&n.insert(l,s.attributes)}else{const o=Object.keys(i)[0];if(!o)return;this.query(o,pt.INLINE)?n.push(s):(n.length()&&r.push({type:"block",delta:n,attributes:{}}),n=new mt,r.push({type:"blockEmbed",key:o,value:i[o],attributes:s.attributes??{}}))}}),n.length()&&r.push({type:"block",delta:n,attributes:{}}),r}createBlock(e,r){let n;const s={};Object.entries(e).forEach(l=>{let[c,d]=l;this.query(c,pt.BLOCK&pt.BLOT)!=null?n=c:s[c]=d});const i=this.create(n||this.statics.defaultChild.blotName,n?e[n]:void 0);this.insertBefore(i,r||void 0);const o=i.length();return Object.entries(s).forEach(l=>{let[c,d]=l;i.formatAt(0,o,c,d)}),i}}st(of,"blotName","scroll"),st(of,"className","ql-editor"),st(of,"tagName","DIV"),st(of,"defaultChild",ka),st(of,"allowedChildren",[ka,ii,wh]);function n_(t,e,r){r.reduce((n,s)=>{const i=ui.Op.length(s);let o=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const l=s.insert;t.insertAt(n,l);const[c]=t.descendant(Ta,n),d=ei(c);o=ui.AttributeMap.diff(d,o)||{}}else if(typeof s.insert=="object"){const l=Object.keys(s.insert)[0];if(l==null)return n;if(t.insertAt(n,l,s.insert[l]),t.scroll.query(l,pt.INLINE)!=null){const[d]=t.descendant(Ta,n),u=ei(d);o=ui.AttributeMap.diff(u,o)||{}}}}return Object.keys(o).forEach(l=>{t.formatAt(n,i,l,o[l])}),n+i},e)}const V5={scope:pt.BLOCK,whitelist:["right","center","justify"]},Ike=new Jo("align","align",V5),vq=new lo("align","ql-align",V5),kq=new Pd("align","text-align",V5);class wq extends Pd{value(e){let r=super.value(e);return r.startsWith("rgb(")?(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${r.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):r}}const Dke=new lo("color","ql-color",{scope:pt.INLINE}),H5=new wq("color","color",{scope:pt.INLINE}),Mke=new lo("background","ql-bg",{scope:pt.INLINE}),W5=new wq("background","background-color",{scope:pt.INLINE});class jh extends wh{static create(e){const r=super.create(e);return r.setAttribute("spellcheck","false"),r}code(e,r){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(e,e+r)}html(e,r){return`<pre>
${Aw(this.code(e,r))}
</pre>`}}class Ia extends ka{static register(){Pe.register(jh)}}st(Ia,"TAB","  ");class X5 extends el{}X5.blotName="code";X5.tagName="CODE";Ia.blotName="code-block";Ia.className="ql-code-block";Ia.tagName="DIV";jh.blotName="code-block-container";jh.className="ql-code-block-container";jh.tagName="DIV";jh.allowedChildren=[Ia];Ia.allowedChildren=[ro,co,Ew];Ia.requiredContainer=jh;const Y5={scope:pt.BLOCK,whitelist:["rtl"]},jq=new Jo("direction","dir",Y5),Nq=new lo("direction","ql-direction",Y5),_q=new Pd("direction","direction",Y5),Sq={scope:pt.INLINE,whitelist:["serif","monospace"]},Aq=new lo("font","ql-font",Sq);class Lke extends Pd{value(e){return super.value(e).replace(/["']/g,"")}}const Eq=new Lke("font","font-family",Sq),Cq=new lo("size","ql-size",{scope:pt.INLINE,whitelist:["small","large","huge"]}),Tq=new Pd("size","font-size",{scope:pt.INLINE,whitelist:["10px","18px","32px"]}),Rke=pc("quill:keyboard"),Pke=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Cw extends uo{static match(e,r){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!r[n]!==e[n]&&r[n]!==null)?!1:r.key===e.key||r.key===e.which}constructor(e,r){super(e,r),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=$ke(e);if(s==null){Rke.warn("Attempted to add invalid keyboard binding",s);return}typeof r=="function"&&(r={handler:r}),typeof n=="function"&&(n={handler:n}),(Array.isArray(s.key)?s.key:[s.key]).forEach(o=>{const l={...s,key:o,...r,...n};this.bindings[l.key]=this.bindings[l.key]||[],this.bindings[l.key].push(l)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const s=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(b=>Cw.match(e,b));if(s.length===0)return;const i=Pe.find(e.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[l,c]=this.quill.getLine(o.index),[d,u]=this.quill.getLeaf(o.index),[h,f]=o.length===0?[d,u]:this.quill.getLeaf(o.index+o.length),g=d instanceof K1?d.value().slice(0,u):"",x=h instanceof K1?h.value().slice(f):"",m={collapsed:o.length===0,empty:o.length===0&&l.length()<=1,format:this.quill.getFormat(o),line:l,offset:c,prefix:g,suffix:x,event:e};s.some(b=>{if(b.collapsed!=null&&b.collapsed!==m.collapsed||b.empty!=null&&b.empty!==m.empty||b.offset!=null&&b.offset!==m.offset)return!1;if(Array.isArray(b.format)){if(b.format.every(v=>m.format[v]==null))return!1}else if(typeof b.format=="object"&&!Object.keys(b.format).every(v=>b.format[v]===!0?m.format[v]!=null:b.format[v]===!1?m.format[v]==null:$c(b.format[v],m.format[v])))return!1;return b.prefix!=null&&!b.prefix.test(m.prefix)||b.suffix!=null&&!b.suffix.test(m.suffix)?!1:b.handler.call(this,o,m,b)!==!0})&&e.preventDefault()})}handleBackspace(e,r){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(r.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(e.index);let o=new mt().retain(e.index-n).delete(n);if(r.offset===0){const[l]=this.quill.getLine(e.index-1);if(l&&!(l.statics.blotName==="block"&&l.length()<=1)){const d=i.formats(),u=this.quill.getFormat(e.index-1,1);if(s=ui.AttributeMap.diff(d,u)||{},Object.keys(s).length>0){const h=new mt().retain(e.index+i.length()-2).retain(1,s);o=o.compose(h)}}}this.quill.updateContents(o,Pe.sources.USER),this.quill.focus()}handleDelete(e,r){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(r.suffix)?2:1;if(e.index>=this.quill.getLength()-n)return;let s={};const[i]=this.quill.getLine(e.index);let o=new mt().retain(e.index).delete(n);if(r.offset>=i.length()-1){const[l]=this.quill.getLine(e.index+1);if(l){const c=i.formats(),d=this.quill.getFormat(e.index,1);s=ui.AttributeMap.diff(c,d)||{},Object.keys(s).length>0&&(o=o.retain(l.length()-1).retain(1,s))}}this.quill.updateContents(o,Pe.sources.USER),this.quill.focus()}handleDeleteRange(e){Z5({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,r){const n=Object.keys(r.format).reduce((i,o)=>(this.quill.scroll.query(o,pt.BLOCK)&&!Array.isArray(r.format[o])&&(i[o]=r.format[o]),i),{}),s=new mt().retain(e.index).delete(e.length).insert(`
`,n);this.quill.updateContents(s,Pe.sources.USER),this.quill.setSelection(e.index+1,Pe.sources.SILENT),this.quill.focus()}}const zke={bindings:{bold:a_("bold"),italic:a_("italic"),underline:a_("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",Pe.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",Pe.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",Pe.sources.USER):e.format.list!=null&&this.quill.format("list",!1,Pe.sources.USER)}},"indent code-block":lL(!0),"outdent code-block":lL(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Pe.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const r=new mt().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(r,Pe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Pe.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Pe.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const r={list:!1};e.format.indent&&(r.indent=!1),this.quill.formatLine(t.index,t.length,r,Pe.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,r]=this.quill.getLine(t.index),n={...e.formats(),list:"checked"},s=new mt().retain(t.index).insert(`
`,n).retain(e.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,Pe.sources.USER),this.quill.setSelection(t.index+1,Pe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[r,n]=this.quill.getLine(t.index),s=new mt().retain(t.index).insert(`
`,e.format).retain(r.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,Pe.sources.USER),this.quill.setSelection(t.index+1,Pe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[r,n,s,i]=e.getTable(t),o=Fke(r,n,s,i);if(o==null)return;let l=r.offset();if(o<0){const c=new mt().retain(l).insert(`
`);this.quill.updateContents(c,Pe.sources.USER),this.quill.setSelection(t.index+1,t.length,Pe.sources.SILENT)}else if(o>0){l+=r.length();const c=new mt().retain(l).insert(`
`);this.quill.updateContents(c,Pe.sources.USER),this.quill.setSelection(l,Pe.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:r,line:n}=e,s=n.offset(this.quill.scroll);r.shiftKey?this.quill.setSelection(s-1,Pe.sources.USER):this.quill.setSelection(s+n.length(),Pe.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:r}=e.prefix,[n,s]=this.quill.getLine(t.index);if(s>r)return!0;let i;switch(e.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(t.index," ",Pe.sources.USER),this.quill.history.cutoff();const o=new mt().retain(t.index-s).delete(r+1).retain(n.length()-2-s).retain(1,{list:i});return this.quill.updateContents(o,Pe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-r,Pe.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,r]=this.quill.getLine(t.index);let n=2,s=e;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,n-=1,n<=0){const i=new mt().retain(t.index+e.length()-r-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,Pe.sources.USER),this.quill.setSelection(t.index-1,Pe.sources.SILENT),!1}return!0}},"embed left":Ty("ArrowLeft",!1),"embed left shift":Ty("ArrowLeft",!0),"embed right":Ty("ArrowRight",!1),"embed right shift":Ty("ArrowRight",!0),"table down":cL(!1),"table up":cL(!0)}};Cw.DEFAULTS=zke;function lL(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,r){let{event:n}=r;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(e.length===0&&!n.shiftKey){this.quill.insertText(e.index,i,Pe.sources.USER),this.quill.setSelection(e.index+i.length,Pe.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:l,length:c}=e;o.forEach((d,u)=>{t?(d.insertAt(0,i),u===0?l+=i.length:c+=i.length):d.domNode.textContent.startsWith(i)&&(d.deleteAt(0,i.length),u===0?l-=i.length:c-=i.length)}),this.quill.update(Pe.sources.USER),this.quill.setSelection(l,c,Pe.sources.SILENT)}}}function Ty(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(n){let{index:s}=n;t==="ArrowRight"&&(s+=n.length+1);const[i]=this.quill.getLeaf(s);return i instanceof Ks?(t==="ArrowLeft"?e?this.quill.setSelection(n.index-1,n.length+1,Pe.sources.USER):this.quill.setSelection(n.index-1,Pe.sources.USER):e?this.quill.setSelection(n.index,n.length+1,Pe.sources.USER):this.quill.setSelection(n.index+n.length+1,Pe.sources.USER),!1):!0}}}function a_(t){return{key:t[0],shortKey:!0,handler(e,r){this.quill.format(t,!r.format[t],Pe.sources.USER)}}}function cL(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,r){const n=t?"prev":"next",s=r.line,i=s.parent[n];if(i!=null){if(i.statics.blotName==="table-row"){let o=i.children.head,l=s;for(;l.prev!=null;)l=l.prev,o=o.next;const c=o.offset(this.quill.scroll)+Math.min(r.offset,o.length()-1);this.quill.setSelection(c,0,Pe.sources.USER)}}else{const o=s.table()[n];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,Pe.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,Pe.sources.USER))}return!1}}}function $ke(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=Kf(t);else return null;return t.shortKey&&(t[Pke]=t.shortKey,delete t.shortKey),t}function Z5(t){let{quill:e,range:r}=t;const n=e.getLines(r);let s={};if(n.length>1){const i=n[0].formats(),o=n[n.length-1].formats();s=ui.AttributeMap.diff(o,i)||{}}e.deleteText(r,Pe.sources.USER),Object.keys(s).length>0&&e.formatLine(r.index,1,s,Pe.sources.USER),e.setSelection(r.index,Pe.sources.SILENT)}function Fke(t,e,r,n){return e.prev==null&&e.next==null?r.prev==null&&r.next==null?n===0?-1:1:r.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const Bke=/font-weight:\s*normal/,Uke=["P","OL","UL"],dL=t=>t&&Uke.includes(t.tagName),Kke=t=>{Array.from(t.querySelectorAll("br")).filter(e=>dL(e.previousElementSibling)&&dL(e.nextElementSibling)).forEach(e=>{var r;(r=e.parentNode)==null||r.removeChild(e)})},Gke=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var r;return(r=e.getAttribute("style"))==null?void 0:r.match(Bke)}).forEach(e=>{var n;const r=t.createDocumentFragment();r.append(...e.childNodes),(n=e.parentNode)==null||n.replaceChild(r,e)})};function qke(t){t.querySelector('[id^="docs-internal-guid-"]')&&(Gke(t),Kke(t))}const Vke=/\bmso-list:[^;]*ignore/i,Hke=/\bmso-list:[^;]*\bl(\d+)/i,Wke=/\bmso-list:[^;]*\blevel(\d+)/i,Xke=(t,e)=>{const r=t.getAttribute("style"),n=r==null?void 0:r.match(Hke);if(!n)return null;const s=Number(n[1]),i=r==null?void 0:r.match(Wke),o=i?Number(i[1]):1,l=new RegExp(`@list l${s}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=e.match(l),d=c&&c[1]==="bullet"?"bullet":"ordered";return{id:s,indent:o,type:d,element:t}},Yke=t=>{var o,l;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),r=[],n=[];e.forEach(c=>{(c.getAttribute("style")||"").match(Vke)?r.push(c):n.push(c)}),r.forEach(c=>{var d;return(d=c.parentNode)==null?void 0:d.removeChild(c)});const s=t.documentElement.innerHTML,i=n.map(c=>Xke(c,s)).filter(c=>c);for(;i.length;){const c=[];let d=i.shift();for(;d;)c.push(d),d=i.length&&((o=i[0])==null?void 0:o.element)===d.element.nextElementSibling&&i[0].id===d.id?i.shift():null;const u=document.createElement("ul");c.forEach(g=>{const x=document.createElement("li");x.setAttribute("data-list",g.type),g.indent>1&&x.setAttribute("class",`ql-indent-${g.indent-1}`),x.innerHTML=g.element.innerHTML,u.appendChild(x)});const h=(l=c[0])==null?void 0:l.element,{parentNode:f}=h??{};h&&(f==null||f.replaceChild(u,h)),c.slice(1).forEach(g=>{let{element:x}=g;f==null||f.removeChild(x)})}};function Zke(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Yke(t)}const Qke=[Zke,qke],Jke=t=>{t.documentElement&&Qke.forEach(e=>{e(t)})},e2e=pc("quill:clipboard"),t2e=[[Node.TEXT_NODE,f2e],[Node.TEXT_NODE,hL],["br",i2e],[Node.ELEMENT_NODE,hL],[Node.ELEMENT_NODE,s2e],[Node.ELEMENT_NODE,a2e],[Node.ELEMENT_NODE,u2e],["li",c2e],["ol, ul",d2e],["pre",o2e],["tr",h2e],["b",s_("bold")],["i",s_("italic")],["strike",s_("strike")],["style",l2e]],r2e=[Ike,jq].reduce((t,e)=>(t[e.keyName]=e,t),{}),uL=[kq,W5,H5,_q,Eq,Tq].reduce((t,e)=>(t[e.keyName]=e,t),{});class Oq extends uo{constructor(e,r){super(e,r),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],t2e.concat(this.options.matchers??[]).forEach(n=>{let[s,i]=n;this.addMatcher(s,i)})}addMatcher(e,r){this.matchers.push([e,r])}convert(e){let{html:r,text:n}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[Ia.blotName])return new mt().insert(n||"",{[Ia.blotName]:s[Ia.blotName]});if(!r)return new mt().insert(n||"",s);const i=this.convertHTML(r);return jb(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new mt().retain(i.length()-1).delete(1)):i}normalizeHTML(e){Jke(e)}convertHTML(e){const r=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(r);const n=r.body,s=new WeakMap,[i,o]=this.prepareMatching(n,s);return Q5(this.quill.scroll,n,i,o,s)}dangerouslyPasteHTML(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pe.sources.API;if(typeof e=="string"){const s=this.convert({html:e,text:""});this.quill.setContents(s,r),this.quill.setSelection(0,Pe.sources.SILENT)}else{const s=this.convert({html:r,text:""});this.quill.updateContents(new mt().retain(e).concat(s),n),this.quill.setSelection(e+s.length(),Pe.sources.SILENT)}}onCaptureCopy(e){var o,l;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[n]=this.quill.selection.getRange();if(n==null)return;const{html:s,text:i}=this.onCopy(n,r);(o=e.clipboardData)==null||o.setData("text/plain",i),(l=e.clipboardData)==null||l.setData("text/html",s),r&&Z5({range:n,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(r=>r[0]!=="#").join(`
`)}onCapturePaste(e){var o,l,c,d,u;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const r=this.quill.getSelection(!0);if(r==null)return;const n=(o=e.clipboardData)==null?void 0:o.getData("text/html");let s=(l=e.clipboardData)==null?void 0:l.getData("text/plain");if(!n&&!s){const h=(c=e.clipboardData)==null?void 0:c.getData("text/uri-list");h&&(s=this.normalizeURIList(h))}const i=Array.from(((d=e.clipboardData)==null?void 0:d.files)||[]);if(!n&&i.length>0){this.quill.uploader.upload(r,i);return}if(n&&i.length>0){const h=new DOMParser().parseFromString(n,"text/html");if(h.body.childElementCount===1&&((u=h.body.firstElementChild)==null?void 0:u.tagName)==="IMG"){this.quill.uploader.upload(r,i);return}}this.onPaste(r,{html:n,text:s})}onCopy(e){const r=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:r}}onPaste(e,r){let{text:n,html:s}=r;const i=this.quill.getFormat(e.index),o=this.convert({text:n,html:s},i);e2e.log("onPaste",o,{text:n,html:s});const l=new mt().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(l,Pe.sources.USER),this.quill.setSelection(l.length()-e.length,Pe.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,r){const n=[],s=[];return this.matchers.forEach(i=>{const[o,l]=i;switch(o){case Node.TEXT_NODE:s.push(l);break;case Node.ELEMENT_NODE:n.push(l);break;default:Array.from(e.querySelectorAll(o)).forEach(c=>{if(r.has(c)){const d=r.get(c);d==null||d.push(l)}else r.set(c,[l])});break}}),[n,s]}}st(Oq,"DEFAULTS",{matchers:[]});function Nh(t,e,r,n){return n.query(e)?t.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[e])return s.push(i);const o=r?{[e]:r}:{};return s.insert(i.insert,{...o,...i.attributes})},new mt):t}function jb(t,e){let r="";for(let n=t.ops.length-1;n>=0&&r.length<e.length;--n){const s=t.ops[n];if(typeof s.insert!="string")break;r=s.insert+r}return r.slice(-1*e.length)===e}function Yc(t,e){if(!(t instanceof Element))return!1;const r=e.query(t);return r&&r.prototype instanceof Ks?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function n2e(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Yc(t.previousElementSibling,e)&&!Yc(t.nextElementSibling,e)}const Oy=new WeakMap;function Iq(t){return t==null?!1:(Oy.has(t)||(t.tagName==="PRE"?Oy.set(t,!0):Oy.set(t,Iq(t.parentNode))),Oy.get(t))}function Q5(t,e,r,n,s){return e.nodeType===e.TEXT_NODE?n.reduce((i,o)=>o(e,i,t),new mt):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((i,o)=>{let l=Q5(t,o,r,n,s);return o.nodeType===e.ELEMENT_NODE&&(l=r.reduce((c,d)=>d(o,c,t),l),l=(s.get(o)||[]).reduce((c,d)=>d(o,c,t),l)),i.concat(l)},new mt):new mt}function s_(t){return(e,r,n)=>Nh(r,t,!0,n)}function a2e(t,e,r){const n=Jo.keys(t),s=lo.keys(t),i=Pd.keys(t),o={};return n.concat(s).concat(i).forEach(l=>{let c=r.query(l,pt.ATTRIBUTE);c!=null&&(o[c.attrName]=c.value(t),o[c.attrName])||(c=r2e[l],c!=null&&(c.attrName===l||c.keyName===l)&&(o[c.attrName]=c.value(t)||void 0),c=uL[l],c!=null&&(c.attrName===l||c.keyName===l)&&(c=uL[l],o[c.attrName]=c.value(t)||void 0))}),Object.entries(o).reduce((l,c)=>{let[d,u]=c;return Nh(l,d,u,r)},e)}function s2e(t,e,r){const n=r.query(t);if(n==null)return e;if(n.prototype instanceof Ks){const s={},i=n.value(t);if(i!=null)return s[n.blotName]=i,new mt().insert(s,n.formats(t,r))}else if(n.prototype instanceof J0&&!jb(e,`
`)&&e.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return Nh(e,n.blotName,n.formats(t,r),r);return e}function i2e(t,e){return jb(e,`
`)||e.insert(`
`),e}function o2e(t,e,r){const n=r.query("code-block"),s=n&&"formats"in n&&typeof n.formats=="function"?n.formats(t,r):!0;return Nh(e,"code-block",s,r)}function l2e(){return new mt}function c2e(t,e,r){const n=r.query(t);if(n==null||n.blotName!=="list"||!jb(e,`
`))return e;let s=-1,i=t.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?e:e.reduce((o,l)=>l.insert?l.attributes&&typeof l.attributes.indent=="number"?o.push(l):o.insert(l.insert,{indent:s,...l.attributes||{}}):o,new mt)}function d2e(t,e,r){const n=t;let s=n.tagName==="OL"?"ordered":"bullet";const i=n.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),Nh(e,"list",s,r)}function hL(t,e,r){if(!jb(e,`
`)){if(Yc(t,r)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let n=t.nextSibling;for(;n!=null;){if(Yc(n,r))return e.insert(`
`);const s=r.query(n);if(s&&s.prototype instanceof ii)return e.insert(`
`);n=n.firstChild}}}return e}function u2e(t,e,r){var i;const n={},s=t.style||{};return s.fontStyle==="italic"&&(n.italic=!0),s.textDecoration==="underline"&&(n.underline=!0),s.textDecoration==="line-through"&&(n.strike=!0),((i=s.fontWeight)!=null&&i.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(n.bold=!0),e=Object.entries(n).reduce((o,l)=>{let[c,d]=l;return Nh(o,c,d,r)},e),parseFloat(s.textIndent||0)>0?new mt().insert("	").concat(e):e}function h2e(t,e,r){var s,i;const n=((s=t.parentElement)==null?void 0:s.tagName)==="TABLE"?t.parentElement:(i=t.parentElement)==null?void 0:i.parentElement;if(n!=null){const l=Array.from(n.querySelectorAll("tr")).indexOf(t)+1;return Nh(e,"table",l,r)}return e}function f2e(t,e,r){var s;let n=t.data;if(((s=t.parentElement)==null?void 0:s.tagName)==="O:P")return e.insert(n.trim());if(!Iq(t)){if(n.trim().length===0&&n.includes(`
`)&&!n2e(t,r))return e;n=n.replace(/[^\S\u00a0]/g," "),n=n.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&Yc(t.parentElement,r)||t.previousSibling instanceof Element&&Yc(t.previousSibling,r))&&(n=n.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&Yc(t.parentElement,r)||t.nextSibling instanceof Element&&Yc(t.nextSibling,r))&&(n=n.replace(/ $/,"")),n=n.replaceAll(""," ")}return e.insert(n)}class Dq extends uo{constructor(r,n){super(r,n);st(this,"lastRecorded",0);st(this,"ignoreChange",!1);st(this,"stack",{undo:[],redo:[]});st(this,"currentRange",null);this.quill.on(Pe.events.EDITOR_CHANGE,(s,i,o,l)=>{s===Pe.events.SELECTION_CHANGE?i&&l!==Pe.sources.SILENT&&(this.currentRange=i):s===Pe.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||l===Pe.sources.USER?this.record(i,o):this.transform(i)),this.currentRange=yA(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(r,n){if(this.stack[r].length===0)return;const s=this.stack[r].pop();if(!s)return;const i=this.quill.getContents(),o=s.delta.invert(i);this.stack[n].push({delta:o,range:yA(s.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,Pe.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(r,n){if(r.ops.length===0)return;this.stack.redo=[];let s=r.invert(n),i=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const l=this.stack.undo.pop();l&&(s=s.compose(l.delta),i=l.range)}else this.lastRecorded=o;s.length()!==0&&(this.stack.undo.push({delta:s,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(r){fL(this.stack.undo,r),fL(this.stack.redo,r)}undo(){this.change("undo","redo")}restoreSelection(r){if(r.range)this.quill.setSelection(r.range,Pe.sources.USER);else{const n=m2e(this.quill.scroll,r.delta);this.quill.setSelection(n,Pe.sources.USER)}}}st(Dq,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function fL(t,e){let r=e;for(let n=t.length-1;n>=0;n-=1){const s=t[n];t[n]={delta:r.transform(s.delta,!0),range:s.range&&yA(s.range,r)},r=s.delta.transform(r),t[n].delta.length()===0&&t.splice(n,1)}}function g2e(t,e){const r=e.ops[e.ops.length-1];return r==null?!1:r.insert!=null?typeof r.insert=="string"&&r.insert.endsWith(`
`):r.attributes!=null?Object.keys(r.attributes).some(n=>t.query(n,pt.BLOCK)!=null):!1}function m2e(t,e){const r=e.reduce((s,i)=>s+(i.delete||0),0);let n=e.length()-r;return g2e(t,e)&&(n-=1),n}function yA(t,e){if(!t)return t;const r=e.transformPosition(t.index),n=e.transformPosition(t.index+t.length);return{index:r,length:n-r}}class Mq extends uo{constructor(e,r){super(e,r),e.root.addEventListener("drop",n=>{var o;n.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const l=document.caretPositionFromPoint(n.clientX,n.clientY);s=document.createRange(),s.setStart(l.offsetNode,l.offset),s.setEnd(l.offsetNode,l.offset)}const i=s&&e.selection.normalizeNative(s);if(i){const l=e.selection.normalizedToRange(i);(o=n.dataTransfer)!=null&&o.files&&this.upload(l,n.dataTransfer.files)}})}upload(e,r){const n=[];Array.from(r).forEach(s=>{var i;s&&((i=this.options.mimetypes)!=null&&i.includes(s.type))&&n.push(s)}),n.length>0&&this.options.handler.call(this,e,n)}}Mq.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const r=e.map(n=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(n)}));Promise.all(r).then(n=>{const s=n.reduce((i,o)=>i.insert({image:o}),new mt().retain(t.index).delete(t.length));this.quill.updateContents(s,ut.sources.USER),this.quill.setSelection(t.index+n.length,ut.sources.SILENT)})}};const p2e=["insertText","insertReplacementText"];class x2e extends uo{constructor(e,r){super(e,r),e.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||e.on(Pe.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Z5({range:e,quill:this.quill})}replaceText(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(r){const n=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new mt().retain(e.index).insert(r,n),Pe.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+r.length,0,Pe.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!p2e.includes(e.inputType))return;const r=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!r||r.collapsed===!0)return;const n=b2e(e);if(n==null)return;const s=this.quill.selection.normalizeNative(r),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,n)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function b2e(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const y2e=/Mac/i.test(navigator.platform),v2e=100,k2e=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||y2e&&t.key==="a"&&t.ctrlKey===!0);class w2e extends uo{constructor(r,n){super(r,n);st(this,"isListening",!1);st(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(r,n){let{line:s,event:i}=n;if(!(s instanceof Hi)||!s.uiNode)return!0;const o=getComputedStyle(s.domNode).direction==="rtl";return o&&i.key!=="ArrowRight"||!o&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(r.index-1,r.length+(i.shiftKey?1:0),Pe.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",r=>{!r.defaultPrevented&&k2e(r)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+v2e,this.isListening)return;this.isListening=!0;const r=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",r,{once:!0})}handleSelectionChange(){const r=document.getSelection();if(!r)return;const n=r.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const s=this.quill.scroll.find(n.startContainer);if(!(s instanceof Hi)||!s.uiNode)return;const i=document.createRange();i.setStartAfter(s.uiNode),i.setEndAfter(s.uiNode),r.removeAllRanges(),r.addRange(i)}}Pe.register({"blots/block":ka,"blots/block/embed":ii,"blots/break":co,"blots/container":wh,"blots/cursor":Ew,"blots/embed":q5,"blots/inline":el,"blots/scroll":of,"blots/text":ro,"modules/clipboard":Oq,"modules/history":Dq,"modules/keyboard":Cw,"modules/uploader":Mq,"modules/input":x2e,"modules/uiNode":w2e});class j2e extends lo{add(e,r){let n=0;if(r==="+1"||r==="-1"){const s=this.value(e)||0;n=r==="+1"?s+1:s-1}else typeof r=="number"&&(n=r);return n===0?(this.remove(e),!0):super.add(e,n.toString())}canAdd(e,r){return super.canAdd(e,r)||super.canAdd(e,parseInt(r,10))}value(e){return parseInt(super.value(e),10)||void 0}}const N2e=new j2e("indent","ql-indent",{scope:pt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class vA extends ka{}st(vA,"blotName","blockquote"),st(vA,"tagName","blockquote");class kA extends ka{static formats(e){return this.tagName.indexOf(e.tagName)+1}}st(kA,"blotName","header"),st(kA,"tagName",["H1","H2","H3","H4","H5","H6"]);class Nb extends wh{}Nb.blotName="list-container";Nb.tagName="OL";class _b extends ka{static create(e){const r=super.create();return r.setAttribute("data-list",e),r}static formats(e){return e.getAttribute("data-list")||void 0}static register(){Pe.register(Nb)}constructor(e,r){super(e,r);const n=r.ownerDocument.createElement("span"),s=i=>{if(!e.isEnabled())return;const o=this.statics.formats(r,e);o==="checked"?(this.format("list","unchecked"),i.preventDefault()):o==="unchecked"&&(this.format("list","checked"),i.preventDefault())};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s),this.attachUI(n)}format(e,r){e===this.statics.blotName&&r?this.domNode.setAttribute("data-list",r):super.format(e,r)}}_b.blotName="list";_b.tagName="LI";Nb.allowedChildren=[_b];_b.requiredContainer=Nb;class rx extends el{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}st(rx,"blotName","bold"),st(rx,"tagName",["STRONG","B"]);class wA extends rx{}st(wA,"blotName","italic"),st(wA,"tagName",["EM","I"]);class Zc extends el{static create(e){const r=super.create(e);return r.setAttribute("href",this.sanitize(e)),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}static formats(e){return e.getAttribute("href")}static sanitize(e){return Lq(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,r){e!==this.statics.blotName||!r?super.format(e,r):this.domNode.setAttribute("href",this.constructor.sanitize(r))}}st(Zc,"blotName","link"),st(Zc,"tagName","A"),st(Zc,"SANITIZED_URL","about:blank"),st(Zc,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function Lq(t,e){const r=document.createElement("a");r.href=t;const n=r.href.slice(0,r.href.indexOf(":"));return e.indexOf(n)>-1}class jA extends el{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}st(jA,"blotName","script"),st(jA,"tagName",["SUB","SUP"]);class NA extends rx{}st(NA,"blotName","strike"),st(NA,"tagName",["S","STRIKE"]);class _A extends el{}st(_A,"blotName","underline"),st(_A,"tagName","U");class Dv extends q5{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const r=super.create(e);return typeof e=="string"&&(window.katex.render(e,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",e)),r}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}st(Dv,"blotName","formula"),st(Dv,"className","ql-formula"),st(Dv,"tagName","SPAN");const gL=["alt","height","width"];var pv;let _2e=(pv=class extends Ks{static create(e){const r=super.create(e);return typeof e=="string"&&r.setAttribute("src",this.sanitize(e)),r}static formats(e){return gL.reduce((r,n)=>(e.hasAttribute(n)&&(r[n]=e.getAttribute(n)),r),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return Lq(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,r){gL.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):super.format(e,r)}},st(pv,"blotName","image"),st(pv,"tagName","IMG"),pv);const mL=["height","width"];class Mv extends ii{static create(e){const r=super.create(e);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen","true"),r.setAttribute("src",this.sanitize(e)),r}static formats(e){return mL.reduce((r,n)=>(e.hasAttribute(n)&&(r[n]=e.getAttribute(n)),r),{})}static sanitize(e){return Zc.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,r){mL.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):super.format(e,r)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}st(Mv,"blotName","video"),st(Mv,"className","ql-video"),st(Mv,"tagName","IFRAME");const Ip=new lo("code-token","hljs",{scope:pt.INLINE});class ec extends el{static formats(e,r){for(;e!=null&&e!==r.domNode;){if(e.classList&&e.classList.contains(Ia.className))return super.formats(e,r);e=e.parentNode}}constructor(e,r,n){super(e,r,n),Ip.add(this.domNode,n)}format(e,r){e!==ec.blotName?super.format(e,r):r?Ip.add(this.domNode,r):(Ip.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ip.value(this.domNode)||this.unwrap()}}ec.blotName="code-token";ec.className="ql-token";class ti extends Ia{static create(e){const r=super.create(e);return typeof e=="string"&&r.setAttribute("data-language",e),r}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,r){e===this.statics.blotName&&r?this.domNode.setAttribute("data-language",r):super.format(e,r)}replaceWith(e,r){return this.formatAt(0,this.length(),ec.blotName,!1),super.replaceWith(e,r)}}class r0 extends jh{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,r){e===ti.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(e,r)}))}formatAt(e,r,n,s){n===ti.blotName&&(this.forceNext=!0),super.formatAt(e,r,n,s)}highlight(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const s=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,i=ti.formats(this.children.head.domNode);if(r||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){const o=this.children.reduce((c,d)=>c.concat(xq(d,!1)),new mt),l=e(s,i);o.diff(l).reduce((c,d)=>{let{retain:u,attributes:h}=d;return u?(h&&Object.keys(h).forEach(f=>{[ti.blotName,ec.blotName].includes(f)&&this.formatAt(c,u,f,h[f])}),c+u):c},0)}this.cachedText=s,this.forceNext=!1}}html(e,r){const[n]=this.children.find(e);return`<pre data-language="${n?ti.formats(n.domNode):"plain"}">
${Aw(this.code(e,r))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const r=ti.formats(this.children.head.domNode);r!==this.uiNode.value&&(this.uiNode.value=r)}}}r0.allowedChildren=[ti];ti.requiredContainer=r0;ti.allowedChildren=[ec,Ew,ro,co];const S2e=(t,e,r)=>{if(typeof t.versionString=="string"){const n=t.versionString.split(".")[0];if(parseInt(n,10)>=11)return t.highlight(r,{language:e}).value}return t.highlight(e,r).value};class Rq extends uo{static register(){Pe.register(ec,!0),Pe.register(ti,!0),Pe.register(r0,!0)}constructor(e,r){if(super(e,r),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,s)=>{let{key:i}=s;return n[i]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Pe.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof r0))return;const r=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:s,label:i}=n;const o=r.ownerDocument.createElement("option");o.textContent=i,o.setAttribute("value",s),r.appendChild(o)}),r.addEventListener("change",()=>{e.format(ti.blotName,r.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(r),e.children.head&&(r.value=ti.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(Pe.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Pe.sources.USER);const n=this.quill.getSelection();(e==null?this.quill.scroll.descendants(r0):[e]).forEach(i=>{i.highlight(this.highlightBlot,r)}),this.quill.update(Pe.sources.SILENT),n!=null&&this.quill.setSelection(n,Pe.sources.SILENT)}highlightBlot(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(r=this.languages[r]?r:"plain",r==="plain")return Aw(e).split(`
`).reduce((s,i,o)=>(o!==0&&s.insert(`
`,{[Ia.blotName]:r}),s.insert(i)),new mt);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Ia.className),n.innerHTML=S2e(this.options.hljs,r,e),Q5(this.quill.scroll,n,[(s,i)=>{const o=Ip.value(s);return o?i.compose(new mt().retain(i.length(),{[ec.blotName]:o})):i}],[(s,i)=>s.data.split(`
`).reduce((o,l,c)=>(c!==0&&o.insert(`
`,{[Ia.blotName]:r}),o.insert(l)),i)],new WeakMap)}}Rq.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const y0=class y0 extends ka{static create(e){const r=super.create();return e?r.setAttribute("data-row",e):r.setAttribute("data-row",J5()),r}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,r){e===y0.blotName&&r?this.domNode.setAttribute("data-row",r):super.format(e,r)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};st(y0,"blotName","table"),st(y0,"tagName","TD");let Bi=y0;class tc extends wh{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),r=this.children.tail.formats(),n=this.next.children.head.formats(),s=this.next.children.tail.formats();return e.table===r.table&&e.table===n.table&&e.table===s.table}return!1}optimize(e){super.optimize(e),this.children.forEach(r=>{if(r.next==null)return;const n=r.formats(),s=r.next.formats();if(n.table!==s.table){const i=this.splitAfter(r);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}st(tc,"blotName","table-row"),st(tc,"tagName","TR");class zo extends wh{}st(zo,"blotName","table-body"),st(zo,"tagName","TBODY");class yg extends wh{balanceCells(){const e=this.descendants(tc),r=e.reduce((n,s)=>Math.max(s.children.length,n),0);e.forEach(n=>{new Array(r-n.children.length).fill(0).forEach(()=>{let s;n.children.head!=null&&(s=Bi.formats(n.children.head.domNode));const i=this.scroll.create(Bi.blotName,s);n.appendChild(i),i.optimize()})})}cells(e){return this.rows().map(r=>r.children.at(e))}deleteColumn(e){const[r]=this.descendant(zo);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(e);s!=null&&s.remove()})}insertColumn(e){const[r]=this.descendant(zo);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(e),i=Bi.formats(n.children.head.domNode),o=this.scroll.create(Bi.blotName,i);n.insertBefore(o,s)})}insertRow(e){const[r]=this.descendant(zo);if(r==null||r.children.head==null)return;const n=J5(),s=this.scroll.create(tc.blotName);r.children.head.children.forEach(()=>{const o=this.scroll.create(Bi.blotName,n);s.appendChild(o)});const i=r.children.at(e);r.insertBefore(s,i)}rows(){const e=this.children.head;return e==null?[]:e.children.map(r=>r)}}st(yg,"blotName","table-container"),st(yg,"tagName","TABLE");yg.allowedChildren=[zo];zo.requiredContainer=yg;zo.allowedChildren=[tc];tc.requiredContainer=zo;tc.allowedChildren=[Bi];Bi.requiredContainer=tc;function J5(){return`row-${Math.random().toString(36).slice(2,6)}`}class A2e extends uo{static register(){Pe.register(Bi),Pe.register(tc),Pe.register(zo),Pe.register(yg)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(yg).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,r]=this.getTable();r!=null&&(e.deleteColumn(r.cellOffset()),this.quill.update(Pe.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(Pe.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const r=e.offset();e.remove(),this.quill.update(Pe.sources.USER),this.quill.setSelection(r,Pe.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[r,n]=this.quill.getLine(e.index);if(r==null||r.statics.blotName!==Bi.blotName)return[null,null,null,-1];const s=r.parent;return[s.parent.parent,s,r,n]}insertColumn(e){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=i.cellOffset();n.insertColumn(o+e),this.quill.update(Pe.sources.USER);let l=s.rowOffset();e===0&&(l+=1),this.quill.setSelection(r.index+l,r.length,Pe.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=s.rowOffset();n.insertRow(o+e),this.quill.update(Pe.sources.USER),e>0?this.quill.setSelection(r,Pe.sources.SILENT):this.quill.setSelection(r.index+s.children.length,r.length,Pe.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,r){const n=this.quill.getSelection();if(n==null)return;const s=new Array(e).fill(0).reduce(i=>{const o=new Array(r).fill(`
`).join("");return i.insert(o,{table:J5()})},new mt().retain(n.index));this.quill.updateContents(s,Pe.sources.USER),this.quill.setSelection(n.index,Pe.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Pe.events.SCROLL_OPTIMIZE,e=>{e.some(r=>["TD","TR","TBODY","TABLE"].includes(r.target.tagName)?(this.quill.once(Pe.events.TEXT_CHANGE,(n,s,i)=>{i===Pe.sources.USER&&this.balanceTables()}),!0):!1)})}}const pL=pc("quill:toolbar");class eT extends uo{constructor(e,r){var n,s;if(super(e,r),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),E2e(i,this.options.container),(s=(n=e.container)==null?void 0:n.parentNode)==null||s.insertBefore(i,e.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){pL.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var l;const o=(l=this.options.handlers)==null?void 0:l[i];o&&this.addHandler(i,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(Pe.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(e,r){this.handlers[e]=r}attach(e){let r=Array.from(e.classList).find(s=>s.indexOf("ql-")===0);if(!r)return;if(r=r.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[r]==null&&this.quill.scroll.query(r)==null){pL.warn("ignoring attaching to nonexistent format",r,e);return}const n=e.tagName==="SELECT"?"change":"click";e.addEventListener(n,s=>{let i;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const l=e.options[e.selectedIndex];l.hasAttribute("selected")?i=!1:i=l.value||!1}else e.classList.contains("ql-active")?i=!1:i=e.value||!e.hasAttribute("value"),s.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[r]!=null)this.handlers[r].call(this,i);else if(this.quill.scroll.query(r).prototype instanceof Ks){if(i=prompt(`Enter ${r}`),!i)return;this.quill.updateContents(new mt().retain(o.index).delete(o.length).insert({[r]:i}),Pe.sources.USER)}else this.quill.format(r,i,Pe.sources.USER);this.update(o)}),this.controls.push([r,e])}update(e){const r=e==null?{}:this.quill.getFormat(e);this.controls.forEach(n=>{const[s,i]=n;if(i.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(r[s]==null)o=i.querySelector("option[selected]");else if(!Array.isArray(r[s])){let l=r[s];typeof l=="string"&&(l=l.replace(/"/g,'\\"')),o=i.querySelector(`option[value="${l}"]`)}o==null?(i.value="",i.selectedIndex=-1):o.selected=!0}else if(e==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const o=r[s],l=o===i.getAttribute("value")||o!=null&&o.toString()===i.getAttribute("value")||o==null&&!i.getAttribute("value");i.classList.toggle("ql-active",l),i.setAttribute("aria-pressed",l.toString())}else{const o=r[s]!=null;i.classList.toggle("ql-active",o),i.setAttribute("aria-pressed",o.toString())}})}}eT.DEFAULTS={};function xL(t,e,r){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${e}`),n.setAttribute("aria-pressed","false"),r!=null?(n.value=r,n.setAttribute("aria-label",`${e}: ${r}`)):n.setAttribute("aria-label",e),t.appendChild(n)}function E2e(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(r=>{const n=document.createElement("span");n.classList.add("ql-formats"),r.forEach(s=>{if(typeof s=="string")xL(n,s);else{const i=Object.keys(s)[0],o=s[i];Array.isArray(o)?C2e(n,i,o):xL(n,i,o)}}),t.appendChild(n)})}function C2e(t,e,r){const n=document.createElement("select");n.classList.add(`ql-${e}`),r.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),n.appendChild(i)}),t.appendChild(n)}eT.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(r=>{this.quill.scroll.query(r,pt.INLINE)!=null&&this.quill.format(r,!1,Pe.sources.USER)})}else this.quill.removeFormat(t.index,t.length,Pe.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",Pe.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,Pe.sources.USER),this.quill.format("direction",t,Pe.sources.USER)},indent(t){const e=this.quill.getSelection(),r=this.quill.getFormat(e),n=parseInt(r.indent||0,10);if(t==="+1"||t==="-1"){let s=t==="+1"?1:-1;r.direction==="rtl"&&(s*=-1),this.quill.format("indent",n+s,Pe.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Pe.sources.USER)},list(t){const e=this.quill.getSelection(),r=this.quill.getFormat(e);t==="check"?r.list==="checked"||r.list==="unchecked"?this.quill.format("list",!1,Pe.sources.USER):this.quill.format("list","unchecked",Pe.sources.USER):this.quill.format("list",t,Pe.sources.USER)}}};const T2e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',O2e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',I2e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',D2e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',M2e='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',L2e='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',R2e='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',P2e='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',bL='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',z2e='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',$2e='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',F2e='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',B2e='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',U2e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',K2e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',G2e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',q2e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',V2e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',H2e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',W2e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',X2e='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Y2e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Z2e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Q2e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',J2e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',ewe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',twe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',rwe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',nwe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',awe='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',swe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',iwe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',owe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',nx={align:{"":T2e,center:O2e,right:I2e,justify:D2e},background:M2e,blockquote:L2e,bold:R2e,clean:P2e,code:bL,"code-block":bL,color:z2e,direction:{"":$2e,rtl:F2e},formula:B2e,header:{1:U2e,2:K2e,3:G2e,4:q2e,5:V2e,6:H2e},italic:W2e,image:X2e,indent:{"+1":Y2e,"-1":Z2e},link:Q2e,list:{bullet:J2e,check:ewe,ordered:twe},script:{sub:rwe,super:nwe},strike:awe,table:swe,underline:iwe,video:owe},lwe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let yL=0;function vL(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class Tw{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",r=>{switch(r.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),r.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),vL(this.label,"aria-expanded"),vL(this.options,"aria-hidden")}buildItem(e){const r=document.createElement("span");r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item");const n=e.getAttribute("value");return n&&r.setAttribute("data-value",n),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",()=>{this.selectItem(r,!0)}),r.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(r,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),r}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=lwe,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${yL}`,yL+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(r=>{const n=this.buildItem(r);e.appendChild(n),r.selected===!0&&this.selectItem(n)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");e!==n&&(n!=null&&n.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),r&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const r=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}class Pq extends Tw{constructor(e,r){super(e),this.label.innerHTML=r,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(e){const r=super.buildItem(e);return r.style.backgroundColor=e.getAttribute("value")||"",r}selectItem(e,r){super.selectItem(e,r);const n=this.label.querySelector(".ql-color-label"),s=e&&e.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=s:n.style.fill=s)}}class zq extends Tw{constructor(e,r){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=r[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,r){super.selectItem(e,r);const n=e||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const cwe=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};let $q=class{constructor(e,r){this.quill=e,this.boundsContainer=r||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,cwe(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const r=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${r}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let o=0;if(i.right>s.right&&(o=s.right-i.right,this.root.style.left=`${r+o}px`),i.left<s.left&&(o=s.left-i.left,this.root.style.left=`${r+o}px`),i.bottom>s.bottom){const l=i.bottom-i.top,c=e.bottom-e.top+l;this.root.style.top=`${n-c}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}};const dwe=[!1,"center","right","justify"],uwe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],hwe=[!1,"serif","monospace"],fwe=["1","2","3",!1],gwe=["small",!1,"large","huge"];class Sb extends bg{constructor(e,r){super(e,r);const n=s=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};e.emitter.listenDOM("click",document.body,n)}addModule(e){const r=super.addModule(e);return e==="toolbar"&&this.extendToolbar(r),r}buildButtons(e,r){Array.from(e).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(i=>{if(i.startsWith("ql-")&&(i=i.slice(3),r[i]!=null))if(i==="direction")n.innerHTML=r[i][""]+r[i].rtl;else if(typeof r[i]=="string")n.innerHTML=r[i];else{const o=n.value||"";o!=null&&r[i][o]&&(n.innerHTML=r[i][o])}})})}buildPickers(e,r){this.pickers=Array.from(e).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&ap(s,dwe),typeof r.align=="object"))return new zq(s,r.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&ap(s,uwe,i==="background"?"#ffffff":"#000000"),new Pq(s,r[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?ap(s,hwe):s.classList.contains("ql-header")?ap(s,fwe):s.classList.contains("ql-size")&&ap(s,gwe)),new Tw(s)});const n=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(ut.events.EDITOR_CHANGE,n)}}Sb.DEFAULTS=pd({},bg.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Fq extends $q{constructor(e,r){super(e,r),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;r!=null?this.textbox.value=r:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:r}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,ut.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,ut.sources.USER)),this.quill.root.scrollTop=r;break}case"video":e=mwe(e);case"formula":{if(!e)break;const r=this.quill.getSelection(!0);if(r!=null){const n=r.index+r.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),e,ut.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",ut.sources.USER),this.quill.setSelection(n+2,ut.sources.USER)}break}}this.textbox.value="",this.hide()}}function mwe(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function ap(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(n=>{const s=document.createElement("option");n===r?s.setAttribute("selected","selected"):s.setAttribute("value",String(n)),t.appendChild(s)})}const pwe=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Bq extends Fq{constructor(e,r){super(e,r),this.quill.on(ut.events.EDITOR_CHANGE,(n,s,i,o)=>{if(n===ut.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&o===ut.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const l=this.quill.getLines(s.index,s.length);if(l.length===1){const c=this.quill.getBounds(s);c!=null&&this.position(c)}else{const c=l[l.length-1],d=this.quill.getIndex(c),u=Math.min(c.length()-1,s.index+s.length-d),h=this.quill.getBounds(new Yu(d,u));h!=null&&this.position(h)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(ut.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const r=this.quill.getBounds(e);r!=null&&this.position(r)}},1)})}cancel(){this.show()}position(e){const r=super.position(e),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",r!==0&&(n.style.marginLeft=`${-1*r-n.offsetWidth/2}px`),r}}st(Bq,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Uq extends Sb{constructor(e,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=pwe),super(e,r),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Bq(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),nx),this.buildPickers(e.container.querySelectorAll("select"),nx))}}Uq.DEFAULTS=pd({},Sb.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Pe.sources.USER)}}}}});const xwe=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Kq extends Fq{constructor(){super(...arguments);st(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",r=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),r.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",r=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,ut.sources.USER),delete this.linkRange}r.preventDefault(),this.hide()}),this.quill.on(ut.events.SELECTION_CHANGE,(r,n,s)=>{if(r!=null){if(r.length===0&&s===ut.sources.USER){const[i,o]=this.quill.scroll.descendant(Zc,r.index);if(i!=null){this.linkRange=new Yu(r.index-o,i.length());const l=Zc.formats(i.domNode);this.preview.textContent=l,this.preview.setAttribute("href",l),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}st(Kq,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class Gq extends Sb{constructor(e,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=xwe),super(e,r),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),nx),this.buildPickers(e.container.querySelectorAll("select"),nx),this.tooltip=new Kq(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(r,n)=>{e.handlers.link.call(e,!n.format.link)}))}}Gq.DEFAULTS=pd({},Sb.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let r=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(r)&&r.indexOf("mailto:")!==0&&(r=`mailto:${r}`);const{tooltip:n}=this.quill.theme;n.edit("link",r)}else this.quill.format("link",!1,Pe.sources.USER)}}}}});Pe.register({"attributors/attribute/direction":jq,"attributors/class/align":vq,"attributors/class/background":Mke,"attributors/class/color":Dke,"attributors/class/direction":Nq,"attributors/class/font":Aq,"attributors/class/size":Cq,"attributors/style/align":kq,"attributors/style/background":W5,"attributors/style/color":H5,"attributors/style/direction":_q,"attributors/style/font":Eq,"attributors/style/size":Tq},!0);Pe.register({"formats/align":vq,"formats/direction":Nq,"formats/indent":N2e,"formats/background":W5,"formats/color":H5,"formats/font":Aq,"formats/size":Cq,"formats/blockquote":vA,"formats/code-block":Ia,"formats/header":kA,"formats/list":_b,"formats/bold":rx,"formats/code":X5,"formats/italic":wA,"formats/link":Zc,"formats/script":jA,"formats/strike":NA,"formats/underline":_A,"formats/formula":Dv,"formats/image":_2e,"formats/video":Mv,"modules/syntax":Rq,"modules/table":A2e,"modules/toolbar":eT,"themes/bubble":Uq,"themes/snow":Gq,"ui/icons":nx,"ui/picker":Tw,"ui/icon-picker":zq,"ui/color-picker":Pq,"ui/tooltip":$q},!0);class Ab extends ae.Component{constructor(e){super(e),this.editingAreaRef=N.createRef(),this.containerRef=N.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(n,s,i,o)=>{var l,c;n==="text-change"?(l=this.onEditorChangeText)==null||l.call(this,this.editor.getSemanticHTML(),s,o,this.unprivilegedEditor):n==="selection-change"&&((c=this.onEditorChangeSelection)==null||c.call(this,s,o,this.unprivilegedEditor))};const r=this.isControlled()?e.value:e.defaultValue;this.value=r??""}validateProps(e){if(ae.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ae.Children.count(e.children)){const r=ae.Children.only(e.children);if((r==null?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,r){if(this.validateProps(e),!this.editor||this.state.generation!==r.generation)return!0;if("value"in e){const n=this.getEditorContents(),s=e.value??"";this.isEqualValue(s,n)||this.setEditorContents(this.editor,s)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(n=>!$c(e[n],this.props[n]))}shouldComponentRegenerate(e){return this.dirtyProps.some(r=>!$c(e[r],this.props[r]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,r){if(this.editor&&this.shouldComponentRegenerate(e)){const n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.editor&&e.placeholder!==this.props.placeholder&&(this.editor.root.dataset.placeholder=this.props.placeholder||""),this.state.generation!==r.generation){const{delta:n,selection:s}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const i=this.editor;i.setContents(n),kL(()=>this.setEditorSelection(i,s))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){var n,s;if(!this.editor)return;this.unhookEditor(this.editor);const e=(n=this.props.modules)==null?void 0:n.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const i=(s=this.containerRef.current)==null?void 0:s.querySelector(".ql-toolbar");i&&i.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,r){const n=new Pe(e,r);return r.tabIndex!=null&&this.setEditorTabIndex(n,r.tabIndex),this.hookEditor(n),n}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,r){return this.isDelta(e)&&this.isDelta(r)?$c(e.ops,r.ops):$c(e,r)}setEditorContents(e,r){this.value=r;const n=this.getEditorSelection();typeof r=="string"?e.setContents(e.clipboard.convert({html:r})):e.setContents(r),kL(()=>this.setEditorSelection(e,n))}setEditorSelection(e,r){if(this.selection=r,r){const n=e.getLength();r.index=Math.max(0,Math.min(r.index,n-1)),r.length=Math.max(0,Math.min(r.length,n-1-r.index)),e.setSelection(r)}}setEditorTabIndex(e,r){var n;(n=e==null?void 0:e.scroll)!=null&&n.domNode&&(e.scroll.domNode.tabIndex=r)}setEditorReadOnly(e,r){r?e.disable():e.enable()}makeUnprivilegedEditor(e){const r=e;return{getHTML:()=>r.root.innerHTML,getSemanticHTML:r.getSemanticHTML.bind(r),getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:r}=this.props,{generation:n}=this.state,s={key:n,ref:this.editingAreaRef};return ae.Children.count(e)?ae.cloneElement(ae.Children.only(e),s):r?ae.createElement("pre",{...s}):ae.createElement("div",{...s})}render(){return ae.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,r,n,s){var o,l;if(!this.editor)return;const i=this.isDelta(this.value)?s.getContents():s.getSemanticHTML();i!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=i,(l=(o=this.props).onChange)==null||l.call(o,e,r,n,s))}onEditorChangeSelection(e,r,n){var l,c,d,u,h,f;if(!this.editor)return;const s=this.getEditorSelection(),i=!s&&e,o=s&&!e;$c(e,s)||(this.selection=e,(c=(l=this.props).onChangeSelection)==null||c.call(l,e,r,n),i?(u=(d=this.props).onFocus)==null||u.call(d,e,r,n):o&&((f=(h=this.props).onBlur)==null||f.call(h,s,r,n)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}Ab.displayName="React Quill";Ab.Quill=Pe;Ab.defaultProps={theme:"snow",modules:{},readOnly:!1};function kL(t){Promise.resolve().then(t)}const Ow=({preSelectedRecipient:t=null})=>{const{currentUser:e}=At(),[r,n]=N.useState("INBOX"),[s,i]=N.useState([]),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,h]=N.useState([]),[f,g]=N.useState(""),[x,m]=N.useState(""),[p,b]=N.useState(""),[v,y]=N.useState([]),[w,k]=N.useState([]),[j,_]=N.useState([]),[S,A]=N.useState(null),[T,E]=N.useState(new Set);N.useEffect(()=>{r==="COMPOSE"?(D(),t&&!S&&(A({id:t.id,name:t.fullName}),g(t.id))):(A(null),g(""),m(""),b(""),E(new Set),F()),C()},[r]);const C=async()=>{try{const q=await O.messages.getFolders();h(q||[])}catch(q){console.error("Kunde inte hmta mappar",q)}},z=async()=>{const q=prompt("Ange namn p den nya mappen:");if(q)try{await O.messages.createFolder(q),C()}catch{alert("Kunde inte skapa mappen.")}},M=async(q,H)=>{try{await O.messages.moveMessage(q,H),l(null),F()}catch{alert("Kunde inte flytta meddelandet.")}},F=async()=>{d(!0);try{let q;if(r==="INBOX")q=await O.messages.getInbox();else if(r==="SENT")q=await O.messages.getSent();else if(r.startsWith("FOLDER_")){const H=r.replace("FOLDER_","");q=await O.messages.getFolder(H)}i(q||[]),l(null)}catch(q){console.error("Kunde inte hmta meddelanden",q)}finally{d(!1)}},D=async()=>{try{const q=await O.messages.getContacts(),H=q?Object.values(q).flat():[],Z=Array.from(new Map(H.map(te=>[te.id,te])).values());k(Z)}catch(q){console.error("Kunde inte hmta mottagare",q)}},L=async q=>{if(l(q),K(q.id),!q.isRead&&r!=="SENT")try{await O.messages.markAsRead(q.id),i(H=>H.map(Z=>Z.id===q.id?{...Z,isRead:!0}:Z))}catch(H){console.error("Kunde inte markera som lst",H)}},K=async q=>{try{const H=await O.messages.getThread(q);_(H||[])}catch(H){console.error("Kunde inte hmta trd",H)}},$=async q=>{if(q.preventDefault(),!f||!x||!p)return alert("Fyll i alla flt");d(!0);try{const H=new FormData;H.append("recipientId",f),H.append("subject",x),H.append("content",p),S!=null&&S.parentId&&H.append("parentId",S.parentId),v.forEach(Z=>{H.append("attachments",Z)}),await O.messages.send(H),alert("Meddelande skickat!"),y([]),n("SENT")}catch{alert("Kunde inte skicka.")}finally{d(!1)}},R=()=>{const q=r==="INBOX"||r.startsWith("FOLDER_")?o.senderId:o.recipientId,H=r==="INBOX"||r.startsWith("FOLDER_")?o.senderName:o.recipientName,Z=o.parentId||o.id;A({id:q,name:H,parentId:Z}),g(q),m(o.subject.startsWith("Sv:")?o.subject:`Sv: ${o.subject}`),n("COMPOSE")},Y=()=>{A(null),g(""),m(""),b(""),y([]),n("COMPOSE")},ee=(q,H)=>{H.stopPropagation(),E(Z=>{const te=new Set(Z);return te.has(q)?te.delete(q):te.add(q),te})},B=()=>{T.size===s.length?E(new Set):E(new Set(s.map(q=>q.id)))},U=async()=>{if(T.size!==0)try{await O.messages.bulkMarkAsRead([...T]),i(q=>q.map(H=>T.has(H.id)?{...H,isRead:!0}:H)),E(new Set)}catch(q){console.error("Kunde inte markera som lsta",q)}},V=async()=>{const q=r.startsWith("FOLDER_")?r.replace("FOLDER_",""):null;try{await O.messages.markAllAsRead(q),i(H=>H.map(Z=>({...Z,isRead:!0}))),E(new Set)}catch(H){console.error("Kunde inte markera alla som lsta",H)}},se=async()=>{if(T.size!==0&&confirm(`Ta bort ${T.size} meddelande(n) permanent?`))try{await O.messages.bulkDelete([...T]),i(q=>q.filter(H=>!T.has(H.id))),E(new Set),l(null)}catch(q){console.error("Kunde inte ta bort meddelanden",q)}},Ne=q=>{if(!q)return"";const H=/(https?:\/\/[^\s]+)/g;return q.replace(H,Z=>`<a href="${Z}" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline font-bold">${Z}</a>`)},ie={toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","clean"]]};return a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[a.jsxs("div",{className:"w-full md:w-64 bg-gray-50 dark:bg-[#131314] border-r border-gray-200 dark:border-[#3c4043] flex flex-col",children:[a.jsx("div",{className:"p-4",children:a.jsxs("button",{onClick:Y,className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 shadow-md transition-colors",children:[a.jsx(Wr,{size:18})," Nytt Meddelande"]})}),a.jsxs("nav",{className:"flex-1 p-2 space-y-1",children:[a.jsx("button",{onClick:()=>n("INBOX"),className:`w-full flex items-center justify-between px-4 py-3 text-sm font-bold rounded-lg transition-colors ${r==="INBOX"?"bg-white dark:bg-[#1E1F20] shadow-sm text-indigo-600":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-[#282a2c]"}`,children:a.jsxs("span",{className:"flex items-center gap-3",children:[a.jsx(yge,{size:18})," Inkorg"]})}),a.jsx("button",{onClick:()=>n("SENT"),className:`w-full flex items-center justify-between px-4 py-3 text-sm font-bold rounded-lg transition-colors ${r==="SENT"?"bg-white dark:bg-[#1E1F20] shadow-sm text-indigo-600":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-[#282a2c]"}`,children:a.jsxs("span",{className:"flex items-center gap-3",children:[a.jsx(Wr,{size:18})," Skickat"]})}),u.map(q=>a.jsx("button",{onClick:()=>n(`FOLDER_${q.slug}`),className:`w-full flex items-center justify-between px-4 py-3 text-sm font-bold rounded-lg transition-colors 
                                ${r===`FOLDER_${q.slug}`?q.slug==="fel-loggar"?"bg-red-50 dark:bg-red-900/20 text-red-600":"bg-white dark:bg-[#1E1F20] shadow-sm text-indigo-600":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-[#282a2c]"}`,children:a.jsxs("span",{className:"flex items-center gap-3",children:[q.slug==="fel-loggar"?a.jsx(Tt,{size:18}):a.jsx(Qi,{size:18}),q.name]})},q.id)),a.jsxs("button",{onClick:z,className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-gray-400 hover:text-indigo-600 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-lg transition-colors border-t border-gray-100 dark:border-[#3c4043] mt-2",children:[a.jsx(jt,{size:18})," Skapa ny mapp"]})]})]}),a.jsx("div",{className:"flex-1 flex flex-col bg-white dark:bg-[#1E1F20]",children:r==="COMPOSE"?a.jsxs("div",{className:"p-8 flex-1 animate-in fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:S?"Svara p meddelande":"Skriv nytt meddelande"}),a.jsx("button",{onClick:()=>n("INBOX"),className:"p-2 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-full",children:a.jsx(Je,{size:20,className:"text-gray-500"})})]}),a.jsxs("form",{onSubmit:$,className:"space-y-4 max-w-2xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mottagare"}),S?a.jsxs("div",{className:"flex items-center gap-2 w-full p-3 bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-900 rounded-xl text-indigo-700 dark:text-indigo-300 font-bold",children:[a.jsx(UD,{size:16}),a.jsx("span",{children:S.name}),a.jsx("input",{type:"hidden",value:S.id})]}):a.jsxs("select",{className:"w-full p-3 bg-gray-50 dark:bg-[#131314] border border-gray-200 dark:border-[#3c4043] rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white",value:f,onChange:q=>g(q.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Vlj mottagare..."}),w.length>0?w.map(q=>a.jsxs("option",{value:q.id,children:[q.fullName," (",q.role,")"]},q.id)):a.jsx("option",{disabled:!0,children:"Inga kontakter hittades"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"mne"}),a.jsx("input",{className:"w-full p-3 bg-gray-50 dark:bg-[#131314] border border-gray-200 dark:border-[#3c4043] rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white",value:x,onChange:q=>m(q.target.value),placeholder:"Vad gller saken?",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Meddelande"}),a.jsx("div",{className:"dark:bg-[#131314] rounded-xl overflow-hidden border border-gray-200 dark:border-[#3c4043]",children:a.jsx(Ab,{theme:"snow",value:p,onChange:b,modules:ie,className:"h-64 mb-12 dark:text-white",placeholder:"Skriv ditt meddelande..."})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Bifoga filer (max 10MB)"}),a.jsx("input",{type:"file",multiple:!0,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/40 dark:file:text-indigo-300",onChange:q=>y(Array.from(q.target.files))}),v.length>0&&a.jsx("div",{className:"mt-2 space-y-1",children:v.map((q,H)=>a.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[a.jsx(jt,{size:10})," ",q.name," (",(q.size/1024/1024).toFixed(2)," MB)"]},H))})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:()=>n("INBOX"),className:"px-6 py-2 font-bold text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Avbryt"}),a.jsxs("button",{type:"submit",disabled:c,className:"bg-indigo-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[a.jsx(Wr,{size:18})," ",c?"Skickar...":"Skicka"]})]})]})]}):a.jsxs("div",{className:"flex h-full",children:[a.jsxs("div",{className:`w-full md:w-1/3 border-r border-gray-100 dark:border-[#3c4043] flex flex-col ${o?"hidden md:flex":"flex"}`,children:[r!=="SENT"&&s.length>0&&a.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 dark:border-[#3c4043] bg-gray-50/80 dark:bg-[#131314] flex items-center gap-2 flex-wrap",children:[a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-xs font-bold text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:[a.jsx("input",{type:"checkbox",checked:T.size===s.length&&s.length>0,onChange:B,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Alla"]}),a.jsx("div",{className:"h-4 w-px bg-gray-200 dark:bg-gray-700"}),a.jsxs("button",{onClick:V,className:"text-xs font-bold text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 flex items-center gap-1 transition-colors",title:"Markera alla som lsta",children:[a.jsx(nr,{size:13})," Ls alla"]}),T.size>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-4 w-px bg-gray-200 dark:bg-gray-700"}),a.jsxs("button",{onClick:U,className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 flex items-center gap-1 transition-colors",children:[a.jsx(nr,{size:13})," Markera (",T.size,")"]}),a.jsxs("button",{onClick:se,className:"text-xs font-bold text-red-500 hover:text-red-700 flex items-center gap-1 transition-colors",children:[a.jsx(qt,{size:13})," Ta bort (",T.size,")"]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:c?a.jsx("div",{className:"p-10 text-center text-gray-400",children:"Laddar meddelanden..."}):s.length===0?a.jsx("div",{className:"p-10 text-center text-gray-400",children:"Inga meddelanden hr."}):a.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:s.map(q=>a.jsxs("li",{onClick:()=>L(q),className:`p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors flex gap-3 ${(o==null?void 0:o.id)===q.id?"bg-indigo-50 dark:bg-indigo-900/20":""} ${!q.isRead&&r!=="SENT"?"border-l-4 border-indigo-500 bg-gray-50/50":""}`,children:[r!=="SENT"&&a.jsx("div",{className:"pt-0.5 flex-shrink-0",children:a.jsx("input",{type:"checkbox",checked:T.has(q.id),onChange:H=>ee(q.id,H),onClick:H=>H.stopPropagation(),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsx("span",{className:`text-sm font-bold truncate ${!q.isRead&&r!=="SENT"?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:r==="SENT"?`Till: ${q.recipientName}`:q.senderName}),a.jsx("span",{className:"text-[10px] text-gray-400 flex-shrink-0 ml-2",children:new Date(q.timestamp).toLocaleDateString()})]}),a.jsx("p",{className:`text-sm mb-1 truncate ${!q.isRead&&r!=="SENT"?"font-bold text-gray-800 dark:text-gray-200":"text-gray-600 dark:text-gray-400"}`,children:q.subject}),a.jsx("p",{className:"text-xs text-gray-400 line-clamp-1",children:q.content})]})]},q.id))})})]}),a.jsx("div",{className:`flex-1 p-8 bg-gray-50/30 dark:bg-[#1E1F20] ${o?"block":"hidden md:flex items-center justify-center"}`,children:o?a.jsxs("div",{className:"animate-in fade-in",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-gray-200 dark:border-[#3c4043] pb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:o.subject}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-700 dark:text-indigo-300 font-bold text-lg",children:r==="INBOX"?o.senderName[0]:o.recipientName[0]}),a.jsxs("div",{children:[a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:r==="INBOX"?o.senderName:`Till: ${o.recipientName}`}),a.jsx(Nd,{to:`/profile/${r==="INBOX"?o.senderId:o.recipientId}`,className:"text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400",children:a.jsx(Wo,{size:14})})]}),a.jsx("p",{className:"text-xs",children:new Date(o.timestamp).toLocaleString()})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[r!=="SENT"&&a.jsxs(a.Fragment,{children:[a.jsxs("select",{className:"px-3 py-2 bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#3c4043] rounded-lg text-xs font-bold outline-none focus:ring-2 focus:ring-indigo-500 dark:text-gray-300",value:"",onChange:q=>M(o.id,q.target.value||null),children:[a.jsx("option",{value:"",children:"Flytta till..."}),a.jsx("option",{value:"",children:"Inkorg"}),u.map(q=>a.jsx("option",{value:q.id,children:q.name},q.id))]}),r==="INBOX"&&a.jsxs("button",{onClick:R,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2 font-bold text-sm shadow-md",children:[a.jsx(UD,{size:16})," Svara"]})]}),a.jsx("button",{onClick:()=>l(null),className:"md:hidden p-2 text-gray-500",children:a.jsx(or,{size:20})})]})]}),a.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-800 dark:text-gray-300 break-words overflow-x-hidden leading-relaxed",children:a.jsx("div",{className:"space-y-6",children:j.map((q,H)=>a.jsxs("div",{className:`p-6 rounded-2xl border ${q.id===o.id?"border-indigo-200 bg-indigo-50/20 dark:border-indigo-900/50 dark:bg-indigo-900/10":"border-gray-100 bg-white dark:border-[#3c4043] dark:bg-[#131314]"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-xs font-bold text-indigo-700",children:q.senderName[0]}),a.jsx("span",{className:"font-bold text-sm",children:q.senderName})]}),a.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(q.timestamp).toLocaleString()})]}),a.jsx("div",{className:"text-sm ql-editor !p-0",dangerouslySetInnerHTML:{__html:Ne(q.content)}}),q.attachments&&q.attachments.length>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-[#3c4043] flex flex-wrap gap-2",children:q.attachments.map(Z=>a.jsxs("a",{href:Z.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-[#282a2c] rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors",children:[a.jsx(Wo,{size:12})," ",Z.fileName]},Z.id))})]},q.id))})})]}):a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(Qi,{size:64,className:"mx-auto mb-4 opacity-10"}),a.jsx("p",{children:"Vlj ett meddelande fr att lsa"})]})})]})})]})},tT=(t,e)=>{const[r,n]=N.useState(e),[s,i]=N.useState(!1);return N.useEffect(()=>{const l=localStorage.getItem(`widgets_${t}`);if(l)try{n({...e,...JSON.parse(l)})}catch(c){console.error("Failed to parse saved widgets",c)}i(!0)},[t]),{widgets:r,toggleWidget:l=>{const c={...r,[l]:!r[l]};n(c),localStorage.setItem(`widgets_${t}`,JSON.stringify(c))},isLoaded:s}},rT=({widgets:t,toggleWidget:e,widgetLabels:r})=>{const[n,s]=N.useState(!1);return a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>s(!0),className:"p-2 bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#3c4043] rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors",title:"Anpassa instrumentpanel",children:a.jsx(Xo,{size:18})}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-2xl p-6 shadow-xl border border-gray-200 dark:border-[#3c4043] animate-in zoom-in-95",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold dark:text-white",children:"Anpassa instrumentpanel"}),a.jsx("button",{onClick:()=>s(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-full",children:a.jsx(Je,{size:20,className:"dark:text-white"})})]}),a.jsx("div",{className:"space-y-3",children:Object.entries(r).map(([i,o])=>a.jsxs("button",{onClick:()=>e(i),className:"w-full flex items-center justify-between p-4 rounded-xl border border-gray-100 dark:border-[#3c4043] hover:bg-gray-50 dark:hover:bg-[#282a2c]",children:[a.jsx("span",{className:"font-bold dark:text-white",children:o}),t[i]?a.jsx(Xo,{className:"text-indigo-600",size:20}):a.jsx(ew,{className:"text-gray-400",size:20})]},i))}),a.jsx("button",{onClick:()=>s(!1),className:"w-full mt-6 bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700",children:"Klar"})]})})]})},bwe=()=>{const{t}=nt(),[e,r]=N.useState("overview"),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[d,u]=N.useState(!0),[h,f]=N.useState(0),{widgets:g,toggleWidget:x}=tT("admin",{stats:!0,calendar:!0,recentUsers:!0,recentDocs:!0,messages:!0,onlineFriends:!0,tickets:!0}),m={stats:t("dashboard.widgets.stats"),calendar:t("dashboard.widgets.calendar"),recentUsers:t("dashboard.widgets.recent_users"),recentDocs:t("dashboard.widgets.recent_docs"),messages:t("dashboard.widgets.messages"),onlineFriends:t("dashboard.widgets.online_friends"),tickets:t("dashboard.widgets.tickets")},p=async()=>{u(!0);try{const[b,v,y,w]=await Promise.all([O.users.getAll(0,1e3).catch(S=>(console.error("Users fetch error:",S),[])),O.courses.getAll().catch(S=>(console.error("Courses fetch error:",S),[])),O.documents.getAll().catch(S=>(console.error("Documents fetch error:",S),[])),O.messages.getUnreadCount().catch(S=>(console.error("Unread fetch error:",S),0))]),k=Array.isArray(b)?b:(b==null?void 0:b.content)||[],j=Array.isArray(v)?v:(v==null?void 0:v.content)||[],_=Array.isArray(y)?y:(y==null?void 0:y.content)||[];s(k),o(j),c(_),f(typeof w=="number"?w:0)}catch(b){console.error("Kunde inte hmta dashboard-data",b)}finally{u(!1)}};return N.useEffect(()=>{p()},[]),d?a.jsx("div",{className:"p-20 flex justify-center",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:40})}):a.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in pb-20",children:[a.jsx("header",{className:"mb-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t("dashboard.live_overview")}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("dashboard.realtime_data")})]})}),a.jsxs("div",{className:"flex gap-6 border-b border-gray-200 dark:border-[#3c4043] mb-8 overflow-x-auto items-center justify-between",children:[a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("button",{onClick:()=>r("overview"),className:`pb-3 flex items-center gap-2 font-bold text-lg transition-colors border-b-2 whitespace-nowrap capitalize ${e==="overview"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[a.jsx(wi,{size:20})," ",t("dashboard.tabs.overview")]}),a.jsxs("button",{onClick:()=>r("communication"),className:`pb-3 flex items-center gap-2 font-bold text-lg transition-colors border-b-2 whitespace-nowrap capitalize ${e==="communication"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[a.jsxs("div",{className:"relative overflow-visible",children:[a.jsx(er,{size:20}),h>0&&a.jsx("span",{className:"absolute -top-2 -right-3 bg-red-500 text-white text-[10px] min-w-[18px] h-[18px] px-1 flex items-center justify-center rounded-full font-bold",children:h})]}),t("dashboard.tabs.communication")]})]}),e==="overview"&&a.jsx(rT,{widgets:g,toggleWidget:x,widgetLabels:m})]}),e==="overview"&&a.jsx(vxe,{users:n,courses:i,documents:l,fetchStats:p,setActiveTab:r,widgets:g,unreadCount:h}),e==="communication"&&a.jsx("div",{className:"h-[700px]",children:a.jsx(Ow,{})})]})},vo=N.forwardRef(({children:t,style:e,className:r,onMouseDown:n,onMouseUp:s,onTouchEnd:i,...o},l)=>{const{currentDesignSystem:c}=Z2(),d={...e,background:c.card.background,backdropFilter:c.card.backdrop,border:c.card.border,borderRadius:c.card.radius.xl,boxShadow:c.card.shadow,display:"flex",flexDirection:"column",overflow:"hidden"};return a.jsx("div",{ref:l,style:d,className:`${r} widget-wrapper transition-shadow duration-200`,onMouseDown:n,onMouseUp:s,onTouchEnd:i,...o,children:a.jsx("div",{className:"flex-1 w-full h-full overflow-y-auto custom-scrollbar relative",children:t})})});let ywe={data:""},vwe=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||ywe},kwe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wwe=/\/\*[^]*?\*\/|  +/g,wL=/\n+/g,Fc=(t,e)=>{let r="",n="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?Fc(o,i):i+"{"+Fc(o,i[1]=="k"?"":e)+"}":typeof o=="object"?n+=Fc(o,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Fc.p?Fc.p(i,o):i+":"+o+";")}return r+(e&&s?e+"{"+s+"}":s)+n},kl={},qq=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+qq(t[r]);return e}return t},jwe=(t,e,r,n,s)=>{let i=qq(t),o=kl[i]||(kl[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!kl[o]){let c=i!==t?t:(d=>{let u,h,f=[{}];for(;u=kwe.exec(d.replace(wwe,""));)u[4]?f.shift():u[3]?(h=u[3].replace(wL," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(wL," ").trim();return f[0]})(t);kl[o]=Fc(s?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&kl.g?kl.g:null;return r&&(kl.g=kl[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(kl[o],e,n,l),o},Nwe=(t,e,r)=>t.reduce((n,s,i)=>{let o=e[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Fc(l,""):l===!1?"":l}return n+s+(o??"")},"");function Iw(t){let e=this||{},r=t.call?t(e.p):t;return jwe(r.unshift?r.raw?Nwe(r,[].slice.call(arguments,1),e.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):r,vwe(e.target),e.g,e.o,e.k)}let Vq,SA,AA;Iw.bind({g:1});let rc=Iw.bind({k:1});function _we(t,e,r,n){Fc.p=e,Vq=t,SA=r,AA=n}function zd(t,e){let r=this||{};return function(){let n=arguments;function s(i,o){let l=Object.assign({},i),c=l.className||s.className;r.p=Object.assign({theme:SA&&SA()},l),r.o=/ *go\d+/.test(c),l.className=Iw.apply(r,n)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),AA&&d[0]&&AA(l),Vq(d,l)}return s}}var Swe=t=>typeof t=="function",V1=(t,e)=>Swe(t)?t(e):t,Awe=(()=>{let t=0;return()=>(++t).toString()})(),Hq=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Ewe=20,nT="default",Wq=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:n}=e;return Wq(t,{type:t.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Lv=[],Xq={toasts:[],pausedAt:void 0,settings:{toastLimit:Ewe}},To={},Yq=(t,e=nT)=>{To[e]=Wq(To[e]||Xq,t),Lv.forEach(([r,n])=>{r===e&&n(To[e])})},Zq=t=>Object.keys(To).forEach(e=>Yq(t,e)),Cwe=t=>Object.keys(To).find(e=>To[e].toasts.some(r=>r.id===t)),Dw=(t=nT)=>e=>{Yq(e,t)},Twe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Owe=(t={},e=nT)=>{let[r,n]=N.useState(To[e]||Xq),s=N.useRef(To[e]);N.useEffect(()=>(s.current!==To[e]&&n(To[e]),Lv.push([e,n]),()=>{let o=Lv.findIndex(([l])=>l===e);o>-1&&Lv.splice(o,1)}),[e]);let i=r.toasts.map(o=>{var l,c,d;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((l=t[o.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((c=t[o.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||Twe[o.type],style:{...t.style,...(d=t[o.type])==null?void 0:d.style,...o.style}}});return{...r,toasts:i}},Iwe=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Awe()}),Eb=t=>(e,r)=>{let n=Iwe(e,t,r);return Dw(n.toasterId||Cwe(n.id))({type:2,toast:n}),n.id},tr=(t,e)=>Eb("blank")(t,e);tr.error=Eb("error");tr.success=Eb("success");tr.loading=Eb("loading");tr.custom=Eb("custom");tr.dismiss=(t,e)=>{let r={type:3,toastId:t};e?Dw(e)(r):Zq(r)};tr.dismissAll=t=>tr.dismiss(void 0,t);tr.remove=(t,e)=>{let r={type:4,toastId:t};e?Dw(e)(r):Zq(r)};tr.removeAll=t=>tr.remove(void 0,t);tr.promise=(t,e,r)=>{let n=tr.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?V1(e.success,s):void 0;return i?tr.success(i,{id:n,...r,...r==null?void 0:r.success}):tr.dismiss(n),s}).catch(s=>{let i=e.error?V1(e.error,s):void 0;i?tr.error(i,{id:n,...r,...r==null?void 0:r.error}):tr.dismiss(n)}),t};var Dwe=1e3,Mwe=(t,e="default")=>{let{toasts:r,pausedAt:n}=Owe(t,e),s=N.useRef(new Map).current,i=N.useCallback((h,f=Dwe)=>{if(s.has(h))return;let g=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},f);s.set(h,g)},[]);N.useEffect(()=>{if(n)return;let h=Date.now(),f=r.map(g=>{if(g.duration===1/0)return;let x=(g.duration||0)+g.pauseDuration-(h-g.createdAt);if(x<0){g.visible&&tr.dismiss(g.id);return}return setTimeout(()=>tr.dismiss(g.id,e),x)});return()=>{f.forEach(g=>g&&clearTimeout(g))}},[r,n,e]);let o=N.useCallback(Dw(e),[e]),l=N.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=N.useCallback((h,f)=>{o({type:1,toast:{id:h,height:f}})},[o]),d=N.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=N.useCallback((h,f)=>{let{reverseOrder:g=!1,gutter:x=8,defaultPosition:m}=f||{},p=r.filter(y=>(y.position||m)===(h.position||m)&&y.height),b=p.findIndex(y=>y.id===h.id),v=p.filter((y,w)=>w<b&&y.visible).length;return p.filter(y=>y.visible).slice(...g?[v+1]:[0,v]).reduce((y,w)=>y+(w.height||0)+x,0)},[r]);return N.useEffect(()=>{r.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=s.get(h.id);f&&(clearTimeout(f),s.delete(h.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},Lwe=rc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Rwe=rc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pwe=rc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zwe=zd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Lwe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Rwe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Pwe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$we=rc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Fwe=zd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${$we} 1s linear infinite;
`,Bwe=rc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Uwe=rc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Kwe=zd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Bwe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Uwe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Gwe=zd("div")`
  position: absolute;
`,qwe=zd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Vwe=rc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Hwe=zd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Vwe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Wwe=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?N.createElement(Hwe,null,e):e:r==="blank"?null:N.createElement(qwe,null,N.createElement(Fwe,{...n}),r!=="loading"&&N.createElement(Gwe,null,r==="error"?N.createElement(zwe,{...n}):N.createElement(Kwe,{...n})))},Xwe=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Ywe=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Zwe="0%{opacity:0;} 100%{opacity:1;}",Qwe="0%{opacity:1;} 100%{opacity:0;}",Jwe=zd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,eje=zd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,tje=(t,e)=>{let r=t.includes("top")?1:-1,[n,s]=Hq()?[Zwe,Qwe]:[Xwe(r),Ywe(r)];return{animation:e?`${rc(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${rc(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},rje=N.memo(({toast:t,position:e,style:r,children:n})=>{let s=t.height?tje(t.position||e||"top-center",t.visible):{opacity:0},i=N.createElement(Wwe,{toast:t}),o=N.createElement(eje,{...t.ariaProps},V1(t.message,t));return N.createElement(Jwe,{className:t.className,style:{...s,...r,...t.style}},typeof n=="function"?n({icon:i,message:o}):N.createElement(N.Fragment,null,i,o))});_we(N.createElement);var nje=({id:t,className:e,style:r,onHeightUpdate:n,children:s})=>{let i=N.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return N.createElement("div",{ref:i,className:e,style:r},s)},aje=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Hq()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...s}},sje=Iw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Iy=16,ije=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=Mwe(r,i);return N.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Iy,left:Iy,right:Iy,bottom:Iy,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let h=u.position||e,f=d.calculateOffset(u,{reverseOrder:t,gutter:n,defaultPosition:e}),g=aje(h,f);return N.createElement(nje,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?sje:"",style:g},u.type==="custom"?V1(u.message,u):s?s(u):N.createElement(rje,{toast:u,position:h}))}))},Ae=tr;const oje=({mentorId:t})=>{const[e,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(!1);N.useEffect(()=>{l()},[t]);const l=async()=>{try{s(!0);const h=t?await O.analytics.predictive.getHighRiskForMentor(t):await O.analytics.predictive.getHighRisk();r(h)}catch(h){console.error("Failed to fetch risk flags:",h)}finally{s(!1)}},c=async()=>{try{o(!0),tr.loading("Kr batch-analys...",{id:"batch-risk"}),await O.analytics.predictive.analyzeAll(),tr.success("Analys startad!",{id:"batch-risk"}),setTimeout(l,5e3)}catch{tr.error("Misslyckades att starta analys",{id:"batch-risk"})}finally{o(!1)}},d=h=>{switch(h){case"CRITICAL":return"text-red-600 bg-red-100 dark:bg-red-900/30";case"HIGH":return"text-orange-600 bg-orange-100 dark:bg-orange-900/30";case"MEDIUM":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30";default:return"text-blue-600 bg-blue-100 dark:bg-blue-900/30"}},u=h=>h==="CRITICAL"||h==="HIGH"?a.jsx(Dr,{size:16}):a.jsx(Xl,{size:16});return a.jsx(vo,{title:"Prediktiv Riskvervakning",icon:a.jsx(Dr,{size:20,className:"text-orange-500"}),subtitle:"AI-identifierade elever med behov av std",actions:a.jsx("button",{onClick:c,disabled:i,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-gray-400 group",title:"Kr ny batch-analys",children:a.jsx(sn,{size:16,className:`${i?"animate-spin":"group-hover:rotate-180 transition-transform duration-500"}`})}),children:a.jsxs("div",{className:"space-y-3",children:[n?a.jsx("div",{className:"flex flex-col items-center justify-center py-8",children:a.jsx("div",{className:"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"})}):e.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-2",children:a.jsx(Xl,{className:"text-green-600",size:24})}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Inga elever flaggade som hgrisk just nu."})]}):e.map(h=>a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-orange-200 dark:hover:border-orange-900/50 transition-all group",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center flex-shrink-0 overflow-hidden",children:a.jsx(jr,{size:16,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white capitalize",children:h.student.fullName}),a.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[a.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-medium flex items-center gap-1 ${d(h.riskLevel)}`,children:[u(h.riskLevel),h.riskLevel]}),a.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded-full",children:h.category})]})]})]}),a.jsx("button",{className:"p-1 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-md text-gray-400 hover:text-orange-500 transition-colors",children:a.jsx(or,{size:18})})]}),a.jsx("div",{className:"mt-3 bg-white/50 dark:bg-gray-900/50 p-2 rounded-lg border border-gray-100 dark:border-gray-800",children:a.jsxs("p",{className:"text-[11px] text-gray-600 dark:text-gray-400 line-clamp-2 italic",children:['"',h.aiReasoning,'"']})}),a.jsxs("div",{className:"mt-2 flex items-center gap-1.5 text-[10px] font-medium text-orange-600 dark:text-orange-400",children:[a.jsx(Ki,{size:12}),a.jsxs("span",{children:["AI-frslag: ",h.aiSuggestions.substring(0,40),"..."]})]})]},h.id)),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-800",children:a.jsxs("button",{className:"w-full py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 hover:text-orange-500 transition-colors flex items-center justify-center gap-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:["Visa Fullstndig Analysrapport",a.jsx(or,{size:14})]})})]})})},aT=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),s=Et(),{t:i}=nt();return N.useEffect(()=>{(async()=>{try{const l=await O.elevhalsa.getMyPendingSurveys();e(l||[])}catch(l){console.error("Failed to fetch pending surveys:",l)}finally{n(!1)}})()},[]),r||t.length===0?null:a.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl p-6 text-white shadow-xl shadow-indigo-200 dark:shadow-none overflow-hidden relative group transition-all hover:scale-[1.01] mb-6",children:[a.jsx("div",{className:"absolute -top-6 -right-6 w-32 h-32 bg-white/10 rounded-full blur-2xl group-hover:bg-white/20 transition-colors"}),a.jsx("div",{className:"absolute top-1/2 -left-8 w-24 h-24 bg-indigo-400/20 rounded-full blur-xl animate-pulse"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-xl backdrop-blur-md",children:a.jsx(Va,{size:24,className:"text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg leading-tight",children:"Din feedback behvs!"}),a.jsxs("p",{className:"text-indigo-100 text-xs font-medium uppercase tracking-wider",children:["Vntande enkter (",t.length,")"]})]})]}),a.jsx("div",{className:"space-y-3",children:t.map(o=>a.jsx("div",{className:"bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/10 rounded-2xl p-4 transition-all cursor-pointer group/item",onClick:()=>s(`/survey/${o.distributionId}`),children:a.jsxs("div",{className:"flex justify-between items-start gap-3",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h4",{className:"font-bold text-sm truncate mb-1",children:o.title}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-indigo-100",children:[a.jsx(Tt,{size:10}),a.jsxs("span",{children:["Skapad ",o.sentAt?new Date(o.sentAt).toLocaleDateString():"Nyligen"]}),o.deadline&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"text-orange-200 font-bold",children:["Deadline: ",new Date(o.deadline).toLocaleDateString()]})]})]})]}),a.jsx("div",{className:"bg-white text-indigo-600 p-1.5 rounded-lg opacity-0 group-hover/item:opacity-100 transition-all translate-x-2 group-hover/item:translate-x-0",children:a.jsx(Wa,{size:14})})]})},o.distributionId))}),a.jsx("div",{className:"mt-5 flex items-center justify-between text-[10px] font-bold uppercase tracking-widest text-indigo-100/80",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ya,{size:10,className:"fill-current"}),a.jsx("span",{children:"Hjlp oss att frbttra EduFlex"})]})})]})]})},lje=({mentorId:t})=>{var o;const[e,r]=N.useState(null),[n,s]=N.useState(!0);N.useEffect(()=>{t&&i()},[t]);const i=async()=>{try{s(!0);const l=await O.analytics.predictive.getMentorCoach(t);r(l)}catch(l){console.error("Failed to fetch mentor coaching:",l)}finally{s(!1)}};return a.jsx(vo,{title:"AI Mentorcoach",icon:a.jsx(Ki,{size:20,className:"text-brand-teal"}),subtitle:"Beslutsstd fr din mentorgrupp",children:a.jsx("div",{className:"space-y-4",children:n?a.jsx("div",{className:"flex items-center justify-center py-10",children:a.jsx(ft,{className:"animate-spin text-brand-teal",size:24})}):e?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-brand-teal/5 rounded-2xl border border-brand-teal/10",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ya,{size:16,className:"text-brand-teal"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-brand-teal",children:"Viktigaste insikten"})]}),a.jsx("p",{className:"text-xs font-semibold text-gray-900 dark:text-white mb-2",children:e.topConcern}),a.jsxs("p",{className:"text-[11px] text-gray-600 dark:text-gray-400 italic",children:['"',e.briefing,'"']})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-[10px] uppercase font-bold text-gray-400 tracking-wider flex items-center gap-1.5 px-1",children:[a.jsx(Va,{size:10})," Freslagen Agenda Mentortid"]}),a.jsx("div",{className:"space-y-1.5",children:(o=e.suggestedAgenda)==null?void 0:o.map((l,c)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg text-[11px] text-gray-700 dark:text-gray-300",children:[a.jsx("div",{className:"w-1 h-1 bg-brand-teal rounded-full"}),l]},c))})]}),a.jsxs("button",{className:"w-full flex items-center justify-center gap-2 py-2.5 text-xs font-bold text-brand-teal hover:bg-brand-teal/10 rounded-xl transition-colors",children:["Frbered Utvecklingssamtal ",a.jsx(er,{size:14})]})]}):a.jsx("div",{className:"text-center py-6",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Ingen mentor-coachning tillgnglig."})})})})},cje=({count:t})=>{const{t:e}=nt();return a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm flex-1 min-w-[200px]",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase",children:e("teacher_widgets.active_courses")}),a.jsx("h3",{className:"text-3xl font-black text-gray-900 dark:text-white mt-1",children:t})]}),a.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl text-indigo-600",children:a.jsx(gt,{size:24})})]})})},dje=({count:t})=>{const{t:e}=nt();return a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm flex-1 min-w-[200px]",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase",children:e("teacher_widgets.my_students")}),a.jsx("h3",{className:"text-3xl font-black text-gray-900 dark:text-white mt-1",children:t})]}),a.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl text-blue-600",children:a.jsx(vt,{size:24})})]})})},uje=({count:t,onClick:e})=>{const{t:r}=nt();return a.jsx("div",{onClick:e,className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm cursor-pointer hover:border-orange-300 transition-colors flex-1 min-w-[200px]",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase",children:r("teacher_widgets.to_grade")}),a.jsx("h3",{className:`text-3xl font-black mt-1 ${t>0?"text-orange-600":"text-gray-900 dark:text-white"}`,children:t})]}),a.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-xl text-orange-600",children:a.jsx(nr,{size:24})})]})})},hje=({count:t,onClick:e})=>{const{t:r}=nt();return a.jsx("div",{onClick:e,className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm cursor-pointer hover:border-purple-300 transition-colors flex-1 min-w-[200px]",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase",children:r("teacher_widgets.applications")}),a.jsx("h3",{className:"text-3xl font-black text-gray-900 dark:text-white mt-1",children:t})]}),a.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl text-purple-600",children:a.jsx(Ji,{size:24})})]})})},fje=({count:t,onClick:e})=>{const{t:r}=nt();return a.jsx("div",{onClick:e,className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm cursor-pointer hover:border-red-300 transition-colors flex-1 min-w-[200px]",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase",children:r("teacher_widgets.risk_zone")}),a.jsx("h3",{className:"text-3xl font-black text-red-600 mt-1",children:t})]}),a.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-xl text-red-600",children:a.jsx(Dr,{size:24})})]})})},gje=({ungradedSubmissions:t})=>{const{t:e}=nt(),r=Et();return t.length===0?a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-12 text-center animate-in fade-in",children:[a.jsx(nr,{size:48,className:"mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("teacher_tables.all_graded_title")}),a.jsx("p",{className:"text-gray-500",children:e("teacher_tables.all_graded_desc")})]}):a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] overflow-hidden shadow-sm animate-in fade-in",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] font-bold text-gray-700 dark:text-white flex justify-between items-center",children:[a.jsx("span",{children:e("teacher_tables.pending_submissions_count",{count:t.length})}),a.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:e("teacher_tables.action_required")})]}),a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#282a2c] text-gray-500 font-bold uppercase text-xs",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:e("teacher_tables.student")}),a.jsx("th",{className:"p-4",children:e("teacher_tables.assignment")}),a.jsx("th",{className:"p-4",children:e("teacher_tables.course")}),a.jsx("th",{className:"p-4",children:e("teacher_tables.submitted")}),a.jsx("th",{className:"p-4 text-right",children:e("teacher_tables.action")})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:t.map(n=>{var s;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c]/50",children:[a.jsx("td",{className:"p-4 font-bold text-gray-900 dark:text-white",children:(s=n.student)==null?void 0:s.fullName}),a.jsx("td",{className:"p-4 text-indigo-600 font-medium",children:n.assignmentTitle}),a.jsx("td",{className:"p-4 text-gray-500",children:n.courseName}),a.jsx("td",{className:"p-4 text-gray-500",children:new Date(n.submittedAt).toLocaleDateString()}),a.jsx("td",{className:"p-4 text-right",children:a.jsx("button",{onClick:()=>{var i,o,l;return r(`/course/${n.courseSlug||n.courseCode||n.courseId||((i=n.assignment)==null?void 0:i.courseSlug)||((o=n.assignment)==null?void 0:o.courseCode)||((l=n.assignment)==null?void 0:l.courseId)||""}?tab=assignments`)},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-indigo-700 shadow-sm",children:e("teacher_tables.go_to_grading")})})]},n.id)})})]})]})},mje=({applications:t,onHandleApplication:e})=>{const{t:r}=nt();return t.length===0?a.jsx("div",{className:"text-center p-10 bg-white dark:bg-[#1E1F20] rounded-xl border border-dashed border-gray-300 dark:border-[#3c4043] animate-in fade-in",children:a.jsx("p",{className:"text-gray-500",children:r("teacher_tables.no_pending_applications")})}):a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] overflow-hidden shadow-sm animate-in fade-in",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#282a2c] text-gray-500 font-bold uppercase text-xs",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:r("teacher_tables.student")}),a.jsx("th",{className:"p-4",children:r("teacher_tables.applies_to_course")}),a.jsx("th",{className:"p-4",children:r("teacher_tables.date")}),a.jsx("th",{className:"p-4 text-right",children:r("teacher_tables.decision")})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:t.map(n=>{var s,i;return a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 font-bold text-gray-900 dark:text-white",children:((s=n.student)==null?void 0:s.fullName)||r("common.unknown")}),a.jsx("td",{className:"p-4 text-indigo-600",children:(i=n.course)==null?void 0:i.name}),a.jsx("td",{className:"p-4 text-gray-500",children:new Date(n.appliedAt).toLocaleDateString()}),a.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>e(n.id,"approve"),className:"px-3 py-1 bg-green-100 text-green-700 rounded-lg font-bold hover:bg-green-200",children:r("teacher_tables.approve")}),a.jsx("button",{onClick:()=>e(n.id,"reject"),className:"px-3 py-1 bg-red-50 text-red-600 rounded-lg font-bold hover:bg-red-100",children:r("teacher_tables.reject")})]})]},n.id)})})]})})},Qq=[{value:"bg-indigo-600",label:"Indigo"},{value:"bg-blue-600",label:"Blue"},{value:"bg-green-600",label:"Green"},{value:"bg-red-600",label:"Red"},{value:"bg-yellow-500",label:"Yellow"},{value:"bg-purple-600",label:"Purple"},{value:"bg-pink-600",label:"Pink"},{value:"bg-gray-800",label:"Black"}],pje=({isOpen:t,onClose:e,onCourseCreated:r,currentUser:n})=>{const{t:s}=nt(),[i,o]=N.useState({name:"",courseCode:"",category:"Programmering",description:"",tags:"",startDate:"",endDate:"",color:"bg-indigo-600",maxStudents:30}),[l,c]=N.useState(!1),[d,u]=N.useState([{name:"",link:"",type:"ZOOM"}]),h=()=>u([...d,{name:"",link:"",type:"ZOOM"}]),f=m=>u(d.filter((p,b)=>b!==m)),g=(m,p,b)=>{u(v=>v.map((y,w)=>w===m?{...y,[p]:b}:y))},x=async m=>{m.preventDefault(),c(!0);try{const p={...i,maxStudents:parseInt(i.maxStudents),startDate:i.startDate||null,endDate:i.endDate||null,groupRooms:d.filter(b=>b.name&&b.link)};await O.courses.create(p,n.id),r(),e()}catch{alert(s("teacher_modals.error_create"))}finally{c(!1)}};return t?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-lg rounded-2xl shadow-2xl border border-gray-200 dark:border-[#3c4043] p-6 max-h-[90vh] overflow-y-auto custom-scrollbar",children:[a.jsx("h3",{className:"font-bold text-lg mb-4 dark:text-white",children:s("course_modal.create_title")}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsx("input",{required:!0,className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.name,onChange:m=>o({...i,name:m.target.value}),placeholder:s("course_modal.name")}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{required:!0,className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.courseCode,onChange:m=>o({...i,courseCode:m.target.value}),placeholder:s("course_modal.code")}),a.jsxs("select",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.category,onChange:m=>o({...i,category:m.target.value}),children:[a.jsxs("option",{value:"",children:[s("course_modal.category"),"..."]}),Ou.map(m=>a.jsx("option",{value:m,children:m},m))]})]}),a.jsx("textarea",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white min-h-[100px]",value:i.description,onChange:m=>o({...i,description:m.target.value}),placeholder:s("course_modal.description")}),a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.tags,onChange:m=>o({...i,tags:m.target.value}),placeholder:s("teacher_modals.tags_placeholder")}),a.jsxs("div",{className:"bg-gray-50 dark:bg-[#282a2c] p-4 rounded-xl space-y-3",children:[a.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:s("teacher_modals.group_rooms")}),d.map((m,p)=>a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("input",{className:"w-1/3 p-2 border rounded text-sm dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:s("teacher_modals.room_name_placeholder"),value:m.name,onChange:b=>g(p,"name",b.target.value)}),a.jsx("input",{className:"flex-1 p-2 border rounded text-sm dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:s("teacher_modals.link"),value:m.link,onChange:b=>g(p,"link",b.target.value)}),a.jsx("button",{type:"button",onClick:()=>f(p),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:a.jsx(Je,{size:16})})]},p)),a.jsx("button",{type:"button",onClick:h,className:"text-xs font-bold text-indigo-600 hover:underline",children:s("teacher_modals.add_room")})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.startDate,onChange:m=>o({...i,startDate:m.target.value})}),a.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.endDate,onChange:m=>o({...i,endDate:m.target.value})})]}),a.jsx("input",{type:"number",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.maxStudents,onChange:m=>o({...i,maxStudents:m.target.value}),placeholder:s("course_modal.max_students")}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 mb-2 block",children:s("teacher_modals.course_color")}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:Qq.map(m=>a.jsx("button",{type:"button",onClick:()=>o({...i,color:m.value}),className:`w-8 h-8 rounded-full ${m.value} ${i.color===m.value?"ring-2 ring-offset-2 ring-gray-400":"opacity-70 hover:opacity-100"}`,title:m.label},m.value))})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded",children:s("common.cancel")}),a.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:s("course_modal.create_btn")})]})]})]})}):null},xje=({isOpen:t,onClose:e,onCourseUpdated:r,courseToEdit:n})=>{const{t:s}=nt(),[i,o]=N.useState({name:"",courseCode:"",category:"",description:"",tags:"",startDate:"",endDate:"",color:"",isOpen:!0,maxStudents:30,classroomLink:"",classroomType:"ZOOM",examLink:""}),[l,c]=N.useState(!1),[d,u]=N.useState([]),h=()=>u([...d,{name:"",link:"",type:"ZOOM"}]),f=m=>u(d.filter((p,b)=>b!==m)),g=(m,p,b)=>{u(v=>v.map((y,w)=>w===m?{...y,[p]:b}:y))};if(N.useEffect(()=>{n&&(o({name:n.name||"",courseCode:n.courseCode||"",category:n.category||"",description:n.description||"",tags:n.tags||"",startDate:n.startDate||"",endDate:n.endDate||"",color:n.color||"bg-indigo-600",isOpen:n.isOpen,maxStudents:n.maxStudents||30,classroomLink:n.classroomLink||"",classroomType:n.classroomType||"ZOOM",examLink:n.examLink||""}),u(n.groupRooms||[]))},[n]),!t||!n)return null;const x=async m=>{m.preventDefault(),c(!0);try{await O.courses.update(n.id,{...i,maxStudents:parseInt(i.maxStudents),groupRooms:d.filter(p=>p.name)}),r(),e()}catch{alert(s("teacher_modals.error_update"))}finally{c(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-lg rounded-2xl shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden my-8 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center bg-gray-50 dark:bg-[#131314]",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:s("course_modal.edit_title")}),a.jsx("button",{onClick:e,children:a.jsx(Je,{className:"text-gray-500",size:20})})]}),a.jsxs("form",{onSubmit:x,className:"p-6 space-y-4 overflow-y-auto custom-scrollbar flex-1",children:[a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.name,onChange:m=>o({...i,name:m.target.value}),placeholder:s("teacher_modals.course_name")}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.courseCode,onChange:m=>o({...i,courseCode:m.target.value}),placeholder:s("teacher_modals.course_code")}),a.jsxs("select",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.category,onChange:m=>o({...i,category:m.target.value}),children:[a.jsxs("option",{value:"",children:[s("course_modal.category"),"..."]}),Ou.map(m=>a.jsx("option",{value:m,children:m},m))]})]}),a.jsx("textarea",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white min-h-[100px]",value:i.description,onChange:m=>o({...i,description:m.target.value}),placeholder:s("course_modal.description")}),a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.tags,onChange:m=>o({...i,tags:m.target.value}),placeholder:s("teacher_modals.tags_placeholder")}),a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl border border-indigo-100 dark:border-indigo-800",children:[a.jsxs("h4",{className:"text-xs font-bold uppercase text-indigo-600 dark:text-indigo-400 mb-3 flex items-center gap-2",children:[a.jsx(xi,{size:14})," ",s("course_modal.classroom_section")]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[a.jsxs("select",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white text-sm",value:i.classroomType,onChange:m=>o({...i,classroomType:m.target.value}),children:[a.jsx("option",{value:"ZOOM",children:"Zoom"}),a.jsx("option",{value:"TEAMS",children:"Teams"}),a.jsx("option",{value:"MEET",children:"Meet"})]}),a.jsx("input",{className:"col-span-2 w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white text-sm",value:i.classroomLink,onChange:m=>o({...i,classroomLink:m.target.value}),placeholder:s("course_modal.classroom_link")})]}),a.jsx("input",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white text-sm",value:i.examLink,onChange:m=>o({...i,examLink:m.target.value}),placeholder:s("course_modal.exam_link")})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-[#282a2c] p-4 rounded-xl space-y-3",children:[a.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:s("teacher_modals.group_rooms")}),d.map((m,p)=>a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("input",{className:"w-1/3 p-2 border rounded text-sm dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:s("teacher_modals.room_name_placeholder"),value:m.name,onChange:b=>g(p,"name",b.target.value)}),a.jsx("input",{className:"flex-1 p-2 border rounded text-sm dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:s("teacher_modals.link"),value:m.link,onChange:b=>g(p,"link",b.target.value)}),a.jsx("button",{type:"button",onClick:()=>f(p),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:a.jsx(Je,{size:16})})]},p)),a.jsx("button",{type:"button",onClick:h,className:"text-xs font-bold text-indigo-600 hover:underline",children:s("teacher_modals.add_room")})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.startDate,onChange:m=>o({...i,startDate:m.target.value})}),a.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:i.endDate,onChange:m=>o({...i,endDate:m.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 mb-2 block",children:s("teacher_modals.course_color")}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:Qq.map(m=>a.jsx("button",{type:"button",onClick:()=>o({...i,color:m.value}),className:`w-8 h-8 rounded-full ${m.value} ${i.color===m.value?"ring-2 ring-offset-2 ring-gray-400":"opacity-70 hover:opacity-100"}`,title:m.label},m.value))})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded",children:s("common.cancel")}),a.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:s("common.save")})]})]})]})})},Jq=({userId:t,isTeacher:e=!1,variant:r="full"})=>{var h;const{t:n}=nt(),[s,i]=N.useState(null),[o,l]=N.useState(!0);N.useEffect(()=>{c()},[t]);const c=async()=>{l(!0);try{const f=t?await O.personalization.getUserAnalysis(t):await O.personalization.getMyAnalysis();i(f)}catch(f){console.error("Failed to fetch AI analysis",f)}finally{l(!1)}};if(o)return a.jsxs("div",{className:"bg-white dark:bg-[#202124] rounded-2xl p-6 border border-gray-100 dark:border-[#3c4043] shadow-sm animate-pulse",children:[a.jsx("div",{className:"h-6 w-48 bg-gray-200 dark:bg-[#303134] rounded mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-20 bg-gray-100 dark:bg-[#303134] rounded-xl"}),a.jsx("div",{className:"h-20 bg-gray-100 dark:bg-[#303134] rounded-xl"})]})]});if(!s||((h=s.recommendations)==null?void 0:h.length)===0&&s.riskLevel===0)return null;const d=f=>f>70?"text-red-500 bg-red-50 dark:bg-red-900/20":f>40?"text-amber-500 bg-amber-50 dark:bg-amber-900/20":"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",u=f=>f>70?"Hg risk":f>40?"Medelrisk":"Lg risk";return a.jsxs("div",{className:r==="compact"?"flex flex-col h-full":"bg-white dark:bg-[#202124] rounded-2xl border border-gray-100 dark:border-[#3c4043] shadow-sm overflow-hidden flex flex-col h-full",children:[a.jsxs("div",{className:`p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center ${r==="compact"?"py-4":"bg-gradient-to-r from-indigo-50/50 to-transparent dark:from-indigo-900/10 dark:to-transparent"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg",children:a.jsx(dr,{size:r==="compact"?16:20})}),a.jsx("h3",{className:`font-bold text-gray-900 dark:text-white ${r==="compact"?"text-sm":""}`,children:e?"AI-Insikter & Rekommendationer":"Personliga Studietips"})]}),e&&s.riskLevel>0&&a.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1.5 ${d(s.riskLevel)}`,children:[a.jsx(Dr,{size:14}),u(s.riskLevel)," (",s.riskLevel,"%)"]})]}),a.jsxs("div",{className:`${r==="compact"?"p-4":"p-6"} space-y-6 flex-grow`,children:[e&&s.riskRationale&&a.jsx("div",{className:"bg-gray-50 dark:bg-[#303134] p-4 rounded-xl border-l-4 border-indigo-500",children:a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 italic",children:['"',s.riskRationale,'"']})}),a.jsxs("div",{className:r==="compact"?"space-y-2":"",children:[!e&&r==="compact"?null:a.jsxs("h4",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx(Vi,{size:14})," Freslagna aktiviteter"]}),a.jsx("div",{className:r==="compact"?"grid grid-cols-1 md:grid-cols-2 gap-3":"space-y-3",children:s.recommendations.map((f,g)=>a.jsx("div",{className:"group relative bg-white dark:bg-[#202124] border border-gray-100 dark:border-[#3c4043] hover:border-indigo-200 dark:hover:border-indigo-900/50 p-3 rounded-xl transition-all hover:shadow-md cursor-pointer",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"shrink-0 p-2 bg-gray-50 dark:bg-[#303134] rounded-lg group-hover:bg-indigo-50 dark:group-hover:bg-indigo-900/20 transition-colors",children:f.type==="LESSON"?a.jsx(gt,{size:16,className:"text-gray-600 dark:text-gray-400 group-hover:text-indigo-600"}):a.jsx(Tt,{size:16,className:"text-gray-600 dark:text-gray-400 group-hover:text-indigo-600"})}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("h5",{className:"font-bold text-[13px] text-gray-900 dark:text-white line-clamp-1",children:f.title}),a.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400 mt-0.5 line-clamp-1",children:f.reason})]}),a.jsx("div",{className:"flex items-center text-gray-300 group-hover:text-indigo-600 transition-colors",children:a.jsx(Wa,{size:16})})]})},g))})]}),s.studyPathAdvice&&a.jsxs("div",{className:"pt-2",children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Coachande rd"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:s.studyPathAdvice})]})]}),e&&a.jsx("div",{className:"p-4 bg-gray-50/50 dark:bg-[#1a1b1e] border-t border-gray-100 dark:border-[#3c4043] text-center",children:a.jsx("button",{onClick:c,className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold hover:underline",children:"Uppdatera AI-analys"})})]})},bje=({isOpen:t,onClose:e,student:r,currentUser:n})=>{const{t:s}=nt(),[i,o]=N.useState(""),[l,c]=N.useState(""),[d,u]=N.useState(""),[h,f]=N.useState(!1);N.useEffect(()=>{t&&r&&g()},[t,r]);const g=()=>{let m=s("student_contact.templates.follow_up_subject"),b=`Hej ${r.firstName||(r.name?r.name.split(" ")[0]:"Student")},

`;r.daysSinceLogin===999?(m=s("student_contact.templates.no_login_subject"),b+=s("student_contact.templates.no_login_body")+`

`,b+=s("student_contact.templates.need_help_login")+`
`):r.daysSinceLogin>14?(m=s("student_contact.templates.warning_inactivity_subject"),b+=s("student_contact.templates.warning_inactivity_body",{count:r.daysSinceLogin})+`

`,b+=s("student_contact.templates.review_plan")+`
`):r.daysSinceLogin>7?(m=s("student_contact.templates.follow_up_absence_subject"),b+=s("student_contact.templates.follow_up_absence_body",{count:r.daysSinceLogin})+`
`,b+=s("student_contact.templates.reach_out")+`
`):b+=s("student_contact.templates.generic_body")+`
`,o(m),c(b),u("")},x=async()=>{f(!0);try{const m=`${l}

---
${s("student_contact.divider")}
${d}

${s("student_contact.regards")}
${n.fullName}`;await O.messages.send({receiverId:r.id,subject:i,content:m}),alert(s("student_contact.sent_success")),e()}catch(m){console.error("Failed to send message",m),alert(s("student_contact.send_error"))}finally{f(!1)}};return!t||!r?null:a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center backdrop-blur-sm p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-[#252525]",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(jr,{size:24,className:"text-indigo-600"}),s("student_contact.title")]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("student_contact.subtitle",{name:r.fullName})})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors",children:a.jsx(Je,{size:20,className:"text-gray-500"})})]}),a.jsxs("div",{className:"p-8 space-y-6 overflow-y-auto",children:[a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800 rounded-xl p-4 flex gap-4",children:[a.jsx(Dr,{className:"text-amber-600 dark:text-amber-500 shrink-0",size:24}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-400 text-sm uppercase mb-1",children:s("student_contact.risk_factor")}),a.jsx("p",{className:"text-amber-700 dark:text-amber-300 text-sm",children:r.daysSinceLogin===999?s("student_contact.never_logged_in"):r.daysSinceLogin>7?s("student_contact.inactive_days",{count:r.daysSinceLogin}):s("student_contact.no_risk")})]})]}),a.jsx(Jq,{userId:r.id,isTeacher:!0}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:s("student_contact.subject_label")}),a.jsx("input",{type:"text",value:i,onChange:m=>o(m.target.value),className:"w-full bg-gray-50 dark:bg-[#2A2A2A] border border-gray-200 dark:border-gray-700 rounded-lg p-3 font-medium text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 flex items-center gap-2",children:[a.jsx(xt,{size:14}),s("student_contact.auto_generated_label")]}),a.jsx("textarea",{value:l,readOnly:!0,className:"w-full bg-gray-100 dark:bg-[#252525] border border-gray-200 dark:border-gray-700 rounded-lg p-4 text-sm text-gray-600 dark:text-gray-400 focus:outline-none resize-none h-32 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s("student_contact.auto_generated_desc")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-900 dark:text-white uppercase mb-2",children:s("student_contact.teacher_notes_label")}),a.jsx("textarea",{value:d,onChange:m=>u(m.target.value),placeholder:s("student_contact.teacher_notes_placeholder"),className:"w-full bg-white dark:bg-[#2A2A2A] border-2 border-indigo-100 dark:border-indigo-900/30 rounded-xl p-4 text-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all h-32 shadow-sm",autoFocus:!0})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-[#252525] flex justify-end gap-3",children:[a.jsx("button",{onClick:e,className:"px-6 py-2.5 rounded-xl font-bold text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:s("common.cancel")}),a.jsx("button",{onClick:x,disabled:h||!d.trim(),className:`px-6 py-2.5 rounded-xl font-bold text-white flex items-center gap-2 shadow-lg shadow-indigo-500/20 transition-all ${h||!d.trim()?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 hover:scale-105"}`,children:h?s("student_contact.sending"):a.jsxs(a.Fragment,{children:[" ",a.jsx(Wr,{size:18})," ",s("student_contact.report_and_send")," "]})})]})]})})},yje=({currentUser:t})=>{const{t:e,i18n:r}=nt(),n=Et(),i=new URLSearchParams(window.location.search).get("tab")||"OVERVIEW",[o,l]=N.useState(i),[c,d]=N.useState(!0),[u,h]=N.useState([]),[f,g]=N.useState([]),[x,m]=N.useState([]),[p,b]=N.useState([]),[v,y]=N.useState([]),[w,k]=N.useState(""),[j,_]=N.useState(null),[S,A]=N.useState(!1),[T,E]=N.useState(!1),[C,z]=N.useState(null),{widgets:M,toggleWidget:F}=tT("teacher",{showActiveCourses:!0,showMyStudents:!0,showToGrade:!0,showApplications:!0,showAtRisk:!0,showRiskWidget:!0,showSchedule:!0,showShortcuts:!0,showMessages:!0,showOnlineFriends:!0}),D={showActiveCourses:e("teacher_widgets.active_courses"),showMyStudents:e("teacher_widgets.my_students"),showToGrade:e("teacher_widgets.to_grade"),showApplications:e("teacher_widgets.applications"),showAtRisk:e("teacher_dashboard.tab_students"),showRiskWidget:e("teacher_widgets.risk_zone"),showSchedule:e("teacher_dashboard.section_schedule"),showShortcuts:e("teacher_dashboard.section_shortcuts"),showMessages:e("dashboard.widgets.messages"),showOnlineFriends:e("dashboard.widgets.online_friends")};N.useEffect(()=>{t&&L()},[t]);const L=async()=>{d(!0);try{const R=(await O.courses.getAll()).filter(V=>{var se;return((se=V.teacher)==null?void 0:se.id)===t.id});h(R);const Y=new Map;R.forEach(V=>{var se;(se=V.students)==null||se.forEach(Ne=>{if(!Y.has(Ne.id)){const ie=Ne.lastLogin?new Date(Ne.lastLogin):null,q=Ne.lastActive?new Date(Ne.lastActive):null,H=q&&ie?q>ie?q:ie:q||ie,Z=H?Math.floor((new Date-H)/(1e3*60*60*24)):999;Y.set(Ne.id,{...Ne,daysSinceLogin:Z,riskLevel:Z>14?"HIGH":Z>7?"MEDIUM":"LOW"})}})}),g(Array.from(Y.values()));let ee=[];const B=new Date;for(const V of R)if(V.startDate){const se=new Date(V.startDate),Ne=V.endDate?new Date(V.endDate):null;se<=B&&(!Ne||Ne>B)?ee.push({date:se,title:`${V.name}`,type:"ONGOING"}):se>B&&ee.push({date:se,title:e("teacher_dashboard.course_start",{name:V.name}),type:"UPCOMING"})}y(ee.sort((V,se)=>V.date-se.date));try{const V=await O.courses.getApplications(t.id);Array.isArray(V)&&m(V)}catch{console.error("Kunde inte hmta anskningar")}let U=[];await Promise.all(R.map(async V=>{try{const se=await O.assignments.getByCourse(V.id);if(se&&se.length>0)for(const Ne of se){const ie=await O.assignments.getSubmissions(Ne.id);Array.isArray(ie)&&ie.filter(H=>!H.grade).forEach(H=>U.push({...H,courseName:V.name,assignmentTitle:Ne.title,courseId:V.id,courseSlug:V.slug,courseCode:V.courseCode}))}}catch{}})),b(U)}catch($){console.error($)}finally{d(!1)}},K=async($,R)=>{try{await O.courses.handleApplication($,R),L(),alert(e(R==="approve"?"teacher_tables.admitted_msg":"teacher_tables.rejected_msg"))}catch{alert(e("teacher_tables.error_msg"))}};return c?a.jsx("div",{className:"p-20 text-center text-gray-500",children:e("messages.loading")}):a.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in pb-20",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("dashboard.teacher_panel")}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("dashboard.overview_for",{name:t.fullName})})]})}),a.jsxs("div",{className:"flex overflow-x-auto gap-1 border-b border-gray-200 dark:border-[#3c4043] mb-8",children:[[{id:"OVERVIEW",label:e("teacher_dashboard.tab_overview"),icon:a.jsx(rK,{size:18})},{id:"GRADING",label:`${e("teacher_dashboard.tab_grading")} ${p.length>0?`(${p.length})`:""}`,icon:a.jsx(nr,{size:18})},{id:"APPLICATIONS",label:`${e("teacher_dashboard.tab_applications")} ${x.length>0?`(${x.length})`:""}`,icon:a.jsx(Ji,{size:18})},{id:"COURSES",label:e("teacher_dashboard.tab_courses"),icon:a.jsx(gt,{size:18})},{id:"STUDENTS",label:e("teacher_dashboard.tab_students"),icon:a.jsx(vt,{size:18})},{id:"COMMUNICATION",label:e("teacher_dashboard.tab_communication"),icon:a.jsx(er,{size:18})}].map($=>a.jsxs("button",{onClick:()=>l($.id),className:`flex items-center gap-2 px-6 py-3 font-bold text-sm border-b-2 transition-colors whitespace-nowrap ${o===$.id?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[$.icon," ",$.label]},$.id)),a.jsx("div",{className:"flex-1 border-b border-gray-200 dark:border-[#3c4043]"}),o==="OVERVIEW"&&a.jsx("div",{className:"flex items-center border-b border-gray-200 dark:border-[#3c4043] pr-2",children:a.jsx(rT,{widgets:M,toggleWidget:F,widgetLabels:D})})]}),o==="OVERVIEW"&&a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-2 duration-300",children:[a.jsx(aT,{}),a.jsxs("div",{className:"flex flex-wrap gap-6",children:[M.showActiveCourses&&a.jsx(cje,{count:u.length}),M.showMyStudents&&a.jsx(dje,{count:f.length}),M.showToGrade&&a.jsx(uje,{count:p.length,onClick:()=>l("GRADING")}),M.showApplications&&a.jsx(hje,{count:x.length,onClick:()=>l("APPLICATIONS")}),M.showAtRisk&&a.jsx(fje,{count:f.filter($=>$.riskLevel==="HIGH").length,onClick:()=>l("STUDENTS")})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[M.showSchedule&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[a.jsx(zt,{className:"text-indigo-600"})," ",e("teacher_dashboard.section_schedule")]}),a.jsx("div",{className:"space-y-4",children:v.length>0?v.slice(0,5).map(($,R)=>a.jsxs("div",{className:"flex gap-4 items-center p-3 rounded-xl bg-gray-50 dark:bg-[#131314]",children:[a.jsxs("div",{className:`shadow-sm rounded-lg p-2 text-center min-w-[50px] ${$.type==="ONGOING"?"bg-green-50 dark:bg-green-900/20":"bg-white dark:bg-[#1E1F20]"}`,children:[a.jsx("span",{className:`block text-xs font-bold uppercase ${$.type==="ONGOING"?"text-green-600":"text-red-500"}`,children:$.date.toLocaleString(r.language,{month:"short"})}),a.jsx("span",{className:`block text-lg font-black ${$.type==="ONGOING"?"text-green-700 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:$.date.getDate()})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-sm text-gray-900 dark:text-white",children:$.title}),a.jsx("p",{className:`text-xs ${$.type==="ONGOING"?"text-green-600 font-bold":"text-gray-500"}`,children:$.type==="ONGOING"?e("teacher_dashboard.ongoing_course"):e("teacher_dashboard.upcoming_event")})]})]},R)):a.jsx("p",{className:"text-gray-500 text-sm italic",children:e("teacher_dashboard.no_events")})})]}),M.showShortcuts&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsx("h3",{className:"font-bold text-lg mb-4",children:e("teacher_dashboard.section_shortcuts")}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>n("/calendar"),className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl text-indigo-700 dark:text-indigo-300 font-bold text-sm hover:bg-indigo-100 transition-colors text-left",children:[" ",e("shortcuts.calendar")]}),a.jsxs("button",{onClick:()=>l("STUDENTS"),className:"p-4 bg-pink-50 dark:bg-pink-900/20 rounded-xl text-pink-700 dark:text-pink-300 font-bold text-sm hover:bg-pink-100 transition-colors text-left",children:[" ",e("shortcuts.students")]}),a.jsxs("button",{onClick:()=>l("GRADING"),className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl text-orange-700 dark:text-orange-300 font-bold text-sm hover:bg-orange-100 transition-colors text-left",children:[" ",e("shortcuts.grading")]}),a.jsxs("button",{onClick:()=>l("COMMUNICATION"),className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl text-green-700 dark:text-green-300 font-bold text-sm hover:bg-green-100 transition-colors text-left",children:[" ",e("shortcuts.messages")]})]})]})]}),a.jsxs("div",{className:"lg:col-span-1 h-full space-y-6",children:[M.showRiskWidget&&a.jsxs(a.Fragment,{children:[a.jsx(lje,{mentorId:t.id}),a.jsx(oje,{mentorId:t.id})]}),M.showOnlineFriends&&a.jsx("div",{className:"h-80",children:a.jsx(IG,{})}),M.showMessages&&a.jsx(TG,{onViewAll:()=>l("COMMUNICATION")})]})]})]}),o==="GRADING"&&a.jsx(gje,{ungradedSubmissions:p}),o==="APPLICATIONS"&&a.jsx(mje,{applications:x,onHandleApplication:K}),o==="COURSES"&&a.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-[#1E1F20] p-4 rounded-xl border border-gray-200 dark:border-[#3c4043]",children:[a.jsx("h3",{className:"font-bold text-gray-700 dark:text-white",children:e("teacher_dashboard.section_admin")}),a.jsxs("button",{onClick:()=>A(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[a.jsx(jt,{size:18})," ",e("admin.create_course")]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:u.map($=>{var R;return a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm flex flex-col md:flex-row justify-between items-center gap-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${$.color||"bg-gray-300"}`}),a.jsx("span",{className:`px-2 py-1 text-[10px] font-bold uppercase rounded ${$.isOpen?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:$.isOpen?e("teacher_tables.open"):e("teacher_tables.closed")}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:$.name})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 font-mono",children:[a.jsx("span",{children:$.courseCode}),a.jsx("span",{children:""}),a.jsxs("span",{children:[(R=$.students)==null?void 0:R.length,"/",$.maxStudents," ",e("admin.students").toLowerCase()]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>n(`/course/${$.slug||$.id}`),className:"px-4 py-2 bg-gray-100 dark:bg-[#282a2c] hover:bg-gray-200 text-gray-700 dark:text-white rounded-lg font-bold text-sm",children:e("course_modal.go_to_course")}),a.jsxs("button",{onClick:()=>{z($),E(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg font-bold text-sm hover:bg-indigo-100 flex items-center gap-2",children:[a.jsx(Zl,{size:16})," ",e("common.edit")]})]})]},$.id)})})]}),o==="STUDENTS"&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm overflow-hidden animate-in slide-in-from-bottom-2 duration-300",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-gray-700 dark:text-white",children:e("teacher_tables.all_students_count",{count:f.length})}),a.jsxs("div",{className:"relative",children:[a.jsx(gr,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:`${e("common.search")}...`,className:"pl-9 pr-4 py-2 rounded-lg border dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] text-sm outline-none",value:w,onChange:$=>k($.target.value)})]})]}),a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#282a2c] text-gray-500 uppercase text-xs font-bold border-b dark:border-[#3c4043]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:e("teacher_tables.student")}),a.jsx("th",{className:"p-4",children:e("teacher_tables.submitted")}),a.jsx("th",{className:"p-4 text-right",children:e("common.action")})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:f.filter($=>$.fullName.toLowerCase().includes(w.toLowerCase())).map($=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c]/50",children:[a.jsx("td",{className:"p-4 font-bold",children:$.fullName}),a.jsx("td",{className:"p-4 text-gray-500",children:$.daysSinceLogin===999?e("teacher_tables.never"):e("teacher_tables.days_ago",{count:$.daysSinceLogin})}),a.jsx("td",{className:"p-4 text-right",children:a.jsx("button",{onClick:()=>{_($)},className:"text-indigo-600 font-bold text-xs hover:underline",children:e("teacher_tables.contact")})})]},$.id))})]})]}),o==="COMMUNICATION"&&a.jsx(Ow,{preSelectedRecipient:j}),a.jsx(pje,{isOpen:S,onClose:()=>A(!1),onCourseCreated:L,currentUser:t}),a.jsx(xje,{isOpen:T,onClose:()=>E(!1),onCourseUpdated:L,courseToEdit:C}),a.jsx(bje,{isOpen:!!j,onClose:()=>_(null),student:j,currentUser:t})]})},vje=({courses:t,navigate:e})=>{const{t:r}=nt();return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(gt,{className:"text-indigo-600"})," ",r("dashboard.my_courses")]}),t.length===0?a.jsxs("div",{className:"text-center py-10 bg-white dark:bg-[#1E1F20] rounded-xl border border-dashed border-gray-300 dark:border-[#3c4043]",children:[a.jsx(gt,{size:40,className:"mx-auto text-gray-300 mb-2"}),a.jsx("p",{className:"text-gray-500",children:r("dashboard.not_registered")})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in slide-in-from-bottom-6",children:t.map(n=>{var s,i,o;return a.jsxs("div",{onClick:()=>e(`/course/${n.slug||n.id}`),className:"bg-white dark:bg-[#1E1F20] p-5 rounded-xl border border-gray-200 dark:border-[#3c4043] shadow-sm hover:shadow-md hover:border-indigo-300 dark:hover:border-indigo-700 transition-all cursor-pointer group flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("div",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${n.isOpen?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-300":"bg-red-50 text-red-600"}`,children:n.courseCode||r("admin.table.course")}),a.jsx(or,{size:18,className:"text-gray-300 group-hover:text-indigo-500 transition-colors"})]}),a.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white mb-1 group-hover:text-indigo-600 transition-colors line-clamp-1",children:n.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-4",children:n.description})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"w-full bg-gray-100 dark:bg-[#3c4043] h-1.5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500 w-[15%]"})}),a.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100 dark:border-[#3c4043]",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-[#3c4043] flex items-center justify-center text-[10px] font-bold text-gray-600 dark:text-gray-300",children:((i=(s=n.teacher)==null?void 0:s.firstName)==null?void 0:i.charAt(0))||"L"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:((o=n.teacher)==null?void 0:o.fullName)||r("common.unknown")})]})]})]},n.id)})})]})},kje=({currentUser:t})=>{const{t:e}=nt(),[r,n]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState(null),c=Et();N.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{const u=await O.analytics.getStudentProgress(t.id);n(u||[])}catch(u){console.error("Failed to load progress",u)}finally{i(!1)}};return s?a.jsx("div",{className:"p-6 text-center text-gray-400",children:a.jsx(ft,{className:"animate-spin mx-auto"})}):r.length===0?null:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm uppercase tracking-wider mb-4",children:e("widgets.student_progress.title")}),a.jsx("div",{className:"space-y-3",children:r.map(u=>a.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-xl border cursor-pointer transition-all hover:bg-gray-50 dark:hover:bg-[#282a2c] ${u.isAtRisk?"border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/10":"border-gray-100 dark:border-[#3c4043]"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"font-bold text-sm text-gray-800 dark:text-gray-200 line-clamp-1",children:u.courseName}),u.estimatedGrade!=="N/A"&&a.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${u.isAtRisk?"bg-red-200 text-red-800":"bg-green-100 text-green-700"}`,children:u.estimatedGrade})]}),u.isAtRisk?a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-red-600 dark:text-red-400 font-medium",children:[a.jsx(Dr,{size:12})," ",u.riskReason]}):a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-green-600 dark:text-green-400 font-medium",children:[a.jsx(nr,{size:12})," ",e("widgets.student_progress.on_track")]}),a.jsxs("div",{className:"mt-2 text-[10px] text-gray-400 flex gap-3",children:[a.jsxs("span",{children:[e("widgets.student_progress.assignments"),": ",u.completedAssignments,"/",u.totalAssignments]}),a.jsxs("span",{children:[e("widgets.student_progress.quizzes"),": ",u.completedQuizzes,"/",u.totalQuizzes]})]})]},u.courseId))}),o&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-2xl shadow-2xl p-6 relative",children:[a.jsx("button",{onClick:u=>{u.stopPropagation(),l(null)},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:a.jsx(Je,{size:20})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:o.courseName}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:e("widgets.student_progress.detailed_overview")}),a.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto pr-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:e("widgets.student_progress.latest_results")}),o.recentResults&&o.recentResults.length>0?a.jsx("div",{className:"space-y-2",children:o.recentResults.slice(0,10).map((u,h)=>a.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-gray-50 dark:bg-[#282a2c]",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300 block",children:u.title}),a.jsx("span",{className:"text-[10px] text-gray-500",children:u.type})]}),a.jsx("span",{className:"font-bold text-indigo-600",children:u.scoreOrGrade})]},h))}):a.jsx("p",{className:"text-sm text-gray-400 italic",children:e("widgets.student_progress.no_results")})]}),o.isAtRisk&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-100 dark:border-red-900",children:[a.jsxs("h4",{className:"flex items-center gap-2 text-red-700 dark:text-red-300 font-bold text-sm mb-1",children:[a.jsx(Dr,{size:16})," ",e("widgets.student_progress.at_risk")]}),a.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400",children:[o.riskReason,". ",e("widgets.student_progress.catch_up")]})]})]}),a.jsxs("button",{onClick:()=>c(`/course/${o.courseSlug||o.courseId}`),className:"w-full mt-6 bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2",children:[e("widgets.student_progress.go_to_course")," ",a.jsx(or,{size:16})]})]})})]})},wje=({upcomingAssignments:t,lastGraded:e,isModuleActive:r,navigate:n,currentUser:s})=>{const{t:i}=nt();return a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4",children:[e&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-green-50 dark:bg-green-900/10 rounded-bl-full -mr-4 -mt-4"}),a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx(nr,{size:16,className:"text-green-500"})," ",i("dashboard.feedback.new")]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:i("dashboard.feedback.course",{name:e.courseName})}),a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:e.assignmentTitle})]}),a.jsxs("div",{className:"flex items-center gap-3 bg-green-50 dark:bg-green-900/20 p-3 rounded-xl border border-green-100 dark:border-green-800",children:[a.jsx("div",{className:"text-3xl font-black text-green-600 dark:text-green-400",children:e.grade}),a.jsx("div",{className:"text-xs text-green-700 dark:text-green-300 font-medium",children:e.feedback?`"${e.feedback}"`:i("dashboard.feedback.praise")})]}),a.jsx("button",{onClick:()=>n(`/course/${e.courseSlug||e.courseId}`),className:"w-full mt-4 text-xs font-bold text-indigo-600 hover:text-indigo-700 hover:underline",children:i("dashboard.feedback.details")})]}),a.jsx(kje,{currentUser:s})]})},jje=({currentUser:t,settings:e})=>{const{t:r}=nt(),[n,s]=N.useState(null),[i,o]=N.useState(!0);if(N.useEffect(()=>{if(!(t!=null&&t.id))return;(async()=>{try{const h=await O.get(`/analytics/my-status?studentId=${t.id}`);s(h)}catch(h){console.error("Failed to load attendance status",h)}finally{o(!1)}})()},[t]),!(e!=null&&e.enabled))return null;if(i)return a.jsx("div",{className:"animate-pulse h-32 bg-gray-100 dark:bg-[#131314] rounded-xl"});if(!n)return null;const l=u=>{switch(u){case"High":return"text-red-500 bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900/30";case"Medium":return"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 border-yellow-100 dark:border-yellow-900/30";case"Low":default:return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-900/30"}},c=u=>{switch(u){case"High":return a.jsx(Dr,{size:24});case"Medium":return a.jsx(Tt,{size:24});case"Low":default:return a.jsx(nr,{size:24})}},d=l(n.riskLevel);return a.jsxs("div",{className:"h-full w-full p-5",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(hs,{size:18,className:"text-indigo-500"}),r("widgets.attendance_widget.title")]}),a.jsx("div",{className:`p-2 rounded-lg border ${d}`,children:c(n.riskLevel)})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:r("widgets.attendance_widget.activity_level")}),a.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[n.healthScore,"/100"]})]}),a.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${n.riskLevel==="High"?"bg-red-500":n.riskLevel==="Medium"?"bg-yellow-500":"bg-emerald-500"}`,style:{width:`${n.healthScore}%`}})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center text-xs",children:[a.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-[#282a2c] rounded-lg",children:[a.jsx("p",{className:"text-gray-500 mb-1",children:r("widgets.attendance_widget.registered_time")}),a.jsxs("p",{className:"font-mono font-bold text-sm text-gray-900 dark:text-white",children:[n.hoursLogged,"h"]})]}),a.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-[#282a2c] rounded-lg",children:[a.jsx("p",{className:"text-gray-500 mb-1",children:r("widgets.attendance_widget.goal_week")}),a.jsxs("p",{className:"font-mono font-bold text-sm text-gray-900 dark:text-white",children:[n.expectedHours,"h"]})]})]}),n.riskLevel==="High"&&a.jsx("div",{className:"text-xs text-red-600 bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-100 dark:border-red-900/30",children:r("widgets.attendance_widget.low_warning")})]})]})},Dy="/api",My=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}),Ly=async t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()},jL={getDailyChallenges:t=>fetch(`${Dy}/gamification/challenges/daily/${t}`,{headers:My()}).then(Ly),getLoginStreak:t=>fetch(`${Dy}/gamification/streak/login/${t}`,{headers:My()}).then(Ly),updateLoginStreak:t=>fetch(`${Dy}/gamification/streak/login/${t}`,{method:"POST",headers:My()}).then(Ly),incrementChallenge:(t,e)=>fetch(`${Dy}/gamification/challenges/${t}/increment`,{method:"POST",headers:My(),body:JSON.stringify({challengeType:e})}).then(Ly)},Nje=()=>{const{t}=nt(),{currentUser:e}=At(),{isEnabled:r,isDailyChallengesEnabled:n}=Y2(),[s,i]=N.useState([]),[o,l]=N.useState(0),[c,d]=N.useState(!0);N.useEffect(()=>{e!=null&&e.id&&r&&n?u():d(!1)},[e,r,n]);const u=async()=>{try{const[x,m]=await Promise.all([jL.getDailyChallenges(e.id),jL.getLoginStreak(e.id)]),p=(x||[]).map(b=>({...b,progress:b.currentProgress||0,target:b.targetValue||1,icon:h(b.challengeType)}));i(p),l((m==null?void 0:m.streak)||0),d(!1)}catch(x){console.error("Failed to fetch daily challenges:",x),i([]),l(0),d(!1)}},h=x=>{switch(x){case"COMPLETE_ASSIGNMENTS":return"target";case"HIGH_SCORE":return"trophy";case"LOGIN_STREAK":return"flame";default:return"target"}},f=x=>{switch(x){case"target":return a.jsx(Vi,{size:20});case"trophy":return a.jsx(di,{size:20});case"flame":return a.jsx(F0,{size:20});default:return a.jsx(Vi,{size:20})}},g=(x,m)=>Math.min(x/m*100,100);return!r||!n?null:c?a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-800",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"}),a.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})]})]})}):a.jsxs("div",{className:"h-full w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-orange-500 to-pink-500 rounded-xl",children:a.jsx(Vi,{className:"text-white",size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t("dashboard.widgets.daily_challenges_widget.title")}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("dashboard.widgets.daily_challenges_widget.subtitle")})]})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-orange-50 dark:bg-orange-900/20 px-3 py-2 rounded-xl",children:[a.jsx(F0,{className:"text-orange-500",size:20}),a.jsx("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:t("dashboard.widgets.daily_challenges_widget.days",{count:o})})]})]}),a.jsx("div",{className:"space-y-3",children:s.length===0?a.jsx("div",{className:"text-center py-8 text-gray-400",children:a.jsx("p",{children:t("dashboard.widgets.daily_challenges_widget.empty")})}):s.map(x=>{const m=g(x.progress,x.target),p=x.completed||x.progress>=x.target;return a.jsxs("div",{className:`relative p-4 rounded-xl border-2 transition-all ${p?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-700"}`,children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${p?"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400":"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400"}`,children:p?a.jsx(nr,{size:20}):f(x.icon)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:x.title}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:x.description})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-amber-100 dark:bg-amber-900/30 px-2 py-1 rounded-lg",children:[a.jsx(Sr,{size:12,className:"text-amber-600 dark:text-amber-400"}),a.jsxs("span",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:["+",x.xpReward," XP"]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[x.progress," / ",x.target]}),a.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[Math.round(m),"%"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-500 ${p?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-indigo-500 to-purple-500"}`,style:{width:`${m}%`}})})]})]})]}),p&&a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("div",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:t("dashboard.widgets.daily_challenges_widget.completed")})})]},x.id)})}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(Tt,{size:16}),a.jsx("span",{children:t("dashboard.widgets.daily_challenges_widget.reset_in",{hours:24-new Date().getHours(),minutes:60-new Date().getMinutes()})})]})})]})},_je=({assignments:t=[]})=>{const{t:e}=nt(),r=Et(),[n,s]=N.useState([]),[i,o]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const d=await O.events.getAll(),u=new Date;u.setHours(0,0,0,0);const h=new Date(u);h.setDate(u.getDate()+7);const f=d.filter(g=>{if(!g.startTime)return!1;let x=null;return Array.isArray(g.startTime)?x=new Date(g.startTime[0],g.startTime[1]-1,g.startTime[2]):x=new Date(g.startTime),x.setHours(0,0,0,0),x>=u&&x<=h}).map(g=>{const x=_=>Array.isArray(_)?new Date(_[0],_[1]-1,_[2],_[3],_[4]):new Date(_),m=x(g.startTime),p=x(g.endTime),b=m.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),v=p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),y=new Date(m);y.setHours(0,0,0,0);let w=m.toLocaleDateString("sv-SE",{weekday:"long"});w=w.charAt(0).toUpperCase()+w.slice(1);const k=y-u,j=Math.ceil(k/(1e3*60*60*24));return j===0?w=e("common.today"):j===1&&(w=e("common.tomorrow")),{id:g.id,subject:g.title,time:`${b} - ${v}`,dayLabel:w,rawDate:m,type:g.type==="LECTURE"||g.meetingLink?"online":"campus",platform:g.platform||(g.meetingLink?"Zoom":null),link:g.meetingLink,room:g.location||e("widgets.schedule.room_missing")}});f.sort((g,x)=>g.rawDate-x.rawDate),s(f)}catch(d){console.error("Failed to fetch calendar events",d)}finally{o(!1)}})()},[]);const l=c=>c?a.jsx(xi,{size:14}):a.jsx(B0,{size:14});return a.jsx("div",{className:"h-full w-full overflow-hidden",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-gray-100 dark:divide-[#3c4043]",children:[a.jsxs("div",{className:"p-5",children:[a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(zt,{className:"text-indigo-500",size:20}),e("widgets.schedule.title")]}),a.jsx("div",{className:"space-y-3 min-h-[150px]",children:i?a.jsx("div",{className:"text-center text-sm text-gray-400 py-4",children:e("widgets.schedule.loading")}):n.length>0?n.map(c=>a.jsxs("div",{className:"relative pl-4 border-l-2 border-indigo-100 dark:border-indigo-900/50 py-1",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-black uppercase text-indigo-600 dark:text-indigo-400",children:c.dayLabel}),a.jsxs("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[a.jsx(Tt,{size:10})," ",c.time]})]}),c.type==="online"?a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold ${c.platform==="Zoom"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"}`,children:c.platform||e("widgets.schedule.online")}):a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full font-bold bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",children:e("widgets.schedule.campus")})]}),a.jsx("h4",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 truncate",children:c.subject}),c.type==="online"&&c.link?a.jsxs("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 py-1.5 bg-indigo-50 hover:bg-indigo-100 dark:bg-[#282a2c] dark:hover:bg-[#3c4043] text-indigo-700 dark:text-indigo-300 rounded-lg text-xs font-bold transition-colors",children:[l(c.platform)," ",e("widgets.schedule.connect")]}):a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[a.jsx(B0,{size:12})," ",c.room]})]},c.id)):a.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 text-sm py-4",children:a.jsx("p",{children:e("widgets.schedule.empty")})})}),a.jsxs("button",{onClick:()=>r("/calendar"),className:"w-full mt-4 flex items-center justify-center gap-1 text-xs font-bold text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:[e("widgets.schedule.view_full")," ",a.jsx(Wa,{size:12})]})]}),a.jsxs("div",{className:"p-5 bg-gray-50/50 dark:bg-[#282a2c]/20",children:[a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(hh,{className:"text-orange-500",size:20}),e("widgets.schedule.upcoming_submissions"),t.length>0&&a.jsx("span",{className:"text-xs font-bold bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded-full",children:t.length})]}),a.jsx("div",{className:"space-y-3 min-h-[150px]",children:t.length>0?t.slice(0,3).map(c=>a.jsxs("div",{className:"group p-3 bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-100 dark:border-[#3c4043] shadow-sm hover:border-orange-200 dark:hover:border-orange-900 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("h4",{className:"font-bold text-sm text-gray-900 dark:text-white truncate pr-2",children:c.title}),a.jsx("span",{className:"text-[10px] font-bold text-gray-400 whitespace-nowrap",children:new Date(c.dueDate).toLocaleDateString()})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mb-2",children:c.courseName}),a.jsxs("button",{onClick:()=>r(`/course/${c.courseId}`),className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 flex items-center gap-1 hover:underline",children:[e("widgets.schedule.go_to_task")," ",a.jsx(Wa,{size:10})]})]},c.id)):a.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 text-sm py-4",children:a.jsx("p",{children:e("widgets.schedule.no_deadlines")})})}),t.length>3&&a.jsx("button",{className:"w-full mt-4 text-xs font-bold text-center text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",children:e("widgets.schedule.view_all_count",{count:t.length})})]})]})})},Sje=({currentUser:t,isModuleActive:e})=>{const{t:r}=nt(),n=Et(),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState({points:0,level:1});if(N.useEffect(()=>{if(!e("GAMIFICATION")||!(t!=null&&t.id))return;(async()=>{try{const y=await O.users.getById(t.id);d({points:(y==null?void 0:y.points)||0,level:(y==null?void 0:y.level)||1});const[w,k,j]=await Promise.all([O.get("/gamification/achievements").catch(()=>[]),O.get("/gamification/achievements/my").catch(()=>[]),O.gamification.getMyStreak().catch(()=>({streak:0}))]);i(w||[]),l(k||[]),d(_=>({..._,streak:(j==null?void 0:j.streak)||0}))}catch(y){console.error("Failed to load gamification data",y)}})()},[t==null?void 0:t.id,e]),!e("GAMIFICATION"))return null;const u=100,h=c.points,f=c.level,g=h%u,x=g/u*100,m=u-g,b=o.filter(v=>v.unlocked).slice(0,4).map(v=>{const y=s.find(w=>w.id===v.achievementId);return{...v,achievement:y}});return a.jsxs("div",{className:"h-full w-full relative overflow-hidden p-5",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:a.jsx(va,{size:80})}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:r("gamification.level_title")}),a.jsxs("h2",{className:"text-4xl font-black text-gray-900 dark:text-white flex items-center gap-2",children:[f,a.jsx("span",{className:"text-sm font-medium text-gray-400 bg-white dark:bg-[#3c4043] px-2 py-0.5 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:r("gamification.student_rank")})]})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-xl border-2 transition-all duration-500 animate-in zoom-in-50 ${c.streak>0?"bg-orange-50 dark:bg-orange-950/20 border-orange-200 dark:border-orange-800 text-orange-600 dark:text-orange-400 shadow-sm shadow-orange-100":"bg-gray-50 dark:bg-gray-900/40 border-gray-100 dark:border-gray-800 text-gray-400"}`,children:[a.jsx(va,{size:18,fill:c.streak>0?"currentColor":"none",className:c.streak>0?"animate-pulse":""}),a.jsx("span",{className:"text-lg font-black",children:c.streak})]}),a.jsx("p",{className:"text-[10px] font-bold mt-1 text-gray-400 uppercase tracking-tighter",children:"Day Streak"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-xs font-bold mb-1",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[h," XP"]}),a.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:r("gamification.points_to_next",{count:m})})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-black/40 h-2.5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-amber-500 rounded-full transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${x}%`}})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:r("gamification.my_badges")}),a.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[b.length>0?b.map(v=>{const y=v.achievement||{};return a.jsx("div",{className:"aspect-square rounded-xl bg-white dark:bg-[#3c4043] shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-center text-indigo-500",title:y.name,children:y.iconUrl?a.jsx("span",{className:"text-xl",children:y.iconUrl}):a.jsx(Mr,{size:20})},v.id)}):a.jsx("div",{className:"col-span-4 text-center py-2 text-xs text-gray-400 italic bg-white/50 dark:bg-black/20 rounded-lg",children:r("gamification.no_awards")}),b.length>0&&[...Array(Math.max(0,4-b.length))].map((v,y)=>a.jsx("div",{className:"aspect-square rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 flex items-center justify-center text-gray-300 dark:text-gray-600",children:a.jsx(ya,{size:14})},`empty-${y}`))]})]})]}),a.jsx("button",{onClick:()=>n("/profile?tab=achievements"),className:"w-full mt-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-xs font-bold shadow-md shadow-indigo-200 dark:shadow-none transition-all hover:scale-[1.02]",children:r("gamification.view_all")})]})},Aje=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),s=Et(),{t:i}=nt();return N.useEffect(()=>{(async()=>{try{const l=await O.evaluations.getMyActive();e(l||[])}catch(l){console.error("Failed to fetch evaluations:",l)}finally{n(!1)}})()},[]),r||t.length===0?null:a.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-rose-600 rounded-3xl p-6 text-white shadow-xl shadow-rose-200 dark:shadow-none overflow-hidden relative group transition-all hover:scale-[1.01]",children:[a.jsx("div",{className:"absolute -top-6 -right-6 w-32 h-32 bg-white/10 rounded-full blur-2xl group-hover:bg-white/20 transition-colors"}),a.jsx("div",{className:"absolute top-1/2 -left-8 w-24 h-24 bg-rose-400/20 rounded-full blur-xl animate-pulse"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-xl backdrop-blur-md",children:a.jsx(er,{size:24,className:"text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg leading-tight",children:"Din rst r viktig!"}),a.jsxs("p",{className:"text-rose-100 text-xs font-medium uppercase tracking-wider",children:["Vntande utvrderingar (",t.length,")"]})]})]}),a.jsx("div",{className:"space-y-3",children:t.map(o=>a.jsx("div",{className:"bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/10 rounded-2xl p-4 transition-all cursor-pointer group/item",onClick:()=>s(`/evaluations/student/${o.id}`),children:a.jsxs("div",{className:"flex justify-between items-start gap-3",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h4",{className:"font-bold text-sm truncate mb-1",children:o.title}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-rose-100",children:[a.jsx(Tt,{size:10}),a.jsxs("span",{children:["Aktiverad ",new Date(o.startDate).toLocaleDateString()]})]})]}),a.jsx("div",{className:"bg-white text-rose-600 p-1.5 rounded-lg opacity-0 group-hover/item:opacity-100 transition-all translate-x-2 group-hover/item:translate-x-0",children:a.jsx(Wa,{size:14})})]})},o.id))}),a.jsx("div",{className:"mt-5 flex items-center justify-between text-[10px] font-bold uppercase tracking-widest text-rose-100/80",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ya,{size:10,className:"fill-current"}),a.jsx("span",{children:"Hjlp oss bli bttre"})]})})]})]})},Iu={getShopItems:async()=>O.shop.getItems(),buyItem:async t=>O.shop.buyItem(t),equipItem:async t=>O.shop.equipItem(t),unequipItem:async t=>O.shop.unequipItem(t),getMyInventory:async()=>O.shop.getInventory(),getDailyQuests:async()=>O.gamification.getQuests("daily"),getFriends:async()=>O.gamification.social.getFriends(),sendFriendRequest:async t=>O.gamification.social.sendRequest(t),getPendingRequests:async()=>O.gamification.social.getPendingRequests(),acceptFriendRequest:async t=>O.gamification.social.acceptRequest(t)},Eje=()=>{const{t}=nt(),{isModuleActive:e}=oa(),[r,n]=N.useState([]),[s,i]=N.useState(!0);return N.useEffect(()=>{(async()=>{if(e("EDUGAME"))try{const l=await Iu.getDailyQuests("DAILY");n(l||[])}catch(l){console.error("Failed to fetch quests",l)}finally{i(!1)}})()},[e]),e("EDUGAME")?s?a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-12 bg-gray-100 dark:bg-gray-800 rounded-xl"}),a.jsx("div",{className:"h-12 bg-gray-100 dark:bg-gray-800 rounded-xl"})]})]}):a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm h-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Vi,{className:"text-indigo-500",size:20}),"Dagens Uppdrag"]}),a.jsx(Nd,{to:"/quests",className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",children:"Visa alla"})]}),r.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(di,{size:32,className:"mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Inga uppdrag just nu"})]}):a.jsx("div",{className:"space-y-3",children:r.map(o=>{const l=Math.min(100,Math.round(o.currentCount/o.targetCount*100)),c=o.isCompleted||l>=100;return a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-[#282a2c] rounded-xl border border-gray-100 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:`text-sm font-bold ${c?"text-gray-500 line-through":"text-gray-900 dark:text-white"}`,children:o.title}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-1",children:o.description})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs font-bold text-amber-500 bg-amber-50 dark:bg-amber-900/20 px-1.5 py-0.5 rounded",children:[a.jsx(di,{size:10}),"+",o.rewardXp," XP"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c?"bg-green-500":"bg-indigo-500"}`,style:{width:`${l}%`}})}),a.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 w-12 text-right",children:[o.currentCount,"/",o.targetCount]})]})]},o.id)})})]}):null},sT=N.createContext({});function iT(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const eV=typeof window<"u",tV=eV?N.useLayoutEffect:N.useEffect,Mw=N.createContext(null);function oT(t,e){t.indexOf(e)===-1&&t.push(e)}function lT(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const tl=(t,e,r)=>r>e?e:r<t?t:r;let cT=()=>{};const nc={},rV=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function nV(t){return typeof t=="object"&&t!==null}const aV=t=>/^0[^.\s]+$/u.test(t);function dT(t){let e;return()=>(e===void 0&&(e=t()),e)}const bi=t=>t,Cje=(t,e)=>r=>e(t(r)),Cb=(...t)=>t.reduce(Cje),ax=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class uT{constructor(){this.subscriptions=[]}add(e){return oT(this.subscriptions,e),()=>lT(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $l=t=>t*1e3,hi=t=>t/1e3;function sV(t,e){return e?t*(1e3/e):0}const iV=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,Tje=1e-7,Oje=12;function Ije(t,e,r,n,s){let i,o,l=0;do o=e+(r-e)/2,i=iV(o,n,s)-t,i>0?r=o:e=o;while(Math.abs(i)>Tje&&++l<Oje);return o}function Tb(t,e,r,n){if(t===e&&r===n)return bi;const s=i=>Ije(i,0,1,t,r);return i=>i===0||i===1?i:iV(s(i),e,n)}const oV=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,lV=t=>e=>1-t(1-e),cV=Tb(.33,1.53,.69,.99),hT=lV(cV),dV=oV(hT),uV=t=>(t*=2)<1?.5*hT(t):.5*(2-Math.pow(2,-10*(t-1))),fT=t=>1-Math.sin(Math.acos(t)),hV=lV(fT),fV=oV(fT),Dje=Tb(.42,0,1,1),Mje=Tb(0,0,.58,1),gV=Tb(.42,0,.58,1),Lje=t=>Array.isArray(t)&&typeof t[0]!="number",mV=t=>Array.isArray(t)&&typeof t[0]=="number",Rje={linear:bi,easeIn:Dje,easeInOut:gV,easeOut:Mje,circIn:fT,circInOut:fV,circOut:hV,backIn:hT,backInOut:dV,backOut:cV,anticipate:uV},Pje=t=>typeof t=="string",NL=t=>{if(mV(t)){cT(t.length===4);const[e,r,n,s]=t;return Tb(e,r,n,s)}else if(Pje(t))return Rje[t];return t},Ry=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function zje(t,e){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(d.schedule(u),t()),u(l)}const d={schedule:(u,h=!1,f=!1)=>{const x=f&&s?r:n;return h&&o.add(u),x.has(u)||x.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(l=u,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,i&&(i=!1,d.process(u))}};return d}const $je=40;function pV(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=Ry.reduce((y,w)=>(y[w]=zje(i),y),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:h,preRender:f,render:g,postRender:x}=o,m=()=>{const y=nc.useManualTiming?s.timestamp:performance.now();r=!1,nc.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(y-s.timestamp,$je),1)),s.timestamp=y,s.isProcessing=!0,l.process(s),c.process(s),d.process(s),u.process(s),h.process(s),f.process(s),g.process(s),x.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(m))},p=()=>{r=!0,n=!0,s.isProcessing||t(m)};return{schedule:Ry.reduce((y,w)=>{const k=o[w];return y[w]=(j,_=!1,S=!1)=>(r||p(),k.schedule(j,_,S)),y},{}),cancel:y=>{for(let w=0;w<Ry.length;w++)o[Ry[w]].cancel(y)},state:s,steps:o}}const{schedule:rn,cancel:Ed,state:ha,steps:i_}=pV(typeof requestAnimationFrame<"u"?requestAnimationFrame:bi,!0);let Rv;function Fje(){Rv=void 0}const Ba={now:()=>(Rv===void 0&&Ba.set(ha.isProcessing||nc.useManualTiming?ha.timestamp:performance.now()),Rv),set:t=>{Rv=t,queueMicrotask(Fje)}},xV=t=>e=>typeof e=="string"&&e.startsWith(t),bV=xV("--"),Bje=xV("var(--"),gT=t=>Bje(t)?Uje.test(t.split("/*")[0].trim()):!1,Uje=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function _L(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const pm={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},sx={...pm,transform:t=>tl(0,1,t)},Py={...pm,default:1},n0=t=>Math.round(t*1e5)/1e5,mT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Kje(t){return t==null}const Gje=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pT=(t,e)=>r=>!!(typeof r=="string"&&Gje.test(r)&&r.startsWith(t)||e&&!Kje(r)&&Object.prototype.hasOwnProperty.call(r,e)),yV=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,l]=n.match(mT);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},qje=t=>tl(0,255,t),o_={...pm,transform:t=>Math.round(qje(t))},xu={test:pT("rgb","red"),parse:yV("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+o_.transform(t)+", "+o_.transform(e)+", "+o_.transform(r)+", "+n0(sx.transform(n))+")"};function Vje(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const EA={test:pT("#"),parse:Vje,transform:xu.transform},Ob=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Cc=Ob("deg"),$o=Ob("%"),ht=Ob("px"),Hje=Ob("vh"),Wje=Ob("vw"),SL={...$o,parse:t=>$o.parse(t)/100,transform:t=>$o.transform(t*100)},jf={test:pT("hsl","hue"),parse:yV("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+$o.transform(n0(e))+", "+$o.transform(n0(r))+", "+n0(sx.transform(n))+")"},Cn={test:t=>xu.test(t)||EA.test(t)||jf.test(t),parse:t=>xu.test(t)?xu.parse(t):jf.test(t)?jf.parse(t):EA.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?xu.transform(t):jf.transform(t),getAnimatableNone:t=>{const e=Cn.parse(t);return e.alpha=0,Cn.transform(e)}},Xje=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Yje(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(mT))==null?void 0:e.length)||0)+(((r=t.match(Xje))==null?void 0:r.length)||0)>0}const vV="number",kV="color",Zje="var",Qje="var(",AL="${}",Jje=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ix(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=e.replace(Jje,c=>(Cn.test(c)?(n.color.push(i),s.push(kV),r.push(Cn.parse(c))):c.startsWith(Qje)?(n.var.push(i),s.push(Zje),r.push(c)):(n.number.push(i),s.push(vV),r.push(parseFloat(c))),++i,AL)).split(AL);return{values:r,split:l,indexes:n,types:s}}function wV(t){return ix(t).values}function jV(t){const{split:e,types:r}=ix(t),n=e.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],s[o]!==void 0){const l=r[o];l===vV?i+=n0(s[o]):l===kV?i+=Cn.transform(s[o]):i+=s[o]}return i}}const eNe=t=>typeof t=="number"?0:Cn.test(t)?Cn.getAnimatableNone(t):t;function tNe(t){const e=wV(t);return jV(t)(e.map(eNe))}const Cd={test:Yje,parse:wV,createTransformer:jV,getAnimatableNone:tNe};function l_(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function rNe({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,o=0;if(!e)s=i=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;s=l_(c,l,t+1/3),i=l_(c,l,t),o=l_(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function H1(t,e){return r=>r>0?e:t}const dn=(t,e,r)=>t+(e-t)*r,c_=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},nNe=[EA,xu,jf],aNe=t=>nNe.find(e=>e.test(t));function EL(t){const e=aNe(t);if(!e)return!1;let r=e.parse(t);return e===jf&&(r=rNe(r)),r}const CL=(t,e)=>{const r=EL(t),n=EL(e);if(!r||!n)return H1(t,e);const s={...r};return i=>(s.red=c_(r.red,n.red,i),s.green=c_(r.green,n.green,i),s.blue=c_(r.blue,n.blue,i),s.alpha=dn(r.alpha,n.alpha,i),xu.transform(s))},CA=new Set(["none","hidden"]);function sNe(t,e){return CA.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function iNe(t,e){return r=>dn(t,e,r)}function xT(t){return typeof t=="number"?iNe:typeof t=="string"?gT(t)?H1:Cn.test(t)?CL:cNe:Array.isArray(t)?NV:typeof t=="object"?Cn.test(t)?CL:oNe:H1}function NV(t,e){const r=[...t],n=r.length,s=t.map((i,o)=>xT(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function oNe(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=xT(t[s])(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function lNe(t,e){const r=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][n[i]],l=t.values[o]??0;r[s]=l,n[i]++}return r}const cNe=(t,e)=>{const r=Cd.createTransformer(e),n=ix(t),s=ix(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?CA.has(t)&&!s.values.length||CA.has(e)&&!n.values.length?sNe(t,e):Cb(NV(lNe(n,s),s.values),r):H1(t,e)};function _V(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?dn(t,e,r):xT(t)(t,e)}const dNe=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>rn.update(e,r),stop:()=>Ed(e),now:()=>ha.isProcessing?ha.timestamp:Ba.now()}},SV=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let i=0;i<s;i++)n+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},W1=2e4;function bT(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<W1;)e+=r,n=t.next(e);return e>=W1?1/0:e}function uNe(t,e=100,r){const n=r({...t,keyframes:[0,e]}),s=Math.min(bT(n),W1);return{type:"keyframes",ease:i=>n.next(s*i).value/e,duration:hi(s)}}const hNe=5;function AV(t,e,r){const n=Math.max(e-hNe,0);return sV(r-t(n),e-n)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},d_=.001;function fNe({duration:t=mn.duration,bounce:e=mn.bounce,velocity:r=mn.velocity,mass:n=mn.mass}){let s,i,o=1-e;o=tl(mn.minDamping,mn.maxDamping,o),t=tl(mn.minDuration,mn.maxDuration,hi(t)),o<1?(s=d=>{const u=d*o,h=u*t,f=u-r,g=TA(d,o),x=Math.exp(-h);return d_-f/g*x},i=d=>{const h=d*o*t,f=h*r+r,g=Math.pow(o,2)*Math.pow(d,2)*t,x=Math.exp(-h),m=TA(Math.pow(d,2),o);return(-s(d)+d_>0?-1:1)*((f-g)*x)/m}):(s=d=>{const u=Math.exp(-d*t),h=(d-r)*t+1;return-d_+u*h},i=d=>{const u=Math.exp(-d*t),h=(r-d)*(t*t);return u*h});const l=5/t,c=mNe(s,i,l);if(t=$l(t),isNaN(c))return{stiffness:mn.stiffness,damping:mn.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:t}}}const gNe=12;function mNe(t,e,r){let n=r;for(let s=1;s<gNe;s++)n=n-t(n)/e(n);return n}function TA(t,e){return t*Math.sqrt(1-e*e)}const pNe=["duration","bounce"],xNe=["stiffness","damping","mass"];function TL(t,e){return e.some(r=>t[r]!==void 0)}function bNe(t){let e={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...t};if(!TL(t,xNe)&&TL(t,pNe))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*tl(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:mn.mass,stiffness:s,damping:i}}else{const r=fNe(t);e={...e,...r,mass:mn.mass},e.isResolvedFromDuration=!0}return e}function X1(t=mn.visualDuration,e=mn.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:f,isResolvedFromDuration:g}=bNe({...r,velocity:-hi(r.velocity||0)}),x=f||0,m=d/(2*Math.sqrt(c*u)),p=o-i,b=hi(Math.sqrt(c/u)),v=Math.abs(p)<5;n||(n=v?mn.restSpeed.granular:mn.restSpeed.default),s||(s=v?mn.restDelta.granular:mn.restDelta.default);let y;if(m<1){const k=TA(b,m);y=j=>{const _=Math.exp(-m*b*j);return o-_*((x+m*b*p)/k*Math.sin(k*j)+p*Math.cos(k*j))}}else if(m===1)y=k=>o-Math.exp(-b*k)*(p+(x+b*p)*k);else{const k=b*Math.sqrt(m*m-1);y=j=>{const _=Math.exp(-m*b*j),S=Math.min(k*j,300);return o-_*((x+m*b*p)*Math.sinh(S)+k*p*Math.cosh(S))/k}}const w={calculatedDuration:g&&h||null,next:k=>{const j=y(k);if(g)l.done=k>=h;else{let _=k===0?x:0;m<1&&(_=k===0?$l(x):AV(y,k,j));const S=Math.abs(_)<=n,A=Math.abs(o-j)<=s;l.done=S&&A}return l.value=l.done?o:j,l},toString:()=>{const k=Math.min(bT(w),W1),j=SV(_=>w.next(k*_).value,k,30);return k+"ms "+j},toTransition:()=>{}};return w}X1.applyToOptions=t=>{const e=uNe(t,100,X1);return t.ease=e.ease,t.duration=$l(e.duration),t.type="keyframes",t};function OA({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},g=S=>l!==void 0&&S<l||c!==void 0&&S>c,x=S=>l===void 0?c:c===void 0||Math.abs(l-S)<Math.abs(c-S)?l:c;let m=r*e;const p=h+m,b=o===void 0?p:o(p);b!==p&&(m=b-h);const v=S=>-m*Math.exp(-S/n),y=S=>b+v(S),w=S=>{const A=v(S),T=y(S);f.done=Math.abs(A)<=d,f.value=f.done?b:T};let k,j;const _=S=>{g(f.value)&&(k=S,j=X1({keyframes:[f.value,x(f.value)],velocity:AV(y,S,f.value),damping:s,stiffness:i,restDelta:d,restSpeed:u}))};return _(0),{calculatedDuration:null,next:S=>{let A=!1;return!j&&k===void 0&&(A=!0,w(S),_(S)),k!==void 0&&S>=k?j.next(S-k):(!A&&w(S),f)}}}function yNe(t,e,r){const n=[],s=r||nc.mix||_V,i=t.length-1;for(let o=0;o<i;o++){let l=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||bi:e;l=Cb(c,l)}n.push(l)}return n}function vNe(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(cT(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=yNe(e,n,s),c=l.length,d=u=>{if(o&&u<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=ax(t[h],t[h+1],u);return l[h](f)};return r?u=>d(tl(t[0],t[i-1],u)):d}function kNe(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=ax(0,e,n);t.push(dn(r,1,s))}}function wNe(t){const e=[0];return kNe(e,t.length-1),e}function jNe(t,e){return t.map(r=>r*e)}function NNe(t,e){return t.map(()=>e||gV).splice(0,t.length-1)}function a0({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=Lje(n)?n.map(NL):NL(n),i={done:!1,value:e[0]},o=jNe(r&&r.length===e.length?r:wNe(e),t),l=vNe(o,e,{ease:Array.isArray(s)?s:NNe(e,s)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const _Ne=t=>t!==null;function yT(t,{repeat:e,repeatType:r="loop"},n,s=1){const i=t.filter(_Ne),l=s<0||e&&r!=="loop"&&e%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const SNe={decay:OA,inertia:OA,tween:a0,keyframes:a0,spring:X1};function EV(t){typeof t.type=="string"&&(t.type=SNe[t.type])}class vT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const ANe=t=>t/100;class kT extends vT{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:r}=this.options;r&&r.updatedAt!==Ba.now()&&this.tick(Ba.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;EV(e);const{type:r=a0,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=r||a0;c!==a0&&typeof l[0]!="number"&&(this.mixKeyframes=Cb(ANe,_V(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=bT(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=d}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:g,type:x,onUpdate:m,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?b<0:b>s;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let y=this.currentTime,w=n;if(h){const S=Math.min(this.currentTime,s)/l;let A=Math.floor(S),T=S%1;!T&&S>=1&&(T=1),T===1&&A--,A=Math.min(A,h+1),!!(A%2)&&(f==="reverse"?(T=1-T,g&&(T-=g/l)):f==="mirror"&&(w=o)),y=tl(0,1,T)*l}const k=v?{done:!1,value:u[0]}:w.next(y);i&&(k.value=i(k.value));let{done:j}=k;!v&&c!==null&&(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return _&&x!==OA&&(k.value=yT(u,this.options,p,this.speed)),m&&m(k.value),_&&this.finish(),k}then(e,r){return this.finished.then(e,r)}get duration(){return hi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+hi(e)}get time(){return hi(this.currentTime)}set time(e){var r;e=$l(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ba.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=hi(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=dNe,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ba.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function ENe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const bu=t=>t*180/Math.PI,IA=t=>{const e=bu(Math.atan2(t[1],t[0]));return DA(e)},CNe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:IA,rotateZ:IA,skewX:t=>bu(Math.atan(t[1])),skewY:t=>bu(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},DA=t=>(t=t%360,t<0&&(t+=360),t),OL=IA,IL=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),DL=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),TNe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:IL,scaleY:DL,scale:t=>(IL(t)+DL(t))/2,rotateX:t=>DA(bu(Math.atan2(t[6],t[5]))),rotateY:t=>DA(bu(Math.atan2(-t[2],t[0]))),rotateZ:OL,rotate:OL,skewX:t=>bu(Math.atan(t[4])),skewY:t=>bu(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function MA(t){return t.includes("scale")?1:0}function LA(t,e){if(!t||t==="none")return MA(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=TNe,s=r;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=CNe,s=l}if(!s)return MA(e);const i=n[e],o=s[1].split(",").map(INe);return typeof i=="function"?i(o):o[i]}const ONe=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return LA(r,e)};function INe(t){return parseFloat(t.trim())}const xm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bm=new Set(xm),ML=t=>t===pm||t===ht,DNe=new Set(["x","y","z"]),MNe=xm.filter(t=>!DNe.has(t));function LNe(t){const e=[];return MNe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const Qc={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>LA(e,"x"),y:(t,{transform:e})=>LA(e,"y")};Qc.translateX=Qc.x;Qc.translateY=Qc.y;const Du=new Set;let RA=!1,PA=!1,zA=!1;function CV(){if(PA){const t=Array.from(Du).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=LNe(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var l;(l=n.getValue(i))==null||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}PA=!1,RA=!1,Du.forEach(t=>t.complete(zA)),Du.clear()}function TV(){Du.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(PA=!0)})}function RNe(){zA=!0,TV(),CV(),zA=!1}class wT{constructor(e,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Du.add(this),RA||(RA=!0,rn.read(TV),rn.resolveKeyframes(CV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&r){const l=n.readValue(r,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}ENe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Du.delete(this)}cancel(){this.state==="scheduled"&&(Du.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const PNe=t=>t.startsWith("--");function zNe(t,e,r){PNe(e)?t.style.setProperty(e,r):t.style[e]=r}const $Ne=dT(()=>window.ScrollTimeline!==void 0),FNe={};function BNe(t,e){const r=dT(t);return()=>FNe[e]??r()}const OV=BNe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dp=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,LL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dp([0,.65,.55,1]),circOut:Dp([.55,0,1,.45]),backIn:Dp([.31,.01,.66,-.59]),backOut:Dp([.33,1.53,.69,.99])};function IV(t,e){if(t)return typeof t=="function"?OV()?SV(t,e):"ease-out":mV(t)?Dp(t):Array.isArray(t)?t.map(r=>IV(r,e)||LL.easeOut):LL[t]}function UNe(t,e,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[e]:r};c&&(u.offset=c);const h=IV(l,s);Array.isArray(h)&&(u.easing=h);const f={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(f.pseudoElement=d),t.animate(u,f)}function DV(t){return typeof t=="function"&&"applyToOptions"in t}function KNe({type:t,...e}){return DV(t)&&OV()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class GNe extends vT{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,cT(typeof e.type!="string");const d=KNe(e);this.animation=UNe(r,n,s,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=yT(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):zNe(r,n,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return hi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+hi(e)}get time(){return hi(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=$l(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&$Ne()?(this.animation.timeline=e,bi):r(this)}}const MV={anticipate:uV,backInOut:dV,circInOut:fV};function qNe(t){return t in MV}function VNe(t){typeof t.ease=="string"&&qNe(t.ease)&&(t.ease=MV[t.ease])}const u_=10;class HNe extends GNe{constructor(e){VNe(e),EV(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const l=new kT({...o,autoplay:!1}),c=Math.max(u_,Ba.now()-this.startTime),d=tl(0,u_,c-u_);r.setWithVelocity(l.sample(Math.max(0,c-d)).value,l.sample(c).value,d),l.stop()}}const RL=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Cd.test(t)||t==="0")&&!t.startsWith("url("));function WNe(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function XNe(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=RL(s,e),l=RL(i,e);return!o||!l?!1:WNe(t)||(r==="spring"||DV(r))&&n}function $A(t){t.duration=0,t.type="keyframes"}const YNe=new Set(["opacity","clipPath","filter","transform"]),ZNe=dT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function QNe(t){var u;const{motionValue:e,name:r,repeatDelay:n,repeatType:s,damping:i,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return ZNe()&&r&&YNe.has(r)&&(r!=="transform"||!d)&&!c&&!n&&s!=="mirror"&&i!==0&&o!=="inertia"}const JNe=40;class e_e extends vT{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u,...h}){var x;super(),this.stop=()=>{var m,p;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(p=this.keyframeResolver)==null||p.cancel()},this.createdAt=Ba.now();const f={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u,...h},g=(u==null?void 0:u.KeyframeResolver)||wT;this.keyframeResolver=new g(l,(m,p,b)=>this.onKeyframesResolved(m,p,f,!b),c,d,u),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,r,n,s){var p,b;this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:u}=n;this.resolvedAt=Ba.now(),XNe(e,i,o,l)||((nc.instantAnimations||!c)&&(u==null||u(yT(e,n,r))),e[0]=e[e.length-1],$A(n),n.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>JNe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},g=!d&&QNe(f),x=(b=(p=f.motionValue)==null?void 0:p.owner)==null?void 0:b.current,m=g?new HNe({...f,element:x}):new kT(f);m.finished.then(()=>{this.notifyFinished()}).catch(bi),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),RNe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function LV(t,e,r,n=0,s=1){const i=Array.from(t).sort((d,u)=>d.sortNodePosition(u)).indexOf(e),o=t.size,l=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:l-i*n}const t_e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function r_e(t){const e=t_e.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function RV(t,e,r=1){const[n,s]=r_e(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return rV(o)?parseFloat(o):o}return gT(s)?RV(s,e,r+1):s}const n_e={type:"spring",stiffness:500,damping:25,restSpeed:10},a_e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),s_e={type:"keyframes",duration:.8},i_e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},o_e=(t,{keyframes:e})=>e.length>2?s_e:bm.has(t)?t.startsWith("scale")?a_e(e[1]):n_e:i_e,l_e=t=>t!==null;function c_e(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(l_e),i=e&&r!=="loop"&&e%2===1?0:s.length-1;return s[i]}function jT(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}function d_e({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const NT=(t,e,r,n={},s,i)=>o=>{const l=jT(n,t)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-$l(c);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:s};d_e(l)||Object.assign(u,o_e(t,u)),u.duration&&(u.duration=$l(u.duration)),u.repeatDelay&&(u.repeatDelay=$l(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&($A(u),u.delay===0&&(h=!0)),(nc.instantAnimations||nc.skipAnimations)&&(h=!0,$A(u),u.delay=0),u.allowFlatten=!l.type&&!l.ease,h&&!i&&e.get()!==void 0){const f=c_e(u.keyframes,l);if(f!==void 0){rn.update(()=>{u.onUpdate(f),u.onComplete()});return}}return l.isSync?new kT(u):new e_e(u)};function PL(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function _T(t,e,r,n){if(typeof e=="function"){const[s,i]=PL(n);e=e(r!==void 0?r:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=PL(n);e=e(r!==void 0?r:t.custom,s,i)}return e}function Vf(t,e,r){const n=t.getProps();return _T(n,e,r!==void 0?r:n.custom,t)}const PV=new Set(["width","height","top","left","right","bottom",...xm]),zL=30,u_e=t=>!isNaN(parseFloat(t));class h_e{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const s=Ba.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Ba.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=u_e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new uT);const n=this.events[e].add(r);return e==="change"?()=>{n(),rn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ba.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>zL)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,zL);return sV(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vg(t,e){return new h_e(t,e)}const FA=t=>Array.isArray(t);function f_e(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,vg(r))}function g_e(t){return FA(t)?t[t.length-1]||0:t}function m_e(t,e){const r=Vf(t,e);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const l=g_e(i[o]);f_e(t,o,l)}}const Oa=t=>!!(t&&t.getVelocity);function p_e(t){return!!(Oa(t)&&t.add)}function BA(t,e){const r=t.getValue("willChange");if(p_e(r))return r.add(e);if(!r&&nc.WillChange){const n=new nc.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function ST(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const x_e="framerAppearId",zV="data-"+ST(x_e);function $V(t){return t.props[zV]}function b_e({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function FV(t,e,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;const c=i==null?void 0:i.reduceMotion;n&&(i=n);const d=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const h in l){const f=t.getValue(h,t.latestValues[h]??null),g=l[h];if(g===void 0||u&&b_e(u,h))continue;const x={delay:r,...jT(i||{},h)},m=f.get();if(m!==void 0&&!f.isAnimating&&!Array.isArray(g)&&g===m&&!x.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const y=$V(t);if(y){const w=window.MotionHandoffAnimation(y,h,rn);w!==null&&(x.startTime=w,p=!0)}}BA(t,h);const b=c??t.shouldReduceMotion;f.start(NT(h,f,g,b&&PV.has(h)?{type:!1}:x,t,p));const v=f.animation;v&&d.push(v)}return o&&Promise.all(d).then(()=>{rn.update(()=>{o&&m_e(t,o)})}),d}function UA(t,e,r={}){var c;const n=Vf(t,e,r.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(FV(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return y_e(t,e,d,u,h,f,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[d,u]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>u())}else return Promise.all([i(),o(r.delay)])}function y_e(t,e,r=0,n=0,s=0,i=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(UA(c,e,{...o,delay:r+(typeof n=="function"?0:n)+LV(t.variantChildren,c,n,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function v_e(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>UA(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=UA(t,e,r);else{const s=typeof e=="function"?Vf(t,e,r.custom):e;n=Promise.all(FV(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const k_e={test:t=>t==="auto",parse:t=>t},BV=t=>e=>e.test(t),UV=[pm,ht,$o,Cc,Wje,Hje,k_e],$L=t=>UV.find(BV(t));function w_e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||aV(t):!0}const j_e=new Set(["brightness","contrast","saturate","opacity"]);function N_e(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(mT)||[];if(!n)return t;const s=r.replace(n,"");let i=j_e.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const __e=/\b([a-z-]*)\(.*?\)/gu,KA={...Cd,getAnimatableNone:t=>{const e=t.match(__e);return e?e.map(N_e).join(" "):t}},FL={...pm,transform:Math.round},S_e={rotate:Cc,rotateX:Cc,rotateY:Cc,rotateZ:Cc,scale:Py,scaleX:Py,scaleY:Py,scaleZ:Py,skew:Cc,skewX:Cc,skewY:Cc,distance:ht,translateX:ht,translateY:ht,translateZ:ht,x:ht,y:ht,z:ht,perspective:ht,transformPerspective:ht,opacity:sx,originX:SL,originY:SL,originZ:ht},AT={borderWidth:ht,borderTopWidth:ht,borderRightWidth:ht,borderBottomWidth:ht,borderLeftWidth:ht,borderRadius:ht,borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomRightRadius:ht,borderBottomLeftRadius:ht,width:ht,maxWidth:ht,height:ht,maxHeight:ht,top:ht,right:ht,bottom:ht,left:ht,inset:ht,insetBlock:ht,insetBlockStart:ht,insetBlockEnd:ht,insetInline:ht,insetInlineStart:ht,insetInlineEnd:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,paddingBlock:ht,paddingBlockStart:ht,paddingBlockEnd:ht,paddingInline:ht,paddingInlineStart:ht,paddingInlineEnd:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,marginBlock:ht,marginBlockStart:ht,marginBlockEnd:ht,marginInline:ht,marginInlineStart:ht,marginInlineEnd:ht,fontSize:ht,backgroundPositionX:ht,backgroundPositionY:ht,...S_e,zIndex:FL,fillOpacity:sx,strokeOpacity:sx,numOctaves:FL},A_e={...AT,color:Cn,backgroundColor:Cn,outlineColor:Cn,fill:Cn,stroke:Cn,borderColor:Cn,borderTopColor:Cn,borderRightColor:Cn,borderBottomColor:Cn,borderLeftColor:Cn,filter:KA,WebkitFilter:KA},KV=t=>A_e[t];function GV(t,e){let r=KV(t);return r!==KA&&(r=Cd),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const E_e=new Set(["auto","none","0"]);function C_e(t,e,r){let n=0,s;for(;n<t.length&&!s;){const i=t[n];typeof i=="string"&&!E_e.has(i)&&ix(i).values.length&&(s=t[n]),n++}if(s&&r)for(const i of e)t[i]=GV(r,s)}class T_e extends wT{constructor(e,r,n,s,i){super(e,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),gT(h))){const f=RV(h,r.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!PV.has(n)||e.length!==2)return;const[s,i]=e,o=$L(s),l=$L(i),c=_L(s),d=_L(i);if(c!==d&&Qc[n]){this.needsMeasurement=!0;return}if(o!==l)if(ML(o)&&ML(l))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else Qc[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||w_e(e[s]))&&n.push(s);n.length&&C_e(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=Qc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function O_e(t,e,r){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const s=(r==null?void 0:r[t])??n.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(n=>n!=null)}const qV=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function GA(t){return nV(t)&&"offsetHeight"in t}const{schedule:ET}=pV(queueMicrotask,!1),Ii={x:!1,y:!1};function VV(){return Ii.x||Ii.y}function I_e(t){return t==="x"||t==="y"?Ii[t]?null:(Ii[t]=!0,()=>{Ii[t]=!1}):Ii.x||Ii.y?null:(Ii.x=Ii.y=!0,()=>{Ii.x=Ii.y=!1})}function HV(t,e){const r=O_e(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function BL(t){return!(t.pointerType==="touch"||VV())}function D_e(t,e,r={}){const[n,s,i]=HV(t,r),o=l=>{if(!BL(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const u=h=>{BL(h)&&(d(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,s)};return n.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const WV=(t,e)=>e?t===e?!0:WV(t,e.parentElement):!1,CT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,M_e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function XV(t){return M_e.has(t.tagName)||t.isContentEditable===!0}const Pv=new WeakSet;function UL(t){return e=>{e.key==="Enter"&&t(e)}}function h_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const L_e=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=UL(()=>{if(Pv.has(r))return;h_(r,"down");const s=UL(()=>{h_(r,"up")}),i=()=>h_(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",i,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function KL(t){return CT(t)&&!VV()}function R_e(t,e,r={}){const[n,s,i]=HV(t,r),o=l=>{const c=l.currentTarget;if(!KL(l))return;Pv.add(c);const d=e(c,l),u=(g,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Pv.has(c)&&Pv.delete(c),KL(g)&&typeof d=="function"&&d(g,{success:x})},h=g=>{u(g,c===window||c===document||r.useGlobalTarget||WV(c,g.target))},f=g=>{u(g,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),GA(l)&&(l.addEventListener("focus",d=>L_e(d,s)),!XV(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function YV(t){return nV(t)&&"ownerSVGElement"in t}function P_e(t){return YV(t)&&t.tagName==="svg"}const z_e=[...UV,Cn,Cd],$_e=t=>z_e.find(BV(t)),GL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nf=()=>({x:GL(),y:GL()}),qL=()=>({min:0,max:0}),Kn=()=>({x:qL(),y:qL()}),qA={current:null},ZV={current:!1},F_e=typeof window<"u";function B_e(){if(ZV.current=!0,!!F_e)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>qA.current=t.matches;t.addEventListener("change",e),e()}else qA.current=!1}const U_e=new WeakMap;function Lw(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ox(t){return typeof t=="string"||Array.isArray(t)}const TT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],OT=["initial",...TT];function Rw(t){return Lw(t.animate)||OT.some(e=>ox(t[e]))}function QV(t){return!!(Rw(t)||t.variants)}function K_e(t,e,r){for(const n in e){const s=e[n],i=r[n];if(Oa(s))t.addValue(n,s);else if(Oa(i))t.addValue(n,vg(s,{owner:t}));else if(i!==s)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(n);t.addValue(n,vg(o!==void 0?o:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const VL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Y1={};function JV(t){Y1=t}function G_e(){return Y1}class q_e{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Ba.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,rn.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Rw(r),this.isVariantNode=QV(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const g=h[f];c[f]!==void 0&&Oa(g)&&g.set(c[f])}}mount(e){var r;this.current=e,U_e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(ZV.current||B_e(),this.shouldReduceMotion=qA.current),(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ed(this.notifyUpdate),Ed(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=bm.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&rn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Y1){const r=Y1[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Kn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<VL.length;n++){const s=VL[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=K_e(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=vg(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(rV(n)||aV(n))?n=parseFloat(n):!$_e(n)&&Cd.test(r)&&(n=GV(e,r)),this.setBaseTarget(e,Oa(n)?n.get():n)),Oa(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var i;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=_T(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);o&&(n=o[e])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Oa(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new uT),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){ET.render(this.render)}}class eH extends q_e{constructor(){super(...arguments),this.KeyframeResolver=T_e}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){const n=e.style;return n?n[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Oa(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class $d{constructor(e){this.isMounted=!1,this.node=e}update(){}}function tH({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function V_e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function H_e(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function f_(t){return t===void 0||t===1}function VA({scale:t,scaleX:e,scaleY:r}){return!f_(t)||!f_(e)||!f_(r)}function cu(t){return VA(t)||rH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function rH(t){return HL(t.x)||HL(t.y)}function HL(t){return t&&t!=="0%"}function Z1(t,e,r){const n=t-r,s=e*n;return r+s}function WL(t,e,r,n,s){return s!==void 0&&(t=Z1(t,s,n)),Z1(t,r,n)+e}function HA(t,e=0,r=1,n,s){t.min=WL(t.min,e,r,n,s),t.max=WL(t.max,e,r,n,s)}function nH(t,{x:e,y:r}){HA(t.x,e.translate,e.scale,e.originPoint),HA(t.y,r.translate,r.scale,r.originPoint)}const XL=.999999999999,YL=1.0000000000001;function W_e(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Sf(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,nH(t,o)),n&&cu(i.latestValues)&&Sf(t,i.latestValues))}e.x<YL&&e.x>XL&&(e.x=1),e.y<YL&&e.y>XL&&(e.y=1)}function _f(t,e){t.min=t.min+e,t.max=t.max+e}function ZL(t,e,r,n,s=.5){const i=dn(t.min,t.max,s);HA(t,e,r,i,n)}function Sf(t,e){ZL(t.x,e.x,e.scaleX,e.scale,e.originX),ZL(t.y,e.y,e.scaleY,e.scale,e.originY)}function aH(t,e){return tH(H_e(t.getBoundingClientRect(),e))}function X_e(t,e,r){const n=aH(t,r),{scroll:s}=e;return s&&(_f(n.x,s.offset.x),_f(n.y,s.offset.y)),n}const Y_e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z_e=xm.length;function Q_e(t,e,r){let n="",s=!0;for(let i=0;i<Z_e;i++){const o=xm[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(o.startsWith("scale")?1:0);else{const d=parseFloat(l);c=o.startsWith("scale")?d===1:d===0}if(!c||r){const d=qV(l,AT[o]);if(!c){s=!1;const u=Y_e[o]||o;n+=`${u}(${d}) `}r&&(e[o]=d)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function IT(t,e,r){const{style:n,vars:s,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(bm.has(c)){o=!0;continue}else if(bV(c)){s[c]=d;continue}else{const u=qV(d,AT[c]);c.startsWith("origin")?(l=!0,i[c]=u):n[c]=u}}if(e.transform||(o||r?n.transform=Q_e(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;n.transformOrigin=`${c} ${d} ${u}`}}function sH(t,{style:e,vars:r},n,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function QL(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const sp={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ht.test(t))t=parseFloat(t);else return t;const r=QL(t,e.target.x),n=QL(t,e.target.y);return`${r}% ${n}%`}},J_e={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=Cd.parse(t);if(s.length>5)return n;const i=Cd.createTransformer(t),o=typeof s[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const d=dn(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=d),typeof s[3+o]=="number"&&(s[3+o]/=d),i(s)}},WA={borderRadius:{...sp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sp,borderTopRightRadius:sp,borderBottomLeftRadius:sp,borderBottomRightRadius:sp,boxShadow:J_e};function iH(t,{layout:e,layoutId:r}){return bm.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!WA[t]||t==="opacity")}function DT(t,e,r){var o;const n=t.style,s=e==null?void 0:e.style,i={};if(!n)return i;for(const l in n)(Oa(n[l])||s&&Oa(s[l])||iH(l,t)||((o=r==null?void 0:r.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(i[l]=n[l]);return i}function eSe(t){return window.getComputedStyle(t)}class tSe extends eH{constructor(){super(...arguments),this.type="html",this.renderInstance=sH}readValueFromInstance(e,r){var n;if(bm.has(r))return(n=this.projection)!=null&&n.isProjecting?MA(r):ONe(e,r);{const s=eSe(e),i=(bV(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return aH(e,r)}build(e,r,n){IT(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return DT(e,r,n)}}const rSe={offset:"stroke-dashoffset",array:"stroke-dasharray"},nSe={offset:"strokeDashoffset",array:"strokeDasharray"};function aSe(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?rSe:nSe;t[i.offset]=`${-n}`,t[i.array]=`${e} ${r}`}const sSe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function oH(t,{attrX:e,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...l},c,d,u){if(IT(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox);for(const g of sSe)h[g]!==void 0&&(f[g]=h[g],delete h[g]);e!==void 0&&(h.x=e),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&aSe(h,s,i,o,!1)}const lH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),cH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iSe(t,e,r,n){sH(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(lH.has(s)?s:ST(s),e.attrs[s])}function dH(t,e,r){const n=DT(t,e,r);for(const s in t)if(Oa(t[s])||Oa(e[s])){const i=xm.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=t[s]}return n}class oSe extends eH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Kn}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(bm.has(r)){const n=KV(r);return n&&n.default||0}return r=lH.has(r)?r:ST(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return dH(e,r,n)}build(e,r,n){oH(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,s){iSe(e,r,n,s)}mount(e){this.isSVGTag=cH(e.tagName),super.mount(e)}}const lSe=OT.length;function uH(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?uH(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<lSe;r++){const n=OT[r],s=t.props[n];(ox(s)||s===!1)&&(e[n]=s)}return e}function hH(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const cSe=[...TT].reverse(),dSe=TT.length;function uSe(t){return e=>Promise.all(e.map(({animation:r,options:n})=>v_e(t,r,n)))}function hSe(t){let e=uSe(t),r=JL(),n=!0;const s=c=>(d,u)=>{var f;const h=Vf(t,u,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:g,transitionEnd:x,...m}=h;d={...d,...m,...x}}return d};function i(c){e=c(t)}function o(c){const{props:d}=t,u=uH(t.parent)||{},h=[],f=new Set;let g={},x=1/0;for(let p=0;p<dSe;p++){const b=cSe[p],v=r[b],y=d[b]!==void 0?d[b]:u[b],w=ox(y),k=b===c?v.isActive:null;k===!1&&(x=p);let j=y===u[b]&&y!==d[b]&&w;if(j&&n&&t.manuallyAnimateOnMount&&(j=!1),v.protectedKeys={...g},!v.isActive&&k===null||!y&&!v.prevProp||Lw(y)||typeof y=="boolean")continue;const _=fSe(v.prevProp,y);let S=_||b===c&&v.isActive&&!j&&w||p>x&&w,A=!1;const T=Array.isArray(y)?y:[y];let E=T.reduce(s(b),{});k===!1&&(E={});const{prevResolvedValues:C={}}=v,z={...C,...E},M=L=>{S=!0,f.has(L)&&(A=!0,f.delete(L)),v.needsAnimating[L]=!0;const K=t.getValue(L);K&&(K.liveStyle=!1)};for(const L in z){const K=E[L],$=C[L];if(g.hasOwnProperty(L))continue;let R=!1;FA(K)&&FA($)?R=!hH(K,$):R=K!==$,R?K!=null?M(L):f.add(L):K!==void 0&&f.has(L)?M(L):v.protectedKeys[L]=!0}v.prevProp=y,v.prevResolvedValues=E,v.isActive&&(g={...g,...E}),n&&t.blockInitialAnimation&&(S=!1);const F=j&&_;S&&(!F||A)&&h.push(...T.map(L=>{const K={type:b};if(typeof L=="string"&&n&&!F&&t.manuallyAnimateOnMount&&t.parent){const{parent:$}=t,R=Vf($,L);if($.enteringChildren&&R){const{delayChildren:Y}=R.transition||{};K.delay=LV($.enteringChildren,t,Y)}}return{animation:L,options:K}}))}if(f.size){const p={};if(typeof d.initial!="boolean"){const b=Vf(t,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(p.transition=b.transition)}f.forEach(b=>{const v=t.getBaseTarget(b),y=t.getValue(b);y&&(y.liveStyle=!0),p[b]=v??null}),h.push({animation:p})}let m=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(m=!1),n=!1,m?e(h):Promise.resolve()}function l(c,d){var h;if(r[c].isActive===d)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var g;return(g=f.animationState)==null?void 0:g.setActive(c,d)}),r[c].isActive=d;const u=o(c);for(const f in r)r[f].protectedKeys={};return u}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=JL()}}}function fSe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!hH(e,t):!1}function eu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function JL(){return{animate:eu(!0),whileInView:eu(),whileHover:eu(),whileTap:eu(),whileDrag:eu(),whileFocus:eu(),exit:eu()}}function eR(t,e){t.min=e.min,t.max=e.max}function Ei(t,e){eR(t.x,e.x),eR(t.y,e.y)}function tR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const fH=1e-4,gSe=1-fH,mSe=1+fH,gH=.01,pSe=0-gH,xSe=0+gH;function Ua(t){return t.max-t.min}function bSe(t,e,r){return Math.abs(t-e)<=r}function rR(t,e,r,n=.5){t.origin=n,t.originPoint=dn(e.min,e.max,t.origin),t.scale=Ua(r)/Ua(e),t.translate=dn(r.min,r.max,t.origin)-t.originPoint,(t.scale>=gSe&&t.scale<=mSe||isNaN(t.scale))&&(t.scale=1),(t.translate>=pSe&&t.translate<=xSe||isNaN(t.translate))&&(t.translate=0)}function s0(t,e,r,n){rR(t.x,e.x,r.x,n?n.originX:void 0),rR(t.y,e.y,r.y,n?n.originY:void 0)}function nR(t,e,r){t.min=r.min+e.min,t.max=t.min+Ua(e)}function ySe(t,e,r){nR(t.x,e.x,r.x),nR(t.y,e.y,r.y)}function aR(t,e,r){t.min=e.min-r.min,t.max=t.min+Ua(e)}function Q1(t,e,r){aR(t.x,e.x,r.x),aR(t.y,e.y,r.y)}function sR(t,e,r,n,s){return t-=e,t=Z1(t,1/r,n),s!==void 0&&(t=Z1(t,1/s,n)),t}function vSe(t,e=0,r=1,n=.5,s,i=t,o=t){if($o.test(e)&&(e=parseFloat(e),e=dn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=dn(i.min,i.max,n);t===i&&(l-=e),t.min=sR(t.min,e,r,l,s),t.max=sR(t.max,e,r,l,s)}function iR(t,e,[r,n,s],i,o){vSe(t,e[r],e[n],e[s],e.scale,i,o)}const kSe=["x","scaleX","originX"],wSe=["y","scaleY","originY"];function oR(t,e,r,n){iR(t.x,e,kSe,r?r.x:void 0,n?n.x:void 0),iR(t.y,e,wSe,r?r.y:void 0,n?n.y:void 0)}function lR(t){return t.translate===0&&t.scale===1}function mH(t){return lR(t.x)&&lR(t.y)}function cR(t,e){return t.min===e.min&&t.max===e.max}function jSe(t,e){return cR(t.x,e.x)&&cR(t.y,e.y)}function dR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function pH(t,e){return dR(t.x,e.x)&&dR(t.y,e.y)}function uR(t){return Ua(t.x)/Ua(t.y)}function hR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Xs(t){return[t("x"),t("y")]}function NSe(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:f,skewX:g,skewY:x}=r;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),g&&(n+=`skewX(${g}deg) `),x&&(n+=`skewY(${x}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const xH=["TopLeft","TopRight","BottomLeft","BottomRight"],_Se=xH.length,fR=t=>typeof t=="string"?parseFloat(t):t,gR=t=>typeof t=="number"||ht.test(t);function SSe(t,e,r,n,s,i){s?(t.opacity=dn(0,r.opacity??1,ASe(n)),t.opacityExit=dn(e.opacity??1,0,ESe(n))):i&&(t.opacity=dn(e.opacity??1,r.opacity??1,n));for(let o=0;o<_Se;o++){const l=`border${xH[o]}Radius`;let c=mR(e,l),d=mR(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||gR(c)===gR(d)?(t[l]=Math.max(dn(fR(c),fR(d),n),0),($o.test(d)||$o.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||r.rotate)&&(t.rotate=dn(e.rotate||0,r.rotate||0,n))}function mR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ASe=bH(0,.5,hV),ESe=bH(.5,.95,bi);function bH(t,e,r){return n=>n<t?0:n>e?1:r(ax(t,e,n))}function CSe(t,e,r){const n=Oa(t)?t:vg(t);return n.start(NT("",n,e,r)),n.animation}function lx(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const TSe=(t,e)=>t.depth-e.depth;class OSe{constructor(){this.children=[],this.isDirty=!1}add(e){oT(this.children,e),this.isDirty=!0}remove(e){lT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TSe),this.isDirty=!1,this.children.forEach(e)}}function ISe(t,e){const r=Ba.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(Ed(n),t(i-e))};return rn.setup(n,!0),()=>Ed(n)}function zv(t){return Oa(t)?t.get():t}class DSe{constructor(){this.members=[]}add(e){oT(this.members,e),e.scheduleRender()}remove(e){if(lT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender();const s=n.options.layoutDependency,i=e.options.layoutDependency;s!==void 0&&i!==void 0&&s===i||(e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:l}=e.options;l===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const $v={hasAnimatedSinceResize:!0,hasEverUpdated:!1},g_=["","X","Y","Z"],MSe=1e3;let LSe=0;function m_(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function yH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=$V(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",rn,!(s||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&yH(n)}function vH({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=LSe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(zSe),this.nodes.forEach(USe),this.nodes.forEach(KSe),this.nodes.forEach($Se)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new OSe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new uT),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=YV(o)&&!P_e(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let u,h=0;const f=()=>this.root.updateBlockedByResize=!1;rn.read(()=>{h=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,u&&u(),u=ISe(f,250),$v.hasAnimatedSinceResize&&($v.hasAnimatedSinceResize=!1,this.nodes.forEach(bR)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||WSe,{onLayoutAnimationStart:m,onLayoutAnimationComplete:p}=d.getProps(),b=!this.targetLayout||!pH(this.targetLayout,g),v=!h&&f;if(this.options.layoutRoot||this.resumeFrom||v||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...jT(x,"layout"),onPlay:m,onComplete:p};(d.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(u,v)}else h||bR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ed(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GSe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(BSe),this.nodes.forEach(RSe),this.nodes.forEach(PSe)):this.nodes.forEach(xR),this.clearAllSnapshots();const l=Ba.now();ha.delta=tl(0,1e3/60,l-ha.timestamp),ha.timestamp=l,ha.isProcessing=!0,i_.update.process(ha),i_.preRender.process(ha),i_.render.process(ha),ha.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ET.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FSe),this.sharedNodes.forEach(qSe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ua(this.snapshot.measuredBox.x)&&!Ua(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Kn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!mH(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||cu(this.latestValues)||u)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),XSe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return Kn();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(YSe))){const{scroll:u}=this.root;u&&(_f(l.x,u.offset.x),_f(l.y,u.offset.y))}return l}removeElementScroll(o){var c;const l=Kn();if(Ei(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ei(l,o),_f(l.x,h.offset.x),_f(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Kn();Ei(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Sf(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),cu(u.latestValues)&&Sf(c,u.latestValues)}return cu(this.latestValues)&&Sf(c,this.latestValues),c}removeTransform(o){const l=Kn();Ei(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!cu(d.latestValues))continue;VA(d.latestValues)&&d.updateSnapshot();const u=Kn(),h=d.measurePageBox();Ei(u,h),oR(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return cu(this.latestValues)&&oR(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ha.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!this.layout||!(u||h))return;this.resolvedRelativeTargetAt=ha.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Kn(),this.targetWithTransforms=Kn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ySe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ei(this.target,this.layout.layoutBox),nH(this.target,this.targetDelta)):Ei(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||VA(this.parent.latestValues)||rH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kn(),this.relativeTargetOrigin=Kn(),Q1(this.relativeTargetOrigin,l,c),Ei(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var x;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ha.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;Ei(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;W_e(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Kn());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(tR(this.prevProjectionDelta.x,this.projectionDelta.x),tR(this.prevProjectionDelta.y,this.projectionDelta.y)),s0(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!hR(this.projectionDelta.x,this.prevProjectionDelta.x)||!hR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Nf(),this.projectionDelta=Nf(),this.projectionDeltaWithTransform=Nf()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=Nf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Kn(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,m=g!==x,p=this.getStack(),b=!p||p.members.length<=1,v=!!(m&&!b&&this.options.crossfade===!0&&!this.path.some(HSe));this.animationProgress=0;let y;this.mixTargetDelta=w=>{const k=w/1e3;yR(h.x,o.x,k),yR(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Q1(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VSe(this.relativeTarget,this.relativeTargetOrigin,f,k),y&&jSe(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Kn()),Ei(y,this.relativeTarget)),m&&(this.animationValues=u,SSe(u,d,this.latestValues,k,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Ed(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rn.update(()=>{$v.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vg(0)),this.currentAnimation=CSe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(MSe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&kH(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Kn();const h=Ua(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Ua(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Ei(l,c),Sf(l,u),s0(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new DSe),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&m_("z",o,d,this.animationValues);for(let u=0;u<g_.length;u++)m_(`rotate${g_[u]}`,o,d,this.animationValues),m_(`skew${g_[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=zv(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=zv(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!cu(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=NSe(this.projectionDeltaWithTransform,this.treeScale,u);c&&(h=c(u,h)),o.transform=h;const{x:f,y:g}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,d.animationValues?o.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const x in WA){if(u[x]===void 0)continue;const{correct:m,applyTo:p,isCSSVariable:b}=WA[x],v=h==="none"?u[x]:m(u[x],d);if(p){const y=p.length;for(let w=0;w<y;w++)o[p[w]]=v}else b?this.options.visualElement.renderState.vars[x]=v:o[x]=v}this.options.layoutId&&(o.pointerEvents=d===this?zv(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(pR),this.root.sharedNodes.clear()}}}function RSe(t){t.updateLayout()}function PSe(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Xs(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],g=Ua(f);f.min=n[h].min,f.max=f.min+g}):kH(i,e.layoutBox,n)&&Xs(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],g=Ua(n[h]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const l=Nf();s0(l,n,e.layoutBox);const c=Nf();o?s0(c,t.applyTransform(s,!0),e.measuredBox):s0(c,n,e.layoutBox);const d=!mH(l);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const x=Kn();Q1(x,e.layoutBox,f.layoutBox);const m=Kn();Q1(m,n,g.layoutBox),pH(x,m)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function zSe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function $Se(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function FSe(t){t.clearSnapshot()}function pR(t){t.clearMeasurements()}function xR(t){t.isLayoutDirty=!1}function BSe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function USe(t){t.resolveTargetDelta()}function KSe(t){t.calcProjection()}function GSe(t){t.resetSkewAndRotation()}function qSe(t){t.removeLeadSnapshot()}function yR(t,e,r){t.translate=dn(e.translate,0,r),t.scale=dn(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function vR(t,e,r,n){t.min=dn(e.min,r.min,n),t.max=dn(e.max,r.max,n)}function VSe(t,e,r,n){vR(t.x,e.x,r.x,n),vR(t.y,e.y,r.y,n)}function HSe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const WSe={duration:.45,ease:[.4,0,.1,1]},kR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),wR=kR("applewebkit/")&&!kR("chrome/")?Math.round:bi;function jR(t){t.min=wR(t.min),t.max=wR(t.max)}function XSe(t){jR(t.x),jR(t.y)}function kH(t,e,r){return t==="position"||t==="preserve-aspect"&&!bSe(uR(e),uR(r),.2)}function YSe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const ZSe=vH({attachResizeListener:(t,e)=>lx(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),p_={current:void 0},wH=vH({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!p_.current){const t=new ZSe({});t.mount(window),t.setOptions({layoutScroll:!0}),p_.current=t}return p_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),MT=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function NR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function QSe(...t){return e=>{let r=!1;const n=t.map(s=>{const i=NR(s,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():NR(t[s],null)}}}}function JSe(...t){return N.useCallback(QSe(...t),t)}class e4e extends N.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=GA(n)&&n.offsetWidth||0,i=GA(n)&&n.offsetHeight||0,o=this.props.sizeRef.current;o.height=r.offsetHeight||0,o.width=r.offsetWidth||0,o.top=r.offsetTop,o.left=r.offsetLeft,o.right=s-o.width-o.left,o.bottom=i-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function t4e({children:t,isPresent:e,anchorX:r,anchorY:n,root:s}){var h;const i=N.useId(),o=N.useRef(null),l=N.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=N.useContext(MT),d=((h=t.props)==null?void 0:h.ref)??(t==null?void 0:t.ref),u=JSe(o,d);return N.useInsertionEffect(()=>{const{width:f,height:g,top:x,left:m,right:p,bottom:b}=l.current;if(e||!o.current||!f||!g)return;const v=r==="left"?`left: ${m}`:`right: ${p}`,y=n==="bottom"?`bottom: ${b}`:`top: ${x}`;o.current.dataset.motionPopId=i;const w=document.createElement("style");c&&(w.nonce=c);const k=s??document.head;return k.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${v}px !important;
            ${y}px !important;
          }
        `),()=>{k.contains(w)&&k.removeChild(w)}},[e]),a.jsx(e4e,{isPresent:e,childRef:o,sizeRef:l,children:N.cloneElement(t,{ref:u})})}const r4e=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o,anchorX:l,anchorY:c,root:d})=>{const u=iT(n4e),h=N.useId();let f=!0,g=N.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:r,custom:s,onExitComplete:x=>{u.set(x,!0);for(const m of u.values())if(!m)return;n&&n()},register:x=>(u.set(x,!1),()=>u.delete(x))}),[r,u,n]);return i&&f&&(g={...g}),N.useMemo(()=>{u.forEach((x,m)=>u.set(m,!1))},[r]),N.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(t=a.jsx(t4e,{isPresent:r,anchorX:l,anchorY:c,root:d,children:t})),a.jsx(Mw.Provider,{value:g,children:t})};function n4e(){return new Map}function jH(t=!0){const e=N.useContext(Mw);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,i=N.useId();N.useEffect(()=>{if(t)return s(i)},[t]);const o=N.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,o]:[!0]}const zy=t=>t.key||"";function _R(t){const e=[];return N.Children.forEach(t,r=>{N.isValidElement(r)&&e.push(r)}),e}const J1=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",anchorY:c="top",root:d})=>{const[u,h]=jH(o),f=N.useMemo(()=>_R(t),[t]),g=o&&!u?[]:f.map(zy),x=N.useRef(!0),m=N.useRef(f),p=iT(()=>new Map),b=N.useRef(new Set),[v,y]=N.useState(f),[w,k]=N.useState(f);tV(()=>{x.current=!1,m.current=f;for(let S=0;S<w.length;S++){const A=zy(w[S]);g.includes(A)?(p.delete(A),b.current.delete(A)):p.get(A)!==!0&&p.set(A,!1)}},[w,g.length,g.join("-")]);const j=[];if(f!==v){let S=[...f];for(let A=0;A<w.length;A++){const T=w[A],E=zy(T);g.includes(E)||(S.splice(A,0,T),j.push(T))}return i==="wait"&&j.length&&(S=j),k(_R(S)),y(f),null}const{forceRender:_}=N.useContext(sT);return a.jsx(a.Fragment,{children:w.map(S=>{const A=zy(S),T=o&&!u?!1:f===w||g.includes(A),E=()=>{if(b.current.has(A))return;if(b.current.add(A),p.has(A))p.set(A,!0);else return;let C=!0;p.forEach(z=>{z||(C=!1)}),C&&(_==null||_(),k(m.current),o&&(h==null||h()),n&&n())};return a.jsx(r4e,{isPresent:T,initial:!x.current||r?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:d,onExitComplete:T?void 0:E,anchorX:l,anchorY:c,children:S},A)})})},NH=N.createContext({strict:!1}),SR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let AR=!1;function a4e(){if(AR)return;const t={};for(const e in SR)t[e]={isEnabled:r=>SR[e].some(n=>!!r[n])};JV(t),AR=!0}function _H(){return a4e(),G_e()}function s4e(t){const e=_H();for(const r in t)e[r]={...e[r],...t[r]};JV(e)}const i4e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ek(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||i4e.has(t)}let SH=t=>!ek(t);function o4e(t){typeof t=="function"&&(SH=e=>e.startsWith("on")?!ek(e):t(e))}try{o4e(require("@emotion/is-prop-valid").default)}catch{}function l4e(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(SH(s)||r===!0&&ek(s)||!e&&!ek(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}const Pw=N.createContext({});function c4e(t,e){if(Rw(t)){const{initial:r,animate:n}=t;return{initial:r===!1||ox(r)?r:void 0,animate:ox(n)?n:void 0}}return t.inherit!==!1?e:{}}function d4e(t){const{initial:e,animate:r}=c4e(t,N.useContext(Pw));return N.useMemo(()=>({initial:e,animate:r}),[ER(e),ER(r)])}function ER(t){return Array.isArray(t)?t.join(" "):t}const LT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function AH(t,e,r){for(const n in e)!Oa(e[n])&&!iH(n,r)&&(t[n]=e[n])}function u4e({transformTemplate:t},e){return N.useMemo(()=>{const r=LT();return IT(r,e,t),Object.assign({},r.vars,r.style)},[e])}function h4e(t,e){const r=t.style||{},n={};return AH(n,r,t),Object.assign(n,u4e(t,e)),n}function f4e(t,e){const r={},n=h4e(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const EH=()=>({...LT(),attrs:{}});function g4e(t,e,r,n){const s=N.useMemo(()=>{const i=EH();return oH(i,e,cH(n),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};AH(i,t.style,t),s.style={...i,...s.style}}return s}const m4e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function RT(t){return typeof t!="string"||t.includes("-")?!1:!!(m4e.indexOf(t)>-1||/[A-Z]/u.test(t))}function p4e(t,e,r,{latestValues:n},s,i=!1,o){const c=(o??RT(t)?g4e:f4e)(e,n,s,t),d=l4e(e,typeof t=="string",i),u=t!==N.Fragment?{...d,...c,ref:r}:{},{children:h}=e,f=N.useMemo(()=>Oa(h)?h.get():h,[h]);return N.createElement(t,{...u,children:f})}function x4e({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,s){return{latestValues:b4e(r,n,s,t),renderState:e()}}function b4e(t,e,r,n){const s={},i=n(t,{});for(const f in i)s[f]=zv(i[f]);let{initial:o,animate:l}=t;const c=Rw(t),d=QV(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!Lw(h)){const f=Array.isArray(h)?h:[h];for(let g=0;g<f.length;g++){const x=_T(t,f[g]);if(x){const{transitionEnd:m,transition:p,...b}=x;for(const v in b){let y=b[v];if(Array.isArray(y)){const w=u?y.length-1:0;y=y[w]}y!==null&&(s[v]=y)}for(const v in m)s[v]=m[v]}}}return s}const CH=t=>(e,r)=>{const n=N.useContext(Pw),s=N.useContext(Mw),i=()=>x4e(t,e,n,s);return r?i():iT(i)},y4e=CH({scrapeMotionValuesFromProps:DT,createRenderState:LT}),v4e=CH({scrapeMotionValuesFromProps:dH,createRenderState:EH}),k4e=Symbol.for("motionComponentSymbol");function w4e(t,e,r){const n=N.useRef(r);N.useInsertionEffect(()=>{n.current=r});const s=N.useRef(null);return N.useCallback(i=>{var l;i&&((l=t.onMount)==null||l.call(t,i)),e&&(i?e.mount(i):e.unmount());const o=n.current;if(typeof o=="function")if(i){const c=o(i);typeof c=="function"&&(s.current=c)}else s.current?(s.current(),s.current=null):o(i);else o&&(o.current=i)},[e])}const TH=N.createContext({});function Mp(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function j4e(t,e,r,n,s,i){var b,v;const{visualElement:o}=N.useContext(Pw),l=N.useContext(NH),c=N.useContext(Mw),d=N.useContext(MT).reducedMotion,u=N.useRef(null),h=N.useRef(!1);n=n||l.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:o,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,isSVG:i}),h.current&&u.current&&(u.current.manuallyAnimateOnMount=!0));const f=u.current,g=N.useContext(TH);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&N4e(u.current,r,s,g);const x=N.useRef(!1);N.useInsertionEffect(()=>{f&&x.current&&f.update(r,c)});const m=r[zV],p=N.useRef(!!m&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,m))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,m)));return tV(()=>{h.current=!0,f&&(x.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),p.current&&f.animationState&&f.animationState.animateChanges())}),N.useEffect(()=>{f&&(!p.current&&f.animationState&&f.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,m)}),p.current=!1),f.enteringChildren=void 0)}),f}function N4e(t,e,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:OH(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&Mp(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:c,layoutRoot:d})}function OH(t){if(t)return t.options.allowProjection!==!1?t.projection:OH(t.parent)}function x_(t,{forwardMotionProps:e=!1,type:r}={},n,s){n&&s4e(n);const i=r?r==="svg":RT(t),o=i?v4e:y4e;function l(d,u){let h;const f={...N.useContext(MT),...d,layoutId:_4e(d)},{isStatic:g}=f,x=d4e(d),m=o(d,g);if(!g&&eV){S4e();const p=A4e(f);h=p.MeasureLayout,x.visualElement=j4e(t,m,f,s,p.ProjectionNode,i)}return a.jsxs(Pw.Provider,{value:x,children:[h&&x.visualElement?a.jsx(h,{visualElement:x.visualElement,...f}):null,p4e(t,d,w4e(m,x.visualElement,u),m,g,e,i)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=N.forwardRef(l);return c[k4e]=t,c}function _4e({layoutId:t}){const e=N.useContext(sT).id;return e&&t!==void 0?e+"-"+t:t}function S4e(t,e){N.useContext(NH).strict}function A4e(t){const e=_H(),{drag:r,layout:n}=e;if(!r&&!n)return{};const s={...r,...n};return{MeasureLayout:r!=null&&r.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function E4e(t,e){if(typeof Proxy>"u")return x_;const r=new Map,n=(i,o)=>x_(i,o,t,e),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,x_(o,void 0,t,e)),r.get(o))})}const C4e=(t,e)=>e.isSVG??RT(t)?new oSe(e):new tSe(e,{allowProjection:t!==N.Fragment});class T4e extends $d{constructor(e){super(e),e.animationState||(e.animationState=hSe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Lw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let O4e=0;class I4e extends $d{constructor(){super(...arguments),this.id=O4e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const D4e={animation:{Feature:T4e},exit:{Feature:I4e}};function Ib(t){return{point:{x:t.pageX,y:t.pageY}}}const M4e=t=>e=>CT(e)&&t(e,Ib(e));function i0(t,e,r,n){return lx(t,e,M4e(r),n)}const IH=({current:t})=>t?t.ownerDocument.defaultView:null,CR=(t,e)=>Math.abs(t-e);function L4e(t,e){const r=CR(t.x,e.x),n=CR(t.y,e.y);return Math.sqrt(r**2+n**2)}const TR=new Set(["auto","scroll"]);class DH{constructor(e,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=g=>{this.handleScroll(g.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=y_(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,m=L4e(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!m)return;const{point:p}=g,{timestamp:b}=ha;this.history.push({...p,timestamp:b});const{onStart:v,onMove:y}=this.handlers;x||(v&&v(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=b_(x,this.transformPagePoint),rn.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:b}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=y_(g.type==="pointercancel"?this.lastMoveEventInfo:b_(x,this.transformPagePoint),this.history);this.startEvent&&m&&m(g,v),p&&p(g,v)},!CT(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const c=Ib(e),d=b_(c,this.transformPagePoint),{point:u}=d,{timestamp:h}=ha;this.history=[{...u,timestamp:h}];const{onSessionStart:f}=r;f&&f(e,y_(d,this.history)),this.removeListeners=Cb(i0(this.contextWindow,"pointermove",this.handlePointerMove),i0(this.contextWindow,"pointerup",this.handlePointerUp),i0(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let r=e.parentElement;for(;r;){const n=getComputedStyle(r);(TR.has(n.overflowX)||TR.has(n.overflowY))&&this.scrollPositions.set(r,{x:r.scrollLeft,y:r.scrollTop}),r=r.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const r=this.scrollPositions.get(e);if(!r)return;const n=e===window,s=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:s.x-r.x,y:s.y-r.y};i.x===0&&i.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,s),rn.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Ed(this.updatePoint)}}function b_(t,e){return e?{point:e(t.point)}:t}function OR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function y_({point:t},e){return{point:t,delta:OR(t,MH(e)),offset:OR(t,R4e(e)),velocity:P4e(e,.1)}}function R4e(t){return t[0]}function MH(t){return t[t.length-1]}function P4e(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=MH(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>$l(e)));)r--;if(!n)return{x:0,y:0};const i=hi(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function z4e(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?dn(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?dn(r,t,n.max):Math.min(t,r)),t}function IR(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function $4e(t,{top:e,left:r,bottom:n,right:s}){return{x:IR(t.x,r,s),y:IR(t.y,e,n)}}function DR(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function F4e(t,e){return{x:DR(t.x,e.x),y:DR(t.y,e.y)}}function B4e(t,e){let r=.5;const n=Ua(t),s=Ua(e);return s>n?r=ax(e.min,e.max-n,t.min):n>s&&(r=ax(t.min,t.max-s,e.min)),tl(0,1,r)}function U4e(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const XA=.35;function K4e(t=XA){return t===!1?t=0:t===!0&&(t=XA),{x:MR(t,"left","right"),y:MR(t,"top","bottom")}}function MR(t,e,r){return{min:LR(t,e),max:LR(t,r)}}function LR(t,e){return typeof t=="number"?t:t[e]||0}const G4e=new WeakMap;class q4e{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{r?(this.stopAnimation(),this.snapToCursor(Ib(h).point)):this.pauseAnimation()},o=(h,f)=>{this.stopAnimation();const{drag:g,dragPropagation:x,onDragStart:m}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=I_e(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xs(b=>{let v=this.getAxisMotionValue(b).get()||0;if($o.test(v)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[b];w&&(v=Ua(w)*(parseFloat(v)/100))}}this.originPoint[b]=v}),m&&rn.postRender(()=>m(h,f)),BA(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:m,onDrag:p}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:b}=f;if(x&&this.currentDirection===null){this.currentDirection=V4e(b),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),p&&p(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Xs(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new DH(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:IH(this.visualElement),element:this.visualElement.current})}stop(e,r){const n=e||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&rn.postRender(()=>l(n,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!$y(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=z4e(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Mp(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=$4e(n.layoutBox,e):this.constraints=!1,this.elastic=K4e(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Xs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=U4e(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Mp(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=X_e(n,s.root,this.visualElement.getTransformPagePoint());let o=F4e(s.layout.layoutBox,i);if(r){const l=r(V_e(o));this.hasMutatedConstraints=!!l,l&&(o=tH(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Xs(u=>{if(!$y(u,r,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const f=s?200:1e6,g=s?40:1e7,x={type:"inertia",velocity:n?e[u]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,x)});return Promise.all(d).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return BA(this.visualElement,e),n.start(NT(e,n,0,r,this.visualElement,!1))}stopAnimation(){Xs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Xs(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Xs(r=>{const{drag:n}=this.getProps();if(!$y(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r],c=i.get()||0;i.set(e[r]-dn(o,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Mp(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Xs(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=B4e({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Xs(o=>{if(!$y(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(dn(c,d,s[o]))})}addListeners(){if(!this.visualElement.current)return;G4e.set(this.visualElement,this);const e=this.visualElement.current,r=i0(e,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps(),h=c.target,f=h!==e&&XV(h);d&&u&&!f&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Mp(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),rn.read(n);const o=lx(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Xs(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=XA,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function $y(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function V4e(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class H4e extends $d{constructor(e){super(e),this.removeGroupControls=bi,this.removeListeners=bi,this.controls=new q4e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bi}update(){const{dragControls:e}=this.node.getProps(),{dragControls:r}=this.node.prevProps||{};e!==r&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const RR=t=>(e,r)=>{t&&rn.postRender(()=>t(e,r))};class W4e extends $d{constructor(){super(...arguments),this.removePointerDownListener=bi}onPointerDown(e){this.session=new DH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:IH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:RR(e),onStart:RR(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&rn.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=i0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let v_=!1;class X4e extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),v_&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),$v.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,e.layoutDependency!==r&&o.setOptions({...o.options,layoutDependency:r}),v_=!0,s||e.layoutDependency!==r||r===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||rn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ET.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;v_=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function LH(t){const[e,r]=jH(),n=N.useContext(sT);return a.jsx(X4e,{...t,layoutGroup:n,switchLayoutGroup:N.useContext(TH),isPresent:e,safeToRemove:r})}const Y4e={pan:{Feature:W4e},drag:{Feature:H4e,ProjectionNode:wH,MeasureLayout:LH}};function PR(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&rn.postRender(()=>i(e,Ib(e)))}class Z4e extends $d{mount(){const{current:e}=this.node;e&&(this.unmount=D_e(e,(r,n)=>(PR(this.node,n,"Start"),s=>PR(this.node,s,"End"))))}unmount(){}}class Q4e extends $d{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cb(lx(this.node.current,"focus",()=>this.onFocus()),lx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zR(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&rn.postRender(()=>i(e,Ib(e)))}class J4e extends $d{mount(){const{current:e}=this.node;e&&(this.unmount=R_e(e,(r,n)=>(zR(this.node,n,"Start"),(s,{success:i})=>zR(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const YA=new WeakMap,k_=new WeakMap,eAe=t=>{const e=YA.get(t.target);e&&e(t)},tAe=t=>{t.forEach(eAe)};function rAe({root:t,...e}){const r=t||document;k_.has(r)||k_.set(r,{});const n=k_.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(tAe,{root:t,...e})),n[s]}function nAe(t,e,r){const n=rAe(e);return YA.set(t,r),n.observe(t),()=>{YA.delete(t),n.unobserve(t)}}const aAe={some:0,all:1};class sAe extends $d{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:aAe[s]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=d?u:h;f&&f(c)};return nAe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(iAe(e,r))&&this.startObserver()}unmount(){}}function iAe({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const oAe={inView:{Feature:sAe},tap:{Feature:J4e},focus:{Feature:Q4e},hover:{Feature:Z4e}},lAe={layout:{ProjectionNode:wH,MeasureLayout:LH}},cAe={...D4e,...oAe,...Y4e,...lAe},qi=E4e(cAe,C4e),dAe=({onDeckCreated:t})=>{const[e,r]=N.useState([]),[n,s]=N.useState(""),[i,o]=N.useState(!1),[l,c]=N.useState(!1);N.useEffect(()=>{d()},[]);const d=async()=>{try{o(!0);const h=await O.get("/courses/my");r(h||[])}catch(h){console.error("Failed to load courses:",h)}finally{o(!1)}},u=async()=>{if(n)try{c(!0);const h=await O.post(`/flashcards/generate/course/${n}`);t&&t(h)}catch(h){console.error("Failed to generate deck:",h),alert("Kunde inte skapa flashcards just nu. Frsk igen senare.")}finally{c(!1)}};return a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-100 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 mb-4 text-gray-900 dark:text-white",children:[a.jsx(dr,{className:"text-indigo-500"}),"Skapa nya Flashcards med AI"]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 text-sm",children:"Vlj en kurs s skapar EduAI automatiskt en kortlek med de viktigaste begreppen och frgorna frn materialet."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Vlj Kurs"}),i?a.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[a.jsx(ft,{size:16,className:"animate-spin"})," Laddar kurser..."]}):a.jsxs("select",{value:n,onChange:h=>s(h.target.value),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all",children:[a.jsx("option",{value:"",children:"-- Vlj en kurs --"}),e.map(h=>a.jsxs("option",{value:h.id,children:[h.courseCode," - ",h.name]},h.id))]})]}),a.jsx("button",{onClick:u,disabled:!n||l,className:`w-full py-3 px-4 rounded-xl flex items-center justify-center gap-2 font-bold transition-all ${!n||l?"bg-gray-100 dark:bg-gray-800 text-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg hover:shadow-indigo-500/25 transform hover:-translate-y-0.5"}`,children:l?a.jsxs(a.Fragment,{children:[a.jsx(ft,{size:20,className:"animate-spin"}),"Genererar frgor med AI..."]}):a.jsxs(a.Fragment,{children:[a.jsx(dr,{size:20}),"Generera Flashcards"]})})]})]})},uAe=({deck:t,onSessionComplete:e,onBack:r})=>{const[n,s]=N.useState(0),[i,o]=N.useState(!1),[l,c]=N.useState([]),[d,u]=N.useState(!1),h=(t==null?void 0:t.cards)||[],f=h[n],g=()=>{o(!i)},x=async p=>{const b={cardId:f.id,quality:p},v=[...l,b];c(v),n<h.length-1?(o(!1),s(n+1)):(u(!0),await m(v))},m=async p=>{try{await O.post(`/flashcards/deck/${t.id}/study-session`,p),e&&e()}catch(b){console.error("Failed to submit session:",b)}};return!t||h.length===0?a.jsxs("div",{className:"text-center py-10",children:[a.jsx("p",{className:"text-gray-500",children:"Inga kort i denna lek."}),a.jsx("button",{onClick:r,className:"mt-4 text-indigo-600 hover:underline",children:"G tillbaka"})]}):d?a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-8 text-center border border-gray-100 dark:border-[#3c4043] shadow-sm animate-in fade-in zoom-in",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(nr,{className:"text-green-600 dark:text-green-400",size:32})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Bra jobbat!"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Du har gtt igenom alla kort fr idag."}),a.jsx("button",{onClick:r,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-bold transition-all shadow-lg hover:shadow-indigo-500/25",children:"Tillbaka till menyn"})]}):a.jsxs("div",{className:"max-w-xl mx-auto",children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["Kort ",n+1," av ",h.length]}),a.jsx("div",{className:"w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300",style:{width:`${(n+1)/h.length*100}%`}})})]}),a.jsx("div",{className:"group h-80 w-full [perspective:1000px] mb-8 cursor-pointer",onClick:g,children:a.jsxs("div",{className:`relative h-full w-full transition-all duration-500 [transform-style:preserve-3d] ${i?"[transform:rotateY(180deg)]":""}`,children:[a.jsxs("div",{className:"absolute inset-0 h-full w-full rounded-2xl bg-white dark:bg-[#1E1F20] border-2 border-indigo-100 dark:border-[#3c4043] shadow-xl p-8 flex flex-col items-center justify-center text-center [backface-visibility:hidden]",children:[a.jsx("span",{className:"text-xs uppercase tracking-wider text-indigo-500 font-bold mb-4",children:"Frga"}),a.jsx("h3",{className:"text-2xl font-medium text-gray-800 dark:text-gray-100",children:f.front}),a.jsxs("p",{className:"absolute bottom-4 text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(Lge,{size:12})," Klicka fr att vnda"]})]}),a.jsxs("div",{className:"absolute inset-0 h-full w-full rounded-2xl bg-indigo-50 dark:bg-[#282a2c] border-2 border-indigo-500 dark:border-indigo-800 shadow-xl p-8 flex flex-col items-center justify-center text-center [transform:rotateY(180deg)] [backface-visibility:hidden]",children:[a.jsx("span",{className:"text-xs uppercase tracking-wider text-indigo-500 font-bold mb-4",children:"Svar"}),a.jsx("p",{className:"text-xl text-gray-800 dark:text-gray-200",children:f.back})]})]})}),i?a.jsxs("div",{className:"grid grid-cols-4 gap-3 animate-in fade-in slide-in-from-bottom-4",children:[a.jsxs("button",{onClick:()=>x(0),className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 hover:bg-red-200 transition-colors",children:[a.jsx("span",{className:"text-xs font-bold uppercase",children:"Igen"}),a.jsx("span",{className:"text-xs opacity-75",children:"< 1m"})]}),a.jsxs("button",{onClick:()=>x(3),className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300 hover:bg-orange-200 transition-colors",children:[a.jsx("span",{className:"text-xs font-bold uppercase",children:"Svrt"}),a.jsx("span",{className:"text-xs opacity-75",children:"2d"})]}),a.jsxs("button",{onClick:()=>x(4),className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 hover:bg-blue-200 transition-colors",children:[a.jsx("span",{className:"text-xs font-bold uppercase",children:"Bra"}),a.jsx("span",{className:"text-xs opacity-75",children:"4d"})]}),a.jsxs("button",{onClick:()=>x(5),className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 hover:bg-green-200 transition-colors",children:[a.jsx("span",{className:"text-xs font-bold uppercase",children:"Ltt"}),a.jsx("span",{className:"text-xs opacity-75",children:"7d"})]})]}):a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:g,className:"bg-gray-900 dark:bg-white text-white dark:text-gray-900 px-8 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition-transform",children:"Visa Svar"})})]})},hAe=()=>{const[t,e]=N.useState("list"),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState(!1);N.useEffect(()=>{c()},[]);const c=async()=>{l(!0);try{const f=await O.get("/flashcards/my")||[];n(f)}catch(f){console.error("Failed to load decks:",f)}finally{l(!1)}},d=f=>{n([f,...r]),e("list")},u=async f=>{try{l(!0);const g=await O.get(`/flashcards/deck/${f}`);i(g),e("play")}catch(g){console.error("Failed to load deck:",g),alert("Kunde inte ladda kortleken.")}finally{l(!1)}},h=()=>{c()};return t==="create"?a.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:[a.jsxs("button",{onClick:()=>e("list"),className:"flex items-center text-gray-500 hover:text-indigo-600 font-medium transition-colors",children:[a.jsx(Wl,{size:18,className:"mr-2"})," Tillbaka"]}),a.jsx(dAe,{onDeckCreated:d})]}):t==="play"&&s?a.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>e("list"),className:"flex items-center text-gray-500 hover:text-indigo-600 font-medium transition-colors",children:[a.jsx(Wl,{size:18,className:"mr-2"})," Avsluta session"]}),a.jsx("h2",{className:"font-bold text-gray-700 dark:text-gray-300",children:s.title})]}),a.jsx(uAe,{deck:s,onSessionComplete:h,onBack:()=>e("list")})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Ki,{className:"text-indigo-500"})," Mina Flashcards"]}),a.jsxs("button",{onClick:()=>e("create"),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl transition-colors shadow-lg shadow-indigo-500/25",children:[a.jsx(jt,{size:18})," Skapa Ny"]})]}),o&&t==="list"?a.jsx("div",{className:"flex justify-center py-10",children:a.jsx(ft,{className:"animate-spin text-indigo-500",size:32})}):r.length===0?a.jsxs("div",{className:"text-center py-16 bg-gray-50 dark:bg-[#1E1F20] rounded-3xl border-2 border-dashed border-gray-200 dark:border-[#3c4043]",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(fd,{size:32})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Inga kortlekar n"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Skapa din frsta kortlek baserad p dina kurser fr att brja lra dig snabbare med hjlp av AI."}),a.jsx("button",{onClick:()=>e("create"),className:"px-6 py-3 bg-white dark:bg-[#282a2c] text-indigo-600 dark:text-indigo-400 font-bold rounded-xl border border-gray-200 dark:border-[#3c4043] hover:bg-gray-50 dark:hover:bg-[#303336] transition-colors",children:"Kom igng"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(f=>{var g;return a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-100 dark:border-[#3c4043] shadow-sm hover:shadow-md transition-shadow group",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl",children:a.jsx(Ki,{size:24})}),f.cardsDue>0&&a.jsxs("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs font-bold rounded-full animate-pulse",children:[f.cardsDue," att repetera"]})]}),a.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-1 group-hover:text-indigo-600 transition-colors",children:f.title}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 line-clamp-2",children:f.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-6",children:[a.jsxs("span",{children:[f.totalCards," kort"]}),a.jsx("span",{children:(g=f.course)==null?void 0:g.courseCode})]}),a.jsx("button",{onClick:()=>u(f.id),className:"w-full py-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-300 font-bold rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition-colors",children:"Plugga nu"})]},f.id)})})]})},fAe=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(!1),[o,l]=N.useState("quests");N.useEffect(()=>{o==="quests"&&c()},[o]);const c=async()=>{n(!0);try{const u=localStorage.getItem("token"),h=await fetch("/api/gamification/eduai/active",{headers:{Authorization:`Bearer ${u}`}});if(h.ok){const f=await h.json();e(f)}}catch(u){console.error("Failed to fetch quests",u)}finally{n(!1)}},d=async()=>{i(!0);try{const u=localStorage.getItem("token");(await fetch("/api/gamification/eduai/generate",{method:"POST",headers:{Authorization:`Bearer ${u}`}})).ok&&await c()}catch(u){console.error("Failed to generate quests",u)}finally{i(!1)}};return a.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 via-purple-900 to-slate-900 rounded-3xl p-6 shadow-2xl relative overflow-hidden text-white mb-8 border border-white/10",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/20 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-pink-500/10 rounded-full blur-3xl -ml-10 -mb-10 pointer-events-none"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-purple-400",children:"EduAI Center"}),a.jsx(Vi,{className:"w-6 h-6 text-cyan-400"})]}),a.jsx("p",{className:"text-indigo-200 text-sm",children:"Din personliga AI-assistent fr lrande."})]}),a.jsxs("div",{className:"flex bg-black/20 p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>l("quests"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="quests"?"bg-white/10 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Quests"}),a.jsx("button",{onClick:()=>l("flashcards"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="flashcards"?"bg-white/10 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Flashcards"})]})]}),o==="quests"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-end mb-4",children:a.jsxs("button",{onClick:d,disabled:s||t.length>=3,className:`
                                    flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold transition-all
                                    ${t.length>=3?"bg-slate-700/50 text-slate-400 cursor-not-allowed":"bg-white/10 hover:bg-white/20 text-white backdrop-blur-md border border-white/10 hover:border-cyan-400/50 shadow-lg hover:shadow-cyan-500/20"}
                                `,children:[a.jsx(sn,{className:`w-4 h-4 ${s?"animate-spin":""}`}),s?"Genererar...":"Nya Uppdrag"]})}),r?a.jsx("div",{className:"flex justify-center py-12",children:a.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-2 text-indigo-300",children:[a.jsx(sn,{className:"w-8 h-8 animate-spin"}),a.jsx("span",{className:"text-xs uppercase tracking-wider",children:"Hmtar data..."})]})}):t.length===0?a.jsxs("div",{className:"text-center py-12 bg-white/5 rounded-2xl border border-white/5 backdrop-blur-sm",children:[a.jsx(di,{className:"w-12 h-12 text-yellow-400 mx-auto mb-3 opacity-80"}),a.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Inga aktiva uppdrag"}),a.jsx("p",{className:"text-indigo-300 text-sm mb-4 max-w-md mx-auto",children:"Ditt ventyr vntar! Generera nya AI-uppdrag fr att tjna XP och levla upp din kunskap."}),a.jsx("button",{onClick:d,disabled:s,className:"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-400 hover:to-blue-400 text-white px-6 py-2 rounded-full font-bold shadow-lg shadow-cyan-500/30 transition-all transform hover:scale-105",children:"Starta ventyret"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.jsx(J1,{children:t.map((u,h)=>a.jsxs(qi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:h*.1},className:"bg-white/5 hover:bg-white/10 border border-white/10 hover:border-indigo-400/30 rounded-2xl p-5 backdrop-blur-md transition-all group relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-purple-500/0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),a.jsxs("div",{className:"flex justify-between items-start mb-3 relative z-10",children:[a.jsx("span",{className:`
                                                text-xs font-bold px-2 py-1 rounded-lg uppercase tracking-wider
                                                ${u.objectiveType==="QUIZ"?"bg-pink-500/20 text-pink-300 border border-pink-500/30":u.objectiveType==="LESSON"?"bg-cyan-500/20 text-cyan-300 border border-cyan-500/30":"bg-amber-500/20 text-amber-300 border border-amber-500/30"}
                                            `,children:u.objectiveType}),a.jsxs("div",{className:"flex items-center gap-1 text-yellow-400 bg-black/30 px-2 py-1 rounded-full border border-yellow-500/20",children:[a.jsx(ya,{className:"w-3 h-3 fill-current"}),a.jsxs("span",{className:"text-xs font-bold",children:[u.rewardXp," XP"]})]})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-2 leading-tight group-hover:text-cyan-300 transition-colors",children:u.title}),u.narrative&&a.jsxs("div",{className:"mb-4 text-sm text-indigo-200 italic bg-black/20 p-3 rounded-xl border border-white/5",children:['"',u.narrative,'"']}),a.jsx("p",{className:"text-gray-400 text-sm mb-6 line-clamp-2",children:u.description})]}),a.jsxs("button",{onClick:()=>{alert(`G till ${u.objectiveType} med ID ${u.objectiveId} fr att slutfra uppdraget!`)},className:"relative z-10 w-full flex items-center justify-center gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white py-2 rounded-xl font-medium transition-all shadow-lg shadow-cyan-900/50 group-hover:shadow-cyan-500/20",children:[a.jsx(gt,{className:"w-4 h-4"}),"G till Uppdrag"]})]},u.id))})})]}),o==="flashcards"&&a.jsx("div",{className:"mt-4",children:a.jsx(hAe,{})})]})]})},gAe=({currentUser:t})=>{const{t:e}=nt(),{isModuleActive:r}=oa(),n=Et(),{currentDesignSystem:s}=Z2(),[i,o]=N.useState([]),[l,c]=N.useState([]),[d,u]=N.useState(null),[h,f]=N.useState(!0),[g,x]=N.useState("overview"),{widgets:m,toggleWidget:p}=tT("student",{stats:!0,attendance:!0,courses:!0,sidebar:!0,dailyChallenges:!0,calendar:!0,achievements:!0,aiInsights:!0,eduQuest:!0}),b={stats:e("dashboard.widgets.gamification"),attendance:e("dashboard.widgets.attendance"),courses:e("dashboard.widgets.my_courses"),sidebar:e("dashboard.widgets.tasks"),dailyChallenges:e("dashboard.widgets.daily_challenges"),calendar:e("dashboard.widgets.calendar"),achievements:e("dashboard.widgets.achievements"),aiInsights:e("dashboard.widgets.ai_personalization"),eduQuest:"EduQuest Uppdrag"};N.useEffect(()=>{if(t){v();const w=setInterval(()=>{O.users.ping().catch(k=>console.error("Ping failed",k))},6e4);return O.users.ping(),()=>clearInterval(w)}},[t]);const v=async()=>{f(!0);try{const w=await O.courses.getMyCourses(t.id);o(w||[]);let k=[],j=[];if(w&&w.length>0){const A=w.map(async E=>{try{const z=(await O.assignments.getByCourse(E.id)).map(async F=>{try{const D=await O.assignments.getMySubmission(F.id,t.id);return D&&D.grade&&j.push({...D,assignmentTitle:F.title,courseName:E.name,courseId:E.id}),D?null:{...F,courseName:E.name,courseId:E.id}}catch{return{...F,courseName:E.name,courseId:E.id}}});return(await Promise.all(z)).filter(F=>F!==null)}catch{return[]}});(await Promise.all(A)).forEach(E=>k.push(...E))}const _=new Date,S=k.map(A=>({...A,parsedDate:y(A.dueDate)})).filter(A=>A.parsedDate>_).sort((A,T)=>A.parsedDate-T.parsedDate).slice(0,5);c(S),j.length>0&&(j.sort((A,T)=>new Date(T.submittedAt)-new Date(A.submittedAt)),u(j[0]))}catch(w){console.error("Kunde inte hmta dashboard-data",w)}finally{f(!1)}},y=w=>w?Array.isArray(w)?new Date(w[0],w[1]-1,w[2],w[3]||0,w[4]||0):new Date(w):new Date;return h?a.jsx("div",{className:"p-10 text-center text-gray-500",children:e("messages.loading")}):a.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in pb-20 relative p-4 lg:p-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex gap-6 border-b border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("button",{onClick:()=>x("overview"),className:`pb-3 flex items-center gap-2 font-bold text-sm transition-colors border-b-2 ${g==="overview"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[a.jsx(wi,{size:18})," ",e("sidebar.dashboard")]}),a.jsxs("button",{onClick:()=>x("eduai"),className:`pb-3 flex items-center gap-2 font-bold text-sm transition-colors border-b-2 ${g==="eduai"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[a.jsx(Ki,{size:18})," EduAI"]}),a.jsxs("button",{onClick:()=>x("messages"),className:`pb-3 flex items-center gap-2 font-bold text-sm transition-colors border-b-2 ${g==="messages"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[a.jsx(er,{size:18})," ",e("shortcuts.messages")]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx(rT,{widgets:m,toggleWidget:p,widgetLabels:b})})]}),g==="overview"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx(aT,{}),a.jsx(Aje,{}),m.aiInsights&&a.jsx(vo,{className:"h-auto",children:a.jsx(Jq,{variant:"compact"})}),m.calendar&&a.jsx(vo,{className:"h-auto",children:a.jsx(_je,{assignments:l})}),m.attendance&&a.jsx(vo,{className:"h-auto",children:a.jsx(jje,{currentUser:t,settings:{enabled:!0}})}),m.courses&&a.jsx(vje,{courses:i,navigate:n})]}),a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[m.stats&&a.jsx(vo,{className:"h-auto",children:a.jsx(Sje,{currentUser:t,isModuleActive:r})}),m.sidebar&&a.jsx(wje,{upcomingAssignments:l,lastGraded:d,isModuleActive:r,navigate:n,currentUser:t}),m.eduQuest&&r("EDUGAME")&&a.jsx(vo,{className:"h-auto",children:a.jsx(Eje,{})}),m.dailyChallenges&&!r("EDUGAME")&&a.jsx(vo,{className:"h-auto",children:a.jsx(Nje,{})})]})]}),g==="messages"&&a.jsx("div",{className:"animate-in slide-in-from-bottom-2 fade-in duration-300",children:a.jsx(Ow,{})}),g==="eduai"&&a.jsx("div",{className:"animate-in slide-in-from-bottom-2 fade-in duration-300",children:a.jsx(fAe,{})})]})};function mAe(t,e){const r={};return(t[t.length-1]===""?[...t,""]:t).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const pAe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xAe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bAe={};function $R(t,e){return(bAe.jsx?xAe:pAe).test(t)}const yAe=/[ \t\n\f\r]/g;function vAe(t){return typeof t=="object"?t.type==="text"?FR(t.value):!1:FR(t)}function FR(t){return t.replace(yAe,"")===""}class Db{constructor(e,r,n){this.normal=r,this.property=e,n&&(this.space=n)}}Db.prototype.normal={};Db.prototype.property={};Db.prototype.space=void 0;function RH(t,e){const r={},n={};for(const s of t)Object.assign(r,s.property),Object.assign(n,s.normal);return new Db(r,n,e)}function ZA(t){return t.toLowerCase()}class gs{constructor(e,r){this.attribute=r,this.property=e}}gs.prototype.attribute="";gs.prototype.booleanish=!1;gs.prototype.boolean=!1;gs.prototype.commaOrSpaceSeparated=!1;gs.prototype.commaSeparated=!1;gs.prototype.defined=!1;gs.prototype.mustUseProperty=!1;gs.prototype.number=!1;gs.prototype.overloadedBoolean=!1;gs.prototype.property="";gs.prototype.spaceSeparated=!1;gs.prototype.space=void 0;let kAe=0;const Gt=_h(),An=_h(),QA=_h(),We=_h(),Br=_h(),Hf=_h(),bs=_h();function _h(){return 2**++kAe}const JA=Object.freeze(Object.defineProperty({__proto__:null,boolean:Gt,booleanish:An,commaOrSpaceSeparated:bs,commaSeparated:Hf,number:We,overloadedBoolean:QA,spaceSeparated:Br},Symbol.toStringTag,{value:"Module"})),w_=Object.keys(JA);class PT extends gs{constructor(e,r,n,s){let i=-1;if(super(e,r),BR(this,"space",s),typeof n=="number")for(;++i<w_.length;){const o=w_[i];BR(this,w_[i],(n&JA[o])===JA[o])}}}PT.prototype.defined=!0;function BR(t,e,r){r&&(t[e]=r)}function ym(t){const e={},r={};for(const[n,s]of Object.entries(t.properties)){const i=new PT(n,t.transform(t.attributes||{},n),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),e[n]=i,r[ZA(n)]=n,r[ZA(i.attribute)]=n}return new Db(e,r,t.space)}const PH=ym({properties:{ariaActiveDescendant:null,ariaAtomic:An,ariaAutoComplete:null,ariaBusy:An,ariaChecked:An,ariaColCount:We,ariaColIndex:We,ariaColSpan:We,ariaControls:Br,ariaCurrent:null,ariaDescribedBy:Br,ariaDetails:null,ariaDisabled:An,ariaDropEffect:Br,ariaErrorMessage:null,ariaExpanded:An,ariaFlowTo:Br,ariaGrabbed:An,ariaHasPopup:null,ariaHidden:An,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Br,ariaLevel:We,ariaLive:null,ariaModal:An,ariaMultiLine:An,ariaMultiSelectable:An,ariaOrientation:null,ariaOwns:Br,ariaPlaceholder:null,ariaPosInSet:We,ariaPressed:An,ariaReadOnly:An,ariaRelevant:null,ariaRequired:An,ariaRoleDescription:Br,ariaRowCount:We,ariaRowIndex:We,ariaRowSpan:We,ariaSelected:An,ariaSetSize:We,ariaSort:null,ariaValueMax:We,ariaValueMin:We,ariaValueNow:We,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function zH(t,e){return e in t?t[e]:e}function $H(t,e){return zH(t,e.toLowerCase())}const wAe=ym({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Hf,acceptCharset:Br,accessKey:Br,action:null,allow:null,allowFullScreen:Gt,allowPaymentRequest:Gt,allowUserMedia:Gt,alt:null,as:null,async:Gt,autoCapitalize:null,autoComplete:Br,autoFocus:Gt,autoPlay:Gt,blocking:Br,capture:null,charSet:null,checked:Gt,cite:null,className:Br,cols:We,colSpan:null,content:null,contentEditable:An,controls:Gt,controlsList:Br,coords:We|Hf,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Gt,defer:Gt,dir:null,dirName:null,disabled:Gt,download:QA,draggable:An,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Gt,formTarget:null,headers:Br,height:We,hidden:QA,high:We,href:null,hrefLang:null,htmlFor:Br,httpEquiv:Br,id:null,imageSizes:null,imageSrcSet:null,inert:Gt,inputMode:null,integrity:null,is:null,isMap:Gt,itemId:null,itemProp:Br,itemRef:Br,itemScope:Gt,itemType:Br,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Gt,low:We,manifest:null,max:null,maxLength:We,media:null,method:null,min:null,minLength:We,multiple:Gt,muted:Gt,name:null,nonce:null,noModule:Gt,noValidate:Gt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Gt,optimum:We,pattern:null,ping:Br,placeholder:null,playsInline:Gt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Gt,referrerPolicy:null,rel:Br,required:Gt,reversed:Gt,rows:We,rowSpan:We,sandbox:Br,scope:null,scoped:Gt,seamless:Gt,selected:Gt,shadowRootClonable:Gt,shadowRootDelegatesFocus:Gt,shadowRootMode:null,shape:null,size:We,sizes:null,slot:null,span:We,spellCheck:An,src:null,srcDoc:null,srcLang:null,srcSet:null,start:We,step:null,style:null,tabIndex:We,target:null,title:null,translate:null,type:null,typeMustMatch:Gt,useMap:null,value:An,width:We,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Br,axis:null,background:null,bgColor:null,border:We,borderColor:null,bottomMargin:We,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Gt,declare:Gt,event:null,face:null,frame:null,frameBorder:null,hSpace:We,leftMargin:We,link:null,longDesc:null,lowSrc:null,marginHeight:We,marginWidth:We,noResize:Gt,noHref:Gt,noShade:Gt,noWrap:Gt,object:null,profile:null,prompt:null,rev:null,rightMargin:We,rules:null,scheme:null,scrolling:An,standby:null,summary:null,text:null,topMargin:We,valueType:null,version:null,vAlign:null,vLink:null,vSpace:We,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Gt,disableRemotePlayback:Gt,prefix:null,property:null,results:We,security:null,unselectable:null},space:"html",transform:$H}),jAe=ym({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:bs,accentHeight:We,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:We,amplitude:We,arabicForm:null,ascent:We,attributeName:null,attributeType:null,azimuth:We,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:We,by:null,calcMode:null,capHeight:We,className:Br,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:We,diffuseConstant:We,direction:null,display:null,dur:null,divisor:We,dominantBaseline:null,download:Gt,dx:null,dy:null,edgeMode:null,editable:null,elevation:We,enableBackground:null,end:null,event:null,exponent:We,externalResourcesRequired:null,fill:null,fillOpacity:We,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Hf,g2:Hf,glyphName:Hf,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:We,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:We,horizOriginX:We,horizOriginY:We,id:null,ideographic:We,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:We,k:We,k1:We,k2:We,k3:We,k4:We,kernelMatrix:bs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:We,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:We,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:We,overlineThickness:We,paintOrder:null,panose1:null,path:null,pathLength:We,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Br,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:We,pointsAtY:We,pointsAtZ:We,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:bs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:bs,rev:bs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:bs,requiredFeatures:bs,requiredFonts:bs,requiredFormats:bs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:We,specularExponent:We,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:We,strikethroughThickness:We,string:null,stroke:null,strokeDashArray:bs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:We,strokeOpacity:We,strokeWidth:null,style:null,surfaceScale:We,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:bs,tabIndex:We,tableValues:null,target:null,targetX:We,targetY:We,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:bs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:We,underlineThickness:We,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:We,values:null,vAlphabetic:We,vMathematical:We,vectorEffect:null,vHanging:We,vIdeographic:We,version:null,vertAdvY:We,vertOriginX:We,vertOriginY:We,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:We,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:zH}),FH=ym({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),BH=ym({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:$H}),UH=ym({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),NAe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},_Ae=/[A-Z]/g,UR=/-[a-z]/g,SAe=/^data[-\w.:]+$/i;function AAe(t,e){const r=ZA(e);let n=e,s=gs;if(r in t.normal)return t.property[t.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&SAe.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(UR,CAe);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!UR.test(i)){let o=i.replace(_Ae,EAe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=PT}return new s(n,e)}function EAe(t){return"-"+t.toLowerCase()}function CAe(t){return t.charAt(1).toUpperCase()}const TAe=RH([PH,wAe,FH,BH,UH],"html"),zT=RH([PH,jAe,FH,BH,UH],"svg");function OAe(t){return t.join(" ").trim()}var $T={},KR=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,IAe=/\n/g,DAe=/^\s*/,MAe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,LAe=/^:\s*/,RAe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,PAe=/^[;\s]*/,zAe=/^\s+|\s+$/g,$Ae=`
`,GR="/",qR="*",gu="",FAe="comment",BAe="declaration";function UAe(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var r=1,n=1;function s(x){var m=x.match(IAe);m&&(r+=m.length);var p=x.lastIndexOf($Ae);n=~p?x.length-p:n+x.length}function i(){var x={line:r,column:n};return function(m){return m.position=new o(x),d(),m}}function o(x){this.start=x,this.end={line:r,column:n},this.source=e.source}o.prototype.content=t;function l(x){var m=new Error(e.source+":"+r+":"+n+": "+x);if(m.reason=x,m.filename=e.source,m.line=r,m.column=n,m.source=t,!e.silent)throw m}function c(x){var m=x.exec(t);if(m){var p=m[0];return s(p),t=t.slice(p.length),m}}function d(){c(DAe)}function u(x){var m;for(x=x||[];m=h();)m!==!1&&x.push(m);return x}function h(){var x=i();if(!(GR!=t.charAt(0)||qR!=t.charAt(1))){for(var m=2;gu!=t.charAt(m)&&(qR!=t.charAt(m)||GR!=t.charAt(m+1));)++m;if(m+=2,gu===t.charAt(m-1))return l("End of comment missing");var p=t.slice(2,m-2);return n+=2,s(p),t=t.slice(m),n+=2,x({type:FAe,comment:p})}}function f(){var x=i(),m=c(MAe);if(m){if(h(),!c(LAe))return l("property missing ':'");var p=c(RAe),b=x({type:BAe,property:VR(m[0].replace(KR,gu)),value:p?VR(p[0].replace(KR,gu)):gu});return c(PAe),b}}function g(){var x=[];u(x);for(var m;m=f();)m!==!1&&(x.push(m),u(x));return x}return d(),g()}function VR(t){return t?t.replace(zAe,gu):gu}var KAe=UAe,GAe=Fe&&Fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($T,"__esModule",{value:!0});$T.default=VAe;const qAe=GAe(KAe);function VAe(t,e){let r=null;if(!t||typeof t!="string")return r;const n=(0,qAe.default)(t),s=typeof e=="function";return n.forEach(i=>{if(i.type!=="declaration")return;const{property:o,value:l}=i;s?e(o,l,i):l&&(r=r||{},r[o]=l)}),r}var zw={};Object.defineProperty(zw,"__esModule",{value:!0});zw.camelCase=void 0;var HAe=/^--[a-zA-Z0-9_-]+$/,WAe=/-([a-z])/g,XAe=/^[^-]+$/,YAe=/^-(webkit|moz|ms|o|khtml)-/,ZAe=/^-(ms)-/,QAe=function(t){return!t||XAe.test(t)||HAe.test(t)},JAe=function(t,e){return e.toUpperCase()},HR=function(t,e){return"".concat(e,"-")},eEe=function(t,e){return e===void 0&&(e={}),QAe(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(ZAe,HR):t=t.replace(YAe,HR),t.replace(WAe,JAe))};zw.camelCase=eEe;var tEe=Fe&&Fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},rEe=tEe($T),nEe=zw;function eE(t,e){var r={};return!t||typeof t!="string"||(0,rEe.default)(t,function(n,s){n&&s&&(r[(0,nEe.camelCase)(n,e)]=s)}),r}eE.default=eE;var aEe=eE;const sEe=Vt(aEe),KH=GH("end"),FT=GH("start");function GH(t){return e;function e(r){const n=r&&r.position&&r.position[t]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function iEe(t){const e=FT(t),r=KH(t);if(e&&r)return{start:e,end:r}}function o0(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?WR(t.position):"start"in t||"end"in t?WR(t):"line"in t||"column"in t?tE(t):""}function tE(t){return XR(t&&t.line)+":"+XR(t&&t.column)}function WR(t){return tE(t&&t.start)+"-"+tE(t&&t.end)}function XR(t){return t&&typeof t=="number"?t:1}class Ma extends Error{constructor(e,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let s="",i={},o=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof e=="string"?s=e:!i.cause&&e&&(o=!0,s=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof n=="string"){const c=n.indexOf(":");c===-1?i.ruleId=n:(i.source=n.slice(0,c),i.ruleId=n.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=o0(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ma.prototype.file="";Ma.prototype.name="";Ma.prototype.reason="";Ma.prototype.message="";Ma.prototype.stack="";Ma.prototype.column=void 0;Ma.prototype.line=void 0;Ma.prototype.ancestors=void 0;Ma.prototype.cause=void 0;Ma.prototype.fatal=void 0;Ma.prototype.place=void 0;Ma.prototype.ruleId=void 0;Ma.prototype.source=void 0;const BT={}.hasOwnProperty,oEe=new Map,lEe=/[A-Z]/g,cEe=new Set(["table","tbody","thead","tfoot","tr"]),dEe=new Set(["td","th"]),qH="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function uEe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=e.filePath||void 0;let n;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=yEe(r,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=bEe(r,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:n,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?zT:TAe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=VH(s,t,void 0);return i&&typeof i!="string"?i:s.create(t,s.Fragment,{children:i||void 0},void 0)}function VH(t,e,r){if(e.type==="element")return hEe(t,e,r);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return fEe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mEe(t,e,r);if(e.type==="mdxjsEsm")return gEe(t,e);if(e.type==="root")return pEe(t,e,r);if(e.type==="text")return xEe(t,e)}function hEe(t,e,r){const n=t.schema;let s=n;e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(s=zT,t.schema=s),t.ancestors.push(e);const i=WH(t,e.tagName,!1),o=vEe(t,e);let l=KT(t,e);return cEe.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!vAe(c):!0})),HH(t,o,i,e),UT(o,l),t.ancestors.pop(),t.schema=n,t.create(e,i,o,r)}function fEe(t,e){if(e.data&&e.data.estree&&t.evaluater){const n=e.data.estree.body[0];return n.type,t.evaluater.evaluateExpression(n.expression)}cx(t,e.position)}function gEe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);cx(t,e.position)}function mEe(t,e,r){const n=t.schema;let s=n;e.name==="svg"&&n.space==="html"&&(s=zT,t.schema=s),t.ancestors.push(e);const i=e.name===null?t.Fragment:WH(t,e.name,!0),o=kEe(t,e),l=KT(t,e);return HH(t,o,i,e),UT(o,l),t.ancestors.pop(),t.schema=n,t.create(e,i,o,r)}function pEe(t,e,r){const n={};return UT(n,KT(t,e)),t.create(e,t.Fragment,n,r)}function xEe(t,e){return e.value}function HH(t,e,r,n){typeof r!="string"&&r!==t.Fragment&&t.passNode&&(e.node=n)}function UT(t,e){if(e.length>0){const r=e.length>1?e:e[0];r&&(t.children=r)}}function bEe(t,e,r){return n;function n(s,i,o,l){const d=Array.isArray(o.children)?r:e;return l?d(i,o,l):d(i,o)}}function yEe(t,e){return r;function r(n,s,i,o){const l=Array.isArray(i.children),c=FT(n);return e(s,i,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function vEe(t,e){const r={};let n,s;for(s in e.properties)if(s!=="children"&&BT.call(e.properties,s)){const i=wEe(t,s,e.properties[s]);if(i){const[o,l]=i;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&dEe.has(e.tagName)?n=l:r[o]=l}}if(n){const i=r.style||(r.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function kEe(t,e){const r={};for(const n of e.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&t.evaluater){const i=n.data.estree.body[0];i.type;const o=i.expression;o.type;const l=o.properties[0];l.type,Object.assign(r,t.evaluater.evaluateExpression(l.argument))}else cx(t,e.position);else{const s=n.name;let i;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&t.evaluater){const l=n.value.data.estree.body[0];l.type,i=t.evaluater.evaluateExpression(l.expression)}else cx(t,e.position);else i=n.value===null?!0:n.value;r[s]=i}return r}function KT(t,e){const r=[];let n=-1;const s=t.passKeys?new Map:oEe;for(;++n<e.children.length;){const i=e.children[n];let o;if(t.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const d=s.get(c)||0;o=c+"-"+d,s.set(c,d+1)}}const l=VH(t,i,o);l!==void 0&&r.push(l)}return r}function wEe(t,e,r){const n=AAe(t.schema,e);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?mAe(r):OAe(r)),n.property==="style"){let s=typeof r=="object"?r:jEe(t,String(r));return t.stylePropertyNameCase==="css"&&(s=NEe(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&n.space?NAe[n.property]||n.property:n.attribute,r]}}function jEe(t,e){try{return sEe(e,{reactCompat:!0})}catch(r){if(t.ignoreInvalidStyle)return{};const n=r,s=new Ma("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=qH+"#cannot-parse-style-attribute",s}}function WH(t,e,r){let n;if(!r)n={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let i=-1,o;for(;++i<s.length;){const l=$R(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}n=o}else n=$R(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(n.type==="Literal"){const s=n.value;return BT.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(n);cx(t)}function cx(t,e){const r=new Ma("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=qH+"#cannot-handle-mdx-estrees-without-createevaluater",r}function NEe(t){const e={};let r;for(r in t)BT.call(t,r)&&(e[_Ee(r)]=t[r]);return e}function _Ee(t){let e=t.replace(lEe,SEe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function SEe(t){return"-"+t.toLowerCase()}const j_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},AEe={};function EEe(t,e){const r=AEe,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,s=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return XH(t,n,s)}function XH(t,e,r){if(CEe(t)){if("value"in t)return t.type==="html"&&!r?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return YR(t.children,e,r)}return Array.isArray(t)?YR(t,e,r):""}function YR(t,e,r){const n=[];let s=-1;for(;++s<t.length;)n[s]=XH(t[s],e,r);return n.join("")}function CEe(t){return!!(t&&typeof t=="object")}const ZR=document.createElement("i");function GT(t){const e="&"+t+";";ZR.innerHTML=e;const r=ZR.textContent;return r.charCodeAt(r.length-1)===59&&t!=="semi"||r===e?!1:r}function rl(t,e,r,n){const s=t.length;let i=0,o;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(e,r),t.splice(...o);else for(r&&t.splice(e,r);i<n.length;)o=n.slice(i,i+1e4),o.unshift(e,0),t.splice(...o),i+=1e4,e+=1e4}function ri(t,e){return t.length>0?(rl(t,t.length,0,e),t):e}const QR={}.hasOwnProperty;function TEe(t){const e={};let r=-1;for(;++r<t.length;)OEe(e,t[r]);return e}function OEe(t,e){let r;for(r in e){const s=(QR.call(t,r)?t[r]:void 0)||(t[r]={}),i=e[r];let o;if(i)for(o in i){QR.call(s,o)||(s[o]=[]);const l=i[o];IEe(s[o],Array.isArray(l)?l:l?[l]:[])}}}function IEe(t,e){let r=-1;const n=[];for(;++r<e.length;)(e[r].add==="after"?t:n).push(e[r]);rl(t,0,0,n)}function YH(t,e){const r=Number.parseInt(t,e);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function Wf(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const jo=Fd(/[A-Za-z]/),Os=Fd(/[\dA-Za-z]/),DEe=Fd(/[#-'*+\--9=?A-Z^-~]/);function rE(t){return t!==null&&(t<32||t===127)}const nE=Fd(/\d/),MEe=Fd(/[\dA-Fa-f]/),LEe=Fd(/[!-/:-@[-`{-~]/);function Ot(t){return t!==null&&t<-2}function ds(t){return t!==null&&(t<0||t===32)}function xr(t){return t===-2||t===-1||t===32}const REe=Fd(new RegExp("\\p{P}|\\p{S}","u")),PEe=Fd(/\s/);function Fd(t){return e;function e(r){return r!==null&&r>-1&&t.test(String.fromCharCode(r))}}function vm(t){const e=[];let r=-1,n=0,s=0;for(;++r<t.length;){const i=t.charCodeAt(r);let o="";if(i===37&&Os(t.charCodeAt(r+1))&&Os(t.charCodeAt(r+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const l=t.charCodeAt(r+1);i<56320&&l>56319&&l<57344?(o=String.fromCharCode(i,l),s=1):o=""}else o=String.fromCharCode(i);o&&(e.push(t.slice(n,r),encodeURIComponent(o)),n=r+s+1,o=""),s&&(r+=s,s=0)}return e.join("")+t.slice(n)}function qr(t,e,r,n){const s=n?n-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return xr(c)?(t.enter(r),l(c)):e(c)}function l(c){return xr(c)&&i++<s?(t.consume(c),l):(t.exit(r),e(c))}}const zEe={tokenize:$Ee};function $Ee(t){const e=t.attempt(this.parser.constructs.contentInitial,n,s);let r;return e;function n(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),qr(t,e,"linePrefix")}function s(l){return t.enter("paragraph"),i(l)}function i(l){const c=t.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=c),r=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Ot(l)?(t.consume(l),t.exit("chunkText"),i):(t.consume(l),o)}}const FEe={tokenize:BEe},JR={tokenize:UEe};function BEe(t){const e=this,r=[];let n=0,s,i,o;return l;function l(y){if(n<r.length){const w=r[n];return e.containerState=w[1],t.attempt(w[0].continuation,c,d)(y)}return d(y)}function c(y){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&v();const w=e.events.length;let k=w,j;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){j=e.events[k][1].end;break}b(n);let _=w;for(;_<e.events.length;)e.events[_][1].end={...j},_++;return rl(e.events,k+1,0,e.events.slice(w)),e.events.length=_,d(y)}return l(y)}function d(y){if(n===r.length){if(!s)return f(y);if(s.currentConstruct&&s.currentConstruct.concrete)return x(y);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(JR,u,h)(y)}function u(y){return s&&v(),b(n),f(y)}function h(y){return e.parser.lazy[e.now().line]=n!==r.length,o=e.now().offset,x(y)}function f(y){return e.containerState={},t.attempt(JR,g,x)(y)}function g(y){return n++,r.push([e.currentConstruct,e.containerState]),f(y)}function x(y){if(y===null){s&&v(),b(0),t.consume(y);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),m(y)}function m(y){if(y===null){p(t.exit("chunkFlow"),!0),b(0),t.consume(y);return}return Ot(y)?(t.consume(y),p(t.exit("chunkFlow")),n=0,e.interrupt=void 0,l):(t.consume(y),m)}function p(y,w){const k=e.sliceStream(y);if(w&&k.push(null),y.previous=i,i&&(i.next=y),i=y,s.defineSkip(y.start),s.write(k),e.parser.lazy[y.start.line]){let j=s.events.length;for(;j--;)if(s.events[j][1].start.offset<o&&(!s.events[j][1].end||s.events[j][1].end.offset>o))return;const _=e.events.length;let S=_,A,T;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){if(A){T=e.events[S][1].end;break}A=!0}for(b(n),j=_;j<e.events.length;)e.events[j][1].end={...T},j++;rl(e.events,S+1,0,e.events.slice(_)),e.events.length=j}}function b(y){let w=r.length;for(;w-- >y;){const k=r[w];e.containerState=k[1],k[0].exit.call(e,t)}r.length=y}function v(){s.write([null]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function UEe(t,e,r){return qr(t,t.attempt(this.parser.constructs.document,e,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function e8(t){if(t===null||ds(t)||PEe(t))return 1;if(REe(t))return 2}function qT(t,e,r){const n=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!n.includes(i)&&(e=i(e,r),n.push(i))}return e}const aE={name:"attention",resolveAll:KEe,tokenize:GEe};function KEe(t,e){let r=-1,n,s,i,o,l,c,d,u;for(;++r<t.length;)if(t[r][0]==="enter"&&t[r][1].type==="attentionSequence"&&t[r][1]._close){for(n=r;n--;)if(t[n][0]==="exit"&&t[n][1].type==="attentionSequence"&&t[n][1]._open&&e.sliceSerialize(t[n][1]).charCodeAt(0)===e.sliceSerialize(t[r][1]).charCodeAt(0)){if((t[n][1]._close||t[r][1]._open)&&(t[r][1].end.offset-t[r][1].start.offset)%3&&!((t[n][1].end.offset-t[n][1].start.offset+t[r][1].end.offset-t[r][1].start.offset)%3))continue;c=t[n][1].end.offset-t[n][1].start.offset>1&&t[r][1].end.offset-t[r][1].start.offset>1?2:1;const h={...t[n][1].end},f={...t[r][1].start};t8(h,-c),t8(f,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...t[n][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[r][1].start},end:f},i={type:c>1?"strongText":"emphasisText",start:{...t[n][1].end},end:{...t[r][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[n][1].end={...o.start},t[r][1].start={...l.end},d=[],t[n][1].end.offset-t[n][1].start.offset&&(d=ri(d,[["enter",t[n][1],e],["exit",t[n][1],e]])),d=ri(d,[["enter",s,e],["enter",o,e],["exit",o,e],["enter",i,e]]),d=ri(d,qT(e.parser.constructs.insideSpan.null,t.slice(n+1,r),e)),d=ri(d,[["exit",i,e],["enter",l,e],["exit",l,e],["exit",s,e]]),t[r][1].end.offset-t[r][1].start.offset?(u=2,d=ri(d,[["enter",t[r][1],e],["exit",t[r][1],e]])):u=0,rl(t,n-1,r-n+3,d),r=n+d.length-u-2;break}}for(r=-1;++r<t.length;)t[r][1].type==="attentionSequence"&&(t[r][1].type="data");return t}function GEe(t,e){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,s=e8(n);let i;return o;function o(c){return i=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===i)return t.consume(c),l;const d=t.exit("attentionSequence"),u=e8(c),h=!u||u===2&&s||r.includes(c),f=!s||s===2&&u||r.includes(n);return d._open=!!(i===42?h:h&&(s||!f)),d._close=!!(i===42?f:f&&(u||!h)),e(c)}}function t8(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const qEe={name:"autolink",tokenize:VEe};function VEe(t,e,r){let n=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(g){return jo(g)?(t.consume(g),o):g===64?r(g):d(g)}function o(g){return g===43||g===45||g===46||Os(g)?(n=1,l(g)):d(g)}function l(g){return g===58?(t.consume(g),n=0,c):(g===43||g===45||g===46||Os(g))&&n++<32?(t.consume(g),l):(n=0,d(g))}function c(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||rE(g)?r(g):(t.consume(g),c)}function d(g){return g===64?(t.consume(g),u):DEe(g)?(t.consume(g),d):r(g)}function u(g){return Os(g)?h(g):r(g)}function h(g){return g===46?(t.consume(g),n=0,u):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):f(g)}function f(g){if((g===45||Os(g))&&n++<63){const x=g===45?f:h;return t.consume(g),x}return r(g)}}const $w={partial:!0,tokenize:HEe};function HEe(t,e,r){return n;function n(i){return xr(i)?qr(t,s,"linePrefix")(i):s(i)}function s(i){return i===null||Ot(i)?e(i):r(i)}}const ZH={continuation:{tokenize:XEe},exit:YEe,name:"blockQuote",tokenize:WEe};function WEe(t,e,r){const n=this;return s;function s(o){if(o===62){const l=n.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),i}return r(o)}function i(o){return xr(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function XEe(t,e,r){const n=this;return s;function s(o){return xr(o)?qr(t,i,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return t.attempt(ZH,e,r)(o)}}function YEe(t){t.exit("blockQuote")}const QH={name:"characterEscape",tokenize:ZEe};function ZEe(t,e,r){return n;function n(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),s}function s(i){return LEe(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):r(i)}}const JH={name:"characterReference",tokenize:QEe};function QEe(t,e,r){const n=this;let s=0,i,o;return l;function l(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),c}function c(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),i=31,o=Os,u(h))}function d(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,o=MEe,u):(t.enter("characterReferenceValue"),i=7,o=nE,u(h))}function u(h){if(h===59&&s){const f=t.exit("characterReferenceValue");return o===Os&&!GT(n.sliceSerialize(f))?r(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&s++<i?(t.consume(h),u):r(h)}}const r8={partial:!0,tokenize:e3e},n8={concrete:!0,name:"codeFenced",tokenize:JEe};function JEe(t,e,r){const n=this,s={partial:!0,tokenize:k};let i=0,o=0,l;return c;function c(j){return d(j)}function d(j){const _=n.events[n.events.length-1];return i=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,l=j,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(j)}function u(j){return j===l?(o++,t.consume(j),u):o<3?r(j):(t.exit("codeFencedFenceSequence"),xr(j)?qr(t,h,"whitespace")(j):h(j))}function h(j){return j===null||Ot(j)?(t.exit("codeFencedFence"),n.interrupt?e(j):t.check(r8,m,w)(j)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(j))}function f(j){return j===null||Ot(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(j)):xr(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),qr(t,g,"whitespace")(j)):j===96&&j===l?r(j):(t.consume(j),f)}function g(j){return j===null||Ot(j)?h(j):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(j))}function x(j){return j===null||Ot(j)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(j)):j===96&&j===l?r(j):(t.consume(j),x)}function m(j){return t.attempt(s,w,p)(j)}function p(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),b}function b(j){return i>0&&xr(j)?qr(t,v,"linePrefix",i+1)(j):v(j)}function v(j){return j===null||Ot(j)?t.check(r8,m,w)(j):(t.enter("codeFlowValue"),y(j))}function y(j){return j===null||Ot(j)?(t.exit("codeFlowValue"),v(j)):(t.consume(j),y)}function w(j){return t.exit("codeFenced"),e(j)}function k(j,_,S){let A=0;return T;function T(F){return j.enter("lineEnding"),j.consume(F),j.exit("lineEnding"),E}function E(F){return j.enter("codeFencedFence"),xr(F)?qr(j,C,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):C(F)}function C(F){return F===l?(j.enter("codeFencedFenceSequence"),z(F)):S(F)}function z(F){return F===l?(A++,j.consume(F),z):A>=o?(j.exit("codeFencedFenceSequence"),xr(F)?qr(j,M,"whitespace")(F):M(F)):S(F)}function M(F){return F===null||Ot(F)?(j.exit("codeFencedFence"),_(F)):S(F)}}}function e3e(t,e,r){const n=this;return s;function s(o){return o===null?r(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i)}function i(o){return n.parser.lazy[n.now().line]?r(o):e(o)}}const N_={name:"codeIndented",tokenize:r3e},t3e={partial:!0,tokenize:n3e};function r3e(t,e,r){const n=this;return s;function s(d){return t.enter("codeIndented"),qr(t,i,"linePrefix",5)(d)}function i(d){const u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(d):r(d)}function o(d){return d===null?c(d):Ot(d)?t.attempt(t3e,o,c)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||Ot(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),l)}function c(d){return t.exit("codeIndented"),e(d)}}function n3e(t,e,r){const n=this;return s;function s(o){return n.parser.lazy[n.now().line]?r(o):Ot(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):qr(t,i,"linePrefix",5)(o)}function i(o){const l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Ot(o)?s(o):r(o)}}const a3e={name:"codeText",previous:i3e,resolve:s3e,tokenize:o3e};function s3e(t){let e=t.length-4,r=3,n,s;if((t[r][1].type==="lineEnding"||t[r][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(n=r;++n<e;)if(t[n][1].type==="codeTextData"){t[r][1].type="codeTextPadding",t[e][1].type="codeTextPadding",r+=2,e-=2;break}}for(n=r-1,e++;++n<=e;)s===void 0?n!==e&&t[n][1].type!=="lineEnding"&&(s=n):(n===e||t[n][1].type==="lineEnding")&&(t[s][1].type="codeTextData",n!==s+2&&(t[s][1].end=t[n-1][1].end,t.splice(s+2,n-s-2),e-=n-s-2,n=s+2),s=void 0);return t}function i3e(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function o3e(t,e,r){let n=0,s,i;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),l(h)}function l(h){return h===96?(t.consume(h),n++,l):(t.exit("codeTextSequence"),c(h))}function c(h){return h===null?r(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),c):h===96?(i=t.enter("codeTextSequence"),s=0,u(h)):Ot(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),c):(t.enter("codeTextData"),d(h))}function d(h){return h===null||h===32||h===96||Ot(h)?(t.exit("codeTextData"),c(h)):(t.consume(h),d)}function u(h){return h===96?(t.consume(h),s++,u):s===n?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(i.type="codeTextData",d(h))}}class l3e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,r,n){const s=r||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&ip(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ip(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ip(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const r=this.left.splice(e,Number.POSITIVE_INFINITY);ip(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ip(this.left,r.reverse())}}}function ip(t,e){let r=0;if(e.length<1e4)t.push(...e);else for(;r<e.length;)t.push(...e.slice(r,r+1e4)),r+=1e4}function eW(t){const e={};let r=-1,n,s,i,o,l,c,d;const u=new l3e(t);for(;++r<u.length;){for(;r in e;)r=e[r];if(n=u.get(r),r&&n[1].type==="chunkFlow"&&u.get(r-1)[1].type==="listItemPrefix"&&(c=n[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,c3e(u,r)),r=e[r],d=!0);else if(n[1]._container){for(i=r,s=void 0;i--;)if(o=u.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(n[1].end={...u.get(s)[1].start},l=u.slice(s,r),l.unshift(n),u.splice(s,r-s+1,l))}}return rl(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!d}function c3e(t,e){const r=t.get(e)[1],n=t.get(e)[2];let s=e-1;const i=[];let o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let u,h,f=-1,g=r,x=0,m=0;const p=[m];for(;g;){for(;t.get(++s)[1]!==g;);i.push(s),g._tokenizer||(u=n.sliceStream(g),g.next||u.push(null),h&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=g,g=g.next}for(g=r;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(m=f+1,p.push(m),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):p.pop(),f=p.length;f--;){const b=l.slice(p[f],p[f+1]),v=i.pop();c.push([v,v+b.length-1]),t.splice(v,2,b)}for(c.reverse(),f=-1;++f<c.length;)d[x+c[f][0]]=x+c[f][1],x+=c[f][1]-c[f][0]-1;return d}const d3e={resolve:h3e,tokenize:f3e},u3e={partial:!0,tokenize:g3e};function h3e(t){return eW(t),t}function f3e(t,e){let r;return n;function n(l){return t.enter("content"),r=t.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):Ot(l)?t.check(u3e,o,i)(l):(t.consume(l),s)}function i(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),r.next=t.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,s}}function g3e(t,e,r){const n=this;return s;function s(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),qr(t,i,"linePrefix")}function i(o){if(o===null||Ot(o))return r(o);const l=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(n.parser.constructs.flow,r,e)(o)}}function tW(t,e,r,n,s,i,o,l,c){const d=c||Number.POSITIVE_INFINITY;let u=0;return h;function h(b){return b===60?(t.enter(n),t.enter(s),t.enter(i),t.consume(b),t.exit(i),f):b===null||b===32||b===41||rE(b)?r(b):(t.enter(n),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),m(b))}function f(b){return b===62?(t.enter(i),t.consume(b),t.exit(i),t.exit(s),t.exit(n),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===62?(t.exit("chunkString"),t.exit(l),f(b)):b===null||b===60||Ot(b)?r(b):(t.consume(b),b===92?x:g)}function x(b){return b===60||b===62||b===92?(t.consume(b),g):g(b)}function m(b){return!u&&(b===null||b===41||ds(b))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(n),e(b)):u<d&&b===40?(t.consume(b),u++,m):b===41?(t.consume(b),u--,m):b===null||b===32||b===40||rE(b)?r(b):(t.consume(b),b===92?p:m)}function p(b){return b===40||b===41||b===92?(t.consume(b),m):m(b)}}function rW(t,e,r,n,s,i){const o=this;let l=0,c;return d;function d(g){return t.enter(n),t.enter(s),t.consume(g),t.exit(s),t.enter(i),u}function u(g){return l>999||g===null||g===91||g===93&&!c||g===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?r(g):g===93?(t.exit(i),t.enter(s),t.consume(g),t.exit(s),t.exit(n),e):Ot(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===null||g===91||g===93||Ot(g)||l++>999?(t.exit("chunkString"),u(g)):(t.consume(g),c||(c=!xr(g)),g===92?f:h)}function f(g){return g===91||g===92||g===93?(t.consume(g),l++,h):h(g)}}function nW(t,e,r,n,s,i){let o;return l;function l(f){return f===34||f===39||f===40?(t.enter(n),t.enter(s),t.consume(f),t.exit(s),o=f===40?41:f,c):r(f)}function c(f){return f===o?(t.enter(s),t.consume(f),t.exit(s),t.exit(n),e):(t.enter(i),d(f))}function d(f){return f===o?(t.exit(i),c(o)):f===null?r(f):Ot(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),qr(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||Ot(f)?(t.exit("chunkString"),d(f)):(t.consume(f),f===92?h:u)}function h(f){return f===o||f===92?(t.consume(f),u):u(f)}}function l0(t,e){let r;return n;function n(s){return Ot(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),r=!0,n):xr(s)?qr(t,n,r?"linePrefix":"lineSuffix")(s):e(s)}}const m3e={name:"definition",tokenize:x3e},p3e={partial:!0,tokenize:b3e};function x3e(t,e,r){const n=this;let s;return i;function i(g){return t.enter("definition"),o(g)}function o(g){return rW.call(n,t,l,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function l(g){return s=Wf(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),c):r(g)}function c(g){return ds(g)?l0(t,d)(g):d(g)}function d(g){return tW(t,u,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function u(g){return t.attempt(p3e,h,h)(g)}function h(g){return xr(g)?qr(t,f,"whitespace")(g):f(g)}function f(g){return g===null||Ot(g)?(t.exit("definition"),n.parser.defined.push(s),e(g)):r(g)}}function b3e(t,e,r){return n;function n(l){return ds(l)?l0(t,s)(l):r(l)}function s(l){return nW(t,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return xr(l)?qr(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Ot(l)?e(l):r(l)}}const y3e={name:"hardBreakEscape",tokenize:v3e};function v3e(t,e,r){return n;function n(i){return t.enter("hardBreakEscape"),t.consume(i),s}function s(i){return Ot(i)?(t.exit("hardBreakEscape"),e(i)):r(i)}}const k3e={name:"headingAtx",resolve:w3e,tokenize:j3e};function w3e(t,e){let r=t.length-2,n=3,s,i;return t[n][1].type==="whitespace"&&(n+=2),r-2>n&&t[r][1].type==="whitespace"&&(r-=2),t[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&t[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(s={type:"atxHeadingText",start:t[n][1].start,end:t[r][1].end},i={type:"chunkText",start:t[n][1].start,end:t[r][1].end,contentType:"text"},rl(t,n,r-n+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),t}function j3e(t,e,r){let n=0;return s;function s(u){return t.enter("atxHeading"),i(u)}function i(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&n++<6?(t.consume(u),o):u===null||ds(u)?(t.exit("atxHeadingSequence"),l(u)):r(u)}function l(u){return u===35?(t.enter("atxHeadingSequence"),c(u)):u===null||Ot(u)?(t.exit("atxHeading"),e(u)):xr(u)?qr(t,l,"whitespace")(u):(t.enter("atxHeadingText"),d(u))}function c(u){return u===35?(t.consume(u),c):(t.exit("atxHeadingSequence"),l(u))}function d(u){return u===null||u===35||ds(u)?(t.exit("atxHeadingText"),l(u)):(t.consume(u),d)}}const N3e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],a8=["pre","script","style","textarea"],_3e={concrete:!0,name:"htmlFlow",resolveTo:E3e,tokenize:C3e},S3e={partial:!0,tokenize:O3e},A3e={partial:!0,tokenize:T3e};function E3e(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function C3e(t,e,r){const n=this;let s,i,o,l,c;return d;function d(B){return u(B)}function u(B){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(B),h}function h(B){return B===33?(t.consume(B),f):B===47?(t.consume(B),i=!0,m):B===63?(t.consume(B),s=3,n.interrupt?e:R):jo(B)?(t.consume(B),o=String.fromCharCode(B),p):r(B)}function f(B){return B===45?(t.consume(B),s=2,g):B===91?(t.consume(B),s=5,l=0,x):jo(B)?(t.consume(B),s=4,n.interrupt?e:R):r(B)}function g(B){return B===45?(t.consume(B),n.interrupt?e:R):r(B)}function x(B){const U="CDATA[";return B===U.charCodeAt(l++)?(t.consume(B),l===U.length?n.interrupt?e:C:x):r(B)}function m(B){return jo(B)?(t.consume(B),o=String.fromCharCode(B),p):r(B)}function p(B){if(B===null||B===47||B===62||ds(B)){const U=B===47,V=o.toLowerCase();return!U&&!i&&a8.includes(V)?(s=1,n.interrupt?e(B):C(B)):N3e.includes(o.toLowerCase())?(s=6,U?(t.consume(B),b):n.interrupt?e(B):C(B)):(s=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(B):i?v(B):y(B))}return B===45||Os(B)?(t.consume(B),o+=String.fromCharCode(B),p):r(B)}function b(B){return B===62?(t.consume(B),n.interrupt?e:C):r(B)}function v(B){return xr(B)?(t.consume(B),v):T(B)}function y(B){return B===47?(t.consume(B),T):B===58||B===95||jo(B)?(t.consume(B),w):xr(B)?(t.consume(B),y):T(B)}function w(B){return B===45||B===46||B===58||B===95||Os(B)?(t.consume(B),w):k(B)}function k(B){return B===61?(t.consume(B),j):xr(B)?(t.consume(B),k):y(B)}function j(B){return B===null||B===60||B===61||B===62||B===96?r(B):B===34||B===39?(t.consume(B),c=B,_):xr(B)?(t.consume(B),j):S(B)}function _(B){return B===c?(t.consume(B),c=null,A):B===null||Ot(B)?r(B):(t.consume(B),_)}function S(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||ds(B)?k(B):(t.consume(B),S)}function A(B){return B===47||B===62||xr(B)?y(B):r(B)}function T(B){return B===62?(t.consume(B),E):r(B)}function E(B){return B===null||Ot(B)?C(B):xr(B)?(t.consume(B),E):r(B)}function C(B){return B===45&&s===2?(t.consume(B),D):B===60&&s===1?(t.consume(B),L):B===62&&s===4?(t.consume(B),Y):B===63&&s===3?(t.consume(B),R):B===93&&s===5?(t.consume(B),$):Ot(B)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(S3e,ee,z)(B)):B===null||Ot(B)?(t.exit("htmlFlowData"),z(B)):(t.consume(B),C)}function z(B){return t.check(A3e,M,ee)(B)}function M(B){return t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),F}function F(B){return B===null||Ot(B)?z(B):(t.enter("htmlFlowData"),C(B))}function D(B){return B===45?(t.consume(B),R):C(B)}function L(B){return B===47?(t.consume(B),o="",K):C(B)}function K(B){if(B===62){const U=o.toLowerCase();return a8.includes(U)?(t.consume(B),Y):C(B)}return jo(B)&&o.length<8?(t.consume(B),o+=String.fromCharCode(B),K):C(B)}function $(B){return B===93?(t.consume(B),R):C(B)}function R(B){return B===62?(t.consume(B),Y):B===45&&s===2?(t.consume(B),R):C(B)}function Y(B){return B===null||Ot(B)?(t.exit("htmlFlowData"),ee(B)):(t.consume(B),Y)}function ee(B){return t.exit("htmlFlow"),e(B)}}function T3e(t,e,r){const n=this;return s;function s(o){return Ot(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):r(o)}function i(o){return n.parser.lazy[n.now().line]?r(o):e(o)}}function O3e(t,e,r){return n;function n(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt($w,e,r)}}const I3e={name:"htmlText",tokenize:D3e};function D3e(t,e,r){const n=this;let s,i,o;return l;function l(R){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(R),c}function c(R){return R===33?(t.consume(R),d):R===47?(t.consume(R),k):R===63?(t.consume(R),y):jo(R)?(t.consume(R),S):r(R)}function d(R){return R===45?(t.consume(R),u):R===91?(t.consume(R),i=0,x):jo(R)?(t.consume(R),v):r(R)}function u(R){return R===45?(t.consume(R),g):r(R)}function h(R){return R===null?r(R):R===45?(t.consume(R),f):Ot(R)?(o=h,L(R)):(t.consume(R),h)}function f(R){return R===45?(t.consume(R),g):h(R)}function g(R){return R===62?D(R):R===45?f(R):h(R)}function x(R){const Y="CDATA[";return R===Y.charCodeAt(i++)?(t.consume(R),i===Y.length?m:x):r(R)}function m(R){return R===null?r(R):R===93?(t.consume(R),p):Ot(R)?(o=m,L(R)):(t.consume(R),m)}function p(R){return R===93?(t.consume(R),b):m(R)}function b(R){return R===62?D(R):R===93?(t.consume(R),b):m(R)}function v(R){return R===null||R===62?D(R):Ot(R)?(o=v,L(R)):(t.consume(R),v)}function y(R){return R===null?r(R):R===63?(t.consume(R),w):Ot(R)?(o=y,L(R)):(t.consume(R),y)}function w(R){return R===62?D(R):y(R)}function k(R){return jo(R)?(t.consume(R),j):r(R)}function j(R){return R===45||Os(R)?(t.consume(R),j):_(R)}function _(R){return Ot(R)?(o=_,L(R)):xr(R)?(t.consume(R),_):D(R)}function S(R){return R===45||Os(R)?(t.consume(R),S):R===47||R===62||ds(R)?A(R):r(R)}function A(R){return R===47?(t.consume(R),D):R===58||R===95||jo(R)?(t.consume(R),T):Ot(R)?(o=A,L(R)):xr(R)?(t.consume(R),A):D(R)}function T(R){return R===45||R===46||R===58||R===95||Os(R)?(t.consume(R),T):E(R)}function E(R){return R===61?(t.consume(R),C):Ot(R)?(o=E,L(R)):xr(R)?(t.consume(R),E):A(R)}function C(R){return R===null||R===60||R===61||R===62||R===96?r(R):R===34||R===39?(t.consume(R),s=R,z):Ot(R)?(o=C,L(R)):xr(R)?(t.consume(R),C):(t.consume(R),M)}function z(R){return R===s?(t.consume(R),s=void 0,F):R===null?r(R):Ot(R)?(o=z,L(R)):(t.consume(R),z)}function M(R){return R===null||R===34||R===39||R===60||R===61||R===96?r(R):R===47||R===62||ds(R)?A(R):(t.consume(R),M)}function F(R){return R===47||R===62||ds(R)?A(R):r(R)}function D(R){return R===62?(t.consume(R),t.exit("htmlTextData"),t.exit("htmlText"),e):r(R)}function L(R){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),K}function K(R){return xr(R)?qr(t,$,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):$(R)}function $(R){return t.enter("htmlTextData"),o(R)}}const VT={name:"labelEnd",resolveAll:P3e,resolveTo:z3e,tokenize:$3e},M3e={tokenize:F3e},L3e={tokenize:B3e},R3e={tokenize:U3e};function P3e(t){let e=-1;const r=[];for(;++e<t.length;){const n=t[e][1];if(r.push(t[e]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const s=n.type==="labelImage"?4:2;n.type="data",e+=s}}return t.length!==r.length&&rl(t,0,t.length,r),t}function z3e(t,e){let r=t.length,n=0,s,i,o,l;for(;r--;)if(s=t[r][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[r][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(t[r][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=r,s.type!=="labelLink")){n=2;break}}else s.type==="labelEnd"&&(o=r);const c={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[i][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[i+n+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",d,e]],l=ri(l,t.slice(i+1,i+n+3)),l=ri(l,[["enter",u,e]]),l=ri(l,qT(e.parser.constructs.insideSpan.null,t.slice(i+n+4,o-3),e)),l=ri(l,[["exit",u,e],t[o-2],t[o-1],["exit",d,e]]),l=ri(l,t.slice(o+1)),l=ri(l,[["exit",c,e]]),rl(t,i,t.length,l),t}function $3e(t,e,r){const n=this;let s=n.events.length,i,o;for(;s--;)if((n.events[s][1].type==="labelImage"||n.events[s][1].type==="labelLink")&&!n.events[s][1]._balanced){i=n.events[s][1];break}return l;function l(f){return i?i._inactive?h(f):(o=n.parser.defined.includes(Wf(n.sliceSerialize({start:i.end,end:n.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),c):r(f)}function c(f){return f===40?t.attempt(M3e,u,o?u:h)(f):f===91?t.attempt(L3e,u,o?d:h)(f):o?u(f):h(f)}function d(f){return t.attempt(R3e,u,h)(f)}function u(f){return e(f)}function h(f){return i._balanced=!0,r(f)}}function F3e(t,e,r){return n;function n(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),s}function s(h){return ds(h)?l0(t,i)(h):i(h)}function i(h){return h===41?u(h):tW(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return ds(h)?l0(t,c)(h):u(h)}function l(h){return r(h)}function c(h){return h===34||h===39||h===40?nW(t,d,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function d(h){return ds(h)?l0(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):r(h)}}function B3e(t,e,r){const n=this;return s;function s(l){return rW.call(n,t,i,o,"reference","referenceMarker","referenceString")(l)}function i(l){return n.parser.defined.includes(Wf(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(l):r(l)}function o(l){return r(l)}}function U3e(t,e,r){return n;function n(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),s}function s(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):r(i)}}const K3e={name:"labelStartImage",resolveAll:VT.resolveAll,tokenize:G3e};function G3e(t,e,r){const n=this;return s;function s(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),i}function i(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):r(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(l):e(l)}}const q3e={name:"labelStartLink",resolveAll:VT.resolveAll,tokenize:V3e};function V3e(t,e,r){const n=this;return s;function s(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):e(o)}}const __={name:"lineEnding",tokenize:H3e};function H3e(t,e){return r;function r(n){return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),qr(t,e,"linePrefix")}}const Fv={name:"thematicBreak",tokenize:W3e};function W3e(t,e,r){let n=0,s;return i;function i(d){return t.enter("thematicBreak"),o(d)}function o(d){return s=d,l(d)}function l(d){return d===s?(t.enter("thematicBreakSequence"),c(d)):n>=3&&(d===null||Ot(d))?(t.exit("thematicBreak"),e(d)):r(d)}function c(d){return d===s?(t.consume(d),n++,c):(t.exit("thematicBreakSequence"),xr(d)?qr(t,l,"whitespace")(d):l(d))}}const ns={continuation:{tokenize:Q3e},exit:eCe,name:"list",tokenize:Z3e},X3e={partial:!0,tokenize:tCe},Y3e={partial:!0,tokenize:J3e};function Z3e(t,e,r){const n=this,s=n.events[n.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(g){const x=n.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!n.containerState.marker||g===n.containerState.marker:nE(g)){if(n.containerState.type||(n.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(Fv,r,d)(g):d(g);if(!n.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(g)}return r(g)}function c(g){return nE(g)&&++o<10?(t.consume(g),c):(!n.interrupt||o<2)&&(n.containerState.marker?g===n.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),d(g)):r(g)}function d(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||g,t.check($w,n.interrupt?r:u,t.attempt(X3e,f,h))}function u(g){return n.containerState.initialBlankLine=!0,i++,f(g)}function h(g){return xr(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),f):r(g)}function f(g){return n.containerState.size=i+n.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function Q3e(t,e,r){const n=this;return n.containerState._closeFlow=void 0,t.check($w,s,i);function s(l){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,qr(t,e,"listItemIndent",n.containerState.size+1)(l)}function i(l){return n.containerState.furtherBlankLines||!xr(l)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(l)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,t.attempt(Y3e,e,o)(l))}function o(l){return n.containerState._closeFlow=!0,n.interrupt=void 0,qr(t,t.attempt(ns,e,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function J3e(t,e,r){const n=this;return qr(t,s,"listItemIndent",n.containerState.size+1);function s(i){const o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?e(i):r(i)}}function eCe(t){t.exit(this.containerState.type)}function tCe(t,e,r){const n=this;return qr(t,s,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=n.events[n.events.length-1];return!xr(i)&&o&&o[1].type==="listItemPrefixWhitespace"?e(i):r(i)}}const s8={name:"setextUnderline",resolveTo:rCe,tokenize:nCe};function rCe(t,e){let r=t.length,n,s,i;for(;r--;)if(t[r][0]==="enter"){if(t[r][1].type==="content"){n=r;break}t[r][1].type==="paragraph"&&(s=r)}else t[r][1].type==="content"&&t.splice(r,1),!i&&t[r][1].type==="definition"&&(i=r);const o={type:"setextHeading",start:{...t[n][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",i?(t.splice(s,0,["enter",o,e]),t.splice(i+1,0,["exit",t[n][1],e]),t[n][1].end={...t[i][1].end}):t[n][1]=o,t.push(["exit",o,e]),t}function nCe(t,e,r){const n=this;let s;return i;function i(d){let u=n.events.length,h;for(;u--;)if(n.events[u][1].type!=="lineEnding"&&n.events[u][1].type!=="linePrefix"&&n.events[u][1].type!=="content"){h=n.events[u][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||h)?(t.enter("setextHeadingLine"),s=d,o(d)):r(d)}function o(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===s?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),xr(d)?qr(t,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Ot(d)?(t.exit("setextHeadingLine"),e(d)):r(d)}}const aCe={tokenize:sCe};function sCe(t){const e=this,r=t.attempt($w,n,t.attempt(this.parser.constructs.flowInitial,s,qr(t,t.attempt(this.parser.constructs.flow,s,t.attempt(d3e,s)),"linePrefix")));return r;function n(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,r}function s(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,r}}const iCe={resolveAll:sW()},oCe=aW("string"),lCe=aW("text");function aW(t){return{resolveAll:sW(t==="text"?cCe:void 0),tokenize:e};function e(r){const n=this,s=this.parser.constructs[t],i=r.attempt(s,o,l);return o;function o(u){return d(u)?i(u):l(u)}function l(u){if(u===null){r.consume(u);return}return r.enter("data"),r.consume(u),c}function c(u){return d(u)?(r.exit("data"),i(u)):(r.consume(u),c)}function d(u){if(u===null)return!0;const h=s[u];let f=-1;if(h)for(;++f<h.length;){const g=h[f];if(!g.previous||g.previous.call(n,n.previous))return!0}return!1}}}function sW(t){return e;function e(r,n){let s=-1,i;for(;++s<=r.length;)i===void 0?r[s]&&r[s][1].type==="data"&&(i=s,s++):(!r[s]||r[s][1].type!=="data")&&(s!==i+2&&(r[i][1].end=r[s-1][1].end,r.splice(i+2,s-i-2),s=i+2),i=void 0);return t?t(r,n):r}}function cCe(t,e){let r=0;for(;++r<=t.length;)if((r===t.length||t[r][1].type==="lineEnding")&&t[r-1][1].type==="data"){const n=t[r-1][1],s=e.sliceStream(n);let i=s.length,o=-1,l=0,c;for(;i--;){const d=s[i];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){i++;break}}if(e._contentTypeTextTrailing&&r===t.length&&(l=0),l){const d={type:r===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:n.start._bufferIndex+o,_index:n.start._index+i,line:n.end.line,column:n.end.column-l,offset:n.end.offset-l},end:{...n.end}};n.end={...d.start},n.start.offset===n.end.offset?Object.assign(n,d):(t.splice(r,0,["enter",d,e],["exit",d,e]),r+=2)}r++}return t}const dCe={42:ns,43:ns,45:ns,48:ns,49:ns,50:ns,51:ns,52:ns,53:ns,54:ns,55:ns,56:ns,57:ns,62:ZH},uCe={91:m3e},hCe={[-2]:N_,[-1]:N_,32:N_},fCe={35:k3e,42:Fv,45:[s8,Fv],60:_3e,61:s8,95:Fv,96:n8,126:n8},gCe={38:JH,92:QH},mCe={[-5]:__,[-4]:__,[-3]:__,33:K3e,38:JH,42:aE,60:[qEe,I3e],91:q3e,92:[y3e,QH],93:VT,95:aE,96:a3e},pCe={null:[aE,iCe]},xCe={null:[42,95]},bCe={null:[]},yCe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:xCe,contentInitial:uCe,disable:bCe,document:dCe,flow:fCe,flowInitial:hCe,insideSpan:pCe,string:gCe,text:mCe},Symbol.toStringTag,{value:"Module"}));function vCe(t,e,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const s={},i=[];let o=[],l=[];const c={attempt:_(k),check:_(j),consume:v,enter:y,exit:w,interrupt:_(j,{interrupt:!0})},d={code:null,containerState:{},defineSkip:m,events:[],now:x,parser:t,previous:null,sliceSerialize:f,sliceStream:g,write:h};let u=e.tokenize.call(d,c);return e.resolveAll&&i.push(e),d;function h(E){return o=ri(o,E),p(),o[o.length-1]!==null?[]:(S(e,0),d.events=qT(i,d.events,d),d.events)}function f(E,C){return wCe(g(E),C)}function g(E){return kCe(o,E)}function x(){const{_bufferIndex:E,_index:C,line:z,column:M,offset:F}=n;return{_bufferIndex:E,_index:C,line:z,column:M,offset:F}}function m(E){s[E.line]=E.column,T()}function p(){let E;for(;n._index<o.length;){const C=o[n._index];if(typeof C=="string")for(E=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===E&&n._bufferIndex<C.length;)b(C.charCodeAt(n._bufferIndex));else b(C)}}function b(E){u=u(E)}function v(E){Ot(E)?(n.line++,n.column=1,n.offset+=E===-3?2:1,T()):E!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),d.previous=E}function y(E,C){const z=C||{};return z.type=E,z.start=x(),d.events.push(["enter",z,d]),l.push(z),z}function w(E){const C=l.pop();return C.end=x(),d.events.push(["exit",C,d]),C}function k(E,C){S(E,C.from)}function j(E,C){C.restore()}function _(E,C){return z;function z(M,F,D){let L,K,$,R;return Array.isArray(M)?ee(M):"tokenize"in M?ee([M]):Y(M);function Y(se){return Ne;function Ne(ie){const q=ie!==null&&se[ie],H=ie!==null&&se.null,Z=[...Array.isArray(q)?q:q?[q]:[],...Array.isArray(H)?H:H?[H]:[]];return ee(Z)(ie)}}function ee(se){return L=se,K=0,se.length===0?D:B(se[K])}function B(se){return Ne;function Ne(ie){return R=A(),$=se,se.partial||(d.currentConstruct=se),se.name&&d.parser.constructs.disable.null.includes(se.name)?V():se.tokenize.call(C?Object.assign(Object.create(d),C):d,c,U,V)(ie)}}function U(se){return E($,R),F}function V(se){return R.restore(),++K<L.length?B(L[K]):D}}}function S(E,C){E.resolveAll&&!i.includes(E)&&i.push(E),E.resolve&&rl(d.events,C,d.events.length-C,E.resolve(d.events.slice(C),d)),E.resolveTo&&(d.events=E.resolveTo(d.events,d))}function A(){const E=x(),C=d.previous,z=d.currentConstruct,M=d.events.length,F=Array.from(l);return{from:M,restore:D};function D(){n=E,d.previous=C,d.currentConstruct=z,d.events.length=M,l=F,T()}}function T(){n.line in s&&n.column<2&&(n.column=s[n.line],n.offset+=s[n.line]-1)}}function kCe(t,e){const r=e.start._index,n=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let o;if(r===s)o=[t[r].slice(n,i)];else{if(o=t.slice(r,s),n>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(n):o.shift()}i>0&&o.push(t[s].slice(0,i))}return o}function wCe(t,e){let r=-1;const n=[];let s;for(;++r<t.length;){const i=t[r];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,n.push(o)}return n.join("")}function jCe(t){const n={constructs:TEe([yCe,...(t||{}).extensions||[]]),content:s(zEe),defined:[],document:s(FEe),flow:s(aCe),lazy:{},string:s(oCe),text:s(lCe)};return n;function s(i){return o;function o(l){return vCe(n,i,l)}}}function NCe(t){for(;!eW(t););return t}const i8=/[\0\t\n\r]/g;function _Ce(){let t=1,e="",r=!0,n;return s;function s(i,o,l){const c=[];let d,u,h,f,g;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),h=0,e="",r&&(i.charCodeAt(0)===65279&&h++,r=void 0);h<i.length;){if(i8.lastIndex=h,d=i8.exec(i),f=d&&d.index!==void 0?d.index:i.length,g=i.charCodeAt(f),!d){e=i.slice(h);break}if(g===10&&h===f&&n)c.push(-3),n=void 0;else switch(n&&(c.push(-5),n=void 0),h<f&&(c.push(i.slice(h,f)),t+=f-h),g){case 0:{c.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,c.push(-2);t++<u;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:n=!0,t=1}h=f+1}return l&&(n&&c.push(-5),e&&c.push(e),c.push(null)),c}}const SCe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ACe(t){return t.replace(SCe,ECe)}function ECe(t,e,r){if(e)return e;if(r.charCodeAt(0)===35){const s=r.charCodeAt(1),i=s===120||s===88;return YH(r.slice(i?2:1),i?16:10)}return GT(r)||t}const iW={}.hasOwnProperty;function CCe(t,e,r){return typeof e!="string"&&(r=e,e=void 0),TCe(r)(NCe(jCe(r).document().write(_Ce()(t,e,!0))))}function TCe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Ze),autolinkProtocol:A,autolinkEmail:A,atxHeading:i(Le),blockQuote:i(H),characterEscape:A,characterReference:A,codeFenced:i(Z),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(Z,o),codeText:i(te,o),codeTextData:A,data:A,codeFlowValue:A,definition:i(ge),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(Ce),hardBreakEscape:i(He),hardBreakTrailing:i(He),htmlFlow:i(le,o),htmlFlowData:A,htmlText:i(le,o),htmlTextData:A,image:i(Re),label:o,link:i(Ze),listItem:i(rt),listItemValue:f,listOrdered:i(lt,h),listUnordered:i(lt),paragraph:i(ne),reference:B,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(Le),strong:i(pe),thematicBreak:i(kt)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:q,autolinkProtocol:ie,blockQuote:c(),characterEscapeValue:T,characterReferenceMarkerHexadecimal:V,characterReferenceMarkerNumeric:V,characterReferenceValue:se,characterReference:Ne,codeFenced:c(p),codeFencedFence:m,codeFencedFenceInfo:g,codeFencedFenceMeta:x,codeFlowValue:T,codeIndented:c(b),codeText:c(F),codeTextData:T,data:T,definition:c(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:y,emphasis:c(),hardBreakEscape:c(C),hardBreakTrailing:c(C),htmlFlow:c(z),htmlFlowData:T,htmlText:c(M),htmlTextData:T,image:c(L),label:$,labelText:K,lineEnding:E,link:c(D),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:U,resourceDestinationString:R,resourceTitleString:Y,resource:ee,setextHeading:c(S),setextHeadingLineSequence:_,setextHeadingText:j,strong:c(),thematicBreak:c()}};oW(e,(t||{}).mdastExtensions||[]);const r={};return n;function n(Se){let me={type:"root",children:[]};const $e={stack:[me],tokenStack:[],config:e,enter:l,exit:d,buffer:o,resume:u,data:r},Ge=[];let Qe=-1;for(;++Qe<Se.length;)if(Se[Qe][1].type==="listOrdered"||Se[Qe][1].type==="listUnordered")if(Se[Qe][0]==="enter")Ge.push(Qe);else{const Lt=Ge.pop();Qe=s(Se,Lt,Qe)}for(Qe=-1;++Qe<Se.length;){const Lt=e[Se[Qe][0]];iW.call(Lt,Se[Qe][1].type)&&Lt[Se[Qe][1].type].call(Object.assign({sliceSerialize:Se[Qe][2].sliceSerialize},$e),Se[Qe][1])}if($e.tokenStack.length>0){const Lt=$e.tokenStack[$e.tokenStack.length-1];(Lt[1]||o8).call($e,void 0,Lt[0])}for(me.position={start:Nc(Se.length>0?Se[0][1].start:{line:1,column:1,offset:0}),end:Nc(Se.length>0?Se[Se.length-2][1].end:{line:1,column:1,offset:0})},Qe=-1;++Qe<e.transforms.length;)me=e.transforms[Qe](me)||me;return me}function s(Se,me,$e){let Ge=me-1,Qe=-1,Lt=!1,wt,Nt,he,Xe;for(;++Ge<=$e;){const W=Se[Ge];switch(W[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{W[0]==="enter"?Qe++:Qe--,Xe=void 0;break}case"lineEndingBlank":{W[0]==="enter"&&(wt&&!Xe&&!Qe&&!he&&(he=Ge),Xe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xe=void 0}if(!Qe&&W[0]==="enter"&&W[1].type==="listItemPrefix"||Qe===-1&&W[0]==="exit"&&(W[1].type==="listUnordered"||W[1].type==="listOrdered")){if(wt){let we=Ge;for(Nt=void 0;we--;){const ve=Se[we];if(ve[1].type==="lineEnding"||ve[1].type==="lineEndingBlank"){if(ve[0]==="exit")continue;Nt&&(Se[Nt][1].type="lineEndingBlank",Lt=!0),ve[1].type="lineEnding",Nt=we}else if(!(ve[1].type==="linePrefix"||ve[1].type==="blockQuotePrefix"||ve[1].type==="blockQuotePrefixWhitespace"||ve[1].type==="blockQuoteMarker"||ve[1].type==="listItemIndent"))break}he&&(!Nt||he<Nt)&&(wt._spread=!0),wt.end=Object.assign({},Nt?Se[Nt][1].start:W[1].end),Se.splice(Nt||Ge,0,["exit",wt,W[2]]),Ge++,$e++}if(W[1].type==="listItemPrefix"){const we={type:"listItem",_spread:!1,start:Object.assign({},W[1].start),end:void 0};wt=we,Se.splice(Ge,0,["enter",we,W[2]]),Ge++,$e++,he=void 0,Xe=!0}}}return Se[me][1]._spread=Lt,$e}function i(Se,me){return $e;function $e(Ge){l.call(this,Se(Ge),Ge),me&&me.call(this,Ge)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(Se,me,$e){this.stack[this.stack.length-1].children.push(Se),this.stack.push(Se),this.tokenStack.push([me,$e||void 0]),Se.position={start:Nc(me.start),end:void 0}}function c(Se){return me;function me($e){Se&&Se.call(this,$e),d.call(this,$e)}}function d(Se,me){const $e=this.stack.pop(),Ge=this.tokenStack.pop();if(Ge)Ge[0].type!==Se.type&&(me?me.call(this,Se,Ge[0]):(Ge[1]||o8).call(this,Se,Ge[0]));else throw new Error("Cannot close `"+Se.type+"` ("+o0({start:Se.start,end:Se.end})+"): its not open");$e.position.end=Nc(Se.end)}function u(){return EEe(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(Se){if(this.data.expectingFirstListItemValue){const me=this.stack[this.stack.length-2];me.start=Number.parseInt(this.sliceSerialize(Se),10),this.data.expectingFirstListItemValue=void 0}}function g(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.lang=Se}function x(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.meta=Se}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function p(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.value=Se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.value=Se.replace(/(\r?\n|\r)$/g,"")}function v(Se){const me=this.resume(),$e=this.stack[this.stack.length-1];$e.label=me,$e.identifier=Wf(this.sliceSerialize(Se)).toLowerCase()}function y(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.title=Se}function w(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.url=Se}function k(Se){const me=this.stack[this.stack.length-1];if(!me.depth){const $e=this.sliceSerialize(Se).length;me.depth=$e}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function _(Se){const me=this.stack[this.stack.length-1];me.depth=this.sliceSerialize(Se).codePointAt(0)===61?1:2}function S(){this.data.setextHeadingSlurpLineEnding=void 0}function A(Se){const $e=this.stack[this.stack.length-1].children;let Ge=$e[$e.length-1];(!Ge||Ge.type!=="text")&&(Ge=Ue(),Ge.position={start:Nc(Se.start),end:void 0},$e.push(Ge)),this.stack.push(Ge)}function T(Se){const me=this.stack.pop();me.value+=this.sliceSerialize(Se),me.position.end=Nc(Se.end)}function E(Se){const me=this.stack[this.stack.length-1];if(this.data.atHardBreak){const $e=me.children[me.children.length-1];$e.position.end=Nc(Se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(me.type)&&(A.call(this,Se),T.call(this,Se))}function C(){this.data.atHardBreak=!0}function z(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.value=Se}function M(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.value=Se}function F(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.value=Se}function D(){const Se=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";Se.type+="Reference",Se.referenceType=me,delete Se.url,delete Se.title}else delete Se.identifier,delete Se.label;this.data.referenceType=void 0}function L(){const Se=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";Se.type+="Reference",Se.referenceType=me,delete Se.url,delete Se.title}else delete Se.identifier,delete Se.label;this.data.referenceType=void 0}function K(Se){const me=this.sliceSerialize(Se),$e=this.stack[this.stack.length-2];$e.label=ACe(me),$e.identifier=Wf(me).toLowerCase()}function $(){const Se=this.stack[this.stack.length-1],me=this.resume(),$e=this.stack[this.stack.length-1];if(this.data.inReference=!0,$e.type==="link"){const Ge=Se.children;$e.children=Ge}else $e.alt=me}function R(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.url=Se}function Y(){const Se=this.resume(),me=this.stack[this.stack.length-1];me.title=Se}function ee(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function U(Se){const me=this.resume(),$e=this.stack[this.stack.length-1];$e.label=me,$e.identifier=Wf(this.sliceSerialize(Se)).toLowerCase(),this.data.referenceType="full"}function V(Se){this.data.characterReferenceType=Se.type}function se(Se){const me=this.sliceSerialize(Se),$e=this.data.characterReferenceType;let Ge;$e?(Ge=YH(me,$e==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ge=GT(me);const Qe=this.stack[this.stack.length-1];Qe.value+=Ge}function Ne(Se){const me=this.stack.pop();me.position.end=Nc(Se.end)}function ie(Se){T.call(this,Se);const me=this.stack[this.stack.length-1];me.url=this.sliceSerialize(Se)}function q(Se){T.call(this,Se);const me=this.stack[this.stack.length-1];me.url="mailto:"+this.sliceSerialize(Se)}function H(){return{type:"blockquote",children:[]}}function Z(){return{type:"code",lang:null,meta:null,value:""}}function te(){return{type:"inlineCode",value:""}}function ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ce(){return{type:"emphasis",children:[]}}function Le(){return{type:"heading",depth:0,children:[]}}function He(){return{type:"break"}}function le(){return{type:"html",value:""}}function Re(){return{type:"image",title:null,url:"",alt:null}}function Ze(){return{type:"link",title:null,url:"",children:[]}}function lt(Se){return{type:"list",ordered:Se.type==="listOrdered",start:null,spread:Se._spread,children:[]}}function rt(Se){return{type:"listItem",spread:Se._spread,checked:null,children:[]}}function ne(){return{type:"paragraph",children:[]}}function pe(){return{type:"strong",children:[]}}function Ue(){return{type:"text",value:""}}function kt(){return{type:"thematicBreak"}}}function Nc(t){return{line:t.line,column:t.column,offset:t.offset}}function oW(t,e){let r=-1;for(;++r<e.length;){const n=e[r];Array.isArray(n)?oW(t,n):OCe(t,n)}}function OCe(t,e){let r;for(r in e)if(iW.call(e,r))switch(r){case"canContainEols":{const n=e[r];n&&t[r].push(...n);break}case"transforms":{const n=e[r];n&&t[r].push(...n);break}case"enter":case"exit":{const n=e[r];n&&Object.assign(t[r],n);break}}}function o8(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+o0({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+o0({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+o0({start:e.start,end:e.end})+") is still open")}function ICe(t){const e=this;e.parser=r;function r(n){return CCe(n,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function DCe(t,e){const r={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,r),t.applyData(e,r)}function MCe(t,e){const r={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,r),[t.applyData(e,r),{type:"text",value:`
`}]}function LCe(t,e){const r=e.value?e.value+`
`:"",n={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(n.className=["language-"+s[0]]);let i={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function RCe(t,e){const r={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function PCe(t,e){const r={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function zCe(t,e){const r=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=String(e.identifier).toUpperCase(),s=vm(n.toLowerCase()),i=t.footnoteOrder.indexOf(n);let o,l=t.footnoteCounts.get(n);l===void 0?(l=0,t.footnoteOrder.push(n),o=t.footnoteOrder.length):o=i+1,l+=1,t.footnoteCounts.set(n,l);const c={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+s,id:r+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,d),t.applyData(e,d)}function $Ce(t,e){const r={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function FCe(t,e){if(t.options.allowDangerousHtml){const r={type:"raw",value:e.value};return t.patch(e,r),t.applyData(e,r)}}function lW(t,e){const r=e.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+n}];const s=t.all(e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=n:s.push({type:"text",value:n}),s}function BCe(t,e){const r=String(e.identifier).toUpperCase(),n=t.definitionById.get(r);if(!n)return lW(t,e);const s={src:vm(n.url||""),alt:e.alt};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,i),t.applyData(e,i)}function UCe(t,e){const r={src:vm(e.url)};e.alt!==null&&e.alt!==void 0&&(r.alt=e.alt),e.title!==null&&e.title!==void 0&&(r.title=e.title);const n={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,n),t.applyData(e,n)}function KCe(t,e){const r={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return t.patch(e,n),t.applyData(e,n)}function GCe(t,e){const r=String(e.identifier).toUpperCase(),n=t.definitionById.get(r);if(!n)return lW(t,e);const s={href:vm(n.url||"")};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function qCe(t,e){const r={href:vm(e.url)};e.title!==null&&e.title!==void 0&&(r.title=e.title);const n={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function VCe(t,e,r){const n=t.all(e),s=r?HCe(r):cW(e),i={},o=[];if(typeof e.checked=="boolean"){const u=n[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},n.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<n.length;){const u=n[l];(s||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?o.push(...u.children):o.push(u)}const c=n[n.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:i,children:o};return t.patch(e,d),t.applyData(e,d)}function HCe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const r=t.children;let n=-1;for(;!e&&++n<r.length;)e=cW(r[n])}return e}function cW(t){const e=t.spread;return e??t.children.length>1}function WCe(t,e){const r={},n=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(r.start=e.start);++s<n.length;){const o=n[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:r,children:t.wrap(n,!0)};return t.patch(e,i),t.applyData(e,i)}function XCe(t,e){const r={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function YCe(t,e){const r={type:"root",children:t.wrap(t.all(e))};return t.patch(e,r),t.applyData(e,r)}function ZCe(t,e){const r={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function QCe(t,e){const r=t.all(e),n=r.shift(),s=[];if(n){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([n],!0)};t.patch(e.children[0],o),s.push(o)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(r,!0)},l=FT(e.children[1]),c=KH(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function JCe(t,e,r){const n=r?r.children:void 0,i=(n?n.indexOf(e):1)===0?"th":"td",o=r&&r.type==="table"?r.align:void 0,l=o?o.length:e.children.length;let c=-1;const d=[];for(;++c<l;){const h=e.children[c],f={},g=o?o[c]:void 0;g&&(f.align=g);let x={type:"element",tagName:i,properties:f,children:[]};h&&(x.children=t.all(h),t.patch(h,x),x=t.applyData(h,x)),d.push(x)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,u),t.applyData(e,u)}function e5e(t,e){const r={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}const l8=9,c8=32;function t5e(t){const e=String(t),r=/\r?\n|\r/g;let n=r.exec(e),s=0;const i=[];for(;n;)i.push(d8(e.slice(s,n.index),s>0,!0),n[0]),s=n.index+n[0].length,n=r.exec(e);return i.push(d8(e.slice(s),s>0,!1)),i.join("")}function d8(t,e,r){let n=0,s=t.length;if(e){let i=t.codePointAt(n);for(;i===l8||i===c8;)n++,i=t.codePointAt(n)}if(r){let i=t.codePointAt(s-1);for(;i===l8||i===c8;)s--,i=t.codePointAt(s-1)}return s>n?t.slice(n,s):""}function r5e(t,e){const r={type:"text",value:t5e(String(e.value))};return t.patch(e,r),t.applyData(e,r)}function n5e(t,e){const r={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,r),t.applyData(e,r)}const a5e={blockquote:DCe,break:MCe,code:LCe,delete:RCe,emphasis:PCe,footnoteReference:zCe,heading:$Ce,html:FCe,imageReference:BCe,image:UCe,inlineCode:KCe,linkReference:GCe,link:qCe,listItem:VCe,list:WCe,paragraph:XCe,root:YCe,strong:ZCe,table:QCe,tableCell:e5e,tableRow:JCe,text:r5e,thematicBreak:n5e,toml:Fy,yaml:Fy,definition:Fy,footnoteDefinition:Fy};function Fy(){}const dW=-1,Fw=0,c0=1,tk=2,HT=3,WT=4,XT=5,YT=6,uW=7,hW=8,u8=typeof self=="object"?self:globalThis,s5e=(t,e)=>{const r=(s,i)=>(t.set(i,s),s),n=s=>{if(t.has(s))return t.get(s);const[i,o]=e[s];switch(i){case Fw:case dW:return r(o,s);case c0:{const l=r([],s);for(const c of o)l.push(n(c));return l}case tk:{const l=r({},s);for(const[c,d]of o)l[n(c)]=n(d);return l}case HT:return r(new Date(o),s);case WT:{const{source:l,flags:c}=o;return r(new RegExp(l,c),s)}case XT:{const l=r(new Map,s);for(const[c,d]of o)l.set(n(c),n(d));return l}case YT:{const l=r(new Set,s);for(const c of o)l.add(n(c));return l}case uW:{const{name:l,message:c}=o;return r(new u8[l](c),s)}case hW:return r(BigInt(o),s);case"BigInt":return r(Object(BigInt(o)),s);case"ArrayBuffer":return r(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return r(new DataView(l),o)}}return r(new u8[i](o),s)};return n},h8=t=>s5e(new Map,t)(0),Bh="",{toString:i5e}={},{keys:o5e}=Object,op=t=>{const e=typeof t;if(e!=="object"||!t)return[Fw,e];const r=i5e.call(t).slice(8,-1);switch(r){case"Array":return[c0,Bh];case"Object":return[tk,Bh];case"Date":return[HT,Bh];case"RegExp":return[WT,Bh];case"Map":return[XT,Bh];case"Set":return[YT,Bh];case"DataView":return[c0,r]}return r.includes("Array")?[c0,r]:r.includes("Error")?[uW,r]:[tk,r]},By=([t,e])=>t===Fw&&(e==="function"||e==="symbol"),l5e=(t,e,r,n)=>{const s=(o,l)=>{const c=n.push(o)-1;return r.set(l,c),c},i=o=>{if(r.has(o))return r.get(o);let[l,c]=op(o);switch(l){case Fw:{let u=o;switch(c){case"bigint":l=hW,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return s([dW],o)}return s([l,u],o)}case c0:{if(c){let f=o;return c==="DataView"?f=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(o)),s([c,[...f]],o)}const u=[],h=s([l,u],o);for(const f of o)u.push(i(f));return h}case tk:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(e&&"toJSON"in o)return i(o.toJSON());const u=[],h=s([l,u],o);for(const f of o5e(o))(t||!By(op(o[f])))&&u.push([i(f),i(o[f])]);return h}case HT:return s([l,o.toISOString()],o);case WT:{const{source:u,flags:h}=o;return s([l,{source:u,flags:h}],o)}case XT:{const u=[],h=s([l,u],o);for(const[f,g]of o)(t||!(By(op(f))||By(op(g))))&&u.push([i(f),i(g)]);return h}case YT:{const u=[],h=s([l,u],o);for(const f of o)(t||!By(op(f)))&&u.push(i(f));return h}}const{message:d}=o;return s([l,{name:c,message:d}],o)};return i},f8=(t,{json:e,lossy:r}={})=>{const n=[];return l5e(!(e||r),!!e,new Map,n)(t),n},rk=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?h8(f8(t,e)):structuredClone(t):(t,e)=>h8(f8(t,e));function c5e(t,e){const r=[{type:"text",value:""}];return e>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),r}function d5e(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function u5e(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=t.options.footnoteBackContent||c5e,n=t.options.footnoteBackLabel||d5e,s=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[c]);if(!d)continue;const u=t.all(d),h=String(d.identifier).toUpperCase(),f=vm(h.toLowerCase());let g=0;const x=[],m=t.footnoteCounts.get(h);for(;m!==void 0&&++g<=m;){x.length>0&&x.push({type:"text",value:" "});let v=typeof r=="string"?r:r(c,g);typeof v=="string"&&(v={type:"text",value:v}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(c,g),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const p=u[u.length-1];if(p&&p.type==="element"&&p.tagName==="p"){const v=p.children[p.children.length-1];v&&v.type==="text"?v.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...x)}else u.push(...x);const b={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(u,!0)};t.patch(d,b),l.push(b)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...rk(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const fW=function(t){if(t==null)return m5e;if(typeof t=="function")return Bw(t);if(typeof t=="object")return Array.isArray(t)?h5e(t):f5e(t);if(typeof t=="string")return g5e(t);throw new Error("Expected function, string, or object as test")};function h5e(t){const e=[];let r=-1;for(;++r<t.length;)e[r]=fW(t[r]);return Bw(n);function n(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function f5e(t){const e=t;return Bw(r);function r(n){const s=n;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function g5e(t){return Bw(e);function e(r){return r&&r.type===t}}function Bw(t){return e;function e(r,n,s){return!!(p5e(r)&&t.call(this,r,typeof n=="number"?n:void 0,s||void 0))}}function m5e(){return!0}function p5e(t){return t!==null&&typeof t=="object"&&"type"in t}const gW=[],x5e=!0,g8=!1,b5e="skip";function y5e(t,e,r,n){let s;typeof e=="function"&&typeof r!="function"?(n=r,r=e):s=e;const i=fW(s),o=n?-1:1;l(t,void 0,[])();function l(c,d,u){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const g=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(g?"<"+g+">":""))+")"})}return f;function f(){let g=gW,x,m,p;if((!e||i(c,d,u[u.length-1]||void 0))&&(g=v5e(r(c,u)),g[0]===g8))return g;if("children"in c&&c.children){const b=c;if(b.children&&g[0]!==b5e)for(m=(n?b.children.length:-1)+o,p=u.concat(b);m>-1&&m<b.children.length;){const v=b.children[m];if(x=l(v,m,p)(),x[0]===g8)return x;m=typeof x[1]=="number"?x[1]:m+o}}return g}}}function v5e(t){return Array.isArray(t)?t:typeof t=="number"?[x5e,t]:t==null?gW:[t]}function mW(t,e,r,n){let s,i,o;typeof e=="function"&&typeof r!="function"?(i=void 0,o=e,s=r):(i=e,o=r,s=n),y5e(t,i,l,s);function l(c,d){const u=d[d.length-1],h=u?u.children.indexOf(c):void 0;return o(c,h,u)}}const sE={}.hasOwnProperty,k5e={};function w5e(t,e){const r=e||k5e,n=new Map,s=new Map,i=new Map,o={...a5e,...r.handlers},l={all:d,applyData:N5e,definitionById:n,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:c,options:r,patch:j5e,wrap:S5e};return mW(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?n:s,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),l;function c(u,h){const f=u.type,g=l.handlers[f];if(sE.call(l.handlers,f)&&g)return g(l,u,h);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in u){const{children:m,...p}=u,b=rk(p);return b.children=l.all(u),b}return rk(u)}return(l.options.unknownHandler||_5e)(l,u,h)}function d(u){const h=[];if("children"in u){const f=u.children;let g=-1;for(;++g<f.length;){const x=l.one(f[g],u);if(x){if(g&&f[g-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=m8(x.value)),!Array.isArray(x)&&x.type==="element")){const m=x.children[0];m&&m.type==="text"&&(m.value=m8(m.value))}Array.isArray(x)?h.push(...x):h.push(x)}}}return h}}function j5e(t,e){t.position&&(e.position=iEe(t))}function N5e(t,e){let r=e;if(t&&t.data){const n=t.data.hName,s=t.data.hChildren,i=t.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const o="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:o}}r.type==="element"&&i&&Object.assign(r.properties,rk(i)),"children"in r&&r.children&&s!==null&&s!==void 0&&(r.children=s)}return r}function _5e(t,e){const r=e.data||{},n="value"in e&&!(sE.call(r,"hProperties")||sE.call(r,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function S5e(t,e){const r=[];let n=-1;for(e&&r.push({type:"text",value:`
`});++n<t.length;)n&&r.push({type:"text",value:`
`}),r.push(t[n]);return e&&t.length>0&&r.push({type:"text",value:`
`}),r}function m8(t){let e=0,r=t.charCodeAt(e);for(;r===9||r===32;)e++,r=t.charCodeAt(e);return t.slice(e)}function p8(t,e){const r=w5e(t,e),n=r.one(t,void 0),s=u5e(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function A5e(t,e){return t&&"run"in t?async function(r,n){const s=p8(r,{file:n,...e});await t.run(s,n)}:function(r,n){return p8(r,{file:n,...t||e})}}function x8(t){if(t)throw t}var Bv=Object.prototype.hasOwnProperty,pW=Object.prototype.toString,b8=Object.defineProperty,y8=Object.getOwnPropertyDescriptor,v8=function(e){return typeof Array.isArray=="function"?Array.isArray(e):pW.call(e)==="[object Array]"},k8=function(e){if(!e||pW.call(e)!=="[object Object]")return!1;var r=Bv.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&Bv.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var s;for(s in e);return typeof s>"u"||Bv.call(e,s)},w8=function(e,r){b8&&r.name==="__proto__"?b8(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},j8=function(e,r){if(r==="__proto__")if(Bv.call(e,r)){if(y8)return y8(e,r).value}else return;return e[r]},E5e=function t(){var e,r,n,s,i,o,l=arguments[0],c=1,d=arguments.length,u=!1;for(typeof l=="boolean"&&(u=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<d;++c)if(e=arguments[c],e!=null)for(r in e)n=j8(l,r),s=j8(e,r),l!==s&&(u&&s&&(k8(s)||(i=v8(s)))?(i?(i=!1,o=n&&v8(n)?n:[]):o=n&&k8(n)?n:{},w8(l,{name:r,newValue:t(u,o,s)})):typeof s<"u"&&w8(l,{name:r,newValue:s}));return l};const S_=Vt(E5e);function iE(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function C5e(){const t=[],e={run:r,use:n};return e;function r(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...d){const u=t[++i];let h=-1;if(c){o(c);return}for(;++h<s.length;)(d[h]===null||d[h]===void 0)&&(d[h]=s[h]);s=d,u?T5e(u,l)(...d):o(null,...d)}}function n(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function T5e(t,e){let r;return n;function n(...o){const l=t.length>o.length;let c;l&&o.push(s);try{c=t.apply(this,o)}catch(d){const u=d;if(l&&r)throw u;return s(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(o,...l){r||(r=!0,e(o,...l))}function i(o){s(null,o)}}const bo={basename:O5e,dirname:I5e,extname:D5e,join:M5e,sep:"/"};function O5e(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Mb(t);let r=0,n=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(i){r=s+1;break}}else n<0&&(i=!0,n=s+1);return n<0?"":t.slice(r,n)}if(e===t)return"";let o=-1,l=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(i){r=s+1;break}}else o<0&&(i=!0,o=s+1),l>-1&&(t.codePointAt(s)===e.codePointAt(l--)?l<0&&(n=s):(l=-1,n=o));return r===n?n=o:n<0&&(n=t.length),t.slice(r,n)}function I5e(t){if(Mb(t),t.length===0)return".";let e=-1,r=t.length,n;for(;--r;)if(t.codePointAt(r)===47){if(n){e=r;break}}else n||(n=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function D5e(t){Mb(t);let e=t.length,r=-1,n=0,s=-1,i=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){n=e+1;break}continue}r<0&&(o=!0,r=e+1),l===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||r<0||i===0||i===1&&s===r-1&&s===n+1?"":t.slice(s,r)}function M5e(...t){let e=-1,r;for(;++e<t.length;)Mb(t[e]),t[e]&&(r=r===void 0?t[e]:r+"/"+t[e]);return r===void 0?".":L5e(r)}function L5e(t){Mb(t);const e=t.codePointAt(0)===47;let r=R5e(t,!e);return r.length===0&&!e&&(r="."),r.length>0&&t.codePointAt(t.length-1)===47&&(r+="/"),e?"/"+r:r}function R5e(t,e){let r="",n=0,s=-1,i=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(c=r.lastIndexOf("/"),c!==r.length-1){c<0?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),s=o,i=0;continue}}else if(r.length>0){r="",n=0,s=o,i=0;continue}}e&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+t.slice(s+1,o):r=t.slice(s+1,o),n=o-s-1;s=o,i=0}else l===46&&i>-1?i++:i=-1}return r}function Mb(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const P5e={cwd:z5e};function z5e(){return"/"}function oE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function $5e(t){if(typeof t=="string")t=new URL(t);else if(!oE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return F5e(t)}function F5e(t){if(t.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=t.pathname;let r=-1;for(;++r<e.length;)if(e.codePointAt(r)===37&&e.codePointAt(r+1)===50){const n=e.codePointAt(r+2);if(n===70||n===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const A_=["history","path","basename","stem","extname","dirname"];class xW{constructor(e){let r;e?oE(e)?r={path:e}:typeof e=="string"||B5e(e)?r={value:e}:r=e:r={},this.cwd="cwd"in r?"":P5e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<A_.length;){const i=A_[n];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let s;for(s in r)A_.includes(s)||(this[s]=r[s])}get basename(){return typeof this.path=="string"?bo.basename(this.path):void 0}set basename(e){C_(e,"basename"),E_(e,"basename"),this.path=bo.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?bo.dirname(this.path):void 0}set dirname(e){N8(this.basename,"dirname"),this.path=bo.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?bo.extname(this.path):void 0}set extname(e){if(E_(e,"extname"),N8(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=bo.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){oE(e)&&(e=$5e(e)),C_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?bo.basename(this.path,this.extname):void 0}set stem(e){C_(e,"stem"),E_(e,"stem"),this.path=bo.join(this.dirname||"",e+(this.extname||""))}fail(e,r,n){const s=this.message(e,r,n);throw s.fatal=!0,s}info(e,r,n){const s=this.message(e,r,n);return s.fatal=void 0,s}message(e,r,n){const s=new Ma(e,r,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function E_(t,e){if(t&&t.includes(bo.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+bo.sep+"`")}function C_(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function N8(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function B5e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const U5e=function(t){const n=this.constructor.prototype,s=n[t],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,n),i},K5e={}.hasOwnProperty;class ZT extends U5e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=C5e()}copy(){const e=new ZT;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];e.use(...n)}return e.data(S_(!0,{},this.namespace)),e}data(e,r){return typeof e=="string"?arguments.length===2?(I_("data",this.frozen),this.namespace[e]=r,this):K5e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(I_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const s=r.call(e,...n);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const r=Uy(e),n=this.parser||this.Parser;return T_("parse",n),n(String(r),r)}process(e,r){const n=this;return this.freeze(),T_("process",this.parser||this.Parser),O_("process",this.compiler||this.Compiler),r?s(void 0,r):new Promise(s);function s(i,o){const l=Uy(e),c=n.parse(l);n.run(c,l,function(u,h,f){if(u||!h||!f)return d(u);const g=h,x=n.stringify(g,f);V5e(x)?f.value=x:f.result=x,d(u,f)});function d(u,h){u||!h?o(u):i?i(h):r(void 0,h)}}}processSync(e){let r=!1,n;return this.freeze(),T_("processSync",this.parser||this.Parser),O_("processSync",this.compiler||this.Compiler),this.process(e,s),S8("processSync","process",r),n;function s(i,o){r=!0,x8(i),n=o}}run(e,r,n){_8(e),this.freeze();const s=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?i(void 0,n):new Promise(i);function i(o,l){const c=Uy(r);s.run(e,c,d);function d(u,h,f){const g=h||e;u?l(u):o?o(g):n(void 0,g,f)}}}runSync(e,r){let n=!1,s;return this.run(e,r,i),S8("runSync","run",n),s;function i(o,l){x8(o),s=l,n=!0}}stringify(e,r){this.freeze();const n=Uy(r),s=this.compiler||this.Compiler;return O_("stringify",s),_8(e),s(e,n)}use(e,...r){const n=this.attachers,s=this.namespace;if(I_("use",this.frozen),e!=null)if(typeof e=="function")c(e,r);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[u,...h]=d;c(u,h)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(s.settings=S_(!0,s.settings,d.settings))}function l(d){let u=-1;if(d!=null)if(Array.isArray(d))for(;++u<d.length;){const h=d[u];i(h)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,u){let h=-1,f=-1;for(;++h<n.length;)if(n[h][0]===d){f=h;break}if(f===-1)n.push([d,...u]);else if(u.length>0){let[g,...x]=u;const m=n[f][1];iE(m)&&iE(g)&&(g=S_(!0,m,g)),n[f]=[d,g,...x]}}}}const G5e=new ZT().freeze();function T_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function O_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function I_(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _8(t){if(!iE(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function S8(t,e,r){if(!r)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Uy(t){return q5e(t)?t:new xW(t)}function q5e(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function V5e(t){return typeof t=="string"||H5e(t)}function H5e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const W5e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",A8=[],E8={allowDangerousHtml:!0},X5e=/^(https?|ircs?|mailto|xmpp)$/i,Y5e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function bW(t){const e=Z5e(t),r=Q5e(t);return J5e(e.runSync(e.parse(r),r),t)}function Z5e(t){const e=t.rehypePlugins||A8,r=t.remarkPlugins||A8,n=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...E8}:E8;return G5e().use(ICe).use(r).use(A5e,n).use(e)}function Q5e(t){const e=t.children||"",r=new xW;return typeof e=="string"&&(r.value=e),r}function J5e(t,e){const r=e.allowedElements,n=e.allowElement,s=e.components,i=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||eTe;for(const u of Y5e)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+W5e+u.id,void 0);return mW(t,d),uEe(t,{Fragment:a.Fragment,components:s,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function d(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let g;for(g in j_)if(Object.hasOwn(j_,g)&&Object.hasOwn(u.properties,g)){const x=u.properties[g],m=j_[g];(m===null||m.includes(u.tagName))&&(u.properties[g]=c(String(x||""),g,u))}}if(u.type==="element"){let g=r?!r.includes(u.tagName):i?i.includes(u.tagName):!1;if(!g&&n&&typeof h=="number"&&(g=!n(u,h,f)),g&&f&&typeof h=="number")return l&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function eTe(t){const e=t.indexOf(":"),r=t.indexOf("?"),n=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||r!==-1&&e>r||n!==-1&&e>n||X5e.test(t.slice(0,e))?t:""}const tTe=({currentUser:t})=>{var v,y,w,k,j,_,S;const{t:e}=nt(),{currentDesignSystem:r}=Z2(),[n,s]=N.useState([]),[i,o]=N.useState(null),[l,c]=N.useState(null),[d,u]=N.useState(null),[h,f]=N.useState(!0),[g,x]=N.useState(!1);N.useEffect(()=>{m()},[]),N.useEffect(()=>{i&&(p(i.id),b(i.id))},[i]);const m=async()=>{f(!0);try{const A=await O.guardian.getChildren();s(A||[]),A&&A.length>0&&o(A[0])}catch(A){console.error("Failed to fetch children:",A)}finally{f(!1)}},p=async A=>{try{const T=await O.guardian.getDashboard(A);c(T)}catch(T){console.error("Failed to fetch dashboard metrics:",T)}},b=async A=>{x(!0),u(null);try{const T=await O.guardian.getAiSummary(A);u(T.summary)}catch(T){console.error("Failed to fetch AI summary:",T)}finally{x(!1)}};return h?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-teal"})}):a.jsxs("div",{className:"max-w-7xl mx-auto p-4 lg:p-8 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white dark:bg-[#1a1c1e] p-6 rounded-2xl border border-gray-100 dark:border-gray-800 shadow-sm",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Vrdnadshavardashboard"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Vlkommen tillbaka, hr r status fr dina barn."})]}),a.jsx("div",{className:"flex items-center gap-2 p-1 bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800",children:n.map(A=>a.jsx("button",{onClick:()=>o(A),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${(i==null?void 0:i.id)===A.id?"bg-white dark:bg-[#2c2e33] text-brand-teal shadow-md":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:A.firstName},A.id))})]}),i?a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx("div",{className:"relative overflow-hidden bg-gradient-to-br from-brand-teal/10 via-white to-blue-50/10 dark:from-brand-teal/20 dark:via-[#1a1c1e] dark:to-blue-900/10 p-1 rounded-2xl border border-brand-teal/20 shadow-lg group",children:a.jsxs("div",{className:"bg-white/80 dark:bg-[#1a1c1e]/80 backdrop-blur-sm p-6 rounded-[14px]",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-brand-teal",children:[a.jsx("div",{className:"p-2 bg-brand-teal/10 rounded-lg animate-pulse",children:a.jsx(dr,{size:20,className:"text-brand-teal"})}),a.jsx("h2",{className:"font-bold text-lg tracking-tight",children:"AI Statusinsikt"})]}),a.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-400",children:"Genererad av Gemini AI"})]}),g?a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 rounded animate-pulse w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 rounded animate-pulse w-full"}),a.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 rounded animate-pulse w-5/6"})]}):a.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none text-gray-700 dark:text-gray-300",children:a.jsx(bW,{children:d||"Analyserar nuvarande status och framsteg..."})})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(D_,{icon:a.jsx(nr,{className:"text-green-500"}),title:"Nrvaro Idag",value:`${(l==null?void 0:l.attendancePercentage)||0}%`,subtitle:`${(l==null?void 0:l.presentCount)||0}/${(l==null?void 0:l.totalRecords)||0} lektioner`,color:"border-green-100 bg-green-50/10"}),a.jsx(D_,{icon:a.jsx(Tt,{className:"text-blue-500"}),title:"Kommande Lxor",value:(l==null?void 0:l.upcomingAssignmentsCount)||0,subtitle:"Inlmningar nsta 7 dygn",color:"border-blue-100 bg-blue-50/10"}),a.jsx(D_,{icon:a.jsx(Sr,{className:"text-brand-teal"}),title:"Senaste Resultat",value:((y=(v=l==null?void 0:l.recentResults)==null?void 0:v[0])==null?void 0:y.grade)||"-",subtitle:((j=(k=(w=l==null?void 0:l.recentResults)==null?void 0:w[0])==null?void 0:k.course)==null?void 0:j.name)||"Inga resultat n",color:"border-brand-teal/20 bg-brand-teal/5"})]}),a.jsx(vo,{className:"h-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-brand-teal",children:[a.jsx(zt,{size:20}),a.jsx("h2",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Dagens Schema"})]}),a.jsx("div",{className:"space-y-3",children:((_=l==null?void 0:l.todaySchedule)==null?void 0:_.length)>0?l.todaySchedule.map(A=>{var T;return a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 transition-colors hover:border-brand-teal",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 text-center text-sm font-bold text-brand-teal",children:new Date(A.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:A.title}),a.jsx("div",{className:"text-xs text-gray-500",children:((T=A.course)==null?void 0:T.name)||"vrigt"})]})]}),a.jsx("div",{className:"text-xs px-2 py-1 bg-white dark:bg-[#1a1c1e] rounded text-gray-500 border border-gray-100 dark:border-gray-800",children:A.type})]},A.id)}):a.jsx("div",{className:"text-center py-10 text-gray-500 bg-gray-50 dark:bg-gray-900 rounded-xl",children:"Inga lektioner idag"})})]})})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white dark:bg-[#1a1c1e] p-6 rounded-2xl border border-gray-100 dark:border-gray-800 shadow-sm",children:[a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2 text-brand-teal",children:[a.jsx(Sr,{size:18}),"Senaste hndelser"]}),a.jsxs("div",{className:"space-y-4",children:[(S=l==null?void 0:l.recentResults)==null?void 0:S.map(A=>{var T;return a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-brand-teal/10 rounded-full flex items-center justify-center text-brand-teal",children:a.jsx(gt,{size:14})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["Nytt resultat i ",a.jsx("span",{className:"font-bold",children:(T=A.course)==null?void 0:T.name})]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Betyg: ",A.grade,"  ",A.gradedAt?new Date(A.gradedAt).toLocaleDateString():"-"]})]})]},A.id)}),(!(l!=null&&l.recentResults)||l.recentResults.length===0)&&a.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Ingen recent aktivitet"})]})]})})]}):a.jsxs("div",{className:"text-center p-20 bg-gray-50 dark:bg-[#1a1c1e] rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-800 text-gray-500",children:[a.jsx(vt,{className:"mx-auto w-12 h-12 mb-4 opacity-50"}),"Inga barn lnkade till detta konto. Kontakta skolans administratr."]})]})},D_=({icon:t,title:e,value:r,subtitle:n,color:s})=>a.jsxs("div",{className:`p-5 rounded-2xl border ${s} shadow-sm bg-white dark:bg-opacity-5 transition-transform hover:scale-[1.02]`,children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-white dark:bg-gray-900 flex items-center justify-center mb-4 shadow-sm",children:t}),a.jsx("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:e}),a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:r}),a.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold",children:n})]}),rTe=()=>{const[t,e]=N.useState(null),[r,n]=N.useState(!0),s=Et();N.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0);const o=await O.analytics.predictive.getPrincipalCoach();e(o)}catch(o){console.error("Failed to fetch principal insight:",o)}finally{n(!1)}};return a.jsx(vo,{title:"AI Rektorscoach",icon:a.jsx(Ki,{size:20,className:"text-purple-500"}),subtitle:"Strategiska insikter fr skolledningen",children:a.jsx("div",{className:"space-y-4",children:r?a.jsx("div",{className:"flex items-center justify-center py-10",children:a.jsx(ft,{className:"animate-spin text-purple-500",size:24})}):t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/10 rounded-2xl border border-purple-100 dark:border-purple-900/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(va,{size:16,className:"text-purple-500"}),a.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider text-purple-600 dark:text-purple-400",children:["Veckans Fokus: ",t.priorityArea]})]}),a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 italic leading-relaxed",children:['"',t.summary,'"']})]}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-700",children:[a.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg text-emerald-600",children:a.jsx(Vi,{size:16})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-400 tracking-wider",children:"Rekommenderad tgrd"}),a.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white mt-0.5",children:t.actionPoint})]})]})}),a.jsx("div",{className:"pt-2 mt-auto",children:a.jsxs("button",{onClick:()=>s("/principal/management-reports"),className:"w-full flex items-center justify-center gap-2 py-3 text-xs font-black uppercase tracking-widest text-white bg-purple-600 hover:bg-purple-700 rounded-xl transition-all shadow-lg shadow-purple-200 dark:shadow-none",children:["ppna Ledningsrapport ",a.jsx(or,{size:14})]})})]}):a.jsx("div",{className:"text-center py-6",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Kunde inte hmta insikter."})})})})},nTe=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(!1);N.useEffect(()=>{o()},[]);const o=async()=>{n(!0);try{const c=await O.principal.quality.getGoals();e(c||[])}catch(c){console.error("Failed to fetch SKA goals:",c)}finally{n(!1)}},l=async c=>{i(!0);try{await O.principal.quality.calculateIndicators(c),await o()}catch(d){console.error("Failed to calculate indicators:",d)}finally{i(!1)}};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(sn,{className:"animate-spin text-indigo-500",size:32})}):a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("header",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-black text-gray-900 dark:text-white uppercase tracking-tighter flex items-center gap-2",children:[a.jsx(Vi,{className:"text-indigo-600"}),"Systematiskt Kvalitetsarbete 2.0"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Strategisk mluppfljning och kvalitetsindikatorer"})]}),a.jsxs("button",{className:"p-3 bg-indigo-600 text-white rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-500/20 flex items-center gap-2 font-bold text-sm",children:[a.jsx(jt,{size:18}),"Nytt Ml"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-[#1c1c1e] rounded-3xl border border-gray-100 dark:border-gray-800 p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(zt,{className:"text-purple-500",size:20}),"Kvalitets-rshjul"]}),a.jsx("div",{className:"relative aspect-square rounded-full border-4 border-dashed border-gray-100 dark:border-gray-800 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"block text-3xl font-black text-indigo-600",children:"FEB"}),a.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Analysfas"})]})})]}),a.jsx("div",{className:"lg:col-span-2 space-y-4",children:t.length===0?a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-3xl border border-gray-100 dark:border-gray-800 p-12 text-center",children:[a.jsx(Vi,{className:"mx-auto text-gray-300 mb-4",size:48}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Inga aktiva ml definierade."})]}):t.map(c=>a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-3xl border border-gray-100 dark:border-gray-800 p-6 hover:shadow-xl transition-all duration-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tighter",children:c.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:c.description})]}),a.jsx("button",{onClick:()=>l(c.id),disabled:s,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:a.jsx(sn,{size:18,className:`${s?"animate-spin":""} text-gray-400`})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(c.indicators||[]).map(d=>{var u;return a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#2c2c2e] rounded-2xl border border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xs font-black text-gray-500 uppercase tracking-widest",children:d.name}),a.jsx("div",{className:"flex items-center gap-1",children:d.currentValue>=d.targetValue?a.jsx(ci,{className:"text-green-500",size:14}):a.jsx(Sr,{className:"text-indigo-500",size:14})})]}),a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsxs("span",{className:"text-2xl font-black text-gray-900 dark:text-white",children:[(u=d.currentValue)==null?void 0:u.toFixed(1),d.unit]}),a.jsxs("span",{className:"text-xs text-gray-400 mb-1",children:["Ml: ",d.targetValue,d.unit]})]}),a.jsx("div",{className:"mt-3 h-1.5 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${d.currentValue>=d.targetValue?"bg-green-500":"bg-indigo-600"}`,style:{width:`${Math.min(100,d.currentValue/d.targetValue*100)}%`}})})]},d.id)})})]},c.id))})]})]})},yW=()=>{const{currentUser:t}=At(),e=Et(),[r,n]=N.useState(null),[s,i]=N.useState(null),[o,l]=N.useState(!0),[c,d]=N.useState(null),[u,h]=N.useState("intel");N.useEffect(()=>{f();const y=setInterval(f,6e4);return()=>clearInterval(y)},[]);const f=async()=>{try{const[y,w]=await Promise.all([O.principal.dashboard.getMetrics(),O.get("/reports")]);n(y),w&&w.length>0&&i(w[0])}catch(y){console.error(y)}finally{l(!1)}};if(o&&!r)return a.jsx("div",{className:"p-20 flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});const g=[{id:"attendance",title:"Nrvaro idag",value:`${(r==null?void 0:r.attendancePercentage)??0}%`,sub:`${(r==null?void 0:r.presentCount)??0}/${(r==null?void 0:r.totalAttendanceExpected)??0} elever`,trend:"Live nrvaro",icon:vt,color:((r==null?void 0:r.attendancePercentage)??0)>90?"green":"red",drillData:"Lista risk-elever"},{id:"alerts",title:"Kritiska alerts",value:((r==null?void 0:r.activeIncidents)??0)+((r==null?void 0:r.unmannedLessons)??0),sub:`${(r==null?void 0:r.activeIncidents)??0} incidenter, ${(r==null?void 0:r.unmannedLessons)??0} obemannade`,trend:"Prioriterad tgrd",icon:gd,color:((r==null?void 0:r.activeIncidents)??0)>0?"red":"green",drillData:"rendeversikt"},{id:"knowledge",title:"Kunskapsstatus",value:`${(r==null?void 0:r.gradingProgressPercentage)??0}%`,sub:`${(r==null?void 0:r.npRiskCount)??0} NP-risk`,trend:"Total progression",icon:_d,color:"blue",drillData:"Progression per klass"},{id:"staff",title:"Personal-status",value:`${(r==null?void 0:r.staffManningPercentage)??0}%`,sub:`${(r==null?void 0:r.sickStaffCount)??0} sjuka / frnvarande`,trend:"Daglig bemanning",icon:dw,color:"green",drillData:"Frnvarolista"},{id:"grading",title:"Betygstrender",value:`${(r==null?void 0:r.gradesACPercentage)??0}%`,sub:"A-C frdelning",trend:"Aggregerat resultat",icon:Sr,color:"orange",drillData:"Resultatuppfljning"},{id:"health",title:"Elevhlsa",value:(r==null?void 0:r.openHealthCases)??0,sub:"ppna EHT-renden",trend:"Aktiva utredningar",icon:Lr,color:"red",drillData:"EHT Dashboard"},{id:"engagement",title:"Engagemang",value:(r==null?void 0:r.avgLoginsPerDay)??0,sub:"Snitt logins/dag",trend:"Systemaktivitet",icon:Q2,color:"indigo",drillData:"Aktivitetslogg"},{id:"economy",title:"Ekonomi/Avgifter",value:`${(r==null?void 0:r.paymentPercentage)??0}%`,sub:`${(r==null?void 0:r.unpaidFeesCount)??0} obetalda`,trend:"Faktureringsstatus",icon:hg,color:"emerald",drillData:"Ekonomiversikt"}],x=[{id:"intel",label:"Quick Intel",icon:hs},{id:"ska",label:"Kvalitetsarbete (SKA)",icon:Vi},{id:"kpi",label:"Key Metrics",icon:Sr}],m=[{label:"Massmeddelande",icon:er,color:"indigo",action:()=>e("/principal/tools")},{label:"Ny incident",icon:jt,color:"orange",action:()=>e("/principal/quality")},{label:"Vikarie",icon:Ji,color:"emerald",action:()=>e("/principal/staffing")},{label:"Risk-lista",icon:gd,color:"red",action:()=>e("/principal/reports")},{label:"Ledningsrapport",icon:Sr,color:"blue",action:()=>e("/principal/management-reports")},{label:"Arkiv",icon:xt,color:"indigo",action:()=>e("/principal/reports")},{label:"Kalender",icon:zt,color:"amber",action:()=>e("/calendar")}],p=y=>{if(!y)return"??";const w=y.split(" ");return w.length===1?y.substring(0,2).toUpperCase():(w[0][0]+w[w.length-1][0]).toUpperCase()},b=y=>{const w=new Date;return w.setDate(w.getDate()-(6-y)),w.toLocaleDateString("sv-SE",{day:"numeric",month:"short"})},v=()=>{const y=new Date;y.setHours(0,0,0,0),y.setDate(y.getDate()+4-(y.getDay()||7));const w=new Date(y.getFullYear(),0,1);return Math.ceil(((y-w)/864e5+1)/7)};return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0c0c0e] p-6 lg:p-8 space-y-8 animate-in fade-in duration-700",children:[a.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-white dark:bg-[#1c1c1e] p-3 rounded-2xl shadow-sm",children:a.jsx(d5,{className:"text-blue-500",size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"EduFlex Mission Control"}),a.jsxs("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[new Date().toLocaleDateString("sv-SE",{weekday:"long",day:"numeric",month:"short"}),"  ",a.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-ping"})," Live System"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative group",children:[a.jsx(gr,{className:"absolute left-3 top-2.5 text-gray-400 group-focus-within:text-indigo-500 transition-colors",size:18}),a.jsx("input",{placeholder:"Sk elev, personal eller kurs...",className:"bg-white dark:bg-[#1c1c1e] border-none rounded-xl pl-10 pr-4 py-2.5 text-sm w-64 lg:w-96 shadow-sm focus:ring-2 focus:ring-indigo-500 transition-all font-medium"})]}),a.jsxs("button",{className:"p-2.5 bg-white dark:bg-[#1c1c1e] text-gray-500 rounded-xl shadow-sm hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors relative",children:[a.jsx(hh,{size:20}),a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-[#1c1c1e]"})]}),a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-600 flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-indigo-200 cursor-pointer overflow-hidden",children:p(t==null?void 0:t.fullName)})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 bg-indigo-600/5 dark:bg-indigo-400/5 border border-indigo-100 dark:border-indigo-900/30 p-2 rounded-2xl px-6",children:[a.jsx("p",{className:"text-[10px] font-black text-indigo-600 dark:text-indigo-400 uppercase tracking-[0.2em]",children:"System Intelligence"}),a.jsx("div",{className:"h-4 w-px bg-indigo-200 dark:bg-indigo-800 mx-2 hidden md:block"}),a.jsxs("div",{className:"flex items-center gap-6 overflow-x-auto no-scrollbar py-2",children:[a.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:"Totalt antal elever:"}),a.jsx("span",{className:"text-sm font-black text-gray-900 dark:text-white",children:(r==null?void 0:r.totalStudents)??0})]}),a.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:"Senaste Rapport:"}),a.jsx("span",{className:`text-sm font-black ${s?"text-indigo-600":"text-amber-500"}`,children:s?s.title:"Ingen skapad"})]}),a.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap text-[10px] font-bold text-emerald-500 uppercase tracking-wider",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"}),"Datasync OK"]})]})]}),a.jsx("div",{className:"flex items-center gap-4 border-b border-gray-200 dark:border-gray-800 pb-4 overflow-x-auto no-scrollbar",children:x.map(y=>a.jsxs("button",{onClick:()=>h(y.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all duration-200
                            ${u===y.id?"bg-indigo-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[a.jsx(y.icon,{size:18}),y.label]},y.id))}),a.jsxs("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(u==="intel"||u==="kpi")&&a.jsx("div",{className:"lg:col-span-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-in slide-in-from-bottom-4 duration-700",children:g.map(y=>a.jsxs("div",{onClick:()=>d(c===y.id?null:y.id),className:`bg-white dark:bg-[#1c1c1e] p-6 rounded-[2rem] border border-gray-100 dark:border-gray-800 shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer group relative overflow-hidden ${c===y.id?"ring-2 ring-indigo-500 shadow-indigo-100":""}`,children:[a.jsx("div",{className:`absolute -right-4 -bottom-4 opacity-[0.03] group-hover:scale-125 transition-transform text-current text-${y.color}-500`,children:a.jsx(y.icon,{size:120})}),a.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[a.jsx("div",{className:`p-3 rounded-2xl bg-${y.color}-50 dark:bg-${y.color}-900/10 text-${y.color}-600 dark:text-${y.color}-400 group-hover:scale-110 transition-transform`,children:a.jsx(y.icon,{size:22})}),a.jsx("button",{className:"text-gray-300 hover:text-gray-500 transition-colors",children:a.jsx(u5,{size:20})})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h3",{className:"text-4xl font-black text-gray-900 dark:text-white tracking-tighter mb-1",children:y.value}),a.jsx("p",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:y.title}),a.jsxs("div",{className:"mt-6 space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200",children:y.sub}),y.id==="attendance"&&a.jsx(rK,{size:16,className:"text-emerald-500"}),y.id==="knowledge"&&a.jsx(Hfe,{size:16,className:"text-red-500"})]}),a.jsx("p",{className:"text-[10px] font-bold text-gray-400",children:y.trend})]})]}),c===y.id&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/20 -mx-6 -mb-6 p-6 animate-in slide-in-from-top-4 duration-300",children:[a.jsx("p",{className:"text-xs font-bold text-indigo-600 mb-2 uppercase tracking-wider",children:"Expandrad vy"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs py-1 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"text-gray-500",children:y.drillData}),a.jsx("button",{onClick:w=>{w.stopPropagation(),y.id==="alerts"&&e("/principal/quality"),y.id==="staff"&&e("/principal/staffing"),y.id==="economy"&&e("/principal/reports"),y.id==="knowledge"&&e("/principal/reports")},className:"font-bold text-indigo-600 hover:scale-105 transition-transform",children:"ppna Modul"})]}),a.jsxs("div",{className:"flex justify-between text-xs py-1 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"text-gray-500",children:"Senaste uppdatering"}),a.jsx("span",{className:"font-bold",children:"Realtid"})]})]})]})]},y.id))}),u==="ska"&&a.jsx("div",{className:"lg:col-span-4",children:a.jsx(nTe,{})})]}),a.jsxs("footer",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-[#1c1c1e] rounded-[2.5rem] border border-gray-100 dark:border-gray-800 p-8 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white",children:"Trend-analys"}),a.jsxs("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest",children:["Vecka ",v(),"  Jmfrande data"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"px-3 py-1.5 bg-gray-50 dark:bg-gray-800 text-xs font-bold rounded-lg hover:bg-gray-100",children:"Dag"}),a.jsx("button",{className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-bold rounded-lg",children:"Vecka"}),a.jsx("button",{className:"px-3 py-1.5 bg-gray-50 dark:bg-gray-800 text-xs font-bold rounded-lg hover:bg-gray-100",children:"Mnad"})]})]}),a.jsx("div",{className:"h-64 flex items-end gap-4 px-4 overflow-x-auto no-scrollbar",children:r!=null&&r.trendData?r.trendData.map((y,w)=>a.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group min-w-[20px]",children:[a.jsx("div",{className:"w-full relative bg-gray-50 dark:bg-gray-800/50 rounded-full overflow-hidden h-48",children:a.jsx("div",{style:{height:`${y}%`},className:`absolute bottom-0 w-full rounded-full transition-all duration-1000 group-hover:opacity-80
                                            ${y>80?"bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.3)]":y>60?"bg-indigo-500":"bg-orange-500"}
                                        `})}),a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:b(w)})]},w)):a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400 opacity-50 space-y-2",children:[a.jsx(Sr,{size:48,className:"animate-pulse"}),a.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:"Samlar in Trenddata..."})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(rTe,{}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:m.map((y,w)=>a.jsxs("button",{onClick:y.action,className:"bg-white dark:bg-[#1c1c1e] p-4 rounded-3xl border border-gray-100 dark:border-gray-800 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex flex-col items-center justify-center gap-3 group",children:[a.jsx("div",{className:`p-4 rounded-2xl bg-${y.color}-50 dark:bg-${y.color}-900/10 text-${y.color}-600 dark:text-${y.color}-400 group-hover:scale-110 transition-transform`,children:a.jsx(y.icon,{size:24})}),a.jsx("span",{className:"text-xs font-black text-gray-900 dark:text-white uppercase tracking-tighter",children:y.label})]},w))})]})]}),(r==null?void 0:r.activeIncidents)>0&&a.jsxs("div",{className:"fixed bottom-8 left-72 p-4 bg-red-600 text-white rounded-2xl shadow-2xl flex items-center gap-4 animate-bounce hover:animate-none cursor-pointer z-[100]",children:[a.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:a.jsx(gd,{size:20})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-black uppercase tracking-widest",children:"Kritisk Alert"}),a.jsxs("p",{className:"text-sm font-medium",children:[r==null?void 0:r.activeIncidents," incidenter krver tillsyn"]})]})]})]})};function vW(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=vW(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Pt(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=vW(t))&&(n&&(n+=" "),n+=e);return n}var aTe=Array.isArray,ms=aTe,sTe=typeof Fe=="object"&&Fe&&Fe.Object===Object&&Fe,kW=sTe,iTe=kW,oTe=typeof self=="object"&&self&&self.Object===Object&&self,lTe=iTe||oTe||Function("return this")(),cl=lTe,cTe=cl,dTe=cTe.Symbol,Lb=dTe,C8=Lb,wW=Object.prototype,uTe=wW.hasOwnProperty,hTe=wW.toString,lp=C8?C8.toStringTag:void 0;function fTe(t){var e=uTe.call(t,lp),r=t[lp];try{t[lp]=void 0;var n=!0}catch{}var s=hTe.call(t);return n&&(e?t[lp]=r:delete t[lp]),s}var gTe=fTe,mTe=Object.prototype,pTe=mTe.toString;function xTe(t){return pTe.call(t)}var bTe=xTe,T8=Lb,yTe=gTe,vTe=bTe,kTe="[object Null]",wTe="[object Undefined]",O8=T8?T8.toStringTag:void 0;function jTe(t){return t==null?t===void 0?wTe:kTe:O8&&O8 in Object(t)?yTe(t):vTe(t)}var xc=jTe;function NTe(t){return t!=null&&typeof t=="object"}var bc=NTe,_Te=xc,STe=bc,ATe="[object Symbol]";function ETe(t){return typeof t=="symbol"||STe(t)&&_Te(t)==ATe}var km=ETe,CTe=ms,TTe=km,OTe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ITe=/^\w*$/;function DTe(t,e){if(CTe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||TTe(t)?!0:ITe.test(t)||!OTe.test(t)||e!=null&&t in Object(e)}var QT=DTe;function MTe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Bd=MTe;const wm=Vt(Bd);var LTe=xc,RTe=Bd,PTe="[object AsyncFunction]",zTe="[object Function]",$Te="[object GeneratorFunction]",FTe="[object Proxy]";function BTe(t){if(!RTe(t))return!1;var e=LTe(t);return e==zTe||e==$Te||e==PTe||e==FTe}var JT=BTe;const St=Vt(JT);var UTe=cl,KTe=UTe["__core-js_shared__"],GTe=KTe,M_=GTe,I8=function(){var t=/[^.]+$/.exec(M_&&M_.keys&&M_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function qTe(t){return!!I8&&I8 in t}var VTe=qTe,HTe=Function.prototype,WTe=HTe.toString;function XTe(t){if(t!=null){try{return WTe.call(t)}catch{}try{return t+""}catch{}}return""}var jW=XTe,YTe=JT,ZTe=VTe,QTe=Bd,JTe=jW,eOe=/[\\^$.*+?()[\]{}|]/g,tOe=/^\[object .+?Constructor\]$/,rOe=Function.prototype,nOe=Object.prototype,aOe=rOe.toString,sOe=nOe.hasOwnProperty,iOe=RegExp("^"+aOe.call(sOe).replace(eOe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oOe(t){if(!QTe(t)||ZTe(t))return!1;var e=YTe(t)?iOe:tOe;return e.test(JTe(t))}var lOe=oOe;function cOe(t,e){return t==null?void 0:t[e]}var dOe=cOe,uOe=lOe,hOe=dOe;function fOe(t,e){var r=hOe(t,e);return uOe(r)?r:void 0}var Sh=fOe,gOe=Sh,mOe=gOe(Object,"create"),Uw=mOe,D8=Uw;function pOe(){this.__data__=D8?D8(null):{},this.size=0}var xOe=pOe;function bOe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var yOe=bOe,vOe=Uw,kOe="__lodash_hash_undefined__",wOe=Object.prototype,jOe=wOe.hasOwnProperty;function NOe(t){var e=this.__data__;if(vOe){var r=e[t];return r===kOe?void 0:r}return jOe.call(e,t)?e[t]:void 0}var _Oe=NOe,SOe=Uw,AOe=Object.prototype,EOe=AOe.hasOwnProperty;function COe(t){var e=this.__data__;return SOe?e[t]!==void 0:EOe.call(e,t)}var TOe=COe,OOe=Uw,IOe="__lodash_hash_undefined__";function DOe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=OOe&&e===void 0?IOe:e,this}var MOe=DOe,LOe=xOe,ROe=yOe,POe=_Oe,zOe=TOe,$Oe=MOe;function jm(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}jm.prototype.clear=LOe;jm.prototype.delete=ROe;jm.prototype.get=POe;jm.prototype.has=zOe;jm.prototype.set=$Oe;var FOe=jm;function BOe(){this.__data__=[],this.size=0}var UOe=BOe;function KOe(t,e){return t===e||t!==t&&e!==e}var eO=KOe,GOe=eO;function qOe(t,e){for(var r=t.length;r--;)if(GOe(t[r][0],e))return r;return-1}var Kw=qOe,VOe=Kw,HOe=Array.prototype,WOe=HOe.splice;function XOe(t){var e=this.__data__,r=VOe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():WOe.call(e,r,1),--this.size,!0}var YOe=XOe,ZOe=Kw;function QOe(t){var e=this.__data__,r=ZOe(e,t);return r<0?void 0:e[r][1]}var JOe=QOe,eIe=Kw;function tIe(t){return eIe(this.__data__,t)>-1}var rIe=tIe,nIe=Kw;function aIe(t,e){var r=this.__data__,n=nIe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var sIe=aIe,iIe=UOe,oIe=YOe,lIe=JOe,cIe=rIe,dIe=sIe;function Nm(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Nm.prototype.clear=iIe;Nm.prototype.delete=oIe;Nm.prototype.get=lIe;Nm.prototype.has=cIe;Nm.prototype.set=dIe;var Gw=Nm,uIe=Sh,hIe=cl,fIe=uIe(hIe,"Map"),tO=fIe,M8=FOe,gIe=Gw,mIe=tO;function pIe(){this.size=0,this.__data__={hash:new M8,map:new(mIe||gIe),string:new M8}}var xIe=pIe;function bIe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var yIe=bIe,vIe=yIe;function kIe(t,e){var r=t.__data__;return vIe(e)?r[typeof e=="string"?"string":"hash"]:r.map}var qw=kIe,wIe=qw;function jIe(t){var e=wIe(this,t).delete(t);return this.size-=e?1:0,e}var NIe=jIe,_Ie=qw;function SIe(t){return _Ie(this,t).get(t)}var AIe=SIe,EIe=qw;function CIe(t){return EIe(this,t).has(t)}var TIe=CIe,OIe=qw;function IIe(t,e){var r=OIe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var DIe=IIe,MIe=xIe,LIe=NIe,RIe=AIe,PIe=TIe,zIe=DIe;function _m(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_m.prototype.clear=MIe;_m.prototype.delete=LIe;_m.prototype.get=RIe;_m.prototype.has=PIe;_m.prototype.set=zIe;var rO=_m,NW=rO,$Ie="Expected a function";function nO(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError($Ie);var r=function(){var n=arguments,s=e?e.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=t.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(nO.Cache||NW),r}nO.Cache=NW;var _W=nO;const FIe=Vt(_W);var BIe=_W,UIe=500;function KIe(t){var e=BIe(t,function(n){return r.size===UIe&&r.clear(),n}),r=e.cache;return e}var GIe=KIe,qIe=GIe,VIe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,HIe=/\\(\\)?/g,WIe=qIe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(VIe,function(r,n,s,i){e.push(s?i.replace(HIe,"$1"):n||r)}),e}),XIe=WIe;function YIe(t,e){for(var r=-1,n=t==null?0:t.length,s=Array(n);++r<n;)s[r]=e(t[r],r,t);return s}var aO=YIe,L8=Lb,ZIe=aO,QIe=ms,JIe=km,R8=L8?L8.prototype:void 0,P8=R8?R8.toString:void 0;function SW(t){if(typeof t=="string")return t;if(QIe(t))return ZIe(t,SW)+"";if(JIe(t))return P8?P8.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var e6e=SW,t6e=e6e;function r6e(t){return t==null?"":t6e(t)}var AW=r6e,n6e=ms,a6e=QT,s6e=XIe,i6e=AW;function o6e(t,e){return n6e(t)?t:a6e(t,e)?[t]:s6e(i6e(t))}var EW=o6e,l6e=km;function c6e(t){if(typeof t=="string"||l6e(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Vw=c6e,d6e=EW,u6e=Vw;function h6e(t,e){e=d6e(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[u6e(e[r++])];return r&&r==n?t:void 0}var sO=h6e,f6e=sO;function g6e(t,e,r){var n=t==null?void 0:f6e(t,e);return n===void 0?r:n}var CW=g6e;const $s=Vt(CW);function m6e(t){return t==null}var p6e=m6e;const Dt=Vt(p6e);var x6e=xc,b6e=ms,y6e=bc,v6e="[object String]";function k6e(t){return typeof t=="string"||!b6e(t)&&y6e(t)&&x6e(t)==v6e}var w6e=k6e;const Zu=Vt(w6e);var TW={exports:{}},Cr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iO=Symbol.for("react.element"),oO=Symbol.for("react.portal"),Hw=Symbol.for("react.fragment"),Ww=Symbol.for("react.strict_mode"),Xw=Symbol.for("react.profiler"),Yw=Symbol.for("react.provider"),Zw=Symbol.for("react.context"),j6e=Symbol.for("react.server_context"),Qw=Symbol.for("react.forward_ref"),Jw=Symbol.for("react.suspense"),ej=Symbol.for("react.suspense_list"),tj=Symbol.for("react.memo"),rj=Symbol.for("react.lazy"),N6e=Symbol.for("react.offscreen"),OW;OW=Symbol.for("react.module.reference");function Ni(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case iO:switch(t=t.type,t){case Hw:case Xw:case Ww:case Jw:case ej:return t;default:switch(t=t&&t.$$typeof,t){case j6e:case Zw:case Qw:case rj:case tj:case Yw:return t;default:return e}}case oO:return e}}}Cr.ContextConsumer=Zw;Cr.ContextProvider=Yw;Cr.Element=iO;Cr.ForwardRef=Qw;Cr.Fragment=Hw;Cr.Lazy=rj;Cr.Memo=tj;Cr.Portal=oO;Cr.Profiler=Xw;Cr.StrictMode=Ww;Cr.Suspense=Jw;Cr.SuspenseList=ej;Cr.isAsyncMode=function(){return!1};Cr.isConcurrentMode=function(){return!1};Cr.isContextConsumer=function(t){return Ni(t)===Zw};Cr.isContextProvider=function(t){return Ni(t)===Yw};Cr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===iO};Cr.isForwardRef=function(t){return Ni(t)===Qw};Cr.isFragment=function(t){return Ni(t)===Hw};Cr.isLazy=function(t){return Ni(t)===rj};Cr.isMemo=function(t){return Ni(t)===tj};Cr.isPortal=function(t){return Ni(t)===oO};Cr.isProfiler=function(t){return Ni(t)===Xw};Cr.isStrictMode=function(t){return Ni(t)===Ww};Cr.isSuspense=function(t){return Ni(t)===Jw};Cr.isSuspenseList=function(t){return Ni(t)===ej};Cr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Hw||t===Xw||t===Ww||t===Jw||t===ej||t===N6e||typeof t=="object"&&t!==null&&(t.$$typeof===rj||t.$$typeof===tj||t.$$typeof===Yw||t.$$typeof===Zw||t.$$typeof===Qw||t.$$typeof===OW||t.getModuleId!==void 0)};Cr.typeOf=Ni;TW.exports=Cr;var _6e=TW.exports,S6e=xc,A6e=bc,E6e="[object Number]";function C6e(t){return typeof t=="number"||A6e(t)&&S6e(t)==E6e}var IW=C6e;const T6e=Vt(IW);var O6e=IW;function I6e(t){return O6e(t)&&t!=+t}var D6e=I6e;const Sm=Vt(D6e);var Ka=function(e){return e===0?0:e>0?1:-1},yu=function(e){return Zu(e)&&e.indexOf("%")===e.length-1},Ve=function(e){return T6e(e)&&!Sm(e)},M6e=function(e){return Dt(e)},Wn=function(e){return Ve(e)||Zu(e)},L6e=0,Ah=function(e){var r=++L6e;return"".concat(e||"").concat(r)},Ga=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ve(e)&&!Zu(e))return n;var i;if(yu(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return Sm(i)&&(i=n),s&&i>r&&(i=r),i},Bc=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},R6e=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},s=0;s<r;s++)if(!n[e[s]])n[e[s]]=!0;else return!0;return!1},Vn=function(e,r){return Ve(e)&&Ve(r)?function(n){return e+n*(r-e)}:function(){return r}};function nk(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):$s(n,e))===r})}var P6e=function(e,r){return Ve(e)&&Ve(r)?e-r:Zu(e)&&Zu(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Xf(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function lE(t){"@babel/helpers - typeof";return lE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lE(t)}var z6e=["viewBox","children"],$6e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],z8=["points","pathLength"],L_={svg:z6e,polygon:z8,polyline:z8},lO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ak=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(N.isValidElement(e)&&(n=e.props),!wm(n))return null;var s={};return Object.keys(n).forEach(function(i){lO.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},F6e=function(e,r,n){return function(s){return e(r,n,s),null}},Qu=function(e,r,n){if(!wm(e)||lE(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(i){var o=e[i];lO.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=F6e(o,r,n))}),s},B6e=["children"],U6e=["children"];function $8(t,e){if(t==null)return{};var r=K6e(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function K6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function cE(t){"@babel/helpers - typeof";return cE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cE(t)}var F8={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},B8=null,R_=null,cO=function t(e){if(e===B8&&Array.isArray(R_))return R_;var r=[];return N.Children.forEach(e,function(n){Dt(n)||(_6e.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),R_=r,B8=e,r};function Fs(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(s){return Fl(s)}):n=[Fl(e)],cO(t).forEach(function(s){var i=$s(s,"type.displayName")||$s(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function Ns(t,e){var r=Fs(t,e);return r&&r[0]}var U8=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,s=r.height;return!(!Ve(n)||n<=0||!Ve(s)||s<=0)},G6e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],q6e=function(e){return e&&e.type&&Zu(e.type)&&G6e.indexOf(e.type)>=0},DW=function(e){return e&&cE(e)==="object"&&"clipDot"in e},V6e=function(e,r,n,s){var i,o=(i=L_==null?void 0:L_[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!St(e)&&(s&&o.includes(r)||$6e.includes(r))||n&&lO.includes(r)},bt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(N.isValidElement(e)&&(s=e.props),!wm(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;V6e((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},dE=function t(e,r){if(e===r)return!0;var n=N.Children.count(e);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return K8(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=e[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!K8(i,o))return!1}return!0},K8=function(e,r){if(Dt(e)&&Dt(r))return!0;if(!Dt(e)&&!Dt(r)){var n=e.props||{},s=n.children,i=$8(n,B6e),o=r.props||{},l=o.children,c=$8(o,U6e);return s&&l?Xf(i,c)&&dE(s,l):!s&&!l?Xf(i,c):!1}return!1},G8=function(e,r){var n=[],s={};return cO(e).forEach(function(i,o){if(q6e(i))n.push(i);else if(i){var l=Fl(i.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!s[l])){var h=d(i,l,o);n.push(h),s[l]=!0}}}),n},H6e=function(e){var r=e&&e.type;return r&&F8[r]?F8[r]:null},W6e=function(e,r){return cO(r).indexOf(e)},X6e=["children","width","height","viewBox","className","style","title","desc"];function uE(){return uE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uE.apply(this,arguments)}function Y6e(t,e){if(t==null)return{};var r=Z6e(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Z6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function hE(t){var e=t.children,r=t.width,n=t.height,s=t.viewBox,i=t.className,o=t.style,l=t.title,c=t.desc,d=Y6e(t,X6e),u=s||{width:r,height:n,x:0,y:0},h=Pt("recharts-surface",i);return ae.createElement("svg",uE({},bt(d,!0,"svg"),{className:h,width:r,height:n,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ae.createElement("title",null,l),ae.createElement("desc",null,c),e)}var Q6e=["children","className"];function fE(){return fE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fE.apply(this,arguments)}function J6e(t,e){if(t==null)return{};var r=eDe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function eDe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Jt=ae.forwardRef(function(t,e){var r=t.children,n=t.className,s=J6e(t,Q6e),i=Pt("recharts-layer",n);return ae.createElement("g",fE({className:i},bt(s,!0),{ref:e}),r)}),Wi=function(e,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function tDe(t,e,r){var n=-1,s=t.length;e<0&&(e=-e>s?0:s+e),r=r>s?s:r,r<0&&(r+=s),s=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(s);++n<s;)i[n]=t[n+e];return i}var rDe=tDe,nDe=rDe;function aDe(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:nDe(t,e,r)}var sDe=aDe,iDe="\\ud800-\\udfff",oDe="\\u0300-\\u036f",lDe="\\ufe20-\\ufe2f",cDe="\\u20d0-\\u20ff",dDe=oDe+lDe+cDe,uDe="\\ufe0e\\ufe0f",hDe="\\u200d",fDe=RegExp("["+hDe+iDe+dDe+uDe+"]");function gDe(t){return fDe.test(t)}var MW=gDe;function mDe(t){return t.split("")}var pDe=mDe,LW="\\ud800-\\udfff",xDe="\\u0300-\\u036f",bDe="\\ufe20-\\ufe2f",yDe="\\u20d0-\\u20ff",vDe=xDe+bDe+yDe,kDe="\\ufe0e\\ufe0f",wDe="["+LW+"]",gE="["+vDe+"]",mE="\\ud83c[\\udffb-\\udfff]",jDe="(?:"+gE+"|"+mE+")",RW="[^"+LW+"]",PW="(?:\\ud83c[\\udde6-\\uddff]){2}",zW="[\\ud800-\\udbff][\\udc00-\\udfff]",NDe="\\u200d",$W=jDe+"?",FW="["+kDe+"]?",_De="(?:"+NDe+"(?:"+[RW,PW,zW].join("|")+")"+FW+$W+")*",SDe=FW+$W+_De,ADe="(?:"+[RW+gE+"?",gE,PW,zW,wDe].join("|")+")",EDe=RegExp(mE+"(?="+mE+")|"+ADe+SDe,"g");function CDe(t){return t.match(EDe)||[]}var TDe=CDe,ODe=pDe,IDe=MW,DDe=TDe;function MDe(t){return IDe(t)?DDe(t):ODe(t)}var LDe=MDe,RDe=sDe,PDe=MW,zDe=LDe,$De=AW;function FDe(t){return function(e){e=$De(e);var r=PDe(e)?zDe(e):void 0,n=r?r[0]:e.charAt(0),s=r?RDe(r,1).join(""):e.slice(1);return n[t]()+s}}var BDe=FDe,UDe=BDe,KDe=UDe("toUpperCase"),GDe=KDe;const nj=Vt(GDe);function Kr(t){return function(){return t}}const BW=Math.cos,sk=Math.sin,ho=Math.sqrt,ik=Math.PI,aj=2*ik,pE=Math.PI,xE=2*pE,du=1e-6,qDe=xE-du;function UW(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function VDe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return UW;const r=10**e;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}let HDe=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?UW:VDe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,s){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(e,r,n,s,i,o){this._append`C${+e},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,s,i){if(e=+e,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-e,d=s-r,u=o-e,h=l-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>du)if(!(Math.abs(h*c-d*u)>du)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let g=n-o,x=s-l,m=c*c+d*d,p=g*g+x*x,b=Math.sqrt(m),v=Math.sqrt(f),y=i*Math.tan((pE-Math.acos((m+f-p)/(2*b*v)))/2),w=y/v,k=y/b;Math.abs(w-1)>du&&this._append`L${e+w*u},${r+w*h}`,this._append`A${i},${i},0,0,${+(h*g>u*x)},${this._x1=e+k*c},${this._y1=r+k*d}`}}arc(e,r,n,s,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),d=e+l,u=r+c,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>du||Math.abs(this._y1-u)>du)&&this._append`L${d},${u}`,n&&(f<0&&(f=f%xE+xE),f>qDe?this._append`A${n},${n},0,1,${h},${e-l},${r-c}A${n},${n},0,1,${h},${this._x1=d},${this._y1=u}`:f>du&&this._append`A${n},${n},0,${+(f>=pE)},${h},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}};function dO(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new HDe(e)}function uO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function KW(t){this._context=t}KW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function sj(t){return new KW(t)}function GW(t){return t[0]}function qW(t){return t[1]}function VW(t,e){var r=Kr(!0),n=null,s=sj,i=null,o=dO(l);t=typeof t=="function"?t:t===void 0?GW:Kr(t),e=typeof e=="function"?e:e===void 0?qW:Kr(e);function l(c){var d,u=(c=uO(c)).length,h,f=!1,g;for(n==null&&(i=s(g=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(h,d,c),+e(h,d,c));if(g)return i=null,g+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Kr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Kr(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Kr(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Ky(t,e,r){var n=null,s=Kr(!0),i=null,o=sj,l=null,c=dO(d);t=typeof t=="function"?t:t===void 0?GW:Kr(+t),e=typeof e=="function"?e:Kr(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?qW:Kr(+r);function d(h){var f,g,x,m=(h=uO(h)).length,p,b=!1,v,y=new Array(m),w=new Array(m);for(i==null&&(l=o(v=c())),f=0;f<=m;++f){if(!(f<m&&s(p=h[f],f,h))===b)if(b=!b)g=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=f-1;x>=g;--x)l.point(y[x],w[x]);l.lineEnd(),l.areaEnd()}b&&(y[f]=+t(p,f,h),w[f]=+e(p,f,h),l.point(n?+n(p,f,h):y[f],r?+r(p,f,h):w[f]))}if(v)return l=null,v+""||null}function u(){return VW().defined(s).curve(o).context(i)}return d.x=function(h){return arguments.length?(t=typeof h=="function"?h:Kr(+h),n=null,d):t},d.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Kr(+h),d):t},d.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Kr(+h),d):n},d.y=function(h){return arguments.length?(e=typeof h=="function"?h:Kr(+h),r=null,d):e},d.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Kr(+h),d):e},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Kr(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(t).y(e)},d.lineY1=function(){return u().x(t).y(r)},d.lineX1=function(){return u().x(n).y(e)},d.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Kr(!!h),d):s},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class HW{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function WDe(t){return new HW(t,!0)}function XDe(t){return new HW(t,!1)}const hO={draw(t,e){const r=ho(e/ik);t.moveTo(r,0),t.arc(0,0,r,0,aj)}},YDe={draw(t,e){const r=ho(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},WW=ho(1/3),ZDe=WW*2,QDe={draw(t,e){const r=ho(e/ZDe),n=r*WW;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},JDe={draw(t,e){const r=ho(e),n=-r/2;t.rect(n,n,r,r)}},eMe=.8908130915292852,XW=sk(ik/10)/sk(7*ik/10),tMe=sk(aj/10)*XW,rMe=-BW(aj/10)*XW,nMe={draw(t,e){const r=ho(e*eMe),n=tMe*r,s=rMe*r;t.moveTo(0,-r),t.lineTo(n,s);for(let i=1;i<5;++i){const o=aj*i/5,l=BW(o),c=sk(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*s,c*n+l*s)}t.closePath()}},P_=ho(3),aMe={draw(t,e){const r=-ho(e/(P_*3));t.moveTo(0,r*2),t.lineTo(-P_*r,-r),t.lineTo(P_*r,-r),t.closePath()}},qs=-.5,Vs=ho(3)/2,bE=1/ho(12),sMe=(bE/2+1)*3,iMe={draw(t,e){const r=ho(e/sMe),n=r/2,s=r*bE,i=n,o=r*bE+r,l=-i,c=o;t.moveTo(n,s),t.lineTo(i,o),t.lineTo(l,c),t.lineTo(qs*n-Vs*s,Vs*n+qs*s),t.lineTo(qs*i-Vs*o,Vs*i+qs*o),t.lineTo(qs*l-Vs*c,Vs*l+qs*c),t.lineTo(qs*n+Vs*s,qs*s-Vs*n),t.lineTo(qs*i+Vs*o,qs*o-Vs*i),t.lineTo(qs*l+Vs*c,qs*c-Vs*l),t.closePath()}};function oMe(t,e){let r=null,n=dO(s);t=typeof t=="function"?t:Kr(t||hO),e=typeof e=="function"?e:Kr(e===void 0?64:+e);function s(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Kr(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Kr(+i),s):e},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function ok(){}function lk(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function YW(t){this._context=t}YW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lMe(t){return new YW(t)}function ZW(t){this._context=t}ZW.prototype={areaStart:ok,areaEnd:ok,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:lk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function cMe(t){return new ZW(t)}function QW(t){this._context=t}QW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:lk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dMe(t){return new QW(t)}function JW(t){this._context=t}JW.prototype={areaStart:ok,areaEnd:ok,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function uMe(t){return new JW(t)}function q8(t){return t<0?-1:1}function V8(t,e,r){var n=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(n||s<0&&-0),o=(r-t._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(q8(i)+q8(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function H8(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function z_(t,e,r){var n=t._x0,s=t._y0,i=t._x1,o=t._y1,l=(i-n)/3;t._context.bezierCurveTo(n+l,s+l*e,i-l,o-l*r,i,o)}function ck(t){this._context=t}ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:z_(this,this._t0,H8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,z_(this,H8(this,r=V8(this,t,e)),r);break;default:z_(this,this._t0,r=V8(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function eX(t){this._context=new tX(t)}(eX.prototype=Object.create(ck.prototype)).point=function(t,e){ck.prototype.point.call(this,e,t)};function tX(t){this._context=t}tX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,s,i){this._context.bezierCurveTo(e,t,n,r,i,s)}};function hMe(t){return new ck(t)}function fMe(t){return new eX(t)}function rX(t){this._context=t}rX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=W8(t),s=W8(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function W8(t){var e,r=t.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)s[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=s[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(s[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)s[e]=(o[e]-s[e+1])/i[e];for(i[r-1]=(t[r]+s[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function gMe(t){return new rX(t)}function ij(t,e){this._context=t,this._t=e}ij.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function mMe(t){return new ij(t,.5)}function pMe(t){return new ij(t,0)}function xMe(t){return new ij(t,1)}function kg(t,e){if((o=t.length)>1)for(var r=1,n,s,i=t[e[0]],o,l=i.length;r<o;++r)for(s=i,i=t[e[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function yE(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function bMe(t,e){return t[e]}function yMe(t){const e=[];return e.key=t,e}function vMe(){var t=Kr([]),e=yE,r=kg,n=bMe;function s(i){var o=Array.from(t.apply(this,arguments),yMe),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(h,o[l].key,d,i)]).data=h;for(l=0,u=uO(e(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Kr(Array.from(i)),s):t},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Kr(+i),s):n},s.order=function(i){return arguments.length?(e=i==null?yE:typeof i=="function"?i:Kr(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(r=i??kg,s):r},s}function kMe(t,e){if((n=t.length)>0){for(var r,n,s=0,i=t[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=t[r][s][1]||0;if(o)for(r=0;r<n;++r)t[r][s][1]/=o}kg(t,e)}}function wMe(t,e){if((s=t.length)>0){for(var r=0,n=t[e[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}kg(t,e)}}function jMe(t,e){if(!(!((o=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=t[e[l]],h=u[n][1]||0,f=u[n-1][1]||0,g=(h-f)/2,x=0;x<l;++x){var m=t[e[x]],p=m[n][1]||0,b=m[n-1][1]||0;g+=p-b}c+=h,d+=g*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=d/c)}s[n-1][1]+=s[n-1][0]=r,kg(t,e)}}function dx(t){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dx(t)}var NMe=["type","size","sizeType"];function vE(){return vE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vE.apply(this,arguments)}function X8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Y8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X8(Object(r),!0).forEach(function(n){_Me(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Me(t,e,r){return e=SMe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SMe(t){var e=AMe(t,"string");return dx(e)=="symbol"?e:e+""}function AMe(t,e){if(dx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EMe(t,e){if(t==null)return{};var r=CMe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function CMe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var nX={symbolCircle:hO,symbolCross:YDe,symbolDiamond:QDe,symbolSquare:JDe,symbolStar:nMe,symbolTriangle:aMe,symbolWye:iMe},TMe=Math.PI/180,OMe=function(e){var r="symbol".concat(nj(e));return nX[r]||hO},IMe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*TMe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},DMe=function(e,r){nX["symbol".concat(nj(e))]=r},fO=function(e){var r=e.type,n=r===void 0?"circle":r,s=e.size,i=s===void 0?64:s,o=e.sizeType,l=o===void 0?"area":o,c=EMe(e,NMe),d=Y8(Y8({},c),{},{type:n,size:i,sizeType:l}),u=function(){var p=OMe(n),b=oMe().type(p).size(IMe(i,l,n));return b()},h=d.className,f=d.cx,g=d.cy,x=bt(d,!0);return f===+f&&g===+g&&i===+i?ae.createElement("path",vE({},x,{className:Pt("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(g,")"),d:u()})):null};fO.registerSymbol=DMe;function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function kE(){return kE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kE.apply(this,arguments)}function Z8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function MMe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z8(Object(r),!0).forEach(function(n){ux(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RMe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sX(n.key),n)}}function PMe(t,e,r){return e&&RMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zMe(t,e,r){return e=dk(e),$Me(t,aX()?Reflect.construct(e,r||[],dk(t).constructor):e.apply(t,r))}function $Me(t,e){if(e&&(wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FMe(t)}function FMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aX=function(){return!!t})()}function dk(t){return dk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dk(t)}function BMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wE(t,e)}function wE(t,e){return wE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},wE(t,e)}function ux(t,e,r){return e=sX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sX(t){var e=UMe(t,"string");return wg(e)=="symbol"?e:e+""}function UMe(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hs=32,gO=function(t){function e(){return LMe(this,e),zMe(this,e,arguments)}return BMe(e,t),PMe(e,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=Hs/2,o=Hs/6,l=Hs/3,c=n.inactive?s:n.color;if(n.type==="plainline")return ae.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Hs,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return ae.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Hs,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return ae.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Hs/8,"h").concat(Hs,"v").concat(Hs*3/4,"h").concat(-Hs,"z"),className:"recharts-legend-icon"});if(ae.isValidElement(n.legendIcon)){var d=MMe({},n);return delete d.legendIcon,ae.cloneElement(n.legendIcon,d)}return ae.createElement(fO,{fill:c,cx:i,cy:i,size:Hs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,u={x:0,y:0,width:Hs,height:Hs},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,x){var m=g.formatter||c,p=Pt(ux(ux({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",g.inactive));if(g.type==="none")return null;var b=St(g.value)?null:g.value;Wi(!St(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=g.inactive?d:g.color;return ae.createElement("li",kE({className:p,style:h,key:"legend-item-".concat(x)},Qu(n.props,g,x)),ae.createElement(hE,{width:o,height:o,viewBox:u,style:f},n.renderIcon(g)),ae.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(b,g,x):b))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ae.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);ux(gO,"displayName","Legend");ux(gO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var KMe=Gw;function GMe(){this.__data__=new KMe,this.size=0}var qMe=GMe;function VMe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var HMe=VMe;function WMe(t){return this.__data__.get(t)}var XMe=WMe;function YMe(t){return this.__data__.has(t)}var ZMe=YMe,QMe=Gw,JMe=tO,eLe=rO,tLe=200;function rLe(t,e){var r=this.__data__;if(r instanceof QMe){var n=r.__data__;if(!JMe||n.length<tLe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new eLe(n)}return r.set(t,e),this.size=r.size,this}var nLe=rLe,aLe=Gw,sLe=qMe,iLe=HMe,oLe=XMe,lLe=ZMe,cLe=nLe;function Am(t){var e=this.__data__=new aLe(t);this.size=e.size}Am.prototype.clear=sLe;Am.prototype.delete=iLe;Am.prototype.get=oLe;Am.prototype.has=lLe;Am.prototype.set=cLe;var iX=Am,dLe="__lodash_hash_undefined__";function uLe(t){return this.__data__.set(t,dLe),this}var hLe=uLe;function fLe(t){return this.__data__.has(t)}var gLe=fLe,mLe=rO,pLe=hLe,xLe=gLe;function uk(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new mLe;++e<r;)this.add(t[e])}uk.prototype.add=uk.prototype.push=pLe;uk.prototype.has=xLe;var oX=uk;function bLe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var lX=bLe;function yLe(t,e){return t.has(e)}var cX=yLe,vLe=oX,kLe=lX,wLe=cX,jLe=1,NLe=2;function _Le(t,e,r,n,s,i){var o=r&jLe,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(t),u=i.get(e);if(d&&u)return d==e&&u==t;var h=-1,f=!0,g=r&NLe?new vLe:void 0;for(i.set(t,e),i.set(e,t);++h<l;){var x=t[h],m=e[h];if(n)var p=o?n(m,x,h,e,t,i):n(x,m,h,t,e,i);if(p!==void 0){if(p)continue;f=!1;break}if(g){if(!kLe(e,function(b,v){if(!wLe(g,v)&&(x===b||s(x,b,r,n,i)))return g.push(v)})){f=!1;break}}else if(!(x===m||s(x,m,r,n,i))){f=!1;break}}return i.delete(t),i.delete(e),f}var dX=_Le,SLe=cl,ALe=SLe.Uint8Array,ELe=ALe;function CLe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,s){r[++e]=[s,n]}),r}var TLe=CLe;function OLe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var mO=OLe,Q8=Lb,J8=ELe,ILe=eO,DLe=dX,MLe=TLe,LLe=mO,RLe=1,PLe=2,zLe="[object Boolean]",$Le="[object Date]",FLe="[object Error]",BLe="[object Map]",ULe="[object Number]",KLe="[object RegExp]",GLe="[object Set]",qLe="[object String]",VLe="[object Symbol]",HLe="[object ArrayBuffer]",WLe="[object DataView]",eP=Q8?Q8.prototype:void 0,$_=eP?eP.valueOf:void 0;function XLe(t,e,r,n,s,i,o){switch(r){case WLe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case HLe:return!(t.byteLength!=e.byteLength||!i(new J8(t),new J8(e)));case zLe:case $Le:case ULe:return ILe(+t,+e);case FLe:return t.name==e.name&&t.message==e.message;case KLe:case qLe:return t==e+"";case BLe:var l=MLe;case GLe:var c=n&RLe;if(l||(l=LLe),t.size!=e.size&&!c)return!1;var d=o.get(t);if(d)return d==e;n|=PLe,o.set(t,e);var u=DLe(l(t),l(e),n,s,i,o);return o.delete(t),u;case VLe:if($_)return $_.call(t)==$_.call(e)}return!1}var YLe=XLe;function ZLe(t,e){for(var r=-1,n=e.length,s=t.length;++r<n;)t[s+r]=e[r];return t}var uX=ZLe,QLe=uX,JLe=ms;function eRe(t,e,r){var n=e(t);return JLe(t)?n:QLe(n,r(t))}var tRe=eRe;function rRe(t,e){for(var r=-1,n=t==null?0:t.length,s=0,i=[];++r<n;){var o=t[r];e(o,r,t)&&(i[s++]=o)}return i}var nRe=rRe;function aRe(){return[]}var sRe=aRe,iRe=nRe,oRe=sRe,lRe=Object.prototype,cRe=lRe.propertyIsEnumerable,tP=Object.getOwnPropertySymbols,dRe=tP?function(t){return t==null?[]:(t=Object(t),iRe(tP(t),function(e){return cRe.call(t,e)}))}:oRe,uRe=dRe;function hRe(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var fRe=hRe,gRe=xc,mRe=bc,pRe="[object Arguments]";function xRe(t){return mRe(t)&&gRe(t)==pRe}var bRe=xRe,rP=bRe,yRe=bc,hX=Object.prototype,vRe=hX.hasOwnProperty,kRe=hX.propertyIsEnumerable,wRe=rP(function(){return arguments}())?rP:function(t){return yRe(t)&&vRe.call(t,"callee")&&!kRe.call(t,"callee")},pO=wRe,hk={exports:{}};function jRe(){return!1}var NRe=jRe;hk.exports;(function(t,e){var r=cl,n=NRe,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;t.exports=d})(hk,hk.exports);var fX=hk.exports,_Re=9007199254740991,SRe=/^(?:0|[1-9]\d*)$/;function ARe(t,e){var r=typeof t;return e=e??_Re,!!e&&(r=="number"||r!="symbol"&&SRe.test(t))&&t>-1&&t%1==0&&t<e}var xO=ARe,ERe=9007199254740991;function CRe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ERe}var bO=CRe,TRe=xc,ORe=bO,IRe=bc,DRe="[object Arguments]",MRe="[object Array]",LRe="[object Boolean]",RRe="[object Date]",PRe="[object Error]",zRe="[object Function]",$Re="[object Map]",FRe="[object Number]",BRe="[object Object]",URe="[object RegExp]",KRe="[object Set]",GRe="[object String]",qRe="[object WeakMap]",VRe="[object ArrayBuffer]",HRe="[object DataView]",WRe="[object Float32Array]",XRe="[object Float64Array]",YRe="[object Int8Array]",ZRe="[object Int16Array]",QRe="[object Int32Array]",JRe="[object Uint8Array]",e8e="[object Uint8ClampedArray]",t8e="[object Uint16Array]",r8e="[object Uint32Array]",Qr={};Qr[WRe]=Qr[XRe]=Qr[YRe]=Qr[ZRe]=Qr[QRe]=Qr[JRe]=Qr[e8e]=Qr[t8e]=Qr[r8e]=!0;Qr[DRe]=Qr[MRe]=Qr[VRe]=Qr[LRe]=Qr[HRe]=Qr[RRe]=Qr[PRe]=Qr[zRe]=Qr[$Re]=Qr[FRe]=Qr[BRe]=Qr[URe]=Qr[KRe]=Qr[GRe]=Qr[qRe]=!1;function n8e(t){return IRe(t)&&ORe(t.length)&&!!Qr[TRe(t)]}var a8e=n8e;function s8e(t){return function(e){return t(e)}}var gX=s8e,fk={exports:{}};fk.exports;(function(t,e){var r=kW,n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===n,o=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(fk,fk.exports);var i8e=fk.exports,o8e=a8e,l8e=gX,nP=i8e,aP=nP&&nP.isTypedArray,c8e=aP?l8e(aP):o8e,mX=c8e,d8e=fRe,u8e=pO,h8e=ms,f8e=fX,g8e=xO,m8e=mX,p8e=Object.prototype,x8e=p8e.hasOwnProperty;function b8e(t,e){var r=h8e(t),n=!r&&u8e(t),s=!r&&!n&&f8e(t),i=!r&&!n&&!s&&m8e(t),o=r||n||s||i,l=o?d8e(t.length,String):[],c=l.length;for(var d in t)(e||x8e.call(t,d))&&!(o&&(d=="length"||s&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||g8e(d,c)))&&l.push(d);return l}var y8e=b8e,v8e=Object.prototype;function k8e(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||v8e;return t===r}var w8e=k8e;function j8e(t,e){return function(r){return t(e(r))}}var pX=j8e,N8e=pX,_8e=N8e(Object.keys,Object),S8e=_8e,A8e=w8e,E8e=S8e,C8e=Object.prototype,T8e=C8e.hasOwnProperty;function O8e(t){if(!A8e(t))return E8e(t);var e=[];for(var r in Object(t))T8e.call(t,r)&&r!="constructor"&&e.push(r);return e}var I8e=O8e,D8e=JT,M8e=bO;function L8e(t){return t!=null&&M8e(t.length)&&!D8e(t)}var Rb=L8e,R8e=y8e,P8e=I8e,z8e=Rb;function $8e(t){return z8e(t)?R8e(t):P8e(t)}var oj=$8e,F8e=tRe,B8e=uRe,U8e=oj;function K8e(t){return F8e(t,U8e,B8e)}var G8e=K8e,sP=G8e,q8e=1,V8e=Object.prototype,H8e=V8e.hasOwnProperty;function W8e(t,e,r,n,s,i){var o=r&q8e,l=sP(t),c=l.length,d=sP(e),u=d.length;if(c!=u&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:H8e.call(e,f)))return!1}var g=i.get(t),x=i.get(e);if(g&&x)return g==e&&x==t;var m=!0;i.set(t,e),i.set(e,t);for(var p=o;++h<c;){f=l[h];var b=t[f],v=e[f];if(n)var y=o?n(v,b,f,e,t,i):n(b,v,f,t,e,i);if(!(y===void 0?b===v||s(b,v,r,n,i):y)){m=!1;break}p||(p=f=="constructor")}if(m&&!p){var w=t.constructor,k=e.constructor;w!=k&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(t),i.delete(e),m}var X8e=W8e,Y8e=Sh,Z8e=cl,Q8e=Y8e(Z8e,"DataView"),J8e=Q8e,ePe=Sh,tPe=cl,rPe=ePe(tPe,"Promise"),nPe=rPe,aPe=Sh,sPe=cl,iPe=aPe(sPe,"Set"),xX=iPe,oPe=Sh,lPe=cl,cPe=oPe(lPe,"WeakMap"),dPe=cPe,jE=J8e,NE=tO,_E=nPe,SE=xX,AE=dPe,bX=xc,Em=jW,iP="[object Map]",uPe="[object Object]",oP="[object Promise]",lP="[object Set]",cP="[object WeakMap]",dP="[object DataView]",hPe=Em(jE),fPe=Em(NE),gPe=Em(_E),mPe=Em(SE),pPe=Em(AE),uu=bX;(jE&&uu(new jE(new ArrayBuffer(1)))!=dP||NE&&uu(new NE)!=iP||_E&&uu(_E.resolve())!=oP||SE&&uu(new SE)!=lP||AE&&uu(new AE)!=cP)&&(uu=function(t){var e=bX(t),r=e==uPe?t.constructor:void 0,n=r?Em(r):"";if(n)switch(n){case hPe:return dP;case fPe:return iP;case gPe:return oP;case mPe:return lP;case pPe:return cP}return e});var xPe=uu,F_=iX,bPe=dX,yPe=YLe,vPe=X8e,uP=xPe,hP=ms,fP=fX,kPe=mX,wPe=1,gP="[object Arguments]",mP="[object Array]",Gy="[object Object]",jPe=Object.prototype,pP=jPe.hasOwnProperty;function NPe(t,e,r,n,s,i){var o=hP(t),l=hP(e),c=o?mP:uP(t),d=l?mP:uP(e);c=c==gP?Gy:c,d=d==gP?Gy:d;var u=c==Gy,h=d==Gy,f=c==d;if(f&&fP(t)){if(!fP(e))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new F_),o||kPe(t)?bPe(t,e,r,n,s,i):yPe(t,e,c,r,n,s,i);if(!(r&wPe)){var g=u&&pP.call(t,"__wrapped__"),x=h&&pP.call(e,"__wrapped__");if(g||x){var m=g?t.value():t,p=x?e.value():e;return i||(i=new F_),s(m,p,r,n,i)}}return f?(i||(i=new F_),vPe(t,e,r,n,s,i)):!1}var _Pe=NPe,SPe=_Pe,xP=bc;function yX(t,e,r,n,s){return t===e?!0:t==null||e==null||!xP(t)&&!xP(e)?t!==t&&e!==e:SPe(t,e,r,n,yX,s)}var yO=yX,APe=iX,EPe=yO,CPe=1,TPe=2;function OPe(t,e,r,n){var s=r.length,i=s,o=!n;if(t==null)return!i;for(t=Object(t);s--;){var l=r[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<i;){l=r[s];var c=l[0],d=t[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in t))return!1}else{var h=new APe;if(n)var f=n(d,u,c,t,e,h);if(!(f===void 0?EPe(u,d,CPe|TPe,n,h):f))return!1}}return!0}var IPe=OPe,DPe=Bd;function MPe(t){return t===t&&!DPe(t)}var vX=MPe,LPe=vX,RPe=oj;function PPe(t){for(var e=RPe(t),r=e.length;r--;){var n=e[r],s=t[n];e[r]=[n,s,LPe(s)]}return e}var zPe=PPe;function $Pe(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var kX=$Pe,FPe=IPe,BPe=zPe,UPe=kX;function KPe(t){var e=BPe(t);return e.length==1&&e[0][2]?UPe(e[0][0],e[0][1]):function(r){return r===t||FPe(r,t,e)}}var GPe=KPe;function qPe(t,e){return t!=null&&e in Object(t)}var VPe=qPe,HPe=EW,WPe=pO,XPe=ms,YPe=xO,ZPe=bO,QPe=Vw;function JPe(t,e,r){e=HPe(e,t);for(var n=-1,s=e.length,i=!1;++n<s;){var o=QPe(e[n]);if(!(i=t!=null&&r(t,o)))break;t=t[o]}return i||++n!=s?i:(s=t==null?0:t.length,!!s&&ZPe(s)&&YPe(o,s)&&(XPe(t)||WPe(t)))}var eze=JPe,tze=VPe,rze=eze;function nze(t,e){return t!=null&&rze(t,e,tze)}var aze=nze,sze=yO,ize=CW,oze=aze,lze=QT,cze=vX,dze=kX,uze=Vw,hze=1,fze=2;function gze(t,e){return lze(t)&&cze(e)?dze(uze(t),e):function(r){var n=ize(r,t);return n===void 0&&n===e?oze(r,t):sze(e,n,hze|fze)}}var mze=gze;function pze(t){return t}var Cm=pze;function xze(t){return function(e){return e==null?void 0:e[t]}}var bze=xze,yze=sO;function vze(t){return function(e){return yze(e,t)}}var kze=vze,wze=bze,jze=kze,Nze=QT,_ze=Vw;function Sze(t){return Nze(t)?wze(_ze(t)):jze(t)}var Aze=Sze,Eze=GPe,Cze=mze,Tze=Cm,Oze=ms,Ize=Aze;function Dze(t){return typeof t=="function"?t:t==null?Tze:typeof t=="object"?Oze(t)?Cze(t[0],t[1]):Eze(t):Ize(t)}var dl=Dze;function Mze(t,e,r,n){for(var s=t.length,i=r+(n?1:-1);n?i--:++i<s;)if(e(t[i],i,t))return i;return-1}var wX=Mze;function Lze(t){return t!==t}var Rze=Lze;function Pze(t,e,r){for(var n=r-1,s=t.length;++n<s;)if(t[n]===e)return n;return-1}var zze=Pze,$ze=wX,Fze=Rze,Bze=zze;function Uze(t,e,r){return e===e?Bze(t,e,r):$ze(t,Fze,r)}var Kze=Uze,Gze=Kze;function qze(t,e){var r=t==null?0:t.length;return!!r&&Gze(t,e,0)>-1}var Vze=qze;function Hze(t,e,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(e,t[n]))return!0;return!1}var Wze=Hze;function Xze(){}var Yze=Xze,B_=xX,Zze=Yze,Qze=mO,Jze=1/0,e$e=B_&&1/Qze(new B_([,-0]))[1]==Jze?function(t){return new B_(t)}:Zze,t$e=e$e,r$e=oX,n$e=Vze,a$e=Wze,s$e=cX,i$e=t$e,o$e=mO,l$e=200;function c$e(t,e,r){var n=-1,s=n$e,i=t.length,o=!0,l=[],c=l;if(r)o=!1,s=a$e;else if(i>=l$e){var d=e?null:i$e(t);if(d)return o$e(d);o=!1,s=s$e,c=new r$e}else c=e?[]:l;e:for(;++n<i;){var u=t[n],h=e?e(u):u;if(u=r||u!==0?u:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(u)}else s(c,h,r)||(c!==l&&c.push(h),l.push(u))}return l}var d$e=c$e,u$e=dl,h$e=d$e;function f$e(t,e){return t&&t.length?h$e(t,u$e(e)):[]}var g$e=f$e;const bP=Vt(g$e);function jX(t,e,r){return e===!0?bP(t,r):St(e)?bP(t,e):t}function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}var m$e=["ref"];function yP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function wl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(r),!0).forEach(function(n){lj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_X(n.key),n)}}function x$e(t,e,r){return e&&vP(t.prototype,e),r&&vP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function b$e(t,e,r){return e=gk(e),y$e(t,NX()?Reflect.construct(e,r||[],gk(t).constructor):e.apply(t,r))}function y$e(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v$e(t)}function v$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NX=function(){return!!t})()}function gk(t){return gk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gk(t)}function k$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EE(t,e)}function EE(t,e){return EE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},EE(t,e)}function lj(t,e,r){return e=_X(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _X(t){var e=w$e(t,"string");return jg(e)=="symbol"?e:e+""}function w$e(t,e){if(jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function j$e(t,e){if(t==null)return{};var r=N$e(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function N$e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _$e(t){return t.value}function S$e(t,e){if(ae.isValidElement(t))return ae.cloneElement(t,e);if(typeof t=="function")return ae.createElement(t,e);e.ref;var r=j$e(e,m$e);return ae.createElement(gO,r)}var kP=1,xd=function(t){function e(){var r;p$e(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=b$e(this,e,[].concat(s)),lj(r,"lastBoundingBox",{width:-1,height:-1}),r}return k$e(e,t),x$e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>kP||Math.abs(s.height-this.lastBoundingBox.height)>kP)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?wl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,u=s.chartHeight,h,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();h={left:((d||0)-g.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();f={top:((u||0)-x.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return wl(wl({},h),f)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,u=s.payload,h=wl(wl({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ae.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(g){n.wrapperNode=g}},S$e(i,wl(wl({},this.props),{},{payload:jX(u,d,_$e)})))}}],[{key:"getWithHeight",value:function(n,s){var i=wl(wl({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Ve(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])}(N.PureComponent);lj(xd,"displayName","Legend");lj(xd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var wP=Lb,A$e=pO,E$e=ms,jP=wP?wP.isConcatSpreadable:void 0;function C$e(t){return E$e(t)||A$e(t)||!!(jP&&t&&t[jP])}var T$e=C$e,O$e=uX,I$e=T$e;function SX(t,e,r,n,s){var i=-1,o=t.length;for(r||(r=I$e),s||(s=[]);++i<o;){var l=t[i];e>0&&r(l)?e>1?SX(l,e-1,r,n,s):O$e(s,l):n||(s[s.length]=l)}return s}var AX=SX;function D$e(t){return function(e,r,n){for(var s=-1,i=Object(e),o=n(e),l=o.length;l--;){var c=o[t?l:++s];if(r(i[c],c,i)===!1)break}return e}}var M$e=D$e,L$e=M$e,R$e=L$e(),P$e=R$e,z$e=P$e,$$e=oj;function F$e(t,e){return t&&z$e(t,e,$$e)}var EX=F$e,B$e=Rb;function U$e(t,e){return function(r,n){if(r==null)return r;if(!B$e(r))return t(r,n);for(var s=r.length,i=e?s:-1,o=Object(r);(e?i--:++i<s)&&n(o[i],i,o)!==!1;);return r}}var K$e=U$e,G$e=EX,q$e=K$e,V$e=q$e(G$e),vO=V$e,H$e=vO,W$e=Rb;function X$e(t,e){var r=-1,n=W$e(t)?Array(t.length):[];return H$e(t,function(s,i,o){n[++r]=e(s,i,o)}),n}var CX=X$e;function Y$e(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Z$e=Y$e,NP=km;function Q$e(t,e){if(t!==e){var r=t!==void 0,n=t===null,s=t===t,i=NP(t),o=e!==void 0,l=e===null,c=e===e,d=NP(e);if(!l&&!d&&!i&&t>e||i&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!s)return 1;if(!n&&!i&&!d&&t<e||d&&r&&s&&!n&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}var J$e=Q$e,e9e=J$e;function t9e(t,e,r){for(var n=-1,s=t.criteria,i=e.criteria,o=s.length,l=r.length;++n<o;){var c=e9e(s[n],i[n]);if(c){if(n>=l)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return t.index-e.index}var r9e=t9e,U_=aO,n9e=sO,a9e=dl,s9e=CX,i9e=Z$e,o9e=gX,l9e=r9e,c9e=Cm,d9e=ms;function u9e(t,e,r){e.length?e=U_(e,function(i){return d9e(i)?function(o){return n9e(o,i.length===1?i[0]:i)}:i}):e=[c9e];var n=-1;e=U_(e,o9e(a9e));var s=s9e(t,function(i,o,l){var c=U_(e,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return i9e(s,function(i,o){return l9e(i,o,r)})}var h9e=u9e;function f9e(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var g9e=f9e,m9e=g9e,_P=Math.max;function p9e(t,e,r){return e=_P(e===void 0?t.length-1:e,0),function(){for(var n=arguments,s=-1,i=_P(n.length-e,0),o=Array(i);++s<i;)o[s]=n[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=n[s];return l[e]=r(o),m9e(t,this,l)}}var x9e=p9e;function b9e(t){return function(){return t}}var y9e=b9e,v9e=Sh,k9e=function(){try{var t=v9e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),TX=k9e,w9e=y9e,SP=TX,j9e=Cm,N9e=SP?function(t,e){return SP(t,"toString",{configurable:!0,enumerable:!1,value:w9e(e),writable:!0})}:j9e,_9e=N9e,S9e=800,A9e=16,E9e=Date.now;function C9e(t){var e=0,r=0;return function(){var n=E9e(),s=A9e-(n-r);if(r=n,s>0){if(++e>=S9e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var T9e=C9e,O9e=_9e,I9e=T9e,D9e=I9e(O9e),M9e=D9e,L9e=Cm,R9e=x9e,P9e=M9e;function z9e(t,e){return P9e(R9e(t,e,L9e),t+"")}var $9e=z9e,F9e=eO,B9e=Rb,U9e=xO,K9e=Bd;function G9e(t,e,r){if(!K9e(r))return!1;var n=typeof e;return(n=="number"?B9e(r)&&U9e(e,r.length):n=="string"&&e in r)?F9e(r[e],t):!1}var cj=G9e,q9e=AX,V9e=h9e,H9e=$9e,AP=cj,W9e=H9e(function(t,e){if(t==null)return[];var r=e.length;return r>1&&AP(t,e[0],e[1])?e=[]:r>2&&AP(e[0],e[1],e[2])&&(e=[e[0]]),V9e(t,q9e(e,1),[])}),X9e=W9e;const kO=Vt(X9e);function hx(t){"@babel/helpers - typeof";return hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hx(t)}function CE(){return CE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CE.apply(this,arguments)}function Y9e(t,e){return eFe(t)||J9e(t,e)||Q9e(t,e)||Z9e()}function Z9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q9e(t,e){if(t){if(typeof t=="string")return EP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EP(t,e)}}function EP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function J9e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function eFe(t){if(Array.isArray(t))return t}function CP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function K_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(r),!0).forEach(function(n){tFe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tFe(t,e,r){return e=rFe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rFe(t){var e=nFe(t,"string");return hx(e)=="symbol"?e:e+""}function nFe(t,e){if(hx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aFe(t){return Array.isArray(t)&&Wn(t[0])&&Wn(t[1])?t.join(" ~ "):t}var sFe=function(e){var r=e.separator,n=r===void 0?" : ":r,s=e.contentStyle,i=s===void 0?{}:s,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,u=e.payload,h=e.formatter,f=e.itemSorter,g=e.wrapperClassName,x=e.labelClassName,m=e.label,p=e.labelFormatter,b=e.accessibilityLayer,v=b===void 0?!1:b,y=function(){if(u&&u.length){var C={padding:0,margin:0},z=(f?kO(u,f):u).map(function(M,F){if(M.type==="none")return null;var D=K_({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),L=M.formatter||h||aFe,K=M.value,$=M.name,R=K,Y=$;if(L&&R!=null&&Y!=null){var ee=L(K,$,M,F,u);if(Array.isArray(ee)){var B=Y9e(ee,2);R=B[0],Y=B[1]}else R=ee}return ae.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:D},Wn(Y)?ae.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,Wn(Y)?ae.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ae.createElement("span",{className:"recharts-tooltip-item-value"},R),ae.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return ae.createElement("ul",{className:"recharts-tooltip-item-list",style:C},z)}return null},w=K_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),k=K_({margin:0},d),j=!Dt(m),_=j?m:"",S=Pt("recharts-default-tooltip",g),A=Pt("recharts-tooltip-label",x);j&&p&&u!==void 0&&u!==null&&(_=p(m,u));var T=v?{role:"status","aria-live":"assertive"}:{};return ae.createElement("div",CE({className:S,style:w},T),ae.createElement("p",{className:A,style:k},ae.isValidElement(_)?_:"".concat(_)),y())};function fx(t){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fx(t)}function qy(t,e,r){return e=iFe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iFe(t){var e=oFe(t,"string");return fx(e)=="symbol"?e:e+""}function oFe(t,e){if(fx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cp="recharts-tooltip-wrapper",lFe={visibility:"hidden"};function cFe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Pt(cp,qy(qy(qy(qy({},"".concat(cp,"-right"),Ve(r)&&e&&Ve(e.x)&&r>=e.x),"".concat(cp,"-left"),Ve(r)&&e&&Ve(e.x)&&r<e.x),"".concat(cp,"-bottom"),Ve(n)&&e&&Ve(e.y)&&n>=e.y),"".concat(cp,"-top"),Ve(n)&&e&&Ve(e.y)&&n<e.y))}function TP(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,s=t.offsetTopLeft,i=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(i&&Ve(i[n]))return i[n];var u=r[n]-l-s,h=r[n]+s;if(e[n])return o[n]?u:h;if(o[n]){var f=u,g=c[n];return f<g?Math.max(h,c[n]):Math.max(u,c[n])}var x=h+l,m=c[n]+d;return x>m?Math.max(u,c[n]):Math.max(h,c[n])}function dFe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function uFe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,s=t.position,i=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,u,h;return o.height>0&&o.width>0&&r?(u=TP({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=TP({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=dFe({translateX:u,translateY:h,useTranslate3d:l})):d=lFe,{cssProperties:d,cssClasses:cFe({translateX:u,translateY:h,coordinate:r})}}function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function OP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function IP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(r),!0).forEach(function(n){OE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fFe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IX(n.key),n)}}function gFe(t,e,r){return e&&fFe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mFe(t,e,r){return e=mk(e),pFe(t,OX()?Reflect.construct(e,r||[],mk(t).constructor):e.apply(t,r))}function pFe(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xFe(t)}function xFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OX=function(){return!!t})()}function mk(t){return mk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mk(t)}function bFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TE(t,e)}function TE(t,e){return TE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},TE(t,e)}function OE(t,e,r){return e=IX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IX(t){var e=yFe(t,"string");return Ng(e)=="symbol"?e:e+""}function yFe(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var DP=1,vFe=function(t){function e(){var r;hFe(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=mFe(this,e,[].concat(s)),OE(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),OE(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return bFe(e,t),gFe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>DP||Math.abs(n.height-this.state.lastBoundingBox.height)>DP)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,u=s.coordinate,h=s.hasPayload,f=s.isAnimationActive,g=s.offset,x=s.position,m=s.reverseDirection,p=s.useTranslate3d,b=s.viewBox,v=s.wrapperStyle,y=uFe({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:g,position:x,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:b}),w=y.cssClasses,k=y.cssProperties,j=IP(IP({transition:f&&i?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},v);return ae.createElement("div",{tabIndex:-1,className:w,style:j,ref:function(S){n.wrapperNode=S}},d)}}])}(N.PureComponent),kFe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ud={isSsr:kFe()};function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function MP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function LP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(r),!0).forEach(function(n){wO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jFe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MX(n.key),n)}}function NFe(t,e,r){return e&&jFe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Fe(t,e,r){return e=pk(e),SFe(t,DX()?Reflect.construct(e,r||[],pk(t).constructor):e.apply(t,r))}function SFe(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AFe(t)}function AFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DX=function(){return!!t})()}function pk(t){return pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pk(t)}function EFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IE(t,e)}function IE(t,e){return IE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},IE(t,e)}function wO(t,e,r){return e=MX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MX(t){var e=CFe(t,"string");return _g(e)=="symbol"?e:e+""}function CFe(t,e){if(_g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function TFe(t){return t.dataKey}function OFe(t,e){return ae.isValidElement(t)?ae.cloneElement(t,e):typeof t=="function"?ae.createElement(t,e):ae.createElement(sFe,e)}var ga=function(t){function e(){return wFe(this,e),_Fe(this,e,arguments)}return EFe(e,t),NFe(e,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,u=s.coordinate,h=s.filterNull,f=s.isAnimationActive,g=s.offset,x=s.payload,m=s.payloadUniqBy,p=s.position,b=s.reverseDirection,v=s.useTranslate3d,y=s.viewBox,w=s.wrapperStyle,k=x??[];h&&k.length&&(k=jX(x.filter(function(_){return _.value!=null&&(_.hide!==!0||n.props.includeHidden)}),m,TFe));var j=k.length>0;return ae.createElement(vFe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:i,coordinate:u,hasPayload:j,offset:g,position:p,reverseDirection:b,useTranslate3d:v,viewBox:y,wrapperStyle:w},OFe(d,LP(LP({},this.props),{},{payload:k})))}}])}(N.PureComponent);wO(ga,"displayName","Tooltip");wO(ga,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ud.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var IFe=cl,DFe=function(){return IFe.Date.now()},MFe=DFe,LFe=/\s/;function RFe(t){for(var e=t.length;e--&&LFe.test(t.charAt(e)););return e}var PFe=RFe,zFe=PFe,$Fe=/^\s+/;function FFe(t){return t&&t.slice(0,zFe(t)+1).replace($Fe,"")}var BFe=FFe,UFe=BFe,RP=Bd,KFe=km,PP=NaN,GFe=/^[-+]0x[0-9a-f]+$/i,qFe=/^0b[01]+$/i,VFe=/^0o[0-7]+$/i,HFe=parseInt;function WFe(t){if(typeof t=="number")return t;if(KFe(t))return PP;if(RP(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=RP(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=UFe(t);var r=qFe.test(t);return r||VFe.test(t)?HFe(t.slice(2),r?2:8):GFe.test(t)?PP:+t}var LX=WFe,XFe=Bd,G_=MFe,zP=LX,YFe="Expected a function",ZFe=Math.max,QFe=Math.min;function JFe(t,e,r){var n,s,i,o,l,c,d=0,u=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(YFe);e=zP(e)||0,XFe(r)&&(u=!!r.leading,h="maxWait"in r,i=h?ZFe(zP(r.maxWait)||0,e):i,f="trailing"in r?!!r.trailing:f);function g(j){var _=n,S=s;return n=s=void 0,d=j,o=t.apply(S,_),o}function x(j){return d=j,l=setTimeout(b,e),u?g(j):o}function m(j){var _=j-c,S=j-d,A=e-_;return h?QFe(A,i-S):A}function p(j){var _=j-c,S=j-d;return c===void 0||_>=e||_<0||h&&S>=i}function b(){var j=G_();if(p(j))return v(j);l=setTimeout(b,m(j))}function v(j){return l=void 0,f&&n?g(j):(n=s=void 0,o)}function y(){l!==void 0&&clearTimeout(l),d=0,n=c=s=l=void 0}function w(){return l===void 0?o:v(G_())}function k(){var j=G_(),_=p(j);if(n=arguments,s=this,c=j,_){if(l===void 0)return x(c);if(h)return clearTimeout(l),l=setTimeout(b,e),g(c)}return l===void 0&&(l=setTimeout(b,e)),o}return k.cancel=y,k.flush=w,k}var RX=JFe;const e7e=Vt(RX);var t7e=RX,r7e=Bd,n7e="Expected a function";function a7e(t,e,r){var n=!0,s=!0;if(typeof t!="function")throw new TypeError(n7e);return r7e(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),t7e(t,e,{leading:n,maxWait:e,trailing:s})}var s7e=a7e;const jO=Vt(s7e);function gx(t){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gx(t)}function $P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Vy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$P(Object(r),!0).forEach(function(n){i7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$P(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i7e(t,e,r){return e=o7e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o7e(t){var e=l7e(t,"string");return gx(e)=="symbol"?e:e+""}function l7e(t,e){if(gx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c7e(t,e){return f7e(t)||h7e(t,e)||u7e(t,e)||d7e()}function d7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u7e(t,e){if(t){if(typeof t=="string")return FP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FP(t,e)}}function FP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h7e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function f7e(t){if(Array.isArray(t))return t}var bd=N.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,u=d===void 0?0:d,h=t.minHeight,f=t.maxHeight,g=t.children,x=t.debounce,m=x===void 0?0:x,p=t.id,b=t.className,v=t.onResize,y=t.style,w=y===void 0?{}:y,k=N.useRef(null),j=N.useRef();j.current=v,N.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var _=N.useState({containerWidth:s.width,containerHeight:s.height}),S=c7e(_,2),A=S[0],T=S[1],E=N.useCallback(function(z,M){T(function(F){var D=Math.round(z),L=Math.round(M);return F.containerWidth===D&&F.containerHeight===L?F:{containerWidth:D,containerHeight:L}})},[]);N.useEffect(function(){var z=function($){var R,Y=$[0].contentRect,ee=Y.width,B=Y.height;E(ee,B),(R=j.current)===null||R===void 0||R.call(j,ee,B)};m>0&&(z=jO(z,m,{trailing:!0,leading:!1}));var M=new ResizeObserver(z),F=k.current.getBoundingClientRect(),D=F.width,L=F.height;return E(D,L),M.observe(k.current),function(){M.disconnect()}},[E,m]);var C=N.useMemo(function(){var z=A.containerWidth,M=A.containerHeight;if(z<0||M<0)return null;Wi(yu(o)||yu(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Wi(!r||r>0,"The aspect(%s) must be greater than zero.",r);var F=yu(o)?z:o,D=yu(c)?M:c;r&&r>0&&(F?D=F/r:D&&(F=D*r),f&&D>f&&(D=f)),Wi(F>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,D,o,c,u,h,r);var L=!Array.isArray(g)&&Fl(g.type).endsWith("Chart");return ae.Children.map(g,function(K){return ae.isValidElement(K)?N.cloneElement(K,Vy({width:F,height:D},L?{style:Vy({height:"100%",width:"100%",maxHeight:D,maxWidth:F},K.props.style)}:{})):K})},[r,g,c,f,h,u,A,o]);return ae.createElement("div",{id:p?"".concat(p):void 0,className:Pt("recharts-responsive-container",b),style:Vy(Vy({},w),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:f}),ref:k},C)}),Tm=function(e){return null};Tm.displayName="Cell";function mx(t){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mx(t)}function BP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function DE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BP(Object(r),!0).forEach(function(n){g7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g7e(t,e,r){return e=m7e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m7e(t){var e=p7e(t,"string");return mx(e)=="symbol"?e:e+""}function p7e(t,e){if(mx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uh={widthCache:{},cacheCount:0},x7e=2e3,b7e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UP="recharts_measurement_span";function y7e(t){var e=DE({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var d0=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ud.isSsr)return{width:0,height:0};var n=y7e(r),s=JSON.stringify({text:e,copyStyle:n});if(Uh.widthCache[s])return Uh.widthCache[s];try{var i=document.getElementById(UP);i||(i=document.createElement("span"),i.setAttribute("id",UP),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=DE(DE({},b7e),n);Object.assign(i.style,o),i.textContent="".concat(e);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Uh.widthCache[s]=c,++Uh.cacheCount>x7e&&(Uh.cacheCount=0,Uh.widthCache={}),c}catch{return{width:0,height:0}}},v7e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function px(t){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},px(t)}function xk(t,e){return N7e(t)||j7e(t,e)||w7e(t,e)||k7e()}function k7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w7e(t,e){if(t){if(typeof t=="string")return KP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KP(t,e)}}function KP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function j7e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function N7e(t){if(Array.isArray(t))return t}function _7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A7e(n.key),n)}}function S7e(t,e,r){return e&&GP(t.prototype,e),r&&GP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function A7e(t){var e=E7e(t,"string");return px(e)=="symbol"?e:e+""}function E7e(t,e){if(px(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,VP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,C7e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,T7e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,PX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},O7e=Object.keys(PX),Af="NaN";function I7e(t,e){return t*PX[e]}var Hy=function(){function t(e,r){_7e(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!C7e.test(r)&&(this.num=NaN,this.unit=""),O7e.includes(r)&&(this.num=I7e(e,r),this.unit="px")}return S7e(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=T7e.exec(r))!==null&&n!==void 0?n:[],i=xk(s,3),o=i[1],l=i[2];return new t(parseFloat(o),l??"")}}])}();function zX(t){if(t.includes(Af))return Af;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=qP.exec(e))!==null&&r!==void 0?r:[],s=xk(n,4),i=s[1],o=s[2],l=s[3],c=Hy.parse(i??""),d=Hy.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Af;e=e.replace(qP,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=VP.exec(e))!==null&&h!==void 0?h:[],g=xk(f,4),x=g[1],m=g[2],p=g[3],b=Hy.parse(x??""),v=Hy.parse(p??""),y=m==="+"?b.add(v):b.subtract(v);if(y.isNaN())return Af;e=e.replace(VP,y.toString())}return e}var HP=/\(([^()]*)\)/;function D7e(t){for(var e=t;e.includes("(");){var r=HP.exec(e),n=xk(r,2),s=n[1];e=e.replace(HP,zX(s))}return e}function M7e(t){var e=t.replace(/\s+/g,"");return e=D7e(e),e=zX(e),e}function L7e(t){try{return M7e(t)}catch{return Af}}function q_(t){var e=L7e(t.slice(5,-1));return e===Af?"":e}var R7e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],P7e=["dx","dy","angle","className","breakAll"];function ME(){return ME=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ME.apply(this,arguments)}function WP(t,e){if(t==null)return{};var r=z7e(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function z7e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function XP(t,e){return U7e(t)||B7e(t,e)||F7e(t,e)||$7e()}function $7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F7e(t,e){if(t){if(typeof t=="string")return YP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YP(t,e)}}function YP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function B7e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function U7e(t){if(Array.isArray(t))return t}var $X=/[ \f\n\r\t\v\u2028\u2029]+/,FX=function(e){var r=e.children,n=e.breakAll,s=e.style;try{var i=[];Dt(r)||(n?i=r.toString().split(""):i=r.toString().split($X));var o=i.map(function(c){return{word:c,width:d0(c,s).width}}),l=n?0:d0("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},K7e=function(e,r,n,s,i){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,u=Ve(o),h=l,f=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(D,L){var K=L.word,$=L.width,R=D[D.length-1];if(R&&(s==null||i||R.width+$+n<Number(s)))R.words.push(K),R.width+=$+n;else{var Y={words:[K],width:$};D.push(Y)}return D},[])},g=f(r),x=function(F){return F.reduce(function(D,L){return D.width>L.width?D:L})};if(!u)return g;for(var m="",p=function(F){var D=h.slice(0,F),L=FX({breakAll:d,style:c,children:D+m}).wordsWithComputedWidth,K=f(L),$=K.length>o||x(K).width>Number(s);return[$,K]},b=0,v=h.length-1,y=0,w;b<=v&&y<=h.length-1;){var k=Math.floor((b+v)/2),j=k-1,_=p(j),S=XP(_,2),A=S[0],T=S[1],E=p(k),C=XP(E,1),z=C[0];if(!A&&!z&&(b=k+1),A&&z&&(v=k-1),!A&&z){w=T;break}y++}return w||g},ZP=function(e){var r=Dt(e)?[]:e.toString().split($X);return[{words:r}]},G7e=function(e){var r=e.width,n=e.scaleToFit,s=e.children,i=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!Ud.isSsr){var c,d,u=FX({breakAll:o,children:s,style:i});if(u){var h=u.wordsWithComputedWidth,f=u.spaceWidth;c=h,d=f}else return ZP(s);return K7e({breakAll:o,children:s,maxLines:l,style:i},c,d,r,n)}return ZP(s)},QP="#808080",Ju=function(e){var r=e.x,n=r===void 0?0:r,s=e.y,i=s===void 0?0:s,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,u=e.scaleToFit,h=u===void 0?!1:u,f=e.textAnchor,g=f===void 0?"start":f,x=e.verticalAnchor,m=x===void 0?"end":x,p=e.fill,b=p===void 0?QP:p,v=WP(e,R7e),y=N.useMemo(function(){return G7e({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:h,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,h,v.style,v.width]),w=v.dx,k=v.dy,j=v.angle,_=v.className,S=v.breakAll,A=WP(v,P7e);if(!Wn(n)||!Wn(i))return null;var T=n+(Ve(w)?w:0),E=i+(Ve(k)?k:0),C;switch(m){case"start":C=q_("calc(".concat(d,")"));break;case"middle":C=q_("calc(".concat((y.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:C=q_("calc(".concat(y.length-1," * -").concat(l,")"));break}var z=[];if(h){var M=y[0].width,F=v.width;z.push("scale(".concat((Ve(F)?F/M:1)/M,")"))}return j&&z.push("rotate(".concat(j,", ").concat(T,", ").concat(E,")")),z.length&&(A.transform=z.join(" ")),ae.createElement("text",ME({},bt(A,!0),{x:T,y:E,className:Pt("recharts-text",_),textAnchor:g,fill:b.includes("url")?QP:b}),y.map(function(D,L){var K=D.words.join(S?"":" ");return ae.createElement("tspan",{x:T,dy:L===0?C:l,key:"".concat(K,"-").concat(L)},K)}))};function yd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function q7e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function NO(t){let e,r,n;t.length!==2?(e=yd,r=(l,c)=>yd(t(l),c),n=(l,c)=>t(l)-c):(e=t===yd||t===q7e?t:V7e,r=t,n=t);function s(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=s(l,c,d,u-1);return h>d&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function V7e(){return 0}function BX(t){return t===null?NaN:+t}function*H7e(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const W7e=NO(yd),Pb=W7e.right;NO(BX).center;class JP extends Map{constructor(e,r=Z7e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(ez(this,e))}has(e){return super.has(ez(this,e))}set(e,r){return super.set(X7e(this,e),r)}delete(e){return super.delete(Y7e(this,e))}}function ez({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function X7e({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Y7e({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Z7e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Q7e(t=yd){if(t===yd)return UX;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function UX(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const J7e=Math.sqrt(50),eBe=Math.sqrt(10),tBe=Math.sqrt(2);function bk(t,e,r){const n=(e-t)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=J7e?10:i>=eBe?5:i>=tBe?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=r&&r<2?bk(t,e,r*2):[l,c,d]}function LE(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[s,i,o]=n?bk(e,t,r):bk(t,e,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function RE(t,e,r){return e=+e,t=+t,r=+r,bk(t,e,r)[2]}function PE(t,e,r){e=+e,t=+t,r=+r;const n=e<t,s=n?RE(e,t,r):RE(t,e,r);return(n?-1:1)*(s<0?1/-s:s)}function tz(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function rz(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function KX(t,e,r=0,n=1/0,s){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(s=s===void 0?UX:Q7e(s);n>r;){if(n-r>600){const c=n-r+1,d=e-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),g=Math.max(r,Math.floor(e-d*h/c+f)),x=Math.min(n,Math.floor(e+(c-d)*h/c+f));KX(t,e,g,x,s)}const i=t[e];let o=r,l=n;for(dp(t,r,e),s(t[n],i)>0&&dp(t,r,n);o<l;){for(dp(t,o,l),++o,--l;s(t[o],i)<0;)++o;for(;s(t[l],i)>0;)--l}s(t[r],i)===0?dp(t,r,l):(++l,dp(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function dp(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function rBe(t,e,r){if(t=Float64Array.from(H7e(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return rz(t);if(e>=1)return tz(t);var n,s=(n-1)*e,i=Math.floor(s),o=tz(KX(t,i).subarray(0,i+1)),l=rz(t.subarray(i+1));return o+(l-o)*(s-i)}}function nBe(t,e,r=BX){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,s=(n-1)*e,i=Math.floor(s),o=+r(t[i],i,t),l=+r(t[i+1],i+1,t);return o+(l-o)*(s-i)}}function aBe(t,e,r){t=+t,e=+e,r=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(s);++n<s;)i[n]=t+n*r;return i}function _i(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function yc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const zE=Symbol("implicit");function _O(){var t=new JP,e=[],r=[],n=zE;function s(i){let o=t.get(i);if(o===void 0){if(n!==zE)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new JP;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return _O(e,r).unknown(n)},_i.apply(s,arguments),s}function xx(){var t=_O().unknown(void 0),e=t.domain,r=t.range,n=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete t.unknown;function h(){var f=e().length,g=s<n,x=g?s:n,m=g?n:s;i=(m-x)/Math.max(1,f-c+d*2),l&&(i=Math.floor(i)),x+=(m-x-i*(f-c))*u,o=i*(1-c),l&&(x=Math.round(x),o=Math.round(o));var p=aBe(f).map(function(b){return x+i*b});return r(g?p.reverse():p)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},t.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return xx(e(),[n,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},_i.apply(h(),arguments)}function GX(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return GX(e())},t}function u0(){return GX(xx.apply(null,arguments).paddingInner(1))}function SO(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function qX(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function zb(){}var bx=.7,yk=1/bx,Yf="\\s*([+-]?\\d+)\\s*",yx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sBe=/^#([0-9a-f]{3,8})$/,iBe=new RegExp(`^rgb\\(${Yf},${Yf},${Yf}\\)$`),oBe=new RegExp(`^rgb\\(${Fo},${Fo},${Fo}\\)$`),lBe=new RegExp(`^rgba\\(${Yf},${Yf},${Yf},${yx}\\)$`),cBe=new RegExp(`^rgba\\(${Fo},${Fo},${Fo},${yx}\\)$`),dBe=new RegExp(`^hsl\\(${yx},${Fo},${Fo}\\)$`),uBe=new RegExp(`^hsla\\(${yx},${Fo},${Fo},${yx}\\)$`),nz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};SO(zb,vx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:az,formatHex:az,formatHex8:hBe,formatHsl:fBe,formatRgb:sz,toString:sz});function az(){return this.rgb().formatHex()}function hBe(){return this.rgb().formatHex8()}function fBe(){return VX(this).formatHsl()}function sz(){return this.rgb().formatRgb()}function vx(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=sBe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?iz(e):r===3?new ls(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Wy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Wy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=iBe.exec(t))?new ls(e[1],e[2],e[3],1):(e=oBe.exec(t))?new ls(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=lBe.exec(t))?Wy(e[1],e[2],e[3],e[4]):(e=cBe.exec(t))?Wy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dBe.exec(t))?cz(e[1],e[2]/100,e[3]/100,1):(e=uBe.exec(t))?cz(e[1],e[2]/100,e[3]/100,e[4]):nz.hasOwnProperty(t)?iz(nz[t]):t==="transparent"?new ls(NaN,NaN,NaN,0):null}function iz(t){return new ls(t>>16&255,t>>8&255,t&255,1)}function Wy(t,e,r,n){return n<=0&&(t=e=r=NaN),new ls(t,e,r,n)}function gBe(t){return t instanceof zb||(t=vx(t)),t?(t=t.rgb(),new ls(t.r,t.g,t.b,t.opacity)):new ls}function $E(t,e,r,n){return arguments.length===1?gBe(t):new ls(t,e,r,n??1)}function ls(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}SO(ls,$E,qX(zb,{brighter(t){return t=t==null?yk:Math.pow(yk,t),new ls(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bx:Math.pow(bx,t),new ls(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ls(Mu(this.r),Mu(this.g),Mu(this.b),vk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oz,formatHex:oz,formatHex8:mBe,formatRgb:lz,toString:lz}));function oz(){return`#${vu(this.r)}${vu(this.g)}${vu(this.b)}`}function mBe(){return`#${vu(this.r)}${vu(this.g)}${vu(this.b)}${vu((isNaN(this.opacity)?1:this.opacity)*255)}`}function lz(){const t=vk(this.opacity);return`${t===1?"rgb(":"rgba("}${Mu(this.r)}, ${Mu(this.g)}, ${Mu(this.b)}${t===1?")":`, ${t})`}`}function vk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vu(t){return t=Mu(t),(t<16?"0":"")+t.toString(16)}function cz(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ui(t,e,r,n)}function VX(t){if(t instanceof Ui)return new Ui(t.h,t.s,t.l,t.opacity);if(t instanceof zb||(t=vx(t)),!t)return new Ui;if(t instanceof Ui)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,s=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(e===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Ui(o,l,c,t.opacity)}function pBe(t,e,r,n){return arguments.length===1?VX(t):new Ui(t,e,r,n??1)}function Ui(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}SO(Ui,pBe,qX(zb,{brighter(t){return t=t==null?yk:Math.pow(yk,t),new Ui(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bx:Math.pow(bx,t),new Ui(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,s=2*r-n;return new ls(V_(t>=240?t-240:t+120,s,n),V_(t,s,n),V_(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new Ui(dz(this.h),Xy(this.s),Xy(this.l),vk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=vk(this.opacity);return`${t===1?"hsl(":"hsla("}${dz(this.h)}, ${Xy(this.s)*100}%, ${Xy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function dz(t){return t=(t||0)%360,t<0?t+360:t}function Xy(t){return Math.max(0,Math.min(1,t||0))}function V_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const AO=t=>()=>t;function xBe(t,e){return function(r){return t+r*e}}function bBe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function yBe(t){return(t=+t)==1?HX:function(e,r){return r-e?bBe(e,r,t):AO(isNaN(e)?r:e)}}function HX(t,e){var r=e-t;return r?xBe(t,r):AO(isNaN(t)?e:t)}const uz=function t(e){var r=yBe(e);function n(s,i){var o=r((s=$E(s)).r,(i=$E(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=HX(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return n.gamma=t,n}(1);function vBe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=t[s]*(1-i)+e[s]*i;return n}}function kBe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function wBe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Om(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function jBe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function kk(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function NBe(t,e){var r={},n={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?r[s]=Om(t[s],e[s]):n[s]=e[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var FE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,H_=new RegExp(FE.source,"g");function _Be(t){return function(){return t}}function SBe(t){return function(e){return t(e)+""}}function ABe(t,e){var r=FE.lastIndex=H_.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=FE.exec(t))&&(s=H_.exec(e));)(i=s.index)>r&&(i=e.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:kk(n,s)})),r=H_.lastIndex;return r<e.length&&(i=e.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?SBe(c[0].x):_Be(e):(e=c.length,function(d){for(var u=0,h;u<e;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Om(t,e){var r=typeof e,n;return e==null||r==="boolean"?AO(e):(r==="number"?kk:r==="string"?(n=vx(e))?(e=n,uz):ABe:e instanceof vx?uz:e instanceof Date?jBe:kBe(e)?vBe:Array.isArray(e)?wBe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?NBe:kk)(t,e)}function EO(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function EBe(t,e){e===void 0&&(e=t,t=Om);for(var r=0,n=e.length-1,s=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(s,s=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function CBe(t){return function(){return t}}function wk(t){return+t}var hz=[0,1];function qa(t){return t}function BE(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:CBe(isNaN(e)?NaN:.5)}function TBe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function OBe(t,e,r){var n=t[0],s=t[1],i=e[0],o=e[1];return s<n?(n=BE(s,n),i=r(o,i)):(n=BE(n,s),i=r(i,o)),function(l){return i(n(l))}}function IBe(t,e,r){var n=Math.min(t.length,e.length)-1,s=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=BE(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(l){var c=Pb(t,l,1,n)-1;return i[c](s[c](l))}}function $b(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function dj(){var t=hz,e=hz,r=Om,n,s,i,o=qa,l,c,d;function u(){var f=Math.min(t.length,e.length);return o!==qa&&(o=TBe(t[0],t[f-1])),l=f>2?IBe:OBe,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(t.map(n),e,r)))(n(o(f)))}return h.invert=function(f){return o(s((d||(d=l(e,t.map(n),kk)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,wk),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),r=EO,u()},h.clamp=function(f){return arguments.length?(o=f?!0:qa,u()):o!==qa},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,g){return n=f,s=g,u()}}function CO(){return dj()(qa,qa)}function DBe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function jk(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Sg(t){return t=jk(Math.abs(t)),t?t[1]:NaN}function MBe(t,e){return function(r,n){for(var s=r.length,i=[],o=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return i.reverse().join(e)}}function LBe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var RBe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kx(t){if(!(e=RBe.exec(t)))throw new Error("invalid format: "+t);var e;return new TO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}kx.prototype=TO.prototype;function TO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}TO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function PBe(t){e:for(var e=t.length,r=1,n=-1,s;r<e;++r)switch(t[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(s+1):t}var Nk;function zBe(t,e){var r=jk(t,e);if(!r)return Nk=void 0,t.toPrecision(e);var n=r[0],s=r[1],i=s-(Nk=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+jk(t,Math.max(0,e+i-1))[0]}function fz(t,e){var r=jk(t,e);if(!r)return t+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const gz={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:DBe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>fz(t*100,e),r:fz,s:zBe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function mz(t){return t}var pz=Array.prototype.map,xz=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $Be(t){var e=t.grouping===void 0||t.thousands===void 0?mz:MBe(pz.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?mz:LBe(pz.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(h,f){h=kx(h);var g=h.fill,x=h.align,m=h.sign,p=h.symbol,b=h.zero,v=h.width,y=h.comma,w=h.precision,k=h.trim,j=h.type;j==="n"?(y=!0,j="g"):gz[j]||(w===void 0&&(w=12),k=!0,j="g"),(b||g==="0"&&x==="=")&&(b=!0,g="0",x="=");var _=(f&&f.prefix!==void 0?f.prefix:"")+(p==="$"?r:p==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():""),S=(p==="$"?n:/[%p]/.test(j)?o:"")+(f&&f.suffix!==void 0?f.suffix:""),A=gz[j],T=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E(C){var z=_,M=S,F,D,L;if(j==="c")M=A(C)+M,C="";else{C=+C;var K=C<0||1/C<0;if(C=isNaN(C)?c:A(Math.abs(C),w),k&&(C=PBe(C)),K&&+C==0&&m!=="+"&&(K=!1),z=(K?m==="("?m:l:m==="-"||m==="("?"":m)+z,M=(j==="s"&&!isNaN(C)&&Nk!==void 0?xz[8+Nk/3]:"")+M+(K&&m==="("?")":""),T){for(F=-1,D=C.length;++F<D;)if(L=C.charCodeAt(F),48>L||L>57){M=(L===46?s+C.slice(F+1):C.slice(F))+M,C=C.slice(0,F);break}}}y&&!b&&(C=e(C,1/0));var $=z.length+C.length+M.length,R=$<v?new Array(v-$+1).join(g):"";switch(y&&b&&(C=e(R+C,R.length?v-M.length:1/0),R=""),x){case"<":C=z+C+M+R;break;case"=":C=z+R+C+M;break;case"^":C=R.slice(0,$=R.length>>1)+z+C+M+R.slice($);break;default:C=R+z+C+M;break}return i(C)}return E.toString=function(){return h+""},E}function u(h,f){var g=Math.max(-8,Math.min(8,Math.floor(Sg(f)/3)))*3,x=Math.pow(10,-g),m=d((h=kx(h),h.type="f",h),{suffix:xz[8+g/3]});return function(p){return m(x*p)}}return{format:d,formatPrefix:u}}var Yy,OO,WX;FBe({thousands:",",grouping:[3],currency:["$",""]});function FBe(t){return Yy=$Be(t),OO=Yy.format,WX=Yy.formatPrefix,Yy}function BBe(t){return Math.max(0,-Sg(Math.abs(t)))}function UBe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sg(e)/3)))*3-Sg(Math.abs(t)))}function KBe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Sg(e)-Sg(t))+1}function XX(t,e,r,n){var s=PE(t,e,r),i;switch(n=kx(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=UBe(s,o))&&(n.precision=i),WX(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=KBe(s,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=BBe(s))&&(n.precision=i-(n.type==="%")*2);break}}return OO(n)}function Kd(t){var e=t.domain;return t.ticks=function(r){var n=e();return LE(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var s=e();return XX(s[0],s[s.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),s=0,i=n.length-1,o=n[s],l=n[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=RE(o,l,r),d===c)return n[s]=o,n[i]=l,e(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function _k(){var t=CO();return t.copy=function(){return $b(t,_k())},_i.apply(t,arguments),Kd(t)}function YX(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,wk),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return YX(t).unknown(e)},t=arguments.length?Array.from(t,wk):[0,1],Kd(r)}function ZX(t,e){t=t.slice();var r=0,n=t.length-1,s=t[r],i=t[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),t[r]=e.floor(s),t[n]=e.ceil(i),t}function bz(t){return Math.log(t)}function yz(t){return Math.exp(t)}function GBe(t){return-Math.log(-t)}function qBe(t){return-Math.exp(-t)}function VBe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function HBe(t){return t===10?VBe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function WBe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function vz(t){return(e,r)=>-t(-e,r)}function IO(t){const e=t(bz,yz),r=e.domain;let n=10,s,i;function o(){return s=WBe(n),i=HBe(n),r()[0]<0?(s=vz(s),i=vz(i),t(GBe,qBe)):t(bz,yz),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=s(d),g=s(u),x,m;const p=l==null?10:+l;let b=[];if(!(n%1)&&g-f<p){if(f=Math.floor(f),g=Math.ceil(g),d>0){for(;f<=g;++f)for(x=1;x<n;++x)if(m=f<0?x/i(-f):x*i(f),!(m<d)){if(m>u)break;b.push(m)}}else for(;f<=g;++f)for(x=n-1;x>=1;--x)if(m=f>0?x/i(-f):x*i(f),!(m<d)){if(m>u)break;b.push(m)}b.length*2<p&&(b=LE(d,u,p))}else b=LE(f,g,Math.min(g-f,p)).map(i);return h?b.reverse():b},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=kx(c)).precision==null&&(c.trim=!0),c=OO(c)),l===1/0)return c;const d=Math.max(1,n*l/e.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*n<n-.5&&(h*=n),h<=d?c(u):""}},e.nice=()=>r(ZX(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),e}function QX(){const t=IO(dj()).domain([1,10]);return t.copy=()=>$b(t,QX()).base(t.base()),_i.apply(t,arguments),t}function kz(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function wz(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function DO(t){var e=1,r=t(kz(e),wz(e));return r.constant=function(n){return arguments.length?t(kz(e=+n),wz(e)):e},Kd(r)}function JX(){var t=DO(dj());return t.copy=function(){return $b(t,JX()).constant(t.constant())},_i.apply(t,arguments)}function jz(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function XBe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function YBe(t){return t<0?-t*t:t*t}function MO(t){var e=t(qa,qa),r=1;function n(){return r===1?t(qa,qa):r===.5?t(XBe,YBe):t(jz(r),jz(1/r))}return e.exponent=function(s){return arguments.length?(r=+s,n()):r},Kd(e)}function LO(){var t=MO(dj());return t.copy=function(){return $b(t,LO()).exponent(t.exponent())},_i.apply(t,arguments),t}function ZBe(){return LO.apply(null,arguments).exponent(.5)}function Nz(t){return Math.sign(t)*t*t}function QBe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function eY(){var t=CO(),e=[0,1],r=!1,n;function s(i){var o=QBe(t(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return t.invert(Nz(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,wk)).map(Nz)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return eY(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},_i.apply(s,arguments),Kd(s)}function tY(){var t=[],e=[],r=[],n;function s(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=nBe(t,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:e[Pb(r,o)]}return i.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(yd),s()},i.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return tY().domain(t).range(e).unknown(n)},_i.apply(i,arguments)}function rY(){var t=0,e=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Pb(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=r?[n[r-1],e]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return rY().domain([t,e]).range(s).unknown(i)},_i.apply(Kd(o),arguments)}function nY(){var t=[.5],e=[0,1],r,n=1;function s(i){return i!=null&&i<=i?e[Pb(t,i,0,n)]:r}return s.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return nY().domain(t).range(e).unknown(r)},_i.apply(s,arguments)}const W_=new Date,X_=new Date;function Yn(t,e,r,n){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),e(i,l),t(i);while(d<i&&i<o);return c},s.filter=i=>Yn(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!i(o););else for(;--l>=0;)for(;e(o,1),!i(o););}),r&&(s.count=(i,o)=>(W_.setTime(+i),X_.setTime(+o),t(W_),t(X_),Math.floor(r(W_,X_))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Sk=Yn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Sk.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Yn(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Sk);Sk.range;const Ol=1e3,fi=Ol*60,Il=fi*60,ac=Il*24,RO=ac*7,_z=ac*30,Y_=ac*365,ku=Yn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ol)},(t,e)=>(e-t)/Ol,t=>t.getUTCSeconds());ku.range;const PO=Yn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ol)},(t,e)=>{t.setTime(+t+e*fi)},(t,e)=>(e-t)/fi,t=>t.getMinutes());PO.range;const zO=Yn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*fi)},(t,e)=>(e-t)/fi,t=>t.getUTCMinutes());zO.range;const $O=Yn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ol-t.getMinutes()*fi)},(t,e)=>{t.setTime(+t+e*Il)},(t,e)=>(e-t)/Il,t=>t.getHours());$O.range;const FO=Yn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Il)},(t,e)=>(e-t)/Il,t=>t.getUTCHours());FO.range;const Fb=Yn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fi)/ac,t=>t.getDate()-1);Fb.range;const uj=Yn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ac,t=>t.getUTCDate()-1);uj.range;const aY=Yn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ac,t=>Math.floor(t/ac));aY.range;function Eh(t){return Yn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*fi)/RO)}const hj=Eh(0),Ak=Eh(1),JBe=Eh(2),eUe=Eh(3),Ag=Eh(4),tUe=Eh(5),rUe=Eh(6);hj.range;Ak.range;JBe.range;eUe.range;Ag.range;tUe.range;rUe.range;function Ch(t){return Yn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/RO)}const fj=Ch(0),Ek=Ch(1),nUe=Ch(2),aUe=Ch(3),Eg=Ch(4),sUe=Ch(5),iUe=Ch(6);fj.range;Ek.range;nUe.range;aUe.range;Eg.range;sUe.range;iUe.range;const BO=Yn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());BO.range;const UO=Yn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());UO.range;const sc=Yn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());sc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});sc.range;const ic=Yn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ic.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});ic.range;function sY(t,e,r,n,s,i){const o=[[ku,1,Ol],[ku,5,5*Ol],[ku,15,15*Ol],[ku,30,30*Ol],[i,1,fi],[i,5,5*fi],[i,15,15*fi],[i,30,30*fi],[s,1,Il],[s,3,3*Il],[s,6,6*Il],[s,12,12*Il],[n,1,ac],[n,2,2*ac],[r,1,RO],[e,1,_z],[e,3,3*_z],[t,1,Y_]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const g=h&&typeof h.range=="function"?h:c(d,u,h),x=g?g.range(d,+u+1):[];return f?x.reverse():x}function c(d,u,h){const f=Math.abs(u-d)/h,g=NO(([,,p])=>p).right(o,f);if(g===o.length)return t.every(PE(d/Y_,u/Y_,h));if(g===0)return Sk.every(Math.max(PE(d,u,h),1));const[x,m]=o[f/o[g-1][2]<o[g][2]/f?g-1:g];return x.every(m)}return[l,c]}const[oUe,lUe]=sY(ic,UO,fj,aY,FO,zO),[cUe,dUe]=sY(sc,BO,hj,Fb,$O,PO);function Z_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Q_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function up(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function uUe(t){var e=t.dateTime,r=t.date,n=t.time,s=t.periods,i=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=hp(s),u=fp(s),h=hp(i),f=fp(i),g=hp(o),x=fp(o),m=hp(l),p=fp(l),b=hp(c),v=fp(c),y={a:L,A:K,b:$,B:R,c:null,d:Oz,e:Oz,f:MUe,g:GUe,G:VUe,H:OUe,I:IUe,j:DUe,L:iY,m:LUe,M:RUe,p:Y,q:ee,Q:Mz,s:Lz,S:PUe,u:zUe,U:$Ue,V:FUe,w:BUe,W:UUe,x:null,X:null,y:KUe,Y:qUe,Z:HUe,"%":Dz},w={a:B,A:U,b:V,B:se,c:null,d:Iz,e:Iz,f:ZUe,g:oKe,G:cKe,H:WUe,I:XUe,j:YUe,L:lY,m:QUe,M:JUe,p:Ne,q:ie,Q:Mz,s:Lz,S:eKe,u:tKe,U:rKe,V:nKe,w:aKe,W:sKe,x:null,X:null,y:iKe,Y:lKe,Z:dKe,"%":Dz},k={a:T,A:E,b:C,B:z,c:M,d:Cz,e:Cz,f:AUe,g:Ez,G:Az,H:Tz,I:Tz,j:jUe,L:SUe,m:wUe,M:NUe,p:A,q:kUe,Q:CUe,s:TUe,S:_Ue,u:pUe,U:xUe,V:bUe,w:mUe,W:yUe,x:F,X:D,y:Ez,Y:Az,Z:vUe,"%":EUe};y.x=j(r,y),y.X=j(n,y),y.c=j(e,y),w.x=j(r,w),w.X=j(n,w),w.c=j(e,w);function j(q,H){return function(Z){var te=[],ge=-1,Ce=0,Le=q.length,He,le,Re;for(Z instanceof Date||(Z=new Date(+Z));++ge<Le;)q.charCodeAt(ge)===37&&(te.push(q.slice(Ce,ge)),(le=Sz[He=q.charAt(++ge)])!=null?He=q.charAt(++ge):le=He==="e"?" ":"0",(Re=H[He])&&(He=Re(Z,le)),te.push(He),Ce=ge+1);return te.push(q.slice(Ce,ge)),te.join("")}}function _(q,H){return function(Z){var te=up(1900,void 0,1),ge=S(te,q,Z+="",0),Ce,Le;if(ge!=Z.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(H&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(Ce=Q_(up(te.y,0,1)),Le=Ce.getUTCDay(),Ce=Le>4||Le===0?Ek.ceil(Ce):Ek(Ce),Ce=uj.offset(Ce,(te.V-1)*7),te.y=Ce.getUTCFullYear(),te.m=Ce.getUTCMonth(),te.d=Ce.getUTCDate()+(te.w+6)%7):(Ce=Z_(up(te.y,0,1)),Le=Ce.getDay(),Ce=Le>4||Le===0?Ak.ceil(Ce):Ak(Ce),Ce=Fb.offset(Ce,(te.V-1)*7),te.y=Ce.getFullYear(),te.m=Ce.getMonth(),te.d=Ce.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Le="Z"in te?Q_(up(te.y,0,1)).getUTCDay():Z_(up(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Le+5)%7:te.w+te.U*7-(Le+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,Q_(te)):Z_(te)}}function S(q,H,Z,te){for(var ge=0,Ce=H.length,Le=Z.length,He,le;ge<Ce;){if(te>=Le)return-1;if(He=H.charCodeAt(ge++),He===37){if(He=H.charAt(ge++),le=k[He in Sz?H.charAt(ge++):He],!le||(te=le(q,Z,te))<0)return-1}else if(He!=Z.charCodeAt(te++))return-1}return te}function A(q,H,Z){var te=d.exec(H.slice(Z));return te?(q.p=u.get(te[0].toLowerCase()),Z+te[0].length):-1}function T(q,H,Z){var te=g.exec(H.slice(Z));return te?(q.w=x.get(te[0].toLowerCase()),Z+te[0].length):-1}function E(q,H,Z){var te=h.exec(H.slice(Z));return te?(q.w=f.get(te[0].toLowerCase()),Z+te[0].length):-1}function C(q,H,Z){var te=b.exec(H.slice(Z));return te?(q.m=v.get(te[0].toLowerCase()),Z+te[0].length):-1}function z(q,H,Z){var te=m.exec(H.slice(Z));return te?(q.m=p.get(te[0].toLowerCase()),Z+te[0].length):-1}function M(q,H,Z){return S(q,e,H,Z)}function F(q,H,Z){return S(q,r,H,Z)}function D(q,H,Z){return S(q,n,H,Z)}function L(q){return o[q.getDay()]}function K(q){return i[q.getDay()]}function $(q){return c[q.getMonth()]}function R(q){return l[q.getMonth()]}function Y(q){return s[+(q.getHours()>=12)]}function ee(q){return 1+~~(q.getMonth()/3)}function B(q){return o[q.getUTCDay()]}function U(q){return i[q.getUTCDay()]}function V(q){return c[q.getUTCMonth()]}function se(q){return l[q.getUTCMonth()]}function Ne(q){return s[+(q.getUTCHours()>=12)]}function ie(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var H=j(q+="",y);return H.toString=function(){return q},H},parse:function(q){var H=_(q+="",!1);return H.toString=function(){return q},H},utcFormat:function(q){var H=j(q+="",w);return H.toString=function(){return q},H},utcParse:function(q){var H=_(q+="",!0);return H.toString=function(){return q},H}}}var Sz={"-":"",_:" ",0:"0"},la=/^\s*\d+/,hUe=/^%/,fUe=/[\\^$*+?|[\]().{}]/g;function mr(t,e,r){var n=t<0?"-":"",s=(n?-t:t)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(e)+s:s)}function gUe(t){return t.replace(fUe,"\\$&")}function hp(t){return new RegExp("^(?:"+t.map(gUe).join("|")+")","i")}function fp(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function mUe(t,e,r){var n=la.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function pUe(t,e,r){var n=la.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function xUe(t,e,r){var n=la.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function bUe(t,e,r){var n=la.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function yUe(t,e,r){var n=la.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Az(t,e,r){var n=la.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Ez(t,e,r){var n=la.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function vUe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function kUe(t,e,r){var n=la.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function wUe(t,e,r){var n=la.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Cz(t,e,r){var n=la.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function jUe(t,e,r){var n=la.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Tz(t,e,r){var n=la.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function NUe(t,e,r){var n=la.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function _Ue(t,e,r){var n=la.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function SUe(t,e,r){var n=la.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function AUe(t,e,r){var n=la.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function EUe(t,e,r){var n=hUe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function CUe(t,e,r){var n=la.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function TUe(t,e,r){var n=la.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Oz(t,e){return mr(t.getDate(),e,2)}function OUe(t,e){return mr(t.getHours(),e,2)}function IUe(t,e){return mr(t.getHours()%12||12,e,2)}function DUe(t,e){return mr(1+Fb.count(sc(t),t),e,3)}function iY(t,e){return mr(t.getMilliseconds(),e,3)}function MUe(t,e){return iY(t,e)+"000"}function LUe(t,e){return mr(t.getMonth()+1,e,2)}function RUe(t,e){return mr(t.getMinutes(),e,2)}function PUe(t,e){return mr(t.getSeconds(),e,2)}function zUe(t){var e=t.getDay();return e===0?7:e}function $Ue(t,e){return mr(hj.count(sc(t)-1,t),e,2)}function oY(t){var e=t.getDay();return e>=4||e===0?Ag(t):Ag.ceil(t)}function FUe(t,e){return t=oY(t),mr(Ag.count(sc(t),t)+(sc(t).getDay()===4),e,2)}function BUe(t){return t.getDay()}function UUe(t,e){return mr(Ak.count(sc(t)-1,t),e,2)}function KUe(t,e){return mr(t.getFullYear()%100,e,2)}function GUe(t,e){return t=oY(t),mr(t.getFullYear()%100,e,2)}function qUe(t,e){return mr(t.getFullYear()%1e4,e,4)}function VUe(t,e){var r=t.getDay();return t=r>=4||r===0?Ag(t):Ag.ceil(t),mr(t.getFullYear()%1e4,e,4)}function HUe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+mr(e/60|0,"0",2)+mr(e%60,"0",2)}function Iz(t,e){return mr(t.getUTCDate(),e,2)}function WUe(t,e){return mr(t.getUTCHours(),e,2)}function XUe(t,e){return mr(t.getUTCHours()%12||12,e,2)}function YUe(t,e){return mr(1+uj.count(ic(t),t),e,3)}function lY(t,e){return mr(t.getUTCMilliseconds(),e,3)}function ZUe(t,e){return lY(t,e)+"000"}function QUe(t,e){return mr(t.getUTCMonth()+1,e,2)}function JUe(t,e){return mr(t.getUTCMinutes(),e,2)}function eKe(t,e){return mr(t.getUTCSeconds(),e,2)}function tKe(t){var e=t.getUTCDay();return e===0?7:e}function rKe(t,e){return mr(fj.count(ic(t)-1,t),e,2)}function cY(t){var e=t.getUTCDay();return e>=4||e===0?Eg(t):Eg.ceil(t)}function nKe(t,e){return t=cY(t),mr(Eg.count(ic(t),t)+(ic(t).getUTCDay()===4),e,2)}function aKe(t){return t.getUTCDay()}function sKe(t,e){return mr(Ek.count(ic(t)-1,t),e,2)}function iKe(t,e){return mr(t.getUTCFullYear()%100,e,2)}function oKe(t,e){return t=cY(t),mr(t.getUTCFullYear()%100,e,2)}function lKe(t,e){return mr(t.getUTCFullYear()%1e4,e,4)}function cKe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Eg(t):Eg.ceil(t),mr(t.getUTCFullYear()%1e4,e,4)}function dKe(){return"+0000"}function Dz(){return"%"}function Mz(t){return+t}function Lz(t){return Math.floor(+t/1e3)}var Kh,dY,uY;uKe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uKe(t){return Kh=uUe(t),dY=Kh.format,Kh.parse,uY=Kh.utcFormat,Kh.utcParse,Kh}function hKe(t){return new Date(t)}function fKe(t){return t instanceof Date?+t:+new Date(+t)}function KO(t,e,r,n,s,i,o,l,c,d){var u=CO(),h=u.invert,f=u.domain,g=d(".%L"),x=d(":%S"),m=d("%I:%M"),p=d("%I %p"),b=d("%a %d"),v=d("%b %d"),y=d("%B"),w=d("%Y");function k(j){return(c(j)<j?g:l(j)<j?x:o(j)<j?m:i(j)<j?p:n(j)<j?s(j)<j?b:v:r(j)<j?y:w)(j)}return u.invert=function(j){return new Date(h(j))},u.domain=function(j){return arguments.length?f(Array.from(j,fKe)):f().map(hKe)},u.ticks=function(j){var _=f();return t(_[0],_[_.length-1],j??10)},u.tickFormat=function(j,_){return _==null?k:d(_)},u.nice=function(j){var _=f();return(!j||typeof j.range!="function")&&(j=e(_[0],_[_.length-1],j??10)),j?f(ZX(_,j)):u},u.copy=function(){return $b(u,KO(t,e,r,n,s,i,o,l,c,d))},u}function gKe(){return _i.apply(KO(cUe,dUe,sc,BO,hj,Fb,$O,PO,ku,dY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mKe(){return _i.apply(KO(oUe,lUe,ic,UO,fj,uj,FO,zO,ku,uY).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gj(){var t=0,e=1,r,n,s,i,o=qa,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([t,e]=h,r=i(t=+t),n=i(e=+e),s=r===n?0:1/(n-r),d):[t,e]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var g,x;return arguments.length?([g,x]=f,o=h(g,x),d):[o(0),o(1)]}}return d.range=u(Om),d.rangeRound=u(EO),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,r=h(t),n=h(e),s=r===n?0:1/(n-r),d}}function Gd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function hY(){var t=Kd(gj()(qa));return t.copy=function(){return Gd(t,hY())},yc.apply(t,arguments)}function fY(){var t=IO(gj()).domain([1,10]);return t.copy=function(){return Gd(t,fY()).base(t.base())},yc.apply(t,arguments)}function gY(){var t=DO(gj());return t.copy=function(){return Gd(t,gY()).constant(t.constant())},yc.apply(t,arguments)}function GO(){var t=MO(gj());return t.copy=function(){return Gd(t,GO()).exponent(t.exponent())},yc.apply(t,arguments)}function pKe(){return GO.apply(null,arguments).exponent(.5)}function mY(){var t=[],e=qa;function r(n){if(n!=null&&!isNaN(n=+n))return e((Pb(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let s of n)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(yd),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,s)=>e(s/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>rBe(t,i/n))},r.copy=function(){return mY(e).domain(t)},yc.apply(r,arguments)}function mj(){var t=0,e=.5,r=1,n=1,s,i,o,l,c,d=qa,u,h=!1,f;function g(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-i)*(n*m<n*i?l:c),d(h?Math.max(0,Math.min(1,m)):m))}g.domain=function(m){return arguments.length?([t,e,r]=m,s=u(t=+t),i=u(e=+e),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,g):[t,e,r]},g.clamp=function(m){return arguments.length?(h=!!m,g):h},g.interpolator=function(m){return arguments.length?(d=m,g):d};function x(m){return function(p){var b,v,y;return arguments.length?([b,v,y]=p,d=EBe(m,[b,v,y]),g):[d(0),d(.5),d(1)]}}return g.range=x(Om),g.rangeRound=x(EO),g.unknown=function(m){return arguments.length?(f=m,g):f},function(m){return u=m,s=m(t),i=m(e),o=m(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,g}}function pY(){var t=Kd(mj()(qa));return t.copy=function(){return Gd(t,pY())},yc.apply(t,arguments)}function xY(){var t=IO(mj()).domain([.1,1,10]);return t.copy=function(){return Gd(t,xY()).base(t.base())},yc.apply(t,arguments)}function bY(){var t=DO(mj());return t.copy=function(){return Gd(t,bY()).constant(t.constant())},yc.apply(t,arguments)}function qO(){var t=MO(mj());return t.copy=function(){return Gd(t,qO()).exponent(t.exponent())},yc.apply(t,arguments)}function xKe(){return qO.apply(null,arguments).exponent(.5)}const Rz=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:xx,scaleDiverging:pY,scaleDivergingLog:xY,scaleDivergingPow:qO,scaleDivergingSqrt:xKe,scaleDivergingSymlog:bY,scaleIdentity:YX,scaleImplicit:zE,scaleLinear:_k,scaleLog:QX,scaleOrdinal:_O,scalePoint:u0,scalePow:LO,scaleQuantile:tY,scaleQuantize:rY,scaleRadial:eY,scaleSequential:hY,scaleSequentialLog:fY,scaleSequentialPow:GO,scaleSequentialQuantile:mY,scaleSequentialSqrt:pKe,scaleSequentialSymlog:gY,scaleSqrt:ZBe,scaleSymlog:JX,scaleThreshold:nY,scaleTime:gKe,scaleUtc:mKe,tickFormat:XX},Symbol.toStringTag,{value:"Module"}));var bKe=km;function yKe(t,e,r){for(var n=-1,s=t.length;++n<s;){var i=t[n],o=e(i);if(o!=null&&(l===void 0?o===o&&!bKe(o):r(o,l)))var l=o,c=i}return c}var pj=yKe;function vKe(t,e){return t>e}var yY=vKe,kKe=pj,wKe=yY,jKe=Cm;function NKe(t){return t&&t.length?kKe(t,jKe,wKe):void 0}var _Ke=NKe;const Jc=Vt(_Ke);function SKe(t,e){return t<e}var vY=SKe,AKe=pj,EKe=vY,CKe=Cm;function TKe(t){return t&&t.length?AKe(t,CKe,EKe):void 0}var OKe=TKe;const xj=Vt(OKe);var IKe=aO,DKe=dl,MKe=CX,LKe=ms;function RKe(t,e){var r=LKe(t)?IKe:MKe;return r(t,DKe(e))}var PKe=RKe,zKe=AX,$Ke=PKe;function FKe(t,e){return zKe($Ke(t,e),1)}var BKe=FKe;const UKe=Vt(BKe);var KKe=yO;function GKe(t,e){return KKe(t,e)}var qKe=GKe;const eh=Vt(qKe);var Im=1e9,VKe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},HO,on=!0,ki="[DecimalError] ",Lu=ki+"Invalid argument: ",VO=ki+"Exponent out of range: ",Dm=Math.floor,hu=Math.pow,HKe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es,ea=1e7,Jr=7,kY=9007199254740991,Ck=Dm(kY/Jr),dt={};dt.absoluteValue=dt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};dt.comparedTo=dt.cmp=function(t){var e,r,n,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,s=t.d.length,e=0,r=n<s?n:s;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};dt.decimalPlaces=dt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Jr;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};dt.dividedBy=dt.div=function(t){return Bl(this,new this.constructor(t))};dt.dividedToIntegerBy=dt.idiv=function(t){var e=this,r=e.constructor;return Pr(Bl(e,new r(t),0,1),r.precision)};dt.equals=dt.eq=function(t){return!this.cmp(t)};dt.exponent=function(){return Ln(this)};dt.greaterThan=dt.gt=function(t){return this.cmp(t)>0};dt.greaterThanOrEqualTo=dt.gte=function(t){return this.cmp(t)>=0};dt.isInteger=dt.isint=function(){return this.e>this.d.length-2};dt.isNegative=dt.isneg=function(){return this.s<0};dt.isPositive=dt.ispos=function(){return this.s>0};dt.isZero=function(){return this.s===0};dt.lessThan=dt.lt=function(t){return this.cmp(t)<0};dt.lessThanOrEqualTo=dt.lte=function(t){return this.cmp(t)<1};dt.logarithm=dt.log=function(t){var e,r=this,n=r.constructor,s=n.precision,i=s+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Es))throw Error(ki+"NaN");if(r.s<1)throw Error(ki+(r.s?"NaN":"-Infinity"));return r.eq(Es)?new n(0):(on=!1,e=Bl(wx(r,i),wx(t,i),i),on=!0,Pr(e,s))};dt.minus=dt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?NY(e,t):wY(e,(t.s=-t.s,t))};dt.modulo=dt.mod=function(t){var e,r=this,n=r.constructor,s=n.precision;if(t=new n(t),!t.s)throw Error(ki+"NaN");return r.s?(on=!1,e=Bl(r,t,0,1).times(t),on=!0,r.minus(e)):Pr(new n(r),s)};dt.naturalExponential=dt.exp=function(){return jY(this)};dt.naturalLogarithm=dt.ln=function(){return wx(this)};dt.negated=dt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};dt.plus=dt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?wY(e,t):NY(e,(t.s=-t.s,t))};dt.precision=dt.sd=function(t){var e,r,n,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Lu+t);if(e=Ln(s)+1,n=s.d.length-1,r=n*Jr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};dt.squareRoot=dt.sqrt=function(){var t,e,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ki+"NaN")}for(t=Ln(l),on=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=Oo(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Dm((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(Bl(l,i,o+2)).times(.5),Oo(i.d).slice(0,o)===(e=Oo(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(Pr(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(e!="9999")break;o+=4}return on=!0,Pr(n,r)};dt.times=dt.mul=function(t){var e,r,n,s,i,o,l,c,d,u=this,h=u.constructor,f=u.d,g=(t=new h(t)).d;if(!u.s||!t.s)return new h(0);for(t.s*=u.s,r=u.e+t.e,c=f.length,d=g.length,c<d&&(i=f,f=g,g=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(e=0,s=c+n;s>n;)l=i[s]+g[n]*f[s-n-1]+e,i[s--]=l%ea|0,e=l/ea|0;i[s]=(i[s]+e)%ea|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,on?Pr(t,h.precision):t};dt.toDecimalPlaces=dt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(nl(t,0,Im),e===void 0?e=n.rounding:nl(e,0,8),Pr(r,t+Ln(r)+1,e))};dt.toExponential=function(t,e){var r,n=this,s=n.constructor;return t===void 0?r=th(n,!0):(nl(t,0,Im),e===void 0?e=s.rounding:nl(e,0,8),n=Pr(new s(n),t+1,e),r=th(n,!0,t+1)),r};dt.toFixed=function(t,e){var r,n,s=this,i=s.constructor;return t===void 0?th(s):(nl(t,0,Im),e===void 0?e=i.rounding:nl(e,0,8),n=Pr(new i(s),t+Ln(s)+1,e),r=th(n.abs(),!1,t+Ln(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};dt.toInteger=dt.toint=function(){var t=this,e=t.constructor;return Pr(new e(t),Ln(t)+1,e.rounding)};dt.toNumber=function(){return+this};dt.toPower=dt.pow=function(t){var e,r,n,s,i,o,l=this,c=l.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(Es);if(l=new c(l),!l.s){if(t.s<1)throw Error(ki+"Infinity");return l}if(l.eq(Es))return l;if(n=c.precision,t.eq(Es))return Pr(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=l.s,o){if((r=u<0?-u:u)<=kY){for(s=new c(Es),e=Math.ceil(n/Jr+4),on=!1;r%2&&(s=s.times(l),zz(s.d,e)),r=Dm(r/2),r!==0;)l=l.times(l),zz(l.d,e);return on=!0,t.s<0?new c(Es).div(s):Pr(s,n)}}else if(i<0)throw Error(ki+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,on=!1,s=t.times(wx(l,n+d)),on=!0,s=jY(s),s.s=i,s};dt.toPrecision=function(t,e){var r,n,s=this,i=s.constructor;return t===void 0?(r=Ln(s),n=th(s,r<=i.toExpNeg||r>=i.toExpPos)):(nl(t,1,Im),e===void 0?e=i.rounding:nl(e,0,8),s=Pr(new i(s),t,e),r=Ln(s),n=th(s,t<=r||r<=i.toExpNeg,t)),n};dt.toSignificantDigits=dt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(nl(t,1,Im),e===void 0?e=n.rounding:nl(e,0,8)),Pr(new n(r),t,e)};dt.toString=dt.valueOf=dt.val=dt.toJSON=dt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ln(t),r=t.constructor;return th(t,e<=r.toExpNeg||e>=r.toExpPos)};function wY(t,e){var r,n,s,i,o,l,c,d,u=t.constructor,h=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),on?Pr(e,h):e;if(c=t.d,d=e.d,o=t.e,s=e.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,s=o,l=c.length),o=Math.ceil(h/Jr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/ea|0,c[i]%=ea;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,on?Pr(e,h):e}function nl(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Lu+t)}function Oo(t){var e,r,n,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)n=t[e]+"",r=Jr-n.length,r&&(i+=Mc(r)),i+=n;o=t[e],n=o+"",r=Jr-n.length,r&&(i+=Mc(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Bl=function(){function t(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%ea|0,o=i/ea|0;return o&&n.unshift(o),n}function e(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*ea+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,d,u,h,f,g,x,m,p,b,v,y,w,k,j,_,S,A=n.constructor,T=n.s==s.s?1:-1,E=n.d,C=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(ki+"Division by zero");for(c=n.e-s.e,_=C.length,k=E.length,g=new A(T),x=g.d=[],d=0;C[d]==(E[d]||0);)++d;if(C[d]>(E[d]||0)&&--c,i==null?v=i=A.precision:o?v=i+(Ln(n)-Ln(s))+1:v=i,v<0)return new A(0);if(v=v/Jr+2|0,d=0,_==1)for(u=0,C=C[0],v++;(d<k||u)&&v--;d++)y=u*ea+(E[d]||0),x[d]=y/C|0,u=y%C|0;else{for(u=ea/(C[0]+1)|0,u>1&&(C=t(C,u),E=t(E,u),_=C.length,k=E.length),w=_,m=E.slice(0,_),p=m.length;p<_;)m[p++]=0;S=C.slice(),S.unshift(0),j=C[0],C[1]>=ea/2&&++j;do u=0,l=e(C,m,_,p),l<0?(b=m[0],_!=p&&(b=b*ea+(m[1]||0)),u=b/j|0,u>1?(u>=ea&&(u=ea-1),h=t(C,u),f=h.length,p=m.length,l=e(h,m,f,p),l==1&&(u--,r(h,_<f?S:C,f))):(u==0&&(l=u=1),h=C.slice()),f=h.length,f<p&&h.unshift(0),r(m,h,p),l==-1&&(p=m.length,l=e(C,m,_,p),l<1&&(u++,r(m,_<p?S:C,p))),p=m.length):l===0&&(u++,m=[0]),x[d++]=u,l&&m[0]?m[p++]=E[w]||0:(m=[E[w]],p=1);while((w++<k||m[0]!==void 0)&&v--)}return x[0]||x.shift(),g.e=c,Pr(g,o?i+Ln(g)+1:i)}}();function jY(t,e){var r,n,s,i,o,l,c=0,d=0,u=t.constructor,h=u.precision;if(Ln(t)>16)throw Error(VO+Ln(t));if(!t.s)return new u(Es);for(on=!1,l=h,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(n=Math.log(hu(2,d))/Math.LN10*2+5|0,l+=n,r=s=i=new u(Es),u.precision=l;;){if(s=Pr(s.times(t),l),r=r.times(++c),o=i.plus(Bl(s,r,l)),Oo(o.d).slice(0,l)===Oo(i.d).slice(0,l)){for(;d--;)i=Pr(i.times(i),l);return u.precision=h,e==null?(on=!0,Pr(i,h)):i}i=o}}function Ln(t){for(var e=t.e*Jr,r=t.d[0];r>=10;r/=10)e++;return e}function J_(t,e,r){if(e>t.LN10.sd())throw on=!0,r&&(t.precision=r),Error(ki+"LN10 precision limit exceeded");return Pr(new t(t.LN10),e)}function Mc(t){for(var e="";t--;)e+="0";return e}function wx(t,e){var r,n,s,i,o,l,c,d,u,h=1,f=10,g=t,x=g.d,m=g.constructor,p=m.precision;if(g.s<1)throw Error(ki+(g.s?"NaN":"-Infinity"));if(g.eq(Es))return new m(0);if(e==null?(on=!1,d=p):d=e,g.eq(10))return e==null&&(on=!0),J_(m,d);if(d+=f,m.precision=d,r=Oo(x),n=r.charAt(0),i=Ln(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(t),r=Oo(g.d),n=r.charAt(0),h++;i=Ln(g),n>1?(g=new m("0."+r),i++):g=new m(n+"."+r.slice(1))}else return c=J_(m,d+2,p).times(i+""),g=wx(new m(n+"."+r.slice(1)),d-f).plus(c),m.precision=p,e==null?(on=!0,Pr(g,p)):g;for(l=o=g=Bl(g.minus(Es),g.plus(Es),d),u=Pr(g.times(g),d),s=3;;){if(o=Pr(o.times(u),d),c=l.plus(Bl(o,new m(s),d)),Oo(c.d).slice(0,d)===Oo(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(J_(m,d+2,p).times(i+""))),l=Bl(l,new m(h),d),m.precision=p,e==null?(on=!0,Pr(l,p)):l;l=c,s+=2}}function Pz(t,e){var r,n,s;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(n,s),e){if(s-=n,r=r-n-1,t.e=Dm(r/Jr),t.d=[],n=(r+1)%Jr,r<0&&(n+=Jr),n<s){for(n&&t.d.push(+e.slice(0,n)),s-=Jr;n<s;)t.d.push(+e.slice(n,n+=Jr));e=e.slice(n),n=Jr-e.length}else n-=s;for(;n--;)e+="0";if(t.d.push(+e),on&&(t.e>Ck||t.e<-Ck))throw Error(VO+r)}else t.s=0,t.e=0,t.d=[0];return t}function Pr(t,e,r){var n,s,i,o,l,c,d,u,h=t.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Jr,s=e,d=h[u=0];else{if(u=Math.ceil((n+1)/Jr),i=h.length,u>=i)return t;for(d=i=h[u],o=1;i>=10;i/=10)o++;n%=Jr,s=n-Jr+o}if(r!==void 0&&(i=hu(10,o-s-1),l=d/i%10|0,c=e<0||h[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?d/hu(10,o-s):0:h[u-1])%10&1||r==(t.s<0?8:7))),e<1||!h[0])return c?(i=Ln(t),h.length=1,e=e-i-1,h[0]=hu(10,(Jr-e%Jr)%Jr),t.e=Dm(-e/Jr)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=hu(10,Jr-n),h[u]=s>0?(d/hu(10,o-s)%hu(10,s)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==ea&&(h[0]=1,++t.e);break}else{if(h[u]+=i,h[u]!=ea)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(on&&(t.e>Ck||t.e<-Ck))throw Error(VO+Ln(t));return t}function NY(t,e){var r,n,s,i,o,l,c,d,u,h,f=t.constructor,g=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),on?Pr(e,g):e;if(c=t.d,h=e.d,n=e.e,d=t.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,n=d,l=c.length),s=Math.max(Math.ceil(g/Jr),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){u=c[s]<h[s];break}o=0}for(u&&(r=c,c=h,h=r,e.s=-e.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=ea-1;--c[i],c[s]+=ea}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,on?Pr(e,g):e):new f(0)}function th(t,e,r){var n,s=Ln(t),i=Oo(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Mc(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Mc(-s-1)+i,r&&(n=r-o)>0&&(i+=Mc(n))):s>=o?(i+=Mc(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Mc(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Mc(n))),t.s<0?"-"+i:i}function zz(t,e){if(t.length>e)return t.length=e,!0}function _Y(t){var e,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Lu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Pz(o,i.toString())}else if(typeof i!="string")throw Error(Lu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,HKe.test(i))Pz(o,i);else throw Error(Lu+i)}if(s.prototype=dt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=_Y,s.config=s.set=WKe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return s.config(t),s}function WKe(t){if(!t||typeof t!="object")throw Error(ki+"Object expected");var e,r,n,s=["precision",1,Im,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((n=t[r=s[e]])!==void 0)if(Dm(n)===n&&n>=s[e+1]&&n<=s[e+2])this[r]=n;else throw Error(Lu+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Lu+r+": "+n);return this}var HO=_Y(VKe);Es=new HO(1);const Or=HO;function XKe(t){return JKe(t)||QKe(t)||ZKe(t)||YKe()}function YKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZKe(t,e){if(t){if(typeof t=="string")return UE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UE(t,e)}}function QKe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function JKe(t){if(Array.isArray(t))return UE(t)}function UE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var eGe=function(e){return e},SY={},AY=function(e){return e===SY},$z=function(e){return function r(){return arguments.length===0||arguments.length===1&&AY(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},tGe=function t(e,r){return e===1?r:$z(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==SY}).length;return o>=e?r.apply(void 0,s):t(e-o,$z(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=s.map(function(h){return AY(h)?c.shift():h});return r.apply(void 0,XKe(u).concat(c))}))})},bj=function(e){return tGe(e.length,e)},KE=function(e,r){for(var n=[],s=e;s<r;++s)n[s-e]=s;return n},rGe=bj(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),nGe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return eGe;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},GE=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},EY=function(e){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=e.apply(void 0,i)),n}};function aGe(t){var e;return t===0?e=1:e=Math.floor(new Or(t).abs().log(10).toNumber())+1,e}function sGe(t,e,r){for(var n=new Or(t),s=0,i=[];n.lt(e)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var iGe=bj(function(t,e,r){var n=+t,s=+e;return n+r*(s-n)}),oGe=bj(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),lGe=bj(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const yj={rangeStep:sGe,getDigitCount:aGe,interpolateNumber:iGe,uninterpolateNumber:oGe,uninterpolateTruncation:lGe};function qE(t){return uGe(t)||dGe(t)||CY(t)||cGe()}function cGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dGe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function uGe(t){if(Array.isArray(t))return VE(t)}function jx(t,e){return gGe(t)||fGe(t,e)||CY(t,e)||hGe()}function hGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CY(t,e){if(t){if(typeof t=="string")return VE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VE(t,e)}}function VE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fGe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function gGe(t){if(Array.isArray(t))return t}function TY(t){var e=jx(t,2),r=e[0],n=e[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function OY(t,e,r){if(t.lte(0))return new Or(0);var n=yj.getDigitCount(t.toNumber()),s=new Or(10).pow(n),i=t.div(s),o=n!==1?.05:.1,l=new Or(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return e?c:new Or(Math.ceil(c))}function mGe(t,e,r){var n=1,s=new Or(t);if(!s.isint()&&r){var i=Math.abs(t);i<1?(n=new Or(10).pow(yj.getDigitCount(t)-1),s=new Or(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Or(Math.floor(t)))}else t===0?s=new Or(Math.floor((e-1)/2)):r||(s=new Or(Math.floor(t)));var o=Math.floor((e-1)/2),l=nGe(rGe(function(c){return s.add(new Or(c-o).mul(n)).toNumber()}),KE);return l(0,e)}function IY(t,e,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Or(0),tickMin:new Or(0),tickMax:new Or(0)};var i=OY(new Or(e).sub(t).div(r-1),n,s),o;t<=0&&e>=0?o=new Or(0):(o=new Or(t).add(e).div(2),o=o.sub(new Or(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),c=Math.ceil(new Or(e).sub(o).div(i).toNumber()),d=l+c+1;return d>r?IY(t,e,r,n,s+1):(d<r&&(c=e>0?c+(r-d):c,l=e>0?l:l+(r-d)),{step:i,tickMin:o.sub(new Or(l).mul(i)),tickMax:o.add(new Or(c).mul(i))})}function pGe(t){var e=jx(t,2),r=e[0],n=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=TY([r,n]),c=jx(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(qE(KE(0,s-1).map(function(){return 1/0}))):[].concat(qE(KE(0,s-1).map(function(){return-1/0})),[u]);return r>n?GE(h):h}if(d===u)return mGe(d,s,i);var f=IY(d,u,o,i),g=f.step,x=f.tickMin,m=f.tickMax,p=yj.rangeStep(x,m.add(new Or(.1).mul(g)),g);return r>n?GE(p):p}function xGe(t,e){var r=jx(t,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=TY([n,s]),l=jx(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[n,s];if(c===d)return[c];var u=Math.max(e,2),h=OY(new Or(d).sub(c).div(u-1),i,0),f=[].concat(qE(yj.rangeStep(new Or(c),new Or(d).sub(new Or(.99).mul(h)),h)),[d]);return n>s?GE(f):f}var bGe=EY(pGe),yGe=EY(xGe),vGe="Invariant failed";function rh(t,e){throw new Error(vGe)}var kGe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function Tk(){return Tk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tk.apply(this,arguments)}function wGe(t,e){return SGe(t)||_Ge(t,e)||NGe(t,e)||jGe()}function jGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NGe(t,e){if(t){if(typeof t=="string")return Fz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fz(t,e)}}function Fz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _Ge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function SGe(t){if(Array.isArray(t))return t}function AGe(t,e){if(t==null)return{};var r=EGe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function EGe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function CGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TGe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LY(n.key),n)}}function OGe(t,e,r){return e&&TGe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IGe(t,e,r){return e=Ok(e),DGe(t,DY()?Reflect.construct(e,r||[],Ok(t).constructor):e.apply(t,r))}function DGe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MGe(t)}function MGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DY=function(){return!!t})()}function Ok(t){return Ok=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ok(t)}function LGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HE(t,e)}function HE(t,e){return HE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},HE(t,e)}function MY(t,e,r){return e=LY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LY(t){var e=RGe(t,"string");return Cg(e)=="symbol"?e:e+""}function RGe(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bb=function(t){function e(){return CGe(this,e),IGe(this,e,arguments)}return LGe(e,t),OGe(e,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,d=n.dataPointFormatter,u=n.xAxis,h=n.yAxis,f=AGe(n,kGe),g=bt(f,!1);this.props.direction==="x"&&u.type!=="number"&&rh();var x=c.map(function(m){var p=d(m,l),b=p.x,v=p.y,y=p.value,w=p.errorVal;if(!w)return null;var k=[],j,_;if(Array.isArray(w)){var S=wGe(w,2);j=S[0],_=S[1]}else j=_=w;if(i==="vertical"){var A=u.scale,T=v+s,E=T+o,C=T-o,z=A(y-j),M=A(y+_);k.push({x1:M,y1:E,x2:M,y2:C}),k.push({x1:z,y1:T,x2:M,y2:T}),k.push({x1:z,y1:E,x2:z,y2:C})}else if(i==="horizontal"){var F=h.scale,D=b+s,L=D-o,K=D+o,$=F(y-j),R=F(y+_);k.push({x1:L,y1:R,x2:K,y2:R}),k.push({x1:D,y1:$,x2:D,y2:R}),k.push({x1:L,y1:$,x2:K,y2:$})}return ae.createElement(Jt,Tk({className:"recharts-errorBar",key:"bar-".concat(k.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},g),k.map(function(Y){return ae.createElement("line",Tk({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return ae.createElement(Jt,{className:"recharts-errorBars"},x)}}])}(ae.Component);MY(Bb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});MY(Bb,"displayName","ErrorBar");function Nx(t){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nx(t)}function Bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function tu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bz(Object(r),!0).forEach(function(n){PGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PGe(t,e,r){return e=zGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zGe(t){var e=$Ge(t,"string");return Nx(e)=="symbol"?e:e+""}function $Ge(t,e){if(Nx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RY=function(e){var r=e.children,n=e.formattedGraphicalItems,s=e.legendWidth,i=e.legendContent,o=Ns(r,xd);if(!o)return null;var l=xd.defaultProps,c=l!==void 0?tu(tu({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(n||[]).reduce(function(u,h){var f=h.item,g=h.props,x=g.sectors||g.data||[];return u.concat(x.map(function(m){return{type:o.props.iconType||f.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):d=(n||[]).map(function(u){var h=u.item,f=h.type.defaultProps,g=f!==void 0?tu(tu({},f),h.props):{},x=g.dataKey,m=g.name,p=g.legendType,b=g.hide;return{inactive:b,dataKey:x,type:c.iconType||p||"square",color:WO(h),value:m||x,payload:g}}),tu(tu(tu({},c),xd.getWithHeight(o,s)),{},{payload:d,item:o})};function _x(t){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_x(t)}function Uz(t){return KGe(t)||UGe(t)||BGe(t)||FGe()}function FGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BGe(t,e){if(t){if(typeof t=="string")return WE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WE(t,e)}}function UGe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function KGe(t){if(Array.isArray(t))return WE(t)}function WE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Kz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function pn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kz(Object(r),!0).forEach(function(n){Zf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zf(t,e,r){return e=GGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GGe(t){var e=qGe(t,"string");return _x(e)=="symbol"?e:e+""}function qGe(t,e){if(_x(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_x(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wn(t,e,r){return Dt(t)||Dt(e)?r:Wn(e)?$s(t,e,r):St(e)?e(t):r}function h0(t,e,r,n){var s=UKe(t,function(l){return wn(l,e)});if(r==="number"){var i=s.filter(function(l){return Ve(l)||parseFloat(l)});return i.length?[xj(i),Jc(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!Dt(l)}):s;return o.map(function(l){return Wn(l)||l instanceof Date?l:""})}var VGe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?s[d-1].coordinate:s[l-1].coordinate,h=s[d].coordinate,f=d>=l-1?s[0].coordinate:s[d+1].coordinate,g=void 0;if(Ka(h-u)!==Ka(f-h)){var x=[];if(Ka(f-h)===Ka(c[1]-c[0])){g=f;var m=h+c[1]-c[0];x[0]=Math.min(m,(m+u)/2),x[1]=Math.max(m,(m+u)/2)}else{g=u;var p=f+c[1]-c[0];x[0]=Math.min(h,(p+h)/2),x[1]=Math.max(h,(p+h)/2)}var b=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(e>b[0]&&e<=b[1]||e>=x[0]&&e<=x[1]){o=s[d].index;break}}else{var v=Math.min(u,f),y=Math.max(u,f);if(e>(v+h)/2&&e<=(y+h)/2){o=s[d].index;break}}}else for(var w=0;w<l;w++)if(w===0&&e<=(n[w].coordinate+n[w+1].coordinate)/2||w>0&&w<l-1&&e>(n[w].coordinate+n[w-1].coordinate)/2&&e<=(n[w].coordinate+n[w+1].coordinate)/2||w===l-1&&e>(n[w].coordinate+n[w-1].coordinate)/2){o=n[w].index;break}return o},WO=function(e){var r,n=e,s=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?pn(pn({},e.type.defaultProps),e.props):e.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},HGe=function(e){var r=e.barSize,n=e.totalSize,s=e.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,h=Object.keys(u),f=0,g=h.length;f<g;f++){var x=u[h[f]],m=x.items,p=x.cateAxisId,b=m.filter(function(_){return Fl(_.type).indexOf("Bar")>=0});if(b&&b.length){var v=b[0].type.defaultProps,y=v!==void 0?pn(pn({},v),b[0].props):b[0].props,w=y.barSize,k=y[p];o[k]||(o[k]=[]);var j=Dt(w)?r:w;o[k].push({item:b[0],stackList:b.slice(1),barSize:Dt(j)?void 0:Ga(j,n,0)})}}return o},WGe=function(e){var r=e.barGap,n=e.barCategoryGap,s=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=Ga(r,s,0,!0),u,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,g=s/c,x=o.reduce(function(w,k){return w+k.barSize||0},0);x+=(c-1)*d,x>=s&&(x-=(c-1)*d,d=0),x>=s&&g>0&&(f=!0,g*=.9,x=c*g);var m=(s-x)/2>>0,p={offset:m-d,size:0};u=o.reduce(function(w,k){var j={item:k.item,position:{offset:p.offset+p.size+d,size:f?g:k.barSize}},_=[].concat(Uz(w),[j]);return p=_[_.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(S){_.push({item:S,position:p})}),_},h)}else{var b=Ga(n,s,0,!0);s-2*b-(c-1)*d<=0&&(d=0);var v=(s-2*b-(c-1)*d)/c;v>1&&(v>>=0);var y=l===+l?Math.min(v,l):v;u=o.reduce(function(w,k,j){var _=[].concat(Uz(w),[{item:k.item,position:{offset:b+(v+d)*j+(v-y)/2,size:y}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(S){_.push({item:S,position:_[_.length-1].position})}),_},h)}return u},XGe=function(e,r,n,s){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),d=RY({children:i,legendWidth:c});if(d){var u=s||{},h=u.width,f=u.height,g=d.align,x=d.verticalAlign,m=d.layout;if((m==="vertical"||m==="horizontal"&&x==="middle")&&g!=="center"&&Ve(e[g]))return pn(pn({},e),{},Zf({},g,e[g]+(h||0)));if((m==="horizontal"||m==="vertical"&&g==="center")&&x!=="middle"&&Ve(e[x]))return pn(pn({},e),{},Zf({},x,e[x]+(f||0)))}return e},YGe=function(e,r,n){return Dt(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},PY=function(e,r,n,s,i){var o=r.props.children,l=Fs(o,Bb).filter(function(d){return YGe(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,u){var h=wn(u,n);if(Dt(h))return d;var f=Array.isArray(h)?[xj(h),Jc(h)]:[h,h],g=c.reduce(function(x,m){var p=wn(u,m,0),b=f[0]-Math.abs(Array.isArray(p)?p[0]:p),v=f[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(b,x[0]),Math.max(v,x[1])]},[1/0,-1/0]);return[Math.min(g[0],d[0]),Math.max(g[1],d[1])]},[1/0,-1/0])}return null},ZGe=function(e,r,n,s,i){var o=r.map(function(l){return PY(e,l,n,i,s)}).filter(function(l){return!Dt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},zY=function(e,r,n,s,i){var o=r.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&PY(e,c,d,s)||h0(e,d,n,i)});if(n==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},$Y=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},FY=function(e,r,n,s){if(s)return e.map(function(c){return c.coordinate});var i,o,l=e.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},Dl=function(e,r,n){if(!e)return null;var s=e.scale,i=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ka(l[0]-l[1])*2*d:d,r&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(h){var f=i?i.indexOf(h):h;return{coordinate:s(f)+d,value:h,offset:d}});return u.filter(function(h){return!Sm(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:s(h)+d,value:h,index:f,offset:d}}):s.ticks&&!n?s.ticks(e.tickCount).map(function(h){return{coordinate:s(h)+d,value:h,offset:d}}):s.domain().map(function(h,f){return{coordinate:s(h)+d,value:i?i[h]:h,index:f,offset:d}})},eS=new WeakMap,Zy=function(e,r){if(typeof r!="function")return e;eS.has(e)||eS.set(e,new WeakMap);var n=eS.get(e);if(n.has(r))return n.get(r);var s=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},BY=function(e,r,n){var s=e.scale,i=e.type,o=e.layout,l=e.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:xx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:_k(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:u0(),realScaleType:"point"}:i==="category"?{scale:xx(),realScaleType:"band"}:{scale:_k(),realScaleType:"linear"};if(Zu(s)){var c="scale".concat(nj(s));return{scale:(Rz[c]||u0)(),realScaleType:Rz[c]?c:"point"}}return St(s)?{scale:s}:{scale:u0(),realScaleType:"point"}},Gz=1e-4,UY=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,s=e.range(),i=Math.min(s[0],s[1])-Gz,o=Math.max(s[0],s[1])+Gz,l=e(r[0]),c=e(r[n-1]);(l<i||l>o||c<i||c>o)&&e.domain([r[0],r[n-1]])}},QGe=function(e,r){if(!e)return null;for(var n=0,s=e.length;n<s;n++)if(e[n].item===r)return e[n].position;return null},JGe=function(e,r){if(!r||r.length!==2||!Ve(r[0])||!Ve(r[1]))return e;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!Ve(e[0])||e[0]<n)&&(i[0]=n),(!Ve(e[1])||e[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},eqe=function(e){var r=e.length;if(!(r<=0))for(var n=0,s=e[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Sm(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=i,e[l][n][1]=i+c,i=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},tqe=function(e){var r=e.length;if(!(r<=0))for(var n=0,s=e[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=Sm(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},rqe={sign:eqe,expand:kMe,none:kg,silhouette:wMe,wiggle:jMe,positive:tqe},nqe=function(e,r,n){var s=r.map(function(l){return l.props.dataKey}),i=rqe[n],o=vMe().keys(s).value(function(l,c){return+wn(l,c,0)}).order(yE).offset(i);return o(e)},aqe=function(e,r,n,s,i,o){if(!e)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(h,f){var g,x=(g=f.type)!==null&&g!==void 0&&g.defaultProps?pn(pn({},f.type.defaultProps),f.props):f.props,m=x.stackId,p=x.hide;if(p)return h;var b=x[n],v=h[b]||{hasStack:!1,stackGroups:{}};if(Wn(m)){var y=v.stackGroups[m]||{numericAxisId:n,cateAxisId:s,items:[]};y.items.push(f),v.hasStack=!0,v.stackGroups[m]=y}else v.stackGroups[Ah("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[f]};return pn(pn({},h),{},Zf({},b,v))},c),u={};return Object.keys(d).reduce(function(h,f){var g=d[f];if(g.hasStack){var x={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(m,p){var b=g.stackGroups[p];return pn(pn({},m),{},Zf({},p,{numericAxisId:n,cateAxisId:s,items:b.items,stackedData:nqe(e,b.items,i)}))},x)}return pn(pn({},h),{},Zf({},f,g))},u)},KY=function(e,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var u=bGe(d,i,l);return e.domain([xj(u),Jc(u)]),{niceTicks:u}}if(i&&s==="number"){var h=e.domain(),f=yGe(h,i,l);return{niceTicks:f}}return null};function Ik(t){var e=t.axis,r=t.ticks,n=t.bandSize,s=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Dt(s[e.dataKey])){var l=nk(r,"value",s[e.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=wn(s,Dt(o)?e.dataKey:o);return Dt(c)?null:e.scale(c)}var qz=function(e){var r=e.axis,n=e.ticks,s=e.offset,i=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=wn(o,r.dataKey,r.domain[l]);return Dt(c)?null:r.scale(c)-i/2+s},sqe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},iqe=function(e,r){var n,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?pn(pn({},e.type.defaultProps),e.props):e.props,i=s.stackId;if(Wn(i)){var o=r[i];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},oqe=function(e){return e.reduce(function(r,n){return[xj(n.concat([r[0]]).filter(Ve)),Jc(n.concat([r[1]]).filter(Ve))]},[1/0,-1/0])},GY=function(e,r,n){return Object.keys(e).reduce(function(s,i){var o=e[i],l=o.stackedData,c=l.reduce(function(d,u){var h=oqe(u.slice(r,n+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},Vz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XE=function(e,r,n){if(St(e))return e(r,n);if(!Array.isArray(e))return r;var s=[];if(Ve(e[0]))s[0]=n?e[0]:Math.min(e[0],r[0]);else if(Vz.test(e[0])){var i=+Vz.exec(e[0])[1];s[0]=r[0]-i}else St(e[0])?s[0]=e[0](r[0]):s[0]=r[0];if(Ve(e[1]))s[1]=n?e[1]:Math.max(e[1],r[1]);else if(Hz.test(e[1])){var o=+Hz.exec(e[1])[1];s[1]=r[1]+o}else St(e[1])?s[1]=e[1](r[1]):s[1]=r[1];return s},Dk=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!n||s>0)return s}if(e&&r&&r.length>=2){for(var i=kO(r,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},Wz=function(e,r,n){return!e||!e.length||eh(e,$s(n,"type.defaultProps.domain"))?r:e},qY=function(e,r){var n=e.type.defaultProps?pn(pn({},e.type.defaultProps),e.props):e.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,d=n.chartType,u=n.hide;return pn(pn({},bt(e,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:WO(e),value:wn(r,s),type:c,payload:r,chartType:d,hide:u})};function Sx(t){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sx(t)}function Xz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Nl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xz(Object(r),!0).forEach(function(n){VY(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VY(t,e,r){return e=lqe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lqe(t){var e=cqe(t,"string");return Sx(e)=="symbol"?e:e+""}function cqe(t,e){if(Sx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dqe(t,e){return gqe(t)||fqe(t,e)||hqe(t,e)||uqe()}function uqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hqe(t,e){if(t){if(typeof t=="string")return Yz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yz(t,e)}}function Yz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fqe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function gqe(t){if(Array.isArray(t))return t}var Mk=Math.PI/180,mqe=function(e){return e*180/Math.PI},Hr=function(e,r,n,s){return{x:e+Math.cos(-Mk*s)*n,y:r+Math.sin(-Mk*s)*n}},HY=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},pqe=function(e,r,n,s,i){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,u=Ga(e.cx,o,o/2),h=Ga(e.cy,l,l/2),f=HY(o,l,n),g=Ga(e.innerRadius,f,0),x=Ga(e.outerRadius,f,f*.8),m=Object.keys(r);return m.reduce(function(p,b){var v=r[b],y=v.domain,w=v.reversed,k;if(Dt(v.range))s==="angleAxis"?k=[c,d]:s==="radiusAxis"&&(k=[g,x]),w&&(k=[k[1],k[0]]);else{k=v.range;var j=k,_=dqe(j,2);c=_[0],d=_[1]}var S=BY(v,i),A=S.realScaleType,T=S.scale;T.domain(y).range(k),UY(T);var E=KY(T,Nl(Nl({},v),{},{realScaleType:A})),C=Nl(Nl(Nl({},v),E),{},{range:k,radius:x,realScaleType:A,scale:T,cx:u,cy:h,innerRadius:g,outerRadius:x,startAngle:c,endAngle:d});return Nl(Nl({},p),{},VY({},b,C))},{})},xqe=function(e,r){var n=e.x,s=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},bqe=function(e,r){var n=e.x,s=e.y,i=r.cx,o=r.cy,l=xqe({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,d=Math.acos(c);return s>o&&(d=2*Math.PI-d),{radius:l,angle:mqe(d),angleInRadian:d}},yqe=function(e){var r=e.startAngle,n=e.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},vqe=function(e,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return e+l*360},Zz=function(e,r){var n=e.x,s=e.y,i=bqe({x:n,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=yqe(r),h=u.startAngle,f=u.endAngle,g=l,x;if(h<=f){for(;g>f;)g-=360;for(;g<h;)g+=360;x=g>=h&&g<=f}else{for(;g>h;)g-=360;for(;g<f;)g+=360;x=g>=f&&g<=h}return x?Nl(Nl({},r),{},{radius:o,angle:vqe(g,r)}):null},WY=function(e){return!N.isValidElement(e)&&!St(e)&&typeof e!="boolean"?e.className:""};function Ax(t){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ax(t)}var kqe=["offset"];function wqe(t){return Sqe(t)||_qe(t)||Nqe(t)||jqe()}function jqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nqe(t,e){if(t){if(typeof t=="string")return YE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YE(t,e)}}function _qe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Sqe(t){if(Array.isArray(t))return YE(t)}function YE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Aqe(t,e){if(t==null)return{};var r=Eqe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Eqe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Qz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Un(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qz(Object(r),!0).forEach(function(n){Cqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cqe(t,e,r){return e=Tqe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tqe(t){var e=Oqe(t,"string");return Ax(e)=="symbol"?e:e+""}function Oqe(t,e){if(Ax(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ax(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ex(){return Ex=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ex.apply(this,arguments)}var Iqe=function(e){var r=e.value,n=e.formatter,s=Dt(e.children)?r:e.children;return St(n)?n(s):s},Dqe=function(e,r){var n=Ka(r-e),s=Math.min(Math.abs(r-e),360);return n*s},Mqe=function(e,r,n){var s=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,d=c.cx,u=c.cy,h=c.innerRadius,f=c.outerRadius,g=c.startAngle,x=c.endAngle,m=c.clockWise,p=(h+f)/2,b=Dqe(g,x),v=b>=0?1:-1,y,w;s==="insideStart"?(y=g+v*o,w=m):s==="insideEnd"?(y=x-v*o,w=!m):s==="end"&&(y=x+v*o,w=m),w=b<=0?w:!w;var k=Hr(d,u,p,y),j=Hr(d,u,p,y+(w?1:-1)*359),_="M".concat(k.x,",").concat(k.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),S=Dt(e.id)?Ah("recharts-radial-line-"):e.id;return ae.createElement("text",Ex({},n,{dominantBaseline:"central",className:Pt("recharts-radial-bar-label",l)}),ae.createElement("defs",null,ae.createElement("path",{id:S,d:_})),ae.createElement("textPath",{xlinkHref:"#".concat(S)},r))},Lqe=function(e){var r=e.viewBox,n=e.offset,s=e.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,h=i.endAngle,f=(u+h)/2;if(s==="outside"){var g=Hr(o,l,d+n,f),x=g.x,m=g.y;return{x,y:m,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var p=(c+d)/2,b=Hr(o,l,p,f),v=b.x,y=b.y;return{x:v,y,textAnchor:"middle",verticalAnchor:"middle"}},Rqe=function(e){var r=e.viewBox,n=e.parentViewBox,s=e.offset,i=e.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,h=u>=0?1:-1,f=h*s,g=h>0?"end":"start",x=h>0?"start":"end",m=d>=0?1:-1,p=m*s,b=m>0?"end":"start",v=m>0?"start":"end";if(i==="top"){var y={x:l+d/2,y:c-h*s,textAnchor:"middle",verticalAnchor:g};return Un(Un({},y),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var w={x:l+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:x};return Un(Un({},w),n?{height:Math.max(n.y+n.height-(c+u),0),width:d}:{})}if(i==="left"){var k={x:l-p,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return Un(Un({},k),n?{width:Math.max(k.x-n.x,0),height:u}:{})}if(i==="right"){var j={x:l+d+p,y:c+u/2,textAnchor:v,verticalAnchor:"middle"};return Un(Un({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:u}:{})}var _=n?{width:d,height:u}:{};return i==="insideLeft"?Un({x:l+p,y:c+u/2,textAnchor:v,verticalAnchor:"middle"},_):i==="insideRight"?Un({x:l+d-p,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},_):i==="insideTop"?Un({x:l+d/2,y:c+f,textAnchor:"middle",verticalAnchor:x},_):i==="insideBottom"?Un({x:l+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:g},_):i==="insideTopLeft"?Un({x:l+p,y:c+f,textAnchor:v,verticalAnchor:x},_):i==="insideTopRight"?Un({x:l+d-p,y:c+f,textAnchor:b,verticalAnchor:x},_):i==="insideBottomLeft"?Un({x:l+p,y:c+u-f,textAnchor:v,verticalAnchor:g},_):i==="insideBottomRight"?Un({x:l+d-p,y:c+u-f,textAnchor:b,verticalAnchor:g},_):wm(i)&&(Ve(i.x)||yu(i.x))&&(Ve(i.y)||yu(i.y))?Un({x:l+Ga(i.x,d),y:c+Ga(i.y,u),textAnchor:"end",verticalAnchor:"end"},_):Un({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},_)},Pqe=function(e){return"cx"in e&&Ve(e.cx)};function na(t){var e=t.offset,r=e===void 0?5:e,n=Aqe(t,kqe),s=Un({offset:r},n),i=s.viewBox,o=s.position,l=s.value,c=s.children,d=s.content,u=s.className,h=u===void 0?"":u,f=s.textBreakAll;if(!i||Dt(l)&&Dt(c)&&!N.isValidElement(d)&&!St(d))return null;if(N.isValidElement(d))return N.cloneElement(d,s);var g;if(St(d)){if(g=N.createElement(d,s),N.isValidElement(g))return g}else g=Iqe(s);var x=Pqe(i),m=bt(s,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Mqe(s,g,m);var p=x?Lqe(s):Rqe(s);return ae.createElement(Ju,Ex({className:Pt("recharts-label",h)},m,p,{breakAll:f}),g)}na.displayName="Label";var XY=function(e){var r=e.cx,n=e.cy,s=e.angle,i=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,u=e.outerRadius,h=e.x,f=e.y,g=e.top,x=e.left,m=e.width,p=e.height,b=e.clockWise,v=e.labelViewBox;if(v)return v;if(Ve(m)&&Ve(p)){if(Ve(h)&&Ve(f))return{x:h,y:f,width:m,height:p};if(Ve(g)&&Ve(x))return{x:g,y:x,width:m,height:p}}return Ve(h)&&Ve(f)?{x:h,y:f,width:0,height:0}:Ve(r)&&Ve(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:b}:e.viewBox?e.viewBox:{}},zqe=function(e,r){return e?e===!0?ae.createElement(na,{key:"label-implicit",viewBox:r}):Wn(e)?ae.createElement(na,{key:"label-implicit",viewBox:r,value:e}):N.isValidElement(e)?e.type===na?N.cloneElement(e,{key:"label-implicit",viewBox:r}):ae.createElement(na,{key:"label-implicit",content:e,viewBox:r}):St(e)?ae.createElement(na,{key:"label-implicit",content:e,viewBox:r}):wm(e)?ae.createElement(na,Ex({viewBox:r},e,{key:"label-implicit"})):null:null},$qe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,i=XY(e),o=Fs(s,na).map(function(c,d){return N.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return o;var l=zqe(e.label,r||i);return[l].concat(wqe(o))};na.parseViewBox=XY;na.renderCallByParent=$qe;function Fqe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Bqe=Fqe;const Uqe=Vt(Bqe);function Cx(t){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cx(t)}var Kqe=["valueAccessor"],Gqe=["data","dataKey","clockWise","id","textBreakAll"];function qqe(t){return Xqe(t)||Wqe(t)||Hqe(t)||Vqe()}function Vqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hqe(t,e){if(t){if(typeof t=="string")return ZE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZE(t,e)}}function Wqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xqe(t){if(Array.isArray(t))return ZE(t)}function ZE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lk(){return Lk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lk.apply(this,arguments)}function Jz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function e$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jz(Object(r),!0).forEach(function(n){Yqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yqe(t,e,r){return e=Zqe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zqe(t){var e=Qqe(t,"string");return Cx(e)=="symbol"?e:e+""}function Qqe(t,e){if(Cx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t$(t,e){if(t==null)return{};var r=Jqe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jqe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var eVe=function(e){return Array.isArray(e.value)?Uqe(e.value):e.value};function Bo(t){var e=t.valueAccessor,r=e===void 0?eVe:e,n=t$(t,Kqe),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,d=t$(n,Gqe);return!s||!s.length?null:ae.createElement(Jt,{className:"recharts-label-list"},s.map(function(u,h){var f=Dt(i)?r(u,h):wn(u&&u.payload,i),g=Dt(l)?{}:{id:"".concat(l,"-").concat(h)};return ae.createElement(na,Lk({},bt(u,!0),d,g,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:na.parseViewBox(Dt(o)?u:e$(e$({},u),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Bo.displayName="LabelList";function tVe(t,e){return t?t===!0?ae.createElement(Bo,{key:"labelList-implicit",data:e}):ae.isValidElement(t)||St(t)?ae.createElement(Bo,{key:"labelList-implicit",data:e,content:t}):wm(t)?ae.createElement(Bo,Lk({data:e},t,{key:"labelList-implicit"})):null:null}function rVe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,s=Fs(n,Bo).map(function(o,l){return N.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return s;var i=tVe(t.label,e);return[i].concat(qqe(s))}Bo.renderCallByParent=rVe;function Tx(t){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tx(t)}function QE(){return QE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QE.apply(this,arguments)}function r$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function n$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r$(Object(r),!0).forEach(function(n){nVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nVe(t,e,r){return e=aVe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aVe(t){var e=sVe(t,"string");return Tx(e)=="symbol"?e:e+""}function sVe(t,e){if(Tx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iVe=function(e,r){var n=Ka(r-e),s=Math.min(Math.abs(r-e),359.999);return n*s},Qy=function(e){var r=e.cx,n=e.cy,s=e.radius,i=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,u=c*(l?1:-1)+s,h=Math.asin(c/u)/Mk,f=d?i:i+o*h,g=Hr(r,n,u,f),x=Hr(r,n,s,f),m=d?i-o*h:i,p=Hr(r,n,u*Math.cos(h*Mk),m);return{center:g,circleTangency:x,lineTangency:p,theta:h}},YY=function(e){var r=e.cx,n=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.startAngle,l=e.endAngle,c=iVe(o,l),d=o+c,u=Hr(r,n,i,o),h=Hr(r,n,i,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(s>0){var g=Hr(r,n,s,o),x=Hr(r,n,s,d);f+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},oVe=function(e){var r=e.cx,n=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,u=e.endAngle,h=Ka(u-d),f=Qy({cx:r,cy:n,radius:i,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),g=f.circleTangency,x=f.lineTangency,m=f.theta,p=Qy({cx:r,cy:n,radius:i,angle:u,sign:-h,cornerRadius:o,cornerIsExternal:c}),b=p.circleTangency,v=p.lineTangency,y=p.theta,w=c?Math.abs(d-u):Math.abs(d-u)-m-y;if(w<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):YY({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u});var k="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(v.x,",").concat(v.y,`
  `);if(s>0){var j=Qy({cx:r,cy:n,radius:s,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=j.circleTangency,S=j.lineTangency,A=j.theta,T=Qy({cx:r,cy:n,radius:s,angle:u,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=T.circleTangency,C=T.lineTangency,z=T.theta,M=c?Math.abs(d-u):Math.abs(d-u)-A-z;if(M<0&&o===0)return"".concat(k,"L").concat(r,",").concat(n,"Z");k+="L".concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(M>180),",").concat(+(h>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,"Z")}else k+="L".concat(r,",").concat(n,"Z");return k},lVe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZY=function(e){var r=n$(n$({},lVe),e),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,h=r.endAngle,f=r.className;if(o<i||u===h)return null;var g=Pt("recharts-sector",f),x=o-i,m=Ga(l,x,0,!0),p;return m>0&&Math.abs(u-h)<360?p=oVe({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(m,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):p=YY({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:h}),ae.createElement("path",QE({},bt(r,!0),{className:g,d:p,role:"img"}))};function Ox(t){"@babel/helpers - typeof";return Ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ox(t)}function JE(){return JE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JE.apply(this,arguments)}function a$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function s$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a$(Object(r),!0).forEach(function(n){cVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cVe(t,e,r){return e=dVe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dVe(t){var e=uVe(t,"string");return Ox(e)=="symbol"?e:e+""}function uVe(t,e){if(Ox(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ox(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i$={curveBasisClosed:cMe,curveBasisOpen:dMe,curveBasis:lMe,curveBumpX:WDe,curveBumpY:XDe,curveLinearClosed:uMe,curveLinear:sj,curveMonotoneX:hMe,curveMonotoneY:fMe,curveNatural:gMe,curveStep:mMe,curveStepAfter:xMe,curveStepBefore:pMe},Jy=function(e){return e.x===+e.x&&e.y===+e.y},gp=function(e){return e.x},mp=function(e){return e.y},hVe=function(e,r){if(St(e))return e;var n="curve".concat(nj(e));return(n==="curveMonotone"||n==="curveBump")&&r?i$["".concat(n).concat(r==="vertical"?"Y":"X")]:i$[n]||sj},fVe=function(e){var r=e.type,n=r===void 0?"linear":r,s=e.points,i=s===void 0?[]:s,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,u=hVe(n,l),h=d?i.filter(function(m){return Jy(m)}):i,f;if(Array.isArray(o)){var g=d?o.filter(function(m){return Jy(m)}):o,x=h.map(function(m,p){return s$(s$({},m),{},{base:g[p]})});return l==="vertical"?f=Ky().y(mp).x1(gp).x0(function(m){return m.base.x}):f=Ky().x(gp).y1(mp).y0(function(m){return m.base.y}),f.defined(Jy).curve(u),f(x)}return l==="vertical"&&Ve(o)?f=Ky().y(mp).x1(gp).x0(o):Ve(o)?f=Ky().x(gp).y1(mp).y0(o):f=VW().x(gp).y(mp),f.defined(Jy).curve(u),f(h)},Ru=function(e){var r=e.className,n=e.points,s=e.path,i=e.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?fVe(e):s;return N.createElement("path",JE({},bt(e,!1),ak(e),{className:Pt("recharts-curve",r),d:o,ref:i}))},QY={exports:{}},gVe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mVe=gVe,pVe=mVe;function JY(){}function eZ(){}eZ.resetWarningCache=JY;var xVe=function(){function t(n,s,i,o,l,c){if(c!==pVe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:eZ,resetWarningCache:JY};return r.PropTypes=r,r};QY.exports=xVe();var bVe=QY.exports;const wr=Vt(bVe),{getOwnPropertyNames:yVe,getOwnPropertySymbols:vVe}=Object,{hasOwnProperty:kVe}=Object.prototype;function tS(t,e){return function(n,s,i){return t(n,s,i)&&e(n,s,i)}}function ev(t){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=t(r,n,s);return i.delete(r),i.delete(n),c}}function wVe(t){return t!=null?t[Symbol.toStringTag]:void 0}function o$(t){return yVe(t).concat(vVe(t))}const jVe=Object.hasOwn||((t,e)=>kVe.call(t,e));function Th(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const NVe="__v",_Ve="__o",SVe="_owner",{getOwnPropertyDescriptor:l$,keys:c$}=Object;function AVe(t,e){return t.byteLength===e.byteLength&&Rk(new Uint8Array(t),new Uint8Array(e))}function EVe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function CVe(t,e){return t.byteLength===e.byteLength&&Rk(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function TVe(t,e){return Th(t.getTime(),e.getTime())}function OVe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function IVe(t,e){return t===e}function d$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),i=t.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const d=e.entries();let u=!1,h=0;for(;(l=d.next())&&!l.done;){if(s[h]){h++;continue}const f=o.value,g=l.value;if(r.equals(f[0],g[0],c,h,t,e,r)&&r.equals(f[1],g[1],f[0],g[0],t,e,r)){u=s[h]=!0;break}h++}if(!u)return!1;c++}return!0}const DVe=Th;function MVe(t,e,r){const n=c$(t);let s=n.length;if(c$(e).length!==s)return!1;for(;s-- >0;)if(!tZ(t,e,r,n[s]))return!1;return!0}function pp(t,e,r){const n=o$(t);let s=n.length;if(o$(e).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!tZ(t,e,r,i)||(o=l$(t,i),l=l$(e,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function LVe(t,e){return Th(t.valueOf(),e.valueOf())}function RVe(t,e){return t.source===e.source&&t.flags===e.flags}function u$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),i=t.values();let o,l;for(;(o=i.next())&&!o.done;){const c=e.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!s[u]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){d=s[u]=!0;break}u++}if(!d)return!1}return!0}function Rk(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function PVe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function tZ(t,e,r,n){return(n===SVe||n===_Ve||n===NVe)&&(t.$$typeof||e.$$typeof)?!0:jVe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const zVe="[object ArrayBuffer]",$Ve="[object Arguments]",FVe="[object Boolean]",BVe="[object DataView]",UVe="[object Date]",KVe="[object Error]",GVe="[object Map]",qVe="[object Number]",VVe="[object Object]",HVe="[object RegExp]",WVe="[object Set]",XVe="[object String]",YVe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},ZVe="[object URL]",QVe=Object.prototype.toString;function JVe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:g,unknownTagComparators:x}){return function(p,b,v){if(p===b)return!0;if(p==null||b==null)return!1;const y=typeof p;if(y!==typeof b)return!1;if(y!=="object")return y==="number"?l(p,b,v):y==="function"?i(p,b,v):!1;const w=p.constructor;if(w!==b.constructor)return!1;if(w===Object)return c(p,b,v);if(Array.isArray(p))return e(p,b,v);if(w===Date)return n(p,b,v);if(w===RegExp)return u(p,b,v);if(w===Map)return o(p,b,v);if(w===Set)return h(p,b,v);const k=QVe.call(p);if(k===UVe)return n(p,b,v);if(k===HVe)return u(p,b,v);if(k===GVe)return o(p,b,v);if(k===WVe)return h(p,b,v);if(k===VVe)return typeof p.then!="function"&&typeof b.then!="function"&&c(p,b,v);if(k===ZVe)return g(p,b,v);if(k===KVe)return s(p,b,v);if(k===$Ve)return c(p,b,v);if(YVe[k])return f(p,b,v);if(k===zVe)return t(p,b,v);if(k===BVe)return r(p,b,v);if(k===FVe||k===qVe||k===XVe)return d(p,b,v);if(x){let j=x[k];if(!j){const _=wVe(p);_&&(j=x[_])}if(j)return j(p,b,v)}return!1}}function eHe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:AVe,areArraysEqual:r?pp:EVe,areDataViewsEqual:CVe,areDatesEqual:TVe,areErrorsEqual:OVe,areFunctionsEqual:IVe,areMapsEqual:r?tS(d$,pp):d$,areNumbersEqual:DVe,areObjectsEqual:r?pp:MVe,arePrimitiveWrappersEqual:LVe,areRegExpsEqual:RVe,areSetsEqual:r?tS(u$,pp):u$,areTypedArraysEqual:r?tS(Rk,pp):Rk,areUrlsEqual:PVe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const s=ev(n.areArraysEqual),i=ev(n.areMapsEqual),o=ev(n.areObjectsEqual),l=ev(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function tHe(t){return function(e,r,n,s,i,o,l){return t(e,r,l)}}function rHe({circular:t,comparator:e,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:d=t?new WeakMap:void 0,meta:u}=r();return e(l,c,{cache:d,equals:n,meta:u,strict:s})};if(t)return function(l,c){return e(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return e(l,c,i)}}const nHe=qd();qd({strict:!0});qd({circular:!0});qd({circular:!0,strict:!0});qd({createInternalComparator:()=>Th});qd({strict:!0,createInternalComparator:()=>Th});qd({circular:!0,createInternalComparator:()=>Th});qd({circular:!0,createInternalComparator:()=>Th,strict:!0});function qd(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:s=!1}=t,i=eHe(t),o=JVe(i),l=r?r(o):tHe(o);return rHe({circular:e,comparator:o,createState:n,equals:l,strict:s})}function aHe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function h$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>e?(t(i),r=-1):aHe(s)};requestAnimationFrame(n)}function e3(t){"@babel/helpers - typeof";return e3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e3(t)}function sHe(t){return cHe(t)||lHe(t)||oHe(t)||iHe()}function iHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oHe(t,e){if(t){if(typeof t=="string")return f$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f$(t,e)}}function f$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cHe(t){if(Array.isArray(t))return t}function dHe(){var t={},e=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=sHe(o),c=l[0],d=l.slice(1);if(typeof c=="number"){h$(s.bind(null,d),c);return}s(c),h$(s.bind(null,d));return}e3(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Ix(t){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ix(t)}function g$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function m$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g$(Object(r),!0).forEach(function(n){rZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rZ(t,e,r){return e=uHe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uHe(t){var e=hHe(t,"string");return Ix(e)==="symbol"?e:String(e)}function hHe(t,e){if(Ix(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ix(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fHe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},gHe=function(e){return e},mHe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},f0=function(e,r){return Object.keys(r).reduce(function(n,s){return m$(m$({},n),{},rZ({},s,e(s,r[s])))},{})},p$=function(e,r,n){return e.map(function(s){return"".concat(mHe(s)," ").concat(r,"ms ").concat(n)}).join(",")};function pHe(t,e){return yHe(t)||bHe(t,e)||nZ(t,e)||xHe()}function xHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bHe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function yHe(t){if(Array.isArray(t))return t}function vHe(t){return jHe(t)||wHe(t)||nZ(t)||kHe()}function kHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nZ(t,e){if(t){if(typeof t=="string")return t3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t3(t,e)}}function wHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jHe(t){if(Array.isArray(t))return t3(t)}function t3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Pk=1e-4,aZ=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},sZ=function(e,r){return e.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},x$=function(e,r){return function(n){var s=aZ(e,r);return sZ(s,n)}},NHe=function(e,r){return function(n){var s=aZ(e,r),i=[].concat(vHe(s.map(function(o,l){return o*l}).slice(1)),[0]);return sZ(i,n)}},b$=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),u=pHe(d,4);s=u[0],i=u[1],o=u[2],l=u[3]}}}var h=x$(s,o),f=x$(i,l),g=NHe(s,o),x=function(b){return b>1?1:b<0?0:b},m=function(b){for(var v=b>1?1:b,y=v,w=0;w<8;++w){var k=h(y)-v,j=g(y);if(Math.abs(k-v)<Pk||j<Pk)return f(y);y=x(y-k/j)}return f(y)};return m.isStepper=!1,m},_He=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,s=e.damping,i=s===void 0?8:s,o=e.dt,l=o===void 0?17:o,c=function(u,h,f){var g=-(u-h)*n,x=f*i,m=f+(g-x)*l/1e3,p=f*l/1e3+u;return Math.abs(p-h)<Pk&&Math.abs(m)<Pk?[h,0]:[p,m]};return c.isStepper=!0,c.dt=l,c},SHe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return b$(s);case"spring":return _He();default:if(s.split("(")[0]==="cubic-bezier")return b$(s)}return typeof s=="function"?s:null};function Dx(t){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dx(t)}function y$(t){return CHe(t)||EHe(t)||iZ(t)||AHe()}function AHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CHe(t){if(Array.isArray(t))return n3(t)}function v$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ua(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?v$(Object(r),!0).forEach(function(n){r3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r3(t,e,r){return e=THe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function THe(t){var e=OHe(t,"string");return Dx(e)==="symbol"?e:String(e)}function OHe(t,e){if(Dx(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IHe(t,e){return LHe(t)||MHe(t,e)||iZ(t,e)||DHe()}function DHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iZ(t,e){if(t){if(typeof t=="string")return n3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n3(t,e)}}function n3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MHe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function LHe(t){if(Array.isArray(t))return t}var zk=function(e,r,n){return e+(r-e)*n},a3=function(e){var r=e.from,n=e.to;return r!==n},RHe=function t(e,r,n){var s=f0(function(i,o){if(a3(o)){var l=e(o.from,o.to,o.velocity),c=IHe(l,2),d=c[0],u=c[1];return ua(ua({},o),{},{from:d,velocity:u})}return o},r);return n<1?f0(function(i,o){return a3(o)?ua(ua({},o),{},{velocity:zk(o.velocity,s[i].velocity,n),from:zk(o.from,s[i].from,n)}):o},r):t(e,s,n-1)};const PHe=function(t,e,r,n,s){var i=fHe(t,e),o=i.reduce(function(p,b){return ua(ua({},p),{},r3({},b,[t[b],e[b]]))},{}),l=i.reduce(function(p,b){return ua(ua({},p),{},r3({},b,{from:t[b],velocity:0,to:e[b]}))},{}),c=-1,d,u,h=function(){return null},f=function(){return f0(function(b,v){return v.from},l)},g=function(){return!Object.values(l).filter(a3).length},x=function(b){d||(d=b);var v=b-d,y=v/r.dt;l=RHe(r,l,y),s(ua(ua(ua({},t),e),f())),d=b,g()||(c=requestAnimationFrame(h))},m=function(b){u||(u=b);var v=(b-u)/n,y=f0(function(k,j){return zk.apply(void 0,y$(j).concat([r(v)]))},o);if(s(ua(ua(ua({},t),e),y)),v<1)c=requestAnimationFrame(h);else{var w=f0(function(k,j){return zk.apply(void 0,y$(j).concat([r(1)]))},o);s(ua(ua(ua({},t),e),w))}};return h=r.isStepper?x:m,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}var zHe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function $He(t,e){if(t==null)return{};var r=FHe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FHe(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function rS(t){return GHe(t)||KHe(t)||UHe(t)||BHe()}function BHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UHe(t,e){if(t){if(typeof t=="string")return s3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s3(t,e)}}function KHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GHe(t){if(Array.isArray(t))return s3(t)}function s3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function k$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ci(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(r),!0).forEach(function(n){Lp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lp(t,e,r){return e=oZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VHe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oZ(n.key),n)}}function HHe(t,e,r){return e&&VHe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oZ(t){var e=WHe(t,"string");return Tg(e)==="symbol"?e:String(e)}function WHe(t,e){if(Tg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i3(t,e)}function i3(t,e){return i3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},i3(t,e)}function YHe(t){var e=ZHe();return function(){var n=$k(t),s;if(e){var i=$k(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return o3(this,s)}}function o3(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l3(t)}function l3(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $k(t){return $k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$k(t)}var no=function(t){XHe(r,t);var e=YHe(r);function r(n,s){var i;qHe(this,r),i=e.call(this,n,s);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,h=o.steps,f=o.children,g=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(l3(i)),i.changeStyle=i.changeStyle.bind(l3(i)),!l||g<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:u}),o3(i);if(h&&h.length)i.state={style:h[0].style};else if(d){if(typeof f=="function")return i.state={style:d},o3(i);i.state={style:c?Lp({},c,d):d}}else i.state={style:{}};return i}return HHe(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,h=i.from,f=this.state.style;if(l){if(!o){var g={style:c?Lp({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(g);return}if(!(nHe(s.to,u)&&s.canBegin&&s.isActive)){var x=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=x||d?h:s.to;if(this.state&&f){var p={style:c?Lp({},c,m):m};(c&&f[c]!==m||!c&&f!==m)&&this.setState(p)}this.runAnimation(Ci(Ci({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,d=s.easing,u=s.begin,h=s.onAnimationEnd,f=s.onAnimationStart,g=PHe(o,l,SHe(d),c,this.changeStyle),x=function(){i.stopJSAnimation=g()};this.manager.start([f,u,x,c,h])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,d=o[0],u=d.style,h=d.duration,f=h===void 0?0:h,g=function(m,p,b){if(b===0)return m;var v=p.duration,y=p.easing,w=y===void 0?"ease":y,k=p.style,j=p.properties,_=p.onAnimationEnd,S=b>0?o[b-1]:p,A=j||Object.keys(k);if(typeof w=="function"||w==="spring")return[].concat(rS(m),[i.runJSAnimation.bind(i,{from:S.style,to:k,duration:v,easing:w}),v]);var T=p$(A,v,w),E=Ci(Ci(Ci({},S.style),k),{},{transition:T});return[].concat(rS(m),[E,v,_]).filter(gHe)};return this.manager.start([c].concat(rS(o.reduce(g,[u,Math.max(f,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=dHe());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,d=s.easing,u=s.onAnimationStart,h=s.onAnimationEnd,f=s.steps,g=s.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof g=="function"||d==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var m=l?Lp({},l,c):c,p=p$(Object.keys(m),o,d);x.start([u,i,Ci(Ci({},m),{},{transition:p}),o,h])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=$He(s,zHe),d=N.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var h=function(g){var x=g.props,m=x.style,p=m===void 0?{}:m,b=x.className,v=N.cloneElement(g,Ci(Ci({},c),{},{style:Ci(Ci({},p),u),className:b}));return v};return d===1?h(N.Children.only(i)):ae.createElement("div",null,N.Children.map(i,function(f){return h(f)}))}}]),r}(N.PureComponent);no.displayName="Animate";no.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};no.propTypes={from:wr.oneOfType([wr.object,wr.string]),to:wr.oneOfType([wr.object,wr.string]),attributeName:wr.string,duration:wr.number,begin:wr.number,easing:wr.oneOfType([wr.string,wr.func]),steps:wr.arrayOf(wr.shape({duration:wr.number.isRequired,style:wr.object.isRequired,easing:wr.oneOfType([wr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),wr.func]),properties:wr.arrayOf("string"),onAnimationEnd:wr.func})),children:wr.oneOfType([wr.node,wr.func]),isActive:wr.bool,canBegin:wr.bool,onAnimationEnd:wr.func,shouldReAnimate:wr.bool,onAnimationStart:wr.func,onAnimationReStart:wr.func};function Mx(t){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mx(t)}function Fk(){return Fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fk.apply(this,arguments)}function QHe(t,e){return rWe(t)||tWe(t,e)||eWe(t,e)||JHe()}function JHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eWe(t,e){if(t){if(typeof t=="string")return w$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w$(t,e)}}function w$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tWe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function rWe(t){if(Array.isArray(t))return t}function j$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function N$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(r),!0).forEach(function(n){nWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nWe(t,e,r){return e=aWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aWe(t){var e=sWe(t,"string");return Mx(e)=="symbol"?e:e+""}function sWe(t,e){if(Mx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _$=function(e,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,d=s>=0&&n>=0||s<0&&n<0?1:0,u;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,g=4;f<g;f++)h[f]=i[f]>o?o:i[f];u="M".concat(e,",").concat(r+l*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(e+c*h[0],",").concat(r)),u+="L ".concat(e+n-c*h[1],",").concat(r),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(r+l*h[1])),u+="L ".concat(e+n,",").concat(r+s-l*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(e+n-c*h[2],",").concat(r+s)),u+="L ".concat(e+c*h[3],",").concat(r+s),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(r+s-l*h[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);u="M ".concat(e,",").concat(r+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+c*x,",").concat(r,`
            L `).concat(e+n-c*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n,",").concat(r+l*x,`
            L `).concat(e+n,",").concat(r+s-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n-c*x,",").concat(r+s,`
            L `).concat(e+c*x,",").concat(r+s,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(r+s-l*x," Z")}else u="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return u},iWe=function(e,r){if(!e||!r)return!1;var n=e.x,s=e.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return n>=d&&n<=u&&s>=h&&s<=f}return!1},oWe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},XO=function(e){var r=N$(N$({},oWe),e),n=N.useRef(),s=N.useState(-1),i=QHe(s,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,d=r.y,u=r.width,h=r.height,f=r.radius,g=r.className,x=r.animationEasing,m=r.animationDuration,p=r.animationBegin,b=r.isAnimationActive,v=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var y=Pt("recharts-rectangle",g);return v?ae.createElement(no,{canBegin:o>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:m,animationEasing:x,isActive:v},function(w){var k=w.width,j=w.height,_=w.x,S=w.y;return ae.createElement(no,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,isActive:b,easing:x},ae.createElement("path",Fk({},bt(r,!0),{className:y,d:_$(_,S,k,j,f),ref:n})))}):ae.createElement("path",Fk({},bt(r,!0),{className:y,d:_$(c,d,u,h,f)}))},lWe=["points","className","baseLinePoints","connectNulls"];function Ef(){return Ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ef.apply(this,arguments)}function cWe(t,e){if(t==null)return{};var r=dWe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dWe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function S$(t){return gWe(t)||fWe(t)||hWe(t)||uWe()}function uWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hWe(t,e){if(t){if(typeof t=="string")return c3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c3(t,e)}}function fWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gWe(t){if(Array.isArray(t))return c3(t)}function c3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var A$=function(e){return e&&e.x===+e.x&&e.y===+e.y},mWe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){A$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),A$(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},g0=function(e,r){var n=mWe(e);r&&(n=[n.reduce(function(i,o){return[].concat(S$(i),S$(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},pWe=function(e,r,n){var s=g0(e,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(g0(r.reverse(),n).slice(1))},xWe=function(e){var r=e.points,n=e.className,s=e.baseLinePoints,i=e.connectNulls,o=cWe(e,lWe);if(!r||!r.length)return null;var l=Pt("recharts-polygon",n);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",d=pWe(r,s,i);return ae.createElement("g",{className:l},ae.createElement("path",Ef({},bt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?ae.createElement("path",Ef({},bt(o,!0),{fill:"none",d:g0(r,i)})):null,c?ae.createElement("path",Ef({},bt(o,!0),{fill:"none",d:g0(s,i)})):null)}var u=g0(r,i);return ae.createElement("path",Ef({},bt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function d3(){return d3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},d3.apply(this,arguments)}var Ub=function(e){var r=e.cx,n=e.cy,s=e.r,i=e.className,o=Pt("recharts-dot",i);return r===+r&&n===+n&&s===+s?N.createElement("circle",d3({},bt(e,!1),ak(e),{className:o,cx:r,cy:n,r:s})):null};function Lx(t){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lx(t)}var bWe=["x","y","top","left","width","height","className"];function u3(){return u3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u3.apply(this,arguments)}function E$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function yWe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E$(Object(r),!0).forEach(function(n){vWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vWe(t,e,r){return e=kWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kWe(t){var e=wWe(t,"string");return Lx(e)=="symbol"?e:e+""}function wWe(t,e){if(Lx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jWe(t,e){if(t==null)return{};var r=NWe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function NWe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var _We=function(e,r,n,s,i,o){return"M".concat(e,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},SWe=function(e){var r=e.x,n=r===void 0?0:r,s=e.y,i=s===void 0?0:s,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,u=e.width,h=u===void 0?0:u,f=e.height,g=f===void 0?0:f,x=e.className,m=jWe(e,bWe),p=yWe({x:n,y:i,top:l,left:d,width:h,height:g},m);return!Ve(n)||!Ve(i)||!Ve(h)||!Ve(g)||!Ve(l)||!Ve(d)?null:ae.createElement("path",u3({},bt(p,!0),{className:Pt("recharts-cross",x),d:_We(n,i,h,g,l,d)}))},AWe=pj,EWe=yY,CWe=dl;function TWe(t,e){return t&&t.length?AWe(t,CWe(e),EWe):void 0}var OWe=TWe;const IWe=Vt(OWe);var DWe=pj,MWe=dl,LWe=vY;function RWe(t,e){return t&&t.length?DWe(t,MWe(e),LWe):void 0}var PWe=RWe;const zWe=Vt(PWe);var $We=["cx","cy","angle","ticks","axisLine"],FWe=["ticks","tick","angle","tickFormatter","stroke"];function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m0.apply(this,arguments)}function C$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ru(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(r),!0).forEach(function(n){vj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T$(t,e){if(t==null)return{};var r=BWe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function BWe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function UWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cZ(n.key),n)}}function KWe(t,e,r){return e&&O$(t.prototype,e),r&&O$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function GWe(t,e,r){return e=Bk(e),qWe(t,lZ()?Reflect.construct(e,r||[],Bk(t).constructor):e.apply(t,r))}function qWe(t,e){if(e&&(Og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VWe(t)}function VWe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lZ=function(){return!!t})()}function Bk(t){return Bk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bk(t)}function HWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h3(t,e)}function h3(t,e){return h3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},h3(t,e)}function vj(t,e,r){return e=cZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cZ(t){var e=WWe(t,"string");return Og(e)=="symbol"?e:e+""}function WWe(t,e){if(Og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kj=function(t){function e(){return UWe(this,e),GWe(this,e,arguments)}return HWe(e,t),KWe(e,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Hr(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=IWe(l,function(u){return u.coordinate||0}),d=zWe(l,function(u){return u.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,d=T$(n,$We),u=l.reduce(function(x,m){return[Math.min(x[0],m.coordinate),Math.max(x[1],m.coordinate)]},[1/0,-1/0]),h=Hr(s,i,u[0],o),f=Hr(s,i,u[1],o),g=ru(ru(ru({},bt(d,!1)),{},{fill:"none"},bt(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return ae.createElement("line",m0({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,d=s.stroke,u=T$(s,FWe),h=this.getTickTextAnchor(),f=bt(u,!1),g=bt(o,!1),x=i.map(function(m,p){var b=n.getTickValueCoord(m),v=ru(ru(ru(ru({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},f),{},{stroke:"none",fill:d},g),{},{index:p},b),{},{payload:m});return ae.createElement(Jt,m0({className:Pt("recharts-polar-radius-axis-tick",WY(o)),key:"tick-".concat(m.coordinate)},Qu(n.props,m,p)),e.renderTickItem(o,v,c?c(m.value,p):m.value))});return ae.createElement(Jt,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:ae.createElement(Jt,{className:Pt("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),na.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return ae.isValidElement(n)?o=ae.cloneElement(n,s):St(n)?o=n(s):o=ae.createElement(Ju,m0({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(N.PureComponent);vj(kj,"displayName","PolarRadiusAxis");vj(kj,"axisType","radiusAxis");vj(kj,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mu.apply(this,arguments)}function I$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function nu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(r),!0).forEach(function(n){wj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uZ(n.key),n)}}function YWe(t,e,r){return e&&D$(t.prototype,e),r&&D$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZWe(t,e,r){return e=Uk(e),QWe(t,dZ()?Reflect.construct(e,r||[],Uk(t).constructor):e.apply(t,r))}function QWe(t,e){if(e&&(Ig(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JWe(t)}function JWe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dZ=function(){return!!t})()}function Uk(t){return Uk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uk(t)}function eXe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f3(t,e)}function f3(t,e){return f3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},f3(t,e)}function wj(t,e,r){return e=uZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uZ(t){var e=tXe(t,"string");return Ig(e)=="symbol"?e:e+""}function tXe(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rXe=Math.PI/180,M$=1e-5,jj=function(t){function e(){return XWe(this,e),ZWe(this,e,arguments)}return eXe(e,t),YWe(e,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,l=s.radius,c=s.orientation,d=s.tickSize,u=d||8,h=Hr(i,o,l,n.coordinate),f=Hr(i,o,l+(c==="inner"?-1:1)*u,n.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*rXe),o;return i>M$?o=s==="outer"?"start":"end":i<-M$?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,d=nu(nu({},bt(this.props,!1)),{},{fill:"none"},bt(l,!1));if(c==="circle")return ae.createElement(Ub,mu({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:i,r:o}));var u=this.props.ticks,h=u.map(function(f){return Hr(s,i,o,f.coordinate)});return ae.createElement(xWe,mu({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,d=s.stroke,u=bt(this.props,!1),h=bt(o,!1),f=nu(nu({},u),{},{fill:"none"},bt(l,!1)),g=i.map(function(x,m){var p=n.getTickLineCoord(x),b=n.getTickTextAnchor(x),v=nu(nu(nu({textAnchor:b},u),{},{stroke:"none",fill:d},h),{},{index:m,payload:x,x:p.x2,y:p.y2});return ae.createElement(Jt,mu({className:Pt("recharts-polar-angle-axis-tick",WY(o)),key:"tick-".concat(x.coordinate)},Qu(n.props,x,m)),l&&ae.createElement("line",mu({className:"recharts-polar-angle-axis-tick-line"},f,p)),o&&e.renderTickItem(o,v,c?c(x.value,m):x.value))});return ae.createElement(Jt,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:ae.createElement(Jt,{className:Pt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return ae.isValidElement(n)?o=ae.cloneElement(n,s):St(n)?o=n(s):o=ae.createElement(Ju,mu({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(N.PureComponent);wj(jj,"displayName","PolarAngleAxis");wj(jj,"axisType","angleAxis");wj(jj,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var nXe=pX,aXe=nXe(Object.getPrototypeOf,Object),sXe=aXe,iXe=xc,oXe=sXe,lXe=bc,cXe="[object Object]",dXe=Function.prototype,uXe=Object.prototype,hZ=dXe.toString,hXe=uXe.hasOwnProperty,fXe=hZ.call(Object);function gXe(t){if(!lXe(t)||iXe(t)!=cXe)return!1;var e=oXe(t);if(e===null)return!0;var r=hXe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&hZ.call(r)==fXe}var mXe=gXe;const pXe=Vt(mXe);var xXe=xc,bXe=bc,yXe="[object Boolean]";function vXe(t){return t===!0||t===!1||bXe(t)&&xXe(t)==yXe}var kXe=vXe;const wXe=Vt(kXe);function Rx(t){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rx(t)}function Kk(){return Kk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kk.apply(this,arguments)}function jXe(t,e){return AXe(t)||SXe(t,e)||_Xe(t,e)||NXe()}function NXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Xe(t,e){if(t){if(typeof t=="string")return L$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L$(t,e)}}function L$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function SXe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function AXe(t){if(Array.isArray(t))return t}function R$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function P$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(r),!0).forEach(function(n){EXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EXe(t,e,r){return e=CXe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CXe(t){var e=TXe(t,"string");return Rx(e)=="symbol"?e:e+""}function TXe(t,e){if(Rx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z$=function(e,r,n,s,i){var o=n-s,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+i),l+="L ".concat(e+n-o/2-s,",").concat(r+i),l+="L ".concat(e,",").concat(r," Z"),l},OXe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IXe=function(e){var r=P$(P$({},OXe),e),n=N.useRef(),s=N.useState(-1),i=jXe(s,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&l(y)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,h=r.lowerWidth,f=r.height,g=r.className,x=r.animationEasing,m=r.animationDuration,p=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||f!==+f||u===0&&h===0||f===0)return null;var v=Pt("recharts-trapezoid",g);return b?ae.createElement(no,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:f,x:c,y:d},duration:m,animationEasing:x,isActive:b},function(y){var w=y.upperWidth,k=y.lowerWidth,j=y.height,_=y.x,S=y.y;return ae.createElement(no,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,easing:x},ae.createElement("path",Kk({},bt(r,!0),{className:v,d:z$(_,S,w,k,j),ref:n})))}):ae.createElement("g",null,ae.createElement("path",Kk({},bt(r,!0),{className:v,d:z$(c,d,u,h,f)})))},DXe=["option","shapeType","propTransformer","activeClassName","isActive"];function Px(t){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Px(t)}function MXe(t,e){if(t==null)return{};var r=LXe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function LXe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Gk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$$(Object(r),!0).forEach(function(n){RXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RXe(t,e,r){return e=PXe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PXe(t){var e=zXe(t,"string");return Px(e)=="symbol"?e:e+""}function zXe(t,e){if(Px(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Xe(t,e){return Gk(Gk({},e),t)}function FXe(t,e){return t==="symbols"}function F$(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return ae.createElement(XO,r);case"trapezoid":return ae.createElement(IXe,r);case"sector":return ae.createElement(ZY,r);case"symbols":if(FXe(e))return ae.createElement(fO,r);break;default:return null}}function BXe(t){return N.isValidElement(t)?t.props:t}function fZ(t){var e=t.option,r=t.shapeType,n=t.propTransformer,s=n===void 0?$Xe:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,l=t.isActive,c=MXe(t,DXe),d;if(N.isValidElement(e))d=N.cloneElement(e,Gk(Gk({},c),BXe(e)));else if(St(e))d=e(c);else if(pXe(e)&&!wXe(e)){var u=s(e,c);d=ae.createElement(F$,{shapeType:r,elementProps:u})}else{var h=c;d=ae.createElement(F$,{shapeType:r,elementProps:h})}return l?ae.createElement(Jt,{className:o},d):d}function Nj(t,e){return e!=null&&"trapezoids"in t.props}function _j(t,e){return e!=null&&"sectors"in t.props}function zx(t,e){return e!=null&&"points"in t.props}function UXe(t,e){var r,n,s=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return s&&i}function KXe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function GXe(t,e){var r=t.x===e.x,n=t.y===e.y,s=t.z===e.z;return r&&n&&s}function qXe(t,e){var r;return Nj(t,e)?r=UXe:_j(t,e)?r=KXe:zx(t,e)&&(r=GXe),r}function VXe(t,e){var r;return Nj(t,e)?r="trapezoids":_j(t,e)?r="sectors":zx(t,e)&&(r="points"),r}function HXe(t,e){if(Nj(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(_j(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return zx(t,e)?e.payload:{}}function WXe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,s=VXe(r,e),i=HXe(r,e),o=n.filter(function(c,d){var u=eh(i,c),h=r.props[s].filter(function(x){var m=qXe(r,e);return m(x,e)}),f=r.props[s].indexOf(h[h.length-1]),g=d===f;return u&&g}),l=n.indexOf(o[o.length-1]);return l}var Uv;function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cf.apply(this,arguments)}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ur(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(n){oi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XXe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mZ(n.key),n)}}function YXe(t,e,r){return e&&U$(t.prototype,e),r&&U$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZXe(t,e,r){return e=qk(e),QXe(t,gZ()?Reflect.construct(e,r||[],qk(t).constructor):e.apply(t,r))}function QXe(t,e){if(e&&(Dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JXe(t)}function JXe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gZ=function(){return!!t})()}function qk(t){return qk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qk(t)}function eYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g3(t,e)}function g3(t,e){return g3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},g3(t,e)}function oi(t,e,r){return e=mZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mZ(t){var e=tYe(t,"string");return Dg(e)=="symbol"?e:e+""}function tYe(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vc=function(t){function e(r){var n;return XXe(this,e),n=ZXe(this,e,[r]),oi(n,"pieRef",null),oi(n,"sectorRefs",[]),oi(n,"id",Ah("recharts-pie-")),oi(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),St(s)&&s()}),oi(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),St(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return eYe(e,t),YXe(e,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,u=bt(this.props,!1),h=bt(o,!1),f=bt(l,!1),g=o&&o.offsetRadius||20,x=n.map(function(m,p){var b=(m.startAngle+m.endAngle)/2,v=Hr(m.cx,m.cy,m.outerRadius+g,b),y=Ur(Ur(Ur(Ur({},u),m),{},{stroke:"none"},h),{},{index:p,textAnchor:e.getTextAnchor(v.x,m.cx)},v),w=Ur(Ur(Ur(Ur({},u),m),{},{fill:"none",stroke:m.fill},f),{},{index:p,points:[Hr(m.cx,m.cy,m.outerRadius,b),v]}),k=c;return Dt(c)&&Dt(d)?k="value":Dt(c)&&(k=d),ae.createElement(Jt,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(p)},l&&e.renderLabelLineItem(l,w,"line"),e.renderLabelItem(o,y,wn(m,k)))});return ae.createElement(Jt,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&n.length!==1)return null;var h=s.isActiveIndex(u),f=c&&s.hasActiveIndex()?c:null,g=h?o:f,x=Ur(Ur({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return ae.createElement(Jt,Cf({ref:function(p){p&&!s.sectorRefs.includes(p)&&s.sectorRefs.push(p)},tabIndex:-1,className:"recharts-pie-sector"},Qu(s.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),ae.createElement(fZ,Cf({option:g,isActive:h,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,d=s.animationEasing,u=s.animationId,h=this.state,f=h.prevSectors,g=h.prevIsAnimationActive;return ae.createElement(no,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var m=x.t,p=[],b=i&&i[0],v=b.startAngle;return i.forEach(function(y,w){var k=f&&f[w],j=w>0?$s(y,"paddingAngle",0):0;if(k){var _=Vn(k.endAngle-k.startAngle,y.endAngle-y.startAngle),S=Ur(Ur({},y),{},{startAngle:v+j,endAngle:v+_(m)+j});p.push(S),v=S.endAngle}else{var A=y.endAngle,T=y.startAngle,E=Vn(0,A-T),C=E(m),z=Ur(Ur({},y),{},{startAngle:v+j,endAngle:v+C+j});p.push(z),v=z.endAngle}}),ae.createElement(Jt,null,n.renderSectorsStatically(p))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!eh(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,c=s.label,d=s.cx,u=s.cy,h=s.innerRadius,f=s.outerRadius,g=s.isAnimationActive,x=this.state.isAnimationFinished;if(i||!o||!o.length||!Ve(d)||!Ve(u)||!Ve(h)||!Ve(f))return null;var m=Pt("recharts-pie",l);return ae.createElement(Jt,{tabIndex:this.props.rootTabIndex,className:m,ref:function(b){n.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),na.renderCallByParent(this.props,null,!1),(!g||x)&&Bo.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(ae.isValidElement(n))return ae.cloneElement(n,s);if(St(n))return n(s);var o=Pt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ae.createElement(Ru,Cf({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,i){if(ae.isValidElement(n))return ae.cloneElement(n,s);var o=i;if(St(n)&&(o=n(s),ae.isValidElement(o)))return o;var l=Pt("recharts-pie-label-text",typeof n!="boolean"&&!St(n)?n.className:"");return ae.createElement(Ju,Cf({},s,{alignmentBaseline:"middle",className:l}),o)}}])}(N.PureComponent);Uv=vc;oi(vc,"displayName","Pie");oi(vc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ud.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});oi(vc,"parseDeltaAngle",function(t,e){var r=Ka(e-t),n=Math.min(Math.abs(e-t),360);return r*n});oi(vc,"getRealPieData",function(t){var e=t.data,r=t.children,n=bt(t,!1),s=Fs(r,Tm);return e&&e.length?e.map(function(i,o){return Ur(Ur(Ur({payload:i},n),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return Ur(Ur({},n),i.props)}):[]});oi(vc,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,s=e.width,i=e.height,o=HY(s,i),l=n+Ga(t.cx,s,s/2),c=r+Ga(t.cy,i,i/2),d=Ga(t.innerRadius,o,0),u=Ga(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});oi(vc,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?Ur(Ur({},e.type.defaultProps),e.props):e.props,s=Uv.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,d=n.dataKey,u=n.nameKey,h=n.valueKey,f=n.tooltipType,g=Math.abs(n.minAngle),x=Uv.parseCoordinateOfPie(n,r),m=Uv.parseDeltaAngle(o,l),p=Math.abs(m),b=d;Dt(d)&&Dt(h)?(Wi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):Dt(d)&&(Wi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=h);var v=s.filter(function(S){return wn(S,b,0)!==0}).length,y=(p>=360?v:v-1)*c,w=p-v*g-y,k=s.reduce(function(S,A){var T=wn(A,b,0);return S+(Ve(T)?T:0)},0),j;if(k>0){var _;j=s.map(function(S,A){var T=wn(S,b,0),E=wn(S,u,A),C=(Ve(T)?T:0)/k,z;A?z=_.endAngle+Ka(m)*c*(T!==0?1:0):z=o;var M=z+Ka(m)*((T!==0?g:0)+C*w),F=(z+M)/2,D=(x.innerRadius+x.outerRadius)/2,L=[{name:E,value:T,payload:S,dataKey:b,type:f}],K=Hr(x.cx,x.cy,D,F);return _=Ur(Ur(Ur({percent:C,cornerRadius:i,name:E,tooltipPayload:L,midAngle:F,middleRadius:D,tooltipPosition:K},S),x),{},{value:wn(S,b),startAngle:z,endAngle:M,payload:S,paddingAngle:Ka(m)*c}),_})}return Ur(Ur({},x),{},{sectors:j,data:s})});var rYe=Math.ceil,nYe=Math.max;function aYe(t,e,r,n){for(var s=-1,i=nYe(rYe((e-t)/(r||1)),0),o=Array(i);i--;)o[n?i:++s]=t,t+=r;return o}var sYe=aYe,iYe=LX,K$=1/0,oYe=17976931348623157e292;function lYe(t){if(!t)return t===0?t:0;if(t=iYe(t),t===K$||t===-K$){var e=t<0?-1:1;return e*oYe}return t===t?t:0}var pZ=lYe,cYe=sYe,dYe=cj,nS=pZ;function uYe(t){return function(e,r,n){return n&&typeof n!="number"&&dYe(e,r,n)&&(r=n=void 0),e=nS(e),r===void 0?(r=e,e=0):r=nS(r),n=n===void 0?e<r?1:-1:nS(n),cYe(e,r,n,t)}}var hYe=uYe,fYe=hYe,gYe=fYe(),mYe=gYe;const Vk=Vt(mYe);function $x(t){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$x(t)}function G$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function q$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(r),!0).forEach(function(n){xZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xZ(t,e,r){return e=pYe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pYe(t){var e=xYe(t,"string");return $x(e)=="symbol"?e:e+""}function xYe(t,e){if($x(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($x(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bYe=["Webkit","Moz","O","ms"],yYe=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),s=bYe.reduce(function(i,o){return q$(q$({},i),{},xZ({},o+n,r))},{});return s[e]=r,s};function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function Hk(){return Hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hk.apply(this,arguments)}function V$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function aS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V$(Object(r),!0).forEach(function(n){vs(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yZ(n.key),n)}}function kYe(t,e,r){return e&&H$(t.prototype,e),r&&H$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wYe(t,e,r){return e=Wk(e),jYe(t,bZ()?Reflect.construct(e,r||[],Wk(t).constructor):e.apply(t,r))}function jYe(t,e){if(e&&(Mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NYe(t)}function NYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bZ=function(){return!!t})()}function Wk(t){return Wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wk(t)}function _Ye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m3(t,e)}function m3(t,e){return m3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},m3(t,e)}function vs(t,e,r){return e=yZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yZ(t){var e=SYe(t,"string");return Mg(e)=="symbol"?e:e+""}function SYe(t,e){if(Mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var AYe=function(e){var r=e.data,n=e.startIndex,s=e.endIndex,i=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=u0().domain(Vk(0,c)).range([i,i+o-l]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(s),scale:d,scaleValues:u}},W$=function(e){return e.changedTouches&&!!e.changedTouches.length},Lg=function(t){function e(r){var n;return vYe(this,e),n=wYe(this,e,[r]),vs(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),vs(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),vs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),vs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),vs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),vs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),vs(n,"handleSlideDragStart",function(s){var i=W$(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return _Ye(e,t),kYe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,h=Math.min(s,i),f=Math.max(s,i),g=e.getIndexInRange(o,h),x=e.getIndexInRange(o,f);return{startIndex:g-g%c,endIndex:x===u?u:x-x%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=wn(i[n],l,n);return St(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,f=c.startIndex,g=c.endIndex,x=c.onChange,m=n.pageX-i;m>0?m=Math.min(m,d+u-h-l,d+u-h-o):m<0&&(m=Math.max(m,d-o,d-l));var p=this.getIndex({startX:o+m,endX:l+m});(p.startIndex!==f||p.endIndex!==g)&&x&&x(p),this.setState({startX:o+m,endX:l+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=W$(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[o],u=this.props,h=u.x,f=u.width,g=u.travellerWidth,x=u.onChange,m=u.gap,p=u.data,b={startX:this.state.startX,endX:this.state.endX},v=n.pageX-i;v>0?v=Math.min(v,h+f-g-d):v<0&&(v=Math.max(v,h-d)),b[o]=d+v;var y=this.getIndex(b),w=y.startIndex,k=y.endIndex,j=function(){var S=p.length-1;return o==="startX"&&(l>c?w%m===0:k%m===0)||l<c&&k===S||o==="endX"&&(l>c?k%m===0:w%m===0)||l>c&&k===S};this.setState(vs(vs({},o,d+v),"brushMoveStartX",n.pageX),function(){x&&j()&&x(y)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[s],h=l.indexOf(u);if(h!==-1){var f=h+n;if(!(f===-1||f>=l.length)){var g=l[f];s==="startX"&&g>=d||s==="endX"&&g<=c||this.setState(vs({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,d=n.stroke;return ae.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.data,d=n.children,u=n.padding,h=N.Children.only(d);return h?ae.cloneElement(h,{x:s,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,f=c.traveller,g=c.ariaLabel,x=c.data,m=c.startIndex,p=c.endIndex,b=Math.max(n,this.props.x),v=aS(aS({},bt(this.props,!1)),{},{x:b,y:d,width:u,height:h}),y=g||"Min value: ".concat((i=x[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=x[p])===null||o===void 0?void 0:o.name);return ae.createElement(Jt,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,v))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(n,s)+d,h=Math.max(Math.abs(s-n)-d,0);return ae.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:h,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,d=n.stroke,u=this.state,h=u.startX,f=u.endX,g=5,x={pointerEvents:"none",fill:d};return ae.createElement(Jt,{className:"recharts-brush-texts"},ae.createElement(Ju,Hk({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-g,y:o+l/2},x),this.getTextOfTick(s)),ae.createElement(Ju,Hk({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+g,y:o+l/2},x),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,c=n.y,d=n.width,u=n.height,h=n.alwaysShowText,f=this.state,g=f.startX,x=f.endX,m=f.isTextActive,p=f.isSlideMoving,b=f.isTravellerMoving,v=f.isTravellerFocused;if(!s||!s.length||!Ve(l)||!Ve(c)||!Ve(d)||!Ve(u)||d<=0||u<=0)return null;var y=Pt("recharts-brush",i),w=ae.Children.count(o)===1,k=yYe("userSelect","none");return ae.createElement(Jt,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(g,x),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(x,"endX"),(m||p||b||v||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,d=Math.floor(i+l/2)-1;return ae.createElement(ae.Fragment,null,ae.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),ae.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),ae.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return ae.isValidElement(n)?i=ae.cloneElement(n,s):St(n)?i=n(s):i=e.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,d=n.updateId,u=n.startIndex,h=n.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return aS({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?AYe({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var f=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])}(N.PureComponent);vs(Lg,"displayName","Brush");vs(Lg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var EYe=vO;function CYe(t,e){var r;return EYe(t,function(n,s,i){return r=e(n,s,i),!r}),!!r}var TYe=CYe,OYe=lX,IYe=dl,DYe=TYe,MYe=ms,LYe=cj;function RYe(t,e,r){var n=MYe(t)?OYe:DYe;return r&&LYe(t,e,r)&&(e=void 0),n(t,IYe(e))}var PYe=RYe;const zYe=Vt(PYe);var Uo=function(e,r){var n=e.alwaysShow,s=e.ifOverflow;return n&&(s="extendDomain"),s===r},X$=TX;function $Ye(t,e,r){e=="__proto__"&&X$?X$(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var FYe=$Ye,BYe=FYe,UYe=EX,KYe=dl;function GYe(t,e){var r={};return e=KYe(e),UYe(t,function(n,s,i){BYe(r,s,e(n,s,i))}),r}var qYe=GYe;const VYe=Vt(qYe);function HYe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var WYe=HYe,XYe=vO;function YYe(t,e){var r=!0;return XYe(t,function(n,s,i){return r=!!e(n,s,i),r}),r}var ZYe=YYe,QYe=WYe,JYe=ZYe,eZe=dl,tZe=ms,rZe=cj;function nZe(t,e,r){var n=tZe(t)?QYe:JYe;return r&&rZe(t,e,r)&&(e=void 0),n(t,eZe(e))}var aZe=nZe;const vZ=Vt(aZe);var sZe=["x","y"];function Fx(t){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fx(t)}function p3(){return p3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p3.apply(this,arguments)}function Y$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function xp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y$(Object(r),!0).forEach(function(n){iZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iZe(t,e,r){return e=oZe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oZe(t){var e=lZe(t,"string");return Fx(e)=="symbol"?e:e+""}function lZe(t,e){if(Fx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cZe(t,e){if(t==null)return{};var r=dZe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dZe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function uZe(t,e){var r=t.x,n=t.y,s=cZe(t,sZe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),d="".concat(e.height||s.height),u=parseInt(d,10),h="".concat(e.width||s.width),f=parseInt(h,10);return xp(xp(xp(xp(xp({},e),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function Z$(t){return ae.createElement(fZ,p3({shapeType:"rectangle",propTransformer:uZe,activeClassName:"recharts-active-bar"},t))}var hZe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof e=="number")return e;var i=Ve(n)||M6e(n);return i?e(n,s):(i||rh(),r)}},fZe=["value","background"],kZ;function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function gZe(t,e){if(t==null)return{};var r=mZe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mZe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Xk(){return Xk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xk.apply(this,arguments)}function Q$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Q$(Object(r),!0).forEach(function(n){ed(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jZ(n.key),n)}}function xZe(t,e,r){return e&&J$(t.prototype,e),r&&J$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bZe(t,e,r){return e=Yk(e),yZe(t,wZ()?Reflect.construct(e,r||[],Yk(t).constructor):e.apply(t,r))}function yZe(t,e){if(e&&(Rg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vZe(t)}function vZe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wZ=function(){return!!t})()}function Yk(t){return Yk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yk(t)}function kZe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x3(t,e)}function x3(t,e){return x3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},x3(t,e)}function ed(t,e,r){return e=jZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jZ(t){var e=wZe(t,"string");return Rg(e)=="symbol"?e:e+""}function wZe(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ao=function(t){function e(){var r;pZe(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=bZe(this,e,[].concat(s)),ed(r,"state",{isAnimationFinished:!1}),ed(r,"id",Ah("recharts-bar-")),ed(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),ed(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return kZe(e,t),xZe(e,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=bt(this.props,!1);return n&&n.map(function(h,f){var g=f===c,x=g?d:o,m=En(En(En({},u),h),{},{isActive:g,option:x,index:f,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ae.createElement(Jt,Xk({className:"recharts-bar-rectangle"},Qu(s.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),ae.createElement(Z$,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,u=s.animationEasing,h=s.animationId,f=this.state.prevData;return ae.createElement(no,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t,m=i.map(function(p,b){var v=f&&f[b];if(v){var y=Vn(v.x,p.x),w=Vn(v.y,p.y),k=Vn(v.width,p.width),j=Vn(v.height,p.height);return En(En({},p),{},{x:y(x),y:w(x),width:k(x),height:j(x)})}if(o==="horizontal"){var _=Vn(0,p.height),S=_(x);return En(En({},p),{},{y:p.y+p.height-S,height:S})}var A=Vn(0,p.width),T=A(x);return En(En({},p),{},{width:T})});return ae.createElement(Jt,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!eh(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=bt(this.props.background,!1);return i.map(function(d,u){d.value;var h=d.background,f=gZe(d,fZe);if(!h)return null;var g=En(En(En(En(En({},f),{},{fill:"#eee"},h),c),Qu(n.props,d,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ae.createElement(Z$,Xk({key:"background-bar-".concat(u),option:n.props.background,isActive:u===l},g))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Fs(u,Bb);if(!h)return null;var f=d==="vertical"?o[0].height/2:o[0].width/2,g=function(p,b){var v=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:v,errorVal:wn(p,b)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return ae.createElement(Jt,x,h.map(function(m){return ae.cloneElement(m,{key:"error-bar-".concat(s,"-").concat(m.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:f,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,d=n.left,u=n.top,h=n.width,f=n.height,g=n.isAnimationActive,x=n.background,m=n.id;if(s||!i||!i.length)return null;var p=this.state.isAnimationFinished,b=Pt("recharts-bar",o),v=l&&l.allowDataOverflow,y=c&&c.allowDataOverflow,w=v||y,k=Dt(m)?this.id:m;return ae.createElement(Jt,{className:b},v||y?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(k)},ae.createElement("rect",{x:v?d:d-h/2,y:y?u:u-f/2,width:v?h:h*2,height:y?f:f*2}))):null,ae.createElement(Jt,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(k,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,k),(!g||p)&&Bo.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(N.PureComponent);kZ=ao;ed(ao,"displayName","Bar");ed(ao,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ud.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ed(ao,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,s=t.bandSize,i=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,h=t.displayedData,f=t.offset,g=QGe(n,r);if(!g)return null;var x=e.layout,m=r.type.defaultProps,p=m!==void 0?En(En({},m),r.props):r.props,b=p.dataKey,v=p.children,y=p.minPointSize,w=x==="horizontal"?o:i,k=d?w.scale.domain():null,j=sqe({numericAxis:w}),_=Fs(v,Tm),S=h.map(function(A,T){var E,C,z,M,F,D;d?E=JGe(d[u+T],k):(E=wn(A,b),Array.isArray(E)||(E=[j,E]));var L=hZe(y,kZ.defaultProps.minPointSize)(E[1],T);if(x==="horizontal"){var K,$=[o.scale(E[0]),o.scale(E[1])],R=$[0],Y=$[1];C=qz({axis:i,ticks:l,bandSize:s,offset:g.offset,entry:A,index:T}),z=(K=Y??R)!==null&&K!==void 0?K:void 0,M=g.size;var ee=R-Y;if(F=Number.isNaN(ee)?0:ee,D={x:C,y:o.y,width:M,height:o.height},Math.abs(L)>0&&Math.abs(F)<Math.abs(L)){var B=Ka(F||L)*(Math.abs(L)-Math.abs(F));z-=B,F+=B}}else{var U=[i.scale(E[0]),i.scale(E[1])],V=U[0],se=U[1];if(C=V,z=qz({axis:o,ticks:c,bandSize:s,offset:g.offset,entry:A,index:T}),M=se-V,F=g.size,D={x:i.x,y:z,width:i.width,height:F},Math.abs(L)>0&&Math.abs(M)<Math.abs(L)){var Ne=Ka(M||L)*(Math.abs(L)-Math.abs(M));M+=Ne}}return En(En(En({},A),{},{x:C,y:z,width:M,height:F,value:d?E:E[1],payload:A,background:D},_&&_[T]&&_[T].props),{},{tooltipPayload:[qY(r,A)],tooltipPosition:{x:C+M/2,y:z+F/2}})});return En({data:S,layout:x},f)});function Bx(t){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bx(t)}function jZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NZ(n.key),n)}}function NZe(t,e,r){return e&&e9(t.prototype,e),r&&e9(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function t9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Pi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t9(Object(r),!0).forEach(function(n){Sj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sj(t,e,r){return e=NZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NZ(t){var e=_Ze(t,"string");return Bx(e)=="symbol"?e:e+""}function _Ze(t,e){if(Bx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YO=function(e,r,n,s,i){var o=e.width,l=e.height,c=e.layout,d=e.children,u=Object.keys(r),h={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},f=!!Ns(d,ao);return u.reduce(function(g,x){var m=r[x],p=m.orientation,b=m.domain,v=m.padding,y=v===void 0?{}:v,w=m.mirror,k=m.reversed,j="".concat(p).concat(w?"Mirror":""),_,S,A,T,E;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var C=b[1]-b[0],z=1/0,M=m.categoricalDomain.sort(P6e);if(M.forEach(function(U,V){V>0&&(z=Math.min((U||0)-(M[V-1]||0),z))}),Number.isFinite(z)){var F=z/C,D=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(_=F*D/2),m.padding==="no-gap"){var L=Ga(e.barCategoryGap,F*D),K=F*D/2;_=K-L-(K-L)/D*L}}}s==="xAxis"?S=[n.left+(y.left||0)+(_||0),n.left+n.width-(y.right||0)-(_||0)]:s==="yAxis"?S=c==="horizontal"?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(_||0),n.top+n.height-(y.bottom||0)-(_||0)]:S=m.range,k&&(S=[S[1],S[0]]);var $=BY(m,i,f),R=$.scale,Y=$.realScaleType;R.domain(b).range(S),UY(R);var ee=KY(R,Pi(Pi({},m),{},{realScaleType:Y}));s==="xAxis"?(E=p==="top"&&!w||p==="bottom"&&w,A=n.left,T=h[j]-E*m.height):s==="yAxis"&&(E=p==="left"&&!w||p==="right"&&w,A=h[j]-E*m.width,T=n.top);var B=Pi(Pi(Pi({},m),ee),{},{realScaleType:Y,x:A,y:T,scale:R,width:s==="xAxis"?n.width:m.width,height:s==="yAxis"?n.height:m.height});return B.bandSize=Dk(B,ee),!m.hide&&s==="xAxis"?h[j]+=(E?-1:1)*B.height:m.hide||(h[j]+=(E?-1:1)*B.width),Pi(Pi({},g),{},Sj({},x,B))},{})},_Z=function(e,r){var n=e.x,s=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},SZe=function(e){var r=e.x1,n=e.y1,s=e.x2,i=e.y2;return _Z({x:r,y:n},{x:s,y:i})},SZ=function(){function t(e){jZe(this,t),this.scale=e}return NZe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new t(r)}}])}();Sj(SZ,"EPS",1e-4);var ZO=function(e){var r=Object.keys(e).reduce(function(n,s){return Pi(Pi({},n),{},Sj({},s,SZ.create(e[s])))},{});return Pi(Pi({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return VYe(s,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return vZ(s,function(i,o){return r[o].isInRange(i)})}})};function AZe(t){return(t%180+180)%180}var EZe=function(e){var r=e.width,n=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=AZe(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},CZe=dl,TZe=Rb,OZe=oj;function IZe(t){return function(e,r,n){var s=Object(e);if(!TZe(e)){var i=CZe(r);e=OZe(e),r=function(l){return i(s[l],l,s)}}var o=t(e,r,n);return o>-1?s[i?e[o]:o]:void 0}}var DZe=IZe,MZe=pZ;function LZe(t){var e=MZe(t),r=e%1;return e===e?r?e-r:e:0}var RZe=LZe,PZe=wX,zZe=dl,$Ze=RZe,FZe=Math.max;function BZe(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var s=r==null?0:$Ze(r);return s<0&&(s=FZe(n+s,0)),PZe(t,zZe(e),s)}var UZe=BZe,KZe=DZe,GZe=UZe,qZe=KZe(GZe),VZe=qZe;const HZe=Vt(VZe);var WZe=FIe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),QO=N.createContext(void 0),JO=N.createContext(void 0),AZ=N.createContext(void 0),EZ=N.createContext({}),CZ=N.createContext(void 0),TZ=N.createContext(0),OZ=N.createContext(0),r9=function(e){var r=e.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,u=WZe(i);return ae.createElement(QO.Provider,{value:n},ae.createElement(JO.Provider,{value:s},ae.createElement(EZ.Provider,{value:i},ae.createElement(AZ.Provider,{value:u},ae.createElement(CZ.Provider,{value:o},ae.createElement(TZ.Provider,{value:d},ae.createElement(OZ.Provider,{value:c},l)))))))},XZe=function(){return N.useContext(CZ)},IZ=function(e){var r=N.useContext(QO);r==null&&rh();var n=r[e];return n==null&&rh(),n},YZe=function(){var e=N.useContext(QO);return Bc(e)},ZZe=function(){var e=N.useContext(JO),r=HZe(e,function(n){return vZ(n.domain,Number.isFinite)});return r||Bc(e)},DZ=function(e){var r=N.useContext(JO);r==null&&rh();var n=r[e];return n==null&&rh(),n},QZe=function(){var e=N.useContext(AZ);return e},JZe=function(){return N.useContext(EZ)},eI=function(){return N.useContext(OZ)},tI=function(){return N.useContext(TZ)};function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function eQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tQe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LZ(n.key),n)}}function rQe(t,e,r){return e&&tQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nQe(t,e,r){return e=Zk(e),aQe(t,MZ()?Reflect.construct(e,r||[],Zk(t).constructor):e.apply(t,r))}function aQe(t,e){if(e&&(Pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sQe(t)}function sQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MZ=function(){return!!t})()}function Zk(t){return Zk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zk(t)}function iQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b3(t,e)}function b3(t,e){return b3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},b3(t,e)}function n9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function a9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(r),!0).forEach(function(n){rI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rI(t,e,r){return e=LZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LZ(t){var e=oQe(t,"string");return Pg(e)=="symbol"?e:e+""}function oQe(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lQe(t,e){return hQe(t)||uQe(t,e)||dQe(t,e)||cQe()}function cQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dQe(t,e){if(t){if(typeof t=="string")return s9(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s9(t,e)}}function s9(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uQe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function hQe(t){if(Array.isArray(t))return t}function y3(){return y3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y3.apply(this,arguments)}var fQe=function(e,r){var n;return ae.isValidElement(e)?n=ae.cloneElement(e,r):St(e)?n=e(r):n=ae.createElement("line",y3({},r,{className:"recharts-reference-line-line"})),n},gQe=function(e,r,n,s,i,o,l,c,d){var u=i.x,h=i.y,f=i.width,g=i.height;if(n){var x=d.y,m=e.y.apply(x,{position:o});if(Uo(d,"discard")&&!e.y.isInRange(m))return null;var p=[{x:u+f,y:m},{x:u,y:m}];return c==="left"?p.reverse():p}if(r){var b=d.x,v=e.x.apply(b,{position:o});if(Uo(d,"discard")&&!e.x.isInRange(v))return null;var y=[{x:v,y:h+g},{x:v,y:h}];return l==="top"?y.reverse():y}if(s){var w=d.segment,k=w.map(function(j){return e.apply(j,{position:o})});return Uo(d,"discard")&&zYe(k,function(j){return!e.isInRange(j)})?null:k}return null};function mQe(t){var e=t.x,r=t.y,n=t.segment,s=t.xAxisId,i=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=XZe(),u=IZ(s),h=DZ(i),f=QZe();if(!d||!f)return null;Wi(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=ZO({x:u.scale,y:h.scale}),x=Wn(e),m=Wn(r),p=n&&n.length===2,b=gQe(g,x,m,p,f,t.position,u.orientation,h.orientation,t);if(!b)return null;var v=lQe(b,2),y=v[0],w=y.x,k=y.y,j=v[1],_=j.x,S=j.y,A=Uo(t,"hidden")?"url(#".concat(d,")"):void 0,T=a9(a9({clipPath:A},bt(t,!0)),{},{x1:w,y1:k,x2:_,y2:S});return ae.createElement(Jt,{className:Pt("recharts-reference-line",l)},fQe(o,T),na.renderCallByParent(t,SZe({x1:w,y1:k,x2:_,y2:S})))}var nI=function(t){function e(){return eQe(this,e),nQe(this,e,arguments)}return iQe(e,t),rQe(e,[{key:"render",value:function(){return ae.createElement(mQe,this.props)}}])}(ae.Component);rI(nI,"displayName","ReferenceLine");rI(nI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function v3(){return v3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},v3.apply(this,arguments)}function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function i9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function o9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i9(Object(r),!0).forEach(function(n){Aj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xQe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PZ(n.key),n)}}function bQe(t,e,r){return e&&xQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yQe(t,e,r){return e=Qk(e),vQe(t,RZ()?Reflect.construct(e,r||[],Qk(t).constructor):e.apply(t,r))}function vQe(t,e){if(e&&(zg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kQe(t)}function kQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RZ=function(){return!!t})()}function Qk(t){return Qk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qk(t)}function wQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k3(t,e)}function k3(t,e){return k3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},k3(t,e)}function Aj(t,e,r){return e=PZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PZ(t){var e=jQe(t,"string");return zg(e)=="symbol"?e:e+""}function jQe(t,e){if(zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var NQe=function(e){var r=e.x,n=e.y,s=e.xAxis,i=e.yAxis,o=ZO({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Uo(e,"discard")&&!o.isInRange(l)?null:l},Ej=function(t){function e(){return pQe(this,e),yQe(this,e,arguments)}return wQe(e,t),bQe(e,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,d=Wn(s),u=Wn(i);if(Wi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=NQe(this.props);if(!h)return null;var f=h.x,g=h.y,x=this.props,m=x.shape,p=x.className,b=Uo(this.props,"hidden")?"url(#".concat(c,")"):void 0,v=o9(o9({clipPath:b},bt(this.props,!0)),{},{cx:f,cy:g});return ae.createElement(Jt,{className:Pt("recharts-reference-dot",p)},e.renderDot(m,v),na.renderCallByParent(this.props,{x:f-o,y:g-o,width:2*o,height:2*o}))}}])}(ae.Component);Aj(Ej,"displayName","ReferenceDot");Aj(Ej,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Aj(Ej,"renderDot",function(t,e){var r;return ae.isValidElement(t)?r=ae.cloneElement(t,e):St(t)?r=t(e):r=ae.createElement(Ub,v3({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function w3(){return w3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w3.apply(this,arguments)}function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function l9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function c9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?l9(Object(r),!0).forEach(function(n){Cj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SQe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$Z(n.key),n)}}function AQe(t,e,r){return e&&SQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function EQe(t,e,r){return e=Jk(e),CQe(t,zZ()?Reflect.construct(e,r||[],Jk(t).constructor):e.apply(t,r))}function CQe(t,e){if(e&&($g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TQe(t)}function TQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zZ=function(){return!!t})()}function Jk(t){return Jk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jk(t)}function OQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j3(t,e)}function j3(t,e){return j3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},j3(t,e)}function Cj(t,e,r){return e=$Z(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Z(t){var e=IQe(t,"string");return $g(e)=="symbol"?e:e+""}function IQe(t,e){if($g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var DQe=function(e,r,n,s,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,h=i.yAxis;if(!u||!h)return null;var f=ZO({x:u.scale,y:h.scale}),g={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(c,{position:"start"}):f.y.rangeMin},x={x:r?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(d,{position:"end"}):f.y.rangeMax};return Uo(i,"discard")&&(!f.isInRange(g)||!f.isInRange(x))?null:_Z(g,x)},Tj=function(t){function e(){return _Qe(this,e),EQe(this,e,arguments)}return OQe(e,t),AQe(e,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,d=n.alwaysShow,u=n.clipPathId;Wi(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Wn(s),f=Wn(i),g=Wn(o),x=Wn(l),m=this.props.shape;if(!h&&!f&&!g&&!x&&!m)return null;var p=DQe(h,f,g,x,this.props);if(!p&&!m)return null;var b=Uo(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ae.createElement(Jt,{className:Pt("recharts-reference-area",c)},e.renderRect(m,c9(c9({clipPath:b},bt(this.props,!0)),p)),na.renderCallByParent(this.props,p))}}])}(ae.Component);Cj(Tj,"displayName","ReferenceArea");Cj(Tj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Cj(Tj,"renderRect",function(t,e){var r;return ae.isValidElement(t)?r=ae.cloneElement(t,e):St(t)?r=t(e):r=ae.createElement(XO,w3({},e,{className:"recharts-reference-area-rect"})),r});function FZ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],s=0;s<t.length;s+=e)n.push(t[s]);return n}function MQe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return EZe(n,r)}function LQe(t,e,r){var n=r==="width",s=t.x,i=t.y,o=t.width,l=t.height;return e===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function e2(t,e,r,n,s){if(t*e<t*n||t*e>t*s)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-s)<=0}function RQe(t,e){return FZ(t,e+1)}function PQe(t,e,r,n,s){for(var i=(n||[]).slice(),o=e.start,l=e.end,c=0,d=1,u=o,h=function(){var x=n==null?void 0:n[c];if(x===void 0)return{v:FZ(n,d)};var m=c,p,b=function(){return p===void 0&&(p=r(x,m)),p},v=x.coordinate,y=c===0||e2(t,v,b,u,l);y||(c=0,u=o,d+=1),y&&(u=v+t*(b()/2+s),c+=d)},f;d<=i.length;)if(f=h(),f)return f.v;return[]}function Ux(t){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ux(t)}function d9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Aa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d9(Object(r),!0).forEach(function(n){zQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zQe(t,e,r){return e=$Qe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Qe(t){var e=FQe(t,"string");return Ux(e)=="symbol"?e:e+""}function FQe(t,e){if(Ux(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ux(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BQe(t,e,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=e.start,c=e.end,d=function(f){var g=i[f],x,m=function(){return x===void 0&&(x=r(g,f)),x};if(f===o-1){var p=t*(g.coordinate+t*m()/2-c);i[f]=g=Aa(Aa({},g),{},{tickCoord:p>0?g.coordinate-p*t:g.coordinate})}else i[f]=g=Aa(Aa({},g),{},{tickCoord:g.coordinate});var b=e2(t,g.tickCoord,m,l,c);b&&(c=g.tickCoord-t*(m()/2+s),i[f]=Aa(Aa({},g),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function UQe(t,e,r,n,s,i){var o=(n||[]).slice(),l=o.length,c=e.start,d=e.end;if(i){var u=n[l-1],h=r(u,l-1),f=t*(u.coordinate+t*h/2-d);o[l-1]=u=Aa(Aa({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate});var g=e2(t,u.tickCoord,function(){return h},c,d);g&&(d=u.tickCoord-t*(h/2+s),o[l-1]=Aa(Aa({},u),{},{isShow:!0}))}for(var x=i?l-1:l,m=function(v){var y=o[v],w,k=function(){return w===void 0&&(w=r(y,v)),w};if(v===0){var j=t*(y.coordinate-t*k()/2-c);o[v]=y=Aa(Aa({},y),{},{tickCoord:j<0?y.coordinate-j*t:y.coordinate})}else o[v]=y=Aa(Aa({},y),{},{tickCoord:y.coordinate});var _=e2(t,y.tickCoord,k,c,d);_&&(c=y.tickCoord+t*(k()/2+s),o[v]=Aa(Aa({},y),{},{isShow:!0}))},p=0;p<x;p++)m(p);return o}function aI(t,e,r){var n=t.tick,s=t.ticks,i=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,h=t.angle;if(!s||!s.length||!n)return[];if(Ve(c)||Ud.isSsr)return RQe(s,typeof c=="number"&&Ve(c)?c:0);var f=[],g=l==="top"||l==="bottom"?"width":"height",x=u&&g==="width"?d0(u,{fontSize:e,letterSpacing:r}):{width:0,height:0},m=function(y,w){var k=St(d)?d(y.value,w):y.value;return g==="width"?MQe(d0(k,{fontSize:e,letterSpacing:r}),x,h):d0(k,{fontSize:e,letterSpacing:r})[g]},p=s.length>=2?Ka(s[1].coordinate-s[0].coordinate):1,b=LQe(i,p,g);return c==="equidistantPreserveStart"?PQe(p,b,m,s,o):(c==="preserveStart"||c==="preserveStartEnd"?f=UQe(p,b,m,s,o,c==="preserveStartEnd"):f=BQe(p,b,m,s,o),f.filter(function(v){return v.isShow}))}var KQe=["viewBox"],GQe=["viewBox"],qQe=["ticks"];function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function Tf(){return Tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tf.apply(this,arguments)}function u9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Bn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u9(Object(r),!0).forEach(function(n){sI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sS(t,e){if(t==null)return{};var r=VQe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function VQe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function HQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UZ(n.key),n)}}function WQe(t,e,r){return e&&h9(t.prototype,e),r&&h9(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function XQe(t,e,r){return e=t2(e),YQe(t,BZ()?Reflect.construct(e,r||[],t2(t).constructor):e.apply(t,r))}function YQe(t,e){if(e&&(Fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZQe(t)}function ZQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BZ=function(){return!!t})()}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t2(t)}function QQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N3(t,e)}function N3(t,e){return N3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},N3(t,e)}function sI(t,e,r){return e=UZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UZ(t){var e=JQe(t,"string");return Fg(e)=="symbol"?e:e+""}function JQe(t,e){if(Fg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mm=function(t){function e(r){var n;return HQe(this,e),n=XQe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return QQe(e,t),WQe(e,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=sS(n,KQe),l=this.props,c=l.viewBox,d=sS(l,GQe);return!Xf(i,c)||!Xf(o,d)||!Xf(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,d=s.orientation,u=s.tickSize,h=s.mirror,f=s.tickMargin,g,x,m,p,b,v,y=h?-1:1,w=n.tickSize||u,k=Ve(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":g=x=n.coordinate,p=o+ +!h*c,m=p-y*w,v=m-y*f,b=k;break;case"left":m=p=n.coordinate,x=i+ +!h*l,g=x-y*w,b=g-y*f,v=k;break;case"right":m=p=n.coordinate,x=i+ +h*l,g=x+y*w,b=g+y*f,v=k;break;default:g=x=n.coordinate,p=o+ +h*c,m=p+y*w,v=m+y*f,b=k;break}return{line:{x1:g,y1:m,x2:x,y2:p},tick:{x:b,y:v}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,d=n.mirror,u=n.axisLine,h=Bn(Bn(Bn({},bt(this.props,!1)),bt(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);h=Bn(Bn({},h),{},{x1:s,y1:i+f*l,x2:s+o,y2:i+f*l})}else{var g=+(c==="left"&&!d||c==="right"&&d);h=Bn(Bn({},h),{},{x1:s+g*o,y1:i,x2:s+g*o,y2:i+l})}return ae.createElement("line",Tf({},h,{className:Pt("recharts-cartesian-axis-line",$s(u,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,h=l.tickFormatter,f=l.unit,g=aI(Bn(Bn({},this.props),{},{ticks:n}),s,i),x=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),p=bt(this.props,!1),b=bt(u,!1),v=Bn(Bn({},p),{},{fill:"none"},bt(c,!1)),y=g.map(function(w,k){var j=o.getTickLineCoord(w),_=j.line,S=j.tick,A=Bn(Bn(Bn(Bn({textAnchor:x,verticalAnchor:m},p),{},{stroke:"none",fill:d},b),S),{},{index:k,payload:w,visibleTicksCount:g.length,tickFormatter:h});return ae.createElement(Jt,Tf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},Qu(o.props,w,k)),c&&ae.createElement("line",Tf({},v,_,{className:Pt("recharts-cartesian-axis-tick-line",$s(c,"className"))})),u&&e.renderTickItem(u,A,"".concat(St(h)?h(w.value,k):w.value).concat(f||"")))});return ae.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,d=s.className,u=s.hide;if(u)return null;var h=this.props,f=h.ticks,g=sS(h,qQe),x=f;return St(c)&&(x=f&&f.length>0?c(this.props):c(g)),o<=0||l<=0||!x||!x.length?null:ae.createElement(Jt,{className:Pt("recharts-cartesian-axis",d),ref:function(p){n.layerReference=p}},i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),na.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=Pt(s.className,"recharts-cartesian-axis-tick-value");return ae.isValidElement(n)?o=ae.cloneElement(n,Bn(Bn({},s),{},{className:l})):St(n)?o=n(Bn(Bn({},s),{},{className:l})):o=ae.createElement(Ju,Tf({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(N.Component);sI(Mm,"displayName","CartesianAxis");sI(Mm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var eJe=["x1","y1","x2","y2","key"],tJe=["offset"];function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}function f9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ea(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f9(Object(r),!0).forEach(function(n){rJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rJe(t,e,r){return e=nJe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nJe(t){var e=aJe(t,"string");return nh(e)=="symbol"?e:e+""}function aJe(t,e){if(nh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wu(){return wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wu.apply(this,arguments)}function g9(t,e){if(t==null)return{};var r=sJe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sJe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var iJe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,s=e.x,i=e.y,o=e.width,l=e.height,c=e.ry;return ae.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function KZ(t,e){var r;if(ae.isValidElement(t))r=ae.cloneElement(t,e);else if(St(t))r=t(e);else{var n=e.x1,s=e.y1,i=e.x2,o=e.y2,l=e.key,c=g9(e,eJe),d=bt(c,!1);d.offset;var u=g9(d,tJe);r=ae.createElement("line",wu({},u,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function oJe(t){var e=t.x,r=t.width,n=t.horizontal,s=n===void 0?!0:n,i=t.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=Ea(Ea({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return KZ(s,d)});return ae.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function lJe(t){var e=t.y,r=t.height,n=t.vertical,s=n===void 0?!0:n,i=t.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=Ea(Ea({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return KZ(s,d)});return ae.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function cJe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,s=t.y,i=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var u=l.map(function(f){return Math.round(f+s-s)}).sort(function(f,g){return f-g});s!==u[0]&&u.unshift(0);var h=u.map(function(f,g){var x=!u[g+1],m=x?s+o-f:u[g+1]-f;if(m<=0)return null;var p=g%e.length;return ae.createElement("rect",{key:"react-".concat(g),y:f,x:n,height:m,width:i,stroke:"none",fill:e[p],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function dJe(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,s=t.fillOpacity,i=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!r||!n||!n.length)return null;var u=d.map(function(f){return Math.round(f+i-i)}).sort(function(f,g){return f-g});i!==u[0]&&u.unshift(0);var h=u.map(function(f,g){var x=!u[g+1],m=x?i+l-f:u[g+1]-f;if(m<=0)return null;var p=g%n.length;return ae.createElement("rect",{key:"react-".concat(g),x:f,y:o,width:m,height:c,stroke:"none",fill:n[p],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var uJe=function(e,r){var n=e.xAxis,s=e.width,i=e.height,o=e.offset;return FY(aI(Ea(Ea(Ea({},Mm.defaultProps),n),{},{ticks:Dl(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},hJe=function(e,r){var n=e.yAxis,s=e.width,i=e.height,o=e.offset;return FY(aI(Ea(Ea(Ea({},Mm.defaultProps),n),{},{ticks:Dl(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},Gh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Pu(t){var e,r,n,s,i,o,l=eI(),c=tI(),d=JZe(),u=Ea(Ea({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Gh.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Gh.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Gh.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:Gh.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Gh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Gh.verticalFill,x:Ve(t.x)?t.x:d.left,y:Ve(t.y)?t.y:d.top,width:Ve(t.width)?t.width:d.width,height:Ve(t.height)?t.height:d.height}),h=u.x,f=u.y,g=u.width,x=u.height,m=u.syncWithTicks,p=u.horizontalValues,b=u.verticalValues,v=YZe(),y=ZZe();if(!Ve(g)||g<=0||!Ve(x)||x<=0||!Ve(h)||h!==+h||!Ve(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||uJe,k=u.horizontalCoordinatesGenerator||hJe,j=u.horizontalPoints,_=u.verticalPoints;if((!j||!j.length)&&St(k)){var S=p&&p.length,A=k({yAxis:y?Ea(Ea({},y),{},{ticks:S?p:y.ticks}):void 0,width:l,height:c,offset:d},S?!0:m);Wi(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(nh(A),"]")),Array.isArray(A)&&(j=A)}if((!_||!_.length)&&St(w)){var T=b&&b.length,E=w({xAxis:v?Ea(Ea({},v),{},{ticks:T?b:v.ticks}):void 0,width:l,height:c,offset:d},T?!0:m);Wi(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(nh(E),"]")),Array.isArray(E)&&(_=E)}return ae.createElement("g",{className:"recharts-cartesian-grid"},ae.createElement(iJe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ae.createElement(oJe,wu({},u,{offset:d,horizontalPoints:j,xAxis:v,yAxis:y})),ae.createElement(lJe,wu({},u,{offset:d,verticalPoints:_,xAxis:v,yAxis:y})),ae.createElement(cJe,wu({},u,{horizontalPoints:j})),ae.createElement(dJe,wu({},u,{verticalPoints:_})))}Pu.displayName="CartesianGrid";var fJe=["type","layout","connectNulls","ref"],gJe=["key"];function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function m9(t,e){if(t==null)return{};var r=mJe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mJe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function p0(){return p0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p0.apply(this,arguments)}function p9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ys(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p9(Object(r),!0).forEach(function(n){zi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qh(t){return yJe(t)||bJe(t)||xJe(t)||pJe()}function pJe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xJe(t,e){if(t){if(typeof t=="string")return _3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _3(t,e)}}function bJe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yJe(t){if(Array.isArray(t))return _3(t)}function _3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qZ(n.key),n)}}function kJe(t,e,r){return e&&x9(t.prototype,e),r&&x9(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wJe(t,e,r){return e=r2(e),jJe(t,GZ()?Reflect.construct(e,r||[],r2(t).constructor):e.apply(t,r))}function jJe(t,e){if(e&&(Bg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NJe(t)}function NJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GZ=function(){return!!t})()}function r2(t){return r2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r2(t)}function _Je(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S3(t,e)}function S3(t,e){return S3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},S3(t,e)}function zi(t,e,r){return e=qZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qZ(t){var e=SJe(t,"string");return Bg(e)=="symbol"?e:e+""}function SJe(t,e){if(Bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ah=function(t){function e(){var r;vJe(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=wJe(this,e,[].concat(s)),zi(r,"state",{isAnimationFinished:!0,totalLength:0}),zi(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),zi(r,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(b,v){return b+v});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),h=o%d,f=l-o,g=[],x=0,m=0;x<c.length;m+=c[x],++x)if(m+c[x]>h){g=[].concat(qh(c.slice(0,x)),[h-m]);break}var p=g.length%2===0?[0,f]:[f];return[].concat(qh(e.repeat(c,u)),qh(g),p).map(function(b){return"".concat(b,"px")}).join(", ")}),zi(r,"id",Ah("recharts-line-")),zi(r,"pathRef",function(o){r.mainCurve=o}),zi(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),zi(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return _Je(e,t),kJe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Fs(u,Bb);if(!h)return null;var f=function(m,p){return{x:m.x,y:m.y,value:m.value,errorVal:wn(m.payload,p)}},g={clipPath:n?"url(#clipPath-".concat(s,")"):null};return ae.createElement(Jt,g,h.map(function(x){return ae.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,h=bt(this.props,!1),f=bt(c,!0),g=d.map(function(m,p){var b=ys(ys(ys({key:"dot-".concat(p),r:3},h),f),{},{index:p,cx:m.x,cy:m.y,value:m.value,dataKey:u,payload:m.payload,points:d});return e.renderDotItem(c,b)}),x={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return ae.createElement(Jt,p0({className:"recharts-line-dots",key:"dots"},x),g)}},{key:"renderCurveStatically",value:function(n,s,i,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var h=m9(l,fJe),f=ys(ys(ys({},bt(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:d,connectNulls:u});return ae.createElement(Ru,p0({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,f=o.animationEasing,g=o.animationId,x=o.animateNewValues,m=o.width,p=o.height,b=this.state,v=b.prevPoints,y=b.totalLength;return ae.createElement(no,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var k=w.t;if(v){var j=v.length/l.length,_=l.map(function(C,z){var M=Math.floor(z*j);if(v[M]){var F=v[M],D=Vn(F.x,C.x),L=Vn(F.y,C.y);return ys(ys({},C),{},{x:D(k),y:L(k)})}if(x){var K=Vn(m*2,C.x),$=Vn(p/2,C.y);return ys(ys({},C),{},{x:K(k),y:$(k)})}return ys(ys({},C),{},{x:C.x,y:C.y})});return i.renderCurveStatically(_,n,s)}var S=Vn(0,y),A=S(k),T;if(c){var E="".concat(c).split(/[,\s]+/gim).map(function(C){return parseFloat(C)});T=i.getStrokeDasharray(A,y,E)}else T=i.generateSimpleStrokeDasharray(y,A);return i.renderCurveStatically(l,n,s,{strokeDasharray:T})})}},{key:"renderCurve",value:function(n,s){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!eh(d,o))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(o,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.xAxis,u=s.yAxis,h=s.top,f=s.left,g=s.width,x=s.height,m=s.isAnimationActive,p=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,v=l.length===1,y=Pt("recharts-line",c),w=d&&d.allowDataOverflow,k=u&&u.allowDataOverflow,j=w||k,_=Dt(p)?this.id:p,S=(n=bt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=S.r,T=A===void 0?3:A,E=S.strokeWidth,C=E===void 0?2:E,z=DW(o)?o:{},M=z.clipDot,F=M===void 0?!0:M,D=T*2+C;return ae.createElement(Jt,{className:y},w||k?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(_)},ae.createElement("rect",{x:w?f:f-g/2,y:k?h:h-x/2,width:w?g:g*2,height:k?x:x*2})),!F&&ae.createElement("clipPath",{id:"clipPath-dots-".concat(_)},ae.createElement("rect",{x:f-D/2,y:h-D/2,width:g+D,height:x+D}))):null,!v&&this.renderCurve(j,_),this.renderErrorBar(j,_),(v||o)&&this.renderDots(j,F,_),(!m||b)&&Bo.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var i=n.length%2!==0?[].concat(qh(n),[0]):n,o=[],l=0;l<s;++l)o=[].concat(qh(o),qh(i));return o}},{key:"renderDotItem",value:function(n,s){var i;if(ae.isValidElement(n))i=ae.cloneElement(n,s);else if(St(n))i=n(s);else{var o=s.key,l=m9(s,gJe),c=Pt("recharts-line-dot",typeof n!="boolean"?n.className:"");i=ae.createElement(Ub,p0({key:o},l,{className:c}))}return i}}])}(N.PureComponent);zi(ah,"displayName","Line");zi(ah,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ud.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});zi(ah,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,s=t.xAxisTicks,i=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,u=e.layout,h=c.map(function(f,g){var x=wn(f,o);return u==="horizontal"?{x:Ik({axis:r,ticks:s,bandSize:l,entry:f,index:g}),y:Dt(x)?null:n.scale(x),value:x,payload:f}:{x:Dt(x)?null:r.scale(x),y:Ik({axis:n,ticks:i,bandSize:l,entry:f,index:g}),value:x,payload:f}});return ys({points:h,layout:u},d)});var AJe=["layout","type","stroke","connectNulls","isRange","ref"],EJe=["key"],VZ;function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function HZ(t,e){if(t==null)return{};var r=CJe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function CJe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ju(){return ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ju.apply(this,arguments)}function b9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Tc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b9(Object(r),!0).forEach(function(n){Io(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XZ(n.key),n)}}function OJe(t,e,r){return e&&y9(t.prototype,e),r&&y9(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function IJe(t,e,r){return e=n2(e),DJe(t,WZ()?Reflect.construct(e,r||[],n2(t).constructor):e.apply(t,r))}function DJe(t,e){if(e&&(Ug(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MJe(t)}function MJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WZ=function(){return!!t})()}function n2(t){return n2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n2(t)}function LJe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A3(t,e)}function A3(t,e){return A3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},A3(t,e)}function Io(t,e,r){return e=XZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XZ(t){var e=RJe(t,"string");return Ug(e)=="symbol"?e:e+""}function RJe(t,e){if(Ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vd=function(t){function e(){var r;TJe(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=IJe(this,e,[].concat(s)),Io(r,"state",{isAnimationFinished:!0}),Io(r,"id",Ah("recharts-area-")),Io(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),St(o)&&o()}),Io(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),St(o)&&o()}),r}return LJe(e,t),OJe(e,[{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,h=c.dataKey,f=bt(this.props,!1),g=bt(d,!0),x=u.map(function(p,b){var v=Tc(Tc(Tc({key:"dot-".concat(b),r:3},f),g),{},{index:b,cx:p.x,cy:p.y,dataKey:h,value:p.value,payload:p.payload,points:u});return e.renderDotItem(d,v)}),m={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return ae.createElement(Jt,ju({className:"recharts-area-dots"},m),x)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=n*Math.abs(c-d),h=Jc(o.map(function(f){return f.y||0}));return Ve(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(Jc(i.map(function(f){return f.y||0})),h)),Ve(h)?ae.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=n*Math.abs(c-d),h=Jc(o.map(function(f){return f.x||0}));return Ve(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(Jc(i.map(function(f){return f.x||0})),h)),Ve(h)?ae.createElement("rect",{x:0,y:c<d?c:c-u,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var g=HZ(l,AJe);return ae.createElement(Jt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ae.createElement(Ru,ju({},bt(g,!0),{points:n,connectNulls:h,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&ae.createElement(Ru,ju({},bt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:n})),u!=="none"&&f&&ae.createElement(Ru,ju({},bt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,f=o.animationEasing,g=o.animationId,x=this.state,m=x.prevPoints,p=x.prevBaseLine;return ae.createElement(no,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var v=b.t;if(m){var y=m.length/l.length,w=l.map(function(S,A){var T=Math.floor(A*y);if(m[T]){var E=m[T],C=Vn(E.x,S.x),z=Vn(E.y,S.y);return Tc(Tc({},S),{},{x:C(v),y:z(v)})}return S}),k;if(Ve(c)&&typeof c=="number"){var j=Vn(p,c);k=j(v)}else if(Dt(c)||Sm(c)){var _=Vn(p,0);k=_(v)}else k=c.map(function(S,A){var T=Math.floor(A*y);if(p[T]){var E=p[T],C=Vn(E.x,S.x),z=Vn(E.y,S.y);return Tc(Tc({},S),{},{x:C(v),y:z(v)})}return S});return i.renderAreaStatically(w,k,n,s)}return ae.createElement(Jt,null,ae.createElement("defs",null,ae.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(v))),ae.createElement(Jt,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,n,s)))})}},{key:"renderArea",value:function(n,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,h=d.prevBaseLine,f=d.totalLength;return c&&o&&o.length&&(!u&&f>0||!eh(u,o)||!eh(h,l))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(o,l,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.top,u=s.left,h=s.xAxis,f=s.yAxis,g=s.width,x=s.height,m=s.isAnimationActive,p=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,v=l.length===1,y=Pt("recharts-area",c),w=h&&h.allowDataOverflow,k=f&&f.allowDataOverflow,j=w||k,_=Dt(p)?this.id:p,S=(n=bt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=S.r,T=A===void 0?3:A,E=S.strokeWidth,C=E===void 0?2:E,z=DW(o)?o:{},M=z.clipDot,F=M===void 0?!0:M,D=T*2+C;return ae.createElement(Jt,{className:y},w||k?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(_)},ae.createElement("rect",{x:w?u:u-g/2,y:k?d:d-x/2,width:w?g:g*2,height:k?x:x*2})),!F&&ae.createElement("clipPath",{id:"clipPath-dots-".concat(_)},ae.createElement("rect",{x:u-D/2,y:d-D/2,width:g+D,height:x+D}))):null,v?null:this.renderArea(j,_),(o||v)&&this.renderDots(j,F,_),(!m||b)&&Bo.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(N.PureComponent);VZ=Vd;Io(Vd,"displayName","Area");Io(Vd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ud.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Io(Vd,"getBaseValue",function(t,e,r,n){var s=t.layout,i=t.baseValue,o=e.props.baseValue,l=o??i;if(Ve(l)&&typeof l=="number")return l;var c=s==="horizontal"?n:r,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return l==="dataMin"?h:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Io(Vd,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,s=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,u=t.dataStartIndex,h=t.displayedData,f=t.offset,g=e.layout,x=d&&d.length,m=VZ.getBaseValue(e,r,n,s),p=g==="horizontal",b=!1,v=h.map(function(w,k){var j;x?j=d[u+k]:(j=wn(w,c),Array.isArray(j)?b=!0:j=[m,j]);var _=j[1]==null||x&&wn(w,c)==null;return p?{x:Ik({axis:n,ticks:i,bandSize:l,entry:w,index:k}),y:_?null:s.scale(j[1]),value:j,payload:w}:{x:_?null:n.scale(j[1]),y:Ik({axis:s,ticks:o,bandSize:l,entry:w,index:k}),value:j,payload:w}}),y;return x||b?y=v.map(function(w){var k=Array.isArray(w.value)?w.value[0]:null;return p?{x:w.x,y:k!=null&&w.y!=null?s.scale(k):null}:{x:k!=null?n.scale(k):null,y:w.y}}):y=p?s.scale(m):n.scale(m),Tc({points:v,baseLine:y,layout:g,isRange:b},f)});Io(Vd,"renderDotItem",function(t,e){var r;if(ae.isValidElement(t))r=ae.cloneElement(t,e);else if(St(t))r=t(e);else{var n=Pt("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,i=HZ(e,EJe);r=ae.createElement(Ub,ju({},i,{key:s,className:n}))}return r});function Kg(t){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kg(t)}function PJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zJe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QZ(n.key),n)}}function $Je(t,e,r){return e&&zJe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FJe(t,e,r){return e=a2(e),BJe(t,YZ()?Reflect.construct(e,r||[],a2(t).constructor):e.apply(t,r))}function BJe(t,e){if(e&&(Kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UJe(t)}function UJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YZ=function(){return!!t})()}function a2(t){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a2(t)}function KJe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E3(t,e)}function E3(t,e){return E3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},E3(t,e)}function ZZ(t,e,r){return e=QZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QZ(t){var e=GJe(t,"string");return Kg(e)=="symbol"?e:e+""}function GJe(t,e){if(Kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function C3(){return C3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C3.apply(this,arguments)}function qJe(t){var e=t.xAxisId,r=eI(),n=tI(),s=IZ(e);return s==null?null:N.createElement(Mm,C3({},s,{className:Pt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Dl(o,!0)}}))}var Xi=function(t){function e(){return PJe(this,e),FJe(this,e,arguments)}return KJe(e,t),$Je(e,[{key:"render",value:function(){return N.createElement(qJe,this.props)}}])}(N.Component);ZZ(Xi,"displayName","XAxis");ZZ(Xi,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Gg(t){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gg(t)}function VJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HJe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tQ(n.key),n)}}function WJe(t,e,r){return e&&HJe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function XJe(t,e,r){return e=s2(e),YJe(t,JZ()?Reflect.construct(e,r||[],s2(t).constructor):e.apply(t,r))}function YJe(t,e){if(e&&(Gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZJe(t)}function ZJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JZ=function(){return!!t})()}function s2(t){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s2(t)}function QJe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T3(t,e)}function T3(t,e){return T3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},T3(t,e)}function eQ(t,e,r){return e=tQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tQ(t){var e=JJe(t,"string");return Gg(e)=="symbol"?e:e+""}function JJe(t,e){if(Gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function O3(){return O3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},O3.apply(this,arguments)}var eet=function(e){var r=e.yAxisId,n=eI(),s=tI(),i=DZ(r);return i==null?null:N.createElement(Mm,O3({},i,{className:Pt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return Dl(l,!0)}}))},Yi=function(t){function e(){return VJe(this,e),XJe(this,e,arguments)}return QJe(e,t),WJe(e,[{key:"render",value:function(){return N.createElement(eet,this.props)}}])}(N.Component);eQ(Yi,"displayName","YAxis");eQ(Yi,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function v9(t){return aet(t)||net(t)||ret(t)||tet()}function tet(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ret(t,e){if(t){if(typeof t=="string")return I3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I3(t,e)}}function net(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aet(t){if(Array.isArray(t))return I3(t)}function I3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var D3=function(e,r,n,s,i){var o=Fs(e,nI),l=Fs(e,Ej),c=[].concat(v9(o),v9(l)),d=Fs(e,Tj),u="".concat(s,"Id"),h=s[0],f=r;if(c.length&&(f=c.reduce(function(m,p){if(p.props[u]===n&&Uo(p.props,"extendDomain")&&Ve(p.props[h])){var b=p.props[h];return[Math.min(m[0],b),Math.max(m[1],b)]}return m},f)),d.length){var g="".concat(h,"1"),x="".concat(h,"2");f=d.reduce(function(m,p){if(p.props[u]===n&&Uo(p.props,"extendDomain")&&Ve(p.props[g])&&Ve(p.props[x])){var b=p.props[g],v=p.props[x];return[Math.min(m[0],b,v),Math.max(m[1],b,v)]}return m},f)}return i&&i.length&&(f=i.reduce(function(m,p){return Ve(p)?[Math.min(m[0],p),Math.max(m[1],p)]:m},f)),f},rQ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new s(u,h||c,f),x=r?r+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],g]:c._events[x].push(g):(c._events[x]=g,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)e.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,g=h.length,x=new Array(g);f<g;f++)x[f]=h[f].fn;return x},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,g,x){var m=r?r+d:d;if(!this._events[m])return!1;var p=this._events[m],b=arguments.length,v,y;if(p.fn){switch(p.once&&this.removeListener(d,p.fn,void 0,!0),b){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,u),!0;case 3:return p.fn.call(p.context,u,h),!0;case 4:return p.fn.call(p.context,u,h,f),!0;case 5:return p.fn.call(p.context,u,h,f,g),!0;case 6:return p.fn.call(p.context,u,h,f,g,x),!0}for(y=1,v=new Array(b-1);y<b;y++)v[y-1]=arguments[y];p.fn.apply(p.context,v)}else{var w=p.length,k;for(y=0;y<w;y++)switch(p[y].once&&this.removeListener(d,p[y].fn,void 0,!0),b){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,u);break;case 3:p[y].fn.call(p[y].context,u,h);break;case 4:p[y].fn.call(p[y].context,u,h,f);break;default:if(!v)for(k=1,v=new Array(b-1);k<b;k++)v[k-1]=arguments[k];p[y].fn.apply(p[y].context,v)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var g=r?r+d:d;if(!this._events[g])return this;if(!u)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===u&&(!f||x.once)&&(!h||x.context===h)&&o(this,g);else{for(var m=0,p=[],b=x.length;m<b;m++)(x[m].fn!==u||f&&!x[m].once||h&&x[m].context!==h)&&p.push(x[m]);p.length?this._events[g]=p.length===1?p[0]:p:o(this,g)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(rQ);var set=rQ.exports;const iet=Vt(set);var iS=new iet,oS="recharts.syncMouseEvents";function Kx(t){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kx(t)}function oet(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cet(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nQ(n.key),n)}}function det(t,e,r){return e&&cet(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lS(t,e,r){return e=nQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nQ(t){var e=uet(t,"string");return Kx(e)=="symbol"?e:e+""}function uet(t,e){if(Kx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var het=function(){function t(){oet(this,t),lS(this,"activeIndex",0),lS(this,"coordinateList",[]),lS(this,"layout","horizontal")}return det(t,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,h=u===void 0?null:u,f=r.mouseHandlerCallback,g=f===void 0?null:f;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,h=i+c+d,f=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function fet(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],s=t==null?void 0:t[1];if(n&&s&&Ve(n)&&Ve(s))return!0}return!1}function get(t,e,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-s,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function aQ(t){var e=t.cx,r=t.cy,n=t.radius,s=t.startAngle,i=t.endAngle,o=Hr(e,r,n,s),l=Hr(e,r,n,i);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:s,endAngle:i}}function met(t,e,r){var n,s,i,o;if(t==="horizontal")n=e.x,i=n,s=r.top,o=r.top+r.height;else if(t==="vertical")s=e.y,o=s,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,u=e.outerRadius,h=e.angle,f=Hr(l,c,d,h),g=Hr(l,c,u,h);n=f.x,s=f.y,i=g.x,o=g.y}else return aQ(e);return[{x:n,y:s},{x:i,y:o}]}function Gx(t){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gx(t)}function k9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function tv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(r),!0).forEach(function(n){pet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pet(t,e,r){return e=xet(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xet(t){var e=bet(t,"string");return Gx(e)=="symbol"?e:e+""}function bet(t,e){if(Gx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yet(t){var e,r,n=t.element,s=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,g=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!g||!i||!o||f!=="ScatterChart"&&s!=="axis")return null;var x,m=Ru;if(f==="ScatterChart")x=o,m=SWe;else if(f==="BarChart")x=get(h,o,c,u),m=XO;else if(h==="radial"){var p=aQ(o),b=p.cx,v=p.cy,y=p.radius,w=p.startAngle,k=p.endAngle;x={cx:b,cy:v,startAngle:w,endAngle:k,innerRadius:y,outerRadius:y},m=ZY}else x={points:met(h,o,c)},m=Ru;var j=tv(tv(tv(tv({stroke:"#ccc",pointerEvents:"none"},c),x),bt(g,!1)),{},{payload:l,payloadIndex:d,className:Pt("recharts-tooltip-cursor",g.className)});return N.isValidElement(g)?N.cloneElement(g,j):N.createElement(m,j)}var vet=["item"],ket=["children","className","width","height","style","compact","title","desc"];function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Of.apply(this,arguments)}function w9(t,e){return Net(t)||jet(t,e)||iQ(t,e)||wet()}function wet(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jet(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Net(t){if(Array.isArray(t))return t}function j9(t,e){if(t==null)return{};var r=_et(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _et(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Aet(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eet(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oQ(n.key),n)}}function Cet(t,e,r){return e&&Eet(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tet(t,e,r){return e=i2(e),Oet(t,sQ()?Reflect.construct(e,r||[],i2(t).constructor):e.apply(t,r))}function Oet(t,e){if(e&&(qg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iet(t)}function Iet(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sQ=function(){return!!t})()}function i2(t){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i2(t)}function Det(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M3(t,e)}function M3(t,e){return M3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},M3(t,e)}function Vg(t){return Ret(t)||Let(t)||iQ(t)||Met()}function Met(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iQ(t,e){if(t){if(typeof t=="string")return L3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L3(t,e)}}function Let(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ret(t){if(Array.isArray(t))return L3(t)}function L3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function De(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N9(Object(r),!0).forEach(function(n){_t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _t(t,e,r){return e=oQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oQ(t){var e=Pet(t,"string");return qg(e)=="symbol"?e:e+""}function Pet(t,e){if(qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zet={xAxis:["bottom","top"],yAxis:["left","right"]},$et={width:"100%",height:"100%"},lQ={x:0,y:0};function rv(t){return t}var Fet=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},Bet=function(e,r,n,s){var i=r.find(function(u){return u&&u.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,l=s.radius;return De(De(De({},s),Hr(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=s.angle;return De(De(De({},s),Hr(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return lQ},Oj=function(e,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Vg(l),Vg(d)):l},[]);return o.length>0?o:e&&e.length&&Ve(s)&&Ve(i)?e.slice(s,i+1):[]};function cQ(t){return t==="number"?[0,"auto"]:void 0}var R3=function(e,r,n,s){var i=e.graphicalItems,o=e.tooltipAxis,l=Oj(r,e);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:r;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var g=h===void 0?l:h;f=nk(g,o.dataKey,s)}else f=h&&h[n]||l[n];return f?[].concat(Vg(c),[qY(d,f)]):c},[])},_9=function(e,r,n,s){var i=s||{x:e.chartX,y:e.chartY},o=Fet(i,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,u=VGe(o,l,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,f=R3(e,r,u,h),g=Bet(n,l,u,i);return{activeTooltipIndex:u,activeLabel:h,activePayload:f,activeCoordinate:g}}return null},Uet=function(e,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.layout,h=e.children,f=e.stackOffset,g=$Y(u,i);return n.reduce(function(x,m){var p,b=m.type.defaultProps!==void 0?De(De({},m.type.defaultProps),m.props):m.props,v=b.type,y=b.dataKey,w=b.allowDataOverflow,k=b.allowDuplicatedCategory,j=b.scale,_=b.ticks,S=b.includeHidden,A=b[o];if(x[A])return x;var T=Oj(e.data,{graphicalItems:s.filter(function(ee){var B,U=o in ee.props?ee.props[o]:(B=ee.type.defaultProps)===null||B===void 0?void 0:B[o];return U===A}),dataStartIndex:c,dataEndIndex:d}),E=T.length,C,z,M;fet(b.domain,w,v)&&(C=XE(b.domain,null,w),g&&(v==="number"||j!=="auto")&&(M=h0(T,y,"category")));var F=cQ(v);if(!C||C.length===0){var D,L=(D=b.domain)!==null&&D!==void 0?D:F;if(y){if(C=h0(T,y,v),v==="category"&&g){var K=R6e(C);k&&K?(z=C,C=Vk(0,E)):k||(C=Wz(L,C,m).reduce(function(ee,B){return ee.indexOf(B)>=0?ee:[].concat(Vg(ee),[B])},[]))}else if(v==="category")k?C=C.filter(function(ee){return ee!==""&&!Dt(ee)}):C=Wz(L,C,m).reduce(function(ee,B){return ee.indexOf(B)>=0||B===""||Dt(B)?ee:[].concat(Vg(ee),[B])},[]);else if(v==="number"){var $=ZGe(T,s.filter(function(ee){var B,U,V=o in ee.props?ee.props[o]:(B=ee.type.defaultProps)===null||B===void 0?void 0:B[o],se="hide"in ee.props?ee.props.hide:(U=ee.type.defaultProps)===null||U===void 0?void 0:U.hide;return V===A&&(S||!se)}),y,i,u);$&&(C=$)}g&&(v==="number"||j!=="auto")&&(M=h0(T,y,"category"))}else g?C=Vk(0,E):l&&l[A]&&l[A].hasStack&&v==="number"?C=f==="expand"?[0,1]:GY(l[A].stackGroups,c,d):C=zY(T,s.filter(function(ee){var B=o in ee.props?ee.props[o]:ee.type.defaultProps[o],U="hide"in ee.props?ee.props.hide:ee.type.defaultProps.hide;return B===A&&(S||!U)}),v,u,!0);if(v==="number")C=D3(h,C,A,i,_),L&&(C=XE(L,C,w));else if(v==="category"&&L){var R=L,Y=C.every(function(ee){return R.indexOf(ee)>=0});Y&&(C=R)}}return De(De({},x),{},_t({},A,De(De({},b),{},{axisType:i,domain:C,categoricalDomain:M,duplicateDomain:z,originalDomain:(p=b.domain)!==null&&p!==void 0?p:F,isCategorical:g,layout:u})))},{})},Ket=function(e,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.layout,h=e.children,f=Oj(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),g=f.length,x=$Y(u,i),m=-1;return n.reduce(function(p,b){var v=b.type.defaultProps!==void 0?De(De({},b.type.defaultProps),b.props):b.props,y=v[o],w=cQ("number");if(!p[y]){m++;var k;return x?k=Vk(0,g):l&&l[y]&&l[y].hasStack?(k=GY(l[y].stackGroups,c,d),k=D3(h,k,y,i)):(k=XE(w,zY(f,n.filter(function(j){var _,S,A=o in j.props?j.props[o]:(_=j.type.defaultProps)===null||_===void 0?void 0:_[o],T="hide"in j.props?j.props.hide:(S=j.type.defaultProps)===null||S===void 0?void 0:S.hide;return A===y&&!T}),"number",u),s.defaultProps.allowDataOverflow),k=D3(h,k,y,i)),De(De({},p),{},_t({},y,De(De({axisType:i},s.defaultProps),{},{hide:!0,orientation:$s(zet,"".concat(i,".").concat(m%2),null),domain:k,originalDomain:w,isCategorical:x,layout:u})))}return p},{})},Get=function(e,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.children,h="".concat(s,"Id"),f=Fs(u,i),g={};return f&&f.length?g=Uet(e,{axes:f,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(g=Ket(e,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),g},qet=function(e){var r=Bc(e),n=Dl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:kO(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Dk(r,n)}},S9=function(e){var r=e.children,n=e.defaultShowTooltip,s=Ns(r,Lg),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Vet=function(e){return!e||!e.length?!1:e.some(function(r){var n=Fl(r&&r.type);return n&&n.indexOf("Bar")>=0})},A9=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Het=function(e,r){var n=e.props,s=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,l=e.yAxisMap,c=l===void 0?{}:l,d=n.width,u=n.height,h=n.children,f=n.margin||{},g=Ns(h,Lg),x=Ns(h,xd),m=Object.keys(c).reduce(function(k,j){var _=c[j],S=_.orientation;return!_.mirror&&!_.hide?De(De({},k),{},_t({},S,k[S]+_.width)):k},{left:f.left||0,right:f.right||0}),p=Object.keys(o).reduce(function(k,j){var _=o[j],S=_.orientation;return!_.mirror&&!_.hide?De(De({},k),{},_t({},S,$s(k,"".concat(S))+_.height)):k},{top:f.top||0,bottom:f.bottom||0}),b=De(De({},p),m),v=b.bottom;g&&(b.bottom+=g.props.height||Lg.defaultProps.height),x&&r&&(b=XGe(b,s,n,r));var y=d-b.left-b.right,w=u-b.top-b.bottom;return De(De({brushBottom:v},b),{},{width:Math.max(y,0),height:Math.max(w,0)})},Wet=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},Ij=function(e){var r=e.chartName,n=e.GraphicalChild,s=e.defaultTooltipEventType,i=s===void 0?"axis":s,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,u=e.formatAxisMap,h=e.defaultProps,f=function(b,v){var y=v.graphicalItems,w=v.stackGroups,k=v.offset,j=v.updateId,_=v.dataStartIndex,S=v.dataEndIndex,A=b.barSize,T=b.layout,E=b.barGap,C=b.barCategoryGap,z=b.maxBarSize,M=A9(T),F=M.numericAxisName,D=M.cateAxisName,L=Vet(y),K=[];return y.forEach(function($,R){var Y=Oj(b.data,{graphicalItems:[$],dataStartIndex:_,dataEndIndex:S}),ee=$.type.defaultProps!==void 0?De(De({},$.type.defaultProps),$.props):$.props,B=ee.dataKey,U=ee.maxBarSize,V=ee["".concat(F,"Id")],se=ee["".concat(D,"Id")],Ne={},ie=c.reduce(function(rt,ne){var pe=v["".concat(ne.axisType,"Map")],Ue=ee["".concat(ne.axisType,"Id")];pe&&pe[Ue]||ne.axisType==="zAxis"||rh();var kt=pe[Ue];return De(De({},rt),{},_t(_t({},ne.axisType,kt),"".concat(ne.axisType,"Ticks"),Dl(kt)))},Ne),q=ie[D],H=ie["".concat(D,"Ticks")],Z=w&&w[V]&&w[V].hasStack&&iqe($,w[V].stackGroups),te=Fl($.type).indexOf("Bar")>=0,ge=Dk(q,H),Ce=[],Le=L&&HGe({barSize:A,stackGroups:w,totalSize:Wet(ie,D)});if(te){var He,le,Re=Dt(U)?z:U,Ze=(He=(le=Dk(q,H,!0))!==null&&le!==void 0?le:Re)!==null&&He!==void 0?He:0;Ce=WGe({barGap:E,barCategoryGap:C,bandSize:Ze!==ge?Ze:ge,sizeList:Le[se],maxBarSize:Re}),Ze!==ge&&(Ce=Ce.map(function(rt){return De(De({},rt),{},{position:De(De({},rt.position),{},{offset:rt.position.offset-Ze/2})})}))}var lt=$&&$.type&&$.type.getComposedData;lt&&K.push({props:De(De({},lt(De(De({},ie),{},{displayedData:Y,props:b,dataKey:B,item:$,bandSize:ge,barPosition:Ce,offset:k,stackedData:Z,layout:T,dataStartIndex:_,dataEndIndex:S}))),{},_t(_t(_t({key:$.key||"item-".concat(R)},F,ie[F]),D,ie[D]),"animationId",j)),childIndex:W6e($,b.children),item:$})}),K},g=function(b,v){var y=b.props,w=b.dataStartIndex,k=b.dataEndIndex,j=b.updateId;if(!U8({props:y}))return null;var _=y.children,S=y.layout,A=y.stackOffset,T=y.data,E=y.reverseStackOrder,C=A9(S),z=C.numericAxisName,M=C.cateAxisName,F=Fs(_,n),D=aqe(T,F,"".concat(z,"Id"),"".concat(M,"Id"),A,E),L=c.reduce(function(ee,B){var U="".concat(B.axisType,"Map");return De(De({},ee),{},_t({},U,Get(y,De(De({},B),{},{graphicalItems:F,stackGroups:B.axisType===z&&D,dataStartIndex:w,dataEndIndex:k}))))},{}),K=Het(De(De({},L),{},{props:y,graphicalItems:F}),v==null?void 0:v.legendBBox);Object.keys(L).forEach(function(ee){L[ee]=u(y,L[ee],K,ee.replace("Map",""),r)});var $=L["".concat(M,"Map")],R=qet($),Y=f(y,De(De({},L),{},{dataStartIndex:w,dataEndIndex:k,updateId:j,graphicalItems:F,stackGroups:D,offset:K}));return De(De({formattedGraphicalItems:Y,graphicalItems:F,offset:K,stackGroups:D},R),L)},x=function(p){function b(v){var y,w,k;return Aet(this,b),k=Tet(this,b,[v]),_t(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_t(k,"accessibilityManager",new het),_t(k,"handleLegendBBoxUpdate",function(j){if(j){var _=k.state,S=_.dataStartIndex,A=_.dataEndIndex,T=_.updateId;k.setState(De({legendBBox:j},g({props:k.props,dataStartIndex:S,dataEndIndex:A,updateId:T},De(De({},k.state),{},{legendBBox:j}))))}}),_t(k,"handleReceiveSyncEvent",function(j,_,S){if(k.props.syncId===j){if(S===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(_)}}),_t(k,"handleBrushChange",function(j){var _=j.startIndex,S=j.endIndex;if(_!==k.state.dataStartIndex||S!==k.state.dataEndIndex){var A=k.state.updateId;k.setState(function(){return De({dataStartIndex:_,dataEndIndex:S},g({props:k.props,dataStartIndex:_,dataEndIndex:S,updateId:A},k.state))}),k.triggerSyncEvent({dataStartIndex:_,dataEndIndex:S})}}),_t(k,"handleMouseEnter",function(j){var _=k.getMouseInfo(j);if(_){var S=De(De({},_),{},{isTooltipActive:!0});k.setState(S),k.triggerSyncEvent(S);var A=k.props.onMouseEnter;St(A)&&A(S,j)}}),_t(k,"triggeredAfterMouseMove",function(j){var _=k.getMouseInfo(j),S=_?De(De({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(S),k.triggerSyncEvent(S);var A=k.props.onMouseMove;St(A)&&A(S,j)}),_t(k,"handleItemMouseEnter",function(j){k.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),_t(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),_t(k,"handleMouseMove",function(j){j.persist(),k.throttleTriggeredAfterMouseMove(j)}),_t(k,"handleMouseLeave",function(j){k.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};k.setState(_),k.triggerSyncEvent(_);var S=k.props.onMouseLeave;St(S)&&S(_,j)}),_t(k,"handleOuterEvent",function(j){var _=H6e(j),S=$s(k.props,"".concat(_));if(_&&St(S)){var A,T;/.*touch.*/i.test(_)?T=k.getMouseInfo(j.changedTouches[0]):T=k.getMouseInfo(j),S((A=T)!==null&&A!==void 0?A:{},j)}}),_t(k,"handleClick",function(j){var _=k.getMouseInfo(j);if(_){var S=De(De({},_),{},{isTooltipActive:!0});k.setState(S),k.triggerSyncEvent(S);var A=k.props.onClick;St(A)&&A(S,j)}}),_t(k,"handleMouseDown",function(j){var _=k.props.onMouseDown;if(St(_)){var S=k.getMouseInfo(j);_(S,j)}}),_t(k,"handleMouseUp",function(j){var _=k.props.onMouseUp;if(St(_)){var S=k.getMouseInfo(j);_(S,j)}}),_t(k,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),_t(k,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&k.handleMouseDown(j.changedTouches[0])}),_t(k,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&k.handleMouseUp(j.changedTouches[0])}),_t(k,"handleDoubleClick",function(j){var _=k.props.onDoubleClick;if(St(_)){var S=k.getMouseInfo(j);_(S,j)}}),_t(k,"handleContextMenu",function(j){var _=k.props.onContextMenu;if(St(_)){var S=k.getMouseInfo(j);_(S,j)}}),_t(k,"triggerSyncEvent",function(j){k.props.syncId!==void 0&&iS.emit(oS,k.props.syncId,j,k.eventEmitterSymbol)}),_t(k,"applySyncEvent",function(j){var _=k.props,S=_.layout,A=_.syncMethod,T=k.state.updateId,E=j.dataStartIndex,C=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)k.setState(De({dataStartIndex:E,dataEndIndex:C},g({props:k.props,dataStartIndex:E,dataEndIndex:C,updateId:T},k.state)));else if(j.activeTooltipIndex!==void 0){var z=j.chartX,M=j.chartY,F=j.activeTooltipIndex,D=k.state,L=D.offset,K=D.tooltipTicks;if(!L)return;if(typeof A=="function")F=A(K,j);else if(A==="value"){F=-1;for(var $=0;$<K.length;$++)if(K[$].value===j.activeLabel){F=$;break}}var R=De(De({},L),{},{x:L.left,y:L.top}),Y=Math.min(z,R.x+R.width),ee=Math.min(M,R.y+R.height),B=K[F]&&K[F].value,U=R3(k.state,k.props.data,F),V=K[F]?{x:S==="horizontal"?K[F].coordinate:Y,y:S==="horizontal"?ee:K[F].coordinate}:lQ;k.setState(De(De({},j),{},{activeLabel:B,activeCoordinate:V,activePayload:U,activeTooltipIndex:F}))}else k.setState(j)}),_t(k,"renderCursor",function(j){var _,S=k.state,A=S.isTooltipActive,T=S.activeCoordinate,E=S.activePayload,C=S.offset,z=S.activeTooltipIndex,M=S.tooltipAxisBandSize,F=k.getTooltipEventType(),D=(_=j.props.active)!==null&&_!==void 0?_:A,L=k.props.layout,K=j.key||"_recharts-cursor";return ae.createElement(yet,{key:K,activeCoordinate:T,activePayload:E,activeTooltipIndex:z,chartName:r,element:j,isActive:D,layout:L,offset:C,tooltipAxisBandSize:M,tooltipEventType:F})}),_t(k,"renderPolarAxis",function(j,_,S){var A=$s(j,"type.axisType"),T=$s(k.state,"".concat(A,"Map")),E=j.type.defaultProps,C=E!==void 0?De(De({},E),j.props):j.props,z=T&&T[C["".concat(A,"Id")]];return N.cloneElement(j,De(De({},z),{},{className:Pt(A,z.className),key:j.key||"".concat(_,"-").concat(S),ticks:Dl(z,!0)}))}),_t(k,"renderPolarGrid",function(j){var _=j.props,S=_.radialLines,A=_.polarAngles,T=_.polarRadius,E=k.state,C=E.radiusAxisMap,z=E.angleAxisMap,M=Bc(C),F=Bc(z),D=F.cx,L=F.cy,K=F.innerRadius,$=F.outerRadius;return N.cloneElement(j,{polarAngles:Array.isArray(A)?A:Dl(F,!0).map(function(R){return R.coordinate}),polarRadius:Array.isArray(T)?T:Dl(M,!0).map(function(R){return R.coordinate}),cx:D,cy:L,innerRadius:K,outerRadius:$,key:j.key||"polar-grid",radialLines:S})}),_t(k,"renderLegend",function(){var j=k.state.formattedGraphicalItems,_=k.props,S=_.children,A=_.width,T=_.height,E=k.props.margin||{},C=A-(E.left||0)-(E.right||0),z=RY({children:S,formattedGraphicalItems:j,legendWidth:C,legendContent:d});if(!z)return null;var M=z.item,F=j9(z,vet);return N.cloneElement(M,De(De({},F),{},{chartWidth:A,chartHeight:T,margin:E,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),_t(k,"renderTooltip",function(){var j,_=k.props,S=_.children,A=_.accessibilityLayer,T=Ns(S,ga);if(!T)return null;var E=k.state,C=E.isTooltipActive,z=E.activeCoordinate,M=E.activePayload,F=E.activeLabel,D=E.offset,L=(j=T.props.active)!==null&&j!==void 0?j:C;return N.cloneElement(T,{viewBox:De(De({},D),{},{x:D.left,y:D.top}),active:L,label:F,payload:L?M:[],coordinate:z,accessibilityLayer:A})}),_t(k,"renderBrush",function(j){var _=k.props,S=_.margin,A=_.data,T=k.state,E=T.offset,C=T.dataStartIndex,z=T.dataEndIndex,M=T.updateId;return N.cloneElement(j,{key:j.key||"_recharts-brush",onChange:Zy(k.handleBrushChange,j.props.onChange),data:A,x:Ve(j.props.x)?j.props.x:E.left,y:Ve(j.props.y)?j.props.y:E.top+E.height+E.brushBottom-(S.bottom||0),width:Ve(j.props.width)?j.props.width:E.width,startIndex:C,endIndex:z,updateId:"brush-".concat(M)})}),_t(k,"renderReferenceElement",function(j,_,S){if(!j)return null;var A=k,T=A.clipPathId,E=k.state,C=E.xAxisMap,z=E.yAxisMap,M=E.offset,F=j.type.defaultProps||{},D=j.props,L=D.xAxisId,K=L===void 0?F.xAxisId:L,$=D.yAxisId,R=$===void 0?F.yAxisId:$;return N.cloneElement(j,{key:j.key||"".concat(_,"-").concat(S),xAxis:C[K],yAxis:z[R],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:T})}),_t(k,"renderActivePoints",function(j){var _=j.item,S=j.activePoint,A=j.basePoint,T=j.childIndex,E=j.isRange,C=[],z=_.props.key,M=_.item.type.defaultProps!==void 0?De(De({},_.item.type.defaultProps),_.item.props):_.item.props,F=M.activeDot,D=M.dataKey,L=De(De({index:T,dataKey:D,cx:S.x,cy:S.y,r:4,fill:WO(_.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},bt(F,!1)),ak(F));return C.push(b.renderActiveDot(F,L,"".concat(z,"-activePoint-").concat(T))),A?C.push(b.renderActiveDot(F,De(De({},L),{},{cx:A.x,cy:A.y}),"".concat(z,"-basePoint-").concat(T))):E&&C.push(null),C}),_t(k,"renderGraphicChild",function(j,_,S){var A=k.filterFormatItem(j,_,S);if(!A)return null;var T=k.getTooltipEventType(),E=k.state,C=E.isTooltipActive,z=E.tooltipAxis,M=E.activeTooltipIndex,F=E.activeLabel,D=k.props.children,L=Ns(D,ga),K=A.props,$=K.points,R=K.isRange,Y=K.baseLine,ee=A.item.type.defaultProps!==void 0?De(De({},A.item.type.defaultProps),A.item.props):A.item.props,B=ee.activeDot,U=ee.hide,V=ee.activeBar,se=ee.activeShape,Ne=!!(!U&&C&&L&&(B||V||se)),ie={};T!=="axis"&&L&&L.props.trigger==="click"?ie={onClick:Zy(k.handleItemMouseEnter,j.props.onClick)}:T!=="axis"&&(ie={onMouseLeave:Zy(k.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:Zy(k.handleItemMouseEnter,j.props.onMouseEnter)});var q=N.cloneElement(j,De(De({},A.props),ie));function H(ne){return typeof z.dataKey=="function"?z.dataKey(ne.payload):null}if(Ne)if(M>=0){var Z,te;if(z.dataKey&&!z.allowDuplicatedCategory){var ge=typeof z.dataKey=="function"?H:"payload.".concat(z.dataKey.toString());Z=nk($,ge,F),te=R&&Y&&nk(Y,ge,F)}else Z=$==null?void 0:$[M],te=R&&Y&&Y[M];if(se||V){var Ce=j.props.activeIndex!==void 0?j.props.activeIndex:M;return[N.cloneElement(j,De(De(De({},A.props),ie),{},{activeIndex:Ce})),null,null]}if(!Dt(Z))return[q].concat(Vg(k.renderActivePoints({item:A,activePoint:Z,basePoint:te,childIndex:M,isRange:R})))}else{var Le,He=(Le=k.getItemByXY(k.state.activeCoordinate))!==null&&Le!==void 0?Le:{graphicalItem:q},le=He.graphicalItem,Re=le.item,Ze=Re===void 0?j:Re,lt=le.childIndex,rt=De(De(De({},A.props),ie),{},{activeIndex:lt});return[N.cloneElement(Ze,rt),null,null]}return R?[q,null,null]:[q,null]}),_t(k,"renderCustomized",function(j,_,S){return N.cloneElement(j,De(De({key:"recharts-customized-".concat(S)},k.props),k.state))}),_t(k,"renderMap",{CartesianGrid:{handler:rv,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:rv},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:rv},YAxis:{handler:rv},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((y=v.id)!==null&&y!==void 0?y:Ah("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=jO(k.triggeredAfterMouseMove,(w=v.throttleDelay)!==null&&w!==void 0?w:1e3/60),k.state={},k}return Det(b,p),Cet(b,[{key:"componentDidMount",value:function(){var y,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,w=y.children,k=y.data,j=y.height,_=y.layout,S=Ns(w,ga);if(S){var A=S.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,E=R3(this.state,k,A,T),C=this.state.tooltipTicks[A].coordinate,z=(this.state.offset.top+j)/2,M=_==="horizontal",F=M?{x:C,y:z}:{y:C,x:z},D=this.state.formattedGraphicalItems.find(function(K){var $=K.item;return $.type.name==="Scatter"});D&&(F=De(De({},F),D.props.points[A].tooltipPosition),E=D.props.points[A].tooltipPayload);var L={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:T,activePayload:E,activeCoordinate:F};this.setState(L),this.renderCursor(S),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var k,j;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(y){dE([Ns(y.children,ga)],[Ns(this.props.children,ga)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=Ns(this.props.children,ga);if(y&&typeof y.props.shared=="boolean"){var w=y.props.shared?"axis":"item";return l.indexOf(w)>=0?w:i}return i}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var w=this.container,k=w.getBoundingClientRect(),j=v7e(k),_={chartX:Math.round(y.pageX-j.left),chartY:Math.round(y.pageY-j.top)},S=k.width/w.offsetWidth||1,A=this.inRange(_.chartX,_.chartY,S);if(!A)return null;var T=this.state,E=T.xAxisMap,C=T.yAxisMap,z=this.getTooltipEventType(),M=_9(this.state,this.props.data,this.props.layout,A);if(z!=="axis"&&E&&C){var F=Bc(E).scale,D=Bc(C).scale,L=F&&F.invert?F.invert(_.chartX):null,K=D&&D.invert?D.invert(_.chartY):null;return De(De({},_),{},{xValue:L,yValue:K},M)}return M?De(De({},_),M):null}},{key:"inRange",value:function(y,w){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,_=y/k,S=w/k;if(j==="horizontal"||j==="vertical"){var A=this.state.offset,T=_>=A.left&&_<=A.left+A.width&&S>=A.top&&S<=A.top+A.height;return T?{x:_,y:S}:null}var E=this.state,C=E.angleAxisMap,z=E.radiusAxisMap;if(C&&z){var M=Bc(C);return Zz({x:_,y:S},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,w=this.getTooltipEventType(),k=Ns(y,ga),j={};k&&w==="axis"&&(k.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=ak(this.props,this.handleOuterEvent);return De(De({},_),j)}},{key:"addListener",value:function(){iS.on(oS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){iS.removeListener(oS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,w,k){for(var j=this.state.formattedGraphicalItems,_=0,S=j.length;_<S;_++){var A=j[_];if(A.item===y||A.props.key===y.key||w===Fl(A.item.type)&&k===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,w=this.state.offset,k=w.left,j=w.top,_=w.height,S=w.width;return ae.createElement("defs",null,ae.createElement("clipPath",{id:y},ae.createElement("rect",{x:k,y:j,height:_,width:S})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(w,k){var j=w9(k,2),_=j[0],S=j[1];return De(De({},w),{},_t({},_,S.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(w,k){var j=w9(k,2),_=j[0],S=j[1];return De(De({},w),{},_t({},_,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[y])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(y){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[y])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(y){var w=this.state,k=w.formattedGraphicalItems,j=w.activeItem;if(k&&k.length)for(var _=0,S=k.length;_<S;_++){var A=k[_],T=A.props,E=A.item,C=E.type.defaultProps!==void 0?De(De({},E.type.defaultProps),E.props):E.props,z=Fl(E.type);if(z==="Bar"){var M=(T.data||[]).find(function(K){return iWe(y,K)});if(M)return{graphicalItem:A,payload:M}}else if(z==="RadialBar"){var F=(T.data||[]).find(function(K){return Zz(y,K)});if(F)return{graphicalItem:A,payload:F}}else if(Nj(A,j)||_j(A,j)||zx(A,j)){var D=WXe({graphicalItem:A,activeTooltipItem:j,itemData:C.data}),L=C.activeIndex===void 0?D:C.activeIndex;return{graphicalItem:De(De({},A),{},{childIndex:L}),payload:zx(A,j)?C.data[D]:A.props.data[D]}}}return null}},{key:"render",value:function(){var y=this;if(!U8(this))return null;var w=this.props,k=w.children,j=w.className,_=w.width,S=w.height,A=w.style,T=w.compact,E=w.title,C=w.desc,z=j9(w,ket),M=bt(z,!1);if(T)return ae.createElement(r9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement(hE,Of({},M,{width:_,height:S,title:E,desc:C}),this.renderClipPath(),G8(k,this.renderMap)));if(this.props.accessibilityLayer){var F,D;M.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,M.role=(D=this.props.role)!==null&&D!==void 0?D:"application",M.onKeyDown=function(K){y.accessibilityManager.keyboardEvent(K)},M.onFocus=function(){y.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return ae.createElement(r9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement("div",Of({className:Pt("recharts-wrapper",j),style:De({position:"relative",cursor:"default",width:_,height:S},A)},L,{ref:function($){y.container=$}}),ae.createElement(hE,Of({},M,{width:_,height:S,title:E,desc:C,style:$et}),this.renderClipPath(),G8(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);_t(x,"displayName",r),_t(x,"defaultProps",De({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),_t(x,"getDerivedStateFromProps",function(p,b){var v=p.dataKey,y=p.data,w=p.children,k=p.width,j=p.height,_=p.layout,S=p.stackOffset,A=p.margin,T=b.dataStartIndex,E=b.dataEndIndex;if(b.updateId===void 0){var C=S9(p);return De(De(De({},C),{},{updateId:0},g(De(De({props:p},C),{},{updateId:0}),b)),{},{prevDataKey:v,prevData:y,prevWidth:k,prevHeight:j,prevLayout:_,prevStackOffset:S,prevMargin:A,prevChildren:w})}if(v!==b.prevDataKey||y!==b.prevData||k!==b.prevWidth||j!==b.prevHeight||_!==b.prevLayout||S!==b.prevStackOffset||!Xf(A,b.prevMargin)){var z=S9(p),M={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},F=De(De({},_9(b,y,_)),{},{updateId:b.updateId+1}),D=De(De(De({},z),M),F);return De(De(De({},D),g(De({props:p},D),b)),{},{prevDataKey:v,prevData:y,prevWidth:k,prevHeight:j,prevLayout:_,prevStackOffset:S,prevMargin:A,prevChildren:w})}if(!dE(w,b.prevChildren)){var L,K,$,R,Y=Ns(w,Lg),ee=Y&&(L=(K=Y.props)===null||K===void 0?void 0:K.startIndex)!==null&&L!==void 0?L:T,B=Y&&($=(R=Y.props)===null||R===void 0?void 0:R.endIndex)!==null&&$!==void 0?$:E,U=ee!==T||B!==E,V=!Dt(y),se=V&&!U?b.updateId:b.updateId+1;return De(De({updateId:se},g(De(De({props:p},b),{},{updateId:se,dataStartIndex:ee,dataEndIndex:B}),b)),{},{prevChildren:w,dataStartIndex:ee,dataEndIndex:B})}return null}),_t(x,"renderActiveDot",function(p,b,v){var y;return N.isValidElement(p)?y=N.cloneElement(p,b):St(p)?y=p(b):y=ae.createElement(Ub,b),ae.createElement(Jt,{className:"recharts-active-dot",key:v},y)});var m=N.forwardRef(function(b,v){return ae.createElement(x,Of({},b,{ref:v}))});return m.displayName=x.displayName,m},dQ=Ij({chartName:"LineChart",GraphicalChild:ah,axisComponents:[{axisType:"xAxis",AxisComp:Xi},{axisType:"yAxis",AxisComp:Yi}],formatAxisMap:YO}),o2=Ij({chartName:"BarChart",GraphicalChild:ao,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Xi},{axisType:"yAxis",AxisComp:Yi}],formatAxisMap:YO}),Xet=Ij({chartName:"PieChart",GraphicalChild:vc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:jj},{axisType:"radiusAxis",AxisComp:kj}],formatAxisMap:pqe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Yet=Ij({chartName:"AreaChart",GraphicalChild:Vd,axisComponents:[{axisType:"xAxis",AxisComp:Xi},{axisType:"yAxis",AxisComp:Yi}],formatAxisMap:YO});const ts={title:"Klassens puls",attendance:"Idag nrvaro",risk:"Risk status",grades:"Betyg progress",wellbeing:"Trivsel index",contacts:"Olsta studenter",quickActions:"Snabba tgrder",pupilGrid:"Elevvy",trends:"Trender",sendMsg:"Skicka info",survey:"Trivselenkt",report:"Exportera",invite:"Bjud in",noClass:"Ingen klass tilldelad"},bp={attendance:"#3b82f6",risk:"#ef4444",grades:"#10b981",wellbeing:"#8b5cf6",contacts:"#f59e0b"},Zet=()=>{var f;const{t}=nt(),[e,r]=N.useState(!0),[n,s]=N.useState(null),[i,o]=N.useState([]),[l,c]=N.useState(null),[d,u]=N.useState(null);N.useEffect(()=>{h()},[]);const h=async()=>{try{r(!0);const[g,x]=await Promise.all([O.mentors.getClassOverview(),O.mentors.getMyClassPupils()]);s(g),o(x),u(null)}catch(g){console.error("Failed to fetch mentor dashboard:",g),u(ts.noClass)}finally{r(!1)}};return e?a.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-slate-900",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-blue-500 border-t-transparent"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 animate-pulse",children:"Hmtar klassens puls..."})]})}):d?a.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-slate-900 px-4",children:a.jsx("div",{className:"max-w-md text-center",children:a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-6 rounded-2xl border border-red-100 dark:border-red-900/30",children:[a.jsx(Dr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:d}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Kontakta administratren fr att bli tilldelad en klass."})]})})}):a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-4 lg:p-6 transition-colors duration-300",children:[a.jsxs(qi.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("div",{className:"p-2 bg-blue-600 rounded-lg shadow-lg shadow-blue-500/20",children:a.jsx(va,{className:"h-5 w-5 text-white"})}),a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight",children:[ts.title,": ",a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:n==null?void 0:n.className})]})]}),a.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[n==null?void 0:n.studentCount," elever  Senaste uppdateringen: ",new Date().toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>h(),className:"p-2 hover:bg-white dark:hover:bg-slate-800 rounded-full transition-colors text-gray-500",children:a.jsx(Sr,{className:"h-5 w-5"})}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 rounded-xl shadow-sm hover:shadow-md transition-all font-medium text-sm",children:[a.jsx(cm,{className:"h-4 w-4"}),"Filtrera"]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl shadow-lg shadow-blue-500/20 transition-all font-medium text-sm",children:[a.jsx(zt,{className:"h-4 w-4"}),"Idag"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8",children:[a.jsx(yp,{title:ts.attendance,value:n==null?void 0:n.attendanceToday,icon:vt,color:bp.attendance,detail:"8 avvikelser"}),a.jsx(yp,{title:ts.risk,value:n==null?void 0:n.atRiskCount,icon:Dr,color:bp.risk,detail:"Hg prioritet"}),a.jsx(yp,{title:ts.grades,value:n==null?void 0:n.gradeStatus,icon:Sr,color:bp.grades,detail:"2 F-varningar"}),a.jsx(yp,{title:ts.wellbeing,value:(n==null?void 0:n.wellbeingIndex)+"%",icon:Lr,color:bp.wellbeing,detail:((f=n==null?void 0:n.avgWellbeing)==null?void 0:f.toFixed(1))+"/5 snitt"}),a.jsx(yp,{title:ts.contacts,value:n==null?void 0:n.contactNeeds,icon:er,color:bp.contacts,detail:"Frn elever"})]}),a.jsx(aT,{}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[a.jsxs("div",{className:"lg:col-span-8 flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(vt,{className:"h-5 w-5 text-blue-500"}),ts.pupilGrid]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})," God"]}),a.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"})," Varning"]}),a.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})," Risk"]})]})]}),a.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-7 gap-3 bg-white/50 dark:bg-slate-900/50 p-4 rounded-3xl border border-slate-200 dark:border-slate-800",children:[i.map((g,x)=>a.jsx(Qet,{pupil:g,index:x,onSelect:c},g.id)),i.length===0&&a.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400 italic",children:["Inga elever hittades i ",n==null?void 0:n.className]})]})]}),a.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[a.jsxs("section",{className:"bg-white dark:bg-slate-900 rounded-3xl p-5 border border-slate-200 dark:border-slate-800 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx(va,{className:"h-4 w-4"}),ts.quickActions]}),a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsx(_c,{icon:Qi,label:ts.sendMsg,color:"bg-blue-50 text-blue-600 dark:bg-blue-900/30"}),a.jsx(_c,{icon:Lr,label:ts.survey,color:"bg-purple-50 text-purple-600 dark:bg-purple-900/30"}),a.jsx(_c,{icon:xt,label:ts.report,color:"bg-amber-50 text-amber-600 dark:bg-amber-900/30"}),a.jsx(_c,{icon:Ji,label:ts.invite,color:"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30"}),a.jsx(_c,{icon:z0,label:"Analys",color:"bg-slate-100 dark:bg-slate-800"}),a.jsx(_c,{icon:zt,label:"Schema",color:"bg-slate-100 dark:bg-slate-800"}),a.jsx(_c,{icon:hh,label:"Notiser",color:"bg-slate-100 dark:bg-slate-800"}),a.jsx(_c,{icon:yn,label:"Hantera",color:"bg-slate-100 dark:bg-slate-800"})]})]}),a.jsxs("section",{className:"bg-white dark:bg-slate-900 rounded-3xl p-5 border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[a.jsx(z0,{className:"h-4 w-4"}),ts.trends]}),a.jsxs("select",{className:"text-xs bg-transparent border-none focus:ring-0 text-slate-500 font-medium",children:[a.jsx("option",{children:"Nrvaro"}),a.jsx("option",{children:"Trivsel"})]})]}),a.jsx("div",{className:"h-48 w-full mt-4",children:a.jsx(bd,{width:"100%",height:"100%",children:a.jsxs(Yet,{data:ttt,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorTrend",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),a.jsx(ga,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"12px",fontSize:"10px",color:"white"},itemStyle:{color:"#60a5fa"}}),a.jsx(Vd,{type:"monotone",dataKey:"val",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorTrend)"})]})})})]})]})]}),a.jsx(J1,{children:l&&a.jsx(Jet,{onClose:()=>c(null),children:a.jsx(ett,{pupil:l})})})]})},yp=({title:t,value:e,icon:r,color:n,detail:s})=>a.jsxs(qi.div,{whileHover:{y:-5},className:"bg-white dark:bg-slate-900 p-5 rounded-3xl border border-slate-200 dark:border-slate-800 shadow-sm relative overflow-hidden group transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[a.jsx("div",{className:"p-2.5 rounded-2xl bg-opacity-10",style:{backgroundColor:`${n}20`,color:n},children:a.jsx(r,{className:"h-5 w-5"})}),a.jsx(gK,{className:"h-4 w-4 text-slate-300 group-hover:text-slate-500 cursor-pointer"})]}),a.jsxs("div",{className:"mt-4 relative z-10",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:t}),a.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white leading-tight",children:e}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-medium",children:s})]}),a.jsx("div",{className:"absolute -bottom-4 -right-4 w-24 h-24 rounded-full blur-[40px] opacity-20 group-hover:opacity-40 transition-opacity",style:{backgroundColor:n}})]}),Qet=({pupil:t,index:e,onSelect:r})=>{const n=t.riskScore>=4?"border-red-500 ring-red-500/20":t.riskScore>=3?"border-amber-500 ring-amber-500/20":"border-emerald-500 ring-emerald-500/20";return a.jsxs(qi.button,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:e*.03},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(t),className:"flex flex-col items-center group relative p-1",children:[a.jsxs("div",{className:`relative w-14 h-14 md:w-16 md:h-16 rounded-2xl border-2 p-1 bg-white dark:bg-slate-800 transition-all ${n} ring-4`,children:[t.photo?a.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full rounded-xl object-cover"}):a.jsx("div",{className:"w-full h-full rounded-xl bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-400 font-bold text-sm",children:t.name.charAt(0)}),a.jsxs("div",{className:"absolute -bottom-1 left-2 right-2 h-[2px] rounded-full flex gap-1",children:[a.jsx("div",{className:`h-full w-1/3 rounded-full ${t.attendance>90?"bg-emerald-500":"bg-red-500"}`}),a.jsx("div",{className:`h-full w-1/3 rounded-full ${t.wellbeing>=3?"bg-emerald-500":"bg-amber-500"}`}),a.jsx("div",{className:`h-full w-1/3 rounded-full ${t.grades.includes("0/")?"bg-slate-300":"bg-emerald-500"}`})]})]}),a.jsx("span",{className:"mt-2 text-[10px] md:text-xs font-semibold text-slate-700 dark:text-slate-300 whitespace-nowrap overflow-hidden text-ellipsis w-full max-w-[64px]",children:t.name.split(" ")[0]})]})},_c=({icon:t,label:e,color:r})=>a.jsxs(qi.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center gap-1.5 group",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all shadow-sm group-hover:shadow-md ${r}`,children:a.jsx(t,{className:"h-5 w-5"})}),a.jsx("span",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400",children:e})]}),Jet=({children:t,onClose:e})=>a.jsx(qi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/40 backdrop-blur-md",onClick:e,children:a.jsxs(qi.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:r=>r.stopPropagation(),className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800",children:[a.jsx("div",{className:"absolute right-6 top-6 z-20",children:a.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-slate-600",children:a.jsx(Je,{className:"h-6 w-6"})})}),t]})}),ett=({pupil:t})=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"h-40 bg-gradient-to-r from-blue-600 to-indigo-700 relative",children:a.jsx("div",{className:"absolute -bottom-12 left-8 border-4 border-white dark:border-slate-900 rounded-3xl overflow-hidden w-28 h-28 bg-white shadow-xl",children:t.photo?a.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-slate-100 flex items-center justify-center text-slate-300 text-3xl font-black",children:t.name.charAt(0)})})}),a.jsxs("div",{className:"pt-16 pb-8 px-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white mb-1",children:t.name}),a.jsxs("p",{className:"text-blue-500 font-bold mb-6",children:["Elev ID: #",t.id]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(nv,{label:"Nrvaro",value:t.attendance+"%",color:"text-blue-500"}),a.jsx(nv,{label:"Betyg",value:t.grades,color:"text-emerald-500"}),a.jsx(nv,{label:"Trivsel",value:t.wellbeing+"/5",color:"text-purple-500"}),a.jsx(nv,{label:"Risk Niv",value:t.riskScore>=4?"HG":"LG",color:t.riskScore>=4?"text-red-500":"text-emerald-500"})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-2 uppercase tracking-widest",children:"Snabba val"}),a.jsxs("button",{className:"flex items-center gap-3 w-full p-4 rounded-2xl bg-slate-50 dark:bg-slate-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-slate-700 dark:text-slate-200 transition-all font-bold group",children:[a.jsx(Qi,{className:"h-5 w-5 text-slate-400 group-hover:text-blue-500"})," Skicka Mail"]}),a.jsxs("button",{className:"flex items-center gap-3 w-full p-4 rounded-2xl bg-slate-50 dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 text-slate-700 dark:text-slate-200 transition-all font-bold group",children:[a.jsx(lw,{className:"h-5 w-5 text-slate-400 group-hover:text-emerald-500"})," Ringvrdshavare"]}),a.jsxs("button",{className:"flex items-center gap-3 w-full p-4 rounded-2xl bg-slate-50 dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 text-slate-700 dark:text-slate-200 transition-all font-bold group",children:[a.jsx(Xl,{className:"h-5 w-5 text-slate-400 group-hover:text-amber-500"})," Detaljerad profil"]})]})]})]}),nv=({label:t,value:e,color:r})=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-800",children:[a.jsx("span",{className:"text-slate-400 font-bold text-sm uppercase",children:t}),a.jsx("span",{className:`text-lg font-black ${r}`,children:e})]}),ttt=[{name:"Mn",val:88},{name:"Tis",val:92},{name:"Ons",val:85},{name:"Tor",val:94},{name:"Fre",val:89},{name:"Lr",val:90},{name:"Sn",val:95}],rtt={DRAFT:"Utkast",ACTIVE:"Aktiv",CLOSED:"Stngd"},ntt={DRAFT:"bg-gray-500/10 text-gray-500",ACTIVE:"bg-emerald-500/10 text-emerald-600",CLOSED:"bg-slate-500/10 text-slate-500"},att=()=>{const t=Et(),[e,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[d,u]=N.useState(!1),[h,f]=N.useState(""),[g,x]=N.useState(""),[m,p]=N.useState(""),[b,v]=N.useState(!1),y=async()=>{try{const[_,S,A]=await Promise.all([O.elevhalsa.getDistributions(),O.elevhalsa.getTemplates(),O.elevhalsa.getSurveyRoles()]);r(_||[]),s(S||[]),o(A||[])}catch{Ae.error("Kunde inte ladda data")}finally{c(!1)}};N.useEffect(()=>{y()},[]);const w=async()=>{if(!h||!g){Ae.error("Vlj mall och mlgrupp");return}v(!0);try{await O.elevhalsa.distribute({templateId:parseInt(h),targetRole:g,deadline:m||null}),Ae.success("Enkt utskickad!"),u(!1),f(""),x(""),p(""),y()}catch{Ae.error("Kunde inte skicka enkt")}finally{v(!1)}},k=async _=>{if(window.confirm("Vill du stnga detta utskick? Inga fler svar kan skickas in."))try{await O.elevhalsa.closeDistribution(_),Ae.success("Utskick stngt"),y()}catch{Ae.error("Kunde inte stnga utskicket")}},j=_=>{const S=i.find(A=>A.name===_);return(S==null?void 0:S.description)||(_==null?void 0:_.replace("ROLE_",""))||"Oknd"};return l?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-brand-teal"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("button",{onClick:()=>t("/health-dashboard/survey/new"),className:"flex items-center gap-2 px-4 py-2.5 bg-brand-teal text-white rounded-xl text-sm font-medium hover:bg-brand-teal/90 transition-colors",children:[a.jsx(jt,{className:"w-4 h-4"}),"Skapa mall"]}),a.jsxs("button",{onClick:()=>u(!d),className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700 transition-colors",children:[a.jsx(Wr,{className:"w-4 h-4"}),"Skicka enkt"]})]}),d&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm space-y-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[a.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(Wr,{className:"w-4 h-4 text-indigo-500"}),"Nytt utskick"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Enktmall"}),a.jsxs("select",{value:h,onChange:_=>f(_.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg text-sm dark:text-white",children:[a.jsx("option",{value:"",children:"Vlj mall..."}),n.map(_=>a.jsx("option",{value:_.id,children:_.title},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Mlgrupp (roll)"}),a.jsxs("select",{value:g,onChange:_=>x(_.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg text-sm dark:text-white",children:[a.jsx("option",{value:"",children:"Vlj roll..."}),i.map(_=>a.jsx("option",{value:_.name,children:_.description||_.name},_.name))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Deadline (valfri)"}),a.jsx("input",{type:"datetime-local",value:m,onChange:_=>p(_.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg text-sm dark:text-white"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-sm text-gray-500 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"Avbryt"}),a.jsxs("button",{onClick:w,disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[a.jsx(Wr,{className:"w-3.5 h-3.5"}),b?"Skickar...":"Skicka ut"]})]})]}),n.length>0&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-5 border-b border-slate-100 dark:border-white/5",children:a.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(xt,{className:"w-4 h-4 text-brand-teal"}),"Enktmallar (",n.length,")"]})}),a.jsx("div",{className:"divide-y divide-slate-100 dark:divide-white/5",children:n.map(_=>{var S;return a.jsxs("div",{className:"flex items-center justify-between px-5 py-3 hover:bg-slate-50/50 dark:hover:bg-white/5 transition-colors",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white truncate",children:_.title}),a.jsxs("p",{className:"text-xs text-gray-400",children:[((S=_.questions)==null?void 0:S.length)||0," frgor"]})]}),a.jsxs("button",{onClick:()=>t(`/health-dashboard/survey/edit/${_.id}`),className:"text-xs text-brand-teal font-medium hover:underline flex items-center gap-1",children:["Redigera ",a.jsx(or,{className:"w-3 h-3"})]})]},_.id)})})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-5 border-b border-slate-100 dark:border-white/5",children:a.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(Q2,{className:"w-4 h-4 text-indigo-500"}),"Utskick (",e.length,")"]})}),e.length===0?a.jsx("div",{className:"p-10 text-center text-gray-400 text-sm italic",children:"Inga utskick nnu. Skapa en mall och skicka ut den."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-slate-50 dark:bg-black/10 text-slate-500 dark:text-gray-400 text-xs font-bold uppercase tracking-wider",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-5 py-3",children:"Enkt"}),a.jsx("th",{className:"px-5 py-3",children:"Mlgrupp"}),a.jsx("th",{className:"px-5 py-3",children:"Status"}),a.jsx("th",{className:"px-5 py-3",children:"Skickad"}),a.jsx("th",{className:"px-5 py-3",children:"Deadline"}),a.jsx("th",{className:"px-5 py-3 text-right",children:"tgrd"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/5",children:e.map(_=>{var S;return a.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-white/5 transition-colors",children:[a.jsx("td",{className:"px-5 py-3",children:a.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:((S=_.template)==null?void 0:S.title)||"Oknd"})}),a.jsx("td",{className:"px-5 py-3",children:a.jsxs("span",{className:"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(vt,{className:"w-3.5 h-3.5"}),j(_.targetRole)]})}),a.jsx("td",{className:"px-5 py-3",children:a.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide ${ntt[_.status]||""}`,children:rtt[_.status]||_.status})}),a.jsx("td",{className:"px-5 py-3 text-sm text-gray-500 dark:text-gray-400",children:_.sentAt?new Date(_.sentAt).toLocaleDateString("sv-SE"):"-"}),a.jsx("td",{className:"px-5 py-3 text-sm text-gray-500 dark:text-gray-400",children:_.deadline?a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(zt,{className:"w-3.5 h-3.5"}),new Date(_.deadline).toLocaleDateString("sv-SE")]}):"-"}),a.jsx("td",{className:"px-5 py-3 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>t(`/health-dashboard/survey/results/${_.id}`),className:"p-1.5 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors",title:"Visa resultat",children:a.jsx(Xo,{className:"w-4 h-4 text-indigo-500"})}),_.status==="ACTIVE"&&a.jsx("button",{onClick:()=>k(_.id),className:"p-1.5 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Stng utskick",children:a.jsx(eo,{className:"w-4 h-4 text-red-500"})})]})})]},_.id)})})]})})]})]})},E9={OPEN:"ppet",IN_PROGRESS:"Pgende",RESOLVED:"Lst",CLOSED:"Stngt"},stt={OPEN:"bg-blue-500/10 text-blue-600",IN_PROGRESS:"bg-amber-500/10 text-amber-600",RESOLVED:"bg-emerald-500/10 text-emerald-600",CLOSED:"bg-gray-500/10 text-gray-500"},itt={PSYKOSOCIALT:"Psykosocialt",FYSISKT:"Fysiskt",ATGARDSPROGRAM:"tgrdsprogram",OTHER:"vrigt"},ott=t=>{if(!t)return"";const e=new Date(t),n=new Date-e,s=Math.floor(n/6e4);if(s<60)return`${s} min sedan`;const i=Math.floor(s/60);if(i<24)return`${i} tim sedan`;const o=Math.floor(i/24);return o<30?`${o} dagar sedan`:e.toLocaleDateString("sv-SE")},ltt=({data:t,onClose:e})=>t?a.jsxs("div",{className:"bg-white/80 dark:bg-[#1E1F20]/80 backdrop-blur-xl rounded-3xl border border-white/20 dark:border-white/5 shadow-2xl p-8 animate-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(Sr,{className:"w-6 h-6 text-indigo-500"}),"Vlmende-analys"]}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mt-1",children:"Djupdykning i trender och frdelning"})]}),a.jsxs("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-white/10 rounded-xl transition-colors",children:[a.jsx(gr,{className:"w-5 h-5 text-gray-500 rotate-45"})," "]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-slate-50/50 dark:bg-black/20 rounded-2xl p-6 border border-slate-100 dark:border-white/5",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-700 dark:text-gray-300 mb-6 flex items-center gap-2",children:[a.jsx(Tt,{className:"w-4 h-4 text-brand-teal"}),"Index-trend (6 mnader)"]}),a.jsx("div",{className:"h-[300px] w-full",children:a.jsx(bd,{width:"100%",height:"100%",children:a.jsxs(dQ,{data:t.history,children:[a.jsx(Pu,{strokeDasharray:"3 3",stroke:"#88888822",vertical:!1}),a.jsx(Xi,{dataKey:"month",stroke:"#888",fontSize:12,tickLine:!1,axisLine:!1}),a.jsx(Yi,{domain:[0,100],stroke:"#888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:r=>`${r}%`}),a.jsx(ga,{contentStyle:{backgroundColor:"#1E1F20",border:"none",borderRadius:"12px",color:"#fff"},itemStyle:{color:"#fff"}}),a.jsx(ah,{type:"monotone",dataKey:"index",stroke:"#6366f1",strokeWidth:4,dot:{r:6,fill:"#6366f1"},activeDot:{r:8}})]})})})]}),a.jsxs("div",{className:"bg-slate-50/50 dark:bg-black/20 rounded-2xl p-6 border border-slate-100 dark:border-white/5",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-700 dark:text-gray-300 mb-6 flex items-center gap-2",children:[a.jsx(vt,{className:"w-4 h-4 text-indigo-500"}),"Frdelning per klass"]}),a.jsx("div",{className:"h-[300px] w-full",children:a.jsx(bd,{width:"100%",height:"100%",children:a.jsxs(o2,{data:t.classDistribution,children:[a.jsx(Pu,{strokeDasharray:"3 3",stroke:"#88888822",vertical:!1}),a.jsx(Xi,{dataKey:"className",stroke:"#888",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(Yi,{domain:[0,100],stroke:"#888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:r=>`${r}%`}),a.jsx(ga,{contentStyle:{backgroundColor:"#1E1F20",border:"none",borderRadius:"12px",color:"#fff"}}),a.jsx(ao,{dataKey:"index",radius:[6,6,0,0],children:t.classDistribution.map((r,n)=>a.jsx(Tm,{fill:r.index<50?"#f43f5e":r.index<75?"#f59e0b":"#10b981"},`cell-${n}`))})]})})})]})]})]}):null,uQ=()=>{const{currentUser:t}=At(),[e,r]=N.useState("overview"),[n,s]=N.useState(null),[i,o]=N.useState([]),[l,c]=N.useState([]),[d,u]=N.useState(!0),[h,f]=N.useState(""),[g,x]=N.useState(!1),[m,p]=N.useState(null),[b,v]=N.useState(!1);N.useEffect(()=>{(async()=>{try{const[S,A,T]=await Promise.all([O.elevhalsa.getMetrics(),O.elevhalsa.getRisks(),O.elevhalsa.getCases()]);s(S),o(A||[]),c(T||[])}catch(S){console.error("Failed to load health team data",S),Ae.error("Kunde inte hmta dashboard-data")}finally{u(!1)}})()},[]);const y=async()=>{if(g){x(!1);return}v(!0);try{const _=await O.elevhalsa.getWellbeingDrilldown();p(_),x(!0)}catch{Ae.error("Kunde inte hmta frdjupad data")}finally{v(!1)}},w=h.length>=2?i.filter(_=>{var S;return(S=_.name)==null?void 0:S.toLowerCase().includes(h.toLowerCase())}):i;l.filter(_=>_.status==="OPEN"||_.status==="IN_PROGRESS");const k=[...l].sort((_,S)=>new Date(S.createdAt)-new Date(_.createdAt)).slice(0,5),j=[{label:"Aktiva renden",value:(n==null?void 0:n.activeCases)??0,icon:a.jsx(hs,{className:"w-6 h-6"}),color:"text-brand-teal",bgColor:"bg-brand-teal/10",subtitle:`${l.length} totalt`},{label:"Risk-elever",value:(n==null?void 0:n.atRiskStudentsCount)??0,icon:a.jsx(gd,{className:"w-6 h-6"}),color:"text-rose-500",bgColor:"bg-rose-500/10",subtitle:i.filter(_=>_.riskLevel==="HIGH").length>0?`${i.filter(_=>_.riskLevel==="HIGH").length} hg risk`:"Inga hgrisk"},{label:"Lsta denna mnad",value:(n==null?void 0:n.resolvedThisMonth)??0,icon:a.jsx(nr,{className:"w-6 h-6"}),color:"text-emerald-500",bgColor:"bg-emerald-500/10",subtitle:"Stngda renden"},{label:"Vlmendeindex",value:n!=null&&n.wellbeingIndex?`${n.wellbeingIndex}%`:"N/A",icon:a.jsx(Lr,{className:"w-6 h-6"}),color:"text-indigo-500",bgColor:"bg-indigo-500/10",subtitle:"Baserat p enkter",onClick:y,actionIcon:b?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-brand-teal border-t-transparent"}):a.jsx(or,{className:`w-4 h-4 transition-transform ${g?"rotate-90":""}`})}];return d?a.jsx("div",{className:"flex items-center justify-center p-20",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-teal"})}):a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-brand-teal/20 rounded-xl",children:a.jsx(Lr,{className:"w-8 h-8 text-brand-teal fill-brand-teal/20"})}),"Elevhlsa"]}),a.jsx("p",{className:"text-slate-500 dark:text-gray-400 mt-1",children:"vervakning och proaktivt std fr elevhlsan."})]})}),a.jsx("div",{className:"flex gap-1 bg-slate-100 dark:bg-black/20 p-1 rounded-xl w-fit",children:[{id:"overview",label:"versikt",icon:a.jsx(hs,{className:"w-4 h-4"})},{id:"surveys",label:"Enkter",icon:a.jsx(Va,{className:"w-4 h-4"})}].map(_=>a.jsxs("button",{onClick:()=>r(_.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all
                            ${e===_.id?"bg-white dark:bg-[#1E1F20] text-slate-800 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[_.icon,_.label]},_.id))}),e==="surveys"&&a.jsx(att,{}),e==="overview"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map((_,S)=>a.jsxs("div",{onClick:_.onClick,className:`bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm hover:shadow-md transition-all group ${_.onClick?"cursor-pointer hover:border-brand-teal/30 shadow-brand-teal/5":""}`,children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:`${_.bgColor} ${_.color} p-3 rounded-xl transition-transform group-hover:scale-110`,children:_.icon}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-xs font-medium text-gray-400 dark:text-gray-500",children:_.subtitle}),_.actionIcon&&a.jsx("div",{className:"mt-1",children:_.actionIcon})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:_.label}),a.jsx("h3",{className:"text-3xl font-extrabold text-slate-800 dark:text-white mt-1",children:_.value})]})]},S))}),g&&a.jsx("div",{className:"animate-in slide-in-from-top-4 duration-500",children:a.jsx(ltt,{data:m,onClose:()=>x(!1)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-[#1E1F20] rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-white/5 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(gd,{className:"w-5 h-5 text-rose-500"}),"Prioriterade Risker"]}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(gr,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Sk elev...",value:h,onChange:_=>f(_.target.value),className:"pl-9 pr-4 py-1.5 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg text-sm focus:ring-2 ring-brand-teal/30 dark:text-white"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-slate-50 dark:bg-black/10 text-slate-500 dark:text-gray-400 text-xs font-bold uppercase tracking-wider",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"Elev"}),a.jsx("th",{className:"px-6 py-4",children:"Riskfaktor"}),a.jsx("th",{className:"px-6 py-4",children:"Niv"})]})}),a.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-white/5",children:[w.map((_,S)=>{var A;return a.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-white/5 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center font-bold text-indigo-600 dark:text-indigo-300",children:((A=_.name)==null?void 0:A.charAt(0))||"?"}),a.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:_.name})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[_.attendance<80&&a.jsxs("span",{className:"text-xs text-rose-500 font-bold flex items-center gap-1",children:[a.jsx(Dr,{className:"w-3 h-3"}),Math.round(_.attendance),"% Nrvaro"]}),_.warnings>0&&a.jsxs("span",{className:"text-xs text-amber-500 font-bold flex items-center gap-1",children:[a.jsx(Xl,{className:"w-3 h-3"}),_.warnings," F-varningar"]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide ${_.riskLevel==="HIGH"?"bg-rose-500/10 text-rose-500":_.riskLevel==="MEDIUM"?"bg-amber-500/10 text-amber-500":"bg-emerald-500/10 text-emerald-500"}`,children:_.riskLevel==="HIGH"?"Hg":_.riskLevel==="MEDIUM"?"Medel":"Lg"})})]},S)}),w.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"3",className:"px-6 py-10 text-center text-gray-400 italic",children:h?"Inga resultat fr skningen.":"Inga riskelever identifierade."})})]})]})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm",children:[a.jsxs("h2",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2 mb-4",children:[a.jsx(xt,{className:"w-5 h-5 text-brand-teal"}),"Senaste renden"]}),a.jsx("div",{className:"space-y-3",children:k.length===0?a.jsx("p",{className:"text-sm text-gray-400 italic py-4 text-center",children:"Inga renden registrerade."}):k.map(_=>a.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 dark:bg-black/20 border border-slate-100 dark:border-white/5 hover:border-brand-teal/30 transition-colors",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white truncate",children:_.title||"Namnlst rende"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:_.student?`${_.student.firstName} ${_.student.lastName}`:"Oknd elev"})]}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold shrink-0 ${stt[_.status]||"bg-gray-100 text-gray-500"}`,children:E9[_.status]||_.status})]}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("span",{className:"text-[10px] text-gray-400 font-medium flex items-center gap-1",children:[a.jsx(Tt,{className:"w-3 h-3"}),ott(_.createdAt)]}),_.category&&a.jsx("span",{className:"text-[10px] text-gray-400",children:itt[_.category]||_.category})]})]},_.id))})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm",children:[a.jsxs("h2",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2 mb-4",children:[a.jsx(Sr,{className:"w-5 h-5 text-indigo-500"}),"rendeversikt"]}),a.jsxs("div",{className:"space-y-3",children:[["OPEN","IN_PROGRESS","RESOLVED","CLOSED"].map(_=>{const S=l.filter(A=>A.status===_).length;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${_==="OPEN"?"bg-blue-500":_==="IN_PROGRESS"?"bg-amber-500":_==="RESOLVED"?"bg-emerald-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:E9[_]})]}),a.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:S})]},_)}),a.jsxs("div",{className:"border-t border-slate-100 dark:border-white/5 pt-3 mt-3 flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Totalt"}),a.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:l.length})]})]})]})]})]})]})]})},Ko=({user:t,className:e=""})=>{const[r,n]=N.useState(!1),s=wo(t==null?void 0:t.profilePictureUrl),i=s&&!r,o=l=>{if(!l)return"?";const c=l.trim().split(" ");return c.length>=2?(c[0][0]+c[c.length-1][0]).toUpperCase():l.substring(0,2).toUpperCase()};return a.jsx("div",{className:`relative overflow-hidden flex items-center justify-center bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 font-bold ${e}`,children:i?a.jsx("img",{src:s,className:"w-full h-full object-cover",alt:(t==null?void 0:t.name)||"Avatar",onError:()=>n(!0)}):a.jsx("span",{className:"text-[inherit] select-none text-[0.8em]",children:o((t==null?void 0:t.fullName)||(t==null?void 0:t.name))})})},iI=({currentUser:t,setView:e,themeMode:r="dark"})=>{var x;const n=(((x=t==null?void 0:t.role)==null?void 0:x.name)||(t==null?void 0:t.role)||"STUDENT").toUpperCase(),[s,i]=N.useState(!0),[o,l]=N.useState(null),c=r==="light",d={cardBg:c?"bg-white border border-gray-100 shadow-sm":"bg-[#1C1C1E]",cardBgSecondary:c?"bg-gray-50 border border-gray-100":"bg-[#1C1C1E]",text:c?"text-gray-900":"text-white",textMuted:c?"text-gray-500":"text-gray-400",divider:c?"bg-gray-100":"bg-white/10"};N.useEffect(()=>{u()},[n]);const u=async()=>{i(!0);try{n==="TEACHER"?await h():n==="STUDENT"?await f():await g()}catch(m){console.error("Dashboard Load Failed",m)}finally{i(!1)}},h=async()=>{const p=(await O.courses.getAll()).filter(y=>{var w;return((w=y.teacher)==null?void 0:w.id)===t.id});let b=[];for(const y of p)try{const w=await O.assignments.getByCourse(y.id);for(const k of w){const j=await O.assignments.getSubmissions(k.id);b.push(...j.filter(_=>!_.grade))}}catch{}let v=[];try{v=await O.courses.getApplications(t.id)}catch{}l({type:"TEACHER",activeCourses:p.length,ungradedCount:b.length,applicationCount:v.length,studentCount:p.reduce((y,w)=>{var k;return y+(((k=w.students)==null?void 0:k.length)||0)},0)})},f=async()=>{const m=await O.courses.getMyCourses(t.id);let p=[];if(m.length>0)for(const y of m)try{const w=await O.assignments.getByCourse(y.id);p.push(...w.map(k=>({...k,courseName:y.name})))}catch{}const b=new Date,v=p.filter(y=>new Date(y.dueDate)>b).sort((y,w)=>new Date(y.dueDate)-new Date(w.dueDate)).slice(0,5);l({type:"STUDENT",activeCourses:m.length,upcomingAssignments:v,xp:1250,level:5})},g=async()=>{const[m,p,b]=await Promise.all([O.users.getAll(0,10),O.courses.getAll(),O.documents.getAll()]),v=m.content||m||[],y=[...b].sort((k,j)=>new Date(j.createdAt)-new Date(k.createdAt)).slice(0,4),w=[...v].sort((k,j)=>new Date(j.createdAt)-new Date(k.createdAt)).slice(0,3);l({type:"ADMIN",totalUsers:v.length,totalCourses:p.length,totalDocs:b.length,archivedDocs:12,recentUsers:w,recentUploads:y})};return s?a.jsx("div",{className:"p-10 text-center opacity-50 animate-pulse",children:"Laddar versikt..."}):n==="ADMIN"||n==="ROLE_ADMIN"?a.jsxs("div",{className:"px-6 space-y-5 animate-in fade-in pb-32",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-[#FF6D5A] rounded-[32px] p-6 text-white flex flex-col justify-between min-h-[160px]",children:[a.jsx("div",{className:"bg-white/20 w-10 h-10 rounded-full flex items-center justify-center",children:a.jsx(vt,{size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-4xl font-bold",children:o.totalUsers}),a.jsx("p",{className:"text-xs font-bold opacity-70 uppercase tracking-wide",children:"Totalt Anvndare"})]})]}),a.jsxs("div",{className:"bg-[#FFCE47] rounded-[32px] p-6 text-black flex flex-col justify-between min-h-[160px]",children:[a.jsx("div",{className:"bg-black/10 w-10 h-10 rounded-full flex items-center justify-center",children:a.jsx(gt,{size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-4xl font-bold",children:o.totalCourses}),a.jsx("p",{className:"text-xs font-bold opacity-60 uppercase tracking-wide",children:"Kurser"})]})]})]}),a.jsxs("div",{className:`${d.cardBgSecondary} rounded-[32px] p-6 flex items-center justify-between ${d.text}`,children:[a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsx("div",{className:`p-3 rounded-full ${c?"bg-blue-100 text-blue-600":"bg-blue-500/20 text-blue-400"}`,children:a.jsx(xt,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-xl",children:o.totalDocs}),a.jsx("p",{className:`text-[10px] ${d.textMuted} font-bold uppercase`,children:"Totalt Filer"})]})]}),a.jsx("div",{className:`w-[1px] h-8 ${d.divider}`}),a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsx("div",{className:`p-3 rounded-full ${c?"bg-gray-200 text-gray-600":"bg-gray-500/20 text-gray-400"}`,children:a.jsx(fh,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-xl",children:o.archivedDocs}),a.jsx("p",{className:`text-[10px] ${d.textMuted} font-bold uppercase`,children:"Arkiverade"})]})]})]}),a.jsxs("div",{className:"bg-[#FFF8E7] rounded-[32px] p-6 text-black",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("span",{className:"font-bold text-lg",children:"Senaste Anvndare"}),a.jsx(Wa,{size:18,className:"opacity-50"})]}),a.jsx("div",{className:"space-y-3",children:o.recentUsers.map((m,p)=>{var b;return a.jsxs("div",{className:"bg-white p-3 rounded-2xl flex items-center justify-between shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ko,{user:m,className:"w-10 h-10 rounded-full text-sm"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold",children:m.fullName||m.name}),a.jsx("p",{className:"text-[10px] opacity-50 font-bold tracking-wider capitalize",children:((b=m.role)==null?void 0:b.name)||m.role})]})]}),a.jsx("div",{className:`w-2 h-2 rounded-full ${m.online?"bg-green-500":"bg-gray-300"}`})]},p)})})]}),a.jsxs("div",{className:"bg-[#E0F2FE] rounded-[32px] p-6 text-black",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("span",{className:"font-bold text-lg",children:"Senaste Uppladdningar"}),a.jsx(Xa,{size:18,className:"opacity-50"})]}),a.jsx("div",{className:"space-y-3",children:o.recentUploads.map((m,p)=>a.jsxs("div",{className:"bg-white/60 p-3 rounded-2xl flex items-center gap-3",children:[a.jsx("div",{className:"bg-blue-500/10 p-2 rounded-lg text-blue-600",children:a.jsx(xt,{size:16})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold truncate",children:m.title||m.name}),a.jsx("p",{className:"text-[10px] opacity-60",children:"Admin  12 min sedan"})]})]},p))})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>e("admin"),className:`${d.cardBg} p-4 rounded-2xl flex flex-col items-center gap-2 ${d.text} active:scale-95 transition-transform`,children:[a.jsx(yn,{size:20,className:d.textMuted}),a.jsx("span",{className:"text-[10px] font-bold",children:"Admin"})]}),a.jsxs("button",{onClick:()=>e("analytics"),className:`${d.cardBg} p-4 rounded-2xl flex flex-col items-center gap-2 ${d.text} active:scale-95 transition-transform`,children:[a.jsx(hs,{size:20,className:d.textMuted}),a.jsx("span",{className:"text-[10px] font-bold",children:"Analys"})]}),a.jsxs("button",{onClick:()=>e("profile"),className:`${d.cardBg} p-4 rounded-2xl flex flex-col items-center gap-2 ${d.text} active:scale-95 transition-transform`,children:[a.jsx(jr,{size:20,className:d.textMuted}),a.jsx("span",{className:"text-[10px] font-bold",children:"Profil"})]})]})]}):n==="TEACHER"?a.jsxs("div",{className:"px-6 space-y-4 animate-in fade-in pb-32",children:[a.jsxs("div",{children:[a.jsx("h2",{className:`text-3xl font-bold ${d.text}`,children:"Lrarpanel"}),a.jsx("p",{className:d.textMuted,children:"Hr r lget just nu."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>e("grading"),className:"bg-[#FF6D5A] p-5 rounded-[28px] text-white text-left relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:a.jsx(nr,{size:40})}),a.jsx("h3",{className:"text-4xl font-bold mb-1",children:o.ungradedCount}),a.jsx("p",{className:"font-bold text-sm leading-tight",children:"Att rtta"}),o.ungradedCount>0&&a.jsx("div",{className:"mt-2 w-2 h-2 bg-white rounded-full animate-pulse"})]}),a.jsxs("button",{onClick:()=>e("applications"),className:"bg-[#FFCE47] p-5 rounded-[28px] text-black text-left relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:a.jsx(Ji,{size:40})}),a.jsx("h3",{className:"text-4xl font-bold mb-1",children:o.applicationCount}),a.jsx("p",{className:"font-bold text-sm leading-tight",children:"Anskningar"})]})]})]}):n==="STUDENT"?a.jsxs("div",{className:"px-6 space-y-4 animate-in fade-in pb-32",children:[a.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-[32px] p-6 text-white relative overflow-hidden",children:a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-xs font-bold opacity-70 uppercase tracking-wider",children:["Level ",o.level]}),a.jsx("h3",{className:"text-3xl font-bold",children:"Student Master"})]}),a.jsx(Mr,{size:32,className:"text-yellow-300"})]}),a.jsx("div",{className:"w-full bg-black/20 h-2 rounded-full overflow-hidden",children:a.jsx("div",{className:"bg-yellow-400 h-full w-[75%] shadow-[0_0_10px_rgba(250,204,21,0.5)]"})}),a.jsxs("p",{className:"text-right text-xs font-bold mt-2 opacity-70",children:[o.xp," / 2000 XP"]})]})}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-xl font-bold ${d.text} mb-3`,children:"Kommande Uppgifter"}),a.jsx("div",{className:"space-y-3",children:o.upcomingAssignments.length>0?o.upcomingAssignments.map((m,p)=>a.jsxs("div",{className:`${d.cardBg} p-4 rounded-2xl flex items-center gap-4 ${c?"":"border-l-4 border-[#FF6D5A]"}`,children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:`font-bold ${d.text} text-sm`,children:m.title}),a.jsxs("p",{className:`text-xs ${d.textMuted}`,children:[m.courseName,"  ",new Date(m.dueDate).toLocaleDateString()]})]}),a.jsx(Tt,{size:16,className:c?"text-indigo-600":"text-[#FF6D5A]"})]},p)):a.jsx("div",{className:`p-6 ${d.cardBg} rounded-2xl text-center ${d.textMuted} text-sm`,children:"Inga uppgifter just nu! "})})]})]}):null},oI=({course:t,onBack:e})=>{const[r,n]=N.useState("overview"),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState(!0);return N.useEffect(()=>{if(!t)return;(async()=>{try{d(!0);const h=await O.lessons.getByCourse(t.id),f=await O.assignments.getByCourse(t.id),g=Array.isArray(h)?h:(h==null?void 0:h.content)||[],x=Array.isArray(f)?f:(f==null?void 0:f.content)||[];i(g),l(x)}catch(h){console.error("Failed to load course content",h)}finally{d(!1)}})()},[t]),t?a.jsxs("div",{className:"px-6 space-y-6 pt-4 animate-in fade-in slide-in-from-right-4 pb-32",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("button",{onClick:e,className:"p-2 bg-white/10 rounded-full text-white hover:bg-white/20 transition-colors",children:a.jsx(Wl,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-xl font-bold text-white truncate",children:t.name}),a.jsx("p",{className:"text-xs text-white/50",children:t.code})]})]}),a.jsxs("div",{className:"bg-[#1C1C1E] p-6 rounded-[32px] flex justify-between items-center relative overflow-hidden",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsx("p",{className:"text-white/50 text-xs font-bold uppercase mb-1",children:"Dina framsteg"}),a.jsx("h3",{className:"text-4xl font-bold text-white",children:"0%"})]}),a.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-white/10 border-t-green-500 relative z-10"}),a.jsx("div",{className:"absolute right-0 top-0 w-32 h-32 bg-indigo-500/20 blur-[50px] rounded-full"})]}),a.jsxs("div",{className:"flex p-1 bg-[#1C1C1E] rounded-2xl",children:[a.jsx("button",{onClick:()=>n("overview"),className:`flex-1 py-3 text-sm font-bold rounded-xl transition-all ${r==="overview"?"bg-[#FF6D5A] text-white shadow-lg":"text-white/50"}`,children:"versikt"}),a.jsx("button",{onClick:()=>n("lessons"),className:`flex-1 py-3 text-sm font-bold rounded-xl transition-all ${r==="lessons"?"bg-[#FF6D5A] text-white shadow-lg":"text-white/50"}`,children:"Material"}),a.jsx("button",{onClick:()=>n("assignments"),className:`flex-1 py-3 text-sm font-bold rounded-xl transition-all ${r==="assignments"?"bg-[#FF6D5A] text-white shadow-lg":"text-white/50"}`,children:"Uppgifter"})]}),a.jsx("div",{className:"min-h-[300px]",children:c?a.jsx("div",{className:"flex justify-center py-10",children:a.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-[#FF6D5A] rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[r==="overview"&&a.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[a.jsxs("div",{className:"bg-[#1C1C1E] p-5 rounded-2xl space-y-2",children:[a.jsx("h4",{className:"font-bold text-white",children:"Om kursen"}),a.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:t.description||"Ingen beskrivning tillgnglig."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-[#1C1C1E] p-4 rounded-2xl",children:[a.jsx(gt,{className:"text-indigo-400 mb-2"}),a.jsx("span",{className:"text-2xl font-bold text-white block",children:s.length}),a.jsx("span",{className:"text-xs text-white/50 uppercase font-bold",children:"Lektioner"})]}),a.jsxs("div",{className:"bg-[#1C1C1E] p-4 rounded-2xl",children:[a.jsx(xt,{className:"text-pink-400 mb-2"}),a.jsx("span",{className:"text-2xl font-bold text-white block",children:o.length}),a.jsx("span",{className:"text-xs text-white/50 uppercase font-bold",children:"Uppgifter"})]})]})]}),r==="lessons"&&a.jsx("div",{className:"space-y-3 animate-in fade-in",children:s.length===0?a.jsx("p",{className:"text-center text-white/30 py-10 italic",children:"Inget material n."}):s.map((u,h)=>a.jsxs("div",{className:"bg-[#1C1C1E] p-4 rounded-2xl flex items-center gap-4 active:scale-95 transition-transform cursor-pointer",children:[a.jsx("div",{className:"bg-indigo-500/20 p-3 rounded-xl text-indigo-400",children:u.type==="VIDEO"?a.jsx(Yo,{size:24}):a.jsx(gt,{size:24})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-bold text-white",children:u.title}),a.jsx("p",{className:"text-xs text-white/50 line-clamp-1",children:u.description||"Lektion"})]}),a.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white/10"})]},h))}),r==="assignments"&&a.jsx("div",{className:"space-y-3 animate-in fade-in",children:o.length===0?a.jsx("p",{className:"text-center text-white/30 py-10 italic",children:"Inga uppgifter."}):o.map((u,h)=>a.jsxs("div",{className:"bg-[#1C1C1E] p-4 rounded-2xl flex items-center gap-4 active:scale-95 transition-transform cursor-pointer",children:[a.jsx("div",{className:"bg-pink-500/20 p-3 rounded-xl text-pink-400",children:a.jsx(xt,{size:24})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-bold text-white",children:u.title}),a.jsxs("p",{className:"text-xs text-white/50",children:["Deadline: ",u.dueDate?new Date(u.dueDate).toLocaleDateString():"Ingen"]})]}),a.jsx(Tt,{size:16,className:"text-white/30"})]},h))})]})})]}):null},ctt=[{id:"finsights-dark",name:"Finsights Dark",color:"#0F0F11",badge:"Pro"},{id:"cosmic-growth",name:"Cosmic Growth",color:"#1F2235",badge:"New"},{id:"eduflex-fresh",name:"EduFresh",color:"#FFFFFF",badge:"Light"},{id:"midnight-glass",name:"Midnight Glass",color:"#000000"},{id:"clean-light",name:"Clean Light",color:"#F3F4F6"}],lI=({onSelect:t})=>{const{getCustomTheme:e,updateBranding:r}=io(),s=(e()||{}).mobile||{},i=s.enabledThemes||["finsights-dark","cosmic-growth","eduflex-fresh"],o=localStorage.getItem("active_mobile_theme"),l=o&&i.includes(o)?o:s.id||"finsights-dark",c=ctt.filter(u=>i.includes(u.id)),d=u=>{localStorage.setItem("active_mobile_theme",u),t&&t(u),window.location.reload()};return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[a.jsx("span",{className:"text-xs font-bold uppercase text-gray-500 dark:text-gray-400",children:"Vlj utseende"}),a.jsxs("span",{className:"text-[10px] bg-indigo-100 text-indigo-600 px-2 py-0.5 rounded-full",children:[c.length," tillgngliga"]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(u=>a.jsxs("button",{onClick:()=>d(u.id),className:`group relative flex items-center justify-between p-3 rounded-2xl border-2 transition-all active:scale-95
                        ${l===u.id?"border-indigo-500 bg-indigo-50/10 dark:bg-indigo-900/20":"border-transparent hover:bg-gray-50 dark:hover:bg-white/5"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl shadow-sm border border-black/10 flex items-center justify-center",style:{backgroundColor:u.color},children:a.jsx(F4,{size:18,className:u.color==="#FFFFFF"||u.color==="#F3F4F6"?"text-black":"text-white"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:`text-sm font-bold ${l===u.id?"text-indigo-600 dark:text-indigo-400":"text-gray-700 dark:text-gray-200"}`,children:u.name}),u.badge&&a.jsx("span",{className:"text-[10px] text-gray-400 border border-gray-200 dark:border-white/10 px-1.5 rounded",children:u.badge})]})]}),l===u.id&&a.jsx("div",{className:"bg-indigo-600 text-white p-1 rounded-full",children:a.jsx(Gr,{size:14,strokeWidth:3})})]},u.id))}),c.length===0&&a.jsx("p",{className:"text-xs text-red-400 text-center py-4",children:"Inga teman tillgngliga."})]})},cI=({currentUser:t,themeMode:e="dark"})=>{const[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState(!1),c=N.useRef(null),d=e==="light",u={cardBg:d?"bg-white border border-gray-100 shadow-sm":"bg-[#1C1C1E]",text:d?"text-gray-900":"text-white",textMuted:d?"text-gray-500":"text-white/60",buttonBg:d?"bg-gray-100":"bg-[#1C1C1E]"};N.useEffect(()=>{h()},[]);const h=async()=>{var m;try{if(!t)return;const p=t.role==="ADMIN"||((m=t.role)==null?void 0:m.name)==="ADMIN";let b=[];p?b=await O.documents.getAll():b=await O.documents.getUserDocs(t.id);const v=Array.isArray(b)?b:[];n(v)}catch(p){console.error(p)}},f=async m=>{window.confirm("r du sker p att du vill ta bort filen?")&&(await O.documents.delete(m),h())},g=()=>{var m;o||(m=c.current)==null||m.click()},x=async m=>{const p=m.target.files[0];if(!p||!t)return;l(!0);const b=new FormData;b.append("file",p);try{await O.documents.upload(t.id,b),await h(),alert("Fil uppladdad! ")}catch(v){console.error("Upload failed",v),alert("Kunde inte ladda upp filen.")}finally{l(!1),c.current&&(c.current.value="")}};return a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in slide-in-from-bottom-4 pb-32",children:[a.jsx("input",{type:"file",ref:c,onChange:x,className:"hidden"}),a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:`text-3xl font-bold ${u.text}`,children:"Resurser"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>i(!s),className:`p-2 ${u.buttonBg} rounded-full ${u.textMuted} hover:${u.text}`,children:s?a.jsx(gg,{size:20}):a.jsx(dK,{size:20})}),a.jsx("button",{onClick:g,disabled:o,className:"p-2 bg-[#FF6D5A] text-white rounded-full shadow-lg shadow-orange-500/20 active:scale-95 disabled:opacity-50 transition-all",children:o?a.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(jt,{size:24})})]})]}),a.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 no-scrollbar",children:["Kursmaterial","Bilder","Dokument","Backup"].map((m,p)=>a.jsxs("div",{className:`min-w-[120px] h-32 ${u.cardBg} rounded-2xl p-4 flex flex-col justify-between`,children:[a.jsx(fh,{className:"text-indigo-400",size:28}),a.jsx("p",{className:`font-bold text-sm ${u.text}`,children:m})]},p))}),a.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Filer"}),s?a.jsx("div",{className:"grid grid-cols-2 gap-3",children:r.map((m,p)=>{var b,v;return a.jsxs("div",{onClick:()=>window.open(m.url||m.path||`/api/documents/${m.id}/download`,"_blank"),className:"bg-[#1C1C1E] p-4 rounded-2xl relative aspect-square flex flex-col justify-between cursor-pointer active:scale-95 transition-transform",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"bg-white/10 p-2 rounded-lg",children:(b=m.type)!=null&&b.startsWith("image")||(v=m.name)!=null&&v.match(/\.(jpg|jpeg|png|gif)$/i)?a.jsx(Dd,{size:20,className:"text-white"}):a.jsx(xt,{size:20,className:"text-white"})}),a.jsx("button",{onClick:y=>{y.stopPropagation(),f(m.id)},className:"text-white/30 hover:text-red-500",children:a.jsx(qt,{size:16})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-white text-sm truncate",children:m.title||m.name}),a.jsx("p",{className:"text-[10px] text-white/50",children:new Date(m.createdAt).toLocaleDateString()})]})]},p)})}):a.jsx("div",{className:"space-y-3",children:r.map((m,p)=>a.jsxs("div",{className:"bg-[#1C1C1E] p-4 rounded-2xl flex items-center gap-4 group",children:[a.jsx("div",{className:"bg-blue-500/20 p-3 rounded-xl text-blue-400",children:a.jsx(xt,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>window.open(m.url||m.path||`/api/documents/${m.id}/download`,"_blank"),children:[a.jsx("h3",{className:"font-bold text-white truncate",children:m.title||m.name}),a.jsxs("p",{className:"text-xs text-white/50",children:[m.size?`${m.size} KB`:"FIL","  ",new Date(m.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>window.open(m.url||m.path||`/api/documents/${m.id}/download`,"_blank"),className:"p-2 bg-white/10 rounded-full text-white",children:a.jsx(Rn,{size:14})}),a.jsx("button",{onClick:()=>f(m.id),className:"p-2 bg-red-500/20 text-red-500 rounded-full",children:a.jsx(qt,{size:14})})]})]},p))})]})},hQ=()=>{const[t,e]=N.useState("MONTH"),[r,n]=N.useState(new Date),[s,i]=N.useState([]),[o,l]=N.useState([]);N.useEffect(()=>{c()},[r]);const c=async()=>{try{const x=await O.courses.getAll(),m=[];x.forEach(b=>{b.startDate&&m.push({date:new Date(b.startDate),title:`Start: ${b.name}`,type:"COURSE"}),b.endDate&&m.push({date:new Date(b.endDate),title:`Slut: ${b.name}`,type:"COURSE_END"})});const p=new Date;m.push({date:p,title:"Personalmte",type:"MEETING",time:"10:00"}),m.push({date:new Date(p.getTime()+864e5),title:"Workshop",type:"WORKSHOP",time:"14:00"}),i(m)}catch(x){console.error(x)}},d=x=>{const m=x.getFullYear(),p=x.getMonth(),b=new Date(m,p+1,0).getDate(),v=new Date(m,p,1).getDay();return{days:b,firstDay:v===0?6:v-1}},{days:u,firstDay:h}=d(r),f=["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],g=x=>{const m=new Date(r.getFullYear(),r.getMonth(),x),p=s.filter(b=>b.date.toDateString()===m.toDateString());l(p.length>0?p:[{title:"Inga hndelser",type:"NONE"}])};return a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in slide-in-from-bottom-4 pb-32",children:[a.jsx("h2",{className:"text-3xl font-bold text-white",children:"Kalender"}),a.jsx("div",{className:"flex bg-[#1C1C1E] p-1 rounded-xl",children:["MONTH","WEEK","DAY"].map(x=>a.jsx("button",{onClick:()=>e(x),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${t===x?"bg-white text-black shadow-sm":"text-gray-500"}`,children:x==="MONTH"?"Mnad":x==="WEEK"?"Vecka":"Dag"},x))}),a.jsxs("div",{className:"bg-[#1C1C1E] rounded-[32px] p-6 text-white min-h-[400px]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("button",{onClick:()=>n(new Date(r.setMonth(r.getMonth()-1))),className:"p-2 hover:bg-white/10 rounded-full",children:a.jsx(Ho,{})}),a.jsxs("span",{className:"font-bold text-xl",children:[f[r.getMonth()]," ",r.getFullYear()]}),a.jsx("button",{onClick:()=>n(new Date(r.setMonth(r.getMonth()+1))),className:"p-2 hover:bg-white/10 rounded-full",children:a.jsx(or,{})})]}),t==="MONTH"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-7 mb-4 text-center text-xs font-bold text-gray-500 uppercase",children:[a.jsx("span",{children:"M"}),a.jsx("span",{children:"Ti"}),a.jsx("span",{children:"On"}),a.jsx("span",{children:"To"}),a.jsx("span",{children:"Fr"}),a.jsx("span",{children:"L"}),a.jsx("span",{children:"S"})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-y-4 gap-x-1 text-center font-medium text-sm",children:[Array.from({length:h}).map((x,m)=>a.jsx("div",{},`empty-${m}`)),Array.from({length:u}).map((x,m)=>{const p=m+1,b=new Date(r.getFullYear(),r.getMonth(),p).toDateString(),v=s.some(y=>y.date.toDateString()===b);return a.jsx("button",{onClick:()=>g(p),className:`w-8 h-8 mx-auto flex items-center justify-center rounded-full ${v?"bg-[#FF6D5A] text-white shadow-lg shadow-orange-500/20":"hover:bg-white/10"}`,children:p},p)})]})]}),a.jsxs("div",{className:"mt-8 border-t border-white/10 pt-6 space-y-3",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Hndelser"}),o.length>0?o.map((x,m)=>a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx("div",{className:"w-1 h-8 bg-indigo-500 rounded-full"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-sm",children:x.title}),x.time&&a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(Tt,{size:10})," ",x.time]})]})]},m)):a.jsx("p",{className:"text-sm opacity-50",children:"Vlj ett datum fr att se detaljer."})]})]})]})},fQ=()=>a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in slide-in-from-bottom-4 pb-32",children:[a.jsx("h2",{className:"text-3xl font-bold text-white",children:"Administration"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-[#1C1C1E] rounded-2xl p-4",children:[a.jsx("h3",{className:"text-gray-500 text-xs font-bold uppercase mb-3",children:"Systemet"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 text-white",children:[a.jsx(Uf,{size:20,className:"text-indigo-500"}),a.jsx("span",{className:"font-bold",children:"Server Status"})]}),a.jsx("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded font-bold",children:"Online"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 text-white",children:[a.jsx(Gi,{size:20,className:"text-blue-500"}),a.jsx("span",{className:"font-bold",children:"Databas"})]}),a.jsx("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded font-bold",children:"Connected"})]})]})]}),a.jsxs("div",{className:"bg-[#1C1C1E] rounded-2xl p-4",children:[a.jsx("h3",{className:"text-gray-500 text-xs font-bold uppercase mb-3",children:"Skerhet"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{className:"w-full flex items-center justify-between text-white active:opacity-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(pi,{size:20,className:"text-red-500"}),a.jsx("span",{className:"font-bold",children:"Brandvgg"})]}),a.jsx("span",{className:"text-xs font-mono text-white/50",children:"Active"})]}),a.jsx("button",{className:"w-full flex items-center justify-between text-white active:opacity-50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Mn,{size:20,className:"text-orange-500"}),a.jsx("span",{className:"font-bold",children:"Behrigheter"})]})})]})]}),a.jsxs("div",{className:"bg-[#1C1C1E] rounded-2xl p-4",children:[a.jsx("h3",{className:"text-gray-500 text-xs font-bold uppercase mb-3",children:"Logs"}),a.jsxs("div",{className:"p-3 bg-black/30 rounded-xl font-mono text-[10px] text-green-400 h-32 overflow-hidden",children:[a.jsx("p",{children:"[INFO] Server started at 08:00:01"}),a.jsx("p",{children:"[INFO] Connection pool initialized"}),a.jsx("p",{children:"[WARN] High memory usage detected (85%)"}),a.jsx("p",{children:"[INFO] User login: admin_user"}),a.jsx("p",{children:"[INFO] User login: student_01"}),a.jsx("p",{children:"[INFO] Scheduled backup completed"})]})]})]})]}),gQ=()=>a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in slide-in-from-bottom-4 pb-32",children:[a.jsx("h2",{className:"text-3xl font-bold text-white",children:"Systemanalys"}),a.jsxs("div",{className:"bg-[#1C1C1E] p-6 rounded-[32px] text-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase",children:"Veckoaktivitet"}),a.jsx("h3",{className:"text-2xl font-bold",children:"12,450 Besk"})]}),a.jsxs("div",{className:"bg-green-500/20 text-green-400 px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1",children:[a.jsx(Sr,{size:12})," +12%"]})]}),a.jsx("div",{className:"h-40 flex items-end justify-between gap-2",children:[40,65,45,80,55,90,70].map((t,e)=>a.jsxs("div",{className:"w-full bg-[#FF6D5A]/20 rounded-t-lg relative group",children:[a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-[#FF6D5A] rounded-t-lg transition-all duration-1000",style:{height:`${t}%`}}),a.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-white text-black text-[10px] font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:[t,"%"]})]},e))}),a.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500 font-bold",children:[a.jsx("span",{children:"Mn"}),a.jsx("span",{children:"Tis"}),a.jsx("span",{children:"Ons"}),a.jsx("span",{children:"Tor"}),a.jsx("span",{children:"Fre"}),a.jsx("span",{children:"Lr"}),a.jsx("span",{children:"Sn"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-[#1C1C1E] p-5 rounded-[28px] text-white",children:[a.jsx("div",{className:"bg-blue-500/20 w-10 h-10 rounded-full flex items-center justify-center text-blue-400 mb-3",children:a.jsx(vt,{size:20})}),a.jsx("h4",{className:"text-2xl font-bold",children:"85%"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Retention Rate"})]}),a.jsxs("div",{className:"bg-[#1C1C1E] p-5 rounded-[28px] text-white",children:[a.jsx("div",{className:"bg-purple-500/20 w-10 h-10 rounded-full flex items-center justify-center text-purple-400 mb-3",children:a.jsx(hs,{size:20})}),a.jsx("h4",{className:"text-2xl font-bold",children:"24ms"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Avg Latency"})]})]})]}),dI=({currentUser:t,onLogout:e})=>{var i;Et();const{getCustomTheme:r,updateBranding:n}=io(),s=()=>{r()?(n(null),alert("Tema terstllt till standard.")):(n({primaryColor:"#FF6D5A",secondaryColor:"#FFCE47",backgroundColor:"#000000",textColor:"#FFFFFF"}),alert("Tema ndrat! (Demo)"))};return a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in slide-in-from-bottom-4 pb-32",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-white",children:"Min Profil"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:s,className:"bg-white/10 p-2 rounded-full text-white hover:bg-white/20",children:a.jsx(qu,{size:20})}),a.jsx("button",{className:"bg-white/10 p-2 rounded-full text-white hover:bg-white/20",children:a.jsx(Zl,{size:20})})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#1C1C1E] to-[#252528] p-6 rounded-[32px] flex flex-col items-center text-white border border-white/5",children:[a.jsx("div",{className:"w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-[#FF6D5A] to-[#FFCE47] mb-4",children:a.jsx(Ko,{user:t,className:"w-full h-full rounded-full border-4 border-[#1C1C1E] text-2xl"})}),a.jsx("h3",{className:"text-2xl font-bold",children:(t==null?void 0:t.fullName)||(t==null?void 0:t.name)}),a.jsx("span",{className:"px-3 py-1 bg-white/10 rounded-full text-xs font-bold uppercase mt-2",children:((i=t==null?void 0:t.role)==null?void 0:i.name)||(t==null?void 0:t.role)})]}),a.jsxs("div",{className:"bg-[#1C1C1E] rounded-[32px] p-6 space-y-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-white/5 p-3 rounded-full",children:a.jsx(Qi,{size:20,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Email"}),a.jsx("p",{className:"font-medium",children:(t==null?void 0:t.email)||"Ingen email"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-white/5 p-3 rounded-full",children:a.jsx(lw,{size:20,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Telefon"}),a.jsx("p",{className:"font-medium",children:(t==null?void 0:t.phone)||"+46 70 123 45 67"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-white/5 p-3 rounded-full",children:a.jsx(B0,{size:20,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Plats"}),a.jsx("p",{className:"font-medium",children:(t==null?void 0:t.city)||"Stockholm, SE"})]})]})]}),a.jsxs("button",{onClick:e,className:"w-full p-4 bg-red-500/10 text-red-500 rounded-2xl flex items-center justify-center gap-2 font-bold",children:[a.jsx(oo,{size:20})," Logga ut"]})]})},uI=({currentUser:t,themeMode:e="dark"})=>{var A,T,E;const[r,n]=N.useState("list"),[s,i]=N.useState(null),o=e==="light",l={bg:o?"bg-white":"bg-[#0F0F11]",cardBg:o?"bg-white border border-gray-100 shadow-sm":"bg-[#1C1C1E]",text:o?"text-gray-900":"text-white",bubbleOut:o?"bg-indigo-600 text-white":"bg-[#FF6D5A] text-white",bubbleIn:o?"bg-gray-100 text-gray-900":"bg-[#2C2C2E] text-white"},[c,d]=N.useState({}),[u,h]=N.useState(!0),[f,g]=N.useState(""),[x,m]=N.useState(""),[p,b]=N.useState([]),[v,y]=N.useState(null);N.useEffect(()=>{w()},[]);const w=async()=>{h(!0);try{const[C,z]=await Promise.all([O.messages.getInbox(),O.messages.getSent()]),M=Array.isArray(C)?C:[],F=Array.isArray(z)?z:[],D={};M.forEach(L=>{var $;const K=(($=L.sender)==null?void 0:$.id)||L.senderId;K&&(D[K]||(D[K]={user:L.sender||{id:K,name:L.senderName||"Oknd"},messages:[]}),D[K].messages.push({...L,direction:"in"}))}),F.forEach(L=>{var $;const K=(($=L.recipient)==null?void 0:$.id)||L.recipientId;K&&(D[K]||(D[K]={user:L.recipient||{id:K,name:L.recipientName||"Oknd"},messages:[]}),D[K].messages.push({...L,direction:"out"}))}),Object.values(D).forEach(L=>{L.messages.sort((K,$)=>new Date(K.createdAt)-new Date($.createdAt)),L.lastMessage=L.messages[L.messages.length-1]}),d(D)}catch(C){console.error("Failed to load messages",C)}finally{h(!1)}},k=C=>{i(C),n("chat")},j=async()=>{const C=r==="chat"?s.user:v,z=f;if(!(!C||!z))try{const M={id:Date.now(),content:z,subject:"Snabbsvar",direction:"out",createdAt:new Date().toISOString(),sender:t};if(r==="chat"){const F={...s};F.messages.push(M),i(F),g("")}await O.messages.send({recipientId:C.id,subject:"Meddelande",content:z}),w(),r==="new"&&(n("list"),y(null),g(""))}catch(M){console.error(M),alert("Kunde inte skicka.")}},_=async C=>{if(m(C),C.length<2){b([]);return}try{const z=await O.users.search(C);b(z.content||z||[])}catch(z){console.error("Search failed",z)}},S=Object.values(c).sort((C,z)=>new Date(z.lastMessage.createdAt)-new Date(C.lastMessage.createdAt));return a.jsxs("div",{className:`${l.bg} h-full flex flex-col pt-14 pb-24 relative`,children:[a.jsxs("div",{className:"px-6 flex justify-between items-center mb-4",children:[r==="list"&&a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:`text-3xl font-bold ${l.text}`,children:"Meddelanden"}),a.jsx("button",{onClick:()=>n("new"),className:"bg-[#FF6D5A] p-3 rounded-full text-white shadow-lg active:scale-95",children:a.jsx(Ql,{size:24})})]}),(r==="chat"||r==="new")&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>n("list"),className:"p-2 bg-white/10 rounded-full text-white",children:a.jsx(Ho,{size:24})}),r==="chat"&&a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"font-bold",children:((A=s==null?void 0:s.user)==null?void 0:A.fullName)||((T=s==null?void 0:s.user)==null?void 0:T.name)}),a.jsx("span",{className:"text-[10px] text-white/50",children:((E=s==null?void 0:s.user)==null?void 0:E.role)||"Anvndare"})]}),r==="new"&&a.jsx("span",{className:"font-bold",children:"Nytt meddelande"}),a.jsx("button",{className:"p-2 opacity-0",children:a.jsx(gK,{size:24})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:[r==="list"&&a.jsxs("div",{className:"space-y-2",children:[u&&a.jsx("p",{className:"text-center opacity-50 mt-10",children:"Laddar konversationer..."}),!u&&S.length===0&&a.jsxs("div",{className:"text-center py-10 opacity-50 flex flex-col items-center",children:[a.jsx(er,{size:48,className:"mb-4 text-white/20"}),a.jsx("p",{children:"Inga meddelanden n."})]}),S.map((C,z)=>a.jsxs("div",{onClick:()=>k(C),className:`p-4 rounded-2xl ${l.cardBg} active:scale-95 transition-transform flex gap-4 cursor-pointer`,children:[a.jsx(Ko,{user:C.user,className:"w-12 h-12 rounded-full"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[a.jsx("h3",{className:`font-bold truncate ${l.text}`,children:C.user.fullName||C.user.name}),a.jsx("span",{className:"text-[10px] text-white/40 whitespace-nowrap ml-2",children:new Date(C.lastMessage.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),a.jsxs("p",{className:`text-sm truncate ${C.lastMessage.direction==="in"&&!C.lastMessage.read?"text-white font-bold":"text-white/60"}`,children:[C.lastMessage.direction==="out"&&a.jsx("span",{className:"text-[#FF6D5A] mr-1",children:"Du:"}),C.lastMessage.content]})]})]},z))]}),r==="chat"&&s&&a.jsxs("div",{className:"space-y-4",children:[s.messages.map((C,z)=>{const M=C.direction==="out";return a.jsx("div",{className:`flex ${M?"justify-end":"justify-start"} animate-in slide-in-from-bottom-2`,children:a.jsxs("div",{className:`max-w-[80%] p-4 rounded-2xl text-sm leading-relaxed shadow-sm ${M?`${l.bubbleOut} rounded-br-none`:`${l.bubbleIn} rounded-bl-none`}`,children:[a.jsx("p",{children:C.content}),a.jsxs("p",{className:`text-[10px] mt-1 text-right ${M?"text-white/70":"text-white/40"}`,children:[new Date(C.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),M&&a.jsx(Gr,{size:12,className:"inline ml-1 opacity-70"})]})]})},z)}),a.jsx("div",{className:"h-16"})]}),r==="new"&&a.jsx("div",{className:`${l.cardBg} p-6 rounded-[32px] space-y-6`,children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold uppercase text-gray-500 ml-1",children:"Till"}),v?a.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ko,{user:v,className:"w-8 h-8 rounded-full"}),a.jsx("span",{className:"font-bold text-white",children:v.fullName||v.name})]}),a.jsx("button",{onClick:()=>y(null),children:a.jsx(Je,{size:18,className:"text-white opacity-50"})})]}):a.jsxs("div",{className:"relative",children:[a.jsx(gr,{className:"absolute left-4 top-3.5 text-gray-500",size:18}),a.jsx("input",{type:"text",value:x,onChange:C=>_(C.target.value),placeholder:"Sk mottagare...",className:"w-full bg-white/10 text-white placeholder:text-gray-500 p-3 pl-10 rounded-xl outline-none focus:ring-1 focus:ring-[#FF6D5A]"}),p.length>0&&a.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#2C2C2E] rounded-xl shadow-2xl z-10 max-h-48 overflow-y-auto border border-white/10",children:p.map(C=>a.jsxs("button",{onClick:()=>{y(C),b([]),m("")},className:"w-full text-left p-3 hover:bg-white/5 flex items-center gap-3 border-b border-white/5 last:border-0 border-white/10",children:[a.jsx(Ko,{user:C,className:"w-8 h-8 rounded-full"}),a.jsx("span",{className:"text-sm font-bold text-white",children:C.fullName||C.name})]},C.id))})]})]})})]}),(r==="chat"||r==="new")&&a.jsx("div",{className:"fixed bottom-24 left-4 right-4 z-50",children:a.jsxs("div",{className:"bg-[#1C1C1E]/90 backdrop-blur-md p-2 rounded-[28px] border border-white/10 flex items-end gap-2 shadow-2xl",children:[a.jsx("textarea",{value:f,onChange:C=>g(C.target.value),placeholder:"Skriv ett meddelande...",className:"flex-1 bg-transparent text-white p-4 max-h-32 min-h-[56px] resize-none outline-none placeholder:text-gray-500"}),a.jsx("button",{onClick:j,disabled:!f.trim()||r==="new"&&!v,className:"bg-[#FF6D5A] w-12 h-12 rounded-full flex items-center justify-center text-white mb-1 shadow-lg disabled:opacity-50 disabled:shadow-none transition-all active:scale-95",children:a.jsx(Wr,{size:20,className:f.trim()?"ml-1":""})})]})})]})},dtt=({currentView:t,setView:e,onMenuClick:r,unreadCount:n=0})=>a.jsx("div",{className:"fixed bottom-6 left-0 right-0 z-[9999] flex justify-center pointer-events-none",children:a.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-[30px] px-6 py-4 shadow-[0_20px_50px_rgba(31,34,53,0.3)] flex items-center gap-6 pointer-events-auto border border-white/20",children:[a.jsx("button",{onClick:()=>e("dashboard"),className:`transition-colors active:scale-95 ${t==="dashboard"?"text-[#1F2235]":"text-gray-400"}`,children:a.jsx(rw,{size:24,strokeWidth:2.5})}),a.jsx("button",{onClick:()=>e("courses"),className:`transition-colors active:scale-95 ${t==="courses"?"text-[#1F2235]":"text-gray-400"}`,children:a.jsx(gt,{size:24,strokeWidth:2.5})}),a.jsxs("button",{onClick:()=>e("communication"),className:`transition-colors active:scale-95 relative ${t==="communication"?"text-[#1F2235]":"text-gray-400"}`,children:[a.jsx(er,{size:24,strokeWidth:2.5}),n>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[#FF6D5A] rounded-full border border-white"})]}),a.jsx("button",{onClick:()=>e("resources"),className:`transition-colors active:scale-95 ${t==="resources"?"text-[#1F2235]":"text-gray-400"}`,children:a.jsx(tw,{size:24,strokeWidth:2.5})}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-[#1F2235] transition-colors active:scale-95 px-2",children:a.jsx(sw,{size:24,strokeWidth:2.5})})]})}),utt=({isOpen:t,onClose:e,onLogout:r,onThemeChange:n})=>t?a.jsx("div",{className:"fixed inset-0 z-[10000] bg-[#1F2235]/90 backdrop-blur-sm flex items-end sm:items-center justify-center p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[32px] p-6 space-y-4 shadow-2xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-[#1F2235]",children:"Menu"}),a.jsx("button",{onClick:e,className:"p-2 bg-gray-100 rounded-full text-gray-500",children:a.jsx(Je,{size:20})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"p-4 bg-gray-50 rounded-2xl",children:a.jsx(lI,{})}),a.jsxs("button",{onClick:r,className:"w-full p-4 bg-red-50 text-red-500 rounded-2xl flex items-center gap-3 mt-4 font-bold",children:[a.jsx(oo,{size:20}),"Log out"]})]})]})}):null;let htt=class extends ae.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){var e,r;return this.state.hasError?a.jsxs("div",{className:"p-8 text-center text-red-500 bg-black min-h-screen pt-20 overflow-y-auto",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Cosmic Crash "}),a.jsxs("div",{className:"text-left bg-red-900/20 p-4 rounded border border-red-500/30",children:[a.jsx("p",{className:"font-bold mb-2 text-red-400",children:(e=this.state.error)==null?void 0:e.toString()}),a.jsx("pre",{className:"text-[10px] text-red-300/70 whitespace-pre-wrap font-mono",children:(r=this.state.error)==null?void 0:r.stack})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-3 bg-white text-black rounded-full font-bold w-full",children:"Retry Launch"})]}):this.props.children}};const ftt=({users:t})=>a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in slide-in-from-bottom-4 pb-32",children:[a.jsx("h2",{className:"text-2xl font-bold text-[#1F2235]",children:"Members"}),a.jsx("div",{className:"space-y-3",children:t.map((e,r)=>{var n;return a.jsxs("div",{className:"bg-white p-4 rounded-2xl flex items-center gap-4 shadow-sm border border-gray-100",children:[a.jsx(Ko,{user:e,className:"w-12 h-12 rounded-2xl text-base shadow-sm bg-gray-50 dark:bg-gray-800"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-[#1F2235]",children:e.fullName||e.name}),a.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold tracking-wider",children:((n=e.role)==null?void 0:n.name)||e.role})]})]},r)})})]}),gtt=({courses:t,onCourseClick:e})=>a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in slide-in-from-bottom-4 pb-32",children:[a.jsx("h2",{className:"text-2xl font-bold text-[#1F2235]",children:"Courses"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map((r,n)=>a.jsxs("div",{onClick:()=>e(r),className:`p-4 rounded-3xl flex flex-col justify-between h-40 cursor-pointer active:scale-95 transition-all ${n%2===0?"bg-[#E6F5FA]":"bg-[#F0FDF4]"}`,children:[a.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm text-[#1F2235]",children:a.jsx(gt,{size:18})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-[#1F2235] leading-tight mb-1 line-clamp-2",children:r.name}),a.jsx("p",{className:"text-xs font-bold opacity-50",children:r.code})]})]},n))})]}),mtt=({currentUser:t})=>{const{t:e}=nt(),r=Et(),{getCustomTheme:n,updateBranding:s}=io(),[i,o]=N.useState(!1),[l,c]=N.useState("dashboard"),[d,u]=N.useState(null),[h,f]=N.useState("All topics"),[g,x]=N.useState([]),[m,p]=N.useState([]),[b,v]=N.useState({unreadMessages:0});N.useEffect(()=>{(async()=>{var S;if(t)try{const A=(t==null?void 0:t.role)==="STUDENT"||((S=t==null?void 0:t.role)==null?void 0:S.name)==="STUDENT",[T,E,C]=await Promise.all([O.users.getAll(0,100),A?O.courses.getMyCourses(t.id):O.courses.getAll(),O.messages.getUnreadCount()]);x((T==null?void 0:T.content)||T||[]),p(Array.isArray(E)?E:(E==null?void 0:E.content)||[]),v({unreadMessages:C||0})}catch(A){console.error(A)}})()},[t]);const y=()=>r("/logout"),w=async _=>{try{const S=n()||{},A={...S,mobile:{...S.mobile,id:_}};await s({customTheme:JSON.stringify(A)}),window.location.reload()}catch(S){console.error(S)}},k=_=>{u(_),c("course")};return(()=>{if(!(t!=null&&t.profilePictureUrl))return null;let _=t.profilePictureUrl;return _.includes("minio:9000")&&(_=_.replace("minio:9000","localhost:9000")),_.startsWith("http")?_:`${window.location.origin}${_}`})(),a.jsx(htt,{children:a.jsxs("div",{className:"bg-[#F8F9FB] dark:bg-[#111827] min-h-screen text-[#1F2235] dark:text-white pb-24 font-sans selection:bg-indigo-100",children:[a.jsx(utt,{isOpen:i,onClose:()=>o(!1),onLogout:y,onThemeChange:w}),a.jsxs("div",{className:"px-6 pt-12 pb-6 flex justify-between items-start bg-white/50 backdrop-blur-sm sticky top-0 z-40",children:[a.jsxs("div",{className:"flex items-center gap-4",onClick:()=>c("profile"),children:[a.jsx(Ko,{user:t,className:"w-12 h-12 rounded-2xl text-base shadow-sm bg-gray-200"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Hello,"}),a.jsx("h1",{className:"text-xl font-bold leading-tight",children:(t==null?void 0:t.fullName)||(t==null?void 0:t.name)||"Student"})]})]}),a.jsxs("button",{onClick:()=>c("communication"),className:"p-2 relative bg-white dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/10 shadow-sm transition-transform active:scale-95",children:[a.jsx(hh,{size:20}),b.unreadMessages>0&&a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border border-white"})]})]}),l==="users"&&a.jsx(ftt,{users:g}),l==="courses"&&a.jsx(gtt,{courses:m,onCourseClick:k}),l==="course"&&a.jsx(oI,{course:d,onBack:()=>c("courses")}),l==="dashboard"&&a.jsx(iI,{currentUser:t,setView:c}),l==="resources"&&a.jsx(cI,{currentUser:t}),l==="calendar"&&a.jsx(hQ,{}),l==="admin"&&a.jsx(fQ,{}),l==="analytics"&&a.jsx(gQ,{}),l==="profile"&&a.jsx(dI,{currentUser:t,onLogout:y}),l==="communication"&&a.jsx(uI,{currentUser:t}),l==="grading"&&a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in pb-32",children:[a.jsx("h2",{className:"text-3xl font-bold text-[#1F2235]",children:"Grading"}),a.jsx("button",{onClick:()=>c("dashboard"),className:"mt-4 text-sm font-bold underline text-gray-500",children:"Back"})]}),l==="applications"&&a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in pb-32",children:[a.jsx("h2",{className:"text-3xl font-bold text-[#1F2235]",children:"Applications"}),a.jsx("button",{onClick:()=>c("dashboard"),className:"mt-4 text-sm font-bold underline text-gray-500",children:"Back"})]}),a.jsx(dtt,{currentView:l,setView:c,onMenuClick:()=>o(!0),unreadCount:b.unreadMessages})]})})},ptt=({currentView:t,setView:e,onMenuClick:r,unreadCount:n=0})=>a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[9999] bg-white border-t border-gray-100 px-6 py-3 pb-6 flex justify-between items-center text-gray-400",children:[a.jsxs("button",{onClick:()=>e("dashboard"),className:`flex flex-col items-center gap-1 ${t==="dashboard"?"text-indigo-600":""}`,children:[a.jsx(rw,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"Home"})]}),a.jsxs("button",{onClick:()=>e("courses"),className:`flex flex-col items-center gap-1 ${t==="courses"?"text-indigo-600":""}`,children:[a.jsx(gt,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"Courses"})]}),a.jsxs("button",{onClick:()=>e("communication"),className:`relative flex flex-col items-center gap-1 ${t==="communication"?"text-indigo-600":""}`,children:[a.jsx(er,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"Chat"}),n>0&&a.jsx("span",{className:"absolute top-0 right-2 w-2.5 h-2.5 bg-red-500 rounded-full border border-white"})]}),a.jsxs("button",{onClick:()=>e("resources"),className:`flex flex-col items-center gap-1 ${t==="resources"?"text-indigo-600":""}`,children:[a.jsx(tw,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"Files"})]}),a.jsxs("button",{onClick:r,className:"flex flex-col items-center gap-1",children:[a.jsx(sw,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"Menu"})]})]}),xtt=({isOpen:t,onClose:e,onLogout:r,onThemeChange:n})=>t?a.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 backdrop-blur-sm flex justify-end animate-in slide-in-from-right",children:a.jsxs("div",{className:"bg-white w-3/4 max-w-sm h-full p-6 space-y-6 shadow-2xl",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"EduFlex Fresh"}),a.jsx("button",{onClick:e,children:a.jsx(Je,{size:24,className:"text-gray-400"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"space-y-2",children:a.jsx(lI,{})}),a.jsxs("button",{onClick:r,className:"w-full flex items-center gap-2 text-red-600 font-bold mt-4",children:[a.jsx(oo,{size:20})," Logout"]})]})]})}):null;let btt=class extends ae.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){var e;return this.state.hasError?a.jsxs("div",{className:"p-8 text-center text-red-600 bg-white min-h-screen pt-20",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"App Error"}),a.jsx("pre",{className:"text-xs bg-red-50 p-4 rounded text-left overflow-auto max-w-sm mx-auto border border-red-100 text-red-800",children:(e=this.state.error)==null?void 0:e.toString()}),a.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold",children:"Reload"})]}):this.props.children}};const ytt=({users:t})=>a.jsxs("div",{className:"px-6 pt-6 pb-32 animate-in fade-in",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"People"}),a.jsx("div",{className:"space-y-4",children:t.map((e,r)=>{var n;return a.jsxs("div",{className:"flex items-center gap-4 border-b border-gray-100 pb-4",children:[a.jsx(Ko,{user:e,className:"w-10 h-10 rounded-full text-base"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900",children:e.fullName||e.name}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:((n=e.role)==null?void 0:n.name)||e.role})]})]},r)})})]}),vtt=({courses:t,onCourseClick:e})=>a.jsxs("div",{className:"px-6 pt-6 pb-32 animate-in fade-in",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"All Courses"}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.map((r,n)=>a.jsxs("div",{onClick:()=>e(r),className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm active:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:a.jsx(gt,{size:20})}),a.jsx("span",{className:"text-xs font-bold text-gray-400",children:r.code})]}),a.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-1",children:r.name}),a.jsx("p",{className:"text-sm text-gray-500",children:"View details "})]},n))})]}),av=({currentUser:t})=>{const e=Et(),{getCustomTheme:r,updateBranding:n}=io(),[s,i]=N.useState("dashboard"),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState([]),[f,g]=N.useState([]),[x,m]=N.useState(!0),[p,b]=N.useState({unreadMessages:0});N.useEffect(()=>{(async()=>{var k;if(t)try{const j=(t==null?void 0:t.role)==="STUDENT"||((k=t==null?void 0:t.role)==null?void 0:k.name)==="STUDENT",[_,S,A]=await Promise.all([O.users.getAll(0,100),j?O.courses.getMyCourses(t.id):O.courses.getAll(),O.messages.getUnreadCount()]);h((_==null?void 0:_.content)||_||[]),g(Array.isArray(S)?S:(S==null?void 0:S.content)||[]),b({unreadMessages:A||0})}catch(j){console.error(j)}finally{m(!1)}})()},[t]);const v=async w=>{try{const k=r()||{},j={...k,mobile:{...k.mobile,id:w}};await n({customTheme:JSON.stringify(j)}),window.location.reload()}catch(k){console.error(k)}},y=w=>{d(w),i("course")};return a.jsx(btt,{children:a.jsxs("div",{className:"bg-white min-h-screen text-gray-900 font-sans selection:bg-indigo-100 pb-20",children:[a.jsx(xtt,{isOpen:o,onClose:()=>l(!1),onLogout:()=>e("/login"),onThemeChange:v}),s==="users"&&a.jsx(ytt,{users:u}),s==="courses"&&a.jsx(vtt,{courses:f,onCourseClick:y}),s==="course"&&a.jsx(oI,{course:c,onBack:()=>i("courses")}),s==="resources"&&a.jsx(cI,{currentUser:t,themeMode:"light"}),s==="communication"&&a.jsx(uI,{currentUser:t,themeMode:"light"}),s==="profile"&&a.jsx(dI,{currentUser:t,onLogout:()=>e("/login")}),s==="dashboard"&&a.jsx(iI,{currentUser:t,setView:i,themeMode:"light"}),s==="grading"&&a.jsxs("div",{className:"px-6 pt-6 pb-32 animate-in fade-in",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Grading"}),a.jsx("button",{onClick:()=>i("dashboard"),className:"text-indigo-600 font-bold",children:"Back"})]}),s==="applications"&&a.jsxs("div",{className:"px-6 pt-6 pb-32 animate-in fade-in",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Applications"}),a.jsx("button",{onClick:()=>i("dashboard"),className:"text-indigo-600 font-bold",children:"Back"})]}),a.jsx(ptt,{currentView:s,setView:i,onMenuClick:()=>l(!0),unreadCount:p.unreadMessages})]})})},ktt=({currentView:t,setView:e,onMenuClick:r,unreadCount:n=0})=>a.jsx("div",{className:"fixed bottom-6 left-0 right-0 z-[9999] flex justify-center pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[30px] px-6 py-4 shadow-[0_20px_50px_rgba(0,0,0,0.3)] flex items-center gap-6 pointer-events-auto",children:[a.jsx("button",{onClick:()=>e("dashboard"),className:`transition-colors active:scale-95 ${t==="dashboard"?"text-black":"text-gray-400"}`,children:a.jsx(rw,{size:24,strokeWidth:2.5})}),a.jsx("button",{onClick:()=>e("courses"),className:`transition-colors active:scale-95 ${t==="courses"?"text-black":"text-gray-400"}`,children:a.jsx(gt,{size:24,strokeWidth:2.5})}),a.jsxs("button",{onClick:()=>e("communication"),className:`transition-colors active:scale-95 relative ${t==="communication"?"text-black":"text-gray-400"}`,children:[a.jsx(er,{size:24,strokeWidth:2.5}),n>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[#FF6D5A] rounded-full border border-white"})]}),a.jsx("button",{onClick:()=>e("resources"),className:`transition-colors active:scale-95 ${t==="resources"?"text-black":"text-gray-400"}`,children:a.jsx(tw,{size:24,strokeWidth:2.5})}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-black transition-colors active:scale-95",children:a.jsx(u5,{size:24,strokeWidth:2.5})})]})}),wtt=({isOpen:t,onClose:e,onLogout:r,onThemeChange:n,setView:s})=>t?a.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-[#1C1C1E] w-full max-w-sm rounded-[32px] p-6 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Meny"}),a.jsx("button",{onClick:e,className:"p-2 bg-white/10 rounded-full",children:a.jsx(Je,{size:20})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[a.jsxs("button",{onClick:()=>{s("calendar"),e()},className:"p-4 bg-indigo-500/20 rounded-2xl flex flex-col items-center gap-2 text-indigo-400",children:[a.jsx(zt,{size:24}),a.jsx("span",{className:"text-xs font-bold",children:"Kalender"})]}),a.jsxs("button",{onClick:()=>{s("users"),e()},className:"p-4 bg-pink-500/20 rounded-2xl flex flex-col items-center gap-2 text-pink-400",children:[a.jsx(vt,{size:24}),a.jsx("span",{className:"text-xs font-bold",children:"Anvndare"})]})]}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl",children:[a.jsx("h4",{className:"text-white/50 text-xs font-bold uppercase mb-3",children:"Utseende"}),a.jsx(lI,{})]})}),a.jsxs("button",{className:"w-full p-4 bg-white/5 rounded-2xl flex items-center gap-3 text-white",children:[a.jsx(ow,{size:20}),a.jsx("span",{className:"font-bold flex-1 text-left",children:"Dark Mode"}),a.jsx("div",{className:"bg-green-500 text-xs px-2 py-1 rounded font-bold text-black",children:"P"})]}),a.jsxs("button",{onClick:r,className:"w-full p-4 bg-red-500/10 text-red-500 rounded-2xl flex items-center gap-3 mt-4",children:[a.jsx(oo,{size:20}),a.jsx("span",{className:"font-bold",children:"Logga ut"})]})]})}):null;class jtt extends ae.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Uncaught error:",e,r)}render(){var e,r;return this.state.hasError?a.jsxs("div",{className:"p-8 text-center text-red-500 bg-black min-h-screen pt-20 overflow-y-auto",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Ngot gick fel "}),a.jsxs("div",{className:"text-left bg-red-900/20 p-4 rounded border border-red-500/30",children:[a.jsx("p",{className:"font-bold mb-2 text-red-400",children:(e=this.state.error)==null?void 0:e.toString()}),a.jsx("pre",{className:"text-[10px] text-red-300/70 whitespace-pre-wrap font-mono",children:(r=this.state.error)==null?void 0:r.stack})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-3 bg-white text-black rounded-full font-bold w-full",children:"Frsk igen"})]}):this.props.children}}const C9=({users:t,loading:e})=>a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in slide-in-from-bottom-4 pb-32",children:[a.jsx("h2",{className:"text-3xl font-bold",children:"Anvndare"}),a.jsxs("div",{className:"relative",children:[a.jsx(gr,{className:"absolute left-4 top-4 text-gray-500",size:20}),a.jsx("input",{type:"text",placeholder:"Sk anvndare...",className:"w-full bg-[#1C1C1E] py-4 pl-12 pr-4 rounded-2xl text-white outline-none focus:ring-2 ring-[#FF6D5A]"})]}),a.jsx("div",{className:"space-y-3",children:e?a.jsx("p",{className:"text-center opacity-50 p-4",children:"Laddar..."}):t.map((r,n)=>{var s;return a.jsxs("div",{className:"bg-[#1C1C1E] p-4 rounded-2xl flex items-center gap-4",children:[a.jsx(Ko,{user:r,className:"w-12 h-12 rounded-full text-base bg-gray-700"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-white",children:r.fullName||r.name}),a.jsx("p",{className:"text-xs text-white/50 font-bold tracking-wider capitalize",children:(((s=r.role)==null?void 0:s.name)||r.role||"").toLowerCase()})]})]},n)})})]}),Ntt=({courses:t,currentUser:e,onCourseClick:r})=>{var i;const n=["#FFCE47","#A78BFA","#4ADE80","#60A5FA","#F472B6","#FF6D5A"],s=(e==null?void 0:e.role)==="ADMIN"||((i=e==null?void 0:e.role)==null?void 0:i.name)==="ADMIN";return a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in slide-in-from-bottom-4 pb-32",children:[a.jsx("h2",{className:"text-3xl font-bold",children:s?"Alla kurser":"Mina kurser"}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:t.map((o,l)=>{const c=n[l%n.length];return a.jsxs("div",{onClick:()=>r(o),style:{backgroundColor:c},className:"cursor-pointer text-black p-5 rounded-[28px] relative overflow-hidden transition-all active:scale-95 shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("span",{className:"bg-black/10 px-3 py-1 rounded-full text-xs font-bold backdrop-blur-sm",children:"Active"}),a.jsx("div",{className:"bg-white/40 p-2 rounded-full",children:a.jsx(gt,{size:20,className:"opacity-70"})})]}),a.jsx("h3",{className:"text-2xl font-bold leading-tight mb-1",children:o.name}),a.jsx("p",{className:"font-medium opacity-60 text-sm",children:o.code||"NO-CODE"}),a.jsxs("div",{className:"mt-6 flex items-center gap-2",children:[a.jsx("div",{className:"flex -space-x-2",children:[1,2,3].map(d=>a.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 border-2",style:{borderColor:c}},d))}),a.jsx("span",{className:"text-xs font-bold opacity-60 ml-2",children:"+12 studenter"})]})]},l)})})]})},_tt=({currentUser:t})=>{var _;const e=Et(),{getCustomTheme:r,updateBranding:n}=io(),[s,i]=N.useState(!1),[o,l]=N.useState("dashboard"),[c,d]=N.useState(null),[u,h]=N.useState(!0),[f,g]=N.useState([]),[x,m]=N.useState([]),[p,b]=N.useState({unreadMessages:0});N.useEffect(()=>{(async()=>{var A;if(t)try{const T=((A=t.role)==null?void 0:A.name)==="STUDENT"||t.role==="STUDENT",[E,C,z]=await Promise.all([O.users.getAll(0,100),T?O.courses.getMyCourses(t.id):O.courses.getAll(),O.messages.getUnreadCount()]);g(E.content||E||[]),m(C||[]),b({unreadMessages:z||0}),h(!1)}catch(T){console.error("Data load failed",T),h(!1)}})()},[t]);const v=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login")},y=async S=>{try{const A=r()||{},T={...A,mobile:{...A.mobile,id:S}};await n({customTheme:JSON.stringify(T)}),window.location.reload()}catch(A){console.error("Failed to switch theme",A)}},w=(((_=t==null?void 0:t.role)==null?void 0:_.name)||(t==null?void 0:t.role)||"User").toLowerCase(),k=(t==null?void 0:t.fullName)||(t==null?void 0:t.name)||"Anvndare",j=S=>{d(S),l("course")};return a.jsx(jtt,{children:a.jsxs("div",{className:"min-h-screen bg-[#0F0F11] text-white font-sans selection:bg-[#FF6D5A] pb-32",children:[a.jsx(wtt,{isOpen:s,onClose:()=>i(!1),onLogout:v,onThemeChange:y,setView:l}),a.jsx("div",{className:"relative z-40 bg-[#0F0F11] pt-12 pb-4 px-6",children:a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",onClick:()=>l("profile"),children:[a.jsx("button",{className:"w-12 h-12 rounded-full overflow-hidden border border-white/10 active:scale-95 transition-all relative ring-2 ring-transparent active:ring-white/20",children:a.jsx(Ko,{user:t,className:"w-full h-full text-base"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold tracking-tight text-white leading-tight",children:k}),a.jsx("p",{className:"text-sm font-medium text-white/50 lowercase",children:w})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>l("communication"),className:"w-12 h-12 rounded-full border border-white/10 flex items-center justify-center text-white/50 hover:bg-white/10 active:scale-95 transition-all",children:a.jsx(hh,{size:22})}),p.unreadMessages>0&&a.jsx("span",{className:"absolute top-0 right-0 w-5 h-5 bg-[#FF6D5A] border-2 border-[#0F0F11] rounded-full text-[10px] font-bold flex items-center justify-center",children:p.unreadMessages})]}),a.jsx("button",{onClick:()=>l("search"),className:"w-12 h-12 rounded-full border border-white/10 flex items-center justify-center text-white/50 hover:bg-white/10 active:scale-95 transition-all",children:a.jsx(gr,{size:22})})]})]})}),o==="dashboard"&&a.jsx(iI,{currentUser:t,setView:l}),o==="users"&&a.jsx(C9,{users:f,loading:u}),o==="courses"&&a.jsx(Ntt,{courses:x,currentUser:t,onCourseClick:j}),o==="course"&&a.jsx(oI,{course:c,onBack:()=>l("courses")}),o==="resources"&&a.jsx(cI,{currentUser:t}),o==="calendar"&&a.jsx(hQ,{}),o==="admin"&&a.jsx(fQ,{}),o==="analytics"&&a.jsx(gQ,{}),o==="profile"&&a.jsx(dI,{currentUser:t,onLogout:v}),o==="communication"&&a.jsx(uI,{currentUser:t}),o==="search"&&a.jsx(C9,{users:f,loading:u}),o==="grading"&&a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in pb-32",children:[a.jsx("h2",{className:"text-3xl font-bold",children:"Rttning"}),a.jsx("button",{onClick:()=>l("dashboard"),className:"mt-4 text-sm font-bold underline",children:"Tillbaka"})]}),o==="applications"&&a.jsxs("div",{className:"px-6 space-y-4 pt-4 animate-in fade-in pb-32",children:[a.jsx("h2",{className:"text-3xl font-bold",children:"Anskningar"}),a.jsx("button",{onClick:()=>l("dashboard"),className:"mt-4 text-sm font-bold underline",children:"Tillbaka"})]}),a.jsx(ktt,{currentView:o,setView:l,onMenuClick:()=>i(!0),unreadCount:p.unreadMessages})]})})},T9=t=>{const{getCustomTheme:e}=io(),r=e(),n=(r==null?void 0:r.mobile)||{},s=n.enabledThemes||["finsights-dark","cosmic-growth","eduflex-fresh"],i=localStorage.getItem("active_mobile_theme"),o=n.id||"finsights-dark";let l=i&&s.includes(i)?i:o;!s.includes(l)&&s.length>0&&(l=s[0]);const c="fixed inset-0 z-[9999] bg-[#0F0F11] overflow-y-auto overflow-x-hidden",d=u=>a.jsx("div",{className:c,children:a.jsx(u,{...t})});switch(l){case"finsights-dark":return d(_tt);case"cosmic-growth":return d(mtt);case"eduflex-fresh":return a.jsx(av,{...t});case"midnight-glass":return a.jsx(av,{...t});case"clean-light":return a.jsx(av,{...t});default:return a.jsx(av,{...t})}},Stt=({currentUser:t,myCourses:e})=>{var i,o;const[r,n]=N.useState(window.innerWidth<1024);if(N.useEffect(()=>{const l=()=>n(window.innerWidth<1024);return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),!t)return a.jsx("div",{className:"flex h-screen items-center justify-center",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:40})});const s=((i=t.role)==null?void 0:i.defaultDashboard)||((o=t.role)==null?void 0:o.name)||t.role;switch(s){case"ADMIN":return r?a.jsx(T9,{currentUser:t,myCourses:e||[]}):a.jsx(bwe,{});case"PRINCIPAL":return a.jsx(yW,{});case"GUARDIAN":return a.jsx(tTe,{currentUser:t});case"HALSOTEAM":return a.jsx(uQ,{});case"MENTOR":return a.jsx(Zet,{});case"TEACHER":return a.jsx(yje,{currentUser:t,myCourses:e||[]});case"STUDENT":return r?a.jsx(T9,{currentUser:t,myCourses:e||[]}):a.jsx(gAe,{currentUser:t,myCourses:e||[]});default:return a.jsxs("div",{className:"flex h-screen items-center justify-center flex-col p-4 text-center",children:[a.jsx(Er,{className:"text-red-500 mb-4",size:48}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Behrighet saknas"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:["Din anvndarroll ",a.jsxs("strong",{children:["(",s,")"]})," har ingen tilldelad instrumentpanel.",a.jsx("br",{}),"Kontakta administratren."]})]})}},Att=({courseId:t})=>{const[e,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(""),[l,c]=N.useState("ALL");N.useEffect(()=>{d()},[t]);const d=async()=>{s(!0);try{const g=await O.activity.getCourseLogs(t);r(g)}catch(g){console.error("Failed to load activity logs",g)}finally{s(!1)}},u=g=>{switch(g){case"VIEW_LESSON":return a.jsx(Xo,{size:16,className:"text-blue-500"});case"DOWNLOAD_FILE":return a.jsx(Rn,{size:16,className:"text-green-500"});case"WATCH_VIDEO":return a.jsx(xi,{size:16,className:"text-red-500"});case"PRACTICE_QUIZ":return a.jsx("span",{className:"text-purple-500 font-bold text-xs border border-purple-200 bg-purple-50 px-1 rounded",children:"AI"});default:return a.jsx(zt,{size:16,className:"text-gray-500"})}},h=g=>{switch(g){case"VIEW_LESSON":return"ppnat lektion";case"DOWNLOAD_FILE":return"Laddat ner fil";case"WATCH_VIDEO":return"Tittat p video";case"COURSE_ACCESS":return"Gtt in i kursen";case"PRACTICE_QUIZ":return"vningsquiz (AI)";default:return g}},f=e.filter(g=>{const x=g.userName.toLowerCase().includes(i.toLowerCase())||g.materialTitle&&g.materialTitle.toLowerCase().includes(i.toLowerCase())||g.details&&g.details.toLowerCase().includes(i.toLowerCase()),m=l==="ALL"||g.activityType===l;return x&&m});return n?a.jsx("div",{className:"flex justify-center p-10",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:32})}):a.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white dark:bg-[#1E1F20] p-4 rounded-xl border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[a.jsx(zt,{className:"text-indigo-600",size:20}),"Aktivitetslogg"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Se vad dina elever gr i kursen i realtid."})]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[a.jsxs("div",{className:"relative flex-1 md:flex-none",children:[a.jsx(gr,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),a.jsx("input",{className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:"Sk student eller material...",value:i,onChange:g=>o(g.target.value)})]}),a.jsxs("select",{className:"border dark:border-[#3c4043] rounded-lg px-3 py-2 text-sm bg-white dark:bg-[#131314] text-gray-900 dark:text-white",value:l,onChange:g=>c(g.target.value),children:[a.jsx("option",{value:"ALL",children:"Alla Aktivitetstyper"}),a.jsx("option",{value:"VIEW_LESSON",children:"ppnat Lektion"}),a.jsx("option",{value:"DOWNLOAD_FILE",children:"Laddat ner Fil"}),a.jsx("option",{value:"WATCH_VIDEO",children:"Tittat p Video"}),a.jsx("option",{value:"PRACTICE_QUIZ",children:"vningsquiz (AI)"})]})]})]}),a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#131314] text-gray-500 dark:text-gray-400 border-b dark:border-[#3c4043]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Tidpunkt"}),a.jsx("th",{className:"p-4",children:"Student"}),a.jsx("th",{className:"p-4",children:"Hndelse"}),a.jsx("th",{className:"p-4",children:"Material / Detaljer"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:f.length>0?f.map(g=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors",children:[a.jsx("td",{className:"p-4 font-mono text-gray-500 dark:text-gray-400 text-xs",children:new Date(g.timestamp).toLocaleString()}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 text-indigo-700 flex items-center justify-center text-xs font-bold",children:g.userName.charAt(0)}),a.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:g.userName})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[u(g.activityType),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:h(g.activityType)})]})}),a.jsxs("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:[g.materialTitle?a.jsx("span",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:g.materialTitle}):a.jsx("span",{className:"italic text-gray-400",children:g.details||"-"}),g.details&&g.materialTitle&&a.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(",g.details,")"]})]})]},g.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-8 text-center text-gray-500 italic",children:"Inga aktiviteter hittades."})})})]})})})]})},Ett=({packageId:t,onClose:e})=>{const{currentUser:r}=At(),[n,s]=N.useState(null),[i,o]=N.useState(!0),[l,c]=N.useState(null),[d,u]=N.useState(!1),[h,f]=N.useState([]),[g,x]=N.useState(!1),[m,p]=N.useState(null),b=N.useRef(null),v=N.useCallback((j,_,...S)=>{const A={id:Date.now()+Math.random(),ver:j,method:_,args:S.map(E=>typeof E=="object"?JSON.stringify(E):String(E)),timestamp:new Date().toLocaleTimeString()};f(E=>[A,...E].slice(0,100));const T=j==="2004"?"#8b5cf6":"#0ea5e9";console.log(`%c[SCORM ${j}] ${_}`,`color: ${T}; font-weight: bold`,...S),(_==="LMSInitialize"||_==="Initialize")&&p(j)},[]),y=N.useCallback(()=>{const j={initialized:!1,terminated:!1,lastError:"0",data:{"cmi.core.lesson_status":"not attempted","cmi.core.entry":"ab-initio","cmi.core.lesson_mode":"normal","cmi.core.credit":"credit","cmi.core.student_name":(r==null?void 0:r.name)||"Student","cmi.core.student_id":(r==null?void 0:r.id)||String((r==null?void 0:r.id)||"user_0"),"cmi.suspend_data":"","cmi.launch_data":"","cmi.mode":"normal","cmi.entry":"ab-initio","cmi.credit":"credit","cmi.completion_status":"unknown","cmi.success_status":"unknown","cmi.learner_name":(r==null?void 0:r.name)||"Learner","cmi.learner_id":String((r==null?void 0:r.id)||"user_0"),"cmi._version":"1.0"}},_={LMSInitialize:E=>(v("1.2","LMSInitialize",E),j.initialized=!0,j.lastError="0","true"),LMSFinish:E=>(v("1.2","LMSFinish",E),j.terminated=!0,"true"),LMSGetValue:E=>{const C=j.data[E]||"";return v("1.2","LMSGetValue",E,"=>",C),C},LMSSetValue:(E,C)=>(v("1.2","LMSSetValue",E,"=",C),j.data[E]=C,"true"),LMSCommit:E=>(v("1.2","LMSCommit",E),"true"),LMSGetLastError:()=>j.lastError,LMSGetErrorString:E=>({0:"No error",404:"Not Implemented"})[E]||"Unknown Error",LMSGetDiagnostic:E=>"No diagnostic"},S={Initialize:E=>(v("2004","Initialize",E),j.initialized=!0,j.lastError="0","true"),Terminate:E=>(v("2004","Terminate",E),j.terminated=!0,"true"),GetValue:E=>{if(!j.initialized)return j.lastError="301","";const C=j.data[E]||"";return v("2004","GetValue",E,"=>",C),C},SetValue:(E,C)=>(v("2004","SetValue",E,"=",C),j.data[E]=C,"true"),Commit:E=>(v("2004","Commit",E),"true"),GetLastError:()=>j.lastError,GetErrorString:E=>"No error",GetDiagnostic:E=>"No diagnostic"},A=()=>{const E=[window];try{window.parent&&window.parent!==window&&E.push(window.parent)}catch{}try{window.top&&window.top!==window&&E.push(window.top)}catch{}try{window.opener&&E.push(window.opener)}catch{}E.forEach(C=>{try{C.API||(C.API=_),C.API_1484_11||(C.API_1484_11=S)}catch{}})},T=setInterval(A,500);return A(),()=>{clearInterval(T);const E=C=>{try{C.API===_&&delete C.API,C.API_1484_11===S&&delete C.API_1484_11}catch{}};E(window);try{window.parent&&E(window.parent)}catch{}try{window.top&&E(window.top)}catch{}try{window.opener&&E(window.opener)}catch{}}},[r,v]);N.useEffect(()=>{const j=y();return t&&(async()=>{try{o(!0);const S=await O.scorm.getOne(t);s(S)}catch(S){console.error("Failed to fetch SCORM metadata",S),c(S.message||"Kunde inte ladda modulens metadata.")}finally{o(!1)}})(),j},[t,y]);const w=()=>{document.fullscreenElement?(document.exitFullscreen(),u(!1)):(b.current.requestFullscreen(),u(!0))};if(i)return a.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gray-50 dark:bg-[#131314] min-h-[500px]",children:[a.jsx(ft,{className:"animate-spin text-indigo-600 mb-4",size:48}),a.jsx("p",{className:"text-gray-500 font-medium animate-pulse",children:"Laddar interaktiv modul..."})]});if(l||!n)return a.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gray-50 dark:bg-[#131314] p-6 min-h-[500px]",children:[a.jsx(Er,{className:"text-red-500 mb-4",size:64}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Ett fel uppstod"}),a.jsx("p",{className:"text-gray-500 mb-6",children:l||"Modulen kunde inte hittas."}),a.jsx("div",{className:"text-xs text-gray-400 font-mono bg-gray-100 dark:bg-[#1e1e1e] p-4 rounded-lg max-w-lg overflow-auto",children:"Tip: Ensure the SCORM package contains a valid 'imsmanifest.xml' and is zipped correctly."}),a.jsx("button",{onClick:e,className:"mt-6 px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:"Stng"})]});const k=`${window.location.origin}/api/files/${n.directoryPath}${n.launchFile}`;return a.jsxs("div",{ref:b,className:"h-full w-full flex flex-col bg-white dark:bg-[#1e1e1e] overflow-hidden relative",children:[a.jsxs("header",{className:"h-14 flex items-center justify-between px-6 bg-white dark:bg-[#131314] border-b border-gray-200 dark:border-[#3c4043] shrink-0 z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-1.5 bg-indigo-100 dark:bg-indigo-900/20 text-indigo-600 rounded-lg",children:a.jsx(V0,{size:16})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-bold text-gray-900 dark:text-white text-sm line-clamp-1",children:n.title}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[9px] uppercase font-black tracking-widest text-gray-500",children:"Universal SCORM Runtime"}),m&&a.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded ${m==="2004"?"bg-violet-100 text-violet-700":"bg-sky-100 text-sky-700"}`,children:m==="2004"?"SCORM 2004":"SCORM 1.2"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("button",{onClick:()=>x(!g),className:`p-2 rounded-lg transition-colors flex items-center gap-2 ${g?"bg-indigo-50 text-indigo-600":"hover:bg-gray-100 dark:hover:bg-[#282a2c] text-gray-500"}`,title:"Visa debug-logg",children:[a.jsx(hs,{size:18}),h.length>0&&a.jsx("span",{className:"text-xs font-bold",children:h.length})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"p-2 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-lg text-gray-500",title:"Ladda om",children:a.jsx(sn,{size:18})}),a.jsx("button",{onClick:w,className:"p-2 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-lg text-gray-500",title:"Fullskrm",children:d?a.jsx(iw,{size:18}):a.jsx(aw,{size:18})}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-500 hover:text-red-500 rounded-lg ml-2",title:"Stng",children:a.jsx(Je,{size:20})})]})]}),a.jsx("div",{className:"absolute top-14 left-0 right-0 h-1 bg-indigo-600/10 z-20",children:a.jsx("div",{className:"h-full bg-indigo-600 animate-[loading_2s_ease-in-out_infinite] w-1/3"})}),a.jsxs("main",{className:"flex-grow relative bg-gray-100 dark:bg-[#131314]",children:[a.jsx("iframe",{name:"LMSFrame",id:"LMSFrame",src:k,className:"w-full h-full border-0 absolute inset-0 bg-white",title:n.title,allow:"autoplay; fullscreen; camera; microphone"}),g&&a.jsxs("div",{className:"absolute bottom-4 right-4 w-96 max-h-[500px] bg-[#1a1b1e]/95 backdrop-blur-md text-[#00ff00] font-mono text-[11px] p-4 rounded-xl border border-gray-800 overflow-y-auto z-30 shadow-2xl flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3 border-b border-gray-700 pb-2 sticky top-0 bg-[#1a1b1e/95]",children:[a.jsx("span",{className:"font-bold text-white",children:"SCORM RUNTIME LOGS"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{const j=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),_=URL.createObjectURL(j),S=document.createElement("a");S.href=_,S.download=`scorm-logs-${Date.now()}.json`,S.click()},className:"text-xs text-indigo-400 hover:text-indigo-300",children:"Download"}),a.jsx("button",{onClick:()=>f([]),className:"text-xs text-gray-400 hover:text-white",children:"Clear"})]})]}),a.jsx("div",{className:"flex-grow space-y-1.5",children:h.length===0?a.jsx("div",{className:"text-gray-500 italic text-center py-4",children:"Waiting for SCORM API calls..."}):h.map(j=>a.jsxs("div",{className:"group hover:bg-white/5 p-1 rounded transition-colors break-all",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[a.jsx("span",{className:"text-gray-500 text-[9px]",children:j.timestamp}),a.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${j.ver==="2004"?"bg-violet-500/20 text-violet-300":"bg-sky-500/20 text-sky-300"}`,children:j.ver}),a.jsx("span",{className:"text-white font-semibold",children:j.method})]}),a.jsx("div",{className:"pl-1 text-gray-300 opacity-90 font-mono",children:j.args.join(", ")})]},j.id))})]})]}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes loading {
                    0% { transform: translateX(-100%); }
                    100% { transform: translateX(300%); }
                }
            `}})]})},Ctt=({packageId:t,launchUrl:e,registration:r,onClose:n})=>{const{currentUser:s}=At(),[i,o]=N.useState(!1),[l,c]=N.useState(!1),d=ae.useRef(null);N.useEffect(()=>{t&&(async()=>{try{const p=(s==null?void 0:s.username)||(s==null?void 0:s.email)||"guest";if(!(await fetch("/api/cmi5/init-launch",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({packageId:t,registration:r||t,actor:p})})).ok)throw new Error("Init failed");o(!0)}catch(p){console.error("Failed to init cmi5 launch",p),alert("Kunde inte initiera cmi5-sessionen. (Har du startat om backend?)")}})()},[t,r,s]);const u=()=>{document.fullscreenElement?(document.exitFullscreen(),c(!1)):(d.current.requestFullscreen(),c(!0))};if(!i)return a.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gray-50 dark:bg-[#131314] min-h-[500px]",children:[a.jsx(ft,{className:"animate-spin text-indigo-600 mb-4",size:48}),a.jsx("p",{className:"text-gray-500 font-medium animate-pulse",children:"Initierar cmi5-session..."})]});const h=window.location.origin+"/api/lrs",f=h+"/fetch";console.log("[CMI5] Preparing launch with:",{endpoint:h,fetchUrl:f,packageId:t,registration:r});const g=new URL(e,window.location.origin);g.searchParams.append("endpoint",h),g.searchParams.append("fetch",f),(!r||r==="undefined")&&console.warn("[CMI5] Registration is missing or undefined! Using packageId as fallback.");const x={objectType:"Agent",account:{homePage:window.location.origin,name:(s==null?void 0:s.username)||(s==null?void 0:s.email)||"guest"},name:(s==null?void 0:s.name)||(s==null?void 0:s.username)||"Learner"};return console.log("[CMI5] Actor:",x),g.searchParams.append("actor",JSON.stringify(x)),g.searchParams.append("registration",r&&r!=="undefined"?r:t),g.searchParams.append("activityId",t),a.jsxs("div",{ref:d,className:"h-full w-full flex flex-col bg-white dark:bg-[#1e1e1e] overflow-hidden relative",children:[a.jsxs("header",{className:"h-14 flex items-center justify-between px-6 bg-white dark:bg-[#131314] border-b border-gray-200 dark:border-[#3c4043] shrink-0 z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-1.5 bg-indigo-100 dark:bg-indigo-900/20 text-indigo-600 rounded-lg",children:a.jsx(hs,{size:16})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"font-bold text-gray-900 dark:text-white text-sm line-clamp-1",children:["cmi5 Modul: ",t]}),a.jsxs("span",{className:"text-[9px] uppercase font-black tracking-widest text-green-500 flex items-center gap-1",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),"Connected to Internal LRS"]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:"hidden sm:flex items-center gap-2 mr-4 px-3 py-1 bg-gray-50 dark:bg-[#282a2c] rounded-full text-[10px] text-gray-500 font-mono",children:[a.jsx(zs,{size:10})," ",window.location.host]}),a.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-lg text-gray-500",title:"Fullskrm",children:l?a.jsx(iw,{size:18}):a.jsx(aw,{size:18})}),a.jsx("button",{onClick:n,className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-500 hover:text-red-500 rounded-lg ml-2",title:"Stng",children:a.jsx(Je,{size:20})})]})]}),a.jsx("main",{className:"flex-grow relative bg-gray-100 dark:bg-[#131314]",children:a.jsx("iframe",{src:g.toString(),className:"w-full h-full border-0 absolute inset-0 bg-white",title:"Course Content",allow:"autoplay; fullscreen; camera; microphone"})})]})},Ttt=({courseId:t})=>{const[e,r]=N.useState(null),[n,s]=N.useState(!0),[i,o]=N.useState(null);N.useEffect(()=>{t&&l()},[t]);const l=async()=>{try{s(!0);const u=await O.teacher.getCourseAnalytics(t);r(u)}catch(u){console.error("Failed to load analytics",u),o("Kunde inte hmta analysdata.")}finally{s(!1)}};if(n)return a.jsx("div",{className:"flex justify-center p-10",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:32})});if(i)return a.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:i});if(!e)return null;const c=["#0088FE","#00C49F","#FFBB28","#FF8042"],d=[{name:"Klara",value:e.completedLearners},{name:"Ej Klara",value:e.totalLearners-e.completedLearners}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:a.jsx(vt,{size:20})}),a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Aktiva Studenter"})]}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.totalLearners})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"p-2 bg-green-50 text-green-600 rounded-lg",children:a.jsx(Sr,{size:20})}),a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Genomsnittlig Slutfrande"})]}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.completionRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"p-2 bg-orange-50 text-orange-600 rounded-lg",children:a.jsx(Dr,{size:20})}),a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Risk fr Drop-off"})]}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.completionRate<50?"Hg":"Lg"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800",children:[a.jsx("h3",{className:"text-lg font-bold mb-6 text-gray-900 dark:text-white",children:"Slutfrande Status"}),a.jsx("div",{className:"h-64",children:a.jsx(bd,{width:"100%",height:"100%",children:a.jsxs(Xet,{children:[a.jsx(vc,{data:d,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:d.map((u,h)=>a.jsx(Tm,{fill:c[h%c.length]},`cell-${h}`))}),a.jsx(ga,{}),a.jsx(xd,{})]})})})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800",children:[a.jsx("h3",{className:"text-lg font-bold mb-6 text-gray-900 dark:text-white",children:"Drop-off Analys (Per Aktivitet)"}),a.jsx("div",{className:"h-64",children:a.jsx(bd,{width:"100%",height:"100%",children:a.jsxs(o2,{data:e.dropOffAnalysis,children:[a.jsx(Pu,{strokeDasharray:"3 3",vertical:!1}),a.jsx(Xi,{dataKey:"objectId",hide:!0}),a.jsx(Yi,{}),a.jsx(ga,{}),a.jsx(ao,{dataKey:"initialized",name:"Startad",fill:"#8884d8",radius:[4,4,0,0]}),a.jsx(ao,{dataKey:"completed",name:"Slutfrd",fill:"#82ca9d",radius:[4,4,0,0]})]})})})]})]})]})},Ott=({courseId:t,isTeacher:e,currentUser:r})=>{Et();const[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[d,u]=N.useState(!1),[h,f]=N.useState(null),[g,x]=N.useState(null),[m,p]=N.useState(!1),b=N.useCallback(async()=>{try{c(!0);const[_,S]=await Promise.all([O.scorm.getPackages(t),O.cmi5.getPackages(t)]);s(_||[]),o(S||[])}catch(_){console.error("Failed to fetch interactive modules",_),f("Kunde inte hmta interaktiva moduler.")}finally{c(!1)}},[t]);N.useEffect(()=>{t&&b()},[t,b]);const v=async(_,S)=>{const A=Array.from(_.target.files);if(A.length===0)return;const T=new FormData;if(A.forEach(E=>{E.name.toLowerCase().endsWith(".zip")&&T.append("files",E)}),T.getAll("files").length===0){alert("Endast .zip-filer stds.");return}try{u(!0),f(null),S==="SCORM"?await O.scorm.upload(t,T):await O.cmi5.upload(t,T),await b()}catch(E){console.error(`${S} upload failed`,E),f(`Uppladdning av ${S}-paket misslyckades.`)}finally{u(!1),_.target.value=""}},y=async(_,S)=>{if(window.confirm(`r du sker p att du vill ta bort detta ${S}-paket?`))try{S==="SCORM"?await O.scorm.delete(_):await O.cmi5.delete(_),await b()}catch(A){console.error("Delete failed",A),alert("Kunde inte ta bort paketet.")}},w=async(_,S)=>{const A=window.prompt("Ange nytt namn p modulen:",_.title);if(!(!A||A===_.title))try{S==="SCORM"?await O.scorm.update(_.id,{title:A}):await O.cmi5.update(_.id,{title:A}),await b()}catch(T){console.error("Rename failed",T),alert("Kunde inte uppdatera namnet.")}},k=(_,S)=>{x({id:_.id,type:S,pkg:_})},j=[...n.map(_=>({..._,type:"SCORM"})),...i.map(_=>({..._,type:"cmi5"}))].sort((_,S)=>new Date(S.uploadedAt)-new Date(_.uploadedAt));return l?a.jsx("div",{className:"p-12 flex justify-center",children:a.jsx(ft,{className:"animate-spin text-indigo-500",size:32})}):a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Ha,{className:"text-indigo-600 dark:text-indigo-400",size:24}),"Interaktiva Moduler"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Hantera och spela SCORM 1.2 och cmi5 innehll."})]}),e&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 hover:bg-indigo-200 rounded-xl transition-colors font-bold text-sm",children:[a.jsx(Sr,{size:18}),a.jsx("span",{children:"Analys"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"file",id:"scorm-upload",className:"hidden",accept:".zip",onChange:_=>v(_,"SCORM"),disabled:d,multiple:!0}),a.jsxs("label",{htmlFor:"scorm-upload",className:`flex items-center gap-2 px-4 py-2 bg-white dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] text-gray-700 dark:text-gray-300 rounded-xl shadow-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-[#303336] transition-all ${d?"opacity-50 pointer-events-none":""}`,children:[a.jsx(mg,{size:18,className:"text-indigo-500"}),a.jsx("span",{className:"font-bold text-sm",children:"Ladda upp SCORM"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"file",id:"cmi5-upload",className:"hidden",accept:".zip",onChange:_=>v(_,"cmi5"),disabled:d,multiple:!0}),a.jsxs("label",{htmlFor:"cmi5-upload",className:`flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg cursor-pointer transition-all ${d?"opacity-50 pointer-events-none":""}`,children:[d?a.jsx(ft,{size:18,className:"animate-spin"}):a.jsx(hs,{size:18}),a.jsx("span",{className:"font-bold text-sm",children:"Ladda upp cmi5"})]})]})]})]}),h&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 p-4 rounded-xl flex items-center gap-3 border border-red-100 dark:border-red-900/30",children:[a.jsx(Er,{size:20}),h]}),j.length===0?a.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-[#1E1F20] rounded-3xl border border-dashed border-gray-300 dark:border-gray-700",children:[a.jsx(Ha,{size:48,className:"mx-auto text-gray-300 dark:text-gray-600 mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium text-lg",children:"Inga interaktiva moduler n."}),e&&a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Ladda upp ett paket fr att komma igng."})]}):a.jsx("div",{className:"grid grid-cols-1 gap-4",children:j.map(_=>a.jsxs("div",{className:"group bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#3c4043] rounded-2xl p-5 hover:shadow-xl hover:border-indigo-200 dark:hover:border-indigo-900/50 transition-all duration-300 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-inner ${_.type==="SCORM"?"bg-amber-50 dark:bg-amber-900/20 text-amber-600":"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600"}`,children:_.type==="SCORM"?a.jsx(mg,{size:28}):a.jsx(hs,{size:28})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:_.title||"Namnls modul"}),a.jsx("span",{className:`text-[10px] uppercase font-black px-2 py-0.5 rounded-full border ${_.type==="SCORM"?"bg-amber-100 text-amber-700 border-amber-200":"bg-indigo-100 text-indigo-700 border-indigo-200"}`,children:_.type})]}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"flex items-center gap-1 bg-gray-100 dark:bg-[#282a2c] px-2 py-1 rounded-md",children:[a.jsx(xt,{size:12})," ",(_.sizeBytes/1024/1024).toFixed(2)," MB"]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"italic",children:["Uppladdad ",new Date(_.uploadedAt).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>k(_,_.type),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-sm shadow-lg shadow-indigo-200 dark:shadow-none transition-all hover:-translate-y-0.5",children:[a.jsx(Yo,{size:16,fill:"currentColor"})," Starta"]}),e&&a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>w(_,_.type),className:"p-2.5 text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-xl transition-all",title:"Redigera",children:a.jsx(Zl,{size:18})}),a.jsx("button",{onClick:()=>y(_.id,_.type),className:"p-2.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all",title:"Radera",children:a.jsx(qt,{size:18})})]}),a.jsx(or,{size:20,className:"text-gray-300 group-hover:translate-x-1 transition-transform hidden sm:block"})]})]},`${_.type}-${_.id}`))}),m&&a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-3xl shadow-2xl border border-gray-200 dark:border-gray-700 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center sticky top-0 bg-white dark:bg-[#1E1F20] z-10",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Sr,{className:"text-indigo-500"}),"Kursanalys (beta)"]}),a.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:a.jsx(Je,{size:24,className:"text-gray-500"})})]}),a.jsx("div",{className:"p-6",children:a.jsx(Ttt,{courseId:t})})]})}),g&&a.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center animate-in fade-in duration-300",children:a.jsx("div",{className:"w-full h-full sm:h-[90vh] sm:w-[95vw] sm:max-w-7xl bg-white dark:bg-[#1e1e1e] sm:rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:g.type==="SCORM"?a.jsx(Ett,{packageId:g.id,onClose:()=>x(null)}):a.jsx(Ctt,{packageId:g.pkg.packageId,launchUrl:g.pkg.launchUrl,registration:g.pkg.registration,onClose:()=>x(null)})})})]})},mQ=({skolverketCourse:t})=>{const[e,r]=N.useState("grundinfo"),[n,s]=N.useState([]),[i,o]=N.useState(!1);N.useEffect(()=>{t&&e==="kunskapskrav"&&l()},[t,e]);const l=async()=>{o(!0);try{const u=await O.get(`/skolverket/courses/${t.courseCode}/criteria`);s(u)}catch(u){console.error("Failed to fetch grading criteria",u)}finally{o(!1)}};if(!t)return null;const c=[{id:"grundinfo",label:"Grundinfo",icon:xt},{id:"innehall",label:"Innehll",icon:fd},{id:"kunskapskrav",label:"Kunskapskrav",icon:Mr}],d={E:"bg-green-100 dark:bg-green-900/30 border-green-500 text-green-900 dark:text-green-100",D:"bg-yellow-100 dark:bg-yellow-900/30 border-yellow-500 text-yellow-900 dark:text-yellow-100",C:"bg-blue-100 dark:bg-blue-900/30 border-blue-500 text-blue-900 dark:text-blue-100",B:"bg-purple-100 dark:bg-purple-900/30 border-purple-500 text-purple-900 dark:text-purple-100",A:"bg-indigo-100 dark:bg-indigo-900/30 border-indigo-500 text-indigo-900 dark:text-indigo-100"};return a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 p-2 rounded-lg",children:a.jsx(fd,{className:"text-indigo-600 dark:text-indigo-400",size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Skolverkets Kursinformation"}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.courseCode," - ",t.courseName]})]})]}),a.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-200 dark:border-gray-700",children:c.map(u=>{const h=u.icon;return a.jsxs("button",{onClick:()=>r(u.id),className:`flex items-center gap-2 px-4 py-2 font-medium transition-colors border-b-2 ${e===u.id?"border-indigo-600 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[a.jsx(h,{size:18}),u.label]},u.id)})}),a.jsxs("div",{className:"space-y-4",children:[e==="grundinfo"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(Vh,{label:"Kurskod",value:t.courseCode}),a.jsx(Vh,{label:"Kursnamn",value:t.courseName}),t.englishTitle&&a.jsx(Vh,{label:"Engelsk titel",value:t.englishTitle}),a.jsx(Vh,{label:"Pong",value:`${t.points} pong`}),a.jsx(Vh,{label:"mne",value:t.subject}),t.skolformer&&a.jsx(Vh,{label:"Skolformer",value:t.skolformer}),t.pdfUrl&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"PDF"}),a.jsxs("a",{href:t.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 dark:text-indigo-400 hover:underline mt-1",children:[a.jsx(Wo,{size:16}),"ppna officiell kursplan (Skolverket)"]})]})]}),e==="innehall"&&a.jsxs("div",{className:"space-y-6",children:[t.description&&a.jsx(cS,{title:"Kursbeskrivning",content:t.description}),t.subjectPurpose&&a.jsx(cS,{title:"mnets syfte",content:t.subjectPurpose}),t.objectives&&a.jsx(cS,{title:"Kursml",content:t.objectives}),!t.description&&!t.subjectPurpose&&!t.objectives&&a.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Ingen detaljerad information tillgnglig nnu. Denna data kommer lggas till framver."})]}),e==="kunskapskrav"&&a.jsxs("div",{className:"space-y-4",children:[i&&a.jsx("p",{className:"text-gray-500",children:"Laddar betygskriterier..."}),!i&&n.length===0&&a.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Inga betygskriterier tillgngliga nnu. Dessa kommer lggas till framver."}),!i&&n.map(u=>a.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${d[u.gradeLevel]}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Mr,{size:20}),a.jsxs("h3",{className:"font-bold text-lg",children:["Betyget ",u.gradeLevel]})]}),a.jsx("div",{className:"text-sm prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:u.criteriaText}})]},u.id))]})]})]})},Vh=({label:t,value:e})=>a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:t}),a.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:e})]}),cS=({title:t,content:e})=>a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t}),a.jsx("div",{className:"text-gray-700 dark:text-gray-300 prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:e}})]}),Itt=({item:t,courseId:e,onClose:r})=>{const{API_BASE:n,token:s}=At(),[i,o]=N.useState([]),[l,c]=N.useState(!0);return N.useEffect(()=>{if(!t||!s||s==="undefined"||s==="null")return;(async()=>{c(!0);try{const u=await fetch(`${n}/analytics/course/${e}/item-details?itemId=${t.id}&type=${t.type}`,{headers:{Authorization:`Bearer ${s}`}});if(u.ok){const h=await u.json();o(h)}}catch(u){console.error("Failed to fetch details",u)}finally{c(!1)}})()},[t,e,n,s]),t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-2xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.type==="LESSON"&&a.jsx(gt,{size:20,className:"text-blue-500"}),t.type==="QUIZ"&&a.jsx(Pn,{size:20,className:"text-purple-500"}),t.type==="ASSIGNMENT"&&a.jsx(xt,{size:20,className:"text-orange-500"}),t.title]}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.completedCount," av ",t.totalStudents," studenter klara"]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-full transition-colors",children:a.jsx(eo,{size:24,className:"text-gray-400 hover:text-red-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx(ft,{className:"animate-spin text-indigo-500",size:32})}):a.jsx("div",{className:"space-y-2",children:i.map(d=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold
                                            ${d.status==="COMPLETED"?"bg-green-500":"bg-gray-400"}`,children:d.firstName?d.firstName[0]:d.name?d.name[0]:"?"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:d.name}),a.jsx("p",{className:"text-xs text-gray-500",children:d.status==="COMPLETED"?"Klar":"Ej klar"})]})]}),a.jsx("div",{className:"text-right",children:d.status==="COMPLETED"?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:d.info}),a.jsx("p",{className:"text-xs text-gray-400",children:d.date?new Date(d.date).toLocaleDateString():""})]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"-"})})]},d.studentId))})})]})}):null},Dtt=({courseId:t})=>{const{API_BASE:e,token:r}=At(),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(null);if(N.useEffect(()=>{(async()=>{if(!(!r||r==="undefined"||r==="null"))try{const f=await fetch(`${e}/analytics/course/${t}/completion-summary`,{headers:{Authorization:`Bearer ${r}`}});if(f.ok){const g=await f.json();s(g)}}catch(f){console.error("Failed to fetch summary",f)}finally{o(!1)}})()},[t,e,r]),i)return a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(ft,{className:"animate-spin text-indigo-500",size:32})});const d={LESSON:n.filter(h=>h.type==="LESSON"),QUIZ:n.filter(h=>h.type==="QUIZ"),ASSIGNMENT:n.filter(h=>h.type==="ASSIGNMENT")},u=({current:h,total:f})=>{const g=f>0?h/f*100:0;let x="bg-blue-500";return g>80?x="bg-green-500":g<40&&(x="bg-amber-500"),a.jsx("div",{className:"h-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mt-2",children:a.jsx("div",{className:`h-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl",children:a.jsx(o5,{size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Kursversikt & Progression"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Analysera studenternas framsteg i detalj."})]})]}),["QUIZ","ASSIGNMENT","LESSON"].map(h=>{const f=d[h];if(!f||f.length===0)return null;let g="Lektioner",x=a.jsx(gt,{size:20,className:"text-blue-500"});return h==="QUIZ"&&(g="Quiz & Prov",x=a.jsx(Pn,{size:20,className:"text-purple-500"})),h==="ASSIGNMENT"&&(g="Inlmningsuppgifter",x=a.jsx(xt,{size:20,className:"text-orange-500"})),a.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x,a.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-200",children:g})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(m=>a.jsxs("button",{onClick:()=>c(m),className:"bg-white dark:bg-[#282a2c] text-left p-5 rounded-xl border border-gray-100 dark:border-[#3c4043] shadow-sm hover:shadow-md hover:border-indigo-200 transition-all group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors line-clamp-1",children:m.title}),a.jsx(or,{size:16,className:"text-gray-400 group-hover:translate-x-1 transition-transform"})]}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[a.jsx("span",{children:"Klara"}),a.jsxs("span",{className:"font-mono font-bold text-gray-700 dark:text-gray-300",children:[m.completedCount," / ",m.totalStudents]})]}),a.jsx(u,{current:m.completedCount,total:m.totalStudents})]},m.id))})]},h)}),!d.LESSON.length&&!d.QUIZ.length&&!d.ASSIGNMENT.length&&a.jsx("div",{className:"text-center py-12 text-gray-500 bg-gray-50 dark:bg-[#282a2c] rounded-2xl border border-dashed border-gray-300 dark:border-[#3c4043]",children:a.jsx("p",{children:"Ingen sprbar aktivitet hittades i kursen n."})}),l&&a.jsx(Itt,{item:l,courseId:t,onClose:()=>c(null)})]})},Mtt=({assignment:t,onClose:e})=>t?a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in transition-all",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl w-full max-w-lg shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden transform animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center bg-gray-50 dark:bg-[#131314]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 rounded-lg",children:a.jsx(er,{size:20})}),a.jsx("h3",{className:"text-xl font-bold dark:text-white",children:"Lrarens Feedback"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-[#282a2c] transition-colors",children:a.jsx(eo,{size:24})})]}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Uppgift"}),a.jsx("p",{className:"text-lg font-bold dark:text-white",children:t.title})]}),a.jsx("div",{className:"bg-indigo-50/50 dark:bg-indigo-900/10 rounded-xl p-6 border border-indigo-100/50 dark:border-indigo-800/20",children:a.jsxs("p",{className:"text-sm dark:text-gray-300 leading-relaxed italic",children:['"',t.feedback||"Ingen skriftlig feedback lmnad n, men ditt betyg r registrerat.",'"']})})]}),a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-[#131314] flex justify-end",children:a.jsx("button",{onClick:e,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl transition-all shadow-md active:scale-95",children:"Stng"})})]})}):null,Ltt=({courseId:t,currentUser:e})=>{const[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState({completedQuizzes:0,completedAssignments:0,pendingGrades:0}),[c,d]=N.useState(null),[u,h]=N.useState(!0);N.useEffect(()=>{f()},[t]);const f=async()=>{h(!0);try{const[g,x,m,p]=await Promise.all([O.quiz.getByCourse(t),O.get(`/courses/${t}/assignments`),O.get(`/submissions/student/${e.id}/course/${t}`),O.get(`/quizzes/results/student/${e.id}/course/${t}`)]),b=g.map(y=>{const w=p.find(k=>k.quiz&&(k.quiz.id===y.id||k.quiz===y.id));return{...y,result:w||null}});n(b);const v=x.map(y=>{const w=m.find(k=>k.assignment&&(k.assignment.id===y.id||k.assignment===y.id));return{...y,status:w?w.grade?"GRADED":"SUBMITTED":"PENDING",grade:(w==null?void 0:w.grade)||null,feedback:(w==null?void 0:w.feedback)||null,submittedAt:(w==null?void 0:w.submittedAt)||null}});i(v),l({completedQuizzes:b.filter(y=>y.result).length,totalQuizzes:b.length,completedAssignments:v.filter(y=>y.status!=="PENDING").length,totalAssignments:v.length,pendingGrades:v.filter(y=>y.status==="SUBMITTED").length})}catch(g){console.error("Failed to load summary",g)}finally{h(!1)}};return u?a.jsx("div",{className:"p-12 text-center text-gray-400",children:"Laddar sammanstllning..."}):a.jsxs("div",{className:"space-y-10 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800/30 flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-white dark:bg-[#1E1F20] rounded-xl text-indigo-600 shadow-sm",children:a.jsx(Mr,{size:24})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Quiz Genomfrda"}),a.jsxs("p",{className:"text-2xl font-black text-indigo-900 dark:text-indigo-200",children:[o.completedQuizzes," / ",o.totalQuizzes]})]})]}),a.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-6 rounded-2xl border border-emerald-100 dark:border-emerald-800/30 flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-white dark:bg-[#1E1F20] rounded-xl text-emerald-600 shadow-sm",children:a.jsx(ci,{size:24})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Inlmnade Uppgifter"}),a.jsxs("p",{className:"text-2xl font-black text-emerald-900 dark:text-emerald-200",children:[o.completedAssignments," / ",o.totalAssignments]})]})]}),a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-6 rounded-2xl border border-amber-100 dark:border-amber-800/30 flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-white dark:bg-[#1E1F20] rounded-xl text-amber-600 shadow-sm",children:a.jsx(Tt,{size:24})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Vntar p rttning"}),a.jsxs("p",{className:"text-2xl font-black text-amber-900 dark:text-amber-200",children:[o.pendingGrades," st"]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Pn,{size:20,className:"text-purple-600"}),a.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Dina Quiz-resultat"})]}),a.jsx("div",{className:"bg-white dark:bg-[#131314] rounded-2xl border border-gray-100 dark:border-[#3c4043] overflow-hidden shadow-sm",children:r.length===0?a.jsx("p",{className:"p-8 text-center text-gray-400 text-sm",children:"Inga quiz tillgngliga i denna kurs."}):a.jsx("div",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:r.map(g=>{var x;return a.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-[#1E1F20] transition-colors",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-bold text-sm dark:text-white",children:g.title}),a.jsxs("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:[((x=g.questions)==null?void 0:x.length)||0," frgor"]})]}),a.jsx("div",{className:"flex items-center gap-4",children:g.result?a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("span",{className:"text-sm font-bold text-green-600",children:[g.result.score," / ",g.result.maxScore]}),a.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(g.result.date||g.result.submittedAt).toLocaleDateString()})]}):a.jsx("span",{className:"text-xs text-amber-500 font-bold bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded",children:"Ej pbrjad"})})]},g.id)})})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(xt,{size:20,className:"text-indigo-600"}),a.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Inlmningsstatus"})]}),a.jsx("div",{className:"bg-white dark:bg-[#131314] rounded-2xl border border-gray-100 dark:border-[#3c4043] overflow-hidden shadow-sm",children:s.length===0?a.jsx("p",{className:"p-8 text-center text-gray-400 text-sm",children:"Inga inlmningar registrerade."}):a.jsx("div",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:s.map(g=>a.jsxs("div",{onClick:()=>g.status==="GRADED"&&d(g),className:`p-4 flex items-center justify-between transition-all ${g.status==="GRADED"?"cursor-pointer hover:bg-indigo-50/50 dark:hover:bg-indigo-900/10":""}`,children:[a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsx("div",{className:`p-2 rounded-lg ${g.status==="GRADED"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400 dark:bg-[#1E1F20]"}`,children:g.status==="GRADED"?a.jsx(ci,{size:18}):a.jsx(Tt,{size:18})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-bold text-sm dark:text-white",children:g.title}),a.jsxs("span",{className:"text-[10px] text-gray-400 font-bold uppercase",children:["Deadline: ",g.dueDate]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:g.status==="GRADED"?a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-black text-indigo-600 dark:text-indigo-400",children:g.grade}),a.jsxs("p",{className:"text-[9px] text-gray-400 uppercase font-bold flex items-center gap-1 justify-end",children:["Feedback ",a.jsx(or,{size:10})]})]})}):g.status==="SUBMITTED"?a.jsx("span",{className:"text-[10px] font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-full border border-amber-100 dark:border-amber-900/40",children:"Inlmnad"}):a.jsx("span",{className:"text-[10px] font-bold text-rose-500 bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full border border-rose-100 dark:border-rose-900/40",children:"Ej inskickad"})})]},g.id))})}),s.some(g=>g.grade)&&a.jsxs("p",{className:"text-[11px] text-gray-400 flex items-center gap-1 mt-2 mx-1",children:[a.jsx(Er,{size:12})," Klicka p en rttad uppgift fr att lsa lrarens kommentarer."]})]})]}),c&&a.jsx(Mtt,{assignment:c,onClose:()=>d(null)})]})},Rtt=({onClose:t,onSubmit:e,initialData:r,isPro:n})=>{const{currentUser:s}=At(),[i,o]=N.useState(""),[l,c]=N.useState(""),[d,u]=N.useState(""),[h,f]=N.useState(""),[g,x]=N.useState(""),[m,p]=N.useState(!1),[b,v]=N.useState([]),[y,w]=N.useState([]),[k,j]=N.useState(""),[_,S]=N.useState([]),[A,T]=N.useState([{text:"",options:[{text:"",isCorrect:!0},{text:"",isCorrect:!1}]}]);N.useEffect(()=>{if(s){const ee=s.role==="ADMIN"||s.roles&&s.roles.includes("ADMIN")?"ADMIN":"TEACHER";O.courses.getOptions(s.id,ee).then(S).catch(console.error)}},[s]),N.useEffect(()=>{var Y,ee;r&&r.id&&(o(r.title||""),c(r.description||""),u(((Y=r.course)==null?void 0:Y.id)||""),f(r.availableFrom||""),x(r.availableTo||""),((ee=r.questions)==null?void 0:ee.length)>0&&T(r.questions.map(B=>({...B,options:B.options||[{text:"",isCorrect:!0},{text:"",isCorrect:!1}]}))))},[r]);const E=async()=>{try{const Y=await O.questionBank.getMy(s.id);v(Y||[])}catch(Y){console.error(Y),alert("Kunde inte hmta frgor frn banken")}},C=()=>{E(),p(!0)},z=()=>{const ee=b.filter(B=>y.includes(B.id)).map(B=>({text:B.questionText,options:B.options.map(U=>({text:U,isCorrect:U===B.correctAnswer}))}));T([...A,...ee]),p(!1),w([])},M=(Y,ee,B)=>{const U=[...A];U[Y][ee]=B,T(U)},F=(Y,ee,B,U)=>{const V=[...A];V[Y].options[ee][B]=U,T(V)},D=(Y,ee)=>{const B=[...A];B[Y].options.forEach(U=>U.isCorrect=!1),B[Y].options[ee].isCorrect=!0,T(B)},L=Y=>{const ee=[...A];ee[Y].options.push({text:"",isCorrect:!1}),T(ee)},K=Y=>{if(Y.preventDefault(),console.log("Submitting quiz, title:",i),!i||i.trim()===""){alert("Ange en titel");return}const ee={title:i,description:l,course:d?{id:d}:null,availableFrom:h||null,availableTo:g||null,questions:A.map(B=>({text:B.text,options:B.options.map(U=>({text:U.text,isCorrect:U.isCorrect===!0}))}))};e(ee,r?r.id:null)},$=k?b.filter(Y=>Y.category===k):b,R=[...new Set(b.map(Y=>Y.category))];return a.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4 animate-in fade-in zoom-in duration-200",children:[a.jsxs("div",{className:`bg-white dark:bg-[#1E1F20] rounded-2xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh] border border-gray-200 dark:border-[#3c4043] ${m?"opacity-50 pointer-events-none":""}`,children:[a.jsxs("div",{className:"bg-indigo-600 p-6 flex justify-between items-center text-white shrink-0",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[a.jsx(Pn,{})," ",r?"Redigera Quiz":"Skapa Quiz (Manuellt)"]}),a.jsx("button",{onClick:t,children:a.jsx(Je,{size:24})})]}),a.jsxs("div",{className:"p-8 overflow-y-auto flex-1 bg-gray-50 dark:bg-[#131314]",children:[a.jsxs("div",{className:"space-y-4 mb-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Kurs"}),a.jsxs("select",{className:"w-full p-2 rounded-lg border border-gray-300 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white",value:d,onChange:Y=>u(Y.target.value),children:[a.jsx("option",{value:"",children:"-- Ingen Kurs (Globalt) --"}),_.map(Y=>a.jsx("option",{value:Y.id,children:Y.title},Y.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Tillgnglig Frn"}),a.jsx("input",{type:"datetime-local",className:"w-full p-2 rounded-lg border border-gray-300 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white",value:h,onChange:Y=>f(Y.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"T.o.m (Stnger)"}),a.jsx("input",{type:"datetime-local",className:"w-full p-2 rounded-lg border border-gray-300 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white",value:g,onChange:Y=>x(Y.target.value)})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Quiz Titel"}),a.jsx("input",{className:"w-full p-2 rounded-lg border border-gray-300 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white font-bold text-lg",value:i,onChange:Y=>o(Y.target.value),placeholder:"t.ex. Java Basics"})]}),a.jsx("textarea",{className:"w-full p-3 bg-white dark:bg-[#1E1F20] rounded-lg border border-gray-300 dark:border-[#3c4043] text-sm text-gray-900 dark:text-white outline-none",rows:"2",value:l,onChange:Y=>c(Y.target.value),placeholder:"Beskrivning..."})]}),a.jsxs("div",{className:"space-y-6",children:[A.map((Y,ee)=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-xl border border-gray-200 dark:border-[#3c4043] relative shadow-sm group",children:[a.jsx("button",{onClick:()=>T(A.filter((B,U)=>U!==ee)),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(qt,{size:18})}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 block",children:["Frga ",ee+1]}),a.jsx("input",{className:"w-full font-medium bg-gray-50 dark:bg-[#131314] border border-gray-200 dark:border-[#3c4043] rounded-lg p-3 text-gray-900 dark:text-white",value:Y.text,onChange:B=>M(ee,"text",B.target.value),placeholder:"Skriv frgan hr..."})]}),a.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-indigo-100 dark:border-indigo-900/30",children:[Y.options.map((B,U)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"radio",name:`correct-${ee}`,checked:B.isCorrect===!0,onChange:()=>D(ee,U),className:"w-5 h-5 accent-green-600 cursor-pointer"}),a.jsx("input",{className:"flex-1 bg-transparent border-b border-gray-200 dark:border-[#3c4043] py-1 text-sm text-gray-900 dark:text-white outline-none",value:B.text,onChange:V=>F(ee,U,"text",V.target.value),placeholder:`Alternativ ${U+1}`})]},U)),a.jsxs("button",{onClick:()=>L(ee),className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold hover:underline mt-2 flex items-center gap-1",children:[a.jsx(BD,{size:14})," Lgg till alternativ"]})]})]},ee)),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("button",{onClick:()=>T([...A,{text:"",options:[{text:"",isCorrect:!0},{text:"",isCorrect:!1}]}]),className:"flex-1 py-4 border-2 border-dashed border-gray-300 dark:border-[#3c4043] rounded-xl text-gray-500 dark:text-gray-400 hover:border-indigo-500 font-bold flex items-center justify-center gap-2",children:[a.jsx(BD,{size:20})," Lgg till ny frga"]}),n&&a.jsxs("button",{onClick:C,className:"flex-1 py-4 border-2 border-dashed border-indigo-200 dark:border-indigo-900 rounded-xl text-indigo-600 dark:text-indigo-400 hover:border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 font-bold flex items-center justify-center gap-2",children:[a.jsx(Mr,{size:20})," Hmta frn Frgebank"]})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] flex justify-end gap-3",children:[a.jsx("button",{onClick:t,className:"px-6 py-2.5 rounded-lg font-bold text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#3c4043]",children:"Avbryt"}),a.jsxs("button",{onClick:K,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 flex items-center gap-2",children:[a.jsx(sa,{size:18})," Spara Quiz"]})]})]}),m&&a.jsx("div",{className:"fixed inset-0 z-[60] flex justify-center items-center p-8 bg-black/40",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-3xl rounded-xl shadow-2xl flex flex-col max-h-[80vh] animate-in zoom-in-95",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Vlj frgor frn Banken"}),a.jsx("button",{onClick:()=>p(!1),children:a.jsx(Je,{size:20})})]}),a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] flex gap-2 overflow-x-auto",children:[a.jsx("button",{onClick:()=>j(""),className:`px-3 py-1 rounded-full text-sm font-bold ${k?"bg-gray-100 text-gray-600":"bg-indigo-600 text-white"}`,children:"Alla"}),R.map(Y=>a.jsx("button",{onClick:()=>j(Y),className:`px-3 py-1 rounded-full text-sm font-bold ${k===Y?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600"}`,children:Y},Y))]}),a.jsx("div",{className:"p-6 overflow-y-auto flex-1 space-y-2",children:$.length===0?a.jsx("p",{className:"text-gray-500 text-center",children:"Inga frgor hittades."}):$.map(Y=>a.jsxs("div",{onClick:()=>{y.includes(Y.id)?w(y.filter(ee=>ee!==Y.id)):w([...y,Y.id])},className:`p-4 rounded-lg border cursor-pointer transition-all flex justify-between items-center ${y.includes(Y.id)?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 ring-1 ring-indigo-600":"border-gray-200 hover:border-indigo-300"}`,children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:Y.questionText}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-gray-600 dark:text-gray-300",children:Y.category}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${Y.difficulty==="HARD"?"bg-red-100 text-red-800":Y.difficulty==="MEDIUM"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:Y.difficulty})]})]}),y.includes(Y.id)&&a.jsx(nr,{size:20,className:"text-indigo-600"})]},Y.id))}),a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-[#3c4043] flex justify-between items-center bg-gray-50 dark:bg-[#131314]",children:[a.jsxs("span",{className:"font-bold text-gray-500",children:[y.length," valda"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 font-bold",children:"Avbryt"}),a.jsx("button",{onClick:z,disabled:y.length===0,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 disabled:opacity-50",children:"Importera Valda"})]})]})]})})]})},Ptt=({onClose:t,onSubmit:e})=>{const{currentUser:r}=At(),[n,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(10),[d,u]=N.useState([]),[h,f]=N.useState(!1);N.useEffect(()=>{r&&O.questionBank.getCategories(r.id).then(u).catch(console.error)},[r]);const g=x=>{if(x.preventDefault(),!n||!i){alert("Vnligen ange titel och vlj kategori.");return}f(!0),setTimeout(()=>{e({title:n,description:`Genererat quiz (${i})`,generationParams:{category:i,count:l}},null)},500)};return a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4 animate-in fade-in zoom-in duration-200",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col border border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"bg-indigo-600 p-6 flex justify-between items-center text-white shrink-0",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[a.jsx(Mr,{})," Generera Quiz"]}),a.jsx("button",{onClick:t,children:a.jsx(Je,{size:24})})]}),a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/10 p-4 rounded-lg flex gap-3 text-indigo-800 dark:text-indigo-200 text-sm",children:[a.jsx(Mr,{className:"shrink-0"}),a.jsx("p",{children:"Vlj ett mne frn din frgebank s skapar vi ett frdigt quiz med slumpade frgor t dig direkt."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Titel p Quiz"}),a.jsx("input",{className:"w-full p-2 rounded border dark:bg-[#1E1F20] dark:border-[#3c4043] dark:text-white",value:n,onChange:x=>s(x.target.value),placeholder:"t.ex. Java Slutprov",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Kategori"}),a.jsxs("select",{className:"w-full p-2 rounded border dark:bg-[#1E1F20] dark:border-[#3c4043] dark:text-white",value:i,onChange:x=>o(x.target.value),children:[a.jsx("option",{value:"",children:"-- Vlj Kategori --"}),d.map((x,m)=>a.jsx("option",{value:x,children:x},m))]}),d.length===0&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Inga kategorier hittades. Importera frgor frst via Frgebanken."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Antal Frgor"}),a.jsx("input",{type:"number",className:"w-full p-2 rounded border dark:bg-[#1E1F20] dark:border-[#3c4043] dark:text-white",value:l,onChange:x=>c(parseInt(x.target.value)),min:"1",max:"50"})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-[#3c4043] flex justify-end gap-3",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg font-bold text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-[#3c4043]",children:"Avbryt"}),a.jsx("button",{onClick:g,disabled:h,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:h?"Genererar...":"Generera Quiz"})]})]})})},pQ=({quiz:t,onClose:e,onSubmit:r})=>{const[n,s]=N.useState({}),[i,o]=N.useState(!1),[l,c]=N.useState(0),d=ae.useMemo(()=>t.questions.map((f,g)=>({...f,id:f.id||`q-${g}`,options:f.options.map((x,m)=>typeof x=="string"?{id:`opt-${g}-${m}`,text:x,isCorrect:m===f.correctIndex}:{...x,id:x.id||`opt-${g}-${m}`})})),[t]),u=(f,g)=>{i||s({...n,[f]:g})},h=()=>{let f=0;d.forEach(g=>{const x=n[g.id],m=g.options.find(p=>p.isCorrect);x&&m&&x===m.id&&f++}),c(f),o(!0),r&&r(t.id,f,d.length)};return a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4 animate-in fade-in zoom-in duration-200",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl shadow-2xl w-full max-w-3xl overflow-hidden flex flex-col max-h-[90vh] border border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"bg-indigo-600 p-8 text-white shrink-0 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:t.title}),a.jsx("p",{className:"text-indigo-100 mt-1",children:t.description})]}),a.jsx("button",{onClick:e,children:a.jsx(Je,{size:24})})]}),a.jsxs("div",{className:"p-8 overflow-y-auto bg-gray-50 dark:bg-[#131314] flex-1",children:[i&&a.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-900 text-green-800 dark:text-green-300 p-6 rounded-xl text-center mb-8",children:[a.jsx(Mr,{size:48,className:"mx-auto mb-3"}),a.jsxs("h3",{className:"text-2xl font-bold",children:["Resultat: ",l," / ",d.length]})]}),a.jsx("div",{className:"space-y-8",children:d.map((f,g)=>{var p,b;const x=n[f.id],m=i&&x&&((p=f.options.find(v=>v.id===x))==null?void 0:p.isCorrect);return a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-xl border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("h4",{className:"font-bold text-lg mb-4 flex gap-3 text-gray-900 dark:text-white",children:[a.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 w-8 h-8 rounded-lg flex items-center justify-center text-sm shrink-0",children:g+1})," ",f.text,i&&m&&a.jsx(nr,{size:24,className:"text-green-500 ml-auto"}),i&&!m&&x&&a.jsx(Dr,{size:24,className:"text-red-500 ml-auto"})]}),a.jsx("div",{className:"space-y-3 pl-11",children:f.options.map(v=>{const y=n[f.id]===v.id;let w="bg-gray-50 dark:bg-[#131314] border-gray-200 dark:border-[#3c4043]";return y&&(w="bg-indigo-50 dark:bg-indigo-900/20 border-indigo-500 ring-1 ring-indigo-500"),i&&v.isCorrect?w="!bg-green-100 dark:!bg-green-900/30 !border-green-500":i&&y&&!v.isCorrect&&(w="!bg-red-100 dark:!bg-red-900/30 !border-red-500"),a.jsxs("div",{onClick:()=>u(f.id,v.id),className:`p-4 rounded-lg cursor-pointer border transition-all flex items-center justify-between ${w}`,children:[a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:v.text}),y&&!i&&a.jsx("div",{className:"w-3 h-3 bg-indigo-600 rounded-full"})]},v.id)})}),i&&((b=f.options.find(v=>v.isCorrect))==null?void 0:b.explanation)&&a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-sm",children:[a.jsx("span",{className:"font-bold",children:"Frklaring:"})," ",f.options.find(v=>v.isCorrect).explanation]})]},f.id)})})]}),i?a.jsx("div",{className:"p-6 border-t border-gray-100 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] flex justify-end",children:a.jsx("button",{onClick:e,className:"bg-gray-900 dark:bg-white text-white dark:text-black font-bold py-3 px-8 rounded-xl",children:"Stng"})}):a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] flex justify-end gap-3",children:[a.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 font-bold px-4",children:"Avbryt"}),a.jsx("button",{onClick:h,disabled:Object.keys(n).length<d.length,className:"bg-indigo-600 text-white font-bold py-3 px-8 rounded-xl hover:bg-indigo-700 shadow-lg disabled:opacity-50",children:"Lmna in Quiz"})]})]})})},xQ=({entityType:t="DOCUMENT",entityId:e,userId:r,onClose:n})=>{var m;const[s,i]=N.useState(!0),[o,l]=N.useState(null),[c,d]=N.useState(null),[u,h]=N.useState(!1),f=N.useRef(null),g=N.useRef(null),x=N.useRef(`oo-editor-${Date.now()}`);return N.useEffect(()=>{let p=!0;return(async()=>{try{const v=X2(),y=v?`&tenantId=${v}`:"",w=await O.get(`/onlyoffice/config/${t}/${e}?userId=${r}${y}`);if(!p)return;if(l(w),console.log(" Config loaded:",w),window.DocsAPI){h(!0);return}const k=w.documentServerUrl||"",_=`${k.endsWith("/")?k.slice(0,-1):k}/web-apps/apps/api/documents/api.js`;console.log(" Loading OnlyOffice script from:",_);const S=document.createElement("script");S.src=_,S.async=!0,S.onload=()=>{console.log(" OnlyOffice script loaded"),p&&h(!0)},S.onerror=()=>{console.error(" Failed to load OnlyOffice script from",_),p&&(d("Kunde inte ladda OnlyOffice. Kontrollera att servern r igng."),i(!1))},document.body.appendChild(S)}catch(v){console.error("Failed to initialize OnlyOffice",v),p&&(d(v.message||"Kunde inte initiera OnlyOffice"),i(!1))}})(),()=>{p=!1}},[t,e,r]),N.useEffect(()=>{if(!u||!o||!window.DocsAPI||!g.current||f.current)return;if(console.log(" Creating OnlyOffice editor..."),typeof window.DocsAPI.DocEditor!="function"){console.error(" DocsAPI.DocEditor is not a function!"),d("OnlyOffice API loading failed."),i(!1);return}console.log(" Full config:",JSON.stringify(o,null,2));const p=x.current;g.current.innerHTML=`<div id="${p}" style="width:100%;height:100%;background:#fff;"></div>`;const b=document.getElementById(p);console.log(" Container element:",b?" Found":" Not found");try{const v={...o,width:"100%",height:"100%",type:"desktop",editorConfig:{...o.editorConfig,lang:"sv",customization:{autosave:!0,chat:!1,help:!1,compactHeader:!0,toolbar:!0,uiTheme:"theme-light"}},events:{onDocumentReady:()=>{console.log(" Document ready!"),i(!1)},onAppReady:()=>{console.log(" App ready!")},onError:y=>{var j,_;console.error(" OnlyOffice error:",y);const w=(j=y.data)==null?void 0:j.errorCode,k=(_=y.data)==null?void 0:_.errorDescription;console.error(`OnlyOffice Error Details: Code=${w}, Desc=${k}`),d(`OnlyOffice-fel (Kod: ${w||"Oknd"}): ${k||"Kolla konsolen"}`),i(!1)},onWarning:y=>{console.warn(" OnlyOffice warning:",y)},onInfo:y=>{console.log(" OnlyOffice info:",y)},onDownloadAs:y=>{console.log(" OnlyOffice download:",y)}}};console.log(" Creating DocEditor with config:",v),f.current=new window.DocsAPI.DocEditor(p,v),console.log(" DocEditor created, instance:",f.current),setTimeout(()=>{const y=document.querySelectorAll("iframe");console.log(` Iframes after 500ms: ${y.length}`),y.forEach((w,k)=>{console.log(`  - iframe[${k}]: src="${w.src}", style="${w.style.cssText}"`)})},500)}catch(v){console.error(" Failed to create editor:",v),d("Kunde inte starta editorn: "+v.message),i(!1)}return()=>{if(f.current){console.log(" Destroying editor");try{f.current.destroyEditor()}catch(v){console.warn("Destroy error:",v)}f.current=null}}},[u,o]),KF.createPortal(a.jsxs("div",{className:"onlyoffice-editor fixed inset-0 z-[999999] flex items-center justify-center p-2 sm:p-4",style:{zIndex:999999},children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:n}),a.jsxs("div",{className:"relative w-full h-full max-w-[98vw] max-h-[96vh] bg-white dark:bg-[#1E1F20] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"flex-none px-4 py-3 border-b border-gray-200 dark:border-[#3c4043] bg-gray-50 dark:bg-[#2b2d31] flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg",children:a.jsx(sa,{size:18})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-sm text-gray-900 dark:text-white",children:((m=o==null?void 0:o.document)==null?void 0:m.title)||"Dokument"}),a.jsxs("span",{className:"text-[10px] text-green-600 dark:text-green-400 flex items-center gap-1",children:[a.jsx(nr,{size:10})," Auto-sparning"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-lg",children:"Stng & Spara"}),a.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-lg",children:a.jsx(Je,{size:20})})]})]}),a.jsxs("div",{className:"flex-1 relative bg-[#f4f4f4] dark:bg-[#121212]",children:[s&&a.jsxs("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-white dark:bg-[#1E1F20]",children:[a.jsx(ft,{className:"animate-spin text-indigo-600 mb-4",size:48}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Laddar dokument..."}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:u?o?"Initierar editor...":"Hmtar config...":"Laddar OnlyOffice..."})]}),c&&a.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-white dark:bg-[#1E1F20] p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 text-red-500 rounded-full flex items-center justify-center mb-4",children:a.jsx(Je,{size:32})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Ngot gick fel"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-md mb-6",children:c}),a.jsx("button",{onClick:n,className:"px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-black",children:"Stng"})]}),a.jsx("div",{ref:g,className:"absolute inset-0 w-full h-full"})]})]})]}),document.body)},ztt=({src:t,title:e,chapters:r=[],onProgress:n,onEnded:s,onMetadataLoaded:i,autoPlay:o=!1,poster:l})=>{const c=N.useRef(null),d=N.useRef(null),[u,h]=N.useState(!1),[f,g]=N.useState(!1),[x,m]=N.useState(0),[p,b]=N.useState(0),[v,y]=N.useState(1),[w,k]=N.useState(!1),[j,_]=N.useState(!0),[S,A]=N.useState(1),[T,E]=N.useState(!1),[C,z]=N.useState(0),M=q=>{if(!q||isNaN(q))return"0:00";const H=Math.floor(q/3600),Z=Math.floor(q%3600/60),te=Math.floor(q%60);return H>0?`${H}:${Z.toString().padStart(2,"0")}:${te.toString().padStart(2,"0")}`:`${Z}:${te.toString().padStart(2,"0")}`},F=()=>{if(!r||r.length===0)return null;for(let q=r.length-1;q>=0;q--)if(x>=r[q].time)return r[q];return r[0]},D=()=>{const q=c.current;q&&(b(q.duration),_(!1),i&&i({duration:q.duration}))},L=()=>{const q=c.current;if(q&&(m(q.currentTime),n&&n({currentTime:q.currentTime,duration:q.duration}),q.buffered.length>0)){const H=q.buffered.end(q.buffered.length-1);z(H/q.duration*100)}},K=()=>{h(!1),s&&s()},$=()=>{const q=c.current;q&&(u?q.pause():q.play(),h(!u))},R=()=>{const q=c.current;q&&(q.muted=!f,g(!f))},Y=q=>{const H=parseFloat(q.target.value),Z=c.current;Z&&(Z.volume=H,y(H),g(H===0))},ee=q=>{const H=c.current,Z=d.current;if(H&&Z){const te=Z.getBoundingClientRect(),ge=(q.clientX-te.left)/te.width;H.currentTime=ge*p}},B=q=>{const H=c.current;H&&(H.currentTime=q.time,k(!1),u||(H.play(),h(!0)))},U=q=>{const H=c.current;H&&(H.currentTime=Math.max(0,Math.min(p,H.currentTime+q)))},V=()=>{var H,Z;const q=(Z=(H=c.current)==null?void 0:H.parentElement)==null?void 0:Z.parentElement;q&&(document.fullscreenElement?document.exitFullscreen():q.requestFullscreen())},se=q=>{const H=c.current;H&&(H.playbackRate=q,A(q),E(!1))};N.useEffect(()=>{const q=H=>{if(!(H.target.tagName==="INPUT"||H.target.tagName==="TEXTAREA"))switch(H.key){case" ":case"k":H.preventDefault(),$();break;case"ArrowLeft":H.preventDefault(),U(-10);break;case"ArrowRight":H.preventDefault(),U(10);break;case"ArrowUp":H.preventDefault(),Y({target:{value:Math.min(1,v+.1)}});break;case"ArrowDown":H.preventDefault(),Y({target:{value:Math.max(0,v-.1)}});break;case"m":H.preventDefault(),R();break;case"f":H.preventDefault(),V();break}};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[u,v,f]);const Ne=F(),ie=p>0?x/p*100:0;return a.jsxs("div",{className:"relative bg-black rounded-xl overflow-hidden shadow-2xl group",children:[a.jsx("video",{ref:c,src:t,poster:l,className:"w-full aspect-video",onClick:$,onLoadedMetadata:D,onTimeUpdate:L,onEnded:K,onWaiting:()=>_(!0),onCanPlay:()=>_(!1),autoPlay:o}),j&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:a.jsx(ft,{className:"w-12 h-12 text-white animate-spin"})}),!u&&!j&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:$,children:a.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center hover:bg-white/30 transition-colors",children:a.jsx(Yo,{className:"w-10 h-10 text-white fill-white ml-1"})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent pt-16 pb-4 px-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[Ne&&a.jsx("div",{className:"mb-3 px-1",children:a.jsx("span",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wide",children:Ne.title})}),a.jsxs("div",{ref:d,className:"h-1.5 bg-white/30 rounded-full cursor-pointer mb-4 relative group/progress",onClick:ee,children:[a.jsx("div",{className:"absolute h-full bg-white/20 rounded-full",style:{width:`${C}%`}}),a.jsx("div",{className:"absolute h-full bg-indigo-500 rounded-full",style:{width:`${ie}%`}}),r.map((q,H)=>a.jsx("div",{className:"absolute w-1 h-3 bg-white/60 rounded-full -top-0.5 cursor-pointer hover:bg-white",style:{left:`${q.time/p*100}%`},onClick:Z=>{Z.stopPropagation(),B(q)},title:q.title},H)),a.jsx("div",{className:"absolute w-4 h-4 bg-indigo-500 rounded-full -top-1.5 -ml-2 opacity-0 group-hover/progress:opacity-100 transition-opacity",style:{left:`${ie}%`}})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:$,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:u?a.jsx(R1,{className:"w-5 h-5"}):a.jsx(Yo,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>U(-10),className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:"-10 sekunder",children:a.jsx(Pge,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>U(10),className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:"+10 sekunder",children:a.jsx(zge,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center gap-2 group/volume",children:[a.jsx("button",{onClick:R,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:f||v===0?a.jsx(Wge,{className:"w-5 h-5"}):a.jsx(g5,{className:"w-5 h-5"})}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:f?0:v,onChange:Y,className:"w-0 group-hover/volume:w-20 transition-all duration-200 accent-indigo-500"})]}),a.jsxs("span",{className:"text-white text-sm font-mono",children:[M(x)," / ",M(p)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[r.length>0&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>k(!w),className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:"Kapitel",children:a.jsx(gg,{className:"w-5 h-5"})}),w&&a.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-64 max-h-64 overflow-y-auto bg-gray-900 rounded-xl shadow-2xl border border-white/10",children:[a.jsx("div",{className:"p-2 border-b border-white/10",children:a.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"Kapitel"})}),r.map((q,H)=>a.jsxs("button",{onClick:()=>B(q),className:`w-full p-3 text-left hover:bg-white/10 transition-colors flex items-center gap-3 ${Ne===q?"bg-indigo-500/20 text-indigo-400":"text-white"}`,children:[a.jsx("span",{className:"text-xs font-mono text-gray-400 w-12",children:M(q.time)}),a.jsx("span",{className:"text-sm font-medium truncate flex-1",children:q.title})]},H))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>E(!T),className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:"Hastighet",children:a.jsx(yn,{className:"w-5 h-5"})}),T&&a.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-gray-900 rounded-xl shadow-2xl border border-white/10 overflow-hidden",children:[a.jsx("div",{className:"p-2 border-b border-white/10",children:a.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"Hastighet"})}),[.5,.75,1,1.25,1.5,2].map(q=>a.jsx("button",{onClick:()=>se(q),className:`w-full px-4 py-2 text-left text-sm hover:bg-white/10 transition-colors ${S===q?"text-indigo-400 bg-indigo-500/20":"text-white"}`,children:q===1?"Normal":`${q}x`},q))]})]}),a.jsx("button",{onClick:V,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",title:"Helskrm",children:a.jsx(hK,{className:"w-5 h-5"})})]})]})]}),e&&a.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 bg-gradient-to-b from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:a.jsx("h3",{className:"text-white font-bold text-lg truncate",children:e})})]})};var P3={exports:{}},bQ={exports:{}},$tt=void 0,yQ=function(t){return t!==$tt&&t!==null},Ftt=yQ,Btt={object:!0,function:!0,undefined:!0},Utt=function(t){return Ftt(t)?hasOwnProperty.call(Btt,typeof t):!1},Ktt=Utt,Gtt=function(t){if(!Ktt(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},qtt=Gtt,Vtt=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!qtt(t)},Htt=Vtt,Wtt=/^\s*class[\s{/}]/,Xtt=Function.prototype.toString,Ytt=function(t){return!(!Htt(t)||Wtt.test(Xtt.call(t)))},Ztt=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},dS,O9;function Qtt(){return O9||(O9=1,dS=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),dS}var Jtt=function(){},ert=Jtt(),hI=function(t){return t!==ert&&t!==null},uS,I9;function trt(){if(I9)return uS;I9=1;var t=hI,e=Object.keys;return uS=function(r){return e(t(r)?Object(r):r)},uS}var hS,D9;function rrt(){return D9||(D9=1,hS=Qtt()()?Object.keys:trt()),hS}var fS,M9;function nrt(){if(M9)return fS;M9=1;var t=hI;return fS=function(e){if(!t(e))throw new TypeError("Cannot use null or undefined");return e},fS}var gS,L9;function art(){if(L9)return gS;L9=1;var t=rrt(),e=nrt(),r=Math.max;return gS=function(n,s){var i,o,l=r(arguments.length,2),c;for(n=Object(e(n)),c=function(d){try{n[d]=s[d]}catch(u){i||(i=u)}},o=1;o<l;++o)s=arguments[o],t(s).forEach(c);if(i!==void 0)throw i;return n},gS}var srt=Ztt()?Object.assign:art(),irt=hI,ort=Array.prototype.forEach,lrt=Object.create,crt=function(t,e){var r;for(r in t)e[r]=t[r]},drt=function(t){var e=lrt(null);return ort.call(arguments,function(r){irt(r)&&crt(Object(r),e)}),e},mS="razdwatrzy",urt=function(){return typeof mS.contains!="function"?!1:mS.contains("dwa")===!0&&mS.contains("foo")===!1},pS,R9;function hrt(){if(R9)return pS;R9=1;var t=String.prototype.indexOf;return pS=function(e){return t.call(this,e,arguments[1])>-1},pS}var frt=urt()?String.prototype.contains:hrt(),Kv=yQ,P9=Ytt,vQ=srt,kQ=drt,x0=frt,grt=bQ.exports=function(t,e){var r,n,s,i,o;return arguments.length<2||typeof t!="string"?(i=e,e=t,t=null):i=arguments[2],Kv(t)?(r=x0.call(t,"c"),n=x0.call(t,"e"),s=x0.call(t,"w")):(r=s=!0,n=!1),o={value:e,configurable:r,enumerable:n,writable:s},i?vQ(kQ(i),o):o};grt.gs=function(t,e,r){var n,s,i,o;return typeof t!="string"?(i=r,r=e,e=t,t=null):i=arguments[3],Kv(e)?P9(e)?Kv(r)?P9(r)||(i=r,r=void 0):r=void 0:(i=e,e=r=void 0):e=void 0,Kv(t)?(n=x0.call(t,"c"),s=x0.call(t,"e")):(n=!0,s=!1),o={get:e,set:r,configurable:n,enumerable:s},i?vQ(kQ(i),o):o};var mrt=bQ.exports,prt=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var r=mrt,n=prt,s=Function.prototype.apply,i=Function.prototype.call,o=Object.create,l=Object.defineProperty,c=Object.defineProperties,d=Object.prototype.hasOwnProperty,u={configurable:!0,enumerable:!1,writable:!0},h,f,g,x,m,p,b;h=function(v,y){var w;return n(y),d.call(this,"__ee__")?w=this.__ee__:(w=u.value=o(null),l(this,"__ee__",u),u.value=null),w[v]?typeof w[v]=="object"?w[v].push(y):w[v]=[w[v],y]:w[v]=y,this},f=function(v,y){var w,k;return n(y),k=this,h.call(this,v,w=function(){g.call(k,v,w),s.call(y,this,arguments)}),w.__eeOnceListener__=y,this},g=function(v,y){var w,k,j,_;if(n(y),!d.call(this,"__ee__"))return this;if(w=this.__ee__,!w[v])return this;if(k=w[v],typeof k=="object")for(_=0;j=k[_];++_)(j===y||j.__eeOnceListener__===y)&&(k.length===2?w[v]=k[_?0:1]:k.splice(_,1));else(k===y||k.__eeOnceListener__===y)&&delete w[v];return this},x=function(v){var y,w,k,j,_;if(d.call(this,"__ee__")&&(j=this.__ee__[v],!!j))if(typeof j=="object"){for(w=arguments.length,_=new Array(w-1),y=1;y<w;++y)_[y-1]=arguments[y];for(j=j.slice(),y=0;k=j[y];++y)s.call(k,this,_)}else switch(arguments.length){case 1:i.call(j,this);break;case 2:i.call(j,this,arguments[1]);break;case 3:i.call(j,this,arguments[1],arguments[2]);break;default:for(w=arguments.length,_=new Array(w-1),y=1;y<w;++y)_[y-1]=arguments[y];s.call(j,this,_)}},m={on:h,once:f,off:g,emit:x},p={on:r(h),once:r(f),off:r(g),emit:r(x)},b=c({},p),t.exports=e=function(v){return v==null?o(b):c(Object(v),p)},e.methods=m})(P3,P3.exports);var xrt=P3.exports;const ul=Vt(xrt);var Hd={},Wd={};function brt(t,e,r){if(r===void 0&&(r=Array.prototype),t&&typeof r.find=="function")return r.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var s=t[n];if(e.call(void 0,s,n,t))return s}}function fI(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}var wQ=fI({HTML:"text/html",isHTML:function(t){return t===wQ.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),jQ=fI({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===jQ.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Wd.find=brt;Wd.freeze=fI;Wd.MIME_TYPE=wQ;Wd.NAMESPACE=jQ;var NQ=Wd,Go=NQ.find,qx=NQ.NAMESPACE;function yrt(t){return t!==""}function vrt(t){return t?t.split(/[\t\n\f\r ]+/).filter(yrt):[]}function krt(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function z9(t){if(!t)return[];var e=vrt(t);return Object.keys(e.reduce(krt,{}))}function wrt(t){return function(e){return t&&t.indexOf(e)!==-1}}function Kb(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function ps(t,e){var r=t.prototype;if(!(r instanceof e)){let s=function(){};var n=s;s.prototype=e.prototype,s=new s,Kb(r,s),t.prototype=r=s}r.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),r.constructor=t)}var xs={},Zi=xs.ELEMENT_NODE=1,Hg=xs.ATTRIBUTE_NODE=2,l2=xs.TEXT_NODE=3,_Q=xs.CDATA_SECTION_NODE=4,SQ=xs.ENTITY_REFERENCE_NODE=5,jrt=xs.ENTITY_NODE=6,AQ=xs.PROCESSING_INSTRUCTION_NODE=7,EQ=xs.COMMENT_NODE=8,CQ=xs.DOCUMENT_NODE=9,TQ=xs.DOCUMENT_TYPE_NODE=10,oc=xs.DOCUMENT_FRAGMENT_NODE=11,Nrt=xs.NOTATION_NODE=12,La={},ia={};La.INDEX_SIZE_ERR=(ia[1]="Index size error",1);La.DOMSTRING_SIZE_ERR=(ia[2]="DOMString size error",2);var is=La.HIERARCHY_REQUEST_ERR=(ia[3]="Hierarchy request error",3);La.WRONG_DOCUMENT_ERR=(ia[4]="Wrong document",4);La.INVALID_CHARACTER_ERR=(ia[5]="Invalid character",5);La.NO_DATA_ALLOWED_ERR=(ia[6]="No data allowed",6);La.NO_MODIFICATION_ALLOWED_ERR=(ia[7]="No modification allowed",7);var OQ=La.NOT_FOUND_ERR=(ia[8]="Not found",8);La.NOT_SUPPORTED_ERR=(ia[9]="Not supported",9);var $9=La.INUSE_ATTRIBUTE_ERR=(ia[10]="Attribute in use",10);La.INVALID_STATE_ERR=(ia[11]="Invalid state",11);La.SYNTAX_ERR=(ia[12]="Syntax error",12);La.INVALID_MODIFICATION_ERR=(ia[13]="Invalid modification",13);La.NAMESPACE_ERR=(ia[14]="Invalid namespace",14);La.INVALID_ACCESS_ERR=(ia[15]="Invalid access",15);function vn(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,ia[t]),this.message=ia[t],Error.captureStackTrace&&Error.captureStackTrace(this,vn);return r.code=t,e&&(this.message=this.message+": "+e),r}vn.prototype=Error.prototype;Kb(La,vn);function Ul(){}Ul.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)If(this[n],r,t,e);return r.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Wg(t,e){this._node=t,this._refresh=e,gI(this)}function gI(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var r=t._refresh(t._node);if(KQ(t,"length",r.length),!t.$$length||r.length<t.$$length)for(var n=r.length;n in t;n++)Object.prototype.hasOwnProperty.call(t,n)&&delete t[n];Kb(r,t),t._inc=e}}Wg.prototype.item=function(t){return gI(this),this[t]||null};ps(Wg,Ul);function c2(){}function IQ(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function F9(t,e,r,n){if(n?e[IQ(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var s=t.ownerDocument;s&&(n&&LQ(s,t,n),_rt(s,t,r))}}function B9(t,e,r){var n=IQ(e,r);if(n>=0){for(var s=e.length-1;n<s;)e[n]=e[++n];if(e.length=s,t){var i=t.ownerDocument;i&&(LQ(i,t,r),r.ownerElement=null)}}else throw new vn(OQ,new Error(t.tagName+"@"+r))}c2.prototype={length:0,item:Ul.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new vn($9);var r=this.getNamedItem(t.nodeName);return F9(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e=t.ownerElement,r;if(e&&e!=this._ownerElement)throw new vn($9);return r=this.getNamedItemNS(t.namespaceURI,t.localName),F9(this._ownerElement,this,t,r),r},removeNamedItem:function(t){var e=this.getNamedItem(t);return B9(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return B9(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}};function DQ(){}DQ.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,r){var n=new Gb;if(n.implementation=this,n.childNodes=new Ul,n.doctype=r||null,r&&n.appendChild(r),e){var s=n.createElementNS(t,e);n.appendChild(s)}return n},createDocumentType:function(t,e,r){var n=new Dj;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=r||"",n}};function Ar(){}Ar.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return d2(this,t,e)},replaceChild:function(t,e){d2(this,t,e,PQ),e&&this.removeChild(e)},removeChild:function(t){return RQ(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return z3(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==l2&&t.nodeType==l2?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===t)return n}e=e.nodeType==Hg?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&t in r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];e=e.nodeType==Hg?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function MQ(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Kb(xs,Ar);Kb(xs,Ar.prototype);function Vx(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Vx(t,e))return!0;while(t=t.nextSibling)}function Gb(){this.ownerDocument=this}function _rt(t,e,r){t&&t._inc++;var n=r.namespaceURI;n===qx.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function LQ(t,e,r,n){t&&t._inc++;var s=r.namespaceURI;s===qx.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function mI(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var s=e.firstChild,i=0;s;)n[i++]=s,s=s.nextSibling;n.length=i,delete n[n.length]}}}function RQ(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,mI(t.ownerDocument,t),e}function Srt(t){return t&&(t.nodeType===Ar.DOCUMENT_NODE||t.nodeType===Ar.DOCUMENT_FRAGMENT_NODE||t.nodeType===Ar.ELEMENT_NODE)}function Art(t){return t&&(qo(t)||pI(t)||lc(t)||t.nodeType===Ar.DOCUMENT_FRAGMENT_NODE||t.nodeType===Ar.COMMENT_NODE||t.nodeType===Ar.PROCESSING_INSTRUCTION_NODE)}function lc(t){return t&&t.nodeType===Ar.DOCUMENT_TYPE_NODE}function qo(t){return t&&t.nodeType===Ar.ELEMENT_NODE}function pI(t){return t&&t.nodeType===Ar.TEXT_NODE}function U9(t,e){var r=t.childNodes||[];if(Go(r,qo)||lc(e))return!1;var n=Go(r,lc);return!(e&&n&&r.indexOf(n)>r.indexOf(e))}function K9(t,e){var r=t.childNodes||[];function n(i){return qo(i)&&i!==e}if(Go(r,n))return!1;var s=Go(r,lc);return!(e&&s&&r.indexOf(s)>r.indexOf(e))}function Ert(t,e,r){if(!Srt(t))throw new vn(is,"Unexpected parent node type "+t.nodeType);if(r&&r.parentNode!==t)throw new vn(OQ,"child not in parent");if(!Art(e)||lc(e)&&t.nodeType!==Ar.DOCUMENT_NODE)throw new vn(is,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function Crt(t,e,r){var n=t.childNodes||[],s=e.childNodes||[];if(e.nodeType===Ar.DOCUMENT_FRAGMENT_NODE){var i=s.filter(qo);if(i.length>1||Go(s,pI))throw new vn(is,"More than one element or text in fragment");if(i.length===1&&!U9(t,r))throw new vn(is,"Element in fragment can not be inserted before doctype")}if(qo(e)&&!U9(t,r))throw new vn(is,"Only one element can be added and only after doctype");if(lc(e)){if(Go(n,lc))throw new vn(is,"Only one doctype is allowed");var o=Go(n,qo);if(r&&n.indexOf(o)<n.indexOf(r))throw new vn(is,"Doctype can only be inserted before an element");if(!r&&o)throw new vn(is,"Doctype can not be appended since element is present")}}function PQ(t,e,r){var n=t.childNodes||[],s=e.childNodes||[];if(e.nodeType===Ar.DOCUMENT_FRAGMENT_NODE){var i=s.filter(qo);if(i.length>1||Go(s,pI))throw new vn(is,"More than one element or text in fragment");if(i.length===1&&!K9(t,r))throw new vn(is,"Element in fragment can not be inserted before doctype")}if(qo(e)&&!K9(t,r))throw new vn(is,"Only one element can be added and only after doctype");if(lc(e)){let c=function(d){return lc(d)&&d!==r};var l=c;if(Go(n,c))throw new vn(is,"Only one doctype is allowed");var o=Go(n,qo);if(r&&n.indexOf(o)<n.indexOf(r))throw new vn(is,"Doctype can only be inserted before an element")}}function d2(t,e,r,n){Ert(t,e,r),t.nodeType===Ar.DOCUMENT_NODE&&(n||Crt)(t,e,r);var s=e.parentNode;if(s&&s.removeChild(e),e.nodeType===oc){var i=e.firstChild;if(i==null)return e;var o=e.lastChild}else i=o=e;var l=r?r.previousSibling:t.lastChild;i.previousSibling=l,o.nextSibling=r,l?l.nextSibling=i:t.firstChild=i,r==null?t.lastChild=o:r.previousSibling=o;do i.parentNode=t;while(i!==o&&(i=i.nextSibling));return mI(t.ownerDocument||t,t),e.nodeType==oc&&(e.firstChild=e.lastChild=null),e}function Trt(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,mI(t.ownerDocument,t,e),e}Gb.prototype={nodeName:"#document",nodeType:CQ,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==oc){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return d2(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Zi&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),RQ(this,t)},replaceChild:function(t,e){d2(this,t,e,PQ),t.ownerDocument=this,e&&this.removeChild(e),qo(t)&&(this.documentElement=t)},importNode:function(t,e){return UQ(this,t,e)},getElementById:function(t){var e=null;return Vx(this.documentElement,function(r){if(r.nodeType==Zi&&r.getAttribute("id")==t)return e=r,!0}),e},getElementsByClassName:function(t){var e=z9(t);return new Wg(this,function(r){var n=[];return e.length>0&&Vx(r.documentElement,function(s){if(s!==r&&s.nodeType===Zi){var i=s.getAttribute("class");if(i){var o=t===i;if(!o){var l=z9(i);o=e.every(wrt(l))}o&&n.push(s)}}}),n})},createElement:function(t){var e=new sh;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new Ul;var r=e.attributes=new c2;return r._ownerElement=e,e},createDocumentFragment:function(){var t=new Mj;return t.ownerDocument=this,t.childNodes=new Ul,t},createTextNode:function(t){var e=new xI;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new bI;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new yI;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new kI;return r.ownerDocument=this,r.tagName=r.nodeName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new u2;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new vI;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new sh,n=e.split(":"),s=r.attributes=new c2;return r.childNodes=new Ul,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,s._ownerElement=r,r},createAttributeNS:function(t,e){var r=new u2,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}};ps(Gb,Ar);function sh(){this._nsMap={}}sh.prototype={nodeType:Zi,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===oc?this.insertBefore(t,null):Trt(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Wg(this,function(e){var r=[];return Vx(e,function(n){n!==e&&n.nodeType==Zi&&(t==="*"||n.tagName==t)&&r.push(n)}),r})},getElementsByTagNameNS:function(t,e){return new Wg(this,function(r){var n=[];return Vx(r,function(s){s!==r&&s.nodeType===Zi&&(t==="*"||s.namespaceURI===t)&&(e==="*"||s.localName==e)&&n.push(s)}),n})}};Gb.prototype.getElementsByTagName=sh.prototype.getElementsByTagName;Gb.prototype.getElementsByTagNameNS=sh.prototype.getElementsByTagNameNS;ps(sh,Ar);function u2(){}u2.prototype.nodeType=Hg;ps(u2,Ar);function qb(){}qb.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(ia[is])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){var n=this.data.substring(0,t),s=this.data.substring(t+e);r=n+r+s,this.nodeValue=this.data=r,this.length=r.length}};ps(qb,Ar);function xI(){}xI.prototype={nodeName:"#text",nodeType:l2,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};ps(xI,qb);function bI(){}bI.prototype={nodeName:"#comment",nodeType:EQ};ps(bI,qb);function yI(){}yI.prototype={nodeName:"#cdata-section",nodeType:_Q};ps(yI,qb);function Dj(){}Dj.prototype.nodeType=TQ;ps(Dj,Ar);function zQ(){}zQ.prototype.nodeType=Nrt;ps(zQ,Ar);function $Q(){}$Q.prototype.nodeType=jrt;ps($Q,Ar);function vI(){}vI.prototype.nodeType=SQ;ps(vI,Ar);function Mj(){}Mj.prototype.nodeName="#document-fragment";Mj.prototype.nodeType=oc;ps(Mj,Ar);function kI(){}kI.prototype.nodeType=AQ;ps(kI,Ar);function FQ(){}FQ.prototype.serializeToString=function(t,e,r){return BQ.call(t,e,r)};Ar.prototype.toString=BQ;function BQ(t,e){var r=[],n=this.nodeType==9&&this.documentElement||this,s=n.prefix,i=n.namespaceURI;if(i&&s==null){var s=n.lookupPrefix(i);if(s==null)var o=[{namespace:i,prefix:null}]}return If(this,r,t,e,o),r.join("")}function G9(t,e,r){var n=t.prefix||"",s=t.namespaceURI;if(!s||n==="xml"&&s===qx.XML||s===qx.XMLNS)return!1;for(var i=r.length;i--;){var o=r[i];if(o.prefix===n)return o.namespace!==s}return!0}function xS(t,e,r){t.push(" ",e,'="',r.replace(/[<&"]/g,MQ),'"')}function If(t,e,r,n,s){if(s||(s=[]),n)if(t=n(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Zi:var i=t.attributes,o=i.length,b=t.firstChild,l=t.tagName;r=qx.isHTML(t.namespaceURI)||r;var c=l;if(!r&&!t.prefix&&t.namespaceURI){for(var d,u=0;u<i.length;u++)if(i.item(u).name==="xmlns"){d=i.item(u).value;break}if(!d)for(var h=s.length-1;h>=0;h--){var f=s[h];if(f.prefix===""&&f.namespace===t.namespaceURI){d=f.namespace;break}}if(d!==t.namespaceURI)for(var h=s.length-1;h>=0;h--){var f=s[h];if(f.namespace===t.namespaceURI){f.prefix&&(c=f.prefix+":"+l);break}}}e.push("<",c);for(var g=0;g<o;g++){var x=i.item(g);x.prefix=="xmlns"?s.push({prefix:x.localName,namespace:x.value}):x.nodeName=="xmlns"&&s.push({prefix:"",namespace:x.value})}for(var g=0;g<o;g++){var x=i.item(g);if(G9(x,r,s)){var m=x.prefix||"",p=x.namespaceURI;xS(e,m?"xmlns:"+m:"xmlns",p),s.push({prefix:m,namespace:p})}If(x,e,r,n,s)}if(l===c&&G9(t,r,s)){var m=t.prefix||"",p=t.namespaceURI;xS(e,m?"xmlns:"+m:"xmlns",p),s.push({prefix:m,namespace:p})}if(b||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),r&&/^script$/i.test(l))for(;b;)b.data?e.push(b.data):If(b,e,r,n,s.slice()),b=b.nextSibling;else for(;b;)If(b,e,r,n,s.slice()),b=b.nextSibling;e.push("</",c,">")}else e.push("/>");return;case CQ:case oc:for(var b=t.firstChild;b;)If(b,e,r,n,s.slice()),b=b.nextSibling;return;case Hg:return xS(e,t.name,t.value);case l2:return e.push(t.data.replace(/[<&]/g,MQ).replace(/]]>/g,"]]&gt;"));case _Q:return e.push("<![CDATA[",t.data,"]]>");case EQ:return e.push("<!--",t.data,"-->");case TQ:var v=t.publicId,y=t.systemId;if(e.push("<!DOCTYPE ",t.name),v)e.push(" PUBLIC ",v),y&&y!="."&&e.push(" ",y),e.push(">");else if(y&&y!=".")e.push(" SYSTEM ",y,">");else{var w=t.internalSubset;w&&e.push(" [",w,"]"),e.push(">")}return;case AQ:return e.push("<?",t.target," ",t.data,"?>");case SQ:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function UQ(t,e,r){var n;switch(e.nodeType){case Zi:n=e.cloneNode(!1),n.ownerDocument=t;case oc:break;case Hg:r=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,r)for(var s=e.firstChild;s;)n.appendChild(UQ(t,s,r)),s=s.nextSibling;return n}function z3(t,e,r){var n=new e.constructor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var i=e[s];typeof i!="object"&&i!=n[s]&&(n[s]=i)}switch(e.childNodes&&(n.childNodes=new Ul),n.ownerDocument=t,n.nodeType){case Zi:var o=e.attributes,l=n.attributes=new c2,c=o.length;l._ownerElement=n;for(var d=0;d<c;d++)n.setAttributeNode(z3(t,o.item(d),!0));break;case Hg:r=!0}if(r)for(var u=e.firstChild;u;)n.appendChild(z3(t,u,r)),u=u.nextSibling;return n}function KQ(t,e,r){t[e]=r}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Zi:case oc:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};var Glt=t;Object.defineProperty(Wg.prototype,"length",{get:function(){return gI(this),this.$$length}}),Object.defineProperty(Ar.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Zi:case oc:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),KQ=function(e,r,n){e["$$"+r]=n}}}catch{}Hd.DocumentType=Dj;Hd.DOMException=vn;Hd.DOMImplementation=DQ;Hd.Element=sh;Hd.Node=Ar;Hd.NodeList=Ul;Hd.XMLSerializer=FQ;var Vb={},GQ={};(function(t){var e=Wd.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(GQ);var wI={},Hx=Wd.NAMESPACE,$3=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q9=new RegExp("[\\-\\.0-9"+$3.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),V9=new RegExp("^"+$3.source+q9.source+"*(?::"+$3.source+q9.source+"*)?$"),vp=0,Sc=1,Hh=2,kp=3,Wh=4,Xh=5,wp=6,sv=7;function Xg(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Xg)}Xg.prototype=new Error;Xg.prototype.name=Xg.name;function qQ(){}qQ.prototype={parse:function(t,e,r){var n=this.domBuilder;n.startDocument(),VQ(e,e={}),Ort(t,e,r,n,this.errorHandler),n.endDocument()}};function Ort(t,e,r,n,s){function i(D){if(D>65535){D-=65536;var L=55296+(D>>10),K=56320+(D&1023);return String.fromCharCode(L,K)}else return String.fromCharCode(D)}function o(D){var L=D.slice(1,-1);return L in r?r[L]:L.charAt(0)==="#"?i(parseInt(L.substr(1).replace("x","0x"))):(s.error("entity not found:"+D),D)}function l(D){if(D>m){var L=t.substring(m,D).replace(/&#?\w+;/g,o);f&&c(m),n.characters(L,0,D-m),m=D}}function c(D,L){for(;D>=u&&(L=h.exec(t));)d=L.index,u=d+L[0].length,f.lineNumber++;f.columnNumber=D-d+1}for(var d=0,u=0,h=/.*(?:\r\n?|\n)|.*$/g,f=n.locator,g=[{currentNSMap:e}],x={},m=0;;){try{var p=t.indexOf("<",m);if(p<0){if(!t.substr(m).match(/^\s*$/)){var b=n.doc,v=b.createTextNode(t.substr(m));b.appendChild(v),n.currentElement=v}return}switch(p>m&&l(p),t.charAt(p+1)){case"/":var E=t.indexOf(">",p+3),y=t.substring(p+2,E).replace(/[ \t\n\r]+$/g,""),w=g.pop();E<0?(y=t.substring(p+2).replace(/[\s<].*/,""),s.error("end tag name: "+y+" is not complete:"+w.tagName),E=p+1+y.length):y.match(/\s</)&&(y=y.replace(/[\s<].*/,""),s.error("end tag name: "+y+" maybe not complete"),E=p+1+y.length);var k=w.localNSMap,j=w.tagName==y,_=j||w.tagName&&w.tagName.toLowerCase()==y.toLowerCase();if(_){if(n.endElement(w.uri,w.localName,y),k)for(var S in k)Object.prototype.hasOwnProperty.call(k,S)&&n.endPrefixMapping(S);j||s.fatalError("end tag name: "+y+" is not match the current start tagName:"+w.tagName)}else g.push(w);E++;break;case"?":f&&c(p),E=Rrt(t,p,n);break;case"!":f&&c(p),E=Lrt(t,p,n,s);break;default:f&&c(p);var A=new HQ,T=g[g.length-1].currentNSMap,E=Irt(t,p,A,T,o,s),C=A.length;if(!A.closed&&Mrt(t,E,A.tagName,x)&&(A.closed=!0,r.nbsp||s.warning("unclosed xml attribute")),f&&C){for(var z=H9(f,{}),M=0;M<C;M++){var F=A[M];c(F.offset),F.locator=H9(f,{})}n.locator=z,W9(A,n,T)&&g.push(A),n.locator=f}else W9(A,n,T)&&g.push(A);Hx.isHTML(A.uri)&&!A.closed?E=Drt(t,E,A.tagName,o,n):E++}}catch(D){if(D instanceof Xg)throw D;s.error("element parse error: "+D),E=-1}E>m?m=E:l(Math.max(p,m)+1)}}function H9(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function Irt(t,e,r,n,s,i){function o(f,g,x){r.attributeNames.hasOwnProperty(f)&&i.fatalError("Attribute "+f+" redefined"),r.addValue(f,g,x)}for(var l,c,d=++e,u=vp;;){var h=t.charAt(d);switch(h){case"=":if(u===Sc)l=t.slice(e,d),u=kp;else if(u===Hh)u=kp;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(u===kp||u===Sc)if(u===Sc&&(i.warning('attribute value must after "="'),l=t.slice(e,d)),e=d+1,d=t.indexOf(h,e),d>0)c=t.slice(e,d).replace(/&#?\w+;/g,s),o(l,c,e-1),u=Xh;else throw new Error("attribute value no end '"+h+"' match");else if(u==Wh)c=t.slice(e,d).replace(/&#?\w+;/g,s),o(l,c,e),i.warning('attribute "'+l+'" missed start quot('+h+")!!"),e=d+1,u=Xh;else throw new Error('attribute value must after "="');break;case"/":switch(u){case vp:r.setTagName(t.slice(e,d));case Xh:case wp:case sv:u=sv,r.closed=!0;case Wh:case Sc:break;case Hh:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),u==vp&&r.setTagName(t.slice(e,d)),d;case">":switch(u){case vp:r.setTagName(t.slice(e,d));case Xh:case wp:case sv:break;case Wh:case Sc:c=t.slice(e,d),c.slice(-1)==="/"&&(r.closed=!0,c=c.slice(0,-1));case Hh:u===Hh&&(c=l),u==Wh?(i.warning('attribute "'+c+'" missed quot(")!'),o(l,c.replace(/&#?\w+;/g,s),e)):((!Hx.isHTML(n[""])||!c.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),o(c,c,e));break;case kp:throw new Error("attribute value missed!!")}return d;case"":h=" ";default:if(h<=" ")switch(u){case vp:r.setTagName(t.slice(e,d)),u=wp;break;case Sc:l=t.slice(e,d),u=Hh;break;case Wh:var c=t.slice(e,d).replace(/&#?\w+;/g,s);i.warning('attribute "'+c+'" missed quot(")!!'),o(l,c,e);case Xh:u=wp;break}else switch(u){case Hh:r.tagName,(!Hx.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),o(l,l,e),e=d,u=Sc;break;case Xh:i.warning('attribute space is required"'+l+'"!!');case wp:u=Sc,e=d;break;case kp:u=Wh,e=d;break;case sv:throw new Error("elements closed character '/' and '>' must be connected to")}}d++}}function W9(t,e,r){for(var n=t.tagName,s=null,h=t.length;h--;){var i=t[h],o=i.qName,l=i.value,f=o.indexOf(":");if(f>0)var c=i.prefix=o.slice(0,f),d=o.slice(f+1),u=c==="xmlns"&&d;else d=o,c=null,u=o==="xmlns"&&"";i.localName=d,u!==!1&&(s==null&&(s={},VQ(r,r={})),r[u]=s[u]=l,i.uri=Hx.XMLNS,e.startPrefixMapping(u,l))}for(var h=t.length;h--;){i=t[h];var c=i.prefix;c&&(c==="xml"&&(i.uri=Hx.XML),c!=="xmlns"&&(i.uri=r[c||""]))}var f=n.indexOf(":");f>0?(c=t.prefix=n.slice(0,f),d=t.localName=n.slice(f+1)):(c=null,d=t.localName=n);var g=t.uri=r[c||""];if(e.startElement(g,d,n,t),t.closed){if(e.endElement(g,d,n),s)for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&e.endPrefixMapping(c)}else return t.currentNSMap=r,t.localNSMap=s,!0}function Drt(t,e,r,n,s){if(/^(?:script|textarea)$/i.test(r)){var i=t.indexOf("</"+r+">",e),o=t.substring(e+1,i);if(/[&<]/.test(o))return/^script$/i.test(r)?(s.characters(o,0,o.length),i):(o=o.replace(/&#?\w+;/g,n),s.characters(o,0,o.length),i)}return e+1}function Mrt(t,e,r,n){var s=n[r];return s==null&&(s=t.lastIndexOf("</"+r+">"),s<e&&(s=t.lastIndexOf("</"+r)),n[r]=s),s<e}function VQ(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function Lrt(t,e,r,n){var s=t.charAt(e+2);switch(s){case"-":if(t.charAt(e+3)==="-"){var i=t.indexOf("-->",e+4);return i>e?(r.comment(t,e+4,i-e-4),i+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var i=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,i-e-9),r.endCDATA(),i+3}var o=Prt(t,e),l=o.length;if(l>1&&/!doctype/i.test(o[0][0])){var c=o[1][0],d=!1,u=!1;l>3&&(/^public$/i.test(o[2][0])?(d=o[3][0],u=l>4&&o[4][0]):/^system$/i.test(o[2][0])&&(u=o[3][0]));var h=o[l-1];return r.startDTD(c,d,u),r.endDTD(),h.index+h[0].length}}return-1}function Rrt(t,e,r){var n=t.indexOf("?>",e);if(n){var s=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return s?(s[0].length,r.processingInstruction(s[1],s[2]),n+2):-1}return-1}function HQ(){this.attributeNames={}}HQ.prototype={setTagName:function(t){if(!V9.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!V9.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function Prt(t,e){var r,n=[],s=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(s.lastIndex=e,s.exec(t);r=s.exec(t);)if(n.push(r),r[1])return n}wI.XMLReader=qQ;wI.ParseError=Xg;var zrt=Wd,jI=Hd,X9=GQ,WQ=wI,$rt=jI.DOMImplementation,Y9=zrt.NAMESPACE,Frt=WQ.ParseError,Brt=WQ.XMLReader;function XQ(t){this.options=t||{locator:{}}}XQ.prototype.parseFromString=function(t,e){var r=this.options,n=new Brt,s=r.domBuilder||new Hb,i=r.errorHandler,o=r.locator,l=r.xmlns||{},c=/\/x?html?$/.test(e),d=c?X9.HTML_ENTITIES:X9.XML_ENTITIES;return o&&s.setDocumentLocator(o),n.errorHandler=Urt(i,s,o),n.domBuilder=r.domBuilder||s,c&&(l[""]=Y9.HTML),l.xml=l.xml||Y9.XML,t&&typeof t=="string"?n.parse(t,l,d):n.errorHandler.error("invalid doc source"),s.doc};function Urt(t,e,r){if(!t){if(e instanceof Hb)return e;t=e}var n={},s=t instanceof Function;r=r||{};function i(o){var l=t[o];!l&&s&&(l=t.length==2?function(c){t(o,c)}:t),n[o]=l&&function(c){l("[xmldom "+o+"]	"+c+F3(r))}||function(){}}return i("warning"),i("error"),i("fatalError"),n}function Hb(){this.cdata=!1}function Yh(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}Hb.prototype={startDocument:function(){this.doc=new $rt().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var s=this.doc,i=s.createElementNS(t,r||e),o=n.length;iv(this,i),this.currentElement=i,this.locator&&Yh(this.locator,i);for(var l=0;l<o;l++){var t=n.getURI(l),c=n.getValue(l),r=n.getQName(l),d=s.createAttributeNS(t,r);this.locator&&Yh(n.getLocator(l),d),d.value=d.nodeValue=c,i.setAttributeNode(d)}},endElement:function(t,e,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&Yh(this.locator,r),iv(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=Z9.apply(this,arguments),t){if(this.cdata)var n=this.doc.createCDATASection(t);else var n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&Yh(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=Z9.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&Yh(this.locator,n),iv(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var s=n.createDocumentType(t,e,r);this.locator&&Yh(this.locator,s),iv(this,s),this.doc.doctype=s}},warning:function(t){console.warn("[xmldom warning]	"+t,F3(this.locator))},error:function(t){console.error("[xmldom error]	"+t,F3(this.locator))},fatalError:function(t){throw new Frt(t,this.locator)}};function F3(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function Z9(t,e,r){return typeof t=="string"?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){Hb.prototype[t]=function(){return null}});function iv(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}Vb.__DOMHandler=Hb;Vb.DOMParser=XQ;Vb.DOMImplementation=jI.DOMImplementation;Vb.XMLSerializer=jI.XMLSerializer;var YQ=Vb.DOMParser;const NI=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,Krt=1,Grt=3,ZQ=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function Lj(){var t=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r=="x"?n:n&7|8).toString(16)});return e}function qrt(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function QQ(t){return!!(t&&t.nodeType==1)}function xn(t){return!isNaN(parseFloat(t))&&isFinite(t)}function JQ(t){let e=parseFloat(t);return xn(t)===!1?!1:typeof t=="string"&&t.indexOf(".")>-1?!0:Math.floor(e)!==e}function lf(t){var e=["Webkit","webkit","Moz","O","ms"],r=["-webkit-","-webkit-","-moz-","-o-","-ms-"],n=t.toLowerCase(),s=e.length;if(typeof document>"u"||typeof document.body.style[n]<"u")return t;for(var i=0;i<s;i++)if(typeof document.body.style[r[i]+n]<"u")return r[i]+n;return t}function eJ(t){for(var e=1,r=arguments.length;e<r;e++){var n=arguments[e];for(var s in n)t[s]===void 0&&(t[s]=n[s])}return t}function wa(t){var e=[].slice.call(arguments,1);return e.forEach(function(r){r&&Object.getOwnPropertyNames(r).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}),t}function Vrt(t,e,r){var n=Yg(t,e,r);return e.splice(n,0,t),n}function Yg(t,e,r,n,s){var i=n||0,o=s||e.length,l=parseInt(i+(o-i)/2),c;return r||(r=function(d,u){if(d>u)return 1;if(d<u)return-1;if(d==u)return 0}),o-i<=0?l:(c=r(e[l],t),o-i===1?c>=0?l:l+1:c===0?l:c===-1?Yg(t,e,r,l,o):Yg(t,e,r,i,l))}function h2(t,e,r,n,s){var i=n||0,o=s||e.length,l=parseInt(i+(o-i)/2),c;return r||(r=function(d,u){if(d>u)return 1;if(d<u)return-1;if(d==u)return 0}),o-i<=0?-1:(c=r(e[l],t),o-i===1?c===0?l:-1:c===0?l:c===-1?h2(t,e,r,l,o):h2(t,e,r,i,l))}function Gv(t){var e=window.getComputedStyle(t),r=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],n=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],s=0,i=0;return r.forEach(function(o){s+=parseFloat(e[o])||0}),n.forEach(function(o){i+=parseFloat(e[o])||0}),{height:i,width:s}}function f2(t){var e=window.getComputedStyle(t),r=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],n=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],s=0,i=0;return r.forEach(function(o){s+=parseFloat(e[o])||0}),n.forEach(function(o){i+=parseFloat(e[o])||0}),{height:i,width:s}}function B3(t){let e,r=t.ownerDocument;if(t.nodeType==Node.TEXT_NODE){let n=r.createRange();n.selectNodeContents(t),e=n.getBoundingClientRect()}else e=t.getBoundingClientRect();return e}function g2(){var t=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:t,bottom:e,width:t,height:e}}function _I(t,e){for(var r=t.parentNode,n=r.childNodes,s,i=-1,o=0;o<n.length&&(s=n[o],s.nodeType===e&&i++,s!=t);o++);return i}function Hrt(t){return _I(t,Grt)}function tJ(t){return _I(t,Krt)}function Wx(t){return["xml","opf","ncx"].indexOf(t)>-1}function rJ(t,e){return new Blob([t],{type:e})}function m2(t,e){var r,n=rJ(t,e);return r=ZQ.createObjectURL(n),r}function nJ(t){return ZQ.revokeObjectURL(t)}function U3(t,e){var r,n;if(typeof t=="string")return r=btoa(t),n="data:"+e+";base64,"+r,n}function aJ(t){return Object.prototype.toString.call(t).slice(8,-1)}function Vo(t,e,r){var n,s;return typeof DOMParser>"u"||r?s=YQ:s=DOMParser,t.charCodeAt(0)===65279&&(t=t.slice(1)),n=new s().parseFromString(t,e),n}function Rr(t,e){var r;if(!t)throw new Error("No Element Provided");if(typeof t.querySelector<"u")return t.querySelector(e);if(r=t.getElementsByTagName(e),r.length)return r[0]}function cc(t,e){return typeof t.querySelector<"u"?t.querySelectorAll(e):t.getElementsByTagName(e)}function cf(t,e,r){var n,s;if(typeof t.querySelector<"u"){e+="[";for(var i in r)e+=i+"~='"+r[i]+"'";return e+="]",t.querySelector(e)}else if(n=t.getElementsByTagName(e),s=Array.prototype.slice.call(n,0).filter(function(o){for(var l in r)if(o.getAttribute(l)===r[l])return!0;return!1}),s)return s[0]}function p2(t,e){var r=t.ownerDocument||t;typeof r.createTreeWalker<"u"?sJ(t,e,NodeFilter.SHOW_TEXT):SI(t,function(n){n&&n.nodeType===3&&e(n)})}function sJ(t,e,r){var n=document.createTreeWalker(t,r,null,!1);let s;for(;s=n.nextNode();)e(s)}function SI(t,e){if(e(t))return!0;if(t=t.firstChild,t)do{if(SI(t,e))return!0;t=t.nextSibling}while(t)}function iJ(t){return new Promise(function(e,r){var n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){e(n.result)}})}function ar(){this.resolve=null,this.reject=null,this.id=Lj(),this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e}),Object.freeze(this)}function x2(t,e,r){var n;if(typeof t.querySelector<"u"&&(n=t.querySelector(`${e}[*|type="${r}"]`)),!n||n.length===0){n=cc(t,e);for(var s=0;s<n.length;s++)if(n[s].getAttributeNS("http://www.idpf.org/2007/ops","type")===r||n[s].getAttribute("epub:type")===r)return n[s]}else return n}function K3(t){for(var e=[],r=t.childNodes,n=0;n<r.length;n++){let s=r[n];s.nodeType===1&&e.push(s)}return e}function G3(t){for(var e=[t];t;t=t.parentNode)e.unshift(t);return e}function df(t,e,r){for(var n=[],s=t.childNodes,i=0;i<s.length;i++){let o=s[i];if(o.nodeType===1&&o.nodeName.toLowerCase()===e){if(r)return o;n.push(o)}}if(!r)return n}function Wrt(t,e){let r;if(!(t===null||e===""))for(r=t.parentNode;r.nodeType===1;){if(r.tagName.toLowerCase()===e)return r;r=r.parentNode}}class oJ{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,r){this.startContainer=e,this.startOffset=r,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,r){this.endContainer=e,this.endOffset=r,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let r=e.parentNode,n=Array.prototype.indexOf.call(r.childNodes,e);this.setStart(r,n),this.setEnd(r,n+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let r=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,r)}_commonAncestorContainer(e,r){var n=G3(e||this.startContainer),s=G3(r||this.endContainer);if(n[0]==s[0]){for(var i=0;i<n.length;i++)if(n[i]!=s[i])return n[i-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const Xrt=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:oJ,blob2base64:iJ,borders:f2,bounds:Gv,createBase64Url:U3,createBlob:rJ,createBlobUrl:m2,defaults:eJ,defer:ar,documentHeight:qrt,extend:wa,filterChildren:df,findChildren:K3,getParentByTagName:Wrt,indexOfElementNode:tJ,indexOfNode:_I,indexOfSorted:h2,indexOfTextNode:Hrt,insert:Vrt,isElement:QQ,isFloat:JQ,isNumber:xn,isXml:Wx,locationOf:Yg,nodeBounds:B3,parents:G3,parse:Vo,prefixed:lf,qs:Rr,qsa:cc,qsp:cf,querySelectorByType:x2,requestAnimationFrame:NI,revokeBlobUrl:nJ,sprint:p2,treeWalker:sJ,type:aJ,uuid:Lj,walk:SI,windowBounds:g2},Symbol.toStringTag,{value:"Module"}));if(!lJ)var lJ={cwd:function(){return"/"}};function xo(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+t)}function Q9(t,e){for(var r="",n=-1,s=0,i,o=0;o<=t.length;++o){if(o<t.length)i=t.charCodeAt(o);else{if(i===47)break;i=47}if(i===47){if(!(n===o-1||s===1))if(n!==o-1&&s===2){if(r.length<2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){for(var l=r.length-1,c=l;c>=0&&r.charCodeAt(c)!==47;--c);if(c!==l){c===-1?r="":r=r.slice(0,c),n=o,s=0;continue}}else if(r.length===2||r.length===1){r="",n=o,s=0;continue}}e&&(r.length>0?r+="/..":r="..")}else r.length>0?r+="/"+t.slice(n+1,o):r=t.slice(n+1,o);n=o,s=0}else i===46&&s!==-1?++s:s=-1}return r}function Yrt(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var qv={resolve:function(){for(var e="",r=!1,n,s=arguments.length-1;s>=-1&&!r;s--){var i;s>=0?i=arguments[s]:(n===void 0&&(n=lJ.cwd()),i=n),xo(i),i.length!==0&&(e=i+"/"+e,r=i.charCodeAt(0)===47)}return e=Q9(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(xo(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Q9(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return xo(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];xo(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":qv.normalize(e)},relative:function(e,r){if(xo(e),xo(r),e===r||(e=qv.resolve(e),r=qv.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var s=e.length,i=s-n,o=1;o<r.length&&r.charCodeAt(o)===47;++o);for(var l=r.length,c=l-o,d=i<c?i:c,u=-1,h=0;h<=d;++h){if(h===d){if(c>d){if(r.charCodeAt(o+h)===47)return r.slice(o+h+1);if(h===0)return r.slice(o+h)}else i>d&&(e.charCodeAt(n+h)===47?u=h:h===0&&(u=0));break}var f=e.charCodeAt(n+h),g=r.charCodeAt(o+h);if(f!==g)break;f===47&&(u=h)}var x="";for(h=n+u+1;h<=s;++h)(h===s||e.charCodeAt(h)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+r.slice(o+u):(o+=u,r.charCodeAt(o)===47&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(xo(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,s=-1,i=!0,o=e.length-1;o>=1;--o)if(r=e.charCodeAt(o),r===47){if(!i){s=o;break}}else i=!1;return s===-1?n?"/":".":n&&s===1?"//":e.slice(0,s)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');xo(e);var n=0,s=-1,i=!0,o;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var l=r.length-1,c=-1;for(o=e.length-1;o>=0;--o){var d=e.charCodeAt(o);if(d===47){if(!i){n=o+1;break}}else c===-1&&(i=!1,c=o+1),l>=0&&(d===r.charCodeAt(l)?--l===-1&&(s=o):(l=-1,s=c))}return n===s?s=c:s===-1&&(s=e.length),e.slice(n,s)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!i){n=o+1;break}}else s===-1&&(i=!1,s=o+1);return s===-1?"":e.slice(n,s)}},extname:function(e){xo(e);for(var r=-1,n=0,s=-1,i=!0,o=0,l=e.length-1;l>=0;--l){var c=e.charCodeAt(l);if(c===47){if(!i){n=l+1;break}continue}s===-1&&(i=!1,s=l+1),c===46?r===-1?r=l:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return Yrt("/",e)},parse:function(e){xo(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),s=n===47,i;s?(r.root="/",i=1):i=0;for(var o=-1,l=0,c=-1,d=!0,u=e.length-1,h=0;u>=i;--u){if(n=e.charCodeAt(u),n===47){if(!d){l=u+1;break}continue}c===-1&&(d=!1,c=u+1),n===46?o===-1?o=u:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||c===-1||h===0||h===1&&o===c-1&&o===l+1?c!==-1&&(l===0&&s?r.base=r.name=e.slice(1,c):r.base=r.name=e.slice(l,c)):(l===0&&s?(r.name=e.slice(1,o),r.base=e.slice(1,c)):(r.name=e.slice(l,o),r.base=e.slice(l,c)),r.ext=e.slice(o,c)),l>0?r.dir=e.slice(0,l-1):s&&(r.dir="/"),r},sep:"/",delimiter:":",posix:null},Zrt=qv;const td=Vt(Zrt);class dc{constructor(e){var r,n;r=e.indexOf("://"),r>-1&&(e=new URL(e).pathname),n=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=n.dir+"/",this.filename=n.base,this.extension=n.ext.slice(1)}parse(e){return td.parse(e)}isAbsolute(e){return td.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return td.resolve(this.directory,e)}relative(e){var r=e&&e.indexOf("://")>-1;return r?e:td.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class Li{constructor(e,r){var n=e.indexOf("://")>-1,s=e,i;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=r,!n&&r!==!1&&typeof r!="string"&&window&&window.location&&(this.base=window.location.href),n||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,s=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(i=new dc(this.base),s=i.resolve(s))}this.Path=new dc(s),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var r=e.indexOf("://")>-1,n;return r?e:(n=td.resolve(this.directory,e),this.origin+n)}relative(e){return td.relative(e,this.directory)}toString(){return this.href}}const Zh=1,Ws=3,Qrt=9;class sr{constructor(e,r,n){var s;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof sr))return new sr(e,r,n);if(typeof r=="string"?this.base=this.parseComponent(r):typeof r=="object"&&r.steps&&(this.base=r),s=this.checkType(e),s==="string")return this.str=e,wa(this,this.parse(e));if(s==="range")return wa(this,this.fromRange(e,this.base,n));if(s==="node")return wa(this,this.fromNode(e,this.base,n));if(s==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(aJ(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof sr?"EpubCFI":!1}parse(e){var r={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},n,s,i;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),n=this.getChapterComponent(e),n?(r.base=this.parseComponent(n),s=this.getPathComponent(e),r.path=this.parseComponent(s),i=this.getRange(e),i&&(r.range=!0,r.start=this.parseComponent(i[0]),r.end=this.parseComponent(i[1])),r.spinePos=r.base.steps[1].index,r):{spinePos:-1})}parseComponent(e){var r={steps:[],terminal:{offset:null,assertion:null}},n=e.split(":"),s=n[0].split("/"),i;return n.length>1&&(i=n[1],r.terminal=this.parseTerminal(i)),s[0]===""&&s.shift(),r.steps=s.map((function(o){return this.parseStep(o)}).bind(this)),r}parseStep(e){var r,n,s,i,o;if(i=e.match(/\[(.*)\]/),i&&i[1]&&(o=i[1]),n=parseInt(e),!isNaN(n))return n%2===0?(r="element",s=n/2-1):(r="text",s=(n-1)/2),{type:r,index:s,id:o||null}}parseTerminal(e){var r,n,s=e.match(/\[(.*)\]/);return s&&s[1]?(r=parseInt(e.split("[")[0]),n=s[1]):r=parseInt(e),xn(r)||(r=null),{offset:r,assertion:n}}getChapterComponent(e){var r=e.split("!");return r[0]}getPathComponent(e){var r=e.split("!");if(r[1])return r[1].split(",")[0]}getRange(e){var r=e.split(",");return r.length===3?[r[1],r[2]]:!1}getCharecterOffsetComponent(e){var r=e.split(":");return r[1]||""}joinSteps(e){return e?e.map(function(r){var n="";return r.type==="element"&&(n+=(r.index+1)*2),r.type==="text"&&(n+=1+2*r.index),r.id&&(n+="["+r.id+"]"),n}).join("/"):""}segmentString(e){var r="/";return r+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(r+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(r+="["+e.terminal.assertion+"]"),r}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,r){var n,s,i,o;if(typeof e=="string"&&(e=new sr(e)),typeof r=="string"&&(r=new sr(r)),e.spinePos>r.spinePos)return 1;if(e.spinePos<r.spinePos)return-1;e.range?(n=e.path.steps.concat(e.start.steps),i=e.start.terminal):(n=e.path.steps,i=e.path.terminal),r.range?(s=r.path.steps.concat(r.start.steps),o=r.start.terminal):(s=r.path.steps,o=r.path.terminal);for(var l=0;l<n.length;l++){if(!n[l])return-1;if(!s[l]||n[l].index>s[l].index)return 1;if(n[l].index<s[l].index)return-1}return n.length<s.length?-1:i.offset>o.offset?1:i.offset<o.offset?-1:0}step(e){var r=e.nodeType===Ws?"text":"element";return{id:e.id,tagName:e.tagName,type:r,index:this.position(e)}}filteredStep(e,r){var n=this.filter(e,r),s;if(n)return s=n.nodeType===Ws?"text":"element",{id:n.id,tagName:n.tagName,type:s,index:this.filteredPosition(n,r)}}pathTo(e,r,n){for(var s={steps:[],terminal:{offset:null,assertion:null}},i=e,o;i&&i.parentNode&&i.parentNode.nodeType!=Qrt;)n?o=this.filteredStep(i,n):o=this.step(i),o&&s.steps.unshift(o),i=i.parentNode;return r!=null&&r>=0&&(s.terminal.offset=r,s.steps[s.steps.length-1].type!="text"&&s.steps.push({type:"text",index:0})),s}equalStep(e,r){return!e||!r?!1:e.index===r.index&&e.id===r.id&&e.type===r.type}fromRange(e,r,n){var s={range:!1,base:{},path:{},start:null,end:null},i=e.startContainer,o=e.endContainer,l=e.startOffset,c=e.endOffset,d=!1;if(n&&(d=i.ownerDocument.querySelector("."+n)!=null),typeof r=="string"?(s.base=this.parseComponent(r),s.spinePos=s.base.steps[1].index):typeof r=="object"&&(s.base=r),e.collapsed)d&&(l=this.patchOffset(i,l,n)),s.path=this.pathTo(i,l,n);else{s.range=!0,d&&(l=this.patchOffset(i,l,n)),s.start=this.pathTo(i,l,n),d&&(c=this.patchOffset(o,c,n)),s.end=this.pathTo(o,c,n),s.path={steps:[],terminal:null};var u=s.start.steps.length,h;for(h=0;h<u&&this.equalStep(s.start.steps[h],s.end.steps[h]);h++)h===u-1?s.start.terminal===s.end.terminal&&(s.path.steps.push(s.start.steps[h]),s.range=!1):s.path.steps.push(s.start.steps[h]);s.start.steps=s.start.steps.slice(s.path.steps.length),s.end.steps=s.end.steps.slice(s.path.steps.length)}return s}fromNode(e,r,n){var s={range:!1,base:{},path:{},start:null,end:null};return typeof r=="string"?(s.base=this.parseComponent(r),s.spinePos=s.base.steps[1].index):typeof r=="object"&&(s.base=r),s.path=this.pathTo(e,null,n),s}filter(e,r){var n,s,i,o,l,c=!1;return e.nodeType===Ws?(c=!0,i=e.parentNode,n=e.parentNode.classList.contains(r)):(c=!1,n=e.classList.contains(r)),n&&c?(o=i.previousSibling,l=i.nextSibling,o&&o.nodeType===Ws?s=o:l&&l.nodeType===Ws&&(s=l),s||e):n&&!c?!1:e}patchOffset(e,r,n){if(e.nodeType!=Ws)throw new Error("Anchor must be a text node");var s=e,i=r;for(e.parentNode.classList.contains(n)&&(s=e.parentNode);s.previousSibling;){if(s.previousSibling.nodeType===Zh)if(s.previousSibling.classList.contains(n))i+=s.previousSibling.textContent.length;else break;else i+=s.previousSibling.textContent.length;s=s.previousSibling}return i}normalizedMap(e,r,n){var s={},i=-1,o,l=e.length,c,d;for(o=0;o<l;o++)c=e[o].nodeType,c===Zh&&e[o].classList.contains(n)&&(c=Ws),o>0&&c===Ws&&d===Ws?s[o]=i:r===c&&(i=i+1,s[o]=i),d=c;return s}position(e){var r,n;return e.nodeType===Zh?(r=e.parentNode.children,r||(r=K3(e.parentNode)),n=Array.prototype.indexOf.call(r,e)):(r=this.textNodes(e.parentNode),n=r.indexOf(e)),n}filteredPosition(e,r){var n,s,i;return e.nodeType===Zh?(n=e.parentNode.children,i=this.normalizedMap(n,Zh,r)):(n=e.parentNode.childNodes,e.parentNode.classList.contains(r)&&(e=e.parentNode,n=e.parentNode.childNodes),i=this.normalizedMap(n,Ws,r)),s=Array.prototype.indexOf.call(n,e),i[s]}stepsToXpath(e){var r=[".","*"];return e.forEach(function(n){var s=n.index+1;n.id?r.push("*[position()="+s+" and @id='"+n.id+"']"):n.type==="text"?r.push("text()["+s+"]"):r.push("*["+s+"]")}),r.join("/")}stepsToQuerySelector(e){var r=["html"];return e.forEach(function(n){var s=n.index+1;n.id?r.push("#"+n.id):n.type==="text"||r.push("*:nth-child("+s+")")}),r.join(">")}textNodes(e,r){return Array.prototype.slice.call(e.childNodes).filter(function(n){return n.nodeType===Ws?!0:!!(r&&n.classList.contains(r))})}walkToNode(e,r,n){var s=r||document,i=s.documentElement,o,l,c=e.length,d;for(d=0;d<c&&(l=e[d],l.type==="element"?l.id?i=s.getElementById(l.id):(o=i.children||K3(i),i=o[l.index]):l.type==="text"&&(i=this.textNodes(i,n)[l.index]),!!i);d++);return i}findNode(e,r,n){var s=r||document,i,o;return!n&&typeof s.evaluate<"u"?(o=this.stepsToXpath(e),i=s.evaluate(o,s,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):n?i=this.walkToNode(e,s,n):i=this.walkToNode(e,s),i}fixMiss(e,r,n,s){var i=this.findNode(e.slice(0,-1),n,s),o=i.childNodes,l=this.normalizedMap(o,Ws,s),c,d,u=e[e.length-1].index;for(let h in l){if(!l.hasOwnProperty(h))return;if(l[h]===u)if(c=o[h],d=c.textContent.length,r>d)r=r-d;else{c.nodeType===Zh?i=c.childNodes[0]:i=c;break}}return{container:i,offset:r}}toRange(e,r){var n=e||document,s,i,o,l,c,d=this,u,h,f=r?n.querySelector("."+r)!=null:!1,g;if(typeof n.createRange<"u"?s=n.createRange():s=new oJ,d.range?(i=d.start,u=d.path.steps.concat(i.steps),l=this.findNode(u,n,f?r:null),o=d.end,h=d.path.steps.concat(o.steps),c=this.findNode(h,n,f?r:null)):(i=d.path,u=d.path.steps,l=this.findNode(d.path.steps,n,f?r:null)),l)try{i.terminal.offset!=null?s.setStart(l,i.terminal.offset):s.setStart(l,0)}catch{g=this.fixMiss(u,i.terminal.offset,n,f?r:null),s.setStart(g.container,g.offset)}else return console.log("No startContainer found for",this.toString()),null;if(c)try{o.terminal.offset!=null?s.setEnd(c,o.terminal.offset):s.setEnd(c,0)}catch{g=this.fixMiss(h,d.end.terminal.offset,n,f?r:null),s.setEnd(g.container,g.offset)}return s}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,r,n){var s=parseInt(r),i=(e+1)*2,o="/"+i+"/";return o+=(s+1)*2,n&&(o+="["+n+"]"),o}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class $i{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var r=0;r<arguments[e].length;++r)this.hooks.push(arguments[e][r])}deregister(e){let r;for(let n=0;n<this.hooks.length;n++)if(r=this.hooks[n],r===e){this.hooks.splice(n,1);break}}trigger(){var e=arguments,r=this.context,n=[];return this.hooks.forEach(function(s){try{var i=s.apply(r,e)}catch(o){console.log(o)}i&&typeof i.then=="function"&&n.push(i)}),Promise.all(n)}list(){return this.hooks}clear(){return this.hooks=[]}}function cJ(t,e){var r,n,s=e.url,i=s.indexOf("://")>-1;t&&(n=Rr(t,"head"),r=Rr(n,"base"),r||(r=t.createElement("base"),n.insertBefore(r,n.firstChild)),!i&&window&&window.location&&(s=window.location.origin+s),r.setAttribute("href",s))}function Jrt(t,e){var r,n,s=e.canonical;t&&(r=Rr(t,"head"),n=Rr(r,"link[rel='canonical']"),n?n.setAttribute("href",s):(n=t.createElement("link"),n.setAttribute("rel","canonical"),n.setAttribute("href",s),r.appendChild(n)))}function ent(t,e){var r,n,s=e.idref;t&&(r=Rr(t,"head"),n=Rr(r,"link[property='dc.identifier']"),n?n.setAttribute("content",s):(n=t.createElement("meta"),n.setAttribute("name","dc.identifier"),n.setAttribute("content",s),r.appendChild(n)))}function tnt(t,e){var r=t.querySelectorAll("a[href]");if(r.length)for(var n=Rr(t.ownerDocument,"base"),s=n?n.getAttribute("href"):void 0,i=(function(l){var c=l.getAttribute("href");if(c.indexOf("mailto:")!==0){var d=c.indexOf("://")>-1;if(d)l.setAttribute("target","_blank");else{var u;try{u=new Li(c,s)}catch{}l.onclick=function(){return u&&u.hash?e(u.Path.path+u.hash):e(u?u.Path.path:c),!1}}}}).bind(this),o=0;o<r.length;o++)i(r[o])}function J9(t,e,r){return e.forEach(function(n,s){n&&r[s]&&(n=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp(n,"g"),r[s]))}),t}function Xx(t,e,r,n){var s=typeof window<"u"?window.URL:!1,i=s?"blob":"arraybuffer",o=new ar,l=new XMLHttpRequest,c=XMLHttpRequest.prototype,d;"overrideMimeType"in c||Object.defineProperty(c,"overrideMimeType",{value:function(){}}),r&&(l.withCredentials=!0),l.onreadystatechange=h,l.onerror=u,l.open("GET",t,!0);for(d in n)l.setRequestHeader(d,n[d]);e=="json"&&l.setRequestHeader("Accept","application/json"),e||(e=new dc(t).extension),e=="blob"&&(l.responseType=i),Wx(e)&&l.overrideMimeType("text/xml"),e=="binary"&&(l.responseType="arraybuffer"),l.send();function u(f){o.reject(f)}function h(){if(this.readyState===XMLHttpRequest.DONE){var f=!1;if((this.responseType===""||this.responseType==="document")&&(f=this.responseXML),this.status===200||this.status===0||f){var g;if(!this.response&&!f)return o.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),o.promise;if(this.status===403)return o.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),o.promise;f?g=this.responseXML:Wx(e)?g=Vo(this.response,"text/xml"):e=="xhtml"?g=Vo(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?g=Vo(this.response,"text/html"):e=="json"?g=JSON.parse(this.response):e=="blob"?s?g=this.response:g=new Blob([this.response]):g=this.response,o.resolve(g)}else o.reject({status:this.status,message:this.response,stack:new Error().stack})}}return o.promise}class rnt{constructor(e,r){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,r?this.hooks=r:(this.hooks={},this.hooks.serialize=new $i(this),this.hooks.content=new $i(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var r=e||this.request||Xx,n=new ar,s=n.promise;return this.contents?n.resolve(this.contents):r(this.url).then((function(i){return this.document=i,this.contents=i.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){n.resolve(this.contents)}).bind(this)).catch(function(i){n.reject(i)}),s}base(){return cJ(this.document,this)}render(e){var r=new ar,n=r.promise;return this.output,this.load(e).then((function(s){var i=typeof navigator<"u"&&navigator.userAgent||"",o=i.indexOf("Trident")>=0,l;typeof XMLSerializer>"u"||o?l=YQ:l=XMLSerializer;var c=new l;return this.output=c.serializeToString(s),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){r.resolve(this.output)}).bind(this)).catch(function(s){r.reject(s)}),n}find(e){var r=this,n=[],s=e.toLowerCase(),i=function(o){for(var l=o.textContent.toLowerCase(),c=r.document.createRange(),d,u,h=-1,f,g=150;u!=-1;)u=l.indexOf(s,h+1),u!=-1&&(c=r.document.createRange(),c.setStart(o,u),c.setEnd(o,u+s.length),d=r.cfiFromRange(c),o.textContent.length<g?f=o.textContent:(f=o.textContent.substring(u-g/2,u+g/2),f="..."+f+"..."),n.push({cfi:d,excerpt:f})),h=u};return p2(r.document,function(o){i(o)}),n}search(e,r=5){if(typeof document.createTreeWalker>"u")return this.find(e);let n=[];const s=150,i=this,o=e.toLowerCase(),l=function(h){const x=h.reduce((m,p)=>m+p.textContent,"").toLowerCase().indexOf(o);if(x!=-1){const p=x+o.length;let b=0,v=0;if(x<h[0].length){let y;for(;b<h.length-1&&(v+=h[b].length,!(p<=v));)b+=1;let w=h[0],k=h[b],j=i.document.createRange();j.setStart(w,x);let _=h.slice(0,b).reduce((A,T)=>A+T.textContent.length,0);j.setEnd(k,_>p?p:p-_),y=i.cfiFromRange(j);let S=h.slice(0,b+1).reduce((A,T)=>A+T.textContent,"");S.length>s&&(S=S.substring(x-s/2,x+s/2),S="..."+S+"..."),n.push({cfi:y,excerpt:S})}}},c=document.createTreeWalker(i.document,NodeFilter.SHOW_TEXT,null,!1);let d,u=[];for(;d=c.nextNode();)u.push(d),u.length==r&&(l(u.slice(0,r)),u=u.slice(1,r));return u.length>0&&l(u),n}reconcileLayoutSettings(e){var r={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(n){var s=n.replace("rendition:",""),i=s.indexOf("-"),o,l;i!=-1&&(o=s.slice(0,i),l=s.slice(i+1),r[o]=l)}),r}cfiFromRange(e){return new sr(e,this.cfiBase).toString()}cfiFromElement(e){return new sr(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class nnt{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new $i,this.hooks.content=new $i,this.hooks.content.register(cJ),this.hooks.content.register(Jrt),this.hooks.content.register(ent),this.epubcfi=new sr,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,r,n){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((s,i)=>{var o=this.manifest[s.idref],l;s.index=i,s.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,s.index,s.id),s.href&&(s.url=r(s.href,!0),s.canonical=n(s.href)),o&&(s.href=o.href,s.url=r(s.href,!0),s.canonical=n(s.href),o.properties.length&&s.properties.push.apply(s.properties,o.properties)),s.linear==="yes"?(s.prev=(function(){let c=s.index;for(;c>0;){let d=this.get(c-1);if(d&&d.linear)return d;c-=1}}).bind(this),s.next=(function(){let c=s.index;for(;c<this.spineItems.length-1;){let d=this.get(c+1);if(d&&d.linear)return d;c+=1}}).bind(this)):(s.prev=function(){},s.next=function(){}),l=new rnt(s,this.hooks),this.append(l)}),this.loaded=!0}get(e){var r=0;if(typeof e>"u")for(;r<this.spineItems.length;){let n=this.spineItems[r];if(n&&n.linear)break;r+=1}else this.epubcfi.isCfiString(e)?r=new sr(e).spinePos:typeof e=="number"||isNaN(e)===!1?r=e:typeof e=="string"&&e.indexOf("#")===0?r=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],r=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[r]||null}append(e){var r=this.spineItems.length;return e.index=r,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=r,this.spineByHref[encodeURI(e.href)]=r,this.spineByHref[e.href]=r,this.spineById[e.idref]=r,r}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(r,n){r.index=n}),0}remove(e){var r=this.spineItems.indexOf(e);if(r>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(r,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let r=this.get(e);if(r&&r.linear)return r;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let r=this.get(e);if(r&&r.linear)return r;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class AI{constructor(e){this._q=[],this.context=e,this.tick=NI,this.running=!1,this.paused=!1}enqueue(){var e,r,n,s=[].shift.call(arguments),i=arguments;if(!s)throw new Error("No Task Provided");return typeof s=="function"?(e=new ar,r=e.promise,n={task:s,args:i,deferred:e,promise:r}):n={promise:s},this._q.push(n),this.paused==!1&&!this.running&&this.run(),n.promise}dequeue(){var e,r,n;if(this._q.length&&!this.paused){if(e=this._q.shift(),r=e.task,r)return n=r.apply(this.context,e.args),n&&typeof n.then=="function"?n.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,n),e.promise);if(e.promise)return e.promise}else return e=new ar,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new ar),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const Rj="0.3",Vv=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],tt={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class dJ{constructor(e,r,n){this.spine=e,this.request=r,this.pause=n||100,this.q=new AI(this),this.epubcfi=new sr,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(r){r.linear&&this.q.enqueue(this.process.bind(this),r)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(r){var n=new ar,s=this.parse(r,e.cfiBase);return this._locations=this._locations.concat(s),e.unload(),this.processingTimeout=setTimeout(()=>n.resolve(s),this.pause),n.promise}).bind(this))}parse(e,r,n){var s=[],i,o=e.ownerDocument,l=Rr(o,"body"),c=0,d,u=n||this.break,h=function(f){var g=f.length,x,m=0;if(f.textContent.trim().length===0)return!1;for(c==0&&(i=this.createRange(),i.startContainer=f,i.startOffset=0),x=u-c,x>g&&(c+=g,m=g);m<g;)if(x=u-c,c===0&&(m+=1,i=this.createRange(),i.startContainer=f,i.startOffset=m),m+x>=g)c+=g-m,m=g;else{m+=x,i.endContainer=f,i.endOffset=m;let p=new sr(i,r).toString();s.push(p),c=0}d=f};if(p2(l,h.bind(this)),i&&i.startContainer&&d){i.endContainer=d,i.endOffset=d.length;let f=new sr(i,r).toString();s.push(f),c=0}return s}generateFromWords(e,r,n){var s=e?new sr(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(i){i.linear&&(s?i.index>=s.spinePos&&this.q.enqueue(this.processWords.bind(this),i,r,s,n):this.q.enqueue(this.processWords.bind(this),i,r,s,n))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,r,n,s){return s&&this._locationsWords.length>=s?Promise.resolve():e.load(this.request).then((function(i){var o=new ar,l=this.parseWords(i,e,r,n),c=s-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(l.length>=s?l.slice(0,c):l),e.unload(),this.processingTimeout=setTimeout(()=>o.resolve(l),this.pause),o.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,r,n,s){var i=r.cfiBase,o=[],l=e.ownerDocument,c=Rr(l,"body"),d=n,u=s?s.spinePos!==r.index:!0,h;s&&r.index===s.spinePos&&(h=s.findNode(s.range?s.path.steps.concat(s.start.steps):s.path.steps,e.ownerDocument));var f=function(g){if(!u)if(g===h)u=!0;else return!1;if(g.textContent.length<10&&g.textContent.trim().length===0)return!1;var x=this.countWords(g.textContent),m,p=0;if(x===0)return!1;for(m=d-this._wordCounter,m>x&&(this._wordCounter+=x,p=x);p<x;)if(m=d-this._wordCounter,p+m>=x)this._wordCounter+=x-p,p=x;else{p+=m;let b=new sr(g,i);o.push({cfi:b.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return p2(c,f.bind(this)),o}locationFromCfi(e){let r;return sr.prototype.isCfiString(e)&&(e=new sr(e)),this._locations.length===0?-1:(r=Yg(e,this._locations,this.epubcfi.compare),r>this.total?this.total:r)}percentageFromCfi(e){if(this._locations.length===0)return null;var r=this.locationFromCfi(e);return this.percentageFromLocation(r)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var r=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(r=this._locations[e]),r}cfiFromPercentage(e){let r;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let n=new sr(this._locations[this.total]);return n.collapse(),n.toString()}return r=Math.ceil(this.total*e),this.cfiFromLocation(r)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var r;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(r=this.locationFromCfi(e),this._current=r):r=e,this.emit(tt.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(r)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}ul(dJ.prototype);class ant{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var r;if(!e)throw new Error("Container File Not Found");if(r=Rr(e,"rootfile"),!r)throw new Error("No RootFile Found");this.packagePath=r.getAttribute("full-path"),this.directory=td.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class eF{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var r,n,s;if(!e)throw new Error("Package File Not Found");if(r=Rr(e,"metadata"),!r)throw new Error("No Metadata Found");if(n=Rr(e,"manifest"),!n)throw new Error("No Manifest Found");if(s=Rr(e,"spine"),!s)throw new Error("No Spine Found");return this.manifest=this.parseManifest(n),this.navPath=this.findNavPath(n),this.ncxPath=this.findNcxPath(n,s),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=tJ(s),this.spine=this.parseSpine(s,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(r),this.metadata.direction=s.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var r={};return r.title=this.getElementText(e,"title"),r.creator=this.getElementText(e,"creator"),r.description=this.getElementText(e,"description"),r.pubdate=this.getElementText(e,"date"),r.publisher=this.getElementText(e,"publisher"),r.identifier=this.getElementText(e,"identifier"),r.language=this.getElementText(e,"language"),r.rights=this.getElementText(e,"rights"),r.modified_date=this.getPropertyText(e,"dcterms:modified"),r.layout=this.getPropertyText(e,"rendition:layout"),r.orientation=this.getPropertyText(e,"rendition:orientation"),r.flow=this.getPropertyText(e,"rendition:flow"),r.viewport=this.getPropertyText(e,"rendition:viewport"),r.media_active_class=this.getPropertyText(e,"media:active-class"),r.spread=this.getPropertyText(e,"rendition:spread"),r}parseManifest(e){var r={},n=cc(e,"item"),s=Array.prototype.slice.call(n);return s.forEach(function(i){var o=i.getAttribute("id"),l=i.getAttribute("href")||"",c=i.getAttribute("media-type")||"",d=i.getAttribute("media-overlay")||"",u=i.getAttribute("properties")||"";r[o]={href:l,type:c,overlay:d,properties:u.length?u.split(" "):[]}}),r}parseSpine(e,r){var n=[],s=cc(e,"itemref"),i=Array.prototype.slice.call(s);return i.forEach(function(o,l){var c=o.getAttribute("idref"),d=o.getAttribute("properties")||"",u=d.length?d.split(" "):[],h={id:o.getAttribute("id"),idref:c,linear:o.getAttribute("linear")||"yes",properties:u,index:l};n.push(h)}),n}findUniqueIdentifier(e){var r=e.documentElement.getAttribute("unique-identifier");if(!r)return"";var n=e.getElementById(r);return n&&n.localName==="identifier"&&n.namespaceURI==="http://purl.org/dc/elements/1.1/"&&n.childNodes.length>0?n.childNodes[0].nodeValue.trim():""}findNavPath(e){var r=cf(e,"item",{properties:"nav"});return r?r.getAttribute("href"):!1}findNcxPath(e,r){var n=cf(e,"item",{"media-type":"application/x-dtbncx+xml"}),s;return n||(s=r.getAttribute("toc"),s&&(n=e.querySelector(`#${s}`))),n?n.getAttribute("href"):!1}findCoverPath(e){var r=Rr(e,"package");r.getAttribute("version");var n=cf(e,"item",{properties:"cover-image"});if(n)return n.getAttribute("href");var s=cf(e,"meta",{name:"cover"});if(s){var i=s.getAttribute("content"),o=e.getElementById(i);return o?o.getAttribute("href"):""}else return!1}getElementText(e,r){var n=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",r),s;return!n||n.length===0?"":(s=n[0],s.childNodes.length?s.childNodes[0].nodeValue:"")}getPropertyText(e,r){var n=cf(e,"meta",{property:r});return n&&n.childNodes.length?n.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let r=e.readingOrder||e.spine;return this.spine=r.map((n,s)=>(n.index=s,n.linear=n.linear||"yes",n)),e.resources.forEach((n,s)=>{this.manifest[s]=n,n.rel&&n.rel[0]==="cover"&&(this.coverPath=n.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((n,s)=>(n.label=n.title,n)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class bS{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let r=e.nodeType,n,s;r&&(n=Rr(e,"html"),s=Rr(e,"ncx")),r?n?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):s&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var r,n=0;n<e.length;n++)r=e[n],r.href&&(this.tocByHref[r.href]=n),r.id&&(this.tocById[r.id]=n),this.length++,r.subitems.length&&this.unpack(r.subitems)}get(e){var r;return e?(e.indexOf("#")===0?r=this.tocById[e.substring(1)]:e in this.tocByHref&&(r=this.tocByHref[e]),this.getByIndex(e,r,this.toc)):this.toc}getByIndex(e,r,n){if(n.length===0)return;const s=n[r];if(s&&(e===s.id||e===s.href))return s;{let i;for(let o=0;o<n.length&&(i=this.getByIndex(e,r,n[o].subitems),!i);++o);return i}}landmark(e){var r;return e?(r=this.landmarksByType[e],this.landmarks[r]):this.landmarks}parseNav(e){var r=x2(e,"nav","toc"),n=[];if(!r)return n;let s=df(r,"ol",!0);return s&&(n=this.parseNavList(s)),n}parseNavList(e,r){const n=[];if(!e||!e.children)return n;for(let s=0;s<e.children.length;s++){const i=this.navItem(e.children[s],r);i&&n.push(i)}return n}navItem(e,r){let n=e.getAttribute("id")||void 0,s=df(e,"a",!0)||df(e,"span",!0);if(!s)return;let i=s.getAttribute("href")||"";n||(n=i);let o=s.textContent||"",l=[],c=df(e,"ol",!0);return c&&(l=this.parseNavList(c,n)),{id:n,href:i,label:o,subitems:l,parent:r}}parseLandmarks(e){var r=x2(e,"nav","landmarks"),n=r?cc(r,"li"):[],s=n.length,i,o=[],l;if(!n||s===0)return o;for(i=0;i<s;++i)l=this.landmarkItem(n[i]),l&&(o.push(l),this.landmarksByType[l.type]=i);return o}landmarkItem(e){let r=df(e,"a",!0);if(!r)return;let n=r.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,s=r.getAttribute("href")||"",i=r.textContent||"";return{href:s,label:i,type:n}}parseNcx(e){var r=cc(e,"navPoint"),n=r.length,s,i={},o=[],l,c;if(!r||n===0)return o;for(s=0;s<n;++s)l=this.ncxItem(r[s]),i[l.id]=l,l.parent?(c=i[l.parent],c.subitems.push(l)):o.push(l);return o}ncxItem(e){var r=e.getAttribute("id")||!1,n=Rr(e,"content"),s=n.getAttribute("src"),i=Rr(e,"navLabel"),o=i.textContent?i.textContent:"",l=[],c=e.parentNode,d;return c&&(c.nodeName==="navPoint"||c.nodeName.split(":").slice(-1)[0]==="navPoint")&&(d=c.getAttribute("id")),{id:r,href:s,label:o,subitems:l,parent:d}}load(e){return e.map(r=>(r.label=r.title,r.subitems=r.children?this.load(r.children):[],r))}forEach(e){return this.toc.forEach(e)}}var jp={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},snt=function(){var t,e,r,n,s={};for(t in jp)if(jp.hasOwnProperty(t)){for(e in jp[t])if(jp[t].hasOwnProperty(e))if(r=jp[t][e],typeof r=="string")s[r]=t+"/"+e;else for(n=0;n<r.length;n++)s[r[n]]=t+"/"+e}return s}(),int="text/plain";function ont(t){return t&&snt[t.split(".").pop().toLowerCase()]||int}const Qf={lookup:ont};class lnt{constructor(e,r){this.settings={replacements:r&&r.replacements||"base64",archive:r&&r.archive,resolver:r&&r.resolver,request:r&&r.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(r){return e[r]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var r=new Li(e),n=Qf.lookup(r.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(s=>iJ(s)).then(s=>U3(s,n)):this.settings.request(e,"blob").then(s=>m2(s,n))}replacements(){if(this.settings.replacements==="none")return new Promise((function(r){r(this.urls)}).bind(this));var e=this.urls.map(r=>{var n=this.settings.resolver(r);return this.createUrl(n).catch(s=>(console.error(s),null))});return Promise.all(e).then(r=>(this.replacementUrls=r.filter(n=>typeof n=="string"),r))}replaceCss(e,r){var n=[];return e=e||this.settings.archive,r=r||this.settings.resolver,this.cssUrls.forEach((function(s){var i=this.createCssFile(s,e,r).then((function(o){var l=this.urls.indexOf(s);l>-1&&(this.replacementUrls[l]=o)}).bind(this));n.push(i)}).bind(this)),Promise.all(n)}createCssFile(e){var r;if(td.isAbsolute(e))return new Promise(function(o){o()});var n=this.settings.resolver(e),s;this.settings.archive?s=this.settings.archive.getText(n):s=this.settings.request(n,"text");var i=this.urls.map(o=>{var l=this.settings.resolver(o),c=new dc(n).relative(l);return c});return s?s.then(o=>(o=J9(o,i,this.replacementUrls),this.settings.replacements==="base64"?r=U3(o,"text/css"):r=m2(o,"text/css"),r),o=>new Promise(function(l){l()})):new Promise(function(o){o()})}relativeTo(e,r){return r=r||this.settings.resolver,this.urls.map((function(n){var s=r(n),i=new dc(e).relative(s);return i}).bind(this))}get(e){var r=this.urls.indexOf(e);if(r!==-1)return this.replacementUrls.length?new Promise((function(n,s){n(this.replacementUrls[r])}).bind(this)):this.createUrl(e)}substitute(e,r){var n;return r?n=this.relativeTo(r):n=this.urls,J9(e,n,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class yS{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new sr,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var r=Rr(e,"html"),n=Rr(e,"ncx");if(r)return this.parseNav(e);if(n)return this.parseNcx(e)}parseNav(e){var r=x2(e,"nav","page-list"),n=r?cc(r,"li"):[],s=n.length,i,o=[],l;if(!n||s===0)return o;for(i=0;i<s;++i)l=this.item(n[i]),o.push(l);return o}parseNcx(e){var r=[],n=0,s,i,o,l=0;if(i=Rr(e,"pageList"),!i||(o=cc(i,"pageTarget"),l=o.length,!o||o.length===0))return r;for(n=0;n<l;++n)s=this.ncxItem(o[n]),r.push(s);return r}ncxItem(e){var r=Rr(e,"navLabel"),n=Rr(r,"text"),s=n.textContent,i=Rr(e,"content"),o=i.getAttribute("src"),l=parseInt(s,10);return{href:o,page:l}}item(e){var r=Rr(e,"a"),n=r.getAttribute("href")||"",s=r.textContent||"",i=parseInt(s),o=n.indexOf("epubcfi"),l,c,d;return o!=-1?(l=n.split("#"),c=l[0],d=l.length>1?l[1]:!1,{cfi:d,href:n,packageUrl:c,page:i}):{href:n,page:i}}process(e){e.forEach(function(r){this.pages.push(r.page),r.cfi&&this.locations.push(r.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var r=-1;if(this.locations.length===0)return-1;var n=h2(e,this.locations,this.epubcfi.compare);return n!=-1?r=this.pages[n]:(n=Yg(e,this.locations,this.epubcfi.compare),r=n-1>=0?this.pages[n-1]:this.pages[0],r!==void 0||(r=-1)),r}cfiFromPage(e){var r=-1;typeof e!="number"&&(e=parseInt(e));var n=this.pages.indexOf(e);return n!=-1&&(r=this.locations[n]),r}pageFromPercentage(e){var r=Math.round(this.totalPages*e);return r}percentageFromPage(e){var r=(e-this.firstPage)/this.totalPages;return Math.round(r*1e3)/1e3}percentageFromCfi(e){var r=this.pageFromCfi(e),n=this.percentageFromPage(r);return n}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class uJ{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,r){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),r>=0&&(this._minSpreadWidth=r),this._spread}calculate(e,r,n){var s=1,i=n||0,o=e,l=r,c=Math.floor(o/12),d,u,h,f;this._spread&&o>=this._minSpreadWidth?s=2:s=1,this.name==="reflowable"&&this._flow==="paginated"&&!(n>=0)&&(i=c%2===0?c:c-1),this.name==="pre-paginated"&&(i=0),s>1?(d=o/s-i,h=d+i):(d=o,h=o),this.name==="pre-paginated"&&s>1&&(o=d),u=d*s+i,f=o,this.width=o,this.height=l,this.spreadWidth=u,this.pageWidth=h,this.delta=f,this.columnWidth=d,this.gap=i,this.divisor=s,this.update({width:o,height:l,spreadWidth:u,pageWidth:h,delta:f,columnWidth:d,gap:i,divisor:s})}format(e,r,n){var s;return this.name==="pre-paginated"?s=e.fit(this.columnWidth,this.height,r):this._flow==="paginated"?s=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):n&&n==="horizontal"?s=e.size(null,this.height):s=e.size(this.width,null),s}count(e,r){let n,s;return this.name==="pre-paginated"?(n=1,s=1):this._flow==="paginated"?(r=r||this.delta,n=Math.ceil(e/r),s=n*this.divisor):(r=r||this.height,n=Math.ceil(e/r),s=n),{spreads:n,pages:s}}update(e){if(Object.keys(e).forEach(r=>{this.props[r]===e[r]&&delete e[r]}),Object.keys(e).length>0){let r=wa(this.props,e);this.emit(tt.LAYOUT.UPDATED,r,e)}}}ul(uJ.prototype);class cnt{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var r in e)e.hasOwnProperty(r)&&(typeof e[r]=="string"?this.registerUrl(r,e[r]):this.registerRules(r,e[r]))}registerCss(e,r){this._themes[e]={serialized:r},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,r){var n=new Li(r);this._themes[e]={url:n.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,r){this._themes[e]={rules:r},(this._injected[e]||e=="default")&&this.update(e)}select(e){var r=this._current,n;this._current=e,this.update(e),n=this.rendition.getContents(),n.forEach(s=>{s.removeClass(r),s.addClass(e)})}update(e){var r=this.rendition.getContents();r.forEach(n=>{this.add(e,n)})}inject(e){var r=[],n=this._themes,s;for(var i in n)n.hasOwnProperty(i)&&(i===this._current||i==="default")&&(s=n[i],(s.rules&&Object.keys(s.rules).length>0||s.url&&r.indexOf(s.url)===-1)&&this.add(i,e),this._injected.push(i));this._current!="default"&&e.addClass(this._current)}add(e,r){var n=this._themes[e];!n||!r||(n.url?r.addStylesheet(n.url):n.serialized?(r.addStylesheetCss(n.serialized,e),n.injected=!0):n.rules&&(r.addStylesheetRules(n.rules,e),n.injected=!0))}override(e,r,n){var s=this.rendition.getContents();this._overrides[e]={value:r,priority:n===!0},s.forEach(i=>{i.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var r=this.rendition.getContents();delete this._overrides[e],r.forEach(n=>{n.css(e)})}overrides(e){var r=this._overrides;for(var n in r)r.hasOwnProperty(n)&&e.css(n,r[n].value,r[n].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class b2{constructor(e,r,n,s=!1){this.layout=e,this.horizontal=n==="horizontal",this.direction=r||"ltr",this._dev=s}section(e){var r=this.findRanges(e),n=this.rangeListToCfiList(e.section.cfiBase,r);return n}page(e,r,n,s){var i=e&&e.document?e.document.body:!1,o;if(i){if(o=this.rangePairToCfiPair(r,{start:this.findStart(i,n,s),end:this.findEnd(i,n,s)}),this._dev===!0){let l=e.document,c=new sr(o.start).toRange(l),d=new sr(o.end).toRange(l),u=l.defaultView.getSelection(),h=l.createRange();u.removeAllRanges(),h.setStart(c.startContainer,c.startOffset),h.setEnd(d.endContainer,d.endOffset),u.addRange(h)}return o}}walk(e,r){if(!(e&&e.nodeType===Node.TEXT_NODE)){var n={acceptNode:function(c){return c.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},s=n.acceptNode;s.acceptNode=n.acceptNode;for(var i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,s,!1),o,l;(o=i.nextNode())&&(l=r(o),!l););return l}}findRanges(e){for(var r=[],n=e.contents.scrollWidth(),s=Math.ceil(n/this.layout.spreadWidth),i=s*this.layout.divisor,o=this.layout.columnWidth,l=this.layout.gap,c,d,u=0;u<i.pages;u++)c=(o+l)*u,d=o*(u+1)+l*u,r.push({start:this.findStart(e.document.body,c,d),end:this.findEnd(e.document.body,c,d)});return r}findStart(e,r,n){for(var s=[e],i,o,l=e;s.length;)if(i=s.shift(),o=this.walk(i,c=>{var d,u,h,f,g;if(g=B3(c),this.horizontal&&this.direction==="ltr"){if(d=this.horizontal?g.left:g.top,u=this.horizontal?g.right:g.bottom,d>=r&&d<=n)return c;if(u>r)return c;l=c,s.push(c)}else if(this.horizontal&&this.direction==="rtl"){if(d=g.left,u=g.right,u<=n&&u>=r)return c;if(d<n)return c;l=c,s.push(c)}else{if(h=g.top,f=g.bottom,h>=r&&h<=n)return c;if(f>r)return c;l=c,s.push(c)}}),o)return this.findTextStartRange(o,r,n);return this.findTextStartRange(l,r,n)}findEnd(e,r,n){for(var s=[e],i,o=e,l;s.length;)if(i=s.shift(),l=this.walk(i,c=>{var d,u,h,f,g;if(g=B3(c),this.horizontal&&this.direction==="ltr"){if(d=Math.round(g.left),u=Math.round(g.right),d>n&&o)return o;if(u>n)return c;o=c,s.push(c)}else if(this.horizontal&&this.direction==="rtl"){if(d=Math.round(this.horizontal?g.left:g.top),u=Math.round(this.horizontal?g.right:g.bottom),u<r&&o)return o;if(d<r)return c;o=c,s.push(c)}else{if(h=Math.round(g.top),f=Math.round(g.bottom),h>n&&o)return o;if(f>n)return c;o=c,s.push(c)}}),l)return this.findTextEndRange(l,r,n);return this.findTextEndRange(o,r,n)}findTextStartRange(e,r,n){for(var s=this.splitTextNodeIntoRanges(e),i,o,l,c,d,u=0;u<s.length;u++)if(i=s[u],o=i.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(l=o.left,l>=r)return i}else if(this.horizontal&&this.direction==="rtl"){if(d=o.right,d<=n)return i}else if(c=o.top,c>=r)return i;return s[0]}findTextEndRange(e,r,n){for(var s=this.splitTextNodeIntoRanges(e),i,o,l,c,d,u,h,f=0;f<s.length;f++){if(o=s[f],l=o.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(c=l.left,d=l.right,c>n&&i)return i;if(d>n)return o}else if(this.horizontal&&this.direction==="rtl"){if(c=l.left,d=l.right,d<r&&i)return i;if(c<r)return o}else{if(u=l.top,h=l.bottom,u>n&&i)return i;if(h>n)return o}i=o}return s[s.length-1]}splitTextNodeIntoRanges(e,r){var n=[],s=e.textContent||"",i=s.trim(),o,l=e.ownerDocument,c=r||" ",d=i.indexOf(c);if(d===-1||e.nodeType!=Node.TEXT_NODE)return o=l.createRange(),o.selectNodeContents(e),[o];for(o=l.createRange(),o.setStart(e,0),o.setEnd(e,d),n.push(o),o=!1;d!=-1;)d=i.indexOf(c,d+1),d>0&&(o&&(o.setEnd(e,d),n.push(o)),o=l.createRange(),o.setStart(e,d+1));return o&&(o.setEnd(e,i.length),n.push(o)),n}rangePairToCfiPair(e,r){var n=r.start,s=r.end;n.collapse(!0),s.collapse(!1);let i=new sr(n,e).toString(),o=new sr(s,e).toString();return{start:i,end:o}}rangeListToCfiList(e,r){for(var n=[],s,i=0;i<r.length;i++)s=this.rangePairToCfiPair(e,r[i]),n.push(s);return n}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const hJ=typeof navigator<"u",dnt=hJ&&/Chrome/.test(navigator.userAgent),tF=hJ&&!dnt&&/AppleWebKit/.test(navigator.userAgent),unt=1;class EI{constructor(e,r,n,s){this.epubcfi=new sr,this.document=e,this.documentElement=this.document.documentElement,this.content=r||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=s||0,this.cfiBase=n||"",this.epubReadingSystem("epub.js",Rj),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return Vv}width(e){var r=this.content;return e&&xn(e)&&(e=e+"px"),e&&(r.style.width=e),parseInt(this.window.getComputedStyle(r).width)}height(e){var r=this.content;return e&&xn(e)&&(e=e+"px"),e&&(r.style.height=e),parseInt(this.window.getComputedStyle(r).height)}contentWidth(e){var r=this.content||this.document.body;return e&&xn(e)&&(e=e+"px"),e&&(r.style.width=e),parseInt(this.window.getComputedStyle(r).width)}contentHeight(e){var r=this.content||this.document.body;return e&&xn(e)&&(e=e+"px"),e&&(r.style.height=e),parseInt(this.window.getComputedStyle(r).height)}textWidth(){let e,r,n=this.document.createRange(),s=this.content||this.document.body,i=f2(s);return n.selectNodeContents(s),e=n.getBoundingClientRect(),r=e.width,i&&i.width&&(r+=i.width),Math.round(r)}textHeight(){let e,r,n=this.document.createRange(),s=this.content||this.document.body;return n.selectNodeContents(s),e=n.getBoundingClientRect(),r=e.bottom,Math.round(r)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,r,n){var s=this.content||this.document.body;return r?s.style.setProperty(e,r,n?"important":""):s.style.removeProperty(e),this.window.getComputedStyle(s)[e]}viewport(e){var r=this.document.querySelector("meta[name='viewport']"),n={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},s=[],i={};if(r&&r.hasAttribute("content")){let o=r.getAttribute("content"),l=o.match(/width\s*=\s*([^,]*)/),c=o.match(/height\s*=\s*([^,]*)/),d=o.match(/initial-scale\s*=\s*([^,]*)/),u=o.match(/minimum-scale\s*=\s*([^,]*)/),h=o.match(/maximum-scale\s*=\s*([^,]*)/),f=o.match(/user-scalable\s*=\s*([^,]*)/);l&&l.length&&typeof l[1]<"u"&&(n.width=l[1]),c&&c.length&&typeof c[1]<"u"&&(n.height=c[1]),d&&d.length&&typeof d[1]<"u"&&(n.scale=d[1]),u&&u.length&&typeof u[1]<"u"&&(n.minimum=u[1]),h&&h.length&&typeof h[1]<"u"&&(n.maximum=h[1]),f&&f.length&&typeof f[1]<"u"&&(n.scalable=f[1])}return i=eJ(e||{},n),e&&(i.width&&s.push("width="+i.width),i.height&&s.push("height="+i.height),i.scale&&s.push("initial-scale="+i.scale),i.scalable==="no"?(s.push("minimum-scale="+i.scale),s.push("maximum-scale="+i.scale),s.push("user-scalable="+i.scalable)):(i.scalable&&s.push("user-scalable="+i.scalable),i.minimum&&s.push("minimum-scale="+i.minimum),i.maximum&&s.push("minimum-scale="+i.maximum)),r||(r=this.document.createElement("meta"),r.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(r)),r.setAttribute("content",s.join(", ")),this.window.scrollTo(0,0)),i}expand(){this.emit(tt.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),r=this.textHeight();(e!=this._size.width||r!=this._size.height)&&(this._size={width:e,height:r},this.onResize&&this.onResize(this._size),this.emit(tt.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,r=(function(l){l.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),n=0;n<e.length;n+=1){var s;try{s=e[n].cssRules}catch{return}if(!s)return;for(var i=0;i<s.length;i+=1)if(s[i].media){var o=this.window.matchMedia(s[i].media.mediaText);o.addListener(r)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(r=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),r,n=0;n<e.length;n++)r=e[n],typeof r.naturalWidth<"u"&&r.naturalWidth===0&&(r.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,r){var n,s={left:0,top:0};if(!this.document)return s;if(this.epubcfi.isCfiString(e)){let i=new sr(e).toRange(this.document,r);if(i){try{if(!i.endContainer||i.startContainer==i.endContainer&&i.startOffset==i.endOffset){let o=i.startContainer.textContent.indexOf(" ",i.startOffset);o==-1&&(o=i.startContainer.textContent.length),i.setEnd(i.startContainer,o)}}catch(o){console.error("setting end offset to start container length failed",o)}if(i.startContainer.nodeType===Node.ELEMENT_NODE)n=i.startContainer.getBoundingClientRect(),s.left=n.left,s.top=n.top;else if(tF){let o=i.startContainer,l=new Range;try{o.nodeType===unt?n=o.getBoundingClientRect():i.startOffset+2<o.length?(l.setStart(o,i.startOffset),l.setEnd(o,i.startOffset+2),n=l.getBoundingClientRect()):i.startOffset-2>0?(l.setStart(o,i.startOffset-2),l.setEnd(o,i.startOffset),n=l.getBoundingClientRect()):n=o.parentNode.getBoundingClientRect()}catch(c){console.error(c,c.stack)}}else n=i.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let i=e.substring(e.indexOf("#")+1),o=this.document.getElementById(i);if(o)if(tF){let l=new Range;l.selectNode(o),n=l.getBoundingClientRect()}else n=o.getBoundingClientRect()}return n&&(s.left=n.left,s.top=n.top),s}addStylesheet(e){return new Promise((function(r,n){var s,i=!1;if(!this.document){r(!1);return}if(s=this.document.querySelector("link[href='"+e+"']"),s){r(!0);return}s=this.document.createElement("link"),s.type="text/css",s.rel="stylesheet",s.href=e,s.onload=s.onreadystatechange=function(){!i&&(!this.readyState||this.readyState=="complete")&&(i=!0,setTimeout(()=>{r(!0)},1))},this.document.head.appendChild(s)}).bind(this))}_getStylesheetNode(e){var r;return e="epubjs-inserted-css-"+(e||""),this.document?(r=this.document.getElementById(e),r||(r=this.document.createElement("style"),r.id=e,this.document.head.appendChild(r)),r):!1}addStylesheetCss(e,r){if(!this.document||!e)return!1;var n;return n=this._getStylesheetNode(r),n.innerHTML=e,!0}addStylesheetRules(e,r){var n;if(!(!this.document||!e||e.length===0))if(n=this._getStylesheetNode(r).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var s=0,i=e.length;s<i;s++){var o=1,l=e[s],c=e[s][0],d="";Object.prototype.toString.call(l[1][0])==="[object Array]"&&(l=l[1],o=0);for(var u=l.length;o<u;o++){var h=l[o];d+=h[0]+":"+h[1]+(h[2]?" !important":"")+`;
`}n.insertRule(c+"{"+d+"}",n.cssRules.length)}else Object.keys(e).forEach(g=>{const x=e[g];if(Array.isArray(x))x.forEach(m=>{const b=Object.keys(m).map(v=>`${v}:${m[v]}`).join(";");n.insertRule(`${g}{${b}}`,n.cssRules.length)});else{const p=Object.keys(x).map(b=>`${b}:${x[b]}`).join(";");n.insertRule(`${g}{${p}}`,n.cssRules.length)}})}addScript(e){return new Promise((function(r,n){var s,i=!1;if(!this.document){r(!1);return}s=this.document.createElement("script"),s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){!i&&(!this.readyState||this.readyState=="complete")&&(i=!0,setTimeout(function(){r(!0)},1))},this.document.head.appendChild(s)}).bind(this))}addClass(e){var r;this.document&&(r=this.content||this.document.body,r&&r.classList.add(e))}removeClass(e){var r;this.document&&(r=this.content||this.document.body,r&&r.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),Vv.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(Vv.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var r=this.window.getSelection();this.triggerSelectedEvent(r)}).bind(this),250)}triggerSelectedEvent(e){var r,n;e&&e.rangeCount>0&&(r=e.getRangeAt(0),r.collapsed||(n=new sr(r,this.cfiBase).toString(),this.emit(tt.CONTENTS.SELECTED,n),this.emit(tt.CONTENTS.SELECTED_RANGE,r)))}range(e,r){var n=new sr(e);return n.toRange(this.document,r)}cfiFromRange(e,r){return new sr(e,this.cfiBase,r).toString()}cfiFromNode(e,r){return new sr(e,this.cfiBase,r).toString()}map(e){var r=new b2(e);return r.section()}size(e,r){var n={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),n.width=e,this.css("padding","0 "+e/12+"px")),r>=0&&(this.height(r),n.height=r),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(n)}columns(e,r,n,s,i){let o=lf("column-axis"),l=lf("column-gap"),c=lf("column-width"),d=lf("column-fill"),h=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),i==="rtl"&&h==="horizontal"&&this.direction(i),this.width(e),this.height(r),this.viewport({width:e,height:r,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),h==="vertical"?(this.css("padding-top",s/2+"px",!0),this.css("padding-bottom",s/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(o,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",s/2+"px",!0),this.css("padding-right",s/2+"px",!0),this.css(o,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(d,"auto"),this.css(l,s+"px"),this.css(c,n+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,r,n){var s="scale("+e+")",i="";this.css("transform-origin","top left"),(r>=0||n>=0)&&(i=" translate("+(r||0)+"px, "+(n||0)+"px )"),this.css("transform",s+i)}fit(e,r,n){var s=this.viewport(),i=parseInt(s.width),o=parseInt(s.height),l=e/i,c=r/o,d=l<c?l:c;if(this.layoutStyle("paginated"),this.width(i),this.height(o),this.overflow("hidden"),this.scaler(d,0,0),this.css("background-size",i*d+"px "+o*d+"px"),this.css("background-color","transparent"),n&&n.properties.includes("page-spread-left")){var u=e-i*d;this.css("margin-left",u+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,r,n,s,i){var o=new b2(r,i);return o.page(this,e,n,s)}linksHandler(){tnt(this.content,e=>{this.emit(tt.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let r=lf("writing-mode");return e&&this.documentElement&&(this.documentElement.style[r]=e),this.window.getComputedStyle(this.documentElement)[r]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,r){return navigator.epubReadingSystem={name:e,version:r,layoutStyle:this.layoutStyle(),hasFeature:function(n){switch(n){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}ul(EI.prototype);class hnt{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,r,n,s,i,o){let l=encodeURI(r+e),d=new sr(r).spinePos,u=new fJ({type:e,cfiRange:r,data:n,sectionIndex:d,cb:s,className:i,styles:o});return this._annotations[l]=u,d in this._annotationsBySectionIndex?this._annotationsBySectionIndex[d].push(l):this._annotationsBySectionIndex[d]=[l],this.rendition.views().forEach(f=>{u.sectionIndex===f.index&&u.attach(f)}),u}remove(e,r){let n=encodeURI(e+r);if(n in this._annotations){let s=this._annotations[n];if(r&&s.type!==r)return;this.rendition.views().forEach(o=>{this._removeFromAnnotationBySectionIndex(s.sectionIndex,n),s.sectionIndex===o.index&&s.detach(o)}),delete this._annotations[n]}}_removeFromAnnotationBySectionIndex(e,r){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(n=>n!==r)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,r,n,s,i){return this.add("highlight",e,r,n,s,i)}underline(e,r,n,s,i){return this.add("underline",e,r,n,s,i)}mark(e,r,n){return this.add("mark",e,r,n)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let r=e.index;r in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[r].forEach(s=>{this._annotations[s].attach(e)})}clear(e){let r=e.index;r in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[r].forEach(s=>{this._annotations[s].detach(e)})}show(){}hide(){}}class fJ{constructor({type:e,cfiRange:r,data:n,sectionIndex:s,cb:i,className:o,styles:l}){this.type=e,this.cfiRange=r,this.data=n,this.sectionIndex=s,this.mark=void 0,this.cb=i,this.className=o,this.styles=l}update(e){this.data=e}attach(e){let{cfiRange:r,data:n,type:s,mark:i,cb:o,className:l,styles:c}=this,d;return s==="highlight"?d=e.highlight(r,n,o,l,c):s==="underline"?d=e.underline(r,n,o,l,c):s==="mark"&&(d=e.mark(r,n,o)),this.mark=d,this.emit(tt.ANNOTATION.ATTACH,d),d}detach(e){let{cfiRange:r,type:n}=this,s;return e&&(n==="highlight"?s=e.unhighlight(r):n==="underline"?s=e.ununderline(r):n==="mark"&&(s=e.unmark(r))),this.mark=void 0,this.emit(tt.ANNOTATION.DETACH,s),s}text(){}}ul(fJ.prototype);var Ml={},Pj={};Object.defineProperty(Pj,"__esModule",{value:!0});Pj.createElement=gJ;function gJ(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}Pj.default={createElement:gJ};var Wb={};Object.defineProperty(Wb,"__esModule",{value:!0});Wb.proxyMouse=mJ;Wb.clone=pJ;Wb.default={proxyMouse:mJ};function mJ(t,e){function r(o){for(var l=e.length-1;l>=0;l--){var c=e[l],d=o.clientX,u=o.clientY;if(o.touches&&o.touches.length&&(d=o.touches[0].clientX,u=o.touches[0].clientY),!!fnt(c,t,d,u)){c.dispatchEvent(pJ(o));break}}}if(t.nodeName==="iframe"||t.nodeName==="IFRAME")try{this.target=t.contentDocument}catch{this.target=t}else this.target=t;for(var n=["mouseup","mousedown","click","touchstart"],s=0;s<n.length;s++){var i=n[s];this.target.addEventListener(i,function(o){return r(o)},!1)}}function pJ(t){var e=Object.assign({},t,{bubbles:!1});try{return new MouseEvent(t.type,e)}catch{var r=document.createEvent("MouseEvents");return r.initMouseEvent(t.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),r}}function fnt(t,e,r,n){var s=e.getBoundingClientRect();function i(u,h,f){var g=u.top-s.top,x=u.left-s.left,m=g+u.height,p=x+u.width;return g<=f&&x<=h&&m>f&&p>h}var o=t.getBoundingClientRect();if(!i(o,r,n))return!1;for(var l=t.getClientRects(),c=0,d=l.length;c<d;c++)if(i(l[c],r,n))return!0;return!1}var y2,CI;Object.defineProperty(Ml,"__esModule",{value:!0});var xJ=Ml.Underline=CI=Ml.Highlight=Ml.Mark=y2=Ml.Pane=void 0,gnt=function t(e,r,n){e===null&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,r);if(s===void 0){var i=Object.getPrototypeOf(e);return i===null?void 0:t(i,r,n)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(n)}},zj=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),mnt=Pj,Yx=bJ(mnt),pnt=Wb,xnt=bJ(pnt);function bJ(t){return t&&t.__esModule?t:{default:t}}function yJ(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function vJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function $j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}y2=Ml.Pane=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;$j(this,t),this.target=e,this.element=Yx.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),xnt.default.proxyMouse(this.target,this.marks),this.container=r,this.container.appendChild(this.element),this.render()}return zj(t,[{key:"addMark",value:function(r){var n=Yx.default.createElement("g");return this.element.appendChild(n),r.bind(n,this.container),this.marks.push(r),r.render(),r}},{key:"removeMark",value:function(r){var n=this.marks.indexOf(r);if(n!==-1){var s=r.unbind();this.element.removeChild(s),this.marks.splice(n,1)}}},{key:"render",value:function(){knt(this.element,vnt(this.target,this.container));var r=!0,n=!1,s=void 0;try{for(var i=this.marks[Symbol.iterator](),o;!(r=(o=i.next()).done);r=!0){var l=o.value;l.render()}}catch(c){n=!0,s=c}finally{try{!r&&i.return&&i.return()}finally{if(n)throw s}}}}]),t}();var bnt=Ml.Mark=function(){function t(){$j(this,t),this.element=null}return zj(t,[{key:"bind",value:function(r,n){this.element=r,this.container=n}},{key:"unbind",value:function(){var r=this.element;return this.element=null,r}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(r){this.element&&this.element.dispatchEvent(r)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var r=[],n=this.element.firstChild;n;)r.push(n.getBoundingClientRect()),n=n.nextSibling;return r}},{key:"filteredRanges",value:function(){var r=Array.from(this.range.getClientRects());return r.filter(function(n){for(var s=0;s<r.length;s++){if(r[s]===n)return!0;var i=wnt(r[s],n);if(i)return!1}return!0})}}]),t}(),ynt=CI=Ml.Highlight=function(t){vJ(e,t);function e(r,n,s,i){$j(this,e);var o=yJ(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.range=r,o.className=n,o.data=s||{},o.attributes=i||{},o}return zj(e,[{key:"bind",value:function(n,s){gnt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,n,s);for(var i in this.data)this.data.hasOwnProperty(i)&&(this.element.dataset[i]=this.data[i]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&this.element.setAttribute(i,this.attributes[i]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var n=this.element.ownerDocument.createDocumentFragment(),s=this.filteredRanges(),i=this.element.getBoundingClientRect(),o=this.container.getBoundingClientRect(),l=0,c=s.length;l<c;l++){var d=s[l],u=Yx.default.createElement("rect");u.setAttribute("x",d.left-i.left+o.left),u.setAttribute("y",d.top-i.top+o.top),u.setAttribute("height",d.height),u.setAttribute("width",d.width),n.appendChild(u)}this.element.appendChild(n)}}]),e}(bnt);xJ=Ml.Underline=function(t){vJ(e,t);function e(r,n,s,i){return $j(this,e),yJ(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n,s,i))}return zj(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var n=this.element.ownerDocument.createDocumentFragment(),s=this.filteredRanges(),i=this.element.getBoundingClientRect(),o=this.container.getBoundingClientRect(),l=0,c=s.length;l<c;l++){var d=s[l],u=Yx.default.createElement("rect");u.setAttribute("x",d.left-i.left+o.left),u.setAttribute("y",d.top-i.top+o.top),u.setAttribute("height",d.height),u.setAttribute("width",d.width),u.setAttribute("fill","none");var h=Yx.default.createElement("line");h.setAttribute("x1",d.left-i.left+o.left),h.setAttribute("x2",d.left-i.left+o.left+d.width),h.setAttribute("y1",d.top-i.top+o.top+d.height-1),h.setAttribute("y2",d.top-i.top+o.top+d.height-1),h.setAttribute("stroke-width",1),h.setAttribute("stroke","black"),h.setAttribute("stroke-linecap","square"),n.appendChild(u),n.appendChild(h)}this.element.appendChild(n)}}]),e}(ynt);function vnt(t,e){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect();return{top:n.top-r.top,left:n.left-r.left,height:t.scrollHeight,width:t.scrollWidth}}function knt(t,e){t.style.setProperty("top",e.top+"px","important"),t.style.setProperty("left",e.left+"px","important"),t.style.setProperty("height",e.height+"px","important"),t.style.setProperty("width",e.width+"px","important")}function wnt(t,e){return e.right<=t.right&&e.left>=t.left&&e.top>=t.top&&e.bottom<=t.bottom}class kJ{constructor(e,r){this.settings=wa({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},r||{}),this.id="epubjs-view-"+Lj(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new sr,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var r=document.createElement("div");return r.classList.add("epub-view"),r.style.height="0px",r.style.width="0px",r.style.overflow="hidden",r.style.position="relative",r.style.display="block",e&&e=="horizontal"?r.style.flex="none":r.style.flex="initial",r}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Gv(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,r){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(n){return this.load(n)}).bind(this)).then((function(){let n=this.contents.writingMode(),s;return this.settings.flow==="scrolled"?s=n.indexOf("vertical")===0?"horizontal":"vertical":s=n.indexOf("vertical")===0?"vertical":"horizontal",n.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(s),this.emit(tt.VIEWS.AXIS,s),this.setWritingMode(n),this.emit(tt.VIEWS.WRITING_MODE,n),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((i,o)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),i()})}).bind(this),(function(n){return this.emit(tt.VIEWS.LOAD_ERROR,n),new Promise((s,i)=>{i(n)})}).bind(this)).then((function(){this.emit(tt.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,r){var n=e||this.settings.width,s=r||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",n,s):this.settings.axis==="horizontal"?this.lock("height",n,s):this.lock("width",n,s),this.settings.width=n,this.settings.height=s}lock(e,r,n){var s=f2(this.element),i;this.iframe?i=f2(this.iframe):i={width:0,height:0},e=="width"&&xn(r)&&(this.lockedWidth=r-s.width-i.width),e=="height"&&xn(n)&&(this.lockedHeight=n-s.height-i.height),e==="both"&&xn(r)&&xn(n)&&(this.lockedWidth=r-s.width-i.width,this.lockedHeight=n-s.height-i.height),this.displayed&&this.iframe&&this.expand()}expand(e){var r=this.lockedWidth,n=this.lockedHeight,s;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(r=this.layout.columnWidth,n=this.layout.height):this.settings.axis==="horizontal"?(r=this.contents.textWidth(),r%this.layout.pageWidth>0&&(r=Math.ceil(r/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(s=r/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&s%2>0&&(r+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(n=this.contents.textHeight(),this.settings.flow==="paginated"&&n%this.layout.height>0&&(n=Math.ceil(n/this.layout.height)*this.layout.height)),(this._needsReframe||r!=this._width||n!=this._height)&&this.reframe(r,n),this._expanding=!1)}reframe(e,r){var n;xn(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),xn(r)&&(this.element.style.height=r+"px",this.iframe.style.height=r+"px",this._height=r);let s=this.prevBounds?e-this.prevBounds.width:e,i=this.prevBounds?r-this.prevBounds.height:r;n={width:e,height:r,widthDelta:s,heightDelta:i},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let o;for(let l in this.marks)this.marks.hasOwnProperty(l)&&(o=this.marks[l],this.placeMark(o.element,o.range))}),this.onResize(this,n),this.emit(tt.VIEWS.RESIZED,n),this.prevBounds=n,this.elementBounds=Gv(this.element)}load(e){var r=new ar,n=r.promise;if(!this.iframe)return r.reject(new Error("No Iframe Available")),n;if(this.iframe.onload=(function(i){this.onLoad(i,r)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=m2(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return r.reject(new Error("No Document Available")),n;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var s=this;MSApp.execUnsafeLocalFunction(function(){s.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return n}onLoad(e,r){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new EI(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var n=this.document.querySelector("link[rel='canonical']");n?n.setAttribute("href",this.section.canonical):(n=this.document.createElement("link"),n.setAttribute("rel","canonical"),n.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(n)),this.contents.on(tt.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(tt.CONTENTS.RESIZE,s=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),r.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var r=new ar;return this.displayed?r.resolve(this):this.render(e).then((function(){this.emit(tt.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,r.resolve(this)}).bind(this),function(n){r.reject(n,this)}),r.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(tt.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(tt.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var r=this.contents.locationOf(e,this.settings.ignoreClass);return{left:r.left,top:r.top}}onDisplayed(e){}onResize(e,r){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=Gv(this.element)),this.elementBounds}highlight(e,r={},n,s="epubjs-hl",i={}){if(!this.contents)return;const o=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},i);let l=this.contents.range(e),c=()=>{this.emit(tt.VIEWS.MARK_CLICKED,e,r)};r.epubcfi=e,this.pane||(this.pane=new y2(this.iframe,this.element));let d=new CI(l,s,r,o),u=this.pane.addMark(d);return this.highlights[e]={mark:u,element:u.element,listeners:[c,n]},u.element.setAttribute("ref",s),u.element.addEventListener("click",c),u.element.addEventListener("touchstart",c),n&&(u.element.addEventListener("click",n),u.element.addEventListener("touchstart",n)),u}underline(e,r={},n,s="epubjs-ul",i={}){if(!this.contents)return;const o=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},i);let l=this.contents.range(e),c=()=>{this.emit(tt.VIEWS.MARK_CLICKED,e,r)};r.epubcfi=e,this.pane||(this.pane=new y2(this.iframe,this.element));let d=new xJ(l,s,r,o),u=this.pane.addMark(d);return this.underlines[e]={mark:u,element:u.element,listeners:[c,n]},u.element.setAttribute("ref",s),u.element.addEventListener("click",c),u.element.addEventListener("touchstart",c),n&&(u.element.addEventListener("click",n),u.element.addEventListener("touchstart",n)),u}mark(e,r={},n){if(!this.contents)return;if(e in this.marks)return this.marks[e];let s=this.contents.range(e);if(!s)return;let i=s.commonAncestorContainer,o=i.nodeType===1?i:i.parentNode,l=d=>{this.emit(tt.VIEWS.MARK_CLICKED,e,r)};s.collapsed&&i.nodeType===1?(s=new Range,s.selectNodeContents(i)):s.collapsed&&(s=new Range,s.selectNodeContents(o));let c=this.document.createElement("a");return c.setAttribute("ref","epubjs-mk"),c.style.position="absolute",c.dataset.epubcfi=e,r&&Object.keys(r).forEach(d=>{c.dataset[d]=r[d]}),n&&(c.addEventListener("click",n),c.addEventListener("touchstart",n)),c.addEventListener("click",l),c.addEventListener("touchstart",l),this.placeMark(c,s),this.element.appendChild(c),this.marks[e]={element:c,range:s,listeners:[l,n]},o}placeMark(e,r){let n,s,i;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let l=r.getBoundingClientRect();n=l.top,s=l.right}else{let l=r.getClientRects(),c;for(var o=0;o!=l.length;o++)c=l[o],(!i||c.left<i)&&(i=c.left,s=Math.ceil(i/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,n=c.top)}e.style.top=`${n}px`,e.style.left=`${s}px`}unhighlight(e){let r;e in this.highlights&&(r=this.highlights[e],this.pane.removeMark(r.mark),r.listeners.forEach(n=>{n&&(r.element.removeEventListener("click",n),r.element.removeEventListener("touchstart",n))}),delete this.highlights[e])}ununderline(e){let r;e in this.underlines&&(r=this.underlines[e],this.pane.removeMark(r.mark),r.listeners.forEach(n=>{n&&(r.element.removeEventListener("click",n),r.element.removeEventListener("touchstart",n))}),delete this.underlines[e])}unmark(e){let r;e in this.marks&&(r=this.marks[e],this.element.removeChild(r.element),r.listeners.forEach(n=>{n&&(r.element.removeEventListener("click",n),r.element.removeEventListener("touchstart",n))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&nJ(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}ul(kJ.prototype);function jnt(){var t="reverse",e=Nnt();return document.body.appendChild(e),e.scrollLeft>0?t="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(t="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(t="negative")),document.body.removeChild(e),t}function Nnt(){var t=document.createElement("div");t.dir="rtl",t.style.position="fixed",t.style.width="1px",t.style.height="1px",t.style.top="0px",t.style.left="0px",t.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var r=document.createElement("span");r.style.width="1px",r.style.display="inline-block";var n=document.createElement("span");return n.style.width="1px",n.style.display="inline-block",e.appendChild(r),e.appendChild(n),t.appendChild(e),t}class _nt{constructor(e){this.settings=e||{},this.id="epubjs-container-"+Lj(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let r=e.height,n=e.width,s=e.overflow||!1,i=e.axis||"vertical",o=e.direction;wa(this.settings,e),e.height&&xn(e.height)&&(r=e.height+"px"),e.width&&xn(e.width)&&(n=e.width+"px");let l=document.createElement("div");return l.id=this.id,l.classList.add("epub-container"),l.style.wordSpacing="0",l.style.lineHeight="0",l.style.verticalAlign="top",l.style.position="relative",i==="horizontal"&&(l.style.display="flex",l.style.flexDirection="row",l.style.flexWrap="nowrap"),n&&(l.style.width=n),r&&(l.style.height=r),s&&(s==="scroll"&&i==="vertical"?(l.style["overflow-y"]=s,l.style["overflow-x"]="hidden"):s==="scroll"&&i==="horizontal"?(l.style["overflow-y"]="hidden",l.style["overflow-x"]=s):l.style.overflow=s),o&&(l.dir=o,l.style.direction=o),o&&this.settings.fullsize&&(document.body.style.direction=o),l}wrap(e){var r=document.createElement("div");return r.style.visibility="hidden",r.style.overflow="hidden",r.style.width="0",r.style.height="0",r.appendChild(e),r}getElement(e){var r;if(QQ(e)?r=e:typeof e=="string"&&(r=document.getElementById(e)),!r)throw new Error("Not an Element");return r}attachTo(e){var r=this.getElement(e),n;if(r)return this.settings.hidden?n=this.wrapper:n=this.container,r.appendChild(n),this.element=r,r}getContainer(){return this.container}onResize(e){(!xn(this.settings.width)||!xn(this.settings.height))&&(this.resizeFunc=jO(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,r){var n;let s=e||this.settings.width,i=r||this.settings.height;e===null?(n=this.element.getBoundingClientRect(),n.width&&(e=Math.floor(n.width),this.container.style.width=e+"px")):xn(e)?this.container.style.width=e+"px":this.container.style.width=e,r===null?(n=n||this.element.getBoundingClientRect(),n.height&&(r=n.height,this.container.style.height=r+"px")):xn(r)?this.container.style.height=r+"px":this.container.style.height=r,xn(e)||(e=this.container.clientWidth),xn(r)||(r=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let o=g2(),l=window.getComputedStyle(document.body),c={left:parseFloat(l["padding-left"])||0,right:parseFloat(l["padding-right"])||0,top:parseFloat(l["padding-top"])||0,bottom:parseFloat(l["padding-bottom"])||0};return s||(e=o.width-c.left-c.right),(this.settings.fullsize&&!i||!i)&&(r=o.height-c.top-c.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:r-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?g2():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,r){var n="#"+this.id+" ",s="";this.sheet||(this.sheet=this.getSheet()),r.forEach(function(i){for(var o in i)i.hasOwnProperty(o)&&(s+=o+":"+i[o]+";")}),this.sheet.insertRule(n+e+" {"+s+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class Snt{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,r){return this._views.splice(r,0,e),this.container&&(r<this.container.children.length?this.container.insertBefore(e.element,this.container.children[r]):this.container.appendChild(e.element)),this.length++,e}remove(e){var r=this._views.indexOf(e);r>-1&&this._views.splice(r,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,r=this.length;if(this.length){for(var n=0;n<r;n++)e=this._views[n],this.destroy(e);this._views=[],this.length=0}}find(e){for(var r,n=this.length,s=0;s<n;s++)if(r=this._views[s],r.displayed&&r.section.index==e.index)return r}displayed(){for(var e=[],r,n=this.length,s=0;s<n;s++)r=this._views[s],r.displayed&&e.push(r);return e}show(){for(var e,r=this.length,n=0;n<r;n++)e=this._views[n],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,r=this.length,n=0;n<r;n++)e=this._views[n],e.displayed&&e.hide();this.hidden=!0}}class v2{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new AI(this),this.settings=wa(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),wa(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,r){let n=e.tagName;typeof this.settings.fullsize>"u"&&n&&(n.toLowerCase()=="body"||n.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=r,this.settings.rtlScrollType=jnt(),this.stage=new _nt({width:r.width,height:r.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new Snt(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(r){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:r}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(tt.MANAGERS.ORIENTATION_CHANGE,r)}).bind(this),500)}onResized(e){this.resize()}resize(e,r,n){let s=this.stage.size(e,r);if(this.winBounds=g2(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===s.width&&this._stageSize.height===s.height||(this._stageSize=s,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(tt.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},n))}createView(e,r){return new this.View(e,wa(this.viewSettings,{forceRight:r}))}handleNextPrePaginated(e,r,n){let s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||r.index===0)return;if(s=r.next(),s&&!s.properties.includes("page-spread-left"))return n.call(this,s)}}display(e,r){var n=new ar,s=n.promise;(r===e.href||xn(r))&&(r=void 0);var i=this.views.find(e);if(i&&e&&this.layout.name!=="pre-paginated"){let l=i.offset();if(this.settings.direction==="ltr")this.scrollTo(l.left,l.top,!0);else{let c=i.width();this.scrollTo(l.left+c,l.top,!0)}if(r){let c=i.locationOf(r),d=i.width();this.moveTo(c,d)}return n.resolve(),s}this.clear();let o=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(o=!0),this.add(e,o).then((function(l){if(r){let c=l.locationOf(r),d=l.width();this.moveTo(c,d)}}).bind(this),l=>{n.reject(l)}).then((function(){return this.handleNextPrePaginated(o,e,this.add)}).bind(this)).then((function(){this.views.show(),n.resolve()}).bind(this)),s}afterDisplayed(e){this.emit(tt.MANAGERS.ADDED,e)}afterResized(e){this.emit(tt.MANAGERS.RESIZE,e.section)}moveTo(e,r){var n=0,s=0;this.isPaginated?(n=Math.floor(e.left/this.layout.delta)*this.layout.delta,n+this.layout.delta>this.container.scrollWidth&&(n=this.container.scrollWidth-this.layout.delta),s=Math.floor(e.top/this.layout.delta)*this.layout.delta,s+this.layout.delta>this.container.scrollHeight&&(s=this.container.scrollHeight-this.layout.delta)):s=e.top,this.settings.direction==="rtl"&&(n=n+this.layout.delta,n=n-r),this.scrollTo(n,s,!0)}add(e,r){var n=this.createView(e,r);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(tt.VIEWS.AXIS,s=>{this.updateAxis(s)}),n.on(tt.VIEWS.WRITING_MODE,s=>{this.updateWritingMode(s)}),n.display(this.request)}append(e,r){var n=this.createView(e,r);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(tt.VIEWS.AXIS,s=>{this.updateAxis(s)}),n.on(tt.VIEWS.WRITING_MODE,s=>{this.updateWritingMode(s)}),n.display(this.request)}prepend(e,r){var n=this.createView(e,r);return n.on(tt.VIEWS.RESIZED,s=>{this.counter(s)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(tt.VIEWS.AXIS,s=>{this.updateAxis(s)}),n.on(tt.VIEWS.WRITING_MODE,s=>{this.updateWritingMode(s)}),n.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,r;let n=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!n||n==="ltr")?(this.scrollLeft=this.container.scrollLeft,r=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,r<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&n==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(r=this.container.scrollLeft,r>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(r=this.container.scrollLeft+this.layout.delta*-1,r>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let s=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(s=!0),this.append(e,s).then((function(){return this.handleNextPrePaginated(s,e,this.append)}).bind(this),i=>i).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,r;let n=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!n||n==="ltr")?(this.scrollLeft=this.container.scrollLeft,r=this.container.scrollLeft,r>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&n==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(r=this.container.scrollLeft+this.container.offsetWidth,r<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(r=this.container.scrollLeft,r<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let s=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(s=!0),this.prepend(e,s).then((function(){var i;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(i=e.prev(),i))return this.prepend(i)}).bind(this),i=>i).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),r=this.container.getBoundingClientRect(),n=r.height<window.innerHeight?r.height:window.innerHeight,s=r.width<window.innerWidth?r.width:window.innerWidth,i=this.settings.axis==="vertical";this.settings.direction;let o=0,l=0;return this.settings.fullsize&&(o=i?window.scrollY:window.scrollX),e.map(d=>{let{index:u,href:h}=d.section,f=d.position(),g=d.width(),x=d.height(),m,p,b,v;i?(m=o+r.top-f.top+l,p=m+n-l,v=this.layout.count(x,n).pages,b=n):(m=o+r.left-f.left+l,p=m+s-l,v=this.layout.count(g,s).pages,b=s);let y=Math.ceil(m/b),w=[],k=Math.ceil(p/b);if(this.settings.direction==="rtl"&&!i){let S=y;y=v-k,k=v-S}w=[];for(var j=y;j<=k;j++){let S=j+1;w.push(S)}let _=this.mapping.page(d.contents,d.section.cfiBase,m,p);return{index:u,href:h,pages:w,totalPages:v,mapping:_}})}paginatedLocation(){let e=this.visible(),r=this.container.getBoundingClientRect(),n=0,s=0;return this.settings.fullsize&&(n=window.scrollX),e.map(o=>{let{index:l,href:c}=o.section,d,u=o.position(),h=o.width(),f,g,x;this.settings.direction==="rtl"?(d=r.right-n,x=Math.min(Math.abs(d-u.left),this.layout.width)-s,g=u.width-(u.right-d)-s,f=g-x):(d=r.left+n,x=Math.min(u.right-d,this.layout.width)-s,f=d-u.left+s,g=f+x),s+=x;let m=this.mapping.page(o.contents,o.section.cfiBase,f,g),p=this.layout.count(h).pages,b=Math.floor(f/this.layout.pageWidth),v=[],y=Math.floor(g/this.layout.pageWidth);if(b<0&&(b=0,y=y+1),this.settings.direction==="rtl"){let k=b;b=p-y,y=p-k}for(var w=b+1;w<=y;w++){let k=w;v.push(k)}return{index:l,href:c,pages:v,totalPages:p,mapping:m}})}isVisible(e,r,n,s){var i=e.position(),o=s||this.bounds();return this.settings.axis==="horizontal"&&i.right>o.left-r&&i.left<o.right+n?!0:this.settings.axis==="vertical"&&i.bottom>o.top-r&&i.top<o.bottom+n}visible(){for(var e=this.bounds(),r=this.views.displayed(),n=r.length,s=[],i,o,l=0;l<n;l++)o=r[l],i=this.isVisible(o,0,0,e),i===!0&&s.push(o);return s}scrollBy(e,r,n){let s=this.settings.direction==="rtl"?-1:1;n&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*s,r*s):(e&&(this.container.scrollLeft+=e*s),r&&(this.container.scrollTop+=r)),this.scrolled=!0}scrollTo(e,r,n){n&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,r):(this.container.scrollLeft=e,this.container.scrollTop=r),this.scrolled=!0}onScroll(){let e,r;this.settings.fullsize?(e=window.scrollY,r=window.scrollX):(e=this.container.scrollTop,r=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=r,this.ignore?this.ignore=!1:(this.emit(tt.MANAGERS.SCROLL,{top:e,left:r}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(tt.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new b2(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(r){r&&r.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,r){!r&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new b2(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,r="auto"){let n=e==="paginated"||e==="auto";this.isPaginated=n,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=n?"hidden":r,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(r){const n=r&&r.contents;n&&e.push(n)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}ul(v2.prototype);const Ant={easeInCubic:function(t){return Math.pow(t,3)}};class q3{constructor(e,r){this.settings=wa({duration:80,minVelocity:.2,minDistance:10,easing:Ant.easeInCubic},r||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(tt.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(tt.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let r=e.contents;["touchstart","touchmove","touchend"].forEach(n=>{r.on(n,s=>this.triggerViewEvent(s,r))})}triggerViewEvent(e,r){this.emit(e.type,e,r)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:r,screenY:n}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=r,this.startTouchY=n,this.startTime=this.now()),this.endTouchX=r,this.endTouchY=n,this.endTime=this.now()}onTouchMove(e){let{screenX:r,screenY:n}=e.touches[0],s=Math.abs(n-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&s<10&&(this.element.scrollLeft-=r-this.endTouchX),this.endTouchX=r,this.endTouchY=n,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let r=this.wasSwiped();r!==0?this.snap(r):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,r=this.endTouchX-this.startTouchX,n=Math.abs(r),s=this.endTime-this.startTime,i=r/s,o=this.settings.minVelocity;if(n<=this.settings.minDistance||n>=e)return 0;if(i>o)return-1;if(i<-o)return 1}needsSnap(){let e=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor;return e%r!==0}snap(e=0){let r=this.scrollLeft,n=this.layout.pageWidth*this.layout.divisor,s=Math.round(r/n)*n;return e&&(s+=e*n),this.smoothScrollTo(s)}smoothScrollTo(e){const r=new ar,n=this.scrollLeft,s=this.now(),i=this.settings.duration,o=this.settings.easing;this.snapping=!0;function l(){const c=this.now(),d=Math.min(1,(c-s)/i);if(o(d),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,r.resolve();return}d<1?(window.requestAnimationFrame(l.bind(this)),this.scrollTo(n+(e-n)*d,0)):(this.scrollTo(e,0),this.snapping=!1,r.resolve())}return l.call(this),r.promise}scrollTo(e=0,r=0){this.fullsize?window.scroll(e,r):(this.scroller.scrollLeft=e,this.scroller.scrollTop=r)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}ul(q3.prototype);class Ent extends v2{constructor(e){super(e),this.name="continuous",this.settings=wa(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),wa(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,r){return v2.prototype.display.call(this,e,r).then((function(){return this.fill()}).bind(this))}fill(e){var r=e||new ar;return this.q.enqueue(()=>this.check()).then(n=>{n?this.fill(r):r.resolve()}),r.promise}moveTo(e){var r=0,n=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.settings.offsetDelta):(n=e.top,e.top+this.settings.offsetDelta),(r>0||n>0)&&this.scrollBy(r,n,!0)}afterResized(e){this.emit(tt.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var r=this.createView(e);return this.views.append(r),r.on(tt.VIEWS.RESIZED,n=>{r.expanded=!0}),r.on(tt.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(tt.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.display(this.request)}append(e){var r=this.createView(e);return r.on(tt.VIEWS.RESIZED,n=>{r.expanded=!0}),r.on(tt.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(tt.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r}prepend(e){var r=this.createView(e);return r.on(tt.VIEWS.RESIZED,n=>{this.counter(n),r.expanded=!0}),r.on(tt.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(tt.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var r=this.bounds(),n=this.views.all(),s=n.length,i=typeof e<"u"?e:this.settings.offset||0,o,l,c=new ar,d=[],u=0;u<s;u++)if(l=n[u],o=this.isVisible(l,i,i,r),o===!0)if(l.displayed)l.show();else{let h=l.display(this.request).then(function(f){f.show()},f=>{l.hide()});d.push(h)}else this.q.enqueue(l.destroy.bind(l)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return d.length?Promise.all(d).catch(h=>{c.reject(h)}):(c.resolve(),c.promise)}check(e,r){var n=new ar,s=[],i=this.settings.axis==="horizontal",o=this.settings.offset||0;e&&i&&(o=e),r&&!i&&(o=r);var l=this._bounds;let c=i?this.scrollLeft:this.scrollTop,d=i?Math.floor(l.width):l.height,u=i?this.container.scrollWidth:this.container.scrollHeight,h=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",f=this.settings.rtlScrollType,g=this.settings.direction==="rtl";this.settings.fullsize?(i&&g&&f==="negative"||!i&&g&&f==="default")&&(c=c*-1):(g&&f==="default"&&h==="horizontal"&&(c=u-d-c),g&&f==="negative"&&h==="horizontal"&&(c=c*-1));let x=()=>{let y=this.views.first(),w=y&&y.section.prev();w&&s.push(this.prepend(w))},m=()=>{let y=this.views.last(),w=y&&y.section.next();w&&s.push(this.append(w))},p=c+d+o,b=c-o;p>=u&&m(),b<0&&x();let v=s.map(y=>y.display(this.request));return s.length?Promise.all(v).then(()=>this.check()).then(()=>this.update(o),y=>y):(this.q.enqueue((function(){this.update()}).bind(this)),n.resolve(!1),n.promise)}trim(){for(var e=new ar,r=this.views.displayed(),n=r[0],s=r[r.length-1],i=this.views.indexOf(n),o=this.views.indexOf(s),l=this.views.slice(0,i),c=this.views.slice(o+1),d=0;d<l.length-1;d++)this.erase(l[d],l);for(var u=1;u<c.length;u++)this.erase(c[u]);return e.resolve(),e.promise}erase(e,r){var n,s;this.settings.fullsize?(n=window.scrollY,s=window.scrollX):(n=this.container.scrollTop,s=this.container.scrollLeft);var i=e.bounds();this.views.remove(e),r&&(this.settings.axis==="vertical"?this.scrollTo(0,n-i.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(s+Math.floor(i.width),0,!0):this.scrollTo(s,0,!0):this.scrollTo(s-Math.floor(i.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(r){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new q3(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=NI;let r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*r,this.scrollLeft=window.scrollX*r):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=e7e(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,r,n=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*n,r=window.scrollX*n):(e=this.container.scrollTop,r=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=r,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(r-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=r,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(tt.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(tt.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new q3(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class TI{constructor(e,r){this.settings=wa(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),wa(this.settings,r),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new $i(this),this.hooks.serialize=new $i(this),this.hooks.content=new $i(this),this.hooks.unloaded=new $i(this),this.hooks.layout=new $i(this),this.hooks.render=new $i(this),this.hooks.show=new $i(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new cnt(this),this.annotations=new hnt(this),this.epubcfi=new sr,this.q=new AI(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new ar,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var r;return typeof e=="string"&&e==="default"?r=v2:typeof e=="string"&&e==="continuous"?r=Ent:r=e,r}requireView(e){var r;return typeof e=="string"&&e==="iframe"?r=kJ:r=e,r}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(tt.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(tt.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(tt.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(tt.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(tt.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(tt.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(tt.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var r=new ar,n=r.promise,s;return this.displaying=r,this.book.locations.length()&&JQ(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),s=this.book.spine.get(e),s?(this.manager.display(s,e).then(()=>{r.resolve(s),this.displaying=void 0,this.emit(tt.RENDITION.DISPLAYED,s),this.reportLocation()},i=>{this.emit(tt.RENDITION.DISPLAY_ERROR,i)}),n):(r.reject(new Error("No Section Found")),n)}}afterDisplayed(e){e.on(tt.VIEWS.MARK_CLICKED,(r,n)=>this.triggerMarkEvent(r,n,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(tt.RENDITION.RENDERED,e.section,e)}):this.emit(tt.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(tt.RENDITION.REMOVED,e.section,e)})}onResized(e,r){this.emit(tt.RENDITION.RESIZED,{width:e.width,height:e.height},r),this.location&&this.location.start&&this.display(r||this.location.start.cfi)}onOrientationChange(e){this.emit(tt.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,r,n){e&&(this.settings.width=e),r&&(this.settings.height=r),this.manager.resize(e,r,n)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var r,n=this.settings.layout||e.layout||"reflowable",s=this.settings.spread||e.spread||"auto",i=this.settings.orientation||e.orientation||"auto",o=this.settings.flow||e.flow||"auto",l=e.viewport||"",c=this.settings.minSpreadWidth||e.minSpreadWidth||800,d=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),r={layout:n,spread:s,orientation:i,flow:o,viewport:l,minSpreadWidth:c,direction:d},r}flow(e){var r=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(r="scrolled"),(e==="auto"||e==="paginated")&&(r="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(r),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(r),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new uJ(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(tt.LAYOUT.UPDATED,(r,n)=>{this.emit(tt.RENDITION.LAYOUT,r,n)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,r){this.settings.spread=e,r&&(this.settings.minSpreadWidth=r),this._layout&&this._layout.spread(e,r),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var n=this.manager.currentLocation();if(n&&n.then&&typeof n.then=="function")n.then((function(s){let i=this.located(s);!i||!i.start||!i.end||(this.location=i,this.emit(tt.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(tt.RENDITION.RELOCATED,this.location))}).bind(this));else if(n){let s=this.located(n);if(!s||!s.start||!s.end)return;this.location=s,this.emit(tt.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(tt.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(r){return this.located(r)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let r=e[0],n=e[e.length-1],s={start:{index:r.index,href:r.href,cfi:r.mapping.start,displayed:{page:r.pages[0]||1,total:r.totalPages}},end:{index:n.index,href:n.href,cfi:n.mapping.end,displayed:{page:n.pages[n.pages.length-1]||1,total:n.totalPages}}},i=this.book.locations.locationFromCfi(r.mapping.start),o=this.book.locations.locationFromCfi(n.mapping.end);i!=null&&(s.start.location=i,s.start.percentage=this.book.locations.percentageFromLocation(i)),o!=null&&(s.end.location=o,s.end.percentage=this.book.locations.percentageFromLocation(o));let l=this.book.pageList.pageFromCfi(r.mapping.start),c=this.book.pageList.pageFromCfi(n.mapping.end);return l!=-1&&(s.start.page=l),c!=-1&&(s.end.page=c),n.index===this.book.spine.last().index&&s.end.displayed.page>=s.end.displayed.total&&(s.atEnd=!0),r.index===this.book.spine.first().index&&s.start.displayed.page===1&&(s.atStart=!0),s}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){Vv.forEach(r=>{e.on(r,n=>this.triggerViewEvent(n,e))}),e.on(tt.CONTENTS.SELECTED,r=>this.triggerSelectedEvent(r,e))}triggerViewEvent(e,r){this.emit(e.type,e,r)}triggerSelectedEvent(e,r){this.emit(tt.RENDITION.SELECTED,e,r)}triggerMarkEvent(e,r,n){this.emit(tt.RENDITION.MARK_CLICKED,e,r,n)}getRange(e,r){var n=new sr(e),s=this.manager.visible().filter(function(i){if(n.spinePos===i.index)return!0});if(s.length)return s[0].contents.range(n,r)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(i){i()});let r=e.window.getComputedStyle(e.content,null),n=(e.content.offsetHeight-(parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)))*.95,s=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-s+"px":"100%")+"!important","max-height":n+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-s+"px":"100%")+"!important","max-height":n+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(i,o){setTimeout(function(){i()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(tt.CONTENTS.LINK_CLICKED,r=>{let n=this.book.path.relative(r);this.display(n)})}injectStylesheet(e,r){let n=e.createElement("link");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(n)}injectScript(e,r){let n=e.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",this.settings.script),n.textContent=" ",e.getElementsByTagName("head")[0].appendChild(n)}injectIdentifier(e,r){let n=this.book.packaging.metadata.identifier,s=e.createElement("meta");s.setAttribute("name","dc.relation.ispartof"),n&&s.setAttribute("content",n),e.getElementsByTagName("head")[0].appendChild(s)}}ul(TI.prototype);function rd(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wJ={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,s,i){function o(d,u){if(!s[d]){if(!n[d]){var h=typeof rd=="function"&&rd;if(!u&&h)return h(d,!0);if(l)return l(d,!0);var f=new Error("Cannot find module '"+d+"'");throw f.code="MODULE_NOT_FOUND",f}var g=s[d]={exports:{}};n[d][0].call(g.exports,function(x){var m=n[d][1][x];return o(m||x)},g,g.exports,r,n,s,i)}return s[d].exports}for(var l=typeof rd=="function"&&rd,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(r,n,s){var i=r("./utils"),o=r("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var d=[],u,h,f,g,x,m,p,b=0,v=c.length,y=v,w=i.getTypeOf(c)!=="string";b<c.length;)y=v-b,w?(u=c[b++],h=b<v?c[b++]:0,f=b<v?c[b++]:0):(u=c.charCodeAt(b++),h=b<v?c.charCodeAt(b++):0,f=b<v?c.charCodeAt(b++):0),g=u>>2,x=(u&3)<<4|h>>4,m=y>1?(h&15)<<2|f>>6:64,p=y>2?f&63:64,d.push(l.charAt(g)+l.charAt(x)+l.charAt(m)+l.charAt(p));return d.join("")},s.decode=function(c){var d,u,h,f,g,x,m,p=0,b=0,v="data:";if(c.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");c=c.replace(/[^A-Za-z0-9+/=]/g,"");var y=c.length*3/4;if(c.charAt(c.length-1)===l.charAt(64)&&y--,c.charAt(c.length-2)===l.charAt(64)&&y--,y%1!==0)throw new Error("Invalid base64 input, bad content length.");var w;for(o.uint8array?w=new Uint8Array(y|0):w=new Array(y|0);p<c.length;)f=l.indexOf(c.charAt(p++)),g=l.indexOf(c.charAt(p++)),x=l.indexOf(c.charAt(p++)),m=l.indexOf(c.charAt(p++)),d=f<<2|g>>4,u=(g&15)<<4|x>>2,h=(x&3)<<6|m,w[b++]=d,x!==64&&(w[b++]=u),m!==64&&(w[b++]=h);return w}},{"./support":30,"./utils":32}],2:[function(r,n,s){var i=r("./external"),o=r("./stream/DataWorker"),l=r("./stream/Crc32Probe"),c=r("./stream/DataLengthProbe");function d(u,h,f,g,x){this.compressedSize=u,this.uncompressedSize=h,this.crc32=f,this.compression=g,this.compressedContent=x}d.prototype={getContentWorker:function(){var u=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return u.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(u,h,f){return u.pipe(new l).pipe(new c("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},n.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,s){var i=r("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,s){var i=r("./utils");function o(){for(var u,h=[],f=0;f<256;f++){u=f;for(var g=0;g<8;g++)u=u&1?3988292384^u>>>1:u>>>1;h[f]=u}return h}var l=o();function c(u,h,f,g){var x=l,m=g+f;u=u^-1;for(var p=g;p<m;p++)u=u>>>8^x[(u^h[p])&255];return u^-1}function d(u,h,f,g){var x=l,m=g+f;u=u^-1;for(var p=g;p<m;p++)u=u>>>8^x[(u^h.charCodeAt(p))&255];return u^-1}n.exports=function(h,f){if(typeof h>"u"||!h.length)return 0;var g=i.getTypeOf(h)!=="string";return g?c(f|0,h,h.length,0):d(f|0,h,h.length,0)}},{"./utils":32}],5:[function(r,n,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(r,n,s){var i=null;typeof Promise<"u"?i=Promise:i=r("lie"),n.exports={Promise:i}},{lie:37}],7:[function(r,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),l=r("./utils"),c=r("./stream/GenericWorker"),d=i?"uint8array":"array";s.magic="\b\0";function u(h,f){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}l.inherits(u,c),u.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,h.data),!1)},u.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},s.compressWorker=function(h){return new u("Deflate",h)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,s){var i=r("../utils"),o=r("../stream/GenericWorker"),l=r("../utf8"),c=r("../crc32"),d=r("../signature"),u=function(b,v){var y="",w;for(w=0;w<v;w++)y+=String.fromCharCode(b&255),b=b>>>8;return y},h=function(b,v){var y=b;return b||(y=v?16893:33204),(y&65535)<<16},f=function(b){return(b||0)&63},g=function(b,v,y,w,k,j){var _=b.file,S=b.compression,A=j!==l.utf8encode,T=i.transformTo("string",j(_.name)),E=i.transformTo("string",l.utf8encode(_.name)),C=_.comment,z=i.transformTo("string",j(C)),M=i.transformTo("string",l.utf8encode(C)),F=E.length!==_.name.length,D=M.length!==C.length,L,K,$="",R="",Y="",ee=_.dir,B=_.date,U={crc32:0,compressedSize:0,uncompressedSize:0};(!v||y)&&(U.crc32=b.crc32,U.compressedSize=b.compressedSize,U.uncompressedSize=b.uncompressedSize);var V=0;v&&(V|=8),!A&&(F||D)&&(V|=2048);var se=0,Ne=0;ee&&(se|=16),k==="UNIX"?(Ne=798,se|=h(_.unixPermissions,ee)):(Ne=20,se|=f(_.dosPermissions)),L=B.getUTCHours(),L=L<<6,L=L|B.getUTCMinutes(),L=L<<5,L=L|B.getUTCSeconds()/2,K=B.getUTCFullYear()-1980,K=K<<4,K=K|B.getUTCMonth()+1,K=K<<5,K=K|B.getUTCDate(),F&&(R=u(1,1)+u(c(T),4)+E,$+="up"+u(R.length,2)+R),D&&(Y=u(1,1)+u(c(z),4)+M,$+="uc"+u(Y.length,2)+Y);var ie="";ie+=`
\0`,ie+=u(V,2),ie+=S.magic,ie+=u(L,2),ie+=u(K,2),ie+=u(U.crc32,4),ie+=u(U.compressedSize,4),ie+=u(U.uncompressedSize,4),ie+=u(T.length,2),ie+=u($.length,2);var q=d.LOCAL_FILE_HEADER+ie+T+$,H=d.CENTRAL_FILE_HEADER+u(Ne,2)+ie+u(z.length,2)+"\0\0\0\0"+u(se,4)+u(w,4)+T+$+z;return{fileRecord:q,dirRecord:H}},x=function(b,v,y,w,k){var j="",_=i.transformTo("string",k(w));return j=d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(b,2)+u(b,2)+u(v,4)+u(y,4)+u(_.length,2)+_,j},m=function(b){var v="";return v=d.DATA_DESCRIPTOR+u(b.crc32,4)+u(b.compressedSize,4)+u(b.uncompressedSize,4),v};function p(b,v,y,w){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=y,this.encodeFileName=w,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(p,o),p.prototype.push=function(b){var v=b.meta.percent||0,y=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,o.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:y?(v+100*(y-w-1))/y:100}}))},p.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var v=this.streamFiles&&!b.file.dir;if(v){var y=g(b,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(b){this.accumulate=!1;var v=this.streamFiles&&!b.file.dir,y=g(b,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),v)this.push({data:m(b),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var b=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var y=this.bytesWritten-b,w=x(this.dirRecords.length,y,b,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(b){this._sources.push(b);var v=this;return b.on("data",function(y){v.processChunk(y)}),b.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),b.on("error",function(y){v.error(y)}),this},p.prototype.resume=function(){if(!o.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},p.prototype.error=function(b){var v=this._sources;if(!o.prototype.error.call(this,b))return!1;for(var y=0;y<v.length;y++)try{v[y].error(b)}catch{}return!0},p.prototype.lock=function(){o.prototype.lock.call(this);for(var b=this._sources,v=0;v<b.length;v++)b[v].lock()},n.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,s){var i=r("../compressions"),o=r("./ZipFileWorker"),l=function(c,d){var u=c||d,h=i[u];if(!h)throw new Error(u+" is not a valid compression method !");return h};s.generateWorker=function(c,d,u){var h=new o(d.streamFiles,u,d.platform,d.encodeFileName),f=0;try{c.forEach(function(g,x){f++;var m=l(x.options.compression,d.compression),p=x.options.compressionOptions||d.compressionOptions||{},b=x.dir,v=x.date;x._compressWorker(m,p).withStreamInfo("file",{name:g,dir:b,date:v,comment:x.comment||"",unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions}).pipe(h)}),h.entriesCount=f}catch(g){h.error(g)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}i.prototype=r("./object"),i.prototype.loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(o,l){return new i().loadAsync(o,l)},i.external=r("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,s){var i=r("./utils"),o=r("./external"),l=r("./utf8"),c=r("./zipEntries"),d=r("./stream/Crc32Probe"),u=r("./nodejsUtils");function h(f){return new o.Promise(function(g,x){var m=f.decompressed.getContentWorker().pipe(new d);m.on("error",function(p){x(p)}).on("end",function(){m.streamInfo.crc32!==f.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}n.exports=function(f,g){var x=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),u.isNode&&u.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",f,!0,g.optimizedBinaryString,g.base64).then(function(m){var p=new c(g);return p.load(m),p}).then(function(p){var b=[o.Promise.resolve(p)],v=p.files;if(g.checkCRC32)for(var y=0;y<v.length;y++)b.push(h(v[y]));return o.Promise.all(b)}).then(function(p){for(var b=p.shift(),v=b.files,y=0;y<v.length;y++){var w=v[y],k=w.fileNameStr,j=i.resolve(w.fileNameStr);x.file(j,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:g.createFolders}),w.dir||(x.file(j).unsafeOriginalName=k)}return b.zipComment.length&&(x.comment=b.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,s){var i=r("../utils"),o=r("../stream/GenericWorker");function l(c,d){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(l,o),l.prototype._bindStream=function(c){var d=this;this._stream=c,c.pause(),c.on("data",function(u){d.push({data:u,meta:{percent:0}})}).on("error",function(u){d.isPaused?this.generatedError=u:d.error(u)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return o.prototype.pause.call(this)?(this._stream.pause(),!0):!1},l.prototype.resume=function(){return o.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,s){var i=r("readable-stream").Readable,o=r("../utils");o.inherits(l,i);function l(c,d,u){i.call(this,d),this._helper=c;var h=this;c.on("data",function(f,g){h.push(f)||h._helper.pause(),u&&u(g)}).on("error",function(f){h.emit("error",f)}).on("end",function(){h.push(null)})}l.prototype._read=function(){this._helper.resume()},n.exports=l},{"../utils":32,"readable-stream":16}],14:[function(r,n,s){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,n,s){var i=r("./utf8"),o=r("./utils"),l=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),d=r("./defaults"),u=r("./compressedObject"),h=r("./zipObject"),f=r("./generate"),g=r("./nodejsUtils"),x=r("./nodejs/NodejsStreamInputAdapter"),m=function(k,j,_){var S=o.getTypeOf(j),A,T=o.extend(_||{},d);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&T.unixPermissions&16384&&(T.dir=!0),T.dosPermissions&&T.dosPermissions&16&&(T.dir=!0),T.dir&&(k=b(k)),T.createFolders&&(A=p(k))&&v.call(this,A,!0);var E=S==="string"&&T.binary===!1&&T.base64===!1;(!_||typeof _.binary>"u")&&(T.binary=!E);var C=j instanceof u&&j.uncompressedSize===0;(C||T.dir||!j||j.length===0)&&(T.base64=!1,T.binary=!0,j="",T.compression="STORE",S="string");var z=null;j instanceof u||j instanceof l?z=j:g.isNode&&g.isStream(j)?z=new x(k,j):z=o.prepareContent(k,j,T.binary,T.optimizedBinaryString,T.base64);var M=new h(k,z,T);this.files[k]=M},p=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var j=k.lastIndexOf("/");return j>0?k.substring(0,j):""},b=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},v=function(k,j){return j=typeof j<"u"?j:d.createFolders,k=b(k),this.files[k]||m.call(this,k,null,{dir:!0,createFolders:j}),this.files[k]};function y(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var j,_,S;for(j in this.files)S=this.files[j],_=j.slice(this.root.length,j.length),_&&j.slice(0,this.root.length)===this.root&&k(_,S)},filter:function(k){var j=[];return this.forEach(function(_,S){k(_,S)&&j.push(S)}),j},file:function(k,j,_){if(arguments.length===1)if(y(k)){var S=k;return this.filter(function(T,E){return!E.dir&&S.test(T)})}else{var A=this.files[this.root+k];return A&&!A.dir?A:null}else k=this.root+k,m.call(this,k,j,_);return this},folder:function(k){if(!k)return this;if(y(k))return this.filter(function(A,T){return T.dir&&k.test(A)});var j=this.root+k,_=v.call(this,j),S=this.clone();return S.root=_.name,S},remove:function(k){k=this.root+k;var j=this.files[k];if(j||(k.slice(-1)!=="/"&&(k+="/"),j=this.files[k]),j&&!j.dir)delete this.files[k];else for(var _=this.filter(function(A,T){return T.name.slice(0,k.length)===k}),S=0;S<_.length;S++)delete this.files[_[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var j,_={};try{if(_=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode}),_.type=_.type.toLowerCase(),_.compression=_.compression.toUpperCase(),_.type==="binarystring"&&(_.type="string"),!_.type)throw new Error("No output type specified.");o.checkSupport(_.type),(_.platform==="darwin"||_.platform==="freebsd"||_.platform==="linux"||_.platform==="sunos")&&(_.platform="UNIX"),_.platform==="win32"&&(_.platform="DOS");var S=_.comment||this.comment||"";j=f.generateWorker(this,_,S)}catch(A){j=new l("error"),j.error(A)}return new c(j,_.type||"string",_.mimeType)},generateAsync:function(k,j){return this.generateInternalStream(k).accumulate(j)},generateNodeStream:function(k,j){return k=k||{},k.type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(j)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,s){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,s){var i=r("./DataReader"),o=r("../utils");function l(c){i.call(this,c);for(var d=0;d<this.data.length;d++)c[d]=c[d]&255}o.inherits(l,i),l.prototype.byteAt=function(c){return this.data[this.zero+c]},l.prototype.lastIndexOfSignature=function(c){for(var d=c.charCodeAt(0),u=c.charCodeAt(1),h=c.charCodeAt(2),f=c.charCodeAt(3),g=this.length-4;g>=0;--g)if(this.data[g]===d&&this.data[g+1]===u&&this.data[g+2]===h&&this.data[g+3]===f)return g-this.zero;return-1},l.prototype.readAndCheckSignature=function(c){var d=c.charCodeAt(0),u=c.charCodeAt(1),h=c.charCodeAt(2),f=c.charCodeAt(3),g=this.readData(4);return d===g[0]&&u===g[1]&&h===g[2]&&f===g[3]},l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},n.exports=l},{"../utils":32,"./DataReader":18}],18:[function(r,n,s){var i=r("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c=0,d;for(this.checkOffset(l),d=this.index+l-1;d>=this.index;d--)c=(c<<8)+this.byteAt(d);return this.index+=l,c},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC((l>>25&127)+1980,(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(l&31)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,s){var i=r("./Uint8ArrayReader"),o=r("../utils");function l(c){i.call(this,c)}o.inherits(l,i),l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},n.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,s){var i=r("./DataReader"),o=r("../utils");function l(c){i.call(this,c)}o.inherits(l,i),l.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},l.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},l.prototype.readAndCheckSignature=function(c){var d=this.readData(4);return c===d},l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},n.exports=l},{"../utils":32,"./DataReader":18}],21:[function(r,n,s){var i=r("./ArrayReader"),o=r("../utils");function l(c){i.call(this,c)}o.inherits(l,i),l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},n.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,s){var i=r("../utils"),o=r("../support"),l=r("./ArrayReader"),c=r("./StringReader"),d=r("./NodeBufferReader"),u=r("./Uint8ArrayReader");n.exports=function(h){var f=i.getTypeOf(h);return i.checkSupport(f),f==="string"&&!o.uint8array?new c(h):f==="nodebuffer"?new d(h):o.uint8array?new u(i.transformTo("uint8array",h)):new l(i.transformTo("array",h))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,s){var i=r("./GenericWorker"),o=r("../utils");function l(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(l,i),l.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,s){var i=r("./GenericWorker"),o=r("../crc32"),l=r("../utils");function c(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}l.inherits(c,i),c.prototype.processChunk=function(d){this.streamInfo.crc32=o(d.data,this.streamInfo.crc32||0),this.push(d)},n.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,s){var i=r("../utils"),o=r("./GenericWorker");function l(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(l,o),l.prototype.processChunk=function(c){if(c){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+c.data.length}o.prototype.processChunk.call(this,c)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,s){var i=r("../utils"),o=r("./GenericWorker"),l=16*1024;function c(d){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(h){u.dataIsReady=!0,u.data=h,u.max=h&&h.length||0,u.type=i.getTypeOf(h),u.isPaused||u._tickAndRepeat()},function(h){u.error(h)})}i.inherits(c,o),c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return o.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0):!1},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=l,u=null,h=Math.min(this.max,this.index+d);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,h);break;case"uint8array":u=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":u=this.data.slice(this.index,h);break}return this.index=h,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return this.isFinished?!1:(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(c){l.processChunk(c)}),o.on("end",function(){l.end()}),o.on("error",function(c){l.error(c)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var o=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(r,n,s){var i=r("../utils"),o=r("./ConvertWorker"),l=r("./GenericWorker"),c=r("../base64"),d=r("../support"),u=r("../external"),h=null;if(d.nodestream)try{h=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(p,b,v){switch(p){case"blob":return i.newBlob(i.transformTo("arraybuffer",b),v);case"base64":return c.encode(b);default:return i.transformTo(p,b)}}function g(p,b){var v,y=0,w=null,k=0;for(v=0;v<b.length;v++)k+=b[v].length;switch(p){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":for(w=new Uint8Array(k),v=0;v<b.length;v++)w.set(b[v],y),y+=b[v].length;return w;case"nodebuffer":return Buffer.concat(b);default:throw new Error("concat : unsupported type '"+p+"'")}}function x(p,b){return new u.Promise(function(v,y){var w=[],k=p._internalType,j=p._outputType,_=p._mimeType;p.on("data",function(S,A){w.push(S),b&&b(A)}).on("error",function(S){w=[],y(S)}).on("end",function(){try{var S=f(j,g(k,w),_);v(S)}catch(A){y(A)}w=[]}).resume()})}function m(p,b,v){var y=b;switch(b){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string";break}try{this._internalType=y,this._outputType=b,this._mimeType=v,i.checkSupport(y),this._worker=p.pipe(new o(y)),p.lock()}catch(w){this._worker=new l("error"),this._worker.error(w)}}m.prototype={accumulate:function(p){return x(this,p)},on:function(p,b){var v=this;return p==="data"?this._worker.on(p,function(y){b.call(v,y.data,y.meta)}):this._worker.on(p,function(){i.delay(b,arguments,v)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,l=new o;l.append(i),s.blob=l.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!r("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,s){for(var i=r("./utils"),o=r("./support"),l=r("./nodejsUtils"),c=r("./stream/GenericWorker"),d=new Array(256),u=0;u<256;u++)d[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;d[254]=d[254]=1;var h=function(p){var b,v,y,w,k,j=p.length,_=0;for(w=0;w<j;w++)v=p.charCodeAt(w),(v&64512)===55296&&w+1<j&&(y=p.charCodeAt(w+1),(y&64512)===56320&&(v=65536+(v-55296<<10)+(y-56320),w++)),_+=v<128?1:v<2048?2:v<65536?3:4;for(o.uint8array?b=new Uint8Array(_):b=new Array(_),k=0,w=0;k<_;w++)v=p.charCodeAt(w),(v&64512)===55296&&w+1<j&&(y=p.charCodeAt(w+1),(y&64512)===56320&&(v=65536+(v-55296<<10)+(y-56320),w++)),v<128?b[k++]=v:v<2048?(b[k++]=192|v>>>6,b[k++]=128|v&63):v<65536?(b[k++]=224|v>>>12,b[k++]=128|v>>>6&63,b[k++]=128|v&63):(b[k++]=240|v>>>18,b[k++]=128|v>>>12&63,b[k++]=128|v>>>6&63,b[k++]=128|v&63);return b},f=function(p,b){var v;for(b=b||p.length,b>p.length&&(b=p.length),v=b-1;v>=0&&(p[v]&192)===128;)v--;return v<0||v===0?b:v+d[p[v]]>b?v:b},g=function(p){var b,v,y,w,k=p.length,j=new Array(k*2);for(v=0,b=0;b<k;){if(y=p[b++],y<128){j[v++]=y;continue}if(w=d[y],w>4){j[v++]=65533,b+=w-1;continue}for(y&=w===2?31:w===3?15:7;w>1&&b<k;)y=y<<6|p[b++]&63,w--;if(w>1){j[v++]=65533;continue}y<65536?j[v++]=y:(y-=65536,j[v++]=55296|y>>10&1023,j[v++]=56320|y&1023)}return j.length!==v&&(j.subarray?j=j.subarray(0,v):j.length=v),i.applyFromCharCode(j)};s.utf8encode=function(b){return o.nodebuffer?l.newBufferFrom(b,"utf-8"):h(b)},s.utf8decode=function(b){return o.nodebuffer?i.transformTo("nodebuffer",b).toString("utf-8"):(b=i.transformTo(o.uint8array?"uint8array":"array",b),g(b))};function x(){c.call(this,"utf-8 decode"),this.leftOver=null}i.inherits(x,c),x.prototype.processChunk=function(p){var b=i.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=b;b=new Uint8Array(v.length+this.leftOver.length),b.set(this.leftOver,0),b.set(v,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var y=f(b),w=b;y!==b.length&&(o.uint8array?(w=b.subarray(0,y),this.leftOver=b.subarray(y,b.length)):(w=b.slice(0,y),this.leftOver=b.slice(y,b.length))),this.push({data:s.utf8decode(w),meta:p.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=x;function m(){c.call(this,"utf-8 encode")}i.inherits(m,c),m.prototype.processChunk=function(p){this.push({data:s.utf8encode(p.data),meta:p.meta})},s.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,s){var i=r("./support"),o=r("./base64"),l=r("./nodejsUtils"),c=r("./external");r("setimmediate");function d(p){var b=null;return i.uint8array?b=new Uint8Array(p.length):b=new Array(p.length),h(p,b)}s.newBlob=function(p,b){s.checkSupport("blob");try{return new Blob([p],{type:b})}catch{try{var v=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,y=new v;return y.append(p),y.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};function u(p){return p}function h(p,b){for(var v=0;v<p.length;++v)b[v]=p.charCodeAt(v)&255;return b}var f={stringifyByChunk:function(p,b,v){var y=[],w=0,k=p.length;if(k<=v)return String.fromCharCode.apply(null,p);for(;w<k;)b==="array"||b==="nodebuffer"?y.push(String.fromCharCode.apply(null,p.slice(w,Math.min(w+v,k)))):y.push(String.fromCharCode.apply(null,p.subarray(w,Math.min(w+v,k)))),w+=v;return y.join("")},stringifyByChar:function(p){for(var b="",v=0;v<p.length;v++)b+=String.fromCharCode(p[v]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function g(p){var b=65536,v=s.getTypeOf(p),y=!0;if(v==="uint8array"?y=f.applyCanBeUsed.uint8array:v==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;b>1;)try{return f.stringifyByChunk(p,v,b)}catch{b=Math.floor(b/2)}return f.stringifyByChar(p)}s.applyFromCharCode=g;function x(p,b){for(var v=0;v<p.length;v++)b[v]=p[v];return b}var m={};m.string={string:u,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return m.string.uint8array(p).buffer},uint8array:function(p){return h(p,new Uint8Array(p.length))},nodebuffer:function(p){return h(p,l.allocBuffer(p.length))}},m.array={string:g,array:u,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return l.newBufferFrom(p)}},m.arraybuffer={string:function(p){return g(new Uint8Array(p))},array:function(p){return x(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:u,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return l.newBufferFrom(new Uint8Array(p))}},m.uint8array={string:g,array:function(p){return x(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:u,nodebuffer:function(p){return l.newBufferFrom(p)}},m.nodebuffer={string:g,array:function(p){return x(p,new Array(p.length))},arraybuffer:function(p){return m.nodebuffer.uint8array(p).buffer},uint8array:function(p){return x(p,new Uint8Array(p.length))},nodebuffer:u},s.transformTo=function(p,b){if(b||(b=""),!p)return b;s.checkSupport(p);var v=s.getTypeOf(b),y=m[v][p](b);return y},s.resolve=function(p){for(var b=p.split("/"),v=[],y=0;y<b.length;y++){var w=b[y];w==="."||w===""&&y!==0&&y!==b.length-1||(w===".."?v.pop():v.push(w))}return v.join("/")},s.getTypeOf=function(p){if(typeof p=="string")return"string";if(Object.prototype.toString.call(p)==="[object Array]")return"array";if(i.nodebuffer&&l.isBuffer(p))return"nodebuffer";if(i.uint8array&&p instanceof Uint8Array)return"uint8array";if(i.arraybuffer&&p instanceof ArrayBuffer)return"arraybuffer"},s.checkSupport=function(p){var b=i[p.toLowerCase()];if(!b)throw new Error(p+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(p){var b="",v,y;for(y=0;y<(p||"").length;y++)v=p.charCodeAt(y),b+="\\x"+(v<16?"0":"")+v.toString(16).toUpperCase();return b},s.delay=function(p,b,v){setImmediate(function(){p.apply(v||null,b||[])})},s.inherits=function(p,b){var v=function(){};v.prototype=b.prototype,p.prototype=new v},s.extend=function(){var p={},b,v;for(b=0;b<arguments.length;b++)for(v in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],v)&&typeof p[v]>"u"&&(p[v]=arguments[b][v]);return p},s.prepareContent=function(p,b,v,y,w){var k=c.Promise.resolve(b).then(function(j){var _=i.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1);return _&&typeof FileReader<"u"?new c.Promise(function(S,A){var T=new FileReader;T.onload=function(E){S(E.target.result)},T.onerror=function(E){A(E.target.error)},T.readAsArrayBuffer(j)}):j});return k.then(function(j){var _=s.getTypeOf(j);return _?(_==="arraybuffer"?j=s.transformTo("uint8array",j):_==="string"&&(w?j=o.decode(j):v&&y!==!0&&(j=d(j))),j):c.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,s){var i=r("./reader/readerFor"),o=r("./utils"),l=r("./signature"),c=r("./zipEntry"),d=r("./support");function u(h){this.files=[],this.loadOptions=h}u.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(h)+")")}},isSignature:function(h,f){var g=this.reader.index;this.reader.setIndex(h);var x=this.reader.readString(4),m=x===f;return this.reader.setIndex(g),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=d.uint8array?"uint8array":"array",g=o.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h=this.zip64EndOfCentralSize-44,f=0,g,x,m;f<h;)g=this.reader.readInt(2),x=this.reader.readInt(4),m=this.reader.readData(x),this.zip64ExtensibleData[g]={id:g,length:x,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)h=new c({zip64:this.zip64},this.loadOptions),h.readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(h<0){var f=!this.isSignature(0,l.LOCAL_FILE_HEADER);throw f?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(h);var g=h;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,h=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),h<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var x=this.centralDirOffset+this.centralDirSize;this.zip64&&(x+=20,x+=12+this.zip64EndOfCentralSize);var m=g-x;if(m>0)this.isSignature(g,l.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,s){var i=r("./reader/readerFor"),o=r("./utils"),l=r("./compressedObject"),c=r("./crc32"),d=r("./utf8"),u=r("./compressions"),h=r("./support"),f=0,g=3,x=function(p){for(var b in u)if(Object.prototype.hasOwnProperty.call(u,b)&&u[b].magic===p)return u[b];return null};function m(p,b){this.options=p,this.loadOptions=b}m.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(p){var b,v;if(p.skip(22),this.fileNameLength=p.readInt(2),v=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(b=x(this.compressionMethod),b===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,b,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var b=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(b),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),p===f&&(this.dosPermissions=this.externalFileAttributes&63),p===g&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var b=p.index+this.extraFieldsLength,v,y,w;for(this.extraFields||(this.extraFields={});p.index+4<b;)v=p.readInt(2),y=p.readInt(2),w=p.readData(y),this.extraFields[v]={id:v,length:y,value:w};p.setIndex(b)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var v=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var w=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var b=i(p.value);return b.readInt(1)!==1||c(this.fileName)!==b.readInt(4)?null:d.utf8decode(b.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var b=i(p.value);return b.readInt(1)!==1||c(this.fileComment)!==b.readInt(4)?null:d.utf8decode(b.readData(p.length-5))}return null}},n.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,s){var i=r("./stream/StreamHelper"),o=r("./stream/DataWorker"),l=r("./utf8"),c=r("./compressedObject"),d=r("./stream/GenericWorker"),u=function(x,m,p){this.name=x,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=m,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}};u.prototype={internalStream:function(x){var m=null,p="string";try{if(!x)throw new Error("No output type specified.");p=x.toLowerCase();var b=p==="string"||p==="text";(p==="binarystring"||p==="text")&&(p="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!b&&(m=m.pipe(new l.Utf8EncodeWorker)),!v&&b&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(y){m=new d("error"),m.error(y)}return new i(m,p,"")},async:function(x,m){return this.internalStream(x).accumulate(m)},nodeStream:function(x,m){return this.internalStream(x||"nodebuffer").toNodejsStream(m)},_compressWorker:function(x,m){if(this._data instanceof c&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(p,x,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)u.prototype[h[g]]=f;n.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,s){(function(i){var o=i.MutationObserver||i.WebKitMutationObserver,l;if(o){var c=0,d=new o(x),u=i.document.createTextNode("");d.observe(u,{characterData:!0}),l=function(){u.data=c=++c%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var h=new i.MessageChannel;h.port1.onmessage=x,l=function(){h.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?l=function(){var p=i.document.createElement("script");p.onreadystatechange=function(){x(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},i.document.documentElement.appendChild(p)}:l=function(){setTimeout(x,0)};var f,g=[];function x(){f=!0;for(var p,b,v=g.length;v;){for(b=g,g=[],p=-1;++p<v;)b[p]();v=g.length}f=!1}n.exports=m;function m(p){g.push(p)===1&&!f&&l()}}).call(this,typeof Fe<"u"?Fe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,s){var i=r("immediate");function o(){}var l={},c=["REJECTED"],d=["FULFILLED"],u=["PENDING"];n.exports=h;function h(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,k!==o&&m(this,k)}h.prototype.finally=function(k){if(typeof k!="function")return this;var j=this.constructor;return this.then(_,S);function _(A){function T(){return A}return j.resolve(k()).then(T)}function S(A){function T(){throw A}return j.resolve(k()).then(T)}},h.prototype.catch=function(k){return this.then(null,k)},h.prototype.then=function(k,j){if(typeof k!="function"&&this.state===d||typeof j!="function"&&this.state===c)return this;var _=new this.constructor(o);if(this.state!==u){var S=this.state===d?k:j;g(_,S,this.outcome)}else this.queue.push(new f(_,k,j));return _};function f(k,j,_){this.promise=k,typeof j=="function"&&(this.onFulfilled=j,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(k){l.resolve(this.promise,k)},f.prototype.otherCallFulfilled=function(k){g(this.promise,this.onFulfilled,k)},f.prototype.callRejected=function(k){l.reject(this.promise,k)},f.prototype.otherCallRejected=function(k){g(this.promise,this.onRejected,k)};function g(k,j,_){i(function(){var S;try{S=j(_)}catch(A){return l.reject(k,A)}S===k?l.reject(k,new TypeError("Cannot resolve promise with itself")):l.resolve(k,S)})}l.resolve=function(k,j){var _=p(x,j);if(_.status==="error")return l.reject(k,_.value);var S=_.value;if(S)m(k,S);else{k.state=d,k.outcome=j;for(var A=-1,T=k.queue.length;++A<T;)k.queue[A].callFulfilled(j)}return k},l.reject=function(k,j){k.state=c,k.outcome=j;for(var _=-1,S=k.queue.length;++_<S;)k.queue[_].callRejected(j);return k};function x(k){var j=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof j=="function")return function(){j.apply(k,arguments)}}function m(k,j){var _=!1;function S(C){_||(_=!0,l.reject(k,C))}function A(C){_||(_=!0,l.resolve(k,C))}function T(){j(A,S)}var E=p(T);E.status==="error"&&S(E.value)}function p(k,j){var _={};try{_.value=k(j),_.status="success"}catch(S){_.status="error",_.value=S}return _}h.resolve=b;function b(k){return k instanceof this?k:l.resolve(new this(o),k)}h.reject=v;function v(k){var j=new this(o);return l.reject(j,k)}h.all=y;function y(k){var j=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=k.length,S=!1;if(!_)return this.resolve([]);for(var A=new Array(_),T=0,E=-1,C=new this(o);++E<_;)z(k[E],E);return C;function z(M,F){j.resolve(M).then(D,function(L){S||(S=!0,l.reject(C,L))});function D(L){A[F]=L,++T===_&&!S&&(S=!0,l.resolve(C,A))}}}h.race=w;function w(k){var j=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=k.length,S=!1;if(!_)return this.resolve([]);for(var A=-1,T=new this(o);++A<_;)E(k[A]);return T;function E(C){j.resolve(C).then(function(z){S||(S=!0,l.resolve(T,z))},function(z){S||(S=!0,l.reject(T,z))})}}},{immediate:36}],38:[function(r,n,s){var i=r("./lib/utils/common").assign,o=r("./lib/deflate"),l=r("./lib/inflate"),c=r("./lib/zlib/constants"),d={};i(d,o,l,c),n.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,s){var i=r("./zlib/deflate"),o=r("./utils/common"),l=r("./utils/strings"),c=r("./zlib/messages"),d=r("./zlib/zstream"),u=Object.prototype.toString,h=0,f=4,g=0,x=1,m=2,p=-1,b=0,v=8;function y(_){if(!(this instanceof y))return new y(_);this.options=o.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},_||{});var S=this.options;S.raw&&S.windowBits>0?S.windowBits=-S.windowBits:S.gzip&&S.windowBits>0&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var A=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(A!==g)throw new Error(c[A]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var T;if(typeof S.dictionary=="string"?T=l.string2buf(S.dictionary):u.call(S.dictionary)==="[object ArrayBuffer]"?T=new Uint8Array(S.dictionary):T=S.dictionary,A=i.deflateSetDictionary(this.strm,T),A!==g)throw new Error(c[A]);this._dict_set=!0}}y.prototype.push=function(_,S){var A=this.strm,T=this.options.chunkSize,E,C;if(this.ended)return!1;C=S===~~S?S:S===!0?f:h,typeof _=="string"?A.input=l.string2buf(_):u.call(_)==="[object ArrayBuffer]"?A.input=new Uint8Array(_):A.input=_,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(T),A.next_out=0,A.avail_out=T),E=i.deflate(A,C),E!==x&&E!==g)return this.onEnd(E),this.ended=!0,!1;(A.avail_out===0||A.avail_in===0&&(C===f||C===m))&&(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((A.avail_in>0||A.avail_out===0)&&E!==x);return C===f?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===g):(C===m&&(this.onEnd(g),A.avail_out=0),!0)},y.prototype.onData=function(_){this.chunks.push(_)},y.prototype.onEnd=function(_){_===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function w(_,S){var A=new y(S);if(A.push(_,!0),A.err)throw A.msg||c[A.err];return A.result}function k(_,S){return S=S||{},S.raw=!0,w(_,S)}function j(_,S){return S=S||{},S.gzip=!0,w(_,S)}s.Deflate=y,s.deflate=w,s.deflateRaw=k,s.gzip=j},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,s){var i=r("./zlib/inflate"),o=r("./utils/common"),l=r("./utils/strings"),c=r("./zlib/constants"),d=r("./zlib/messages"),u=r("./zlib/zstream"),h=r("./zlib/gzheader"),f=Object.prototype.toString;function g(p){if(!(this instanceof g))return new g(p);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},p||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),b.windowBits>=0&&b.windowBits<16&&!(p&&p.windowBits)&&(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&(b.windowBits&15||(b.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,b.windowBits);if(v!==c.Z_OK)throw new Error(d[v]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}g.prototype.push=function(p,b){var v=this.strm,y=this.options.chunkSize,w=this.options.dictionary,k,j,_,S,A,T,E=!1;if(this.ended)return!1;j=b===~~b?b:b===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof p=="string"?v.input=l.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?v.input=new Uint8Array(p):v.input=p,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new o.Buf8(y),v.next_out=0,v.avail_out=y),k=i.inflate(v,c.Z_NO_FLUSH),k===c.Z_NEED_DICT&&w&&(typeof w=="string"?T=l.string2buf(w):f.call(w)==="[object ArrayBuffer]"?T=new Uint8Array(w):T=w,k=i.inflateSetDictionary(this.strm,T)),k===c.Z_BUF_ERROR&&E===!0&&(k=c.Z_OK,E=!1),k!==c.Z_STREAM_END&&k!==c.Z_OK)return this.onEnd(k),this.ended=!0,!1;v.next_out&&(v.avail_out===0||k===c.Z_STREAM_END||v.avail_in===0&&(j===c.Z_FINISH||j===c.Z_SYNC_FLUSH))&&(this.options.to==="string"?(_=l.utf8border(v.output,v.next_out),S=v.next_out-_,A=l.buf2string(v.output,_),v.next_out=S,v.avail_out=y-S,S&&o.arraySet(v.output,v.output,_,S,0),this.onData(A)):this.onData(o.shrinkBuf(v.output,v.next_out))),v.avail_in===0&&v.avail_out===0&&(E=!0)}while((v.avail_in>0||v.avail_out===0)&&k!==c.Z_STREAM_END);return k===c.Z_STREAM_END&&(j=c.Z_FINISH),j===c.Z_FINISH?(k=i.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===c.Z_OK):(j===c.Z_SYNC_FLUSH&&(this.onEnd(c.Z_OK),v.avail_out=0),!0)},g.prototype.onData=function(p){this.chunks.push(p)},g.prototype.onEnd=function(p){p===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg};function x(p,b){var v=new g(b);if(v.push(p,!0),v.err)throw v.msg||d[v.err];return v.result}function m(p,b){return b=b||{},b.raw=!0,x(p,b)}s.Inflate=g,s.inflate=x,s.inflateRaw=m,s.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var u=d.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var h in u)u.hasOwnProperty(h)&&(c[h]=u[h])}}return c},s.shrinkBuf=function(c,d){return c.length===d?c:c.subarray?c.subarray(0,d):(c.length=d,c)};var o={arraySet:function(c,d,u,h,f){if(d.subarray&&c.subarray){c.set(d.subarray(u,u+h),f);return}for(var g=0;g<h;g++)c[f+g]=d[u+g]},flattenChunks:function(c){var d,u,h,f,g,x;for(h=0,d=0,u=c.length;d<u;d++)h+=c[d].length;for(x=new Uint8Array(h),f=0,d=0,u=c.length;d<u;d++)g=c[d],x.set(g,f),f+=g.length;return x}},l={arraySet:function(c,d,u,h,f){for(var g=0;g<h;g++)c[f+g]=d[u+g]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(i)},{}],42:[function(r,n,s){var i=r("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new i.Buf8(256),d=0;d<256;d++)c[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;c[254]=c[254]=1,s.string2buf=function(h){var f,g,x,m,p,b=h.length,v=0;for(m=0;m<b;m++)g=h.charCodeAt(m),(g&64512)===55296&&m+1<b&&(x=h.charCodeAt(m+1),(x&64512)===56320&&(g=65536+(g-55296<<10)+(x-56320),m++)),v+=g<128?1:g<2048?2:g<65536?3:4;for(f=new i.Buf8(v),p=0,m=0;p<v;m++)g=h.charCodeAt(m),(g&64512)===55296&&m+1<b&&(x=h.charCodeAt(m+1),(x&64512)===56320&&(g=65536+(g-55296<<10)+(x-56320),m++)),g<128?f[p++]=g:g<2048?(f[p++]=192|g>>>6,f[p++]=128|g&63):g<65536?(f[p++]=224|g>>>12,f[p++]=128|g>>>6&63,f[p++]=128|g&63):(f[p++]=240|g>>>18,f[p++]=128|g>>>12&63,f[p++]=128|g>>>6&63,f[p++]=128|g&63);return f};function u(h,f){if(f<65537&&(h.subarray&&l||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,f));for(var g="",x=0;x<f;x++)g+=String.fromCharCode(h[x]);return g}s.buf2binstring=function(h){return u(h,h.length)},s.binstring2buf=function(h){for(var f=new i.Buf8(h.length),g=0,x=f.length;g<x;g++)f[g]=h.charCodeAt(g);return f},s.buf2string=function(h,f){var g,x,m,p,b=f||h.length,v=new Array(b*2);for(x=0,g=0;g<b;){if(m=h[g++],m<128){v[x++]=m;continue}if(p=c[m],p>4){v[x++]=65533,g+=p-1;continue}for(m&=p===2?31:p===3?15:7;p>1&&g<b;)m=m<<6|h[g++]&63,p--;if(p>1){v[x++]=65533;continue}m<65536?v[x++]=m:(m-=65536,v[x++]=55296|m>>10&1023,v[x++]=56320|m&1023)}return u(v,x)},s.utf8border=function(h,f){var g;for(f=f||h.length,f>h.length&&(f=h.length),g=f-1;g>=0&&(h[g]&192)===128;)g--;return g<0||g===0?f:g+c[h[g]]>f?g:f}},{"./common":41}],43:[function(r,n,s){function i(o,l,c,d){for(var u=o&65535|0,h=o>>>16&65535|0,f=0;c!==0;){f=c>2e3?2e3:c,c-=f;do u=u+l[d++]|0,h=h+u|0;while(--f);u%=65521,h%=65521}return u|h<<16|0}n.exports=i},{}],44:[function(r,n,s){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,s){function i(){for(var c,d=[],u=0;u<256;u++){c=u;for(var h=0;h<8;h++)c=c&1?3988292384^c>>>1:c>>>1;d[u]=c}return d}var o=i();function l(c,d,u,h){var f=o,g=h+u;c^=-1;for(var x=h;x<g;x++)c=c>>>8^f[(c^d[x])&255];return c^-1}n.exports=l},{}],46:[function(r,n,s){var i=r("../utils/common"),o=r("./trees"),l=r("./adler32"),c=r("./crc32"),d=r("./messages"),u=0,h=1,f=3,g=4,x=5,m=0,p=1,b=-2,v=-3,y=-5,w=-1,k=1,j=2,_=3,S=4,A=0,T=2,E=8,C=9,z=15,M=8,F=29,D=256,L=D+1+F,K=30,$=19,R=2*L+1,Y=15,ee=3,B=258,U=B+ee+1,V=32,se=42,Ne=69,ie=73,q=91,H=103,Z=113,te=666,ge=1,Ce=2,Le=3,He=4,le=3;function Re(I,je){return I.msg=d[je],je}function Ze(I){return(I<<1)-(I>4?9:0)}function lt(I){for(var je=I.length;--je>=0;)I[je]=0}function rt(I){var je=I.state,ke=je.pending;ke>I.avail_out&&(ke=I.avail_out),ke!==0&&(i.arraySet(I.output,je.pending_buf,je.pending_out,ke,I.next_out),I.next_out+=ke,je.pending_out+=ke,I.total_out+=ke,I.avail_out-=ke,je.pending-=ke,je.pending===0&&(je.pending_out=0))}function ne(I,je){o._tr_flush_block(I,I.block_start>=0?I.block_start:-1,I.strstart-I.block_start,je),I.block_start=I.strstart,rt(I.strm)}function pe(I,je){I.pending_buf[I.pending++]=je}function Ue(I,je){I.pending_buf[I.pending++]=je>>>8&255,I.pending_buf[I.pending++]=je&255}function kt(I,je,ke,X){var ce=I.avail_in;return ce>X&&(ce=X),ce===0?0:(I.avail_in-=ce,i.arraySet(je,I.input,I.next_in,ce,ke),I.state.wrap===1?I.adler=l(I.adler,je,ce,ke):I.state.wrap===2&&(I.adler=c(I.adler,je,ce,ke)),I.next_in+=ce,I.total_in+=ce,ce)}function Se(I,je){var ke=I.max_chain_length,X=I.strstart,ce,_e,ot=I.prev_length,et=I.nice_match,at=I.strstart>I.w_size-U?I.strstart-(I.w_size-U):0,Ft=I.window,ca=I.w_mask,Bt=I.prev,Ht=I.strstart+B,Xr=Ft[X+ot-1],hn=Ft[X+ot];I.prev_length>=I.good_match&&(ke>>=2),et>I.lookahead&&(et=I.lookahead);do if(ce=je,!(Ft[ce+ot]!==hn||Ft[ce+ot-1]!==Xr||Ft[ce]!==Ft[X]||Ft[++ce]!==Ft[X+1])){X+=2,ce++;do;while(Ft[++X]===Ft[++ce]&&Ft[++X]===Ft[++ce]&&Ft[++X]===Ft[++ce]&&Ft[++X]===Ft[++ce]&&Ft[++X]===Ft[++ce]&&Ft[++X]===Ft[++ce]&&Ft[++X]===Ft[++ce]&&Ft[++X]===Ft[++ce]&&X<Ht);if(_e=B-(Ht-X),X=Ht-B,_e>ot){if(I.match_start=je,ot=_e,_e>=et)break;Xr=Ft[X+ot-1],hn=Ft[X+ot]}}while((je=Bt[je&ca])>at&&--ke!==0);return ot<=I.lookahead?ot:I.lookahead}function me(I){var je=I.w_size,ke,X,ce,_e,ot;do{if(_e=I.window_size-I.lookahead-I.strstart,I.strstart>=je+(je-U)){i.arraySet(I.window,I.window,je,je,0),I.match_start-=je,I.strstart-=je,I.block_start-=je,X=I.hash_size,ke=X;do ce=I.head[--ke],I.head[ke]=ce>=je?ce-je:0;while(--X);X=je,ke=X;do ce=I.prev[--ke],I.prev[ke]=ce>=je?ce-je:0;while(--X);_e+=je}if(I.strm.avail_in===0)break;if(X=kt(I.strm,I.window,I.strstart+I.lookahead,_e),I.lookahead+=X,I.lookahead+I.insert>=ee)for(ot=I.strstart-I.insert,I.ins_h=I.window[ot],I.ins_h=(I.ins_h<<I.hash_shift^I.window[ot+1])&I.hash_mask;I.insert&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[ot+ee-1])&I.hash_mask,I.prev[ot&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=ot,ot++,I.insert--,!(I.lookahead+I.insert<ee)););}while(I.lookahead<U&&I.strm.avail_in!==0)}function $e(I,je){var ke=65535;for(ke>I.pending_buf_size-5&&(ke=I.pending_buf_size-5);;){if(I.lookahead<=1){if(me(I),I.lookahead===0&&je===u)return ge;if(I.lookahead===0)break}I.strstart+=I.lookahead,I.lookahead=0;var X=I.block_start+ke;if((I.strstart===0||I.strstart>=X)&&(I.lookahead=I.strstart-X,I.strstart=X,ne(I,!1),I.strm.avail_out===0)||I.strstart-I.block_start>=I.w_size-U&&(ne(I,!1),I.strm.avail_out===0))return ge}return I.insert=0,je===g?(ne(I,!0),I.strm.avail_out===0?Le:He):(I.strstart>I.block_start&&(ne(I,!1),I.strm.avail_out===0),ge)}function Ge(I,je){for(var ke,X;;){if(I.lookahead<U){if(me(I),I.lookahead<U&&je===u)return ge;if(I.lookahead===0)break}if(ke=0,I.lookahead>=ee&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+ee-1])&I.hash_mask,ke=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),ke!==0&&I.strstart-ke<=I.w_size-U&&(I.match_length=Se(I,ke)),I.match_length>=ee)if(X=o._tr_tally(I,I.strstart-I.match_start,I.match_length-ee),I.lookahead-=I.match_length,I.match_length<=I.max_lazy_match&&I.lookahead>=ee){I.match_length--;do I.strstart++,I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+ee-1])&I.hash_mask,ke=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart;while(--I.match_length!==0);I.strstart++}else I.strstart+=I.match_length,I.match_length=0,I.ins_h=I.window[I.strstart],I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+1])&I.hash_mask;else X=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++;if(X&&(ne(I,!1),I.strm.avail_out===0))return ge}return I.insert=I.strstart<ee-1?I.strstart:ee-1,je===g?(ne(I,!0),I.strm.avail_out===0?Le:He):I.last_lit&&(ne(I,!1),I.strm.avail_out===0)?ge:Ce}function Qe(I,je){for(var ke,X,ce;;){if(I.lookahead<U){if(me(I),I.lookahead<U&&je===u)return ge;if(I.lookahead===0)break}if(ke=0,I.lookahead>=ee&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+ee-1])&I.hash_mask,ke=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),I.prev_length=I.match_length,I.prev_match=I.match_start,I.match_length=ee-1,ke!==0&&I.prev_length<I.max_lazy_match&&I.strstart-ke<=I.w_size-U&&(I.match_length=Se(I,ke),I.match_length<=5&&(I.strategy===k||I.match_length===ee&&I.strstart-I.match_start>4096)&&(I.match_length=ee-1)),I.prev_length>=ee&&I.match_length<=I.prev_length){ce=I.strstart+I.lookahead-ee,X=o._tr_tally(I,I.strstart-1-I.prev_match,I.prev_length-ee),I.lookahead-=I.prev_length-1,I.prev_length-=2;do++I.strstart<=ce&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+ee-1])&I.hash_mask,ke=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart);while(--I.prev_length!==0);if(I.match_available=0,I.match_length=ee-1,I.strstart++,X&&(ne(I,!1),I.strm.avail_out===0))return ge}else if(I.match_available){if(X=o._tr_tally(I,0,I.window[I.strstart-1]),X&&ne(I,!1),I.strstart++,I.lookahead--,I.strm.avail_out===0)return ge}else I.match_available=1,I.strstart++,I.lookahead--}return I.match_available&&(X=o._tr_tally(I,0,I.window[I.strstart-1]),I.match_available=0),I.insert=I.strstart<ee-1?I.strstart:ee-1,je===g?(ne(I,!0),I.strm.avail_out===0?Le:He):I.last_lit&&(ne(I,!1),I.strm.avail_out===0)?ge:Ce}function Lt(I,je){for(var ke,X,ce,_e,ot=I.window;;){if(I.lookahead<=B){if(me(I),I.lookahead<=B&&je===u)return ge;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=ee&&I.strstart>0&&(ce=I.strstart-1,X=ot[ce],X===ot[++ce]&&X===ot[++ce]&&X===ot[++ce])){_e=I.strstart+B;do;while(X===ot[++ce]&&X===ot[++ce]&&X===ot[++ce]&&X===ot[++ce]&&X===ot[++ce]&&X===ot[++ce]&&X===ot[++ce]&&X===ot[++ce]&&ce<_e);I.match_length=B-(_e-ce),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=ee?(ke=o._tr_tally(I,1,I.match_length-ee),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(ke=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),ke&&(ne(I,!1),I.strm.avail_out===0))return ge}return I.insert=0,je===g?(ne(I,!0),I.strm.avail_out===0?Le:He):I.last_lit&&(ne(I,!1),I.strm.avail_out===0)?ge:Ce}function wt(I,je){for(var ke;;){if(I.lookahead===0&&(me(I),I.lookahead===0)){if(je===u)return ge;break}if(I.match_length=0,ke=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,ke&&(ne(I,!1),I.strm.avail_out===0))return ge}return I.insert=0,je===g?(ne(I,!0),I.strm.avail_out===0?Le:He):I.last_lit&&(ne(I,!1),I.strm.avail_out===0)?ge:Ce}function Nt(I,je,ke,X,ce){this.good_length=I,this.max_lazy=je,this.nice_length=ke,this.max_chain=X,this.func=ce}var he;he=[new Nt(0,0,0,0,$e),new Nt(4,4,8,4,Ge),new Nt(4,5,16,8,Ge),new Nt(4,6,32,32,Ge),new Nt(4,4,16,16,Qe),new Nt(8,16,32,32,Qe),new Nt(8,16,128,128,Qe),new Nt(8,32,128,256,Qe),new Nt(32,128,258,1024,Qe),new Nt(32,258,258,4096,Qe)];function Xe(I){I.window_size=2*I.w_size,lt(I.head),I.max_lazy_match=he[I.level].max_lazy,I.good_match=he[I.level].good_length,I.nice_match=he[I.level].nice_length,I.max_chain_length=he[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=ee-1,I.match_available=0,I.ins_h=0}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(R*2),this.dyn_dtree=new i.Buf16((2*K+1)*2),this.bl_tree=new i.Buf16((2*$+1)*2),lt(this.dyn_ltree),lt(this.dyn_dtree),lt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(Y+1),this.heap=new i.Buf16(2*L+1),lt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*L+1),lt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function we(I){var je;return!I||!I.state?Re(I,b):(I.total_in=I.total_out=0,I.data_type=T,je=I.state,je.pending=0,je.pending_out=0,je.wrap<0&&(je.wrap=-je.wrap),je.status=je.wrap?se:Z,I.adler=je.wrap===2?0:1,je.last_flush=u,o._tr_init(je),m)}function ve(I){var je=we(I);return je===m&&Xe(I.state),je}function Te(I,je){return!I||!I.state||I.state.wrap!==2?b:(I.state.gzhead=je,m)}function oe(I,je,ke,X,ce,_e){if(!I)return b;var ot=1;if(je===w&&(je=6),X<0?(ot=0,X=-X):X>15&&(ot=2,X-=16),ce<1||ce>C||ke!==E||X<8||X>15||je<0||je>9||_e<0||_e>S)return Re(I,b);X===8&&(X=9);var et=new W;return I.state=et,et.strm=I,et.wrap=ot,et.gzhead=null,et.w_bits=X,et.w_size=1<<et.w_bits,et.w_mask=et.w_size-1,et.hash_bits=ce+7,et.hash_size=1<<et.hash_bits,et.hash_mask=et.hash_size-1,et.hash_shift=~~((et.hash_bits+ee-1)/ee),et.window=new i.Buf8(et.w_size*2),et.head=new i.Buf16(et.hash_size),et.prev=new i.Buf16(et.w_size),et.lit_bufsize=1<<ce+6,et.pending_buf_size=et.lit_bufsize*4,et.pending_buf=new i.Buf8(et.pending_buf_size),et.d_buf=1*et.lit_bufsize,et.l_buf=3*et.lit_bufsize,et.level=je,et.strategy=_e,et.method=ke,ve(I)}function Ee(I,je){return oe(I,je,E,z,M,A)}function G(I,je){var ke,X,ce,_e;if(!I||!I.state||je>x||je<0)return I?Re(I,b):b;if(X=I.state,!I.output||!I.input&&I.avail_in!==0||X.status===te&&je!==g)return Re(I,I.avail_out===0?y:b);if(X.strm=I,ke=X.last_flush,X.last_flush=je,X.status===se)if(X.wrap===2)I.adler=0,pe(X,31),pe(X,139),pe(X,8),X.gzhead?(pe(X,(X.gzhead.text?1:0)+(X.gzhead.hcrc?2:0)+(X.gzhead.extra?4:0)+(X.gzhead.name?8:0)+(X.gzhead.comment?16:0)),pe(X,X.gzhead.time&255),pe(X,X.gzhead.time>>8&255),pe(X,X.gzhead.time>>16&255),pe(X,X.gzhead.time>>24&255),pe(X,X.level===9?2:X.strategy>=j||X.level<2?4:0),pe(X,X.gzhead.os&255),X.gzhead.extra&&X.gzhead.extra.length&&(pe(X,X.gzhead.extra.length&255),pe(X,X.gzhead.extra.length>>8&255)),X.gzhead.hcrc&&(I.adler=c(I.adler,X.pending_buf,X.pending,0)),X.gzindex=0,X.status=Ne):(pe(X,0),pe(X,0),pe(X,0),pe(X,0),pe(X,0),pe(X,X.level===9?2:X.strategy>=j||X.level<2?4:0),pe(X,le),X.status=Z);else{var ot=E+(X.w_bits-8<<4)<<8,et=-1;X.strategy>=j||X.level<2?et=0:X.level<6?et=1:X.level===6?et=2:et=3,ot|=et<<6,X.strstart!==0&&(ot|=V),ot+=31-ot%31,X.status=Z,Ue(X,ot),X.strstart!==0&&(Ue(X,I.adler>>>16),Ue(X,I.adler&65535)),I.adler=1}if(X.status===Ne)if(X.gzhead.extra){for(ce=X.pending;X.gzindex<(X.gzhead.extra.length&65535)&&!(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>ce&&(I.adler=c(I.adler,X.pending_buf,X.pending-ce,ce)),rt(I),ce=X.pending,X.pending===X.pending_buf_size));)pe(X,X.gzhead.extra[X.gzindex]&255),X.gzindex++;X.gzhead.hcrc&&X.pending>ce&&(I.adler=c(I.adler,X.pending_buf,X.pending-ce,ce)),X.gzindex===X.gzhead.extra.length&&(X.gzindex=0,X.status=ie)}else X.status=ie;if(X.status===ie)if(X.gzhead.name){ce=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>ce&&(I.adler=c(I.adler,X.pending_buf,X.pending-ce,ce)),rt(I),ce=X.pending,X.pending===X.pending_buf_size)){_e=1;break}X.gzindex<X.gzhead.name.length?_e=X.gzhead.name.charCodeAt(X.gzindex++)&255:_e=0,pe(X,_e)}while(_e!==0);X.gzhead.hcrc&&X.pending>ce&&(I.adler=c(I.adler,X.pending_buf,X.pending-ce,ce)),_e===0&&(X.gzindex=0,X.status=q)}else X.status=q;if(X.status===q)if(X.gzhead.comment){ce=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>ce&&(I.adler=c(I.adler,X.pending_buf,X.pending-ce,ce)),rt(I),ce=X.pending,X.pending===X.pending_buf_size)){_e=1;break}X.gzindex<X.gzhead.comment.length?_e=X.gzhead.comment.charCodeAt(X.gzindex++)&255:_e=0,pe(X,_e)}while(_e!==0);X.gzhead.hcrc&&X.pending>ce&&(I.adler=c(I.adler,X.pending_buf,X.pending-ce,ce)),_e===0&&(X.status=H)}else X.status=H;if(X.status===H&&(X.gzhead.hcrc?(X.pending+2>X.pending_buf_size&&rt(I),X.pending+2<=X.pending_buf_size&&(pe(X,I.adler&255),pe(X,I.adler>>8&255),I.adler=0,X.status=Z)):X.status=Z),X.pending!==0){if(rt(I),I.avail_out===0)return X.last_flush=-1,m}else if(I.avail_in===0&&Ze(je)<=Ze(ke)&&je!==g)return Re(I,y);if(X.status===te&&I.avail_in!==0)return Re(I,y);if(I.avail_in!==0||X.lookahead!==0||je!==u&&X.status!==te){var at=X.strategy===j?wt(X,je):X.strategy===_?Lt(X,je):he[X.level].func(X,je);if((at===Le||at===He)&&(X.status=te),at===ge||at===Le)return I.avail_out===0&&(X.last_flush=-1),m;if(at===Ce&&(je===h?o._tr_align(X):je!==x&&(o._tr_stored_block(X,0,0,!1),je===f&&(lt(X.head),X.lookahead===0&&(X.strstart=0,X.block_start=0,X.insert=0))),rt(I),I.avail_out===0))return X.last_flush=-1,m}return je!==g?m:X.wrap<=0?p:(X.wrap===2?(pe(X,I.adler&255),pe(X,I.adler>>8&255),pe(X,I.adler>>16&255),pe(X,I.adler>>24&255),pe(X,I.total_in&255),pe(X,I.total_in>>8&255),pe(X,I.total_in>>16&255),pe(X,I.total_in>>24&255)):(Ue(X,I.adler>>>16),Ue(X,I.adler&65535)),rt(I),X.wrap>0&&(X.wrap=-X.wrap),X.pending!==0?m:p)}function Oe(I){var je;return!I||!I.state?b:(je=I.state.status,je!==se&&je!==Ne&&je!==ie&&je!==q&&je!==H&&je!==Z&&je!==te?Re(I,b):(I.state=null,je===Z?Re(I,v):m))}function it(I,je){var ke=je.length,X,ce,_e,ot,et,at,Ft,ca;if(!I||!I.state||(X=I.state,ot=X.wrap,ot===2||ot===1&&X.status!==se||X.lookahead))return b;for(ot===1&&(I.adler=l(I.adler,je,ke,0)),X.wrap=0,ke>=X.w_size&&(ot===0&&(lt(X.head),X.strstart=0,X.block_start=0,X.insert=0),ca=new i.Buf8(X.w_size),i.arraySet(ca,je,ke-X.w_size,X.w_size,0),je=ca,ke=X.w_size),et=I.avail_in,at=I.next_in,Ft=I.input,I.avail_in=ke,I.next_in=0,I.input=je,me(X);X.lookahead>=ee;){ce=X.strstart,_e=X.lookahead-(ee-1);do X.ins_h=(X.ins_h<<X.hash_shift^X.window[ce+ee-1])&X.hash_mask,X.prev[ce&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=ce,ce++;while(--_e);X.strstart=ce,X.lookahead=ee-1,me(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=ee-1,X.match_available=0,I.next_in=at,I.input=Ft,I.avail_in=et,X.wrap=ot,m}s.deflateInit=Ee,s.deflateInit2=oe,s.deflateReset=ve,s.deflateResetKeep=we,s.deflateSetHeader=Te,s.deflate=G,s.deflateEnd=Oe,s.deflateSetDictionary=it,s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,s){function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n.exports=i},{}],48:[function(r,n,s){var i=30,o=12;n.exports=function(c,d){var u,h,f,g,x,m,p,b,v,y,w,k,j,_,S,A,T,E,C,z,M,F,D,L,K;u=c.state,h=c.next_in,L=c.input,f=h+(c.avail_in-5),g=c.next_out,K=c.output,x=g-(d-c.avail_out),m=g+(c.avail_out-257),p=u.dmax,b=u.wsize,v=u.whave,y=u.wnext,w=u.window,k=u.hold,j=u.bits,_=u.lencode,S=u.distcode,A=(1<<u.lenbits)-1,T=(1<<u.distbits)-1;e:do{j<15&&(k+=L[h++]<<j,j+=8,k+=L[h++]<<j,j+=8),E=_[k&A];t:for(;;){if(C=E>>>24,k>>>=C,j-=C,C=E>>>16&255,C===0)K[g++]=E&65535;else if(C&16){z=E&65535,C&=15,C&&(j<C&&(k+=L[h++]<<j,j+=8),z+=k&(1<<C)-1,k>>>=C,j-=C),j<15&&(k+=L[h++]<<j,j+=8,k+=L[h++]<<j,j+=8),E=S[k&T];r:for(;;){if(C=E>>>24,k>>>=C,j-=C,C=E>>>16&255,C&16){if(M=E&65535,C&=15,j<C&&(k+=L[h++]<<j,j+=8,j<C&&(k+=L[h++]<<j,j+=8)),M+=k&(1<<C)-1,M>p){c.msg="invalid distance too far back",u.mode=i;break e}if(k>>>=C,j-=C,C=g-x,M>C){if(C=M-C,C>v&&u.sane){c.msg="invalid distance too far back",u.mode=i;break e}if(F=0,D=w,y===0){if(F+=b-C,C<z){z-=C;do K[g++]=w[F++];while(--C);F=g-M,D=K}}else if(y<C){if(F+=b+y-C,C-=y,C<z){z-=C;do K[g++]=w[F++];while(--C);if(F=0,y<z){C=y,z-=C;do K[g++]=w[F++];while(--C);F=g-M,D=K}}}else if(F+=y-C,C<z){z-=C;do K[g++]=w[F++];while(--C);F=g-M,D=K}for(;z>2;)K[g++]=D[F++],K[g++]=D[F++],K[g++]=D[F++],z-=3;z&&(K[g++]=D[F++],z>1&&(K[g++]=D[F++]))}else{F=g-M;do K[g++]=K[F++],K[g++]=K[F++],K[g++]=K[F++],z-=3;while(z>2);z&&(K[g++]=K[F++],z>1&&(K[g++]=K[F++]))}}else if(C&64){c.msg="invalid distance code",u.mode=i;break e}else{E=S[(E&65535)+(k&(1<<C)-1)];continue r}break}}else if(C&64)if(C&32){u.mode=o;break e}else{c.msg="invalid literal/length code",u.mode=i;break e}else{E=_[(E&65535)+(k&(1<<C)-1)];continue t}break}}while(h<f&&g<m);z=j>>3,h-=z,j-=z<<3,k&=(1<<j)-1,c.next_in=h,c.next_out=g,c.avail_in=h<f?5+(f-h):5-(h-f),c.avail_out=g<m?257+(m-g):257-(g-m),u.hold=k,u.bits=j}},{}],49:[function(r,n,s){var i=r("../utils/common"),o=r("./adler32"),l=r("./crc32"),c=r("./inffast"),d=r("./inftrees"),u=0,h=1,f=2,g=4,x=5,m=6,p=0,b=1,v=2,y=-2,w=-3,k=-4,j=-5,_=8,S=1,A=2,T=3,E=4,C=5,z=6,M=7,F=8,D=9,L=10,K=11,$=12,R=13,Y=14,ee=15,B=16,U=17,V=18,se=19,Ne=20,ie=21,q=22,H=23,Z=24,te=25,ge=26,Ce=27,Le=28,He=29,le=30,Re=31,Ze=32,lt=852,rt=592,ne=15,pe=ne;function Ue(oe){return(oe>>>24&255)+(oe>>>8&65280)+((oe&65280)<<8)+((oe&255)<<24)}function kt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Se(oe){var Ee;return!oe||!oe.state?y:(Ee=oe.state,oe.total_in=oe.total_out=Ee.total=0,oe.msg="",Ee.wrap&&(oe.adler=Ee.wrap&1),Ee.mode=S,Ee.last=0,Ee.havedict=0,Ee.dmax=32768,Ee.head=null,Ee.hold=0,Ee.bits=0,Ee.lencode=Ee.lendyn=new i.Buf32(lt),Ee.distcode=Ee.distdyn=new i.Buf32(rt),Ee.sane=1,Ee.back=-1,p)}function me(oe){var Ee;return!oe||!oe.state?y:(Ee=oe.state,Ee.wsize=0,Ee.whave=0,Ee.wnext=0,Se(oe))}function $e(oe,Ee){var G,Oe;return!oe||!oe.state||(Oe=oe.state,Ee<0?(G=0,Ee=-Ee):(G=(Ee>>4)+1,Ee<48&&(Ee&=15)),Ee&&(Ee<8||Ee>15))?y:(Oe.window!==null&&Oe.wbits!==Ee&&(Oe.window=null),Oe.wrap=G,Oe.wbits=Ee,me(oe))}function Ge(oe,Ee){var G,Oe;return oe?(Oe=new kt,oe.state=Oe,Oe.window=null,G=$e(oe,Ee),G!==p&&(oe.state=null),G):y}function Qe(oe){return Ge(oe,pe)}var Lt=!0,wt,Nt;function he(oe){if(Lt){var Ee;for(wt=new i.Buf32(512),Nt=new i.Buf32(32),Ee=0;Ee<144;)oe.lens[Ee++]=8;for(;Ee<256;)oe.lens[Ee++]=9;for(;Ee<280;)oe.lens[Ee++]=7;for(;Ee<288;)oe.lens[Ee++]=8;for(d(h,oe.lens,0,288,wt,0,oe.work,{bits:9}),Ee=0;Ee<32;)oe.lens[Ee++]=5;d(f,oe.lens,0,32,Nt,0,oe.work,{bits:5}),Lt=!1}oe.lencode=wt,oe.lenbits=9,oe.distcode=Nt,oe.distbits=5}function Xe(oe,Ee,G,Oe){var it,I=oe.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new i.Buf8(I.wsize)),Oe>=I.wsize?(i.arraySet(I.window,Ee,G-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):(it=I.wsize-I.wnext,it>Oe&&(it=Oe),i.arraySet(I.window,Ee,G-Oe,it,I.wnext),Oe-=it,Oe?(i.arraySet(I.window,Ee,G-Oe,Oe,0),I.wnext=Oe,I.whave=I.wsize):(I.wnext+=it,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=it))),0}function W(oe,Ee){var G,Oe,it,I,je,ke,X,ce,_e,ot,et,at,Ft,ca,Bt=0,Ht,Xr,hn,_n,fo,ln,$r,Zn,cn=new i.Buf8(4),Ra,ja,$n=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!oe||!oe.state||!oe.output||!oe.input&&oe.avail_in!==0)return y;G=oe.state,G.mode===$&&(G.mode=R),je=oe.next_out,it=oe.output,X=oe.avail_out,I=oe.next_in,Oe=oe.input,ke=oe.avail_in,ce=G.hold,_e=G.bits,ot=ke,et=X,Zn=p;e:for(;;)switch(G.mode){case S:if(G.wrap===0){G.mode=R;break}for(;_e<16;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if(G.wrap&2&&ce===35615){G.check=0,cn[0]=ce&255,cn[1]=ce>>>8&255,G.check=l(G.check,cn,2,0),ce=0,_e=0,G.mode=A;break}if(G.flags=0,G.head&&(G.head.done=!1),!(G.wrap&1)||(((ce&255)<<8)+(ce>>8))%31){oe.msg="incorrect header check",G.mode=le;break}if((ce&15)!==_){oe.msg="unknown compression method",G.mode=le;break}if(ce>>>=4,_e-=4,$r=(ce&15)+8,G.wbits===0)G.wbits=$r;else if($r>G.wbits){oe.msg="invalid window size",G.mode=le;break}G.dmax=1<<$r,oe.adler=G.check=1,G.mode=ce&512?L:$,ce=0,_e=0;break;case A:for(;_e<16;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if(G.flags=ce,(G.flags&255)!==_){oe.msg="unknown compression method",G.mode=le;break}if(G.flags&57344){oe.msg="unknown header flags set",G.mode=le;break}G.head&&(G.head.text=ce>>8&1),G.flags&512&&(cn[0]=ce&255,cn[1]=ce>>>8&255,G.check=l(G.check,cn,2,0)),ce=0,_e=0,G.mode=T;case T:for(;_e<32;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}G.head&&(G.head.time=ce),G.flags&512&&(cn[0]=ce&255,cn[1]=ce>>>8&255,cn[2]=ce>>>16&255,cn[3]=ce>>>24&255,G.check=l(G.check,cn,4,0)),ce=0,_e=0,G.mode=E;case E:for(;_e<16;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}G.head&&(G.head.xflags=ce&255,G.head.os=ce>>8),G.flags&512&&(cn[0]=ce&255,cn[1]=ce>>>8&255,G.check=l(G.check,cn,2,0)),ce=0,_e=0,G.mode=C;case C:if(G.flags&1024){for(;_e<16;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}G.length=ce,G.head&&(G.head.extra_len=ce),G.flags&512&&(cn[0]=ce&255,cn[1]=ce>>>8&255,G.check=l(G.check,cn,2,0)),ce=0,_e=0}else G.head&&(G.head.extra=null);G.mode=z;case z:if(G.flags&1024&&(at=G.length,at>ke&&(at=ke),at&&(G.head&&($r=G.head.extra_len-G.length,G.head.extra||(G.head.extra=new Array(G.head.extra_len)),i.arraySet(G.head.extra,Oe,I,at,$r)),G.flags&512&&(G.check=l(G.check,Oe,at,I)),ke-=at,I+=at,G.length-=at),G.length))break e;G.length=0,G.mode=M;case M:if(G.flags&2048){if(ke===0)break e;at=0;do $r=Oe[I+at++],G.head&&$r&&G.length<65536&&(G.head.name+=String.fromCharCode($r));while($r&&at<ke);if(G.flags&512&&(G.check=l(G.check,Oe,at,I)),ke-=at,I+=at,$r)break e}else G.head&&(G.head.name=null);G.length=0,G.mode=F;case F:if(G.flags&4096){if(ke===0)break e;at=0;do $r=Oe[I+at++],G.head&&$r&&G.length<65536&&(G.head.comment+=String.fromCharCode($r));while($r&&at<ke);if(G.flags&512&&(G.check=l(G.check,Oe,at,I)),ke-=at,I+=at,$r)break e}else G.head&&(G.head.comment=null);G.mode=D;case D:if(G.flags&512){for(;_e<16;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if(ce!==(G.check&65535)){oe.msg="header crc mismatch",G.mode=le;break}ce=0,_e=0}G.head&&(G.head.hcrc=G.flags>>9&1,G.head.done=!0),oe.adler=G.check=0,G.mode=$;break;case L:for(;_e<32;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}oe.adler=G.check=Ue(ce),ce=0,_e=0,G.mode=K;case K:if(G.havedict===0)return oe.next_out=je,oe.avail_out=X,oe.next_in=I,oe.avail_in=ke,G.hold=ce,G.bits=_e,v;oe.adler=G.check=1,G.mode=$;case $:if(Ee===x||Ee===m)break e;case R:if(G.last){ce>>>=_e&7,_e-=_e&7,G.mode=Ce;break}for(;_e<3;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}switch(G.last=ce&1,ce>>>=1,_e-=1,ce&3){case 0:G.mode=Y;break;case 1:if(he(G),G.mode=Ne,Ee===m){ce>>>=2,_e-=2;break e}break;case 2:G.mode=U;break;case 3:oe.msg="invalid block type",G.mode=le}ce>>>=2,_e-=2;break;case Y:for(ce>>>=_e&7,_e-=_e&7;_e<32;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if((ce&65535)!==(ce>>>16^65535)){oe.msg="invalid stored block lengths",G.mode=le;break}if(G.length=ce&65535,ce=0,_e=0,G.mode=ee,Ee===m)break e;case ee:G.mode=B;case B:if(at=G.length,at){if(at>ke&&(at=ke),at>X&&(at=X),at===0)break e;i.arraySet(it,Oe,I,at,je),ke-=at,I+=at,X-=at,je+=at,G.length-=at;break}G.mode=$;break;case U:for(;_e<14;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if(G.nlen=(ce&31)+257,ce>>>=5,_e-=5,G.ndist=(ce&31)+1,ce>>>=5,_e-=5,G.ncode=(ce&15)+4,ce>>>=4,_e-=4,G.nlen>286||G.ndist>30){oe.msg="too many length or distance symbols",G.mode=le;break}G.have=0,G.mode=V;case V:for(;G.have<G.ncode;){for(;_e<3;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}G.lens[$n[G.have++]]=ce&7,ce>>>=3,_e-=3}for(;G.have<19;)G.lens[$n[G.have++]]=0;if(G.lencode=G.lendyn,G.lenbits=7,Ra={bits:G.lenbits},Zn=d(u,G.lens,0,19,G.lencode,0,G.work,Ra),G.lenbits=Ra.bits,Zn){oe.msg="invalid code lengths set",G.mode=le;break}G.have=0,G.mode=se;case se:for(;G.have<G.nlen+G.ndist;){for(;Bt=G.lencode[ce&(1<<G.lenbits)-1],Ht=Bt>>>24,Xr=Bt>>>16&255,hn=Bt&65535,!(Ht<=_e);){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if(hn<16)ce>>>=Ht,_e-=Ht,G.lens[G.have++]=hn;else{if(hn===16){for(ja=Ht+2;_e<ja;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if(ce>>>=Ht,_e-=Ht,G.have===0){oe.msg="invalid bit length repeat",G.mode=le;break}$r=G.lens[G.have-1],at=3+(ce&3),ce>>>=2,_e-=2}else if(hn===17){for(ja=Ht+3;_e<ja;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}ce>>>=Ht,_e-=Ht,$r=0,at=3+(ce&7),ce>>>=3,_e-=3}else{for(ja=Ht+7;_e<ja;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}ce>>>=Ht,_e-=Ht,$r=0,at=11+(ce&127),ce>>>=7,_e-=7}if(G.have+at>G.nlen+G.ndist){oe.msg="invalid bit length repeat",G.mode=le;break}for(;at--;)G.lens[G.have++]=$r}}if(G.mode===le)break;if(G.lens[256]===0){oe.msg="invalid code -- missing end-of-block",G.mode=le;break}if(G.lenbits=9,Ra={bits:G.lenbits},Zn=d(h,G.lens,0,G.nlen,G.lencode,0,G.work,Ra),G.lenbits=Ra.bits,Zn){oe.msg="invalid literal/lengths set",G.mode=le;break}if(G.distbits=6,G.distcode=G.distdyn,Ra={bits:G.distbits},Zn=d(f,G.lens,G.nlen,G.ndist,G.distcode,0,G.work,Ra),G.distbits=Ra.bits,Zn){oe.msg="invalid distances set",G.mode=le;break}if(G.mode=Ne,Ee===m)break e;case Ne:G.mode=ie;case ie:if(ke>=6&&X>=258){oe.next_out=je,oe.avail_out=X,oe.next_in=I,oe.avail_in=ke,G.hold=ce,G.bits=_e,c(oe,et),je=oe.next_out,it=oe.output,X=oe.avail_out,I=oe.next_in,Oe=oe.input,ke=oe.avail_in,ce=G.hold,_e=G.bits,G.mode===$&&(G.back=-1);break}for(G.back=0;Bt=G.lencode[ce&(1<<G.lenbits)-1],Ht=Bt>>>24,Xr=Bt>>>16&255,hn=Bt&65535,!(Ht<=_e);){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if(Xr&&!(Xr&240)){for(_n=Ht,fo=Xr,ln=hn;Bt=G.lencode[ln+((ce&(1<<_n+fo)-1)>>_n)],Ht=Bt>>>24,Xr=Bt>>>16&255,hn=Bt&65535,!(_n+Ht<=_e);){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}ce>>>=_n,_e-=_n,G.back+=_n}if(ce>>>=Ht,_e-=Ht,G.back+=Ht,G.length=hn,Xr===0){G.mode=ge;break}if(Xr&32){G.back=-1,G.mode=$;break}if(Xr&64){oe.msg="invalid literal/length code",G.mode=le;break}G.extra=Xr&15,G.mode=q;case q:if(G.extra){for(ja=G.extra;_e<ja;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}G.length+=ce&(1<<G.extra)-1,ce>>>=G.extra,_e-=G.extra,G.back+=G.extra}G.was=G.length,G.mode=H;case H:for(;Bt=G.distcode[ce&(1<<G.distbits)-1],Ht=Bt>>>24,Xr=Bt>>>16&255,hn=Bt&65535,!(Ht<=_e);){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if(!(Xr&240)){for(_n=Ht,fo=Xr,ln=hn;Bt=G.distcode[ln+((ce&(1<<_n+fo)-1)>>_n)],Ht=Bt>>>24,Xr=Bt>>>16&255,hn=Bt&65535,!(_n+Ht<=_e);){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}ce>>>=_n,_e-=_n,G.back+=_n}if(ce>>>=Ht,_e-=Ht,G.back+=Ht,Xr&64){oe.msg="invalid distance code",G.mode=le;break}G.offset=hn,G.extra=Xr&15,G.mode=Z;case Z:if(G.extra){for(ja=G.extra;_e<ja;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}G.offset+=ce&(1<<G.extra)-1,ce>>>=G.extra,_e-=G.extra,G.back+=G.extra}if(G.offset>G.dmax){oe.msg="invalid distance too far back",G.mode=le;break}G.mode=te;case te:if(X===0)break e;if(at=et-X,G.offset>at){if(at=G.offset-at,at>G.whave&&G.sane){oe.msg="invalid distance too far back",G.mode=le;break}at>G.wnext?(at-=G.wnext,Ft=G.wsize-at):Ft=G.wnext-at,at>G.length&&(at=G.length),ca=G.window}else ca=it,Ft=je-G.offset,at=G.length;at>X&&(at=X),X-=at,G.length-=at;do it[je++]=ca[Ft++];while(--at);G.length===0&&(G.mode=ie);break;case ge:if(X===0)break e;it[je++]=G.length,X--,G.mode=ie;break;case Ce:if(G.wrap){for(;_e<32;){if(ke===0)break e;ke--,ce|=Oe[I++]<<_e,_e+=8}if(et-=X,oe.total_out+=et,G.total+=et,et&&(oe.adler=G.check=G.flags?l(G.check,it,et,je-et):o(G.check,it,et,je-et)),et=X,(G.flags?ce:Ue(ce))!==G.check){oe.msg="incorrect data check",G.mode=le;break}ce=0,_e=0}G.mode=Le;case Le:if(G.wrap&&G.flags){for(;_e<32;){if(ke===0)break e;ke--,ce+=Oe[I++]<<_e,_e+=8}if(ce!==(G.total&4294967295)){oe.msg="incorrect length check",G.mode=le;break}ce=0,_e=0}G.mode=He;case He:Zn=b;break e;case le:Zn=w;break e;case Re:return k;case Ze:default:return y}return oe.next_out=je,oe.avail_out=X,oe.next_in=I,oe.avail_in=ke,G.hold=ce,G.bits=_e,(G.wsize||et!==oe.avail_out&&G.mode<le&&(G.mode<Ce||Ee!==g))&&Xe(oe,oe.output,oe.next_out,et-oe.avail_out),ot-=oe.avail_in,et-=oe.avail_out,oe.total_in+=ot,oe.total_out+=et,G.total+=et,G.wrap&&et&&(oe.adler=G.check=G.flags?l(G.check,it,et,oe.next_out-et):o(G.check,it,et,oe.next_out-et)),oe.data_type=G.bits+(G.last?64:0)+(G.mode===$?128:0)+(G.mode===Ne||G.mode===ee?256:0),(ot===0&&et===0||Ee===g)&&Zn===p&&(Zn=j),Zn}function we(oe){if(!oe||!oe.state)return y;var Ee=oe.state;return Ee.window&&(Ee.window=null),oe.state=null,p}function ve(oe,Ee){var G;return!oe||!oe.state||(G=oe.state,!(G.wrap&2))?y:(G.head=Ee,Ee.done=!1,p)}function Te(oe,Ee){var G=Ee.length,Oe,it,I;return!oe||!oe.state||(Oe=oe.state,Oe.wrap!==0&&Oe.mode!==K)?y:Oe.mode===K&&(it=1,it=o(it,Ee,G,0),it!==Oe.check)?w:(I=Xe(oe,Ee,G,G),I?(Oe.mode=Re,k):(Oe.havedict=1,p))}s.inflateReset=me,s.inflateReset2=$e,s.inflateResetKeep=Se,s.inflateInit=Qe,s.inflateInit2=Ge,s.inflate=W,s.inflateEnd=we,s.inflateGetHeader=ve,s.inflateSetDictionary=Te,s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,s){var i=r("../utils/common"),o=15,l=852,c=592,d=0,u=1,h=2,f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(b,v,y,w,k,j,_,S){var A=S.bits,T=0,E=0,C=0,z=0,M=0,F=0,D=0,L=0,K=0,$=0,R,Y,ee,B,U,V=null,se=0,Ne,ie=new i.Buf16(o+1),q=new i.Buf16(o+1),H=null,Z=0,te,ge,Ce;for(T=0;T<=o;T++)ie[T]=0;for(E=0;E<w;E++)ie[v[y+E]]++;for(M=A,z=o;z>=1&&ie[z]===0;z--);if(M>z&&(M=z),z===0)return k[j++]=1<<24|64<<16|0,k[j++]=1<<24|64<<16|0,S.bits=1,0;for(C=1;C<z&&ie[C]===0;C++);for(M<C&&(M=C),L=1,T=1;T<=o;T++)if(L<<=1,L-=ie[T],L<0)return-1;if(L>0&&(b===d||z!==1))return-1;for(q[1]=0,T=1;T<o;T++)q[T+1]=q[T]+ie[T];for(E=0;E<w;E++)v[y+E]!==0&&(_[q[v[y+E]]++]=E);if(b===d?(V=H=_,Ne=19):b===u?(V=f,se-=257,H=g,Z-=257,Ne=256):(V=x,H=m,Ne=-1),$=0,E=0,T=C,U=j,F=M,D=0,ee=-1,K=1<<M,B=K-1,b===u&&K>l||b===h&&K>c)return 1;for(;;){te=T-D,_[E]<Ne?(ge=0,Ce=_[E]):_[E]>Ne?(ge=H[Z+_[E]],Ce=V[se+_[E]]):(ge=96,Ce=0),R=1<<T-D,Y=1<<F,C=Y;do Y-=R,k[U+($>>D)+Y]=te<<24|ge<<16|Ce|0;while(Y!==0);for(R=1<<T-1;$&R;)R>>=1;if(R!==0?($&=R-1,$+=R):$=0,E++,--ie[T]===0){if(T===z)break;T=v[y+_[E]]}if(T>M&&($&B)!==ee){for(D===0&&(D=M),U+=C,F=T-D,L=1<<F;F+D<z&&(L-=ie[F+D],!(L<=0));)F++,L<<=1;if(K+=1<<F,b===u&&K>l||b===h&&K>c)return 1;ee=$&B,k[ee]=M<<24|F<<16|U-j|0}}return $!==0&&(k[U+$]=T-D<<24|64<<16|0),S.bits=M,0}},{"../utils/common":41}],51:[function(r,n,s){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,s){var i=r("../utils/common"),o=4,l=0,c=1,d=2;function u(W){for(var we=W.length;--we>=0;)W[we]=0}var h=0,f=1,g=2,x=3,m=258,p=29,b=256,v=b+1+p,y=30,w=19,k=2*v+1,j=15,_=16,S=7,A=256,T=16,E=17,C=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=512,K=new Array((v+2)*2);u(K);var $=new Array(y*2);u($);var R=new Array(L);u(R);var Y=new Array(m-x+1);u(Y);var ee=new Array(p);u(ee);var B=new Array(y);u(B);function U(W,we,ve,Te,oe){this.static_tree=W,this.extra_bits=we,this.extra_base=ve,this.elems=Te,this.max_length=oe,this.has_stree=W&&W.length}var V,se,Ne;function ie(W,we){this.dyn_tree=W,this.max_code=0,this.stat_desc=we}function q(W){return W<256?R[W]:R[256+(W>>>7)]}function H(W,we){W.pending_buf[W.pending++]=we&255,W.pending_buf[W.pending++]=we>>>8&255}function Z(W,we,ve){W.bi_valid>_-ve?(W.bi_buf|=we<<W.bi_valid&65535,H(W,W.bi_buf),W.bi_buf=we>>_-W.bi_valid,W.bi_valid+=ve-_):(W.bi_buf|=we<<W.bi_valid&65535,W.bi_valid+=ve)}function te(W,we,ve){Z(W,ve[we*2],ve[we*2+1])}function ge(W,we){var ve=0;do ve|=W&1,W>>>=1,ve<<=1;while(--we>0);return ve>>>1}function Ce(W){W.bi_valid===16?(H(W,W.bi_buf),W.bi_buf=0,W.bi_valid=0):W.bi_valid>=8&&(W.pending_buf[W.pending++]=W.bi_buf&255,W.bi_buf>>=8,W.bi_valid-=8)}function Le(W,we){var ve=we.dyn_tree,Te=we.max_code,oe=we.stat_desc.static_tree,Ee=we.stat_desc.has_stree,G=we.stat_desc.extra_bits,Oe=we.stat_desc.extra_base,it=we.stat_desc.max_length,I,je,ke,X,ce,_e,ot=0;for(X=0;X<=j;X++)W.bl_count[X]=0;for(ve[W.heap[W.heap_max]*2+1]=0,I=W.heap_max+1;I<k;I++)je=W.heap[I],X=ve[ve[je*2+1]*2+1]+1,X>it&&(X=it,ot++),ve[je*2+1]=X,!(je>Te)&&(W.bl_count[X]++,ce=0,je>=Oe&&(ce=G[je-Oe]),_e=ve[je*2],W.opt_len+=_e*(X+ce),Ee&&(W.static_len+=_e*(oe[je*2+1]+ce)));if(ot!==0){do{for(X=it-1;W.bl_count[X]===0;)X--;W.bl_count[X]--,W.bl_count[X+1]+=2,W.bl_count[it]--,ot-=2}while(ot>0);for(X=it;X!==0;X--)for(je=W.bl_count[X];je!==0;)ke=W.heap[--I],!(ke>Te)&&(ve[ke*2+1]!==X&&(W.opt_len+=(X-ve[ke*2+1])*ve[ke*2],ve[ke*2+1]=X),je--)}}function He(W,we,ve){var Te=new Array(j+1),oe=0,Ee,G;for(Ee=1;Ee<=j;Ee++)Te[Ee]=oe=oe+ve[Ee-1]<<1;for(G=0;G<=we;G++){var Oe=W[G*2+1];Oe!==0&&(W[G*2]=ge(Te[Oe]++,Oe))}}function le(){var W,we,ve,Te,oe,Ee=new Array(j+1);for(ve=0,Te=0;Te<p-1;Te++)for(ee[Te]=ve,W=0;W<1<<z[Te];W++)Y[ve++]=Te;for(Y[ve-1]=Te,oe=0,Te=0;Te<16;Te++)for(B[Te]=oe,W=0;W<1<<M[Te];W++)R[oe++]=Te;for(oe>>=7;Te<y;Te++)for(B[Te]=oe<<7,W=0;W<1<<M[Te]-7;W++)R[256+oe++]=Te;for(we=0;we<=j;we++)Ee[we]=0;for(W=0;W<=143;)K[W*2+1]=8,W++,Ee[8]++;for(;W<=255;)K[W*2+1]=9,W++,Ee[9]++;for(;W<=279;)K[W*2+1]=7,W++,Ee[7]++;for(;W<=287;)K[W*2+1]=8,W++,Ee[8]++;for(He(K,v+1,Ee),W=0;W<y;W++)$[W*2+1]=5,$[W*2]=ge(W,5);V=new U(K,z,b+1,v,j),se=new U($,M,0,y,j),Ne=new U(new Array(0),F,0,w,S)}function Re(W){var we;for(we=0;we<v;we++)W.dyn_ltree[we*2]=0;for(we=0;we<y;we++)W.dyn_dtree[we*2]=0;for(we=0;we<w;we++)W.bl_tree[we*2]=0;W.dyn_ltree[A*2]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function Ze(W){W.bi_valid>8?H(W,W.bi_buf):W.bi_valid>0&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function lt(W,we,ve,Te){Ze(W),H(W,ve),H(W,~ve),i.arraySet(W.pending_buf,W.window,we,ve,W.pending),W.pending+=ve}function rt(W,we,ve,Te){var oe=we*2,Ee=ve*2;return W[oe]<W[Ee]||W[oe]===W[Ee]&&Te[we]<=Te[ve]}function ne(W,we,ve){for(var Te=W.heap[ve],oe=ve<<1;oe<=W.heap_len&&(oe<W.heap_len&&rt(we,W.heap[oe+1],W.heap[oe],W.depth)&&oe++,!rt(we,Te,W.heap[oe],W.depth));)W.heap[ve]=W.heap[oe],ve=oe,oe<<=1;W.heap[ve]=Te}function pe(W,we,ve){var Te,oe,Ee=0,G,Oe;if(W.last_lit!==0)do Te=W.pending_buf[W.d_buf+Ee*2]<<8|W.pending_buf[W.d_buf+Ee*2+1],oe=W.pending_buf[W.l_buf+Ee],Ee++,Te===0?te(W,oe,we):(G=Y[oe],te(W,G+b+1,we),Oe=z[G],Oe!==0&&(oe-=ee[G],Z(W,oe,Oe)),Te--,G=q(Te),te(W,G,ve),Oe=M[G],Oe!==0&&(Te-=B[G],Z(W,Te,Oe)));while(Ee<W.last_lit);te(W,A,we)}function Ue(W,we){var ve=we.dyn_tree,Te=we.stat_desc.static_tree,oe=we.stat_desc.has_stree,Ee=we.stat_desc.elems,G,Oe,it=-1,I;for(W.heap_len=0,W.heap_max=k,G=0;G<Ee;G++)ve[G*2]!==0?(W.heap[++W.heap_len]=it=G,W.depth[G]=0):ve[G*2+1]=0;for(;W.heap_len<2;)I=W.heap[++W.heap_len]=it<2?++it:0,ve[I*2]=1,W.depth[I]=0,W.opt_len--,oe&&(W.static_len-=Te[I*2+1]);for(we.max_code=it,G=W.heap_len>>1;G>=1;G--)ne(W,ve,G);I=Ee;do G=W.heap[1],W.heap[1]=W.heap[W.heap_len--],ne(W,ve,1),Oe=W.heap[1],W.heap[--W.heap_max]=G,W.heap[--W.heap_max]=Oe,ve[I*2]=ve[G*2]+ve[Oe*2],W.depth[I]=(W.depth[G]>=W.depth[Oe]?W.depth[G]:W.depth[Oe])+1,ve[G*2+1]=ve[Oe*2+1]=I,W.heap[1]=I++,ne(W,ve,1);while(W.heap_len>=2);W.heap[--W.heap_max]=W.heap[1],Le(W,we),He(ve,it,W.bl_count)}function kt(W,we,ve){var Te,oe=-1,Ee,G=we[0*2+1],Oe=0,it=7,I=4;for(G===0&&(it=138,I=3),we[(ve+1)*2+1]=65535,Te=0;Te<=ve;Te++)Ee=G,G=we[(Te+1)*2+1],!(++Oe<it&&Ee===G)&&(Oe<I?W.bl_tree[Ee*2]+=Oe:Ee!==0?(Ee!==oe&&W.bl_tree[Ee*2]++,W.bl_tree[T*2]++):Oe<=10?W.bl_tree[E*2]++:W.bl_tree[C*2]++,Oe=0,oe=Ee,G===0?(it=138,I=3):Ee===G?(it=6,I=3):(it=7,I=4))}function Se(W,we,ve){var Te,oe=-1,Ee,G=we[0*2+1],Oe=0,it=7,I=4;for(G===0&&(it=138,I=3),Te=0;Te<=ve;Te++)if(Ee=G,G=we[(Te+1)*2+1],!(++Oe<it&&Ee===G)){if(Oe<I)do te(W,Ee,W.bl_tree);while(--Oe!==0);else Ee!==0?(Ee!==oe&&(te(W,Ee,W.bl_tree),Oe--),te(W,T,W.bl_tree),Z(W,Oe-3,2)):Oe<=10?(te(W,E,W.bl_tree),Z(W,Oe-3,3)):(te(W,C,W.bl_tree),Z(W,Oe-11,7));Oe=0,oe=Ee,G===0?(it=138,I=3):Ee===G?(it=6,I=3):(it=7,I=4)}}function me(W){var we;for(kt(W,W.dyn_ltree,W.l_desc.max_code),kt(W,W.dyn_dtree,W.d_desc.max_code),Ue(W,W.bl_desc),we=w-1;we>=3&&W.bl_tree[D[we]*2+1]===0;we--);return W.opt_len+=3*(we+1)+5+5+4,we}function $e(W,we,ve,Te){var oe;for(Z(W,we-257,5),Z(W,ve-1,5),Z(W,Te-4,4),oe=0;oe<Te;oe++)Z(W,W.bl_tree[D[oe]*2+1],3);Se(W,W.dyn_ltree,we-1),Se(W,W.dyn_dtree,ve-1)}function Ge(W){var we=4093624447,ve;for(ve=0;ve<=31;ve++,we>>>=1)if(we&1&&W.dyn_ltree[ve*2]!==0)return l;if(W.dyn_ltree[9*2]!==0||W.dyn_ltree[10*2]!==0||W.dyn_ltree[13*2]!==0)return c;for(ve=32;ve<b;ve++)if(W.dyn_ltree[ve*2]!==0)return c;return l}var Qe=!1;function Lt(W){Qe||(le(),Qe=!0),W.l_desc=new ie(W.dyn_ltree,V),W.d_desc=new ie(W.dyn_dtree,se),W.bl_desc=new ie(W.bl_tree,Ne),W.bi_buf=0,W.bi_valid=0,Re(W)}function wt(W,we,ve,Te){Z(W,(h<<1)+(Te?1:0),3),lt(W,we,ve)}function Nt(W){Z(W,f<<1,3),te(W,A,K),Ce(W)}function he(W,we,ve,Te){var oe,Ee,G=0;W.level>0?(W.strm.data_type===d&&(W.strm.data_type=Ge(W)),Ue(W,W.l_desc),Ue(W,W.d_desc),G=me(W),oe=W.opt_len+3+7>>>3,Ee=W.static_len+3+7>>>3,Ee<=oe&&(oe=Ee)):oe=Ee=ve+5,ve+4<=oe&&we!==-1?wt(W,we,ve,Te):W.strategy===o||Ee===oe?(Z(W,(f<<1)+(Te?1:0),3),pe(W,K,$)):(Z(W,(g<<1)+(Te?1:0),3),$e(W,W.l_desc.max_code+1,W.d_desc.max_code+1,G+1),pe(W,W.dyn_ltree,W.dyn_dtree)),Re(W),Te&&Ze(W)}function Xe(W,we,ve){return W.pending_buf[W.d_buf+W.last_lit*2]=we>>>8&255,W.pending_buf[W.d_buf+W.last_lit*2+1]=we&255,W.pending_buf[W.l_buf+W.last_lit]=ve&255,W.last_lit++,we===0?W.dyn_ltree[ve*2]++:(W.matches++,we--,W.dyn_ltree[(Y[ve]+b+1)*2]++,W.dyn_dtree[q(we)*2]++),W.last_lit===W.lit_bufsize-1}s._tr_init=Lt,s._tr_stored_block=wt,s._tr_flush_block=he,s._tr_tally=Xe,s._tr_align=Nt},{"../utils/common":41}],53:[function(r,n,s){function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n.exports=i},{}],54:[function(r,n,s){(function(i){(function(o,l){if(o.setImmediate)return;var c=1,d={},u=!1,h=o.document,f;function g(S){typeof S!="function"&&(S=new Function(""+S));for(var A=new Array(arguments.length-1),T=0;T<A.length;T++)A[T]=arguments[T+1];var E={callback:S,args:A};return d[c]=E,f(c),c++}function x(S){delete d[S]}function m(S){var A=S.callback,T=S.args;switch(T.length){case 0:A();break;case 1:A(T[0]);break;case 2:A(T[0],T[1]);break;case 3:A(T[0],T[1],T[2]);break;default:A.apply(l,T);break}}function p(S){if(u)setTimeout(p,0,S);else{var A=d[S];if(A){u=!0;try{m(A)}finally{x(S),u=!1}}}}function b(){f=function(S){process.nextTick(function(){p(S)})}}function v(){if(o.postMessage&&!o.importScripts){var S=!0,A=o.onmessage;return o.onmessage=function(){S=!1},o.postMessage("","*"),o.onmessage=A,S}}function y(){var S="setImmediate$"+Math.random()+"$",A=function(T){T.source===o&&typeof T.data=="string"&&T.data.indexOf(S)===0&&p(+T.data.slice(S.length))};o.addEventListener?o.addEventListener("message",A,!1):o.attachEvent("onmessage",A),f=function(T){o.postMessage(S+T,"*")}}function w(){var S=new MessageChannel;S.port1.onmessage=function(A){var T=A.data;p(T)},f=function(A){S.port2.postMessage(A)}}function k(){var S=h.documentElement;f=function(A){var T=h.createElement("script");T.onreadystatechange=function(){p(A),T.onreadystatechange=null,S.removeChild(T),T=null},S.appendChild(T)}}function j(){f=function(S){setTimeout(p,0,S)}}var _=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,{}.toString.call(o.process)==="[object process]"?b():v()?y():o.MessageChannel?w():h&&"onreadystatechange"in h.createElement("script")?k():j(),_.setImmediate=g,_.clearImmediate=x})(typeof self>"u"?typeof i>"u"?this:i:self)}).call(this,typeof Fe<"u"?Fe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(wJ);var Cnt=wJ.exports;const Tnt=Vt(Cnt);class Ont{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new Tnt}catch{throw new Error("JSZip lib not loaded")}}open(e,r){return this.zip.loadAsync(e,{base64:r})}openUrl(e,r){return Xx(e,"binary").then((function(n){return this.zip.loadAsync(n,{base64:r})}).bind(this))}request(e,r){var n=new ar,s,i=new dc(e);return r||(r=i.extension),r=="blob"?s=this.getBlob(e):s=this.getText(e),s?s.then((function(o){let l=this.handleResponse(o,r);n.resolve(l)}).bind(this)):n.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),n.promise}handleResponse(e,r){var n;return r=="json"?n=JSON.parse(e):Wx(r)?n=Vo(e,"text/xml"):r=="xhtml"?n=Vo(e,"application/xhtml+xml"):r=="html"||r=="htm"?n=Vo(e,"text/html"):n=e,n}getBlob(e,r){var n=window.decodeURIComponent(e.substr(1)),s=this.zip.file(n);if(s)return r=r||Qf.lookup(s.name),s.async("uint8array").then(function(i){return new Blob([i],{type:r})})}getText(e,r){var n=window.decodeURIComponent(e.substr(1)),s=this.zip.file(n);if(s)return s.async("string").then(function(i){return i})}getBase64(e,r){var n=window.decodeURIComponent(e.substr(1)),s=this.zip.file(n);if(s)return r=r||Qf.lookup(s.name),s.async("base64").then(function(i){return"data:"+r+";base64,"+i})}createUrl(e,r){var n=new ar,s=window.URL||window.webkitURL||window.mozURL,i,o,l=r&&r.base64;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(l?(o=this.getBase64(e),o&&o.then((function(c){this.urlCache[e]=c,n.resolve(c)}).bind(this))):(o=this.getBlob(e),o&&o.then((function(c){i=s.createObjectURL(c),this.urlCache[e]=i,n.resolve(i)}).bind(this))),o||n.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),n.promise)}revokeUrl(e){var r=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&r.revokeObjectURL(n)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let r in this.urlCache)e.revokeObjectURL(r);this.zip=void 0,this.urlCache={}}}var jJ={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,s,i){function o(d,u){if(!s[d]){if(!n[d]){var h=typeof rd=="function"&&rd;if(!u&&h)return h(d,!0);if(l)return l(d,!0);var f=new Error("Cannot find module '"+d+"'");throw f.code="MODULE_NOT_FOUND",f}var g=s[d]={exports:{}};n[d][0].call(g.exports,function(x){var m=n[d][1][x];return o(m||x)},g,g.exports,r,n,s,i)}return s[d].exports}for(var l=typeof rd=="function"&&rd,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(r,n,s){(function(i){var o=i.MutationObserver||i.WebKitMutationObserver,l;if(o){var c=0,d=new o(x),u=i.document.createTextNode("");d.observe(u,{characterData:!0}),l=function(){u.data=c=++c%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var h=new i.MessageChannel;h.port1.onmessage=x,l=function(){h.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?l=function(){var p=i.document.createElement("script");p.onreadystatechange=function(){x(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},i.document.documentElement.appendChild(p)}:l=function(){setTimeout(x,0)};var f,g=[];function x(){f=!0;for(var p,b,v=g.length;v;){for(b=g,g=[],p=-1;++p<v;)b[p]();v=g.length}f=!1}n.exports=m;function m(p){g.push(p)===1&&!f&&l()}}).call(this,typeof Fe<"u"?Fe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,s){var i=r(1);function o(){}var l={},c=["REJECTED"],d=["FULFILLED"],u=["PENDING"];n.exports=h;function h(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,k!==o&&m(this,k)}h.prototype.catch=function(k){return this.then(null,k)},h.prototype.then=function(k,j){if(typeof k!="function"&&this.state===d||typeof j!="function"&&this.state===c)return this;var _=new this.constructor(o);if(this.state!==u){var S=this.state===d?k:j;g(_,S,this.outcome)}else this.queue.push(new f(_,k,j));return _};function f(k,j,_){this.promise=k,typeof j=="function"&&(this.onFulfilled=j,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(k){l.resolve(this.promise,k)},f.prototype.otherCallFulfilled=function(k){g(this.promise,this.onFulfilled,k)},f.prototype.callRejected=function(k){l.reject(this.promise,k)},f.prototype.otherCallRejected=function(k){g(this.promise,this.onRejected,k)};function g(k,j,_){i(function(){var S;try{S=j(_)}catch(A){return l.reject(k,A)}S===k?l.reject(k,new TypeError("Cannot resolve promise with itself")):l.resolve(k,S)})}l.resolve=function(k,j){var _=p(x,j);if(_.status==="error")return l.reject(k,_.value);var S=_.value;if(S)m(k,S);else{k.state=d,k.outcome=j;for(var A=-1,T=k.queue.length;++A<T;)k.queue[A].callFulfilled(j)}return k},l.reject=function(k,j){k.state=c,k.outcome=j;for(var _=-1,S=k.queue.length;++_<S;)k.queue[_].callRejected(j);return k};function x(k){var j=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof j=="function")return function(){j.apply(k,arguments)}}function m(k,j){var _=!1;function S(C){_||(_=!0,l.reject(k,C))}function A(C){_||(_=!0,l.resolve(k,C))}function T(){j(A,S)}var E=p(T);E.status==="error"&&S(E.value)}function p(k,j){var _={};try{_.value=k(j),_.status="success"}catch(S){_.status="error",_.value=S}return _}h.resolve=b;function b(k){return k instanceof this?k:l.resolve(new this(o),k)}h.reject=v;function v(k){var j=new this(o);return l.reject(j,k)}h.all=y;function y(k){var j=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=k.length,S=!1;if(!_)return this.resolve([]);for(var A=new Array(_),T=0,E=-1,C=new this(o);++E<_;)z(k[E],E);return C;function z(M,F){j.resolve(M).then(D,function(L){S||(S=!0,l.reject(C,L))});function D(L){A[F]=L,++T===_&&!S&&(S=!0,l.resolve(C,A))}}}h.race=w;function w(k){var j=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=k.length,S=!1;if(!_)return this.resolve([]);for(var A=-1,T=new this(o);++A<_;)E(k[A]);return T;function E(C){j.resolve(C).then(function(z){S||(S=!0,l.resolve(T,z))},function(z){S||(S=!0,l.reject(T,z))})}}},{1:1}],3:[function(r,n,s){(function(i){typeof i.Promise!="function"&&(i.Promise=r(2))}).call(this,typeof Fe<"u"?Fe:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,s){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q};function o(Q,de){if(!(Q instanceof de))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=l();function d(){try{if(!c||!c.open)return!1;var Q=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),de=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Q||de)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function u(Q,de){Q=Q||[],de=de||{};try{return new Blob(Q,de)}catch(xe){if(xe.name!=="TypeError")throw xe;for(var re=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,be=new re,ye=0;ye<Q.length;ye+=1)be.append(Q[ye]);return be.getBlob(de.type)}}typeof Promise>"u"&&r(3);var h=Promise;function f(Q,de){de&&Q.then(function(re){de(null,re)},function(re){de(re)})}function g(Q,de,re){typeof de=="function"&&Q.then(de),typeof re=="function"&&Q.catch(re)}function x(Q){return typeof Q!="string"&&(console.warn(Q+" used as a key, but it is not a string."),Q=String(Q)),Q}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",b=void 0,v={},y=Object.prototype.toString,w="readonly",k="readwrite";function j(Q){for(var de=Q.length,re=new ArrayBuffer(de),be=new Uint8Array(re),ye=0;ye<de;ye++)be[ye]=Q.charCodeAt(ye);return re}function _(Q){return new h(function(de){var re=Q.transaction(p,k),be=u([""]);re.objectStore(p).put(be,"key"),re.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),de(!1)},re.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),xe=navigator.userAgent.match(/Edge\//);de(xe||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function S(Q){return typeof b=="boolean"?h.resolve(b):_(Q).then(function(de){return b=de,b})}function A(Q){var de=v[Q.name],re={};re.promise=new h(function(be,ye){re.resolve=be,re.reject=ye}),de.deferredOperations.push(re),de.dbReady?de.dbReady=de.dbReady.then(function(){return re.promise}):de.dbReady=re.promise}function T(Q){var de=v[Q.name],re=de.deferredOperations.pop();if(re)return re.resolve(),re.promise}function E(Q,de){var re=v[Q.name],be=re.deferredOperations.pop();if(be)return be.reject(de),be.promise}function C(Q,de){return new h(function(re,be){if(v[Q.name]=v[Q.name]||ee(),Q.db)if(de)A(Q),Q.db.close();else return re(Q.db);var ye=[Q.name];de&&ye.push(Q.version);var xe=c.open.apply(c,ye);de&&(xe.onupgradeneeded=function(Me){var Be=xe.result;try{Be.createObjectStore(Q.storeName),Me.oldVersion<=1&&Be.createObjectStore(p)}catch(Ke){if(Ke.name==="ConstraintError")console.warn('The database "'+Q.name+'" has been upgraded from version '+Me.oldVersion+" to version "+Me.newVersion+', but the storage "'+Q.storeName+'" already exists.');else throw Ke}}),xe.onerror=function(Me){Me.preventDefault(),be(xe.error)},xe.onsuccess=function(){var Me=xe.result;Me.onversionchange=function(Be){Be.target.close()},re(Me),T(Q)}})}function z(Q){return C(Q,!1)}function M(Q){return C(Q,!0)}function F(Q,de){if(!Q.db)return!0;var re=!Q.db.objectStoreNames.contains(Q.storeName),be=Q.version<Q.db.version,ye=Q.version>Q.db.version;if(be&&(Q.version!==de&&console.warn('The database "'+Q.name+`" can't be downgraded from version `+Q.db.version+" to version "+Q.version+"."),Q.version=Q.db.version),ye||re){if(re){var xe=Q.db.version+1;xe>Q.version&&(Q.version=xe)}return!0}return!1}function D(Q){return new h(function(de,re){var be=new FileReader;be.onerror=re,be.onloadend=function(ye){var xe=btoa(ye.target.result||"");de({__local_forage_encoded_blob:!0,data:xe,type:Q.type})},be.readAsBinaryString(Q)})}function L(Q){var de=j(atob(Q.data));return u([de],{type:Q.type})}function K(Q){return Q&&Q.__local_forage_encoded_blob}function $(Q){var de=this,re=de._initReady().then(function(){var be=v[de._dbInfo.name];if(be&&be.dbReady)return be.dbReady});return g(re,Q,Q),re}function R(Q){A(Q);for(var de=v[Q.name],re=de.forages,be=0;be<re.length;be++){var ye=re[be];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return Q.db=null,z(Q).then(function(xe){return Q.db=xe,F(Q)?M(Q):xe}).then(function(xe){Q.db=de.db=xe;for(var Me=0;Me<re.length;Me++)re[Me]._dbInfo.db=xe}).catch(function(xe){throw E(Q,xe),xe})}function Y(Q,de,re,be){be===void 0&&(be=1);try{var ye=Q.db.transaction(Q.storeName,de);re(null,ye)}catch(xe){if(be>0&&(!Q.db||xe.name==="InvalidStateError"||xe.name==="NotFoundError"))return h.resolve().then(function(){if(!Q.db||xe.name==="NotFoundError"&&!Q.db.objectStoreNames.contains(Q.storeName)&&Q.version<=Q.db.version)return Q.db&&(Q.version=Q.db.version+1),M(Q)}).then(function(){return R(Q).then(function(){Y(Q,de,re,be-1)})}).catch(re);re(xe)}}function ee(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(Q){var de=this,re={db:null};if(Q)for(var be in Q)re[be]=Q[be];var ye=v[re.name];ye||(ye=ee(),v[re.name]=ye),ye.forages.push(de),de._initReady||(de._initReady=de.ready,de.ready=$);var xe=[];function Me(){return h.resolve()}for(var Be=0;Be<ye.forages.length;Be++){var Ke=ye.forages[Be];Ke!==de&&xe.push(Ke._initReady().catch(Me))}var qe=ye.forages.slice(0);return h.all(xe).then(function(){return re.db=ye.db,z(re)}).then(function(Ye){return re.db=Ye,F(re,de._defaultConfig.version)?M(re):Ye}).then(function(Ye){re.db=ye.db=Ye,de._dbInfo=re;for(var ct=0;ct<qe.length;ct++){var Ut=qe[ct];Ut!==de&&(Ut._dbInfo.db=re.db,Ut._dbInfo.version=re.version)}})}function U(Q,de){var re=this;Q=x(Q);var be=new h(function(ye,xe){re.ready().then(function(){Y(re._dbInfo,w,function(Me,Be){if(Me)return xe(Me);try{var Ke=Be.objectStore(re._dbInfo.storeName),qe=Ke.get(Q);qe.onsuccess=function(){var Ye=qe.result;Ye===void 0&&(Ye=null),K(Ye)&&(Ye=L(Ye)),ye(Ye)},qe.onerror=function(){xe(qe.error)}}catch(Ye){xe(Ye)}})}).catch(xe)});return f(be,de),be}function V(Q,de){var re=this,be=new h(function(ye,xe){re.ready().then(function(){Y(re._dbInfo,w,function(Me,Be){if(Me)return xe(Me);try{var Ke=Be.objectStore(re._dbInfo.storeName),qe=Ke.openCursor(),Ye=1;qe.onsuccess=function(){var ct=qe.result;if(ct){var Ut=ct.value;K(Ut)&&(Ut=L(Ut));var lr=Q(Ut,ct.key,Ye++);lr!==void 0?ye(lr):ct.continue()}else ye()},qe.onerror=function(){xe(qe.error)}}catch(ct){xe(ct)}})}).catch(xe)});return f(be,de),be}function se(Q,de,re){var be=this;Q=x(Q);var ye=new h(function(xe,Me){var Be;be.ready().then(function(){return Be=be._dbInfo,y.call(de)==="[object Blob]"?S(Be.db).then(function(Ke){return Ke?de:D(de)}):de}).then(function(Ke){Y(be._dbInfo,k,function(qe,Ye){if(qe)return Me(qe);try{var ct=Ye.objectStore(be._dbInfo.storeName);Ke===null&&(Ke=void 0);var Ut=ct.put(Ke,Q);Ye.oncomplete=function(){Ke===void 0&&(Ke=null),xe(Ke)},Ye.onabort=Ye.onerror=function(){var lr=Ut.error?Ut.error:Ut.transaction.error;Me(lr)}}catch(lr){Me(lr)}})}).catch(Me)});return f(ye,re),ye}function Ne(Q,de){var re=this;Q=x(Q);var be=new h(function(ye,xe){re.ready().then(function(){Y(re._dbInfo,k,function(Me,Be){if(Me)return xe(Me);try{var Ke=Be.objectStore(re._dbInfo.storeName),qe=Ke.delete(Q);Be.oncomplete=function(){ye()},Be.onerror=function(){xe(qe.error)},Be.onabort=function(){var Ye=qe.error?qe.error:qe.transaction.error;xe(Ye)}}catch(Ye){xe(Ye)}})}).catch(xe)});return f(be,de),be}function ie(Q){var de=this,re=new h(function(be,ye){de.ready().then(function(){Y(de._dbInfo,k,function(xe,Me){if(xe)return ye(xe);try{var Be=Me.objectStore(de._dbInfo.storeName),Ke=Be.clear();Me.oncomplete=function(){be()},Me.onabort=Me.onerror=function(){var qe=Ke.error?Ke.error:Ke.transaction.error;ye(qe)}}catch(qe){ye(qe)}})}).catch(ye)});return f(re,Q),re}function q(Q){var de=this,re=new h(function(be,ye){de.ready().then(function(){Y(de._dbInfo,w,function(xe,Me){if(xe)return ye(xe);try{var Be=Me.objectStore(de._dbInfo.storeName),Ke=Be.count();Ke.onsuccess=function(){be(Ke.result)},Ke.onerror=function(){ye(Ke.error)}}catch(qe){ye(qe)}})}).catch(ye)});return f(re,Q),re}function H(Q,de){var re=this,be=new h(function(ye,xe){if(Q<0){ye(null);return}re.ready().then(function(){Y(re._dbInfo,w,function(Me,Be){if(Me)return xe(Me);try{var Ke=Be.objectStore(re._dbInfo.storeName),qe=!1,Ye=Ke.openKeyCursor();Ye.onsuccess=function(){var ct=Ye.result;if(!ct){ye(null);return}Q===0||qe?ye(ct.key):(qe=!0,ct.advance(Q))},Ye.onerror=function(){xe(Ye.error)}}catch(ct){xe(ct)}})}).catch(xe)});return f(be,de),be}function Z(Q){var de=this,re=new h(function(be,ye){de.ready().then(function(){Y(de._dbInfo,w,function(xe,Me){if(xe)return ye(xe);try{var Be=Me.objectStore(de._dbInfo.storeName),Ke=Be.openKeyCursor(),qe=[];Ke.onsuccess=function(){var Ye=Ke.result;if(!Ye){be(qe);return}qe.push(Ye.key),Ye.continue()},Ke.onerror=function(){ye(Ke.error)}}catch(Ye){ye(Ye)}})}).catch(ye)});return f(re,Q),re}function te(Q,de){de=m.apply(this,arguments);var re=this.config();Q=typeof Q!="function"&&Q||{},Q.name||(Q.name=Q.name||re.name,Q.storeName=Q.storeName||re.storeName);var be=this,ye;if(!Q.name)ye=h.reject("Invalid arguments");else{var xe=Q.name===re.name&&be._dbInfo.db,Me=xe?h.resolve(be._dbInfo.db):z(Q).then(function(Be){var Ke=v[Q.name],qe=Ke.forages;Ke.db=Be;for(var Ye=0;Ye<qe.length;Ye++)qe[Ye]._dbInfo.db=Be;return Be});Q.storeName?ye=Me.then(function(Be){if(Be.objectStoreNames.contains(Q.storeName)){var Ke=Be.version+1;A(Q);var qe=v[Q.name],Ye=qe.forages;Be.close();for(var ct=0;ct<Ye.length;ct++){var Ut=Ye[ct];Ut._dbInfo.db=null,Ut._dbInfo.version=Ke}var lr=new h(function(Xt,ur){var pr=c.open(Q.name,Ke);pr.onerror=function(fn){var gl=pr.result;gl.close(),ur(fn)},pr.onupgradeneeded=function(){var fn=pr.result;fn.deleteObjectStore(Q.storeName)},pr.onsuccess=function(){var fn=pr.result;fn.close(),Xt(fn)}});return lr.then(function(Xt){qe.db=Xt;for(var ur=0;ur<Ye.length;ur++){var pr=Ye[ur];pr._dbInfo.db=Xt,T(pr._dbInfo)}}).catch(function(Xt){throw(E(Q,Xt)||h.resolve()).catch(function(){}),Xt})}}):ye=Me.then(function(Be){A(Q);var Ke=v[Q.name],qe=Ke.forages;Be.close();for(var Ye=0;Ye<qe.length;Ye++){var ct=qe[Ye];ct._dbInfo.db=null}var Ut=new h(function(lr,Xt){var ur=c.deleteDatabase(Q.name);ur.onerror=function(){var pr=ur.result;pr&&pr.close(),Xt(ur.error)},ur.onblocked=function(){console.warn('dropInstance blocked for database "'+Q.name+'" until all open connections are closed')},ur.onsuccess=function(){var pr=ur.result;pr&&pr.close(),lr(pr)}});return Ut.then(function(lr){Ke.db=lr;for(var Xt=0;Xt<qe.length;Xt++){var ur=qe[Xt];T(ur._dbInfo)}}).catch(function(lr){throw(E(Q,lr)||h.resolve()).catch(function(){}),lr})})}return f(ye,de),ye}var ge={_driver:"asyncStorage",_initStorage:B,_support:d(),iterate:V,getItem:U,setItem:se,removeItem:Ne,clear:ie,length:q,key:H,keys:Z,dropInstance:te};function Ce(){return typeof openDatabase=="function"}var Le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",He="~~local_forage_type~",le=/^~~local_forage_type~([^~]+)~/,Re="__lfsc__:",Ze=Re.length,lt="arbf",rt="blob",ne="si08",pe="ui08",Ue="uic8",kt="si16",Se="si32",me="ur16",$e="ui32",Ge="fl32",Qe="fl64",Lt=Ze+lt.length,wt=Object.prototype.toString;function Nt(Q){var de=Q.length*.75,re=Q.length,be,ye=0,xe,Me,Be,Ke;Q[Q.length-1]==="="&&(de--,Q[Q.length-2]==="="&&de--);var qe=new ArrayBuffer(de),Ye=new Uint8Array(qe);for(be=0;be<re;be+=4)xe=Le.indexOf(Q[be]),Me=Le.indexOf(Q[be+1]),Be=Le.indexOf(Q[be+2]),Ke=Le.indexOf(Q[be+3]),Ye[ye++]=xe<<2|Me>>4,Ye[ye++]=(Me&15)<<4|Be>>2,Ye[ye++]=(Be&3)<<6|Ke&63;return qe}function he(Q){var de=new Uint8Array(Q),re="",be;for(be=0;be<de.length;be+=3)re+=Le[de[be]>>2],re+=Le[(de[be]&3)<<4|de[be+1]>>4],re+=Le[(de[be+1]&15)<<2|de[be+2]>>6],re+=Le[de[be+2]&63];return de.length%3===2?re=re.substring(0,re.length-1)+"=":de.length%3===1&&(re=re.substring(0,re.length-2)+"=="),re}function Xe(Q,de){var re="";if(Q&&(re=wt.call(Q)),Q&&(re==="[object ArrayBuffer]"||Q.buffer&&wt.call(Q.buffer)==="[object ArrayBuffer]")){var be,ye=Re;Q instanceof ArrayBuffer?(be=Q,ye+=lt):(be=Q.buffer,re==="[object Int8Array]"?ye+=ne:re==="[object Uint8Array]"?ye+=pe:re==="[object Uint8ClampedArray]"?ye+=Ue:re==="[object Int16Array]"?ye+=kt:re==="[object Uint16Array]"?ye+=me:re==="[object Int32Array]"?ye+=Se:re==="[object Uint32Array]"?ye+=$e:re==="[object Float32Array]"?ye+=Ge:re==="[object Float64Array]"?ye+=Qe:de(new Error("Failed to get type for BinaryArray"))),de(ye+he(be))}else if(re==="[object Blob]"){var xe=new FileReader;xe.onload=function(){var Me=He+Q.type+"~"+he(this.result);de(Re+rt+Me)},xe.readAsArrayBuffer(Q)}else try{de(JSON.stringify(Q))}catch(Me){console.error("Couldn't convert value into a JSON string: ",Q),de(null,Me)}}function W(Q){if(Q.substring(0,Ze)!==Re)return JSON.parse(Q);var de=Q.substring(Lt),re=Q.substring(Ze,Lt),be;if(re===rt&&le.test(de)){var ye=de.match(le);be=ye[1],de=de.substring(ye[0].length)}var xe=Nt(de);switch(re){case lt:return xe;case rt:return u([xe],{type:be});case ne:return new Int8Array(xe);case pe:return new Uint8Array(xe);case Ue:return new Uint8ClampedArray(xe);case kt:return new Int16Array(xe);case me:return new Uint16Array(xe);case Se:return new Int32Array(xe);case $e:return new Uint32Array(xe);case Ge:return new Float32Array(xe);case Qe:return new Float64Array(xe);default:throw new Error("Unkown type: "+re)}}var we={serialize:Xe,deserialize:W,stringToBuffer:Nt,bufferToString:he};function ve(Q,de,re,be){Q.executeSql("CREATE TABLE IF NOT EXISTS "+de.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],re,be)}function Te(Q){var de=this,re={db:null};if(Q)for(var be in Q)re[be]=typeof Q[be]!="string"?Q[be].toString():Q[be];var ye=new h(function(xe,Me){try{re.db=openDatabase(re.name,String(re.version),re.description,re.size)}catch(Be){return Me(Be)}re.db.transaction(function(Be){ve(Be,re,function(){de._dbInfo=re,xe()},function(Ke,qe){Me(qe)})},Me)});return re.serializer=we,ye}function oe(Q,de,re,be,ye,xe){Q.executeSql(re,be,ye,function(Me,Be){Be.code===Be.SYNTAX_ERR?Me.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[de.storeName],function(Ke,qe){qe.rows.length?xe(Ke,Be):ve(Ke,de,function(){Ke.executeSql(re,be,ye,xe)},xe)},xe):xe(Me,Be)},xe)}function Ee(Q,de){var re=this;Q=x(Q);var be=new h(function(ye,xe){re.ready().then(function(){var Me=re._dbInfo;Me.db.transaction(function(Be){oe(Be,Me,"SELECT * FROM "+Me.storeName+" WHERE key = ? LIMIT 1",[Q],function(Ke,qe){var Ye=qe.rows.length?qe.rows.item(0).value:null;Ye&&(Ye=Me.serializer.deserialize(Ye)),ye(Ye)},function(Ke,qe){xe(qe)})})}).catch(xe)});return f(be,de),be}function G(Q,de){var re=this,be=new h(function(ye,xe){re.ready().then(function(){var Me=re._dbInfo;Me.db.transaction(function(Be){oe(Be,Me,"SELECT * FROM "+Me.storeName,[],function(Ke,qe){for(var Ye=qe.rows,ct=Ye.length,Ut=0;Ut<ct;Ut++){var lr=Ye.item(Ut),Xt=lr.value;if(Xt&&(Xt=Me.serializer.deserialize(Xt)),Xt=Q(Xt,lr.key,Ut+1),Xt!==void 0){ye(Xt);return}}ye()},function(Ke,qe){xe(qe)})})}).catch(xe)});return f(be,de),be}function Oe(Q,de,re,be){var ye=this;Q=x(Q);var xe=new h(function(Me,Be){ye.ready().then(function(){de===void 0&&(de=null);var Ke=de,qe=ye._dbInfo;qe.serializer.serialize(de,function(Ye,ct){ct?Be(ct):qe.db.transaction(function(Ut){oe(Ut,qe,"INSERT OR REPLACE INTO "+qe.storeName+" (key, value) VALUES (?, ?)",[Q,Ye],function(){Me(Ke)},function(lr,Xt){Be(Xt)})},function(Ut){if(Ut.code===Ut.QUOTA_ERR){if(be>0){Me(Oe.apply(ye,[Q,Ke,re,be-1]));return}Be(Ut)}})})}).catch(Be)});return f(xe,re),xe}function it(Q,de,re){return Oe.apply(this,[Q,de,re,1])}function I(Q,de){var re=this;Q=x(Q);var be=new h(function(ye,xe){re.ready().then(function(){var Me=re._dbInfo;Me.db.transaction(function(Be){oe(Be,Me,"DELETE FROM "+Me.storeName+" WHERE key = ?",[Q],function(){ye()},function(Ke,qe){xe(qe)})})}).catch(xe)});return f(be,de),be}function je(Q){var de=this,re=new h(function(be,ye){de.ready().then(function(){var xe=de._dbInfo;xe.db.transaction(function(Me){oe(Me,xe,"DELETE FROM "+xe.storeName,[],function(){be()},function(Be,Ke){ye(Ke)})})}).catch(ye)});return f(re,Q),re}function ke(Q){var de=this,re=new h(function(be,ye){de.ready().then(function(){var xe=de._dbInfo;xe.db.transaction(function(Me){oe(Me,xe,"SELECT COUNT(key) as c FROM "+xe.storeName,[],function(Be,Ke){var qe=Ke.rows.item(0).c;be(qe)},function(Be,Ke){ye(Ke)})})}).catch(ye)});return f(re,Q),re}function X(Q,de){var re=this,be=new h(function(ye,xe){re.ready().then(function(){var Me=re._dbInfo;Me.db.transaction(function(Be){oe(Be,Me,"SELECT key FROM "+Me.storeName+" WHERE id = ? LIMIT 1",[Q+1],function(Ke,qe){var Ye=qe.rows.length?qe.rows.item(0).key:null;ye(Ye)},function(Ke,qe){xe(qe)})})}).catch(xe)});return f(be,de),be}function ce(Q){var de=this,re=new h(function(be,ye){de.ready().then(function(){var xe=de._dbInfo;xe.db.transaction(function(Me){oe(Me,xe,"SELECT key FROM "+xe.storeName,[],function(Be,Ke){for(var qe=[],Ye=0;Ye<Ke.rows.length;Ye++)qe.push(Ke.rows.item(Ye).key);be(qe)},function(Be,Ke){ye(Ke)})})}).catch(ye)});return f(re,Q),re}function _e(Q){return new h(function(de,re){Q.transaction(function(be){be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,xe){for(var Me=[],Be=0;Be<xe.rows.length;Be++)Me.push(xe.rows.item(Be).name);de({db:Q,storeNames:Me})},function(ye,xe){re(xe)})},function(be){re(be)})})}function ot(Q,de){de=m.apply(this,arguments);var re=this.config();Q=typeof Q!="function"&&Q||{},Q.name||(Q.name=Q.name||re.name,Q.storeName=Q.storeName||re.storeName);var be=this,ye;return Q.name?ye=new h(function(xe){var Me;Q.name===re.name?Me=be._dbInfo.db:Me=openDatabase(Q.name,"","",0),Q.storeName?xe({db:Me,storeNames:[Q.storeName]}):xe(_e(Me))}).then(function(xe){return new h(function(Me,Be){xe.db.transaction(function(Ke){function qe(lr){return new h(function(Xt,ur){Ke.executeSql("DROP TABLE IF EXISTS "+lr,[],function(){Xt()},function(pr,fn){ur(fn)})})}for(var Ye=[],ct=0,Ut=xe.storeNames.length;ct<Ut;ct++)Ye.push(qe(xe.storeNames[ct]));h.all(Ye).then(function(){Me()}).catch(function(lr){Be(lr)})},function(Ke){Be(Ke)})})}):ye=h.reject("Invalid arguments"),f(ye,de),ye}var et={_driver:"webSQLStorage",_initStorage:Te,_support:Ce(),iterate:G,getItem:Ee,setItem:it,removeItem:I,clear:je,length:ke,key:X,keys:ce,dropInstance:ot};function at(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ft(Q,de){var re=Q.name+"/";return Q.storeName!==de.storeName&&(re+=Q.storeName+"/"),re}function ca(){var Q="_localforage_support_test";try{return localStorage.setItem(Q,!0),localStorage.removeItem(Q),!1}catch{return!0}}function Bt(){return!ca()||localStorage.length>0}function Ht(Q){var de=this,re={};if(Q)for(var be in Q)re[be]=Q[be];return re.keyPrefix=Ft(Q,de._defaultConfig),Bt()?(de._dbInfo=re,re.serializer=we,h.resolve()):h.reject()}function Xr(Q){var de=this,re=de.ready().then(function(){for(var be=de._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var xe=localStorage.key(ye);xe.indexOf(be)===0&&localStorage.removeItem(xe)}});return f(re,Q),re}function hn(Q,de){var re=this;Q=x(Q);var be=re.ready().then(function(){var ye=re._dbInfo,xe=localStorage.getItem(ye.keyPrefix+Q);return xe&&(xe=ye.serializer.deserialize(xe)),xe});return f(be,de),be}function _n(Q,de){var re=this,be=re.ready().then(function(){for(var ye=re._dbInfo,xe=ye.keyPrefix,Me=xe.length,Be=localStorage.length,Ke=1,qe=0;qe<Be;qe++){var Ye=localStorage.key(qe);if(Ye.indexOf(xe)===0){var ct=localStorage.getItem(Ye);if(ct&&(ct=ye.serializer.deserialize(ct)),ct=Q(ct,Ye.substring(Me),Ke++),ct!==void 0)return ct}}});return f(be,de),be}function fo(Q,de){var re=this,be=re.ready().then(function(){var ye=re._dbInfo,xe;try{xe=localStorage.key(Q)}catch{xe=null}return xe&&(xe=xe.substring(ye.keyPrefix.length)),xe});return f(be,de),be}function ln(Q){var de=this,re=de.ready().then(function(){for(var be=de._dbInfo,ye=localStorage.length,xe=[],Me=0;Me<ye;Me++){var Be=localStorage.key(Me);Be.indexOf(be.keyPrefix)===0&&xe.push(Be.substring(be.keyPrefix.length))}return xe});return f(re,Q),re}function $r(Q){var de=this,re=de.keys().then(function(be){return be.length});return f(re,Q),re}function Zn(Q,de){var re=this;Q=x(Q);var be=re.ready().then(function(){var ye=re._dbInfo;localStorage.removeItem(ye.keyPrefix+Q)});return f(be,de),be}function cn(Q,de,re){var be=this;Q=x(Q);var ye=be.ready().then(function(){de===void 0&&(de=null);var xe=de;return new h(function(Me,Be){var Ke=be._dbInfo;Ke.serializer.serialize(de,function(qe,Ye){if(Ye)Be(Ye);else try{localStorage.setItem(Ke.keyPrefix+Q,qe),Me(xe)}catch(ct){(ct.name==="QuotaExceededError"||ct.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Be(ct),Be(ct)}})})});return f(ye,re),ye}function Ra(Q,de){if(de=m.apply(this,arguments),Q=typeof Q!="function"&&Q||{},!Q.name){var re=this.config();Q.name=Q.name||re.name,Q.storeName=Q.storeName||re.storeName}var be=this,ye;return Q.name?ye=new h(function(xe){Q.storeName?xe(Ft(Q,be._defaultConfig)):xe(Q.name+"/")}).then(function(xe){for(var Me=localStorage.length-1;Me>=0;Me--){var Be=localStorage.key(Me);Be.indexOf(xe)===0&&localStorage.removeItem(Be)}}):ye=h.reject("Invalid arguments"),f(ye,de),ye}var ja={_driver:"localStorageWrapper",_initStorage:Ht,_support:at(),iterate:_n,getItem:hn,setItem:cn,removeItem:Zn,clear:Xr,length:$r,key:fo,keys:ln,dropInstance:Ra},$n=function(de,re){return de===re||typeof de=="number"&&typeof re=="number"&&isNaN(de)&&isNaN(re)},Rm=function(de,re){for(var be=de.length,ye=0;ye<be;){if($n(de[ye],re))return!0;ye++}return!1},Ih=Array.isArray||function(Q){return Object.prototype.toString.call(Q)==="[object Array]"},hl={},Dh={},go={INDEXEDDB:ge,WEBSQL:et,LOCALSTORAGE:ja},kc=[go.INDEXEDDB._driver,go.WEBSQL._driver,go.LOCALSTORAGE._driver],fl=["dropInstance"],mo=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(fl),Gs={description:"",driver:kc.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Xd(Q,de){Q[de]=function(){var re=arguments;return Q.ready().then(function(){return Q[de].apply(Q,re)})}}function Yd(){for(var Q=1;Q<arguments.length;Q++){var de=arguments[Q];if(de)for(var re in de)de.hasOwnProperty(re)&&(Ih(de[re])?arguments[0][re]=de[re].slice():arguments[0][re]=de[re])}return arguments[0]}var Pm=function(){function Q(de){o(this,Q);for(var re in go)if(go.hasOwnProperty(re)){var be=go[re],ye=be._driver;this[re]=ye,hl[ye]||this.defineDriver(be)}this._defaultConfig=Yd({},Gs),this._config=Yd({},this._defaultConfig,de),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Q.prototype.config=function(re){if((typeof re>"u"?"undefined":i(re))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var be in re){if(be==="storeName"&&(re[be]=re[be].replace(/\W/g,"_")),be==="version"&&typeof re[be]!="number")return new Error("Database version must be a number.");this._config[be]=re[be]}return"driver"in re&&re.driver?this.setDriver(this._config.driver):!0}else return typeof re=="string"?this._config[re]:this._config},Q.prototype.defineDriver=function(re,be,ye){var xe=new h(function(Me,Be){try{var Ke=re._driver,qe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!re._driver){Be(qe);return}for(var Ye=mo.concat("_initStorage"),ct=0,Ut=Ye.length;ct<Ut;ct++){var lr=Ye[ct],Xt=!Rm(fl,lr);if((Xt||re[lr])&&typeof re[lr]!="function"){Be(qe);return}}var ur=function(){for(var gl=function(Fm){return function(){var Mh=new Error("Method "+Fm+" is not implemented by the current driver"),Qn=h.reject(Mh);return f(Qn,arguments[arguments.length-1]),Qn}},Za=0,$m=fl.length;Za<$m;Za++){var Zd=fl[Za];re[Zd]||(re[Zd]=gl(Zd))}};ur();var pr=function(gl){hl[Ke]&&console.info("Redefining LocalForage driver: "+Ke),hl[Ke]=re,Dh[Ke]=gl,Me()};"_support"in re?re._support&&typeof re._support=="function"?re._support().then(pr,Be):pr(!!re._support):pr(!0)}catch(fn){Be(fn)}});return g(xe,be,ye),xe},Q.prototype.driver=function(){return this._driver||null},Q.prototype.getDriver=function(re,be,ye){var xe=hl[re]?h.resolve(hl[re]):h.reject(new Error("Driver not found."));return g(xe,be,ye),xe},Q.prototype.getSerializer=function(re){var be=h.resolve(we);return g(be,re),be},Q.prototype.ready=function(re){var be=this,ye=be._driverSet.then(function(){return be._ready===null&&(be._ready=be._initDriver()),be._ready});return g(ye,re,re),ye},Q.prototype.setDriver=function(re,be,ye){var xe=this;Ih(re)||(re=[re]);var Me=this._getSupportedDrivers(re);function Be(){xe._config.driver=xe.driver()}function Ke(ct){return xe._extend(ct),Be(),xe._ready=xe._initStorage(xe._config),xe._ready}function qe(ct){return function(){var Ut=0;function lr(){for(;Ut<ct.length;){var Xt=ct[Ut];return Ut++,xe._dbInfo=null,xe._ready=null,xe.getDriver(Xt).then(Ke).catch(lr)}Be();var ur=new Error("No available storage method found.");return xe._driverSet=h.reject(ur),xe._driverSet}return lr()}}var Ye=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=Ye.then(function(){var ct=Me[0];return xe._dbInfo=null,xe._ready=null,xe.getDriver(ct).then(function(Ut){xe._driver=Ut._driver,Be(),xe._wrapLibraryMethodsWithReady(),xe._initDriver=qe(Me)})}).catch(function(){Be();var ct=new Error("No available storage method found.");return xe._driverSet=h.reject(ct),xe._driverSet}),g(this._driverSet,be,ye),this._driverSet},Q.prototype.supports=function(re){return!!Dh[re]},Q.prototype._extend=function(re){Yd(this,re)},Q.prototype._getSupportedDrivers=function(re){for(var be=[],ye=0,xe=re.length;ye<xe;ye++){var Me=re[ye];this.supports(Me)&&be.push(Me)}return be},Q.prototype._wrapLibraryMethodsWithReady=function(){for(var re=0,be=mo.length;re<be;re++)Xd(this,mo[re])},Q.prototype.createInstance=function(re){return new Q(re)},Q}(),zm=new Pm;n.exports=zm},{3:3}]},{},[4])(4)})})(jJ);var Int=jJ.exports;const rF=Vt(Int);class NJ{constructor(e,r,n){this.urlCache={},this.storage=void 0,this.name=e,this.requester=r||Xx,this.resolver=n,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof rF>"u"&&(e=rF),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let r=navigator.onLine;this.online=r,r?this.emit("online",this):this.emit("offline",this)}add(e,r){let n=e.resources.map(s=>{let{href:i}=s,o=this.resolver(i),l=window.encodeURIComponent(o);return this.storage.getItem(l).then(c=>!c||r?this.requester(o,"binary").then(d=>this.storage.setItem(l,d)):c)});return Promise.all(n)}put(e,r,n){let s=window.encodeURIComponent(e);return this.storage.getItem(s).then(i=>i||this.requester(e,"binary",r,n).then(o=>this.storage.setItem(s,o)))}request(e,r,n,s){return this.online?this.requester(e,r,n,s).then(i=>(this.put(e),i)):this.retrieve(e,r)}retrieve(e,r){new ar;var n,s=new dc(e);return r||(r=s.extension),r=="blob"?n=this.getBlob(e):n=this.getText(e),n.then(i=>{var o=new ar,l;return i?(l=this.handleResponse(i,r),o.resolve(l)):o.reject({message:"File not found in storage: "+e,stack:new Error().stack}),o.promise})}handleResponse(e,r){var n;return r=="json"?n=JSON.parse(e):Wx(r)?n=Vo(e,"text/xml"):r=="xhtml"?n=Vo(e,"application/xhtml+xml"):r=="html"||r=="htm"?n=Vo(e,"text/html"):n=e,n}getBlob(e,r){let n=window.encodeURIComponent(e);return this.storage.getItem(n).then(function(s){if(s)return r=r||Qf.lookup(e),new Blob([s],{type:r})})}getText(e,r){let n=window.encodeURIComponent(e);return r=r||Qf.lookup(e),this.storage.getItem(n).then(function(s){var i=new ar,o=new FileReader,l;if(s)return l=new Blob([s],{type:r}),o.addEventListener("loadend",()=>{i.resolve(o.result)}),o.readAsText(l,r),i.promise})}getBase64(e,r){let n=window.encodeURIComponent(e);return r=r||Qf.lookup(e),this.storage.getItem(n).then(s=>{var i=new ar,o=new FileReader,l;if(s)return l=new Blob([s],{type:r}),o.addEventListener("loadend",()=>{i.resolve(o.result)}),o.readAsDataURL(l,r),i.promise})}createUrl(e,r){var n=new ar,s=window.URL||window.webkitURL||window.mozURL,i,o,l=r&&r.base64;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(l?(o=this.getBase64(e),o&&o.then((function(c){this.urlCache[e]=c,n.resolve(c)}).bind(this))):(o=this.getBlob(e),o&&o.then((function(c){i=s.createObjectURL(c),this.urlCache[e]=i,n.resolve(i)}).bind(this))),o||n.reject({message:"File not found in storage: "+e,stack:new Error().stack}),n.promise)}revokeUrl(e){var r=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&r.revokeObjectURL(n)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let r in this.urlCache)e.revokeObjectURL(r);this.urlCache={},this.removeListeners()}}ul(NJ.prototype);class vS{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const r=Rr(e,"display_options");return r?(cc(r,"option").forEach(s=>{let i="";switch(s.childNodes.length&&(i=s.childNodes[0].nodeValue),s.attributes.name.value){case"interactive":this.interactive=i;break;case"fixed-layout":this.fixedLayout=i;break;case"open-to-spread":this.openToSpread=i;break;case"orientation-lock":this.orientationLock=i;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const nF="META-INF/container.xml",Dnt="META-INF/com.apple.ibooks.display-options.xml",Ti={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class OI{constructor(e,r){typeof r>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(r=e,e=void 0),this.settings=wa(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),wa(this.settings,r),this.opening=new ar,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new ar,spine:new ar,metadata:new ar,cover:new ar,navigation:new ar,pageList:new ar,resources:new ar,displayOptions:new ar},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||Xx,this.spine=new nnt,this.locations=new dJ(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(n=>{var s=new Error("Cannot load book at "+e);this.emit(tt.BOOK.OPEN_FAILED,s)})}open(e,r){var n,s=r||this.determineType(e);return s===Ti.BINARY?(this.archived=!0,this.url=new Li("/",""),n=this.openEpub(e)):s===Ti.BASE64?(this.archived=!0,this.url=new Li("/",""),n=this.openEpub(e,s)):s===Ti.EPUB?(this.archived=!0,this.url=new Li("/",""),n=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):s==Ti.OPF?(this.url=new Li(e),n=this.openPackaging(this.url.Path.toString())):s==Ti.MANIFEST?(this.url=new Li(e),n=this.openManifest(this.url.Path.toString())):(this.url=new Li(e),n=this.openContainer(nF).then(this.openPackaging.bind(this))),n}openEpub(e,r){return this.unarchive(e,r||this.settings.encoding).then(()=>this.openContainer(nF)).then(n=>this.openPackaging(n))}openContainer(e){return this.load(e).then(r=>(this.container=new ant(r),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new dc(e),this.load(e).then(r=>(this.packaging=new eF(r),this.unpack(this.packaging)))}openManifest(e){return this.path=new dc(e),this.load(e).then(r=>(this.packaging=new eF,this.packaging.load(r),this.unpack(this.packaging)))}load(e){var r=this.resolve(e);return this.archived?this.archive.request(r):this.request(r,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,r){if(e){var n=e,s=e.indexOf("://")>-1;return s?e:(this.path&&(n=this.path.resolve(e)),r!=!1&&this.url&&(n=this.url.resolve(n)),n)}}canonical(e){var r=e;return e?(this.settings.canonical?r=this.settings.canonical(e):r=this.resolve(e,!0),r):""}determineType(e){var r,n,s;if(this.settings.encoding==="base64")return Ti.BASE64;if(typeof e!="string")return Ti.BINARY;if(r=new Li(e),n=r.path(),s=n.extension,s&&(s=s.replace(/\?.*$/,"")),!s)return Ti.DIRECTORY;if(s==="epub")return Ti.EPUB;if(s==="opf")return Ti.OPF;if(s==="json")return Ti.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(Dnt)).then(r=>{this.displayOptions=new vS(r),this.loading.displayOptions.resolve(this.displayOptions)}).catch(r=>{this.displayOptions=new vS,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new vS,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new lnt(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(r=>{console.error(r)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let r=e.navPath||e.ncxPath,n=e.toc;return n?new Promise((s,i)=>{this.navigation=new bS(n),e.pageList&&(this.pageList=new yS(e.pageList)),s(this.navigation)}):r?this.load(r,"xml").then(s=>(this.navigation=new bS(s),this.pageList=new yS(s),this.navigation)):new Promise((s,i)=>{this.navigation=new bS,this.pageList=new yS,s(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,r){return this.rendition=new TI(this,r),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,r){return this.archive=new Ont,this.archive.open(e,r)}store(e){let r=this.settings.replacements&&this.settings.replacements!=="none",n=this.url,s=this.settings.requestMethod||Xx.bind(this);return this.storage=new NJ(e,s,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let i=(o,l)=>{l.output=this.resources.substitute(o,l.url)};this.resources.settings.replacements=r||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Li("/",""),this.spine.hooks.serialize.register(i)}),this.storage.on("online",()=>{this.url=n,this.spine.hooks.serialize.deregister(i)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,r)=>{r.output=this.resources.substitute(e,r.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var r=new sr(e),n=this.spine.get(r.spinePos),s=this.load.bind(this);return n?n.load(s).then(function(i){var o=r.toRange(n.document);return o}):new Promise((i,o)=>{o("CFI could not be found")})}key(e){var r=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${Rj}:${r}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}ul(OI.prototype);function Oh(t,e){return new OI(t,e)}Oh.VERSION=Rj;typeof global<"u"&&(global.EPUBJS_VERSION=Rj);Oh.Book=OI;Oh.Rendition=TI;Oh.Contents=EI;Oh.CFI=sr;Oh.utils=Xrt;const Mnt="Left",Lnt="Right",Rnt="Up",Pnt="Down",Df={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},V3={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},aF="mousemove",sF="mouseup",znt="touchend",$nt="touchmove",Fnt="touchstart";function Bnt(t,e,r,n){return t>e?r>0?Lnt:Mnt:n>0?Pnt:Rnt}function iF(t,e){if(e===0)return t;const r=Math.PI/180*e,n=t[0]*Math.cos(r)+t[1]*Math.sin(r),s=t[1]*Math.cos(r)-t[0]*Math.sin(r);return[n,s]}function Unt(t,e){const r=u=>{const h="touches"in u;h&&u.touches.length>1||t((f,g)=>{g.trackMouse&&!h&&(document.addEventListener(aF,n),document.addEventListener(sF,o));const{clientX:x,clientY:m}=h?u.touches[0]:u,p=iF([x,m],g.rotationAngle);return g.onTouchStartOrOnMouseDown&&g.onTouchStartOrOnMouseDown({event:u}),Object.assign(Object.assign(Object.assign({},f),V3),{initial:p.slice(),xy:p,start:u.timeStamp||0})})},n=u=>{t((h,f)=>{const g="touches"in u;if(g&&u.touches.length>1)return h;if(u.timeStamp-h.start>f.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:x,clientY:m}=g?u.touches[0]:u,[p,b]=iF([x,m],f.rotationAngle),v=p-h.xy[0],y=b-h.xy[1],w=Math.abs(v),k=Math.abs(y),j=(u.timeStamp||0)-h.start,_=Math.sqrt(w*w+k*k)/(j||1),S=[v/(j||1),y/(j||1)],A=Bnt(w,k,v,y),T=typeof f.delta=="number"?f.delta:f.delta[A.toLowerCase()]||Df.delta;if(w<T&&k<T&&!h.swiping)return h;const E={absX:w,absY:k,deltaX:v,deltaY:y,dir:A,event:u,first:h.first,initial:h.initial,velocity:_,vxvy:S};E.first&&f.onSwipeStart&&f.onSwipeStart(E),f.onSwiping&&f.onSwiping(E);let C=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${A}`])&&(C=!0),C&&f.preventScrollOnSwipe&&f.trackTouch&&u.cancelable&&u.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:E,swiping:!0})})},s=u=>{t((h,f)=>{let g;if(h.swiping&&h.eventData){if(u.timeStamp-h.start<f.swipeDuration){g=Object.assign(Object.assign({},h.eventData),{event:u}),f.onSwiped&&f.onSwiped(g);const x=f[`onSwiped${g.dir}`];x&&x(g)}}else f.onTap&&f.onTap({event:u});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:u}),Object.assign(Object.assign(Object.assign({},h),V3),{eventData:g})})},i=()=>{document.removeEventListener(aF,n),document.removeEventListener(sF,o)},o=u=>{i(),s(u)},l=(u,h)=>{let f=()=>{};if(u&&u.addEventListener){const g=Object.assign(Object.assign({},Df.touchEventOptions),h.touchEventOptions),x=[[Fnt,r,g],[$nt,n,Object.assign(Object.assign({},g),h.preventScrollOnSwipe?{passive:!1}:{})],[znt,s,g]];x.forEach(([m,p,b])=>u.addEventListener(m,p,b)),f=()=>x.forEach(([m,p])=>u.removeEventListener(m,p))}return f},d={ref:u=>{u!==null&&t((h,f)=>{if(h.el===u)return h;const g={};return h.el&&h.el!==u&&h.cleanUpTouch&&(h.cleanUpTouch(),g.cleanUpTouch=void 0),f.trackTouch&&u&&(g.cleanUpTouch=l(u,f)),Object.assign(Object.assign(Object.assign({},h),{el:u}),g)})}};return e.trackMouse&&(d.onMouseDown=r),[d,l]}function Knt(t,e,r,n){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==r.preventScrollOnSwipe||e.touchEventOptions.passive!==r.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:n(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:n(t.el,e)})}function Gnt(t){const{trackMouse:e}=t,r=N.useRef(Object.assign({},V3)),n=N.useRef(Object.assign({},Df)),s=N.useRef(Object.assign({},n.current));s.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},Df),t);let i;for(i in Df)n.current[i]===void 0&&(n.current[i]=Df[i]);const[o,l]=N.useMemo(()=>Unt(c=>r.current=c(r.current,n.current),{trackMouse:e}),[e]);return r.current=Knt(r.current,n.current,s.current,l),o}var qnt=Object.defineProperty,Vnt=(t,e,r)=>e in t?qnt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gn=(t,e,r)=>Vnt(t,typeof e!="symbol"?e+"":e,r);const oF={viewHolder:{position:"relative",height:"100%",width:"100%"},view:{height:"100%"}};class Hnt extends N.Component{constructor(e){super(e),Gn(this,"state",{isLoaded:!1,isError:!1,toc:[]}),Gn(this,"viewerRef",ae.createRef()),Gn(this,"location"),Gn(this,"book"),Gn(this,"rendition"),Gn(this,"prevPage"),Gn(this,"nextPage"),Gn(this,"onLocationChange",r=>{const{location:n,locationChanged:s}=this.props,i=`${r.start}`;n!==i&&(this.location=i,s&&s(i))}),Gn(this,"handleKeyPress",r=>{this.props.handleKeyPress||(r.key==="ArrowRight"&&this.nextPage&&this.nextPage(),r.key==="ArrowLeft"&&this.prevPage&&this.prevPage())}),this.location=e.location,this.book=this.rendition=this.prevPage=this.nextPage=void 0}componentDidMount(){this.initBook(),document.addEventListener("keyup",this.handleKeyPress,!1)}initBook(){const{url:e,tocChanged:r,epubInitOptions:n}=this.props;this.book&&this.book.destroy(),this.book=Oh(e,n),this.book.on("openFailed",s=>{this.setState({isError:!0})}),this.book.loaded.navigation.then(({toc:s})=>{this.setState({isLoaded:!0,isError:!1,toc:s},()=>{r&&r(s),this.initReader()})})}componentWillUnmount(){this.book&&this.book.destroy(),this.book=this.rendition=this.prevPage=this.nextPage=void 0,document.removeEventListener("keyup",this.handleKeyPress,!1)}shouldComponentUpdate(e){return!this.state.isLoaded||e.location!==this.props.location||e.url!==this.props.url}componentDidUpdate(e){var r;e.location!==this.props.location&&this.location!==this.props.location&&((r=this.rendition)==null||r.display(this.props.location+"")),e.url!==this.props.url&&this.initBook()}initReader(){const{toc:e}=this.state,{location:r,epubOptions:n,getRendition:s}=this.props;if(this.viewerRef.current){const i=this.viewerRef.current;if(this.book){const o=this.book.renderTo(i,{width:"100%",height:"100%",...n});this.rendition=o,this.prevPage=()=>{o.prev()},this.nextPage=()=>{o.next()},this.registerEvents(),s&&s(o),typeof r=="string"||typeof r=="number"?o.display(r+""):e.length>0&&e[0].href?o.display(e[0].href):o.display()}}}registerEvents(){const{handleKeyPress:e,handleTextSelected:r}=this.props;this.rendition&&(this.rendition.on("locationChanged",this.onLocationChange),this.rendition.on("keyup",e||this.handleKeyPress),r&&this.rendition.on("selected",r))}renderBook(){const{epubViewStyles:e=oF}=this.props;return a.jsx("div",{ref:this.viewerRef,style:e.view})}render(){const{isLoaded:e,isError:r}=this.state,{loadingView:n=null,errorView:s=null,epubViewStyles:i=oF}=this.props;return a.jsxs("div",{style:i.viewHolder,children:[e&&this.renderBook(),!e&&!r&&n,!e&&r&&s]})}}const kS={container:{overflow:"hidden",position:"relative",height:"100%"},readerArea:{position:"relative",zIndex:1,height:"100%",width:"100%",backgroundColor:"#fff",transition:"all .3s ease"},containerExpanded:{transform:"translateX(256px)"},titleArea:{position:"absolute",top:20,left:50,right:50,textAlign:"center",color:"#999"},reader:{position:"absolute",top:50,left:50,bottom:20,right:50},swipeWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:200},prev:{left:1},next:{right:1},arrow:{outline:"none",border:"none",background:"none",position:"absolute",top:"50%",marginTop:-32,fontSize:64,padding:"0 10px",color:"#E2E2E2",fontFamily:"arial, sans-serif",cursor:"pointer",userSelect:"none",appearance:"none",fontWeight:"normal"},arrowHover:{color:"#777"},toc:{},tocBackground:{position:"absolute",left:256,top:0,bottom:0,right:0,zIndex:1},tocArea:{position:"absolute",left:0,top:0,bottom:0,zIndex:0,width:256,overflowY:"auto",WebkitOverflowScrolling:"touch",background:"#f2f2f2",padding:"10px 0"},tocAreaButton:{userSelect:"none",appearance:"none",background:"none",border:"none",display:"block",fontFamily:"sans-serif",width:"100%",fontSize:".9em",textAlign:"left",padding:".9em 1em",borderBottom:"1px solid #ddd",color:"#aaa",boxSizing:"border-box",outline:"none",cursor:"pointer"},tocButton:{background:"none",border:"none",width:32,height:32,position:"absolute",top:10,left:10,borderRadius:2,outline:"none",cursor:"pointer"},tocButtonExpanded:{background:"#f2f2f2"},tocButtonBar:{position:"absolute",width:"60%",background:"#ccc",height:2,left:"50%",margin:"-1px -30%",top:"50%",transition:"all .5s ease"},tocButtonBarTop:{top:"35%"},tocButtonBottom:{top:"66%"},loadingView:{position:"absolute",top:"50%",left:"10%",right:"10%",color:"#ccc",textAlign:"center",marginTop:"-.5em"},errorView:{position:"absolute",top:"50%",left:"10%",right:"10%",color:"#c00",textAlign:"center",marginTop:"-.5em"}},Wnt=({children:t,swipeProps:e})=>{const r=Gnt(e);return a.jsx("div",{style:{height:"100%"},...r,children:t})},_J=({data:t,setLocation:e,styles:r})=>a.jsxs("div",{children:[a.jsx("button",{onClick:()=>e(t.href),style:r,children:t.label}),t.subitems&&t.subitems.length>0&&a.jsx("div",{style:{paddingLeft:10},children:t.subitems.map((n,s)=>a.jsx(_J,{data:n,styles:r,setLocation:e},s))})]});class Xnt extends N.PureComponent{constructor(e){super(e),Gn(this,"state",{isLoaded:!1,expandedToc:!1,toc:[]}),Gn(this,"readerRef",ae.createRef()),Gn(this,"toggleToc",()=>{this.setState({expandedToc:!this.state.expandedToc})}),Gn(this,"next",()=>{const r=this.readerRef.current;r&&r.nextPage&&r.nextPage()}),Gn(this,"prev",()=>{const r=this.readerRef.current;r&&r.prevPage&&r.prevPage()}),Gn(this,"onTocChange",r=>{const{tocChanged:n}=this.props;this.setState({toc:r},()=>n&&n(r))}),Gn(this,"setLocation",r=>{const{locationChanged:n}=this.props;this.setState({expandedToc:!1},()=>n&&n(r))}),Gn(this,"handleWheel",r=>{var n,s;r.preventDefault();const i=this.readerRef.current;i&&(r.deltaY>0?(n=i.nextPage)==null||n.call(i):r.deltaY<0&&((s=i.prevPage)==null||s.call(i)))}),Gn(this,"attachWheelListener",()=>{if(!this.readerRef.current)return;const r=this.readerRef.current.rendition;r&&r.hooks.content.register(n=>{const s=n.window.document;s.removeEventListener("wheel",this.handleWheel),s.addEventListener("wheel",this.handleWheel,{passive:!1})})}),Gn(this,"searchInBook",async r=>{var n,s,i,o,l;if(!this.readerRef.current)return;const c=(n=this.readerRef.current)==null?void 0:n.rendition,d=c==null?void 0:c.book;if(!d)return;if(!r){(i=(s=this.props).onSearchResults)==null||i.call(s,[]);return}await d.ready;const u=[],h=[];d.spine.each(f=>{const g=(async()=>{try{await f.load(d.load.bind(d));const x=f.document,m=[],p=x.createTreeWalker(x,NodeFilter.SHOW_TEXT,null,!1);let b;for(;b=p.nextNode();)m.push(b);const v=m.map(k=>k.textContent).join("").toLowerCase(),y=r.toLowerCase();let w=v.indexOf(y);for(;w!==-1;){let k=0,j=w;for(;k<m.length;){const _=m[k].textContent||"";if(j<_.length)break;j-=_.length,k++}if(k<m.length){let _=x.createRange();try{_.setStart(m[k],j),_.setEnd(m[k],j+y.length);const S=f.cfiFromRange(_),A=`${v.substring(Math.max(0,w-(this.props.contextLength||15)),w+y.length+(this.props.contextLength||15))}`;u.push({cfi:S,excerpt:A})}catch(S){console.warn("Skipping invalid range:",S)}}w=v.indexOf(y,w+1)}f.unload()}catch(x){console.error("Error searching chapter:",x)}})();h.push(g)}),await Promise.all(h),r==this.props.searchQuery&&((l=(o=this.props).onSearchResults)==null||l.call(o,u))})}renderToc(){const{toc:e,expandedToc:r}=this.state,{readerStyles:n=kS}=this.props;return a.jsxs("div",{children:[a.jsx("div",{style:n.tocArea,children:a.jsx("div",{style:n.toc,children:e.map((s,i)=>a.jsx(_J,{data:s,setLocation:this.setLocation,styles:n.tocAreaButton},i))})}),r&&a.jsx("div",{style:n.tocBackground,onClick:this.toggleToc})]})}renderTocToggle(){const{expandedToc:e}=this.state,{readerStyles:r=kS}=this.props;return a.jsxs("button",{style:Object.assign({},r.tocButton,e?r.tocButtonExpanded:{}),onClick:this.toggleToc,children:[a.jsx("span",{style:Object.assign({},r.tocButtonBar,r.tocButtonBarTop)}),a.jsx("span",{style:Object.assign({},r.tocButtonBar,r.tocButtonBottom)})]})}componentDidUpdate(e){e.searchQuery!==this.props.searchQuery&&this.searchInBook(this.props.searchQuery),this.props.pageTurnOnScroll===!0&&this.attachWheelListener()}render(){const{title:e,showToc:r=!0,loadingView:n,errorView:s,readerStyles:i=kS,locationChanged:o,swipeable:l,epubViewStyles:c,isRTL:d=!1,pageTurnOnScroll:u=!1,searchQuery:h,contextLength:f,...g}=this.props,{toc:x,expandedToc:m}=this.state;return a.jsxs("div",{style:i.container,children:[a.jsxs("div",{style:Object.assign({},i.readerArea,m?i.containerExpanded:{}),children:[r&&this.renderTocToggle(),a.jsx("div",{style:i.titleArea,children:e}),a.jsx(Wnt,{swipeProps:{onSwiped:p=>{const{dir:b}=p;b==="Left"&&(d?this.prev():this.next()),b==="Right"&&(d?this.next():this.prev())},onTouchStartOrOnMouseDown:({event:p})=>p.preventDefault(),touchEventOptions:{passive:!1},preventScrollOnSwipe:!0,trackMouse:!0},children:a.jsxs("div",{style:i.reader,children:[a.jsx(Hnt,{ref:this.readerRef,loadingView:n===void 0?a.jsx("div",{style:i.loadingView,children:"Loading"}):n,errorView:s===void 0?a.jsx("div",{style:i.errorView,children:"Error loading book"}):s,epubViewStyles:c,...g,tocChanged:this.onTocChange,locationChanged:o}),l&&a.jsx("div",{style:i.swipeWrapper})]})}),a.jsx("button",{style:Object.assign({},i.arrow,i.prev),onClick:d?this.next:this.prev,children:""}),a.jsx("button",{style:Object.assign({},i.arrow,i.next),onClick:d?this.prev:this.next,children:""})]}),r&&x&&this.renderToc()]})}}const SJ=({url:t,title:e,location:r,onLocationChange:n})=>{const[s,i]=N.useState(100);return a.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-lg border border-gray-200 dark:border-gray-800",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white truncate",children:e}),a.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium text-gray-500",children:[a.jsxs("span",{children:["Textstorlek: ",s,"%"]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>i(o=>Math.max(80,o-10)),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",children:"-"}),a.jsx("button",{onClick:()=>i(o=>Math.min(200,o+10)),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",children:"+"})]})]})]}),a.jsx("div",{className:"flex-1 relative",children:a.jsx(Xnt,{url:t,title:e,location:r,locationChanged:n,getRendition:o=>{o.themes.fontSize(`${s}%`)},swipeable:!0,epubOptions:{flow:"paginated",manager:"default",allowScriptedContent:!0,allowPopups:!0,requestHeaders:{Authorization:`Bearer ${localStorage.getItem("token")}`}},loadingView:a.jsx("div",{className:"h-full flex items-center justify-center",children:"Laddar e-bok..."})})})]})},Ynt={calculator:rge,"book-open":gt,globe:zs,atom:Zfe,"flask-conical":fge,leaf:jge,landmark:vge,users:vt,map:uK,heart:Lr,cog:ige,code:sge,activity:hs,music:U0,palette:qu,hammer:pge,utensils:Hge,"message-circle":Yl,languages:kge,folder:fh,brain:Ki,lightbulb:Nge,scale:Rge,"trending-up":Sr,briefcase:$0,rocket:Dge,camera:c5,video:xi,stethoscope:$ge,star:ya,"graduation-cap":_d,zap:va,recycle:Oge,gavel:gge,component:oge,terminal:V0,search:gr,award:Mr},Lm=({iconName:t,color:e="#6366F1",size:r=20,className:n=""})=>{const s=Ynt[t]||fh;return a.jsx(s,{size:r,style:{color:e},className:n})},Znt=[{value:"BEGINNER",label:"Nybrjare"},{value:"INTERMEDIATE",label:"Medel"},{value:"ADVANCED",label:"Avancerad"}],Qnt=[{value:"F-3",label:"F-3"},{value:"4-6",label:"4-6"},{value:"7-9",label:"7-9"},{value:"GY",label:"Gymnasiet"},{value:"VUX",label:"Vuxenutbildning"}],wS=[{name:"MATEMATIK",displayName:"Matematik",iconName:"calculator",color:"#8B5CF6"},{name:"SVENSKA",displayName:"Svenska",iconName:"book-open",color:"#EC4899"},{name:"ENGELSKA",displayName:"Engelska",iconName:"globe",color:"#3B82F6"},{name:"FYSIK",displayName:"Fysik",iconName:"atom",color:"#F59E0B"},{name:"KEMI",displayName:"Kemi",iconName:"flask-conical",color:"#10B981"},{name:"BIOLOGI",displayName:"Biologi",iconName:"leaf",color:"#22C55E"},{name:"HISTORIA",displayName:"Historia",iconName:"landmark",color:"#A855F7"},{name:"SAMHALLSKUNSKAP",displayName:"Samhllskunskap",iconName:"users",color:"#6366F1"},{name:"GEOGRAFI",displayName:"Geografi",iconName:"map",color:"#14B8A6"},{name:"RELIGIONSKUNSKAP",displayName:"Religionskunskap",iconName:"heart",color:"#F43F5E"},{name:"PSYKOLOGI",displayName:"Psykologi",iconName:"brain",color:"#D946EF"},{name:"FILOSOFI",displayName:"Filosofi",iconName:"lightbulb",color:"#FACC15"},{name:"SOCIOLOGI",displayName:"Sociologi",iconName:"users",color:"#818CF8"},{name:"JURIDIK",displayName:"Juridik",iconName:"scale",color:"#64748B"},{name:"NATIONALEKONOMI",displayName:"Nationalekonomi",iconName:"trending-up",color:"#059669"},{name:"KRIMINOLOGI",displayName:"Kriminologi",iconName:"search",color:"#475569"},{name:"TEKNIK",displayName:"Teknik",iconName:"cog",color:"#64748B"},{name:"PROGRAMMERING",displayName:"Programmering",iconName:"code",color:"#0EA5E9"},{name:"WEBBUTVECKLING",displayName:"Webbutveckling",iconName:"globe",color:"#2563EB"},{name:"DATORTKNIK",displayName:"Dator- & ntverksteknik",iconName:"terminal",color:"#1E293B"},{name:"FORETAGSEKONOMI",displayName:"Fretagsekonomi",iconName:"briefcase",color:"#B45309"},{name:"ENTREPRENORSKAP",displayName:"Entreprenrskap",iconName:"rocket",color:"#F97316"},{name:"MARKNADSFRING",displayName:"Marknadsfring",iconName:"star",color:"#F43F5E"},{name:"MUSIK",displayName:"Musik",iconName:"music",color:"#D946EF"},{name:"BILD",displayName:"Bild",iconName:"palette",color:"#F97316"},{name:"FOTO",displayName:"Fotografisk bild",iconName:"camera",color:"#6366F1"},{name:"FILMPRODUKTION",displayName:"Filmproduktion",iconName:"video",color:"#EF4444"},{name:"TEATER",displayName:"Teater & Scen",iconName:"star",color:"#A855F7"},{name:"DANS",displayName:"Dans",iconName:"activity",color:"#EC4899"},{name:"SLOJD",displayName:"Sljd",iconName:"hammer",color:"#78716C"},{name:"IDROTT",displayName:"Idrott & Hlsa",iconName:"activity",color:"#EF4444"},{name:"MEDICIN",displayName:"Medicin",iconName:"stethoscope",color:"#F43F5E"},{name:"VARD_OMSORG",displayName:"Vrd & Omsorg",iconName:"heart",color:"#F43F5E"},{name:"ANATOMI",displayName:"Anatomi & Fysiologi",iconName:"activity",color:"#EF4444"},{name:"HEM_KONSUMENTKUNSKAP",displayName:"Hem- & konsumentkunskap",iconName:"utensils",color:"#84CC16"},{name:"NATURKUNSKAP",displayName:"Naturkunskap",iconName:"zap",color:"#FBBF24"},{name:"PEDAGOGIK",displayName:"Pedagogik",iconName:"graduation-cap",color:"#8B5CF6"},{name:"SPANSKA",displayName:"Spanska",iconName:"message-circle",color:"#F59E0B"},{name:"FRANSKA",displayName:"Franska",iconName:"message-circle",color:"#3B82F6"},{name:"TYSKA",displayName:"Tyska",iconName:"message-circle",color:"#EF4444"},{name:"MODERSMAL",displayName:"Modersml",iconName:"languages",color:"#06B6D4"},{name:"SPRAK_ANNAT",displayName:"Annat Sprk",iconName:"languages",color:"#8B5CF6"},{name:"OVRIGT",displayName:"vrigt",iconName:"folder",color:"#94A3B8"}],Jnt=t=>{var i,o;const e=t.split(`
`).filter(l=>l.trim());if(e.length<2)return{questions:[],error:"CSV mste ha minst en rubrikrad och en frga"};const r=[],s=e[0].toLowerCase().includes(";")?";":",";for(let l=1;l<e.length;l++){const c=e[l].trim();if(!c)continue;const d=eat(c,s);if(d.length<2)continue;const u=(i=d[0])==null?void 0:i.trim();if(!u)continue;const h=(o=d[d.length-1])==null?void 0:o.trim(),f=parseInt(h);let g=[],x=0;if(!isNaN(f)&&f>=0&&f<d.length-2)g=d.slice(1,-1).map(m=>m.trim()).filter(m=>m),x=f;else{g=d.slice(1).map(p=>p.trim()).filter(p=>p),x=0;const m=g[0];g=tat([...g]),x=g.indexOf(m)}g.length>=2&&r.push({text:u,options:g.map((m,p)=>({text:m,isCorrect:p===x})),type:"MULTIPLE_CHOICE"})}return r.length===0?{questions:[],error:"Kunde inte tolka ngra frgor frn CSV-filen. Kontrollera formatet."}:{questions:r,error:null}},eat=(t,e=",")=>{const r=[];let n="",s=!1;for(let i=0;i<t.length;i++){const o=t[i];o==='"'?s=!s:o===e&&!s?(r.push(n),n=""):n+=o}return r.push(n),r.map(i=>i.replace(/^"|"$/g,"").trim())},tat=t=>{const e=[...t];for(let r=e.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[e[r],e[n]]=[e[n],e[r]]}return e},II=({onClose:t,onPublished:e,userId:r,initialType:n=null,initialItemId:s=null,isEditMode:i=!1,editItemId:o=null})=>{var H;const[l,c]=N.useState(s&&n?2:1),[d,u]=N.useState(s?"existing":null),[h,f]=N.useState(n||"QUIZ"),[g,x]=N.useState(!1),[m,p]=N.useState(!1),[b,v]=N.useState(wS),[y,w]=N.useState(null),[k,j]=N.useState([]),[_,S]=N.useState(null),[A,T]=N.useState(""),E=N.useRef(null),[C,z]=N.useState([]),[M,F]=N.useState(null),[D,L]=N.useState({subject:"",difficulty:"INTERMEDIATE",gradeLevel:"7-9",description:"",tags:[]}),[K,$]=N.useState("");N.useEffect(()=>{Y()},[]),N.useEffect(()=>{d==="existing"&&!s&&ee()},[d,h,s]),N.useEffect(()=>{s&&n&&(F({id:s,name:"Laddar..."}),(async()=>{var te;try{let ge;if(i){if(ge=await O.community.getItem(o),ge){F({id:ge.originalId||ge.id,title:ge.title,description:ge.description,questions:(te=ge.metadata)!=null&&te.questionCount?new Array(ge.metadata.questionCount):[]}),L({subject:ge.subject,difficulty:ge.difficulty||"INTERMEDIATE",gradeLevel:ge.gradeLevel||"7-9",description:ge.description||"",tags:ge.tags||[]});return}}else if(n==="QUIZ")ge=await O.quiz.get(s);else if(n==="RESOURCE")ge=await O.resources.getOne(s);else if(n==="ASSIGNMENT")ge=await O.assignments.getOne(s);else if(n==="LESSON")try{ge=await O.lessons.getOne(s)}catch{console.warn("Material not found, falling back to resources API"),ge=await O.resources.getOne(s)}if(ge){F(ge);const Ce=ge.title||ge.name||"",Le=ge.description||ge.content||"";L(He=>({...He,description:Le.substring(0,500),tags:ge.tags||[]})),i||R(Ce,Le)}}catch(ge){console.error("Failed to fetch initial item details:",ge)}})())},[s,n,i,o]);const R=(Z,te)=>{const ge=(Z+" "+te).toUpperCase(),Ce={MATEMATIK:["MATTE","TAL","GEOMETRI","ALGEBRA","KVADRAT","CALCULATOR","FORMLER","EKVATION"],SVENSKA:["LITTERATUR","GRAMMATIK","NOVELL","ANALYS","BOOKS","SKRIVA","LASA"],ENGELSKA:["ENGLISH","VOCABULARY","GRAMMAR","BRITISH","AMERICAN","SHAKESPEARE"],FYSIK:["KRAFT","ENERGI","ATOM","LJUS","SPEED","PHYSICS","ELEKTRICITET"],KEMI:["MOLEKYL","SYRA","BAS","PERIODISKA","CHEMISTRY","REAKTION"],BIOLOGI:["CELL","DJUR","VXT","NATUR","FOTOSYNTES","KROPPEN","BIOLOGY","DNA"],HISTORIA:["KRIG","KUNG","EPOK","REVOLUTION","MEDELTID","HISTORY","FORNTID"],SAMHALLSKUNSKAP:["POLITIK","DEMOKRATI","SAMHALLE","STATEN","RATTIGHETER"],GEOGRAFI:["KARTA","LANDER","STADER","GEOGRAPHY","KLIMAT","BEFOLKNING"],PSYKOLOGI:["FREUD","BETEENDE","KOGNITION","PSYCHOLOGY","HJARNAN","KOLA","TRAUMA"],FILOSOFI:["SOKRATES","ETIK","MORAL","LOGIK","FILOSOFI","PHILOSOPHY","TNKANDE"],JURIDIK:["LAG","RATT","DOMSTOL","PARAGRAF","BROTT","AVTAL","JURIDIK"],NATIONALEKONOMI:["INFLATION","BNP","MARKNAD","RANTAN","UTBUD","EFTERFRAGAN","EKONOMI"],FORETAGSEKONOMI:["BOKFORING","FRETAG","BUDGET","KALKYL","MARKNADSFRING"],TEKNIK:["KONSTRUKTION","UPPFINNING","DATA","MASKIN","TECHNOLOGY","INGENJOR"],PROGRAMMERING:["CODE","JAVASCRIPT","PYTHON","JAVA","ALGORITM","CODING","REACT","HTML","CSS"],MEDICIN:["LAKARE","SJUKDOM","MEDICIN","SYMTOM","BEHANDLING","KLINIK"],MARKNADSFRING:["REKLAM","VARUMARKE","SOCIALA MEDIER","ANNONS","KUNDER"],VARD_OMSORG:["OMVARDNAD","PATIENT","ETIK","ALDRANDE","SJUKSKOTERSKA"]};for(const[le,Re]of Object.entries(Ce))if(Re.some(Ze=>ge.includes(Ze))||ge.includes(le)){L(Ze=>({...Ze,subject:le}));break}const He=["digitalt","prov","vning","lra-knna","instudering","AI-genererad"].filter(le=>ge.includes(le.toUpperCase()));He.length>0&&L(le=>({...le,tags:[...new Set([...le.tags,...He])]}))},Y=async()=>{try{const Z=await O.community.getSubjects();Array.isArray(Z)&&Z.length>0?v(Z):(console.warn("API returned empty subjects, using fallback"),v(wS))}catch(Z){console.error("Failed to load subjects, using fallback:",Z),v(wS)}},ee=async()=>{x(!0);try{let Z=[];if(h==="QUIZ")Z=await O.quiz.getMy(r);else if(h==="LESSON"){const[te,ge]=await Promise.all([O.lessons.getMy(r),O.resources.getMy(r)]),Ce=(ge||[]).filter(Le=>Le.type==="LESSON").map(Le=>({id:Le.id,title:Le.name,description:Le.description,isResource:!0,type:"LESSON"}));Z=[...te||[],...Ce]}else h==="ASSIGNMENT"&&(Z=await O.assignments.getMy(r));z(Array.isArray(Z)?Z:[])}catch(Z){console.error(`Failed to load ${h.toLowerCase()}s:`,Z),z([])}finally{x(!1)}},B=async Z=>{var ge;const te=(ge=Z.target.files)==null?void 0:ge[0];if(te){w(te),S(null),j([]);try{const Ce=await te.text(),{questions:Le,error:He}=Jnt(Ce);if(He)S(He);else{j(Le);const le=te.name.replace(/\.[^/.]+$/,"");A||T(le.replace(/[-_]/g," "))}}catch(Ce){S("Kunde inte lsa filen: "+Ce.message)}}},U=Z=>{F(Z),Z.description&&L(te=>({...te,description:Z.description}))},V=()=>{const Z=K.trim().toLowerCase().replace(/[^a-z0-9]/g,"");Z&&!D.tags.includes(Z)&&D.tags.length<5&&(L(te=>({...te,tags:[...te.tags,Z]})),$(""))},se=Z=>{L(te=>({...te,tags:te.tags.filter(ge=>ge!==Z)}))},Ne=async()=>{if(D.subject){p(!0);try{const Z={subject:D.subject,difficulty:D.difficulty,gradeLevel:D.gradeLevel,publicDescription:D.description,tags:D.tags};let te;if(i)O.community.update?te=await O.community.update(o,Z):te=await O.put(`/community/items/${o}`,Z);else if(d==="csv"){const ge={title:A,description:D.description,questions:k,timeLimit:null,passingScore:70},Ce=await O.quiz.createGlobal(r,ge);te=await O.community.publishQuiz(Ce.id,Z)}else h==="QUIZ"?te=await O.community.publishQuiz(M.id,Z):h==="LESSON"||h==="RESOURCE"?te=await O.community.publishLesson(M.id,Z):h==="ASSIGNMENT"&&(te=await O.community.publishAssignment(M.id,Z));e==null||e(te),t()}catch(Z){console.error("Failed to publish/update:",Z),alert("Kunde inte spara: "+Z.message)}finally{p(!1)}}},ie=d==="csv"?k.length>0&&A.trim().length>=3&&D.subject:M!==null,q=D.subject&&D.description.trim().length>=10&&(d==="csv"?k.length>0&&A.trim():M);return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:t,children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-2xl max-h-[90vh] overflow-hidden rounded-2xl shadow-2xl animate-in zoom-in-95",onClick:Z=>Z.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:i?"Redigera publicering":"Dela i Community"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:i?"Uppdatera metadata":`Steg ${l} av 2: ${l===1?"Vlj innehll":"Metadata & publicering"}`})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-lg transition-colors",children:a.jsx(Je,{className:"text-gray-500",size:20})})]}),!i&&a.jsx("div",{className:"mt-4 h-1 bg-gray-100 dark:bg-[#282a2c] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:l===1?"50%":"100%"}})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:l===1&&!i?a.jsx(rat,{mode:d,setMode:u,contentType:h,setContentType:f,csvFile:y,parsedQuestions:k,csvError:_,quizTitle:A,setQuizTitle:T,fileInputRef:E,handleFileChange:B,subjects:b,formData:D,setFormData:L,items:C,selectedItem:M,onSelectItem:U,loading:g,setStep:c}):a.jsx(nat,{mode:d,contentType:h,selectedItem:M,quizTitle:A,questionCount:d==="csv"?k.length:((H=M==null?void 0:M.questions)==null?void 0:H.length)||0,subjects:b,formData:D,setFormData:L,tagInput:K,setTagInput:$,onAddTag:V,onRemoveTag:se,isEditMode:i})}),a.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-[#3c4043] flex justify-between",children:[l===2&&!i?a.jsxs("button",{onClick:()=>c(1),className:"flex items-center gap-2 px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-lg transition-colors",children:[a.jsx(Ho,{size:20}),"Tillbaka"]}):a.jsx("div",{}),l===1&&!i?a.jsxs("button",{onClick:()=>c(2),disabled:!ie,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:["Nsta",a.jsx(or,{size:20})]}):a.jsx("button",{onClick:Ne,disabled:!q||m,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:m?a.jsxs(a.Fragment,{children:[a.jsx(ft,{className:"animate-spin",size:20}),i?"Sparar...":"Skickar..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Wr,{size:20}),i?"Spara ndringar":"Skicka fr granskning"]})})]})]})})},rat=({mode:t,setMode:e,contentType:r,setContentType:n,csvFile:s,parsedQuestions:i,csvError:o,quizTitle:l,setQuizTitle:c,fileInputRef:d,handleFileChange:u,subjects:h,formData:f,setFormData:g,items:x,selectedItem:m,onSelectItem:p,loading:b,setStep:v})=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Vad vill du gra idag?"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>{e("csv"),n("QUIZ")},className:`group relative p-5 rounded-2xl border-2 transition-all text-left overflow-hidden ${t==="csv"?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-900/20":"border-gray-100 dark:border-[#3c4043] hover:border-indigo-200 dark:hover:border-indigo-900/40 bg-white dark:bg-[#1E1F20]"}`,children:[a.jsx("div",{className:`p-3 rounded-xl mb-4 w-fit transition-colors ${t==="csv"?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-[#282a2c] text-gray-400 group-hover:text-indigo-500"}`,children:a.jsx(Xa,{size:24})}),a.jsx("p",{className:`font-bold text-lg ${t==="csv"?"text-indigo-900 dark:text-white":"text-gray-900 dark:text-gray-100"}`,children:"Ladda upp CSV"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Importera frgor till Frgebanken via fil (CSV/TXT)"}),t==="csv"&&a.jsx("div",{className:"absolute top-4 right-4 text-indigo-600",children:a.jsx(Gr,{size:20,strokeWidth:3})})]}),a.jsxs("button",{onClick:()=>{e("existing"),n("QUIZ")},className:`group relative p-5 rounded-2xl border-2 transition-all text-left overflow-hidden ${t==="existing"&&r==="QUIZ"?"border-purple-500 bg-purple-50/50 dark:bg-purple-900/20":"border-gray-100 dark:border-[#3c4043] hover:border-purple-200 dark:hover:border-purple-900/40 bg-white dark:bg-[#1E1F20]"}`,children:[a.jsx("div",{className:`p-3 rounded-xl mb-4 w-fit transition-colors ${t==="existing"&&r==="QUIZ"?"bg-purple-600 text-white":"bg-gray-100 dark:bg-[#282a2c] text-gray-400 group-hover:text-purple-500"}`,children:a.jsx(Ku,{size:24})}),a.jsx("p",{className:`font-bold text-lg ${t==="existing"&&r==="QUIZ"?"text-purple-900 dark:text-white":"text-gray-900 dark:text-gray-100"}`,children:"Publicera Quiz"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Dela ett befintligt quiz frn ditt personliga bibliotek"}),t==="existing"&&r==="QUIZ"&&a.jsx("div",{className:"absolute top-4 right-4 text-purple-600",children:a.jsx(Gr,{size:20,strokeWidth:3})})]}),a.jsxs("button",{onClick:()=>{e("existing"),n("LESSON")},className:`group relative p-5 rounded-2xl border-2 transition-all text-left overflow-hidden ${t==="existing"&&r==="LESSON"?"border-emerald-500 bg-emerald-50/50 dark:bg-emerald-900/20":"border-gray-100 dark:border-[#3c4043] hover:border-emerald-200 dark:hover:border-emerald-900/40 bg-white dark:bg-[#1E1F20]"}`,children:[a.jsx("div",{className:`p-3 rounded-xl mb-4 w-fit transition-colors ${t==="existing"&&r==="LESSON"?"bg-emerald-600 text-white":"bg-gray-100 dark:bg-[#282a2c] text-gray-400 group-hover:text-emerald-500"}`,children:a.jsx(gt,{size:24})}),a.jsx("p",{className:`font-bold text-lg ${t==="existing"&&r==="LESSON"?"text-emerald-900 dark:text-white":"text-gray-900 dark:text-gray-100"}`,children:"Publicera Lektion"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Dela en lektion eller material frn Resursbanken"}),t==="existing"&&r==="LESSON"&&a.jsx("div",{className:"absolute top-4 right-4 text-emerald-600",children:a.jsx(Gr,{size:20,strokeWidth:3})})]}),a.jsxs("button",{onClick:()=>{e("existing"),n("ASSIGNMENT")},className:`group relative p-5 rounded-2xl border-2 transition-all text-left overflow-hidden ${t==="existing"&&r==="ASSIGNMENT"?"border-amber-500 bg-amber-50/50 dark:bg-amber-900/20":"border-gray-100 dark:border-[#3c4043] hover:border-amber-200 dark:hover:border-amber-900/40 bg-white dark:bg-[#1E1F20]"}`,children:[a.jsx("div",{className:`p-3 rounded-xl mb-4 w-fit transition-colors ${t==="existing"&&r==="ASSIGNMENT"?"bg-amber-600 text-white":"bg-gray-100 dark:bg-[#282a2c] text-gray-400 group-hover:text-amber-500"}`,children:a.jsx(Va,{size:24})}),a.jsx("p",{className:`font-bold text-lg ${t==="existing"&&r==="ASSIGNMENT"?"text-amber-900 dark:text-white":"text-gray-900 dark:text-gray-100"}`,children:"Publicera Uppgift"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Dela en hemuppgift eller inlmning till communityt"}),t==="existing"&&r==="ASSIGNMENT"&&a.jsx("div",{className:"absolute top-4 right-4 text-amber-600",children:a.jsx(Gr,{size:20,strokeWidth:3})})]})]})]}),t==="csv"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium text-gray-900 dark:text-white mb-2",children:"CSV-fil med frgor *"}),a.jsx("input",{ref:d,type:"file",accept:".csv,.txt",onChange:u,className:"hidden"}),a.jsx("button",{onClick:()=>{var y;return(y=d.current)==null?void 0:y.click()},className:"w-full p-6 border-2 border-dashed border-gray-300 dark:border-[#3c4043] rounded-xl hover:border-indigo-400 dark:hover:border-indigo-500 transition-colors",children:s?a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx(oK,{className:"text-indigo-600",size:24}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),a.jsxs("p",{className:"text-sm text-green-600",children:[i.length," frgor identifierade"]})]})]}):a.jsxs("div",{className:"text-center",children:[a.jsx(Xa,{className:"mx-auto text-gray-400 mb-2",size:32}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Klicka fr att vlja CSV-fil"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Format: frga, rtt svar, fel1, fel2, fel3"})]})}),o&&a.jsxs("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-2",children:[a.jsx(Er,{className:"text-red-600 shrink-0 mt-0.5",size:16}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:o})]})]}),i.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium text-gray-900 dark:text-white mb-2",children:"Quiz-titel *"}),a.jsx("input",{type:"text",value:l,onChange:y=>c(y.target.value),placeholder:"T.ex. Algebra Grundkurs",className:"w-full px-4 py-3 bg-white dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium text-gray-900 dark:text-white mb-2",children:"mne *"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 max-h-64 overflow-y-auto p-1 custom-scrollbar",children:h.map(y=>a.jsxs("button",{onClick:()=>g(w=>({...w,subject:y.name})),className:`flex items-center gap-2 p-2 rounded-lg border transition-all ${f.subject===y.name?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-[#3c4043] hover:border-gray-300"}`,children:[a.jsx(Lm,{iconName:y.iconName,color:y.color,size:16}),a.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 truncate",children:y.displayName})]},y.name))})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-[#282a2c] rounded-xl p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Frhandsgranskning"}),a.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[i.slice(0,5).map((y,w)=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[a.jsxs("span",{className:"font-medium text-indigo-600",children:["#",w+1]})," ",y.text]}),a.jsxs("p",{className:"text-xs text-gray-500 ml-4",children:[y.options.length," svarsalternativ"]})]},w)),i.length>5&&a.jsxs("p",{className:"text-xs text-gray-400 italic",children:["...och ",i.length-5," fler frgor"]})]})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:[a.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"CSV-format"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:"Varje rad ska innehlla: frga, rtt svar, fel svar 1, fel svar 2, fel svar 3"}),a.jsxs("code",{className:"block text-xs bg-blue-100 dark:bg-blue-900/40 p-2 rounded font-mono text-blue-800 dark:text-blue-200",children:["Vad r 2+2?,4,3,5,6",a.jsx("br",{}),"Huvudstad i Sverige?,Stockholm,Gteborg,Malm,Uppsala"]})]})]}),t==="existing"&&a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-3",children:["Vlj ",r==="QUIZ"?"quiz":r==="LESSON"?"lektion":"uppgift"," att dela"]}),b?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:32})}):x.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r==="QUIZ"?a.jsx(Ku,{className:"mx-auto mb-2 text-gray-300",size:48}):r==="LESSON"?a.jsx(gt,{className:"mx-auto mb-2 text-gray-300",size:48}):a.jsx(Va,{className:"mx-auto mb-2 text-gray-300",size:48}),a.jsxs("p",{children:["Du har inga ",r==="QUIZ"?"quiz":r==="LESSON"?"lektioner":"uppgifter"," att dela."]}),a.jsx("p",{className:"text-sm mt-1",children:"Skapa frst i Resursbanken."})]}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:x.map(y=>{var w;return a.jsx("button",{onClick:()=>p(y),className:`w-full text-left p-4 rounded-xl border-2 transition-all ${(m==null?void 0:m.id)===y.id?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-[#3c4043] hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:y.title}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[r==="QUIZ"&&`${((w=y.questions)==null?void 0:w.length)||0} frgor`,r==="LESSON"&&"Lektion",r==="ASSIGNMENT"&&"Uppgift",y.description&&`  ${y.description.substring(0,50)}...`]})]}),(m==null?void 0:m.id)===y.id&&a.jsx(Gr,{className:"text-indigo-600",size:20})]})},y.id)})})]})]}),nat=({mode:t,contentType:e,selectedItem:r,quizTitle:n,questionCount:s,subjects:i,formData:o,setFormData:l,tagInput:c,setTagInput:d,onAddTag:u,onRemoveTag:h,isEditMode:f})=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-4 flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${e==="QUIZ"?"bg-purple-100 dark:bg-purple-900/30 text-purple-600":e==="LESSON"?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600":"bg-amber-100 dark:bg-amber-900/30 text-amber-600"}`,children:e==="QUIZ"?a.jsx(Ku,{size:24}):e==="LESSON"?a.jsx(gt,{size:24}):a.jsx(Va,{size:24})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:t==="csv"?n:(r==null?void 0:r.title)||(r==null?void 0:r.name)}),a.jsxs("p",{className:"text-sm opacity-80",children:[e==="QUIZ"?`${s} frgor`:e==="LESSON"?"Lektion":"Uppgift","  ",t==="csv"?"Fristende (CSV)":f?"Redigerar befintlig":"Frn ditt bibliotek"]})]})]}),(t==="existing"||f)&&a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium text-gray-900 dark:text-white mb-2",children:"mne *"}),a.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto",children:i.map(g=>a.jsxs("button",{onClick:()=>l(x=>({...x,subject:g.name})),className:`flex items-center gap-2 p-2 rounded-lg border transition-all ${o.subject===g.name?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-[#3c4043] hover:border-gray-300"}`,children:[a.jsx(Lm,{iconName:g.iconName,color:g.color,size:16}),a.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 truncate",children:g.displayName})]},g.name))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium text-gray-900 dark:text-white mb-2",children:"Svrighetsgrad"}),a.jsx("select",{value:o.difficulty,onChange:g=>l(x=>({...x,difficulty:g.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-lg",children:Znt.map(({value:g,label:x})=>a.jsx("option",{value:g,children:x},g))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium text-gray-900 dark:text-white mb-2",children:"rskurs"}),a.jsx("select",{value:o.gradeLevel,onChange:g=>l(x=>({...x,gradeLevel:g.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-lg",children:Qnt.map(({value:g,label:x})=>a.jsx("option",{value:g,children:x},g))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium text-gray-900 dark:text-white mb-2",children:"Taggar (max 5)"}),a.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:o.tags.map(g=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-[#282a2c] rounded-full text-sm",children:[a.jsx(q0,{size:12,className:"text-gray-400"}),g,a.jsx("button",{onClick:()=>h(g),className:"ml-1 text-gray-400 hover:text-red-500",children:a.jsx(Je,{size:12})})]},g))}),o.tags.length<5&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:c,onChange:g=>d(g.target.value),onKeyDown:g=>g.key==="Enter"&&(g.preventDefault(),u()),placeholder:"Lgg till tagg...",className:"flex-1 px-3 py-2 bg-white dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-lg text-sm"}),a.jsx("button",{onClick:u,className:"px-3 py-2 bg-gray-100 dark:bg-[#3c4043] hover:bg-gray-200 dark:hover:bg-[#5f6368] rounded-lg transition-colors",children:a.jsx(jt,{size:20,className:"text-gray-600 dark:text-gray-300"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium text-gray-900 dark:text-white mb-2",children:"Beskrivning fr Community *"}),a.jsx("textarea",{value:o.description,onChange:g=>l(x=>({...x,description:g.target.value})),placeholder:"Beskriv vad andra lrare fr med detta quiz. Vad testar det? Vilka lrandeml uppfylls?",rows:4,className:"w-full px-3 py-2 bg-white dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-lg resize-none"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Minst 10 tecken (",o.description.length,"/10)"]})]}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:a.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[a.jsx("strong",{children:"Observera:"})," ",f?"Dina ndringar sparas direkt.":"Ditt quiz granskas av en administratr innan det publiceras i Community."]})})]}),ov="/social/comments",lv={getComments:async(t,e)=>O.get(`${ov}/${t}/${e}`),addComment:async(t,e,r,n=null)=>O.post(ov,{content:t,targetType:e,targetId:r,parentId:n}),deleteComment:async t=>O.delete(`${ov}/${t}`),likeComment:async t=>O.post(`${ov}/${t}/like`)},cv=43200,lF=1440,cF=Symbol.for("constructDateFrom");function DI(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&cF in t?t[cF](e):t instanceof Date?new t.constructor(e):new Date(e)}function Td(t,e){return DI(t,t)}let aat={};function sat(){return aat}function dF(t){const e=Td(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function MI(t,...e){const r=DI.bind(null,t||e.find(n=>typeof n=="object"));return e.map(r)}function Hv(t,e){const r=+Td(t)-+Td(e);return r<0?-1:r>0?1:r}function iat(t){return DI(t,Date.now())}function oat(t,e,r){const[n,s]=MI(r==null?void 0:r.in,t,e),i=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return i*12+o}function lat(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function cat(t,e){return+Td(t)-+Td(e)}function dat(t,e){const r=Td(t);return r.setHours(23,59,59,999),r}function uat(t,e){const r=Td(t),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function hat(t,e){const r=Td(t);return+dat(r)==+uat(r)}function fat(t,e,r){const[n,s,i]=MI(r==null?void 0:r.in,t,t,e),o=Hv(s,i),l=Math.abs(oat(s,i));if(l<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*l);let c=Hv(s,i)===-o;hat(n)&&l===1&&Hv(n,i)===1&&(c=!1);const d=o*(l-+c);return d===0?0:d}function gat(t,e,r){const n=cat(t,e)/1e3;return lat(r==null?void 0:r.roundingMethod)(n)}const mat={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pat=(t,e,r)=>{let n;const s=mat[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Jf(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const xat={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bat={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yat={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vat={date:Jf({formats:xat,defaultWidth:"full"}),time:Jf({formats:bat,defaultWidth:"full"}),dateTime:Jf({formats:yat,defaultWidth:"full"})},kat={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wat=(t,e,r,n)=>kat[t];function No(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const jat={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Nat={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_at={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Sat={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Aat={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Eat={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cat=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Tat={ordinalNumber:Cat,era:No({values:jat,defaultWidth:"wide"}),quarter:No({values:Nat,defaultWidth:"wide",argumentCallback:t=>t-1}),month:No({values:_at,defaultWidth:"wide"}),day:No({values:Sat,defaultWidth:"wide"}),dayPeriod:No({values:Aat,defaultWidth:"wide",formattingValues:Eat,defaultFormattingWidth:"wide"})};function _o(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Iat(l,h=>h.test(o)):Oat(l,h=>h.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function Oat(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Iat(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function AJ(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const Dat=/^(\d+)(th|st|nd|rd)?/i,Mat=/\d+/i,Lat={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Rat={any:[/^b/i,/^(a|c)/i]},Pat={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zat={any:[/1/i,/2/i,/3/i,/4/i]},$at={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fat={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Bat={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Uat={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Kat={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gat={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qat={ordinalNumber:AJ({matchPattern:Dat,parsePattern:Mat,valueCallback:t=>parseInt(t,10)}),era:_o({matchPatterns:Lat,defaultMatchWidth:"wide",parsePatterns:Rat,defaultParseWidth:"any"}),quarter:_o({matchPatterns:Pat,defaultMatchWidth:"wide",parsePatterns:zat,defaultParseWidth:"any",valueCallback:t=>t+1}),month:_o({matchPatterns:$at,defaultMatchWidth:"wide",parsePatterns:Fat,defaultParseWidth:"any"}),day:_o({matchPatterns:Bat,defaultMatchWidth:"wide",parsePatterns:Uat,defaultParseWidth:"any"}),dayPeriod:_o({matchPatterns:Kat,defaultMatchWidth:"any",parsePatterns:Gat,defaultParseWidth:"any"})},EJ={code:"en-US",formatDistance:pat,formatLong:vat,formatRelative:wat,localize:Tat,match:qat,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vat(t,e,r){const n=sat(),s=(r==null?void 0:r.locale)??n.locale??EJ,i=2520,o=Hv(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o}),[c,d]=MI(r==null?void 0:r.in,...o>0?[e,t]:[t,e]),u=gat(d,c),h=(dF(d)-dF(c))/1e3,f=Math.round((u-h)/60);let g;if(f<2)return r!=null&&r.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,l):u<10?s.formatDistance("lessThanXSeconds",10,l):u<20?s.formatDistance("lessThanXSeconds",20,l):u<40?s.formatDistance("halfAMinute",0,l):u<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):f===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",f,l);if(f<45)return s.formatDistance("xMinutes",f,l);if(f<90)return s.formatDistance("aboutXHours",1,l);if(f<lF){const x=Math.round(f/60);return s.formatDistance("aboutXHours",x,l)}else{if(f<i)return s.formatDistance("xDays",1,l);if(f<cv){const x=Math.round(f/lF);return s.formatDistance("xDays",x,l)}else if(f<cv*2)return g=Math.round(f/cv),s.formatDistance("aboutXMonths",g,l)}if(g=fat(d,c),g<12){const x=Math.round(f/cv);return s.formatDistance("xMonths",x,l)}else{const x=g%12,m=Math.trunc(g/12);return x<3?s.formatDistance("aboutXYears",m,l):x<9?s.formatDistance("overXYears",m,l):s.formatDistance("almostXYears",m+1,l)}}function Hat(t,e){return Vat(t,iat(t),e)}const Wat={lessThanXSeconds:{one:"mindre n en sekund",other:"mindre n {{count}} sekunder"},xSeconds:{one:"en sekund",other:"{{count}} sekunder"},halfAMinute:"en halv minut",lessThanXMinutes:{one:"mindre n en minut",other:"mindre n {{count}} minuter"},xMinutes:{one:"en minut",other:"{{count}} minuter"},aboutXHours:{one:"ungefr en timme",other:"ungefr {{count}} timmar"},xHours:{one:"en timme",other:"{{count}} timmar"},xDays:{one:"en dag",other:"{{count}} dagar"},aboutXWeeks:{one:"ungefr en vecka",other:"ungefr {{count}} veckor"},xWeeks:{one:"en vecka",other:"{{count}} veckor"},aboutXMonths:{one:"ungefr en mnad",other:"ungefr {{count}} mnader"},xMonths:{one:"en mnad",other:"{{count}} mnader"},aboutXYears:{one:"ungefr ett r",other:"ungefr {{count}} r"},xYears:{one:"ett r",other:"{{count}} r"},overXYears:{one:"ver ett r",other:"ver {{count}} r"},almostXYears:{one:"nstan ett r",other:"nstan {{count}} r"}},Xat=["noll","en","tv","tre","fyra","fem","sex","sju","tta","nio","tio","elva","tolv"],Yat=(t,e,r)=>{let n;const s=Wat[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e<13?Xat[e]:String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"om "+n:n+" sedan":n},Zat={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"y-MM-dd"},Qat={full:"'kl'. HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Jat={full:"{{date}} 'kl.' {{time}}",long:"{{date}} 'kl.' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},est={date:Jf({formats:Zat,defaultWidth:"full"}),time:Jf({formats:Qat,defaultWidth:"full"}),dateTime:Jf({formats:Jat,defaultWidth:"full"})},tst={lastWeek:"'i' EEEE's kl.' p",yesterday:"'igr kl.' p",today:"'idag kl.' p",tomorrow:"'imorgon kl.' p",nextWeek:"EEEE 'kl.' p",other:"P"},rst=(t,e,r,n)=>tst[t],nst={narrow:["f.Kr.","e.Kr."],abbreviated:["f.Kr.","e.Kr."],wide:["fre Kristus","efter Kristus"]},ast={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1:a kvartalet","2:a kvartalet","3:e kvartalet","4:e kvartalet"]},sst={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["jan.","feb.","mars","apr.","maj","juni","juli","aug.","sep.","okt.","nov.","dec."],wide:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"]},ist={narrow:["S","M","T","O","T","F","L"],short:["s","m","ti","on","to","fr","l"],abbreviated:["sn","mn","tis","ons","tors","fre","lr"],wide:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},ost={narrow:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"morg.",afternoon:"efterm.",evening:"kvll",night:"natt"},abbreviated:{am:"f.m.",pm:"e.m.",midnight:"midnatt",noon:"middag",morning:"morgon",afternoon:"efterm.",evening:"kvll",night:"natt"},wide:{am:"frmiddag",pm:"eftermiddag",midnight:"midnatt",noon:"middag",morning:"morgon",afternoon:"eftermiddag",evening:"kvll",night:"natt"}},lst={narrow:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"p morg.",afternoon:"p efterm.",evening:"p kvllen",night:"p natten"},abbreviated:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"p morg.",afternoon:"p efterm.",evening:"p kvllen",night:"p natten"},wide:{am:"fm",pm:"em",midnight:"midnatt",noon:"middag",morning:"p morgonen",afternoon:"p eftermiddagen",evening:"p kvllen",night:"p natten"}},cst=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:case 2:return r+":a"}return r+":e"},dst={ordinalNumber:cst,era:No({values:nst,defaultWidth:"wide"}),quarter:No({values:ast,defaultWidth:"wide",argumentCallback:t=>t-1}),month:No({values:sst,defaultWidth:"wide"}),day:No({values:ist,defaultWidth:"wide"}),dayPeriod:No({values:ost,defaultWidth:"wide",formattingValues:lst,defaultFormattingWidth:"wide"})},ust=/^(\d+)(:a|:e)?/i,hst=/\d+/i,fst={narrow:/^(f\.? ?Kr\.?|f\.? ?v\.? ?t\.?|e\.? ?Kr\.?|v\.? ?t\.?)/i,abbreviated:/^(f\.? ?Kr\.?|f\.? ?v\.? ?t\.?|e\.? ?Kr\.?|v\.? ?t\.?)/i,wide:/^(fre Kristus|fre vr tid|efter Kristus|vr tid)/i},gst={any:[/^f/i,/^[ev]/i]},mst={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](:a|:e)? kvartalet/i},pst={any:[/1/i,/2/i,/3/i,/4/i]},xst={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar[s]?|apr|maj|jun[i]?|jul[i]?|aug|sep|okt|nov|dec)\.?/i,wide:/^(januari|februari|mars|april|maj|juni|juli|augusti|september|oktober|november|december)/i},bst={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^maj/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yst={narrow:/^[smtofl]/i,short:/^(s|m|ti|on|to|fr|l)/i,abbreviated:/^(sn|mn|tis|ons|tors|fre|lr)/i,wide:/^(sndag|mndag|tisdag|onsdag|torsdag|fredag|lrdag)/i},vst={any:[/^s/i,/^m/i,/^ti/i,/^o/i,/^to/i,/^f/i,/^l/i]},kst={any:/^([fe]\.?\s?m\.?|midn(att)?|midd(ag)?|(p) (morgonen|eftermiddagen|kvllen|natten))/i},wst={any:{am:/^f/i,pm:/^e/i,midnight:/^midn/i,noon:/^midd/i,morning:/morgon/i,afternoon:/eftermiddag/i,evening:/kvll/i,night:/natt/i}},jst={ordinalNumber:AJ({matchPattern:ust,parsePattern:hst,valueCallback:t=>parseInt(t,10)}),era:_o({matchPatterns:fst,defaultMatchWidth:"wide",parsePatterns:gst,defaultParseWidth:"any"}),quarter:_o({matchPatterns:mst,defaultMatchWidth:"wide",parsePatterns:pst,defaultParseWidth:"any",valueCallback:t=>t+1}),month:_o({matchPatterns:xst,defaultMatchWidth:"wide",parsePatterns:bst,defaultParseWidth:"any"}),day:_o({matchPatterns:yst,defaultMatchWidth:"wide",parsePatterns:vst,defaultParseWidth:"any"}),dayPeriod:_o({matchPatterns:kst,defaultMatchWidth:"any",parsePatterns:wst,defaultParseWidth:"any"})},Nst={code:"sv",formatDistance:Yat,formatLong:est,formatRelative:rst,localize:dst,match:jst,options:{weekStartsOn:1,firstWeekContainsDate:4}};function _st(t,e){t.terminate=function(){const r=()=>{};this.onerror=r,this.onmessage=r,this.onopen=r;const n=new Date,s=Math.random().toString().substring(2,8),i=this.onclose;this.onclose=o=>{const l=new Date().getTime()-n.getTime();e(`Discarded socket (#${s})  closed after ${l}ms, with code/reason: ${o.code}/${o.reason}`)},this.close(),i==null||i.call(t,{code:4001,reason:`Quick discarding socket (#${s}) without waiting for the shutdown sequence.`,wasClean:!1})}}const Rp={LF:`
`,NULL:"\0"};class Uc{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(e){const{command:r,headers:n,body:s,binaryBody:i,escapeHeaderValues:o,skipContentLengthHeader:l}=e;this.command=r,this.headers=Object.assign({},n||{}),i?(this._binaryBody=i,this.isBinaryBody=!0):(this._body=s||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=l||!1}static fromRawFrame(e,r){const n={},s=i=>i.replace(/^\s+|\s+$/g,"");for(const i of e.headers.reverse()){i.indexOf(":");const o=s(i[0]);let l=s(i[1]);r&&e.command!=="CONNECT"&&e.command!=="CONNECTED"&&(l=Uc.hdrValueUnEscape(l)),n[o]=l}return new Uc({command:e.command,headers:n,binaryBody:e.binaryBody,escapeHeaderValues:r})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?Uc.toUnit8Array(e,this._binaryBody).buffer:e+this._body+Rp.NULL}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const r of Object.keys(this.headers||{})){const n=this.headers[r];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?e.push(`${r}:${Uc.hdrValueEscape(`${n}`)}`):e.push(`${r}:${n}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push(`content-length:${this.bodyLength()}`),e.join(Rp.LF)+Rp.LF+Rp.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?new TextEncoder().encode(e).length:0}static toUnit8Array(e,r){const n=new TextEncoder().encode(e),s=new Uint8Array([0]),i=new Uint8Array(n.length+r.length+s.length);return i.set(n),i.set(r,n.length),i.set(s,n.length+r.length),i}static marshall(e){return new Uc(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const uF=0,dv=10,uv=13,Sst=58;class Ast{constructor(e,r){this.onFrame=e,this.onIncomingPing=r,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,r=!1){let n;if(typeof e=="string"?n=this._encoder.encode(e):n=new Uint8Array(e),r&&n[n.length-1]!==0){const s=new Uint8Array(n.length+1);s.set(n,0),s[n.length]=0,n=s}for(let s=0;s<n.length;s++){const i=n[s];this._onByte(i)}}_collectFrame(e){if(e!==uF&&e!==uv){if(e===dv){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(e)}}_collectCommand(e){if(e!==uv){if(e===dv){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_collectHeaders(e){if(e!==uv){if(e===dv){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(e)}}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(e===Sst){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(e)}_collectHeaderValue(e){if(e!==uv){if(e===dv){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_setupCollectBody(){const e=this._results.headers.filter(r=>r[0]==="content-length")[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){if(e===uF){this._retrievedBody();return}this._consumeByte(e)}_collectBodyFixedSize(e){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(e)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(e){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",e)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Kc;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED"})(Kc||(Kc={}));var Di;(function(t){t[t.ACTIVE=0]="ACTIVE",t[t.DEACTIVATING=1]="DEACTIVATING",t[t.INACTIVE=2]="INACTIVE"})(Di||(Di={}));var k2;(function(t){t[t.LINEAR=0]="LINEAR",t[t.EXPONENTIAL=1]="EXPONENTIAL"})(k2||(k2={}));var Zx;(function(t){t.Interval="interval",t.Worker="worker"})(Zx||(Zx={}));class Est{constructor(e,r=Zx.Interval,n){this._interval=e,this._strategy=r,this._debug=n,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(e){this.stop(),this.shouldUseWorker()?this.runWorker(e):this.runInterval(e)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===Zx.Worker}runWorker(e){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=r=>e(r.data))}runInterval(e){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const r=Date.now();this._timer=setInterval(()=>{e(Date.now()-r)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class Ca{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(e=>`v${e.replace(".","")}.stomp`)}}Ca.V1_0="1.0";Ca.V1_1="1.1";Ca.V1_2="1.2";Ca.default=new Ca([Ca.V1_2,Ca.V1_1,Ca.V1_0]);class Cst{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(e,r,n){this._client=e,this._webSocket=r,this._connected=!1,this._serverFrameHandlers={CONNECTED:s=>{this.debug(`connected to server ${s.headers.server}`),this._connected=!0,this._connectedVersion=s.headers.version,this._connectedVersion===Ca.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(s.headers),this.onConnect(s)},MESSAGE:s=>{const i=s.headers.subscription,o=this._subscriptions[i]||this.onUnhandledMessage,l=s,c=this,d=this._connectedVersion===Ca.V1_2?l.headers.ack:l.headers["message-id"];l.ack=(u={})=>c.ack(d,i,u),l.nack=(u={})=>c.nack(d,i,u),o(l)},RECEIPT:s=>{const i=this._receiptWatchers[s.headers["receipt-id"]];i?(i(s),delete this._receiptWatchers[s.headers["receipt-id"]]):this.onUnhandledReceipt(s)},ERROR:s=>{this.onStompError(s)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=n.debug,this.stompVersions=n.stompVersions,this.connectHeaders=n.connectHeaders,this.disconnectHeaders=n.disconnectHeaders,this.heartbeatIncoming=n.heartbeatIncoming,this.heartbeatToleranceMultiplier=n.heartbeatGracePeriods,this.heartbeatOutgoing=n.heartbeatOutgoing,this.splitLargeFrames=n.splitLargeFrames,this.maxWebSocketChunkSize=n.maxWebSocketChunkSize,this.forceBinaryWSFrames=n.forceBinaryWSFrames,this.logRawCommunication=n.logRawCommunication,this.appendMissingNULLonIncoming=n.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=n.discardWebsocketOnCommFailure,this.onConnect=n.onConnect,this.onDisconnect=n.onDisconnect,this.onStompError=n.onStompError,this.onWebSocketClose=n.onWebSocketClose,this.onWebSocketError=n.onWebSocketError,this.onUnhandledMessage=n.onUnhandledMessage,this.onUnhandledReceipt=n.onUnhandledReceipt,this.onUnhandledFrame=n.onUnhandledFrame,this.onHeartbeatReceived=n.onHeartbeatReceived,this.onHeartbeatLost=n.onHeartbeatLost}start(){const e=new Ast(r=>{const n=Uc.fromRawFrame(r,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${n}`),(this._serverFrameHandlers[n.command]||this.onUnhandledFrame)(n)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=r=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const n=r.data instanceof ArrayBuffer?new TextDecoder().decode(r.data):r.data;this.debug(`<<< ${n}`)}e.parseChunk(r.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=r=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(r)},this._webSocket.onerror=r=>{this.onWebSocketError(r)},this._webSocket.onopen=()=>{const r=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),r["accept-version"]=this.stompVersions.supportedVersions(),r["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:r})}}_setupHeartbeat(e){if(e.version!==Ca.V1_1&&e.version!==Ca.V1_2||!e["heart-beat"])return;const[r,n]=e["heart-beat"].split(",").map(s=>parseInt(s,10));if(this.heartbeatOutgoing!==0&&n!==0){const s=Math.max(this.heartbeatOutgoing,n);this.debug(`send PING every ${s}ms`),this._pinger=new Est(s,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===Kc.OPEN&&(this._webSocket.send(Rp.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&r!==0){const s=Math.max(this.heartbeatIncoming,r);this.debug(`check PONG every ${s}ms`),this._ponger=setInterval(()=>{const i=Date.now()-this._lastServerActivityTS;i>s*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${i}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},s)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Kc.CONNECTING||this._webSocket.readyState===Kc.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&_st(this._webSocket,e=>this.debug(e)),this._webSocket.terminate()}_transmit(e){const{command:r,headers:n,body:s,binaryBody:i,skipContentLengthHeader:o}=e,l=new Uc({command:r,headers:n,body:s,binaryBody:i,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o});let c=l.serialize();if(this.logRawCommunication?this.debug(`>>> ${c}`):this.debug(`>>> ${l}`),this.forceBinaryWSFrames&&typeof c=="string"&&(c=new TextEncoder().encode(c)),typeof c!="string"||!this.splitLargeFrames)this._webSocket.send(c);else{let d=c;for(;d.length>0;){const u=d.substring(0,this.maxWebSocketChunkSize);d=d.substring(this.maxWebSocketChunkSize),this._webSocket.send(u),this.debug(`chunk sent = ${u.length}, remaining = ${d.length}`)}}}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt=`close-${this._counter++}`),this.watchForReceipt(e.receipt,r=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(r)}),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug(`Ignoring error during disconnect ${e}`)}else(this._webSocket.readyState===Kc.CONNECTING||this._webSocket.readyState===Kc.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){const{destination:r,headers:n,body:s,binaryBody:i,skipContentLengthHeader:o}=e,l=Object.assign({destination:r},n);this._transmit({command:"SEND",headers:l,body:s,binaryBody:i,skipContentLengthHeader:o})}watchForReceipt(e,r){this._receiptWatchers[e]=r}subscribe(e,r,n={}){n=Object.assign({},n),n.id||(n.id=`sub-${this._counter++}`),n.destination=e,this._subscriptions[n.id]=r,this._transmit({command:"SUBSCRIBE",headers:n});const s=this;return{id:n.id,unsubscribe(i){return s.unsubscribe(n.id,i)}}}unsubscribe(e,r={}){r=Object.assign({},r),delete this._subscriptions[e],r.id=e,this._transmit({command:"UNSUBSCRIBE",headers:r})}begin(e){const r=e||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:r}});const n=this;return{id:r,commit(){n.commit(r)},abort(){n.abort(r)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,r,n={}){n=Object.assign({},n),this._connectedVersion===Ca.V1_2?n.id=e:n["message-id"]=e,n.subscription=r,this._transmit({command:"ACK",headers:n})}nack(e,r,n={}){return n=Object.assign({},n),this._connectedVersion===Ca.V1_2?n.id=e:n["message-id"]=e,n.subscription=r,this._transmit({command:"NACK",headers:n})}}class CJ{get webSocket(){var e;return(e=this._stompHandler)==null?void 0:e._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Di.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}constructor(e={}){this.stompVersions=Ca.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=15*60*1e3,this.reconnectTimeMode=k2.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=Zx.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Di.INACTIVE;const r=()=>{};this.debug=r,this.beforeConnect=r,this.onConnect=r,this.onDisconnect=r,this.onUnhandledMessage=r,this.onUnhandledReceipt=r,this.onUnhandledFrame=r,this.onHeartbeatReceived=r,this.onHeartbeatLost=r,this.onStompError=r,this.onWebSocketClose=r,this.onWebSocketError=r,this.logRawCommunication=!1,this.onChangeState=r,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}configure(e){Object.assign(this,e),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const e=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Di.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Di.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{e()})):e()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new Cst(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:r=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(r)},onDisconnect:r=>{this.onDisconnect(r)},onStompError:r=>{this.onStompError(r)},onWebSocketClose:r=>{this._stompHandler=void 0,this.state===Di.DEACTIVATING&&this._changeState(Di.INACTIVE),this.onWebSocketClose(r),this.active&&this._schedule_reconnect()},onWebSocketError:r=>{this.onWebSocketError(r)},onUnhandledMessage:r=>{this.onUnhandledMessage(r)},onUnhandledReceipt:r=>{this.onUnhandledReceipt(r)},onUnhandledFrame:r=>{this.onUnhandledFrame(r)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else if(this.brokerURL)e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return e.binaryType="arraybuffer",e}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===k2.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(e={}){var i;const r=e.force||!1,n=this.active;let s;if(this.state===Di.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Di.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Kc.CLOSED){const o=this._stompHandler.onWebSocketClose;s=new Promise((l,c)=>{this._stompHandler.onWebSocketClose=d=>{o(d),l()}})}else return this._changeState(Di.INACTIVE),Promise.resolve();return r?(i=this._stompHandler)==null||i.discardWebsocket():n&&this._disposeStompHandler(),s}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,r){this._checkConnection(),this._stompHandler.watchForReceipt(e,r)}subscribe(e,r,n={}){return this._checkConnection(),this._stompHandler.subscribe(e,r,n)}unsubscribe(e,r={}){this._checkConnection(),this._stompHandler.unsubscribe(e,r)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,r,n={}){this._checkConnection(),this._stompHandler.ack(e,r,n)}nack(e,r,n={}){this._checkConnection(),this._stompHandler.nack(e,r,n)}}class Tst{constructor(e){this.client=e}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(e){this.client.heartbeatOutgoing=e}get incoming(){return this.client.heartbeatIncoming}set incoming(e){this.client.heartbeatIncoming=e}}class hF extends CJ{constructor(e){super(),this.maxWebSocketFrameSize=16*1024,this._heartbeatInfo=new Tst(this),this.reconnect_delay=0,this.webSocketFactory=e,this.debug=(...r)=>{console.log(...r)}}_parseConnect(...e){let r,n,s,i={};if(e.length<2)throw new Error("Connect requires at least 2 arguments");if(typeof e[1]=="function")[i,n,s,r]=e;else switch(e.length){case 6:[i.login,i.passcode,n,s,r,i.host]=e;break;default:[i.login,i.passcode,n,s,r]=e}return[i,n,s,r]}connect(...e){const r=this._parseConnect(...e);r[0]&&(this.connectHeaders=r[0]),r[1]&&(this.onConnect=r[1]),r[2]&&(this.onStompError=r[2]),r[3]&&(this.onWebSocketClose=r[3]),super.activate()}disconnect(e,r={}){e&&(this.onDisconnect=e),this.disconnectHeaders=r,super.deactivate()}send(e,r={},n=""){r=Object.assign({},r);const s=r["content-length"]===!1;s&&delete r["content-length"],this.publish({destination:e,headers:r,body:n,skipContentLengthHeader:s})}set reconnect_delay(e){this.reconnectDelay=e}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(e){this.onUnhandledMessage=e}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(e){this.onUnhandledReceipt=e}get heartbeat(){return this._heartbeatInfo}set heartbeat(e){this.heartbeatIncoming=e.incoming,this.heartbeatOutgoing=e.outgoing}}class Xb{static client(e,r){r==null&&(r=Ca.default.protocolVersions());const n=()=>{const s=Xb.WebSocketClass||WebSocket;return new s(e,r)};return new hF(n)}static over(e){let r;return typeof e=="function"?r=e:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),r=()=>e),new hF(r)}}Xb.WebSocketClass=null;const TJ=({comment:t,onReply:e,onDelete:r,onLike:n,currentUserId:s,depth:i=0})=>{const{i18n:o}=nt(),l=t.author.id===s,c=o.language==="sv"?Nst:EJ,d=t.likes&&t.likes.some(h=>h.id===s),u=t.likes?t.likes.length:0;return a.jsxs("div",{className:`flex gap-3 mb-4 ${i>0?"ml-8 is-reply":""}`,children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Hu,{user:t.author,size:"w-8 h-8"})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("div",{className:"bg-gray-50 rounded-2xl rounded-tl-none p-3 relative group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("span",{className:"font-semibold text-sm text-gray-900",children:[t.author.firstName," ",t.author.lastName]}),a.jsx("span",{className:"text-xs text-gray-500",children:Hat(new Date(t.createdAt),{addSuffix:!0,locale:c})})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:t.content}),a.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-2",children:l&&a.jsx("button",{onClick:()=>r(t.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete",children:a.jsx(qt,{className:"w-4 h-4"})})})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 ml-1",children:[a.jsxs("button",{onClick:()=>e(t),className:"text-xs font-medium text-gray-500 hover:text-blue-600 flex items-center gap-1 transition-colors",children:[a.jsx(er,{className:"w-3 h-3"}),"Reply"]}),a.jsxs("button",{onClick:()=>n(t.id),className:`text-xs font-medium flex items-center gap-1 transition-colors ${d?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[a.jsx(Lr,{className:`w-3 h-3 ${d?"fill-current":""}`}),u>0&&u]})]}),t.replies&&t.replies.length>0&&a.jsx("div",{className:"mt-4 border-l-2 border-gray-100 pl-4",children:t.replies.map(h=>a.jsx(TJ,{comment:h,onReply:e,onDelete:r,onLike:n,currentUserId:s,depth:i+1},h.id))})]})]})},Ost=({targetType:t,targetId:e,title:r="Comments"})=>{const{t:n}=nt(),{currentUser:s}=At(),[i,o]=N.useState([]),[l,c]=N.useState(!0),[d,u]=N.useState(""),[h,f]=N.useState(null),g=N.useRef(null);N.useEffect(()=>{x()},[t,e]);const x=async()=>{try{c(!0);const j=await lv.getComments(t,e);o(j)}catch(j){console.error("Failed to load comments:",j)}finally{c(!1)}},m=async j=>{if(j.preventDefault(),!!d.trim())try{const _=h?h.id:null;await lv.addComment(d,t,e,_),u(""),f(null),x()}catch(_){console.error("Failed to post comment:",_)}},p=async j=>{if(window.confirm("Are you sure you want to delete this comment?"))try{await lv.deleteComment(j),x()}catch(_){console.error("Failed to delete comment:",_)}};N.useEffect(()=>{if(!s)return;let j;try{const S=`${ks.replace(/\/api\/?$/,"")}/ws-social`;j=Xb.over(()=>new T5(S)),j.debug=()=>{},j.reconnectDelay=5e3,j.connectHeaders={Authorization:`Bearer ${localStorage.getItem("token")}`},j.onConnect=()=>{console.log("Connected to Social WebSocket");const A=`/topic/social/comments/${t}/${e}`;j.subscribe(A,T=>{const E=JSON.parse(T.body);b(E)})},j.activate(),g.current=j}catch(_){console.error("WebSocket connection failed",_)}return()=>{g.current&&g.current.deactivate()}},[t,e,s,ks]);const b=j=>{if(j.type==="COMMENT_ADDED"){const _=j.payload;o(S=>v(S,_.id)?S:_.parentId?y(S,_):[_,...S])}else if(j.type==="COMMENT_UPDATED"){const _=j.payload;o(S=>w(S,_))}},v=(j,_)=>j.some(S=>S.id===_||S.replies&&v(S.replies,_)),y=(j,_)=>j.map(S=>{if(S.id===_.parentId){const A=S.replies||[];return A.some(T=>T.id===_.id)?S:{...S,replies:[...A,_]}}return S.replies?{...S,replies:y(S.replies,_)}:S}),w=(j,_)=>j.map(S=>S.id===_.id?{..._,replies:S.replies}:S.replies?{...S,replies:w(S.replies,_)}:S),k=async j=>{if(s)try{await lv.likeComment(j)}catch(_){console.error("Failed to like comment",_)}};return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(er,{className:"w-5 h-5 text-blue-600"}),r," ",a.jsxs("span",{className:"text-gray-400 font-normal text-sm",children:["(",i.length,")"]})]}),a.jsxs("div",{className:"mb-8",children:[h&&a.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-2 rounded-lg mb-2 text-sm text-blue-700",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(lge,{className:"w-4 h-4"}),"Replying to ",a.jsx("strong",{children:h.author.firstName})]}),a.jsx("button",{onClick:()=>f(null),className:"hover:underline",children:"Cancel"})]}),a.jsxs("form",{onSubmit:m,className:"relative",children:[a.jsx("textarea",{value:d,onChange:j=>u(j.target.value),placeholder:h?"Write a reply...":"Add to the discussion...",className:"w-full bg-gray-50 border-0 rounded-xl p-4 pr-12 text-sm focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all resize-y min-h-[100px]"}),a.jsx("button",{type:"submit",disabled:!d.trim(),className:"absolute bottom-3 right-3 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:a.jsx(Wr,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-6",children:l?a.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading discussion..."}):i.length===0?a.jsx("div",{className:"text-center py-10 text-gray-400 italic",children:"No comments yet. Be the first to start the conversation!"}):i.map(j=>a.jsx(TJ,{comment:j,onReply:f,onDelete:p,onLike:k,currentUserId:s==null?void 0:s.id},j.id))})]})},Ist={key:"material",name:"Kursinnehll",icon:gt,settingsKey:"module_content_enabled"},OJ=({courseId:t,isTeacher:e,currentUser:r,mode:n="COURSE"})=>{var B;const[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState(null),[u,h]=N.useState(null),[f,g]=N.useState(null),[x,m]=N.useState(!1),[p,b]=N.useState(!1),[v,y]=N.useState(null),[w,k]=N.useState(!1),[j,_]=N.useState(null),[S,A]=N.useState({title:"",content:"",videoUrl:""}),[T,E]=N.useState(null);N.useEffect(()=>{C()},[t,n]),N.useEffect(()=>{c&&!e&&r&&O.activity.log({userId:r.id,courseId:t,materialId:c.id,type:"VIEW_LESSON",details:`Opened lesson: ${c.title}`}).catch(console.error)},[c==null?void 0:c.id]);const C=async()=>{try{const U=localStorage.getItem("token");let V=`${window.location.origin}/api/courses/${t}/materials`,se=`${window.location.origin}/api/quizzes/course/${t}`;n==="GLOBAL"&&(V=`${window.location.origin}/api/resources/my?userId=${r==null?void 0:r.id}&type=LESSON`,se=`${window.location.origin}/api/quizzes/my?userId=${r==null?void 0:r.id}`);const[Ne,ie]=await Promise.all([fetch(V,{headers:{Authorization:`Bearer ${U}`}}),fetch(se,{headers:{Authorization:`Bearer ${U}`}})]);if(Ne.ok){const H=(await Ne.json()).map(Z=>{if(Z.content&&typeof Z.content=="string"&&Z.content.startsWith("{"))try{const te=JSON.parse(Z.content);let ge="";return te.outline?ge=te.outline.map(Ce=>`### ${Ce.title}
${Ce.content}`).join(`

`):te.instructions?ge=`## Instruktioner
${te.instructions}`:ge="Ingen frhandsvisning tillgnglig.",{id:Z.id,title:Z.name,content:ge,type:"LESSON",availableFrom:Z.createdAt,visibility:Z.visibility,isResource:!0}}catch{return Z}else if(Z.name&&!Z.title)return{...Z,title:Z.name,visibility:Z.visibility};return Z});i(H),H.length>0&&!c&&!u&&d(H[0])}if(ie.ok){const q=await ie.json();l(q)}}catch(U){console.error("Failed to load content",U)}},z=()=>{A({title:"Nytt Innehll",content:"",videoUrl:"",type:"LESSON",availableFrom:""}),E(null),d(null),h(null),m(!0)},M=async()=>{b(!0);const U=localStorage.getItem("token"),V=new FormData;V.append("title",S.title||"Namnls lektion"),V.append("content",S.content||""),S.videoUrl&&V.append("link",S.videoUrl),V.append("type",S.type||"LESSON"),S.availableFrom?V.append("availableFrom",S.availableFrom):V.append("availableFrom",""),T&&V.append("file",T);try{let se=`${window.location.origin}/api/courses/${t}/materials?userId=${r==null?void 0:r.id}`,Ne="POST";n==="GLOBAL"&&(se=`${window.location.origin}/api/lessons/create?userId=${r==null?void 0:r.id}`),c&&c.id&&(se=`${window.location.origin}/api/courses/materials/${c.id}`,Ne="PUT");const ie=await fetch(se,{method:Ne,headers:{Authorization:`Bearer ${U}`},body:V});if(ie.ok){const q=await ie.json();Ne==="POST"?(i([...s,q]),d(q)):(i(s.map(H=>H.id===q.id?q:H)),d(q)),m(!1),E(null)}else{const q=await ie.text();alert(`Kunde inte spara: ${q||"Oknt fel"}`)}}catch(se){console.error(se),alert("Kunde inte ansluta till servern.")}finally{b(!1)}},F=async U=>{if(window.confirm("r du sker p att du vill radera lektionen?"))try{const V=localStorage.getItem("token");await fetch(`${window.location.origin}/api/courses/materials/${U}`,{method:"DELETE",headers:{Authorization:`Bearer ${V}`}});const se=s.filter(Ne=>Ne.id!==U);i(se),d(se.length>0?se[0]:null)}catch{alert("Kunde inte radera")}},D=U=>U&&U.match(/\.(mp4|webm|ogg|mov)$/i),L=U=>U&&U.match(/\.(jpg|jpeg|png|gif|webp)$/i),K=U=>U&&U.match(/\.epub$/i),$=U=>{if(!U)return null;const V=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,se=U.match(V);return se&&se[2].length===11?`https://www.youtube.com/embed/${se[2]}`:null},R=U=>{if(!U)return!1;const V=U.split(".");if(V.length<2)return!1;const se=V.pop().toLowerCase();return["docx","doc","odt","xlsx","xls","ods","pptx","ppt","odp","txt"].includes(se)},Y=U=>{A({title:U.title,content:U.content,videoUrl:U.link,type:U.type||"LESSON",availableFrom:U.availableFrom||""}),E(null),d(U),h(null),m(!0)},ee=async(U,V,se)=>{try{await O.quiz.submit(U,{studentId:r.id,score:V,maxScore:se}),g(null),alert("Bra jobbat! Ditt resultat r sparat.")}catch(Ne){console.error(Ne),alert("Kunde inte spara resultatet.")}};return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 animate-in fade-in",children:[a.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] flex flex-col overflow-hidden min-h-[400px] lg:max-h-[calc(100vh-200px)] lg:sticky lg:top-8",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-200",children:"Kursplan"}),e&&a.jsx("button",{onClick:z,className:"p-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-lg transition-colors flex items-center justify-center shadow-sm",title:"Lgg till nytt material",children:a.jsx(jt,{size:20})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:[s.length===0&&o.length===0&&a.jsx("p",{className:"text-sm text-gray-400 text-center py-10",children:"Inget innehll n."}),s.map((U,V)=>{const se=!e&&U.availableFrom&&new Date(U.availableFrom)>new Date,Ne=e&&U.availableFrom&&new Date(U.availableFrom)>new Date;return a.jsxs("div",{onClick:()=>{se||(d(U),h(null),m(!1))},className:`p-3 rounded-lg cursor-pointer text-sm flex items-center justify-between group transition-colors ${(c==null?void 0:c.id)===U.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-[#282a2c]"} ${se?"opacity-60 cursor-not-allowed bg-gray-50 dark:bg-black/20":""}`,children:[a.jsxs("div",{className:"flex items-center gap-3 truncate",children:[a.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-5 h-5 rounded-full bg-gray-100 dark:bg-[#3c4043] text-xs font-mono",children:se?a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}):V+1}),a.jsxs("div",{className:"truncate flex-1",children:[a.jsxs("span",{className:"truncate block font-medium flex items-center gap-2",children:[U.title,Ne&&a.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-yellow-100 text-yellow-800 border border-yellow-200",children:"Kommande"})]}),a.jsxs("span",{className:"text-[10px] uppercase font-bold text-gray-400 flex gap-2",children:[a.jsxs("span",{children:[U.type==="STUDY_MATERIAL"&&"Studiematerial",U.type==="QUESTIONS"&&"Instuderingsfrgor",U.type==="LINK"&&"Lnk",(!U.type||U.type==="LESSON"||U.type==="VIDEO")&&"Lektion"]}),se&&a.jsxs("span",{children:[" Tillgnglig ",new Date(U.availableFrom).toLocaleDateString()]})]})]}),e&&n==="GLOBAL"&&U.isResource&&a.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[a.jsx("button",{onClick:ie=>{ie.stopPropagation();const q=U.visibility==="PUBLIC"?"PRIVATE":"PUBLIC";O.resources.updateVisibility(U.id,q).then(()=>{i(s.map(H=>H.id===U.id?{...H,visibility:q}:H))}).catch(H=>{console.error("Failed to update visibility:",H),alert("Kunde inte uppdatera synlighet")})},className:`px-2 py-1 rounded text-[9px] font-bold transition-colors ${U.visibility==="PUBLIC"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:U.visibility==="PUBLIC"?"Klicka fr att gra privat":"Klicka fr att gra publik",children:U.visibility==="PUBLIC"?" Public":" Private"}),U.visibility==="PUBLIC"&&a.jsxs("button",{onClick:ie=>{ie.stopPropagation(),_(U),k(!0)},className:"px-2 py-1 rounded text-[9px] font-bold bg-purple-100 text-purple-700 hover:bg-purple-200 transition-colors flex items-center gap-1",title:"Dela i Community",children:[a.jsx(G0,{size:10})," Dela"]})]})]}),(c==null?void 0:c.id)===U.id&&a.jsx(or,{size:14})]},`lesson-${U.id}`)}),o.length>0&&a.jsx("div",{className:"px-3 pt-4 pb-1 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Quiz & Frhr"}),o.map((U,V)=>{var Ne;const se=!e&&U.availableFrom&&new Date(U.availableFrom)>new Date;return a.jsxs("div",{onClick:()=>{se||(h(U),d(null),m(!1))},className:`p-3 rounded-lg cursor-pointer text-sm flex items-center justify-between group transition-colors ${(u==null?void 0:u.id)===U.id?"bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-[#282a2c]"} ${se?"opacity-60 cursor-not-allowed":""}`,children:[a.jsxs("div",{className:"flex items-center gap-3 truncate",children:[a.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-5 h-5 rounded-full bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-300 text-xs",children:a.jsx(Pn,{size:12})}),a.jsxs("div",{className:"truncate",children:[a.jsx("span",{className:"truncate block font-medium",children:U.title}),a.jsxs("span",{className:"text-[10px] uppercase font-bold text-gray-400",children:[((Ne=U.questions)==null?void 0:Ne.length)||0," Frgor"]})]})]}),(u==null?void 0:u.id)===U.id&&a.jsx(or,{size:14})]},`quiz-${U.id}`)})]})]}),a.jsx("div",{className:"lg:col-span-3 bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] p-8 flex flex-col",children:x?a.jsxs("div",{className:"space-y-4 flex-1 animate-in fade-in relative",children:[p&&a.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/80 z-10 flex items-center justify-center backdrop-blur-sm rounded-xl",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(ft,{className:"animate-spin text-indigo-600",size:32}),a.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:"Sparar lektion..."})]})}),a.jsx("h2",{className:"text-xl font-bold dark:text-white mb-4",children:c!=null&&c.id?"Redigera Lektion":"Ny Lektion"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Titel"}),a.jsx("input",{className:"w-full p-3 border rounded-xl dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:S.title,onChange:U=>A({...S,title:U.target.value}),placeholder:"T.ex. Introduktion till Java"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Typ av innehll"}),a.jsxs("select",{className:"w-full p-3 border rounded-xl dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:S.type||"LESSON",onChange:U=>A({...S,type:U.target.value}),children:[a.jsx("option",{value:"LESSON",children:"Lektion (Text/Video/Blandat)"}),a.jsx("option",{value:"VIDEO",children:"Videolektion (Egen uppladdning)"}),a.jsx("option",{value:"STUDY_MATERIAL",children:"Studiematerial (Fil/Dokument)"}),a.jsx("option",{value:"QUESTIONS",children:"Instuderingsfrgor"}),a.jsx("option",{value:"LINK",children:"Extern Lnk"}),a.jsx("option",{value:"EPUB",children:"E-bok (EPUB)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Publiceras (Valfritt schema)"}),a.jsx("input",{type:"datetime-local",className:"w-full p-3 border rounded-xl dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:S.availableFrom,onChange:U=>A({...S,availableFrom:U.target.value})}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Lt st tomt fr att publicera direkt."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"YouTube URL (Valfritt)"}),a.jsx("input",{className:"w-full p-3 border rounded-xl dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:"https://youtube.com/...",value:S.videoUrl||"",onChange:U=>A({...S,videoUrl:U.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:S.type==="VIDEO"?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx($D,{size:14,className:"text-indigo-500"}),"Ladda upp video (MP4, WebM, MOV - Max 500MB)"]}):"Ladda upp fil / Bild / Video (Valfritt)"}),a.jsx("input",{type:"file",accept:S.type==="VIDEO"?".mp4,.mov,.webm,.avi,.mkv":".pdf,.epub,.doc,.docx,.ppt,.pptx,.zip,.mp4,.mov,.webm,.jpg,.jpeg,.png,.gif,.webp",className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:U=>{const V=U.target.files[0];if(V){if(S.type==="VIDEO"&&V.size>500*1024*1024){alert("Filen r fr stor. Max 500MB fr video."),U.target.value="";return}E(V)}}}),T&&a.jsxs("p",{className:"text-xs text-indigo-600 mt-1 flex items-center gap-1",children:[a.jsx($D,{size:12})," ",T.name," (",(T.size/1024/1024).toFixed(1)," MB)"]}),(c==null?void 0:c.fileUrl)&&!T&&a.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[a.jsx(K0,{size:12})," Fil finns redan sparad. Ladda upp ny fr att erstta."]}),S.type==="VIDEO"&&a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Videor spelas upp direkt i webblsaren med kapitel-std och hastighetsval."})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Innehll / Beskrivning"}),a.jsx("textarea",{className:"w-full h-64 p-3 border rounded-xl dark:bg-[#131314] dark:border-[#3c4043] dark:text-white font-mono text-sm",placeholder:"Skriv lektionsinnehllet hr...",value:S.content,onChange:U=>A({...S,content:U.target.value})})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t dark:border-[#3c4043]",children:[a.jsxs("button",{onClick:M,disabled:p,className:"bg-indigo-600 text-white px-6 py-2.5 rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700 disabled:opacity-50",children:[a.jsx(sa,{size:18})," Spara Lektion"]}),a.jsx("button",{onClick:()=>{m(!1),!c&&s.length>0&&d(s[0])},disabled:p,className:"bg-gray-100 dark:bg-[#3c4043] text-gray-700 dark:text-white px-6 py-2.5 rounded-lg font-bold",children:"Avbryt"})]})]}):u?a.jsxs("div",{className:"flex flex-col h-full animate-in fade-in",children:[a.jsx("div",{className:"flex justify-between items-start mb-6",children:a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-purple-600 bg-purple-100 px-2 py-1 rounded mb-2 inline-block",children:"QUIZ"}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:u.title}),a.jsx("div",{className:"h-1 w-20 bg-purple-500 rounded-full"})]})}),a.jsxs("div",{className:"bg-white dark:bg-[#131314] rounded-xl border border-gray-100 dark:border-[#3c4043] p-8 text-center max-w-2xl mx-auto shadow-sm mt-8",children:[a.jsx("div",{className:"w-20 h-20 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-6 text-purple-600 dark:text-purple-400",children:a.jsx(Pn,{size:40})}),a.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:["Dags fr ",u.title]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 max-w-lg mx-auto leading-relaxed",children:u.description||"Detta quiz testar dina kunskaper p omrdet. Lycka till!"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto mb-8",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-[#1E1F20] p-4 rounded-xl",children:[a.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Frgor"}),a.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[((B=u.questions)==null?void 0:B.length)||0," st"]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-[#1E1F20] p-4 rounded-xl",children:[a.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Tidsgrns"}),a.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Ingen"})]})]}),a.jsxs("button",{onClick:()=>g(u),className:"w-full max-w-xs mx-auto bg-purple-600 text-white py-4 rounded-xl font-bold text-lg hover:bg-purple-700 shadow-lg shadow-purple-200 dark:shadow-none flex items-center justify-center gap-3 transition-transform hover:-translate-y-1",children:[a.jsx(mK,{size:24})," Starta Quiz"]})]})]}):c?a.jsxs("div",{className:"flex flex-col h-full animate-in fade-in",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:c.title}),a.jsx("div",{className:"h-1 w-20 bg-indigo-500 rounded-full"})]}),e&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Y(c),className:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-gray-100 dark:hover:bg-[#3c4043] rounded-lg transition-colors",children:a.jsx(Zl,{size:18})}),a.jsx("button",{onClick:()=>F(c.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-gray-100 dark:hover:bg-[#3c4043] rounded-lg transition-colors",children:a.jsx(qt,{size:18})})]})]}),a.jsxs("div",{className:"space-y-6 mb-8",children:[c.link&&$(c.link)&&a.jsx("div",{className:"aspect-video w-full bg-black rounded-xl overflow-hidden shadow-lg ring-1 ring-black/10",children:a.jsx("iframe",{src:$(c.link),title:c.title,className:"w-full h-full",frameBorder:"0",allowFullScreen:!0,onLoad:()=>{}})}),c.fileUrl&&D(c.fileUrl)&&a.jsx(ztt,{src:wo(c.fileUrl),title:c.title,chapters:c.videoChapters?JSON.parse(c.videoChapters):[],poster:wo(c.thumbnailUrl),onProgress:({currentTime:U,duration:V})=>{if(!e&&U>0&&U%30<1){const se=Math.round(U/V*100);console.log(`Video progress: ${se}%`)}},onEnded:()=>{e||O.activity.log({userId:r.id,courseId:t,materialId:c.id,type:"COMPLETE_VIDEO",details:`Completed: ${c.title}`}).catch(console.error)},onMetadataLoaded:({duration:U})=>{!c.videoDuration&&U&&e&&O.patch(`/videos/${c.id}/metadata`,{duration:Math.floor(U)}).catch(console.error)}}),c.fileUrl&&L(c.fileUrl)&&a.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg border border-gray-200 dark:border-[#3c4043]",children:a.jsx("img",{src:wo(c.fileUrl),alt:"Lektionsmaterial",className:"w-full h-auto object-contain max-h-[600px] bg-gray-50 dark:bg-black/50"})}),c.fileUrl&&K(c.fileUrl)&&a.jsx("div",{className:"h-[700px] rounded-xl overflow-hidden shadow-lg border border-gray-200 dark:border-[#3c4043]",children:a.jsx(SJ,{url:wo(c.fileUrl),title:c.title})})]}),c.fileUrl&&!D(c.fileUrl)&&!L(c.fileUrl)&&a.jsxs("div",{className:"mb-8 p-4 bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-white dark:bg-[#1E1F20] rounded-lg shadow-sm text-indigo-600",children:a.jsx(K0,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"Resurs"}),a.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Bifogad fil"})]})]}),a.jsxs("a",{href:wo(c.fileUrl),download:!0,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-[#1E1F20] hover:bg-gray-50 dark:hover:bg-[#282a2c] text-sm font-bold text-gray-700 dark:text-gray-200 rounded-lg shadow-sm border border-gray-200 dark:border-[#3c4043] transition-colors",onClick:()=>{e||O.activity.log({userId:r.id,courseId:t,materialId:c.id,type:"DOWNLOAD_FILE",details:c.fileUrl.split("/").pop()}).catch(console.error)},children:[a.jsx(Rn,{size:16})," Ladda ner"]}),e&&R(c.fileUrl)&&a.jsxs("button",{onClick:()=>y(c),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-sm font-bold text-white rounded-lg shadow-sm border border-transparent transition-colors",children:[a.jsx(Zl,{size:16})," Redigera Inline"]}),e&&a.jsxs("button",{onClick:async()=>{if(confirm("Vill du indexera detta dokument fr AI-tutorn?"))try{await O.ai.tutor.ingest(t,c.id),alert("Dokumentet har indexerats!")}catch(U){console.error(U),U.message&&U.message.includes("403")?alert(" Denna funktion krver en PRO eller ENTERPRISE licens."):alert("Kunde inte indexera dokumentet.")}},className:"flex items-center gap-2 px-4 py-2 bg-purple-100 hover:bg-purple-200 text-sm font-bold text-purple-700 rounded-lg shadow-sm border border-transparent transition-colors",title:"Indexera fr AI-tutor",children:[a.jsx(dr,{size:16})," Indexera"]})]}),a.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed mb-12",children:c.content}),a.jsx("div",{className:"border-t border-gray-100 dark:border-[#3c4043] pt-8",children:a.jsx(Ost,{targetType:"LESSON",targetId:c.id,title:"Diskussion & Frgor"})})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[a.jsx(gt,{size:64,className:"mb-4 opacity-10"}),a.jsx("p",{className:"text-lg font-medium",children:"Vlj en lektion frn listan fr att brja plugga."}),e&&a.jsx("button",{onClick:z,className:"mt-4 text-indigo-600 hover:underline",children:"Eller skapa en ny"})]})}),v&&a.jsx(xQ,{entityType:n==="COURSE"?"MATERIAL":"LESSON",entityId:v.id,userId:r==null?void 0:r.id,onClose:()=>{y(null),C()}}),f&&a.jsx(pQ,{quiz:f,onClose:()=>g(null),onSubmit:ee}),w&&j&&a.jsx(II,{initialType:j.isResource?"RESOURCE":"LESSON",initialItemId:j.id,userId:r==null?void 0:r.id,onClose:()=>{k(!1),_(null)},onPublished:()=>{alert(" Lektion publicerad i Community fr granskning!"),k(!1),_(null),C()}})]})},Dst=({course:t,currentUser:e,onClose:r,onStartQuiz:n})=>{const[s,i]=N.useState(3),[o,l]=N.useState(5),[c,d]=N.useState(!1),[u,h]=N.useState(null),f=async()=>{d(!0),h(null);try{const g=await O.ai.generatePractice({courseId:t.id,difficulty:s,questionCount:o});g.success?n(g):h(g.errorMessage||"Kunde inte generera quiz.")}catch(g){console.error(g),h(g.message||"Ett fel uppstod vid generering.")}finally{d(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-in fade-in backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-lg rounded-2xl shadow-2xl p-6 border border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:a.jsx(dr,{size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Starta vningsquiz"}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["AI-genererat quiz baserat p ",t.name]})]})]}),u&&a.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg flex items-center gap-2 text-sm",children:[a.jsx(Er,{size:16})," ",u]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex justify-between text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx("span",{children:"Svrighetsgrad"}),a.jsxs("span",{className:"text-indigo-600 font-bold",children:[s," / 5"]})]}),a.jsx("input",{type:"range",min:"1",max:"5",value:s,onChange:g=>i(parseInt(g.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-indigo-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"Ltt"}),a.jsx("span",{children:"Medel"}),a.jsx("span",{children:"Svr"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Antal frgor"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[3,5,10].map(g=>a.jsxs("button",{onClick:()=>l(g),className:`py-2 px-4 rounded-lg text-sm font-medium transition-colors border ${o===g?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-[#282a2c] text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-600 hover:bg-gray-50"}`,children:[g," frgor"]},g))})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl flex gap-3",children:[a.jsx(gt,{className:"shrink-0 text-blue-600 dark:text-blue-400",size:20}),a.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[a.jsx("p",{className:"font-bold mb-1",children:"Hur fungerar det?"}),"AI:n analyserar kursens innehll och taggar fr att skapa unika frgor varje gng. Ditt resultat sparas s lraren kan se att du var!"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mt-8",children:[a.jsx("button",{onClick:r,disabled:c,className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Avbryt"}),a.jsxs("button",{onClick:f,disabled:c,className:"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-xl hover:shadow-lg hover:shadow-indigo-200 transition-all disabled:opacity-70 flex items-center justify-center gap-2",children:[c?a.jsx(ft,{className:"animate-spin",size:20}):a.jsx(dr,{size:20}),c?"Genererar...":"Starta Quiz"]})]})]})})},Mst=()=>{const{currentUser:t}=At(),[e,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(""),[l,c]=N.useState([]),[d,u]=N.useState(!1),[h,f]=N.useState(null),[g,x]=N.useState("");N.useEffect(()=>{m(),p()},[t]);const m=async()=>{s(!0);try{const y=await O.quiz.getMy(t.id);r(y||[])}catch(y){console.error("Library load error",y)}finally{s(!1)}},p=async()=>{var y;try{const w=(y=t==null?void 0:t.roles)!=null&&y.includes("ADMIN")?"ADMIN":"TEACHER",k=await O.courses.getOptions(t==null?void 0:t.id,w);c(k||[])}catch(w){console.error(w)}},b=async()=>{var y;if(!(!h||!g))try{const w={title:`${h.title} (Kopia)`,description:h.description||"",questions:((y=h.questions)==null?void 0:y.map(k=>{var j;return{text:k.text,options:((j=k.options)==null?void 0:j.map(_=>({text:_.text,isCorrect:_.isCorrect})))||[]}}))||[]};await O.quiz.create(g,t.id,w),alert("Quiz kopierat till kursen!"),u(!1)}catch{alert("Fel vid kopiering.")}},v=e.filter(y=>y.title.toLowerCase().includes(i.toLowerCase()));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-[#1E1F20] p-4 rounded-xl border border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"relative w-full max-w-md",children:[a.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-200 dark:border-[#3c4043] outline-none",placeholder:"Sk i bibliotek...",value:i,onChange:y=>o(y.target.value)})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Visar ",v.length," av ",e.length," quiz"]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#131314] text-gray-500 font-bold border-b border-gray-200 dark:border-[#3c4043]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Titel"}),a.jsx("th",{className:"p-4",children:"Nuvarande Kurs"}),a.jsx("th",{className:"p-4",children:"Frgor"}),a.jsx("th",{className:"p-4",children:"Skapad"}),a.jsx("th",{className:"p-4 text-right",children:"tgrder"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:v.map(y=>{var w;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#3c4043]/50",children:[a.jsx("td",{className:"p-4 font-medium",children:y.title}),a.jsx("td",{className:"p-4 text-gray-500",children:y.course?y.course.name||y.course.title||"Globalt":"Ingen"}),a.jsx("td",{className:"p-4",children:((w=y.questions)==null?void 0:w.length)||0}),a.jsx("td",{className:"p-4 text-gray-500",children:"TODO: Date"}),a.jsx("td",{className:"p-4 text-right flex justify-end gap-2",children:a.jsx("button",{onClick:()=>{f(y),u(!0)},className:"p-2 hover:bg-blue-50 text-blue-600 rounded-lg",title:"Kopiera till kurs",children:a.jsx(aK,{size:16})})})]},y.id)})})]}),v.length===0&&a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Inga quiz hittades i ditt bibliotek."})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-xl w-full max-w-md",children:[a.jsxs("h3",{className:"text-lg font-bold mb-4",children:['Kopiera "',h==null?void 0:h.title,'"']}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Vlj Kurs"}),a.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-[#131314] dark:border-[#3c4043]",value:g,onChange:y=>x(y.target.value),children:[a.jsx("option",{value:"",children:"-- Vlj Kurs --"}),l.map(y=>a.jsx("option",{value:y.id,children:y.title},y.id))]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#3c4043]",children:"Avbryt"}),a.jsx("button",{onClick:b,disabled:!g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Kopiera"})]})]})})]})},Lst=({currentUser:t})=>{const[e,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState([]),[d,u]=N.useState(""),[h,f]=N.useState({text:"",category:"General",difficulty:"MEDIUM",type:"MULTIPLE_CHOICE",options:["","","",""],correctAnswer:""});N.useEffect(()=>{g(),x()},[t]);const g=async()=>{try{s(!0);const y=await O.questionBank.getMy(t.id);r(y||[])}catch(y){console.error(y)}finally{s(!1)}},x=async()=>{try{const y=await O.questionBank.getCategories(t.id);c(y||[])}catch(y){console.error(y)}},m=()=>{f({...h,options:[...h.options,""]})},p=async()=>{if(!h.text||h.options.some(y=>!y)||!h.correctAnswer){alert("Fyll i frga, alla svarsalternativ och vlj rtt svar.");return}try{await O.questionBank.add(t.id,{questionText:h.text,category:h.category,difficulty:h.difficulty,type:h.type,options:h.options,correctAnswer:h.correctAnswer}),o(!1),f({text:"",category:"General",difficulty:"MEDIUM",type:"MULTIPLE_CHOICE",options:["","","",""],correctAnswer:""}),g(),x()}catch{alert("Kunde inte spara frga")}},b=async y=>{if(window.confirm("Ta bort denna frga frn banken?"))try{await O.questionBank.delete(y),g(),x()}catch(w){console.error(w)}},v=d?e.filter(y=>y.category===d):e;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[a.jsx(fh,{size:24,className:"text-indigo-500"})," Min Frgebank"]}),a.jsxs("button",{onClick:()=>o(!i),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[a.jsx(jt,{size:18})," Ny Frga"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 items-center bg-gray-50 dark:bg-[#131314] p-3 rounded-xl border border-dashed border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("select",{className:"p-2 rounded-lg border border-gray-300 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white text-sm font-bold min-w-[150px]",value:d,onChange:y=>u(y.target.value),children:[a.jsx("option",{value:"",children:"-- Alla Kategorier --"}),l.map((y,w)=>a.jsx("option",{value:y,children:y},w))]}),a.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-[#3c4043] mx-2"}),a.jsx("input",{type:"file",id:"csvImport",accept:".csv",className:"hidden",onChange:y=>{const w=y.target.files[0];if(!w)return;const k=new FileReader;k.onload=async j=>{try{const S=j.target.result.split(/\r?\n/).filter(T=>T.trim().length>0);if(S.length<=1)return;const A=[];for(let T=1;T<S.length;T++){const E=S[T].split(";");if(E.length<4)continue;const C=E[0].trim(),z=E[1].trim(),M=E[2].trim().toUpperCase(),F=E[E.length-1].trim(),D=E.slice(2,E.length-1).map($=>$.trim()),L=parseInt(F)-1,K=L>=0&&L<D.length?D[L]:D[0];z&&D.length>=2&&A.push({questionText:z,category:C,difficulty:"MEDIUM",type:"MULTIPLE_CHOICE",options:D,correctAnswer:K})}A.length>0&&(await O.questionBank.import(t.id,A),alert(`Importerade ${A.length} frgor!`),g(),x())}catch(_){console.error(_),alert("Fel vid import av CSV")}},k.readAsText(w),y.target.value=null}}),a.jsxs("button",{onClick:()=>document.getElementById("csvImport").click(),className:"bg-white hover:bg-gray-100 dark:bg-[#1E1F20] dark:hover:bg-[#3c4043] text-gray-700 dark:text-gray-300 px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-2 border border-gray-200 dark:border-[#3c4043]",children:[a.jsx(Xa,{size:14})," Importera CSV"]})]}),i&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-xl border border-indigo-100 dark:border-indigo-900 shadow-md animate-in fade-in slide-in-from-top-4",children:[a.jsx("h4",{className:"font-bold mb-4 dark:text-white",children:"Skapa Bankfrga"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Kategori"}),a.jsx("input",{type:"text",value:h.category,onChange:y=>f({...h,category:y.target.value}),className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:"t.ex. Java, Historia",list:"categoryList"}),a.jsx("datalist",{id:"categoryList",children:l.map(y=>a.jsx("option",{value:y},y))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Svrighetsgrad"}),a.jsxs("select",{className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:h.difficulty,onChange:y=>f({...h,difficulty:y.target.value}),children:[a.jsx("option",{value:"EASY",children:"Easy"}),a.jsx("option",{value:"MEDIUM",children:"Medium"}),a.jsx("option",{value:"HARD",children:"Hard"})]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Frga"}),a.jsx("textarea",{value:h.text,onChange:y=>f({...h,text:y.target.value}),className:"w-full p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Svarsalternativ (Markera rtt svar)"}),h.options.map((y,w)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"correct",checked:h.correctAnswer===y&&y!=="",onChange:()=>f({...h,correctAnswer:y}),className:"w-4 h-4 text-indigo-600"}),a.jsx("input",{type:"text",value:y,onChange:k=>{const j=[...h.options];j[w]=k.target.value,f({...h,options:j})},className:"flex-1 p-2 border rounded dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",placeholder:`Alternativ ${w+1}`}),a.jsx("button",{onClick:()=>{const k=h.options.filter((j,_)=>_!==w);f({...h,options:k})},className:"text-red-500 hover:text-red-700",children:a.jsx(Je,{size:16})})]},w)),a.jsx("button",{type:"button",onClick:m,className:"text-sm text-indigo-500 font-bold hover:underline",children:"+ Lgg till alternativ"})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-gray-500 hover:text-gray-700 dark:text-gray-400",children:"Avbryt"}),a.jsx("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Spara till Bank"})]})]}),n?a.jsx("div",{className:"text-center py-10 text-gray-500",children:"Laddar bank..."}):e.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-[#131314] rounded-xl border border-dashed border-gray-300 dark:border-[#3c4043]",children:[a.jsx(Er,{size:48,className:"mx-auto text-gray-300 mb-3"}),a.jsx("p",{className:"text-gray-500",children:"Din frgebank r tom"})]}):a.jsx("div",{className:"grid gap-4",children:v.length>0?v.map(y=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-4 rounded-lg border border-gray-200 dark:border-[#3c4043] flex justify-between items-start group hover:shadow-md transition-shadow",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("span",{className:"text-xs font-bold uppercase text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:y.category||"Okategoriserad"}),a.jsx("span",{className:`text-xs font-bold uppercase px-2 py-0.5 rounded ${y.difficulty==="HARD"?"bg-red-100 text-red-800":y.difficulty==="MEDIUM"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:y.difficulty||"MEDIUM"})]}),a.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200",children:y.questionText}),a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Rtt svar: ",a.jsx("span",{className:"text-green-600 font-medium",children:y.correctAnswer||(y.options?y.options[0]:"Unknown")})]})]}),a.jsx("button",{onClick:()=>b(y.id),className:"text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(qt,{size:18})})]},y.id)):a.jsx("div",{className:"text-center py-8 text-gray-500 italic",children:"Inga frgor i denna kategori."})})]})},Rst={id:"QUIZ_PRO",name:"QuizRunner Pro",version:"2.0.0",description:"Avancerad quizhantering med frgebank och AI-generering.",icon:Mr,settingsKey:"module_quiz_pro_enabled",permissions:["READ","WRITE","PRO_ACCESS"]},Pst=Rst,zst=t=>{const e=new Date,r=t.availableFrom?new Date(t.availableFrom):null,n=t.availableTo?new Date(t.availableTo):null;return r&&e<r?{status:"LOCKED",message:`ppnar ${r.toLocaleString()} `}:n&&e>n?{status:"CLOSED",message:`Stngde ${n.toLocaleString()} `}:{status:"OPEN",message:n?`ppet t.o.m ${n.toLocaleString()} `:"Tillgnglig"}},IJ=({courseId:t,currentUser:e,isTeacher:r,mode:n="COURSE"})=>{const{t:s}=nt(),{refreshUser:i}=At(),{isModuleActive:o}=oa();Et();const l=o("QUIZ_PRO")||o("quiz_runner_pro"),[c,d]=N.useState([]),[u,h]=N.useState(null),[f,g]=N.useState(null),[x,m]=N.useState(!1),[p,b]=N.useState(!1),[v,y]=N.useState(!1),[w,k]=N.useState(!0),[j,_]=N.useState("COURSE");N.useEffect(()=>{S()},[t,n]);const S=async()=>{k(!0);try{let C;n==="GLOBAL"?C=await O.quiz.getMy(e.id):C=await O.quiz.getByCourse(t),d(C||[])}catch(C){console.error("Quiz load error",C)}finally{k(!1)}},A=async(C,z)=>{try{C.generationParams?await O.quiz.generate({...C.generationParams,userId:e.id,courseId:n==="GLOBAL"?null:t,title:C.title}):z?await O.quiz.update(z,C):n==="GLOBAL"?await O.quiz.createGlobal(e.id,C):await O.quiz.create(t,e.id,C),S(),m(!1),g(null)}catch{alert(s("quiz.save_error")||"Fel vid sparande.")}},T=async C=>{if(window.confirm(s("quiz.delete_confirm")))try{await O.quiz.delete(C),d(c.filter(z=>z.id!==C))}catch{alert(s("quiz.delete_error"))}},E=async(C,z,M)=>{try{C?(await O.quiz.submit(C,{studentId:e.id,score:z,maxScore:M}),i&&await i()):await O.ai.completePractice({userId:e.id,courseId:t,score:z,maxScore:M,difficulty:3})}catch(F){console.error(F)}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900/30",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-extrabold text-indigo-900 dark:text-indigo-200 tracking-tight",children:s("quiz.header")}),a.jsxs("p",{className:"text-indigo-700/80 dark:text-indigo-400/80 text-sm mt-1 flex items-center gap-2",children:[s("quiz.subtitle"),a.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] uppercase font-bold ${l?"bg-indigo-600 text-white":"bg-gray-400 text-white"}`,children:l?"Pro":"Basic"})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[!r&&l&&a.jsxs("button",{onClick:()=>y(!0),className:"bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 flex items-center gap-2 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:[a.jsx(dr,{size:18}),s("quiz.practice_ai")||"va med AI"]}),r&&l&&a.jsx("div",{className:"flex bg-white/80 dark:bg-[#1E1F20]/80 backdrop-blur-sm rounded-xl p-1 border border-indigo-100 dark:border-indigo-900/30 shadow-sm",children:[{id:"COURSE",label:n==="GLOBAL"?"Mina Quiz":"Kursquiz",icon:Pn},{id:"LIBRARY",label:"Bibliotek",icon:il},{id:"BANK",label:"Frgebank",icon:Mr}].map(C=>a.jsxs("button",{onClick:()=>_(C.id),className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${j===C.id?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:text-indigo-600 hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20"}`,children:[a.jsx(C.icon,{size:16}),a.jsx("span",{children:C.label})]},C.id))}),r&&a.jsxs("div",{className:"flex gap-2",children:[l&&a.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-all font-bold shadow-lg shadow-purple-100 dark:shadow-none transform hover:scale-[1.02] active:scale-[0.98]",children:[a.jsx(dr,{size:18}),"Generera Quiz"]}),a.jsxs("button",{onClick:()=>{g(null),m(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all font-bold shadow-lg shadow-indigo-100 dark:shadow-none transform hover:scale-[1.02] active:scale-[0.98]",children:[a.jsx(jt,{size:22}),s("quiz.create_title")||"Skapa Quiz"]})]})]})]}),a.jsx("div",{className:"min-h-[400px]",children:j==="LIBRARY"&&l?a.jsx(Mst,{}):j==="BANK"&&l?a.jsx(Lst,{currentUser:e}):a.jsx(a.Fragment,{children:w?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[a.jsx(Tt,{className:"animate-spin mb-4",size:48}),a.jsx("p",{className:"font-medium",children:"Hmtar quiz..."})]}):c.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c.map(C=>{var F;const z=zst(C),M=z.status!=="OPEN"&&!r;return a.jsxs("div",{className:`group relative flex flex-col bg-white dark:bg-[#1E1F20] border border-gray-100 dark:border-[#3c4043] rounded-2xl p-6 shadow-sm hover:shadow-xl hover:border-indigo-200 dark:hover:border-indigo-900/40 transition-all duration-300 ${M?"opacity-70":""}`,children:[r&&a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-all transform translate-y-[-5px] group-hover:translate-y-0 z-10",children:[a.jsx("button",{onClick:()=>{g(C),m(!0)},className:"p-2.5 bg-white dark:bg-[#282a2c] hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-gray-500 hover:text-indigo-600 rounded-xl border border-gray-100 dark:border-[#3c4043] shadow-sm transition-all",title:"Redigera",children:a.jsx(Ql,{size:16})}),a.jsx("button",{onClick:()=>T(C.id),className:"p-2.5 bg-white dark:bg-[#282a2c] hover:bg-red-50 dark:hover:bg-red-900/30 text-gray-500 hover:text-red-600 rounded-xl border border-gray-100 dark:border-[#3c4043] shadow-sm transition-all",title:"Ta bort",children:a.jsx(qt,{size:16})})]}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-3 rounded-2xl text-indigo-600 dark:text-indigo-400",children:a.jsx(Pn,{size:24})}),a.jsxs("span",{className:"px-3 py-1 bg-gray-50 dark:bg-[#282a2c] rounded-full text-xs font-bold text-gray-500 dark:text-gray-400 border border-gray-100 dark:border-[#3c4043]",children:[((F=C.questions)==null?void 0:F.length)||0," ",s("quiz.questions_count")]})]}),a.jsx("h3",{className:"font-bold text-lg mb-2 text-gray-900 dark:text-white group-hover:text-indigo-600 transition-colors",children:C.title}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6 line-clamp-2 min-h-[40px]",children:C.description||s("quiz.knowledge_check")}),a.jsxs("div",{className:"mt-auto pt-6 border-t border-gray-50 dark:border-[#282a2c]",children:[a.jsxs("div",{className:`text-xs font-bold mb-4 flex items-center gap-1.5 ${z.status==="OPEN"?"text-emerald-600":"text-amber-600"}`,children:[a.jsx(Tt,{size:14}),z.message]}),a.jsxs("button",{onClick:()=>!M&&h(C),disabled:M,className:`w-full py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-sm ${M?"bg-gray-100 dark:bg-[#282a2c] text-gray-400 cursor-not-allowed border border-gray-200 dark:border-[#3c4043]":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-100 dark:shadow-none transform active:scale-[0.98]"}`,children:[M?a.jsx(Mn,{size:18}):a.jsx(mK,{size:20}),M?"Lst":s("quiz.start_quiz")]})]})]},C.id)})}):a.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center bg-gray-50 dark:bg-[#131314] rounded-3xl border-2 border-dashed border-gray-200 dark:border-[#3c4043]",children:[a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm mb-4",children:a.jsx(Mr,{size:64,className:"text-indigo-200"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:s("quiz.no_quizzes")||"Inga quiz nnu"}),a.jsx("p",{className:"text-gray-500 max-w-sm",children:"Hr dyker de quiz upp som skapas fr den hr kursen eller lggs till i ditt bibliotek."})]})})}),!l&&j==="LIBRARY"&&a.jsxs("div",{className:"p-12 text-center bg-indigo-50 dark:bg-indigo-900/10 rounded-3xl border border-indigo-100 dark:border-indigo-900/20",children:[a.jsx(Mr,{size:64,className:"mx-auto mb-6 text-indigo-300"}),a.jsx("h3",{className:"text-2xl font-extrabold mb-3 text-indigo-900 dark:text-indigo-200",children:"QuizRunner Pro krvs"}),a.jsx("p",{className:"text-indigo-700/70 dark:text-indigo-400/70 max-w-md mx-auto mb-8",children:"Uppgradera till Pro fr att f tillgng till ditt personliga quiz-bibliotek och AI-generering."}),a.jsx("button",{className:"bg-indigo-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition-all",children:"Uppgradera nu"})]}),x&&a.jsx(Rtt,{onClose:()=>{m(!1),g(null)},onSubmit:A,courseId:t,initialData:f,isPro:l}),p&&a.jsx(Ptt,{onClose:()=>b(!1),onSubmit:A}),u&&a.jsx(pQ,{quiz:u,onClose:()=>h(null),onSubmit:E}),v&&a.jsx(Dst,{course:{id:t,name:s("quiz.course_quiz")},currentUser:e,onClose:()=>y(!1),onStartQuiz:C=>{y(!1),h(C)}})]})},$st=({assignment:t})=>{const{isEnabled:e}=Y2();if(!e||!t)return null;const r=t.xpMultiplier>1,n=t.timeBonusMinutes&&t.timeBonusXp;if(!r&&!n)return null;const s=Math.round((t.xpReward||100)*(t.xpMultiplier||1)),i=n?t.timeBonusXp:0,o=s+i;return a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&a.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-orange-500 to-pink-500 text-white px-3 py-1.5 rounded-lg shadow-lg shadow-orange-500/30",children:[a.jsx(F0,{size:16,className:"animate-pulse"}),a.jsxs("span",{className:"font-bold text-sm",children:[t.xpMultiplier,"x XP"]})]}),n&&a.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-purple-500 to-indigo-500 text-white px-3 py-1.5 rounded-lg shadow-lg shadow-purple-500/30",children:[a.jsx(Tt,{size:16}),a.jsxs("span",{className:"font-bold text-sm",children:["+",i," XP"]}),a.jsxs("span",{className:"text-xs opacity-90",children:["(",t.timeBonusMinutes," min)"]})]}),a.jsxs("div",{className:"flex items-center gap-1.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 px-3 py-1.5 rounded-lg border-2 border-amber-300 dark:border-amber-700",children:[a.jsx(di,{size:16}),a.jsxs("span",{className:"font-bold text-sm",children:[n?`${s}-${o}`:s," XP"]})]})]})},Fst={id:"SUBMISSIONS",key:"assignments",name:"Inlmningar",icon:xt,settingsKey:"module_assignments_enabled"},DJ=({courseId:t,currentUser:e,isTeacher:r,mode:n="COURSE"})=>{const[s,i]=N.useState([]),[o,l]=N.useState(!0),[c,d]=N.useState({}),{isEnabled:u,xpMultiplierMax:h,isTimeBonusEnabled:f,isLeaderboardsEnabled:g}=Y2(),[x,m]=N.useState(!1),[p,b]=N.useState(null),[v,y]=N.useState(null),[w,k]=N.useState({title:"",description:"",dueDate:"",xpReward:100,xpMultiplier:1,timeBonusMinutes:0,timeBonusXp:0,showOnLeaderboard:!0}),[j,_]=N.useState([]);N.useEffect(()=>{S()},[t,n]);const S=async()=>{l(!0);try{let C;if(n==="GLOBAL"?C=await O.assignments.getMy(e.id):C=await O.assignments.getByCourse(t),i(C||[]),!r&&C&&C.length>0){const z={};await Promise.all(C.map(async M=>{try{const F=await O.assignments.getMySubmission(M.id,e.id);F&&(z[M.id]=F)}catch{}})),d(z)}}catch(C){console.error("Failed to load assignments",C)}finally{l(!1)}},A=async C=>{C.preventDefault();try{let z;v?z=await O.assignments.update(v,w):n==="GLOBAL"?z=await O.assignments.createGlobal(e.id,w):z=await O.assignments.create(t,e.id,w);for(const M of j)if(M.type==="FILE"&&M.file){const F=new FormData;F.append("file",M.file),await O.assignments.addAttachmentFile(z.id,F)}else(M.type==="LINK"||M.type==="YOUTUBE")&&!M.id&&await O.assignments.addAttachmentLink(z.id,{title:M.title||M.url,url:M.url,type:M.type});m(!1),m(!1),k({title:"",description:"",dueDate:"",xpReward:100,xpMultiplier:1,timeBonusMinutes:0,timeBonusXp:0,showOnLeaderboard:!0}),_([]),y(null),S()}catch(z){console.error(z),alert("Kunde inte spara uppgift")}},T=async C=>{if(window.confirm("r du sker p att du vill ta bort denna uppgift? Alla inlmningar kommer ocks tas bort."))try{await O.assignments.delete(C),i(s.filter(z=>z.id!==C))}catch{alert("Kunde inte ta bort uppgift")}},E=C=>{k({title:C.title,description:C.description,dueDate:C.dueDate,xpReward:C.xpReward||100,xpMultiplier:C.xpMultiplier||1,timeBonusMinutes:C.timeBonusMinutes||0,timeBonusXp:C.timeBonusXp||0,showOnLeaderboard:C.showOnLeaderboard!==!1}),y(C.id),m(!0),window.scrollTo({top:0,behavior:"smooth"})};return a.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Inlmningsuppgifter"}),r&&a.jsx("button",{onClick:()=>{m(!x),x||(y(null),y(null),k({title:"",description:"",dueDate:"",xpReward:100,xpMultiplier:1,timeBonusMinutes:0,timeBonusXp:0,showOnLeaderboard:!0}),_([]))},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700",children:x?"Avbryt":a.jsxs(a.Fragment,{children:[a.jsx(jt,{size:16})," Skapa Ny"]})})]}),x&&a.jsxs("div",{className:"bg-gray-50 dark:bg-[#282a2c] p-6 rounded-xl border border-gray-200 dark:border-[#3c4043] mb-6 animate-in slide-in-from-top-2",children:[a.jsx("h3",{className:"font-bold mb-4 text-gray-800 dark:text-white",children:v?"Redigera Uppgift":"Ny Uppgift"}),a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsx("input",{placeholder:"Titel",className:"w-full p-3 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:w.title,onChange:C=>k({...w,title:C.target.value}),required:!0}),a.jsx("textarea",{placeholder:"Instruktioner...",className:"w-full p-3 rounded-lg border h-32 dark:bg-[#131314] dark:border-[#3c4043] dark:text-white resize-none",value:w.description,onChange:C=>k({...w,description:C.target.value})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Deadline"}),a.jsx("input",{type:"datetime-local",className:"p-3 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:w.dueDate,onChange:C=>k({...w,dueDate:C.target.value}),required:!0})]}),u&&a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-100 dark:border-amber-900/30 space-y-4",children:[a.jsxs("h4",{className:"font-bold text-sm text-amber-800 dark:text-amber-200 flex items-center gap-2",children:[a.jsx(va,{size:16})," Gamification-instllningar"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"XP Multiplikator"}),a.jsxs("select",{className:"w-full p-2.5 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:w.xpMultiplier,onChange:C=>k({...w,xpMultiplier:parseFloat(C.target.value)}),children:[a.jsx("option",{value:"1.0",children:"1.0x (Standard)"}),a.jsx("option",{value:"1.5",children:"1.5x (Boost)"}),a.jsx("option",{value:"2.0",children:"2.0x (Dubbel)"}),a.jsx("option",{value:"3.0",children:"3.0x (Super)"}),a.jsx("option",{value:"5.0",children:"5.0x (Ultra)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Bas XP"}),a.jsx("input",{type:"number",className:"w-full p-2.5 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:w.xpReward,onChange:C=>k({...w,xpReward:parseInt(C.target.value)})})]})]}),f&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t border-amber-100 dark:border-amber-900/30",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1 flex items-center gap-1",children:[a.jsx(Fge,{size:12})," Tidsbonus (minuter)"]}),a.jsx("input",{type:"number",placeholder:"0 (inaktiverad)",className:"w-full p-2.5 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:w.timeBonusMinutes,onChange:C=>k({...w,timeBonusMinutes:parseInt(C.target.value)})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1 flex items-center gap-1",children:[a.jsx(va,{size:12})," Bonus XP"]}),a.jsx("input",{type:"number",className:"w-full p-2.5 rounded-lg border dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:w.timeBonusXp,onChange:C=>k({...w,timeBonusXp:parseInt(C.target.value)})})]})]}),g&&a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:w.showOnLeaderboard,onChange:C=>k({...w,showOnLeaderboard:C.target.checked}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Visa p Leaderboard"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-4 rounded-lg border border-gray-200 dark:border-[#3c4043]",children:[a.jsx("h4",{className:"font-bold text-sm mb-3",children:"Bifoga Material"}),a.jsx("div",{className:"space-y-3 mb-4",children:j.map((C,z)=>{var M;return a.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-[#131314] p-2 rounded text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[C.type==="FILE"&&a.jsx(K0,{size:14}),C.type==="LINK"&&a.jsx(Gu,{size:14}),C.type==="YOUTUBE"&&a.jsx(U4,{size:14}),a.jsx("span",{className:"truncate",children:C.title||((M=C.file)==null?void 0:M.name)})]}),a.jsx("button",{type:"button",onClick:()=>_(j.filter((F,D)=>D!==z)),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:a.jsx(qt,{size:14})})]},z)})}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("label",{className:"cursor-pointer bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-100",children:[a.jsx(K0,{size:16})," Ladda upp fil",a.jsx("input",{type:"file",className:"hidden",onChange:C=>{C.target.files[0]&&_([...j,{type:"FILE",file:C.target.files[0]}])}})]}),a.jsxs("button",{type:"button",onClick:()=>{const C=prompt("Ange URL till YouTube-video:");C&&_([...j,{type:"YOUTUBE",url:C,title:"YouTube Video"}])},className:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-red-100",children:[a.jsx(U4,{size:16})," YouTube"]}),a.jsxs("button",{type:"button",onClick:()=>{const C=prompt("Ange Lnk URL:"),z=C?prompt("Ange Titel (valfritt):"):null;C&&_([...j,{type:"LINK",url:C,title:z||C}])},className:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-blue-100",children:[a.jsx(Gu,{size:16})," Lnk"]})]})]}),a.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2.5 rounded-lg font-bold hover:bg-indigo-700",children:v?"Spara ndringar":"Publicera Uppgift"})]})]}),a.jsxs("div",{className:"space-y-4",children:[s.length===0&&!o&&a.jsxs("div",{className:"text-center py-12 text-gray-400 border-2 border-dashed border-gray-200 dark:border-[#3c4043] rounded-xl",children:[a.jsx(xt,{size:48,className:"mx-auto mb-2 opacity-20"}),a.jsx("p",{children:"Inga uppgifter n."})]}),s.map(C=>a.jsx(Bst,{assignment:C,isTeacher:r,currentUser:e,expanded:p===C.id,toggleExpand:()=>b(p===C.id?null:C.id),preloadedSubmission:c[C.id],onUploadSuccess:()=>S(),onDelete:()=>T(C.id),onEdit:()=>E(C)},C.id))]})]})},Bst=({assignment:t,isTeacher:e,currentUser:r,expanded:n,toggleExpand:s,preloadedSubmission:i,onUploadSuccess:o,onDelete:l,onEdit:c})=>{const[d,u]=N.useState(i),[h,f]=N.useState([]),[g,x]=N.useState(null),[m,p]=N.useState(!1);N.useEffect(()=>{i&&u(i)},[i]),N.useEffect(()=>{n&&e&&O.assignments.getSubmissions(t.id).then(f)},[n,e,t.id]);const b=async()=>{if(!g)return;p(!0);const y=new FormData;y.append("file",g);try{await O.assignments.submit(t.id,r.id,y),alert("Uppgiften inlmnad!"),x(null),o&&o()}catch{alert("Fel vid inlmning.")}finally{p(!1)}},v=async(y,w)=>{try{await O.assignments.grade(y,w,"Betygsatt via dashboard"),f(k=>k.map(j=>j.id===y?{...j,grade:w}:j))}catch{alert("Kunde inte stta betyg")}};return a.jsxs("div",{className:`bg-white dark:bg-[#1E1F20] rounded-xl border ${n?"border-indigo-500 shadow-md ring-1 ring-indigo-500":"border-gray-200 dark:border-[#3c4043]"} transition-all overflow-hidden`,children:[a.jsxs("div",{onClick:s,className:"p-5 flex justify-between items-center cursor-pointer hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`p-3 rounded-xl ${n?"bg-indigo-600 text-white":"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400"} transition-colors`,children:a.jsx(xt,{size:20})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:t.title}),a.jsxs("p",{className:`text-xs flex items-center gap-1 mt-1 ${new Date(t.dueDate)<new Date?"text-red-500 font-bold":"text-gray-500"}`,children:[a.jsx(Tt,{size:12})," Deadline: ",new Date(t.dueDate).toLocaleString()]}),a.jsx("div",{className:"mt-2",children:a.jsx($st,{assignment:t})})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[e&&a.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[a.jsx("button",{onClick:y=>{y.stopPropagation(),c()},className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:"Redigera",children:a.jsx(Zl,{size:16})}),a.jsx("button",{onClick:y=>{y.stopPropagation(),l()},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Ta bort",children:a.jsx(qt,{size:16})})]}),!e&&(d?a.jsxs("span",{className:"bg-green-100 text-green-700 text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1",children:[a.jsx(nr,{size:14})," Inlmnad"]}):a.jsxs("span",{className:"bg-amber-100 text-amber-700 text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1",children:[a.jsx(Er,{size:14})," Ej inlmnad"]})),n?a.jsx(J2,{size:20,className:"text-gray-400"}):a.jsx(Mo,{size:20,className:"text-gray-400"})]})]}),n&&a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-[#3c4043] bg-gray-50/50 dark:bg-[#131314]",children:[a.jsxs("div",{className:"prose dark:prose-invert max-w-none mb-8 text-gray-700 dark:text-gray-300 whitespace-pre-wrap bg-white dark:bg-[#1E1F20] p-4 rounded-xl border border-gray-200 dark:border-[#3c4043]",children:[t.description,t.description]}),t.attachments&&t.attachments.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h5",{className:"font-bold text-sm text-gray-500 uppercase mb-3",children:"Material & Resurser"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.attachments.map(y=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-3 rounded-lg border border-gray-200 dark:border-[#3c4043] flex items-center gap-3 hover:border-indigo-300 transition-colors",children:[y.type==="FILE"&&a.jsx("div",{className:"bg-indigo-100 p-2 rounded text-indigo-600",children:a.jsx(K0,{size:16})}),y.type==="LINK"&&a.jsx("div",{className:"bg-blue-100 p-2 rounded text-blue-600",children:a.jsx(Gu,{size:16})}),y.type==="YOUTUBE"&&a.jsx("div",{className:"bg-red-100 p-2 rounded text-red-600",children:a.jsx(U4,{size:16})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("div",{className:"font-bold text-sm truncate",children:y.name}),a.jsx("a",{href:`${window.location.origin}${y.url.startsWith("/")?"":"/"}${y.url}`,target:"_blank",rel:"noreferrer",className:"text-xs text-indigo-500 hover:underline truncate block",children:y.type==="FILE"?"Ladda ner fil":"ppna lnk"})]})]},y.id))})]}),e?a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] overflow-hidden shadow-sm",children:[a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#282a2c] border-b border-gray-100 dark:border-[#3c4043] font-bold text-sm text-gray-500 uppercase",children:["Inlmningar (",h.length,")"]}),a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"text-xs text-gray-500 border-b border-gray-100 dark:border-[#3c4043]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Student"}),a.jsx("th",{className:"p-4",children:"Datum"}),a.jsx("th",{className:"p-4",children:"Fil"}),a.jsx("th",{className:"p-4 text-right",children:"Betyg"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:[h.map(y=>{var w;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c]/50",children:[a.jsx("td",{className:"p-4 font-medium text-gray-900 dark:text-white",children:(w=y.student)==null?void 0:w.fullName}),a.jsx("td",{className:"p-4 text-gray-500",children:new Date(y.submittedAt).toLocaleDateString()}),a.jsx("td",{className:"p-4",children:a.jsxs("a",{href:`${window.location.origin}${y.fileUrl}`,target:"_blank",rel:"noreferrer",className:"text-indigo-600 hover:underline flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-lg w-fit",children:[a.jsx(Rn,{size:14})," ",y.fileName]})}),a.jsx("td",{className:"p-4 text-right flex justify-end gap-1",children:["IG","G","VG"].map(k=>a.jsx("button",{onClick:()=>v(y.id,k),className:`px-3 py-1 rounded-lg text-xs font-bold border transition-colors ${y.grade===k?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-[#282a2c] text-gray-500 border-gray-200 dark:border-[#3c4043] hover:border-indigo-300"}`,children:k},k))})]},y.id)}),h.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-8 text-center text-gray-400 italic",children:"Inga studenter har lmnat in n."})})]})]})]}):a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] p-8 rounded-xl border border-gray-200 dark:border-[#3c4043] flex flex-col items-center justify-center text-center shadow-sm",children:d?a.jsxs("div",{className:"animate-in zoom-in",children:[a.jsx("div",{className:"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:a.jsx(nr,{size:40})}),a.jsx("h4",{className:"font-bold text-xl text-gray-900 dark:text-white mb-1",children:"Inlmning mottagen!"}),a.jsxs("p",{className:"text-gray-500 mb-6",children:["Fil: ",a.jsx("span",{className:"font-mono text-indigo-600",children:d.fileName})," ",a.jsx("br",{})," ",new Date(d.submittedAt).toLocaleString()]}),d.grade?a.jsxs("div",{className:"inline-block px-6 py-3 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold border border-indigo-100 text-lg shadow-sm",children:["Betyg: ",d.grade]}):a.jsx("span",{className:"text-sm bg-gray-100 dark:bg-[#282a2c] text-gray-600 dark:text-gray-400 px-4 py-2 rounded-lg font-medium",children:"Lraren har inte rttat n."})]}):a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx(Xa,{size:48,className:"text-indigo-200 mx-auto mb-4"}),a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Ladda upp din lsning"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Ladda upp dokument, kod eller bilder (Max 500MB)"}),a.jsx("div",{className:"relative mb-4",children:a.jsx("input",{type:"file",onChange:y=>x(y.target.files[0]),className:`block w-full text-sm text-slate-500\r
                                              file:mr-4 file:py-2.5 file:px-4\r
                                              file:rounded-full file:border-0\r
                                              file:text-sm file:font-bold\r
                                              file:bg-indigo-50 file:text-indigo-700\r
                                              hover:file:bg-indigo-100\r
                                              cursor-pointer`})}),g&&a.jsx("button",{onClick:b,disabled:m,className:"w-full bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-all disabled:opacity-50",children:m?"Laddar upp...":"Skicka in uppgift"})]})})]})]})},Ust=({categories:t,activeCategory:e,onSelectCategory:r,isTeacher:n,onCreateCategory:s})=>a.jsxs("div",{className:"w-64 border-r border-border h-[calc(100vh-6rem)] overflow-y-auto p-4 flex flex-col gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[a.jsx("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"Kategorier"}),n&&a.jsx("button",{onClick:s,className:"text-muted-foreground hover:text-primary transition-colors",title:"Skapa ny kategori",children:a.jsx(jt,{size:14})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("button",{onClick:()=>r(null),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ${e?"hover:bg-accent text-foreground/80":"bg-primary/10 text-primary font-medium"}`,children:[a.jsx(xge,{size:16}),"Alla trdar"]}),t.map(i=>a.jsxs("button",{onClick:()=>r(i),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ${(e==null?void 0:e.id)===i.id?"bg-primary/10 text-primary font-medium":"hover:bg-accent text-foreground/80"}`,children:[i.teacherOnly?a.jsx(gt,{size:16,className:"text-amber-500"}):a.jsx(Yl,{size:16}),i.name]},i.id))]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(va,{size:12,className:"text-yellow-500"})," Trendar just nu"]}),a.jsx("div",{className:"space-y-3",children:a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Inga trendande trdar just nu."})})]})]}),Kst=({threads:t,onSelectThread:e,onNewThread:r})=>a.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-transparent gap-6",children:[a.jsxs("div",{className:"bg-card rounded-xl border border-border/50 p-3 shadow-sm flex items-center justify-between gap-4 cursor-pointer hover:border-primary/50 transition-colors group",onClick:r,children:[a.jsx("div",{className:"text-muted-foreground text-sm pl-2 group-hover:text-foreground transition-colors",children:"Starta en ny diskussion..."}),a.jsx("button",{className:"bg-primary text-primary-foreground w-8 h-8 rounded-lg flex items-center justify-center shadow-sm hover:scale-105 transition-transform",children:a.jsx(jt,{size:18})})]}),a.jsx("div",{className:"flex-1 space-y-4 pb-6",children:t.length===0?a.jsxs("div",{className:"text-center py-20 text-muted-foreground bg-card/50 rounded-xl border border-border/50 border-dashed",children:[a.jsx(er,{size:48,className:"mx-auto mb-4 opacity-20"}),a.jsx("p",{children:"Inga trdar i denna kategori n."}),a.jsx("button",{onClick:r,className:"text-primary font-medium hover:underline mt-2",children:"Bli den frsta att starta en!"})]}):t.map(n=>{var s,i,o,l,c;return a.jsxs("div",{onClick:()=>e(n),className:"group bg-card hover:bg-card/80 border border-border/50 rounded-2xl p-6 cursor-pointer transition-all hover:shadow-md hover:-translate-y-0.5 flex flex-col gap-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center font-bold text-sm shrink-0",children:(i=(s=n.author)==null?void 0:s.firstName)==null?void 0:i[0]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-sm",children:[(o=n.author)==null?void 0:o.firstName," ",(l=n.author)==null?void 0:l.lastName]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(n.createdAt).toLocaleDateString()})]})]}),a.jsx("span",{className:"text-xs font-medium px-2 py-1 bg-violet-100 text-violet-700 rounded-md",children:"Diskussion"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg mb-2 text-foreground group-hover:text-primary transition-colors",children:n.title}),a.jsx("p",{className:"text-muted-foreground text-sm line-clamp-3 leading-relaxed",children:n.content})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsxs("button",{className:"flex items-center gap-2 text-xs font-medium text-muted-foreground bg-secondary/50 px-3 py-1.5 rounded-lg hover:bg-secondary transition-colors",children:[a.jsx(er,{size:14}),((c=n.posts)==null?void 0:c.length)>0?`${n.posts.length} Svar`:"Svara"]}),n.locked&&a.jsxs("span",{className:"flex items-center gap-1 text-xs text-red-500 bg-red-50 px-2 py-1 rounded-md",children:[a.jsx(Mn,{size:12})," Lst"]})]})]},n.id)})})]}),Gst=({thread:t,currentUser:e,onBack:r,onReply:n,onReact:s})=>{var h,f,g,x,m,p;const[i,o]=N.useState(""),[l,c]=N.useState(!1),d=(b,v)=>{s&&s(b,v)},u=async()=>{i.trim()&&(c(!0),await n(i),o(""),c(!1))};return a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:r,className:"p-2 hover:bg-accent rounded-full transition-colors",title:"Tillbaka",children:a.jsx(Wl,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-2xl font-bold truncate",children:t.title}),a.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:["Skapad av ",a.jsxs("span",{className:"font-medium text-foreground",children:[(h=t.author)==null?void 0:h.firstName," ",(f=t.author)==null?void 0:f.lastName]}),((x=(g=t.author)==null?void 0:g.gamificationProfile)==null?void 0:x.forumRankIcon)&&a.jsx("span",{className:"text-lg",title:"Forum Rank",children:t.author.gamificationProfile.forumRankIcon})]})]}),a.jsxs("button",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-violet-100 dark:bg-violet-900/30 text-violet-700 dark:text-violet-300 rounded-full text-xs font-medium hover:bg-violet-200 dark:hover:bg-violet-900/50 transition-colors",children:[a.jsx(dr,{size:14}),"Sammanfatta med AI"]})]}),a.jsxs("div",{className:"bg-card border border-border/50 rounded-xl p-6 shadow-sm",children:[a.jsx("div",{className:"prose dark:prose-invert max-w-none text-foreground",dangerouslySetInnerHTML:{__html:t.content}}),a.jsxs("div",{className:"flex items-center gap-4 mt-6 pt-4 border-t border-border/50",children:[a.jsxs("button",{className:"flex items-center gap-1 text-sm text-muted-foreground hover:text-primary transition-colors",children:[a.jsx(KD,{size:16})," Gilla"]}),a.jsxs("button",{className:"flex items-center gap-1 text-sm text-muted-foreground hover:text-primary transition-colors",children:[a.jsx(Lr,{size:16})," lska"]})]})]}),a.jsxs("div",{className:"relative flex py-2 items-center",children:[a.jsx("div",{className:"flex-grow border-t border-border"}),a.jsxs("span",{className:"flex-shrink-0 mx-4 text-muted-foreground text-xs uppercase tracking-widest font-semibold",children:[((m=t.posts)==null?void 0:m.length)||0," Svar"]}),a.jsx("div",{className:"flex-grow border-t border-border"})]}),a.jsx("div",{className:"space-y-6",children:(p=t.posts)==null?void 0:p.map(b=>{var v,y,w,k,j,_;return a.jsxs("div",{className:"flex gap-4 group",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center text-sm font-bold shrink-0 mt-1",children:(y=(v=b.author)==null?void 0:v.firstName)==null?void 0:y[0]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"bg-muted/30 p-5 rounded-2xl rounded-tl-none border border-border/50",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("span",{className:"font-semibold text-sm flex items-center gap-1",children:[(w=b.author)==null?void 0:w.firstName," ",(k=b.author)==null?void 0:k.lastName,((_=(j=b.author)==null?void 0:j.gamificationProfile)==null?void 0:_.forumRankIcon)&&a.jsx("span",{className:"text-base",title:"Forum Rank",children:b.author.gamificationProfile.forumRankIcon})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(b.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsx("div",{className:"text-sm text-foreground/90 whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:b.content}})]}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsxs("button",{onClick:()=>d(b.id,"LIKE"),className:"text-xs text-muted-foreground hover:text-primary flex items-center gap-1",children:[a.jsx(KD,{size:12})," Gilla"]}),a.jsxs("button",{onClick:()=>d(b.id,"HEART"),className:"text-xs text-muted-foreground hover:text-red-500 flex items-center gap-1",children:[a.jsx(Lr,{size:12})," lska"]})]})]})]},b.id)})}),a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"border border-border rounded-xl overflow-hidden shadow-sm focus-within:ring-2 focus-within:ring-primary/20 transition-all bg-card",children:[a.jsx(Ab,{value:i,onChange:o,theme:"snow",placeholder:"Skriv ett svar...",modules:{toolbar:[["bold","italic","underline"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}]]},className:"bg-card"}),a.jsxs("div",{className:"flex justify-between items-center bg-muted/20 p-2 px-3",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Var vnlig och hll god ton."}),a.jsxs("button",{onClick:u,disabled:l||!i,className:"bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-1.5 rounded-lg text-sm font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[a.jsx(Wr,{size:14}),"Skicka svar"]})]})]})})]})},qst=({course:t})=>t?a.jsxs("div",{className:"w-80 hidden xl:flex flex-col gap-6 p-4 border-l border-border h-[calc(100vh-6rem)] sticky top-0 overflow-y-auto",children:[a.jsxs("div",{className:"bg-card rounded-xl p-5 border border-border/50 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-lg mb-1",children:t.name}),a.jsx("p",{className:"text-muted-foreground text-sm mb-4 line-clamp-3",children:t.description}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[a.jsx(zt,{size:16}),a.jsxs("span",{children:[t.startDate,"  ",t.endDate]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-4",children:"Lrare"}),t.teacher?a.jsxs("div",{className:"flex flex-col items-center p-6 bg-card rounded-2xl border border-border/50 shadow-sm text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center text-primary shrink-0 mb-3 overflow-hidden",children:t.teacher.avatarUrl?a.jsx("img",{src:t.teacher.avatarUrl,alt:"Teacher",className:"w-full h-full object-cover"}):a.jsx(jr,{size:32})}),a.jsxs("h3",{className:"font-semibold text-base mb-0.5",children:[t.teacher.firstName," ",t.teacher.lastName]}),a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium bg-cyan-100 text-cyan-800 mb-4 dark:bg-cyan-900/30 dark:text-cyan-300",children:"Huvudlrare"}),a.jsx("div",{className:"w-full space-y-2",children:a.jsxs("div",{className:"group flex items-center gap-3 text-sm p-2 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer text-muted-foreground hover:text-foreground",children:[a.jsx("div",{className:"p-1.5 rounded-md bg-secondary text-foreground group-hover:bg-background transition-colors border border-transparent group-hover:border-border",children:a.jsx(Yl,{size:14})}),a.jsx("span",{className:"truncate",children:"Skicka meddelande"})]})})]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ingen lrare tilldelad."})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3 flex items-center justify-between",children:["Deltagare",a.jsx("span",{className:"bg-secondary px-2 py-0.5 rounded-full text-[10px] text-foreground",children:t.students?t.students.length:0})]}),a.jsxs("div",{className:"space-y-2",children:[t.students&&t.students.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center gap-3 hover:bg-accent/50 p-1.5 rounded-lg transition-colors cursor-pointer",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary/50 flex items-center justify-center text-muted-foreground shrink-0 overflow-hidden",children:e.avatarUrl?a.jsx("img",{src:e.avatarUrl,alt:e.firstName,className:"w-full h-full object-cover"}):a.jsx(jr,{size:14})}),a.jsxs("p",{className:"text-sm",children:[e.firstName," ",e.lastName]})]},e.id)),t.students&&t.students.length>5&&a.jsxs("p",{className:"text-xs text-muted-foreground pl-2 pt-1 hover:text-primary cursor-pointer transition-colors",children:["+ ",t.students.length-5," till..."]})]})]})]}):null,Vst=({isOpen:t,onClose:e,onSubmit:r,categoryName:n})=>{const[s,i]=N.useState(""),[o,l]=N.useState(""),[c,d]=N.useState(!1),u=async h=>{h.preventDefault(),!(!s.trim()||!o.trim())&&(d(!0),await r(s,o),d(!1),i(""),l(""),e())};return t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between bg-gray-50/50 rounded-t-2xl",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Starta ny diskussion"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["I kategori: ",a.jsx("span",{className:"font-medium text-primary",children:n})]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:a.jsx(Je,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("form",{onSubmit:u,className:"p-6 space-y-6 overflow-y-auto",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(f5,{size:16,className:"text-primary"}),"Rubrik"]}),a.jsx("input",{type:"text",value:s,onChange:h=>i(h.target.value),required:!0,autoFocus:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent transition-all outline-none text-lg font-medium",placeholder:"Vad vill du diskutera?"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(Vfe,{size:16,className:"text-primary"}),"Innehll"]}),a.jsx("textarea",{value:o,onChange:h=>l(h.target.value),required:!0,rows:8,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent transition-all outline-none resize-none leading-relaxed",placeholder:"Skriv ditt inlgg hr..."})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2.5 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-xl transition-colors",children:"Avbryt"}),a.jsxs("button",{type:"submit",disabled:c||!s.trim()||!o.trim(),className:"px-8 py-2.5 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition-all shadow-md shadow-blue-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 hover:scale-[1.02] active:scale-95",children:[c?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(Wr,{size:18}),"Publicera inlgg"]})]})]})]})}):null},Hst=({isOpen:t,onClose:e,onSubmit:r})=>{const[n,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(!1),[d,u]=N.useState(!1),h=async f=>{f.preventDefault(),n.trim()&&(u(!0),await r(n,i,l),u(!1),s(""),o(""),c(!1),e())};return t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between bg-violet-50/50 rounded-t-2xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-100 text-violet-600 flex items-center justify-center",children:a.jsx(lK,{size:24})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Skapa ny kategori"})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-violet-100 rounded-lg transition-colors",children:a.jsx(Je,{className:"w-5 h-5 text-gray-400"})})]}),a.jsxs("form",{onSubmit:h,className:"p-6 space-y-5 overflow-y-auto",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Kategorinman"}),a.jsx("input",{type:"text",value:n,onChange:f=>s(f.target.value),required:!0,autoFocus:!0,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-violet-500 focus:border-transparent transition-all outline-none",placeholder:"T.ex. Kursmaterial, Frgor & Svar..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:"Beskrivning"}),a.jsx("textarea",{value:i,onChange:f=>o(f.target.value),rows:3,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-violet-500 focus:border-transparent transition-all outline-none resize-none",placeholder:"Vad ska diskuteras hr?"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100 mt-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(md,{className:"text-violet-500",size:20}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Endast fr lrare"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Endast lrare kan se och skriva i denna kategori"})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l,onChange:f=>c(f.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-violet-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-violet-600"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2.5 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-xl transition-colors",children:"Avbryt"}),a.jsxs("button",{type:"submit",disabled:d||!n.trim(),className:"px-8 py-2.5 bg-violet-600 text-white font-bold rounded-xl hover:bg-violet-700 transition-all shadow-md shadow-violet-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 hover:scale-[1.02] active:scale-95",children:[d?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(sa,{size:18}),"Skapa kategori"]})]})]})]})}):null},Wst=({courseId:t,currentUser:e,course:r,...n})=>{const{API_BASE:s,token:i}=At(),[o,l]=N.useState([]),[c,d]=N.useState(null),[u,h]=N.useState([]),[f,g]=N.useState(null),[x,m]=N.useState(!0),[p,b]=N.useState(!1),[v,y]=N.useState(!1),w=N.useRef(null);N.useEffect(()=>(j(),k(),()=>{w.current&&w.current.deactivate()}),[t]),N.useEffect(()=>{c?_(c.id):o.length>0&&d(o[0])},[c,o]);const k=()=>{if(!i||i==="undefined"||i==="null")return;const z=`${s.replace(/\/api\/?$/,"")}/ws-forum`,M=Xb.over(()=>new T5(z));M.connectHeaders={Authorization:`Bearer ${i}`},M.onConnect=()=>{console.log("Connected to Forum WebSocket"),M.subscribe(`/topic/course/${t}/forum`,F=>{const D=JSON.parse(F.body);Ae.success(`Ny diskussion: ${D.title}`),h(L=>[D,...L])})},M.activate(),w.current=M},j=async()=>{try{const z=await(await fetch(`${s}/forum/course/${t}/categories`,{headers:{Authorization:`Bearer ${i}`}})).json();l(z)}catch(C){console.error("Failed to fetch categories",C)}},_=async C=>{m(!0);try{const M=await(await fetch(`${s}/forum/category/${C}/threads`,{headers:{Authorization:`Bearer ${i}`}})).json();h(M.content||[])}catch(z){console.error("Error fetching threads",z)}finally{m(!1)}},S=async(C,z,M)=>{try{(await fetch(`${s}/forum/course/${t}/category`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({name:C,description:z||"",teacherOnly:M})})).ok?(Ae.success("Kategori skapad!"),j()):Ae.error("Kunde inte skapa kategori")}catch{Ae.error("Fel vid skapande av kategori")}},A=async(C,z)=>{try{(await fetch(`${s}/forum/category/${c.id}/thread`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({userId:e.id,title:C,content:z})})).ok&&Ae.success("Inlgg publicerat!")}catch{Ae.error("Misslyckades att skapa trd")}},T=async C=>{if(f)try{const M=await(await fetch(`${s}/forum/thread/${f.id}/reply`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({userId:e.id,content:C})})).json(),F={...f};F.posts||(F.posts=[]),F.posts.push(M),g(F)}catch{Ae.error("Misslyckades att svara")}},E=async(C,z)=>{try{await fetch(`${s}/forum/post/${C}/react`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({userId:e.id,type:z})}),Ae.success("Reagerat!")}catch(M){console.error(M)}};return a.jsxs("div",{className:"flex gap-4 items-start w-full min-h-[600px]",children:[a.jsx(Ust,{categories:o,activeCategory:c,onSelectCategory:d,isTeacher:n.isTeacher||e&&(e.role==="TEACHER"||e.role==="ADMIN"),onCreateCategory:()=>y(!0)}),a.jsx("div",{className:"flex-1 min-w-0",children:f?a.jsx(Gst,{thread:f,currentUser:e,onBack:()=>g(null),onReply:T,onReact:E}):a.jsx(Kst,{threads:u,onSelectThread:g,onNewThread:()=>b(!0)})}),a.jsx(Vst,{isOpen:p,onClose:()=>b(!1),onSubmit:A,categoryName:c==null?void 0:c.name}),a.jsx(Hst,{isOpen:v,onClose:()=>y(!1),onSubmit:S}),a.jsx(qst,{course:r})]})},Xst={id:"FORUM",name:"EduForum",version:"2.0.1",description:"Diskussionsforum fr kurser med trdar och svar.",icon:er,settingsKey:"module_forum_enabled",permissions:["READ","WRITE"]},Yst=t=>a.jsx("div",{className:"animate-in fade-in h-full",children:a.jsx(Wst,{...t})}),Zst={id:"core_participants",name:"Course Participants",version:"1.0.0",description:"Hanterar deltagarlistor och antagning.",icon:vt,isCore:!0,settingsKey:null,permissions:["READ","WRITE"]},Qst=({courseId:t,isTeacher:e})=>{var p,b,v;const{t:r}=nt(),[n,s]=N.useState(null),[i,o]=N.useState([]),[l,c]=N.useState(!0),[d,u]=N.useState({});N.useEffect(()=>{h()},[t]);const h=async()=>{c(!0);try{const[y,w]=await Promise.all([O.courses.getOne(t),e?O.users.getAll(0,1e3):Promise.resolve([])]);if(s(y),o((w==null?void 0:w.content)||w||[]),e&&y.students){const k={};await Promise.all(y.students.map(async j=>{try{const _=await O.courses.getResult(t,j.id);_&&(k[j.id]=_)}catch{}})),u(k)}}catch(y){console.error(y)}finally{c(!1)}},f=async y=>{try{await O.courses.enroll(t,y),alert("Student tillagd!"),h()}catch{alert("Fel vid tillggning")}},g=async(y,w)=>{try{await O.courses.setResult(t,y,w),u(k=>({...k,[y]:{...k[y],status:w}}))}catch{alert(r("course.error_occurred"))}},x=((p=n==null?void 0:n.students)==null?void 0:p.map(y=>y.id))||[],m=i.filter(y=>{var k;return(typeof y.role=="string"?y.role:(k=y.role)==null?void 0:k.name)==="STUDENT"&&!x.includes(y.id)});return l?a.jsx("div",{className:"p-4 text-gray-500",children:"Laddar deltagare..."}):n?a.jsx("div",{className:"space-y-8 animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl shadow-sm border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center bg-gray-50 dark:bg-[#131314]",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:r("course.participants")}),e&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{id:"studentSelect",className:"text-sm border dark:border-[#3c4043] p-2 rounded-lg w-64 bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:r("course.select_student")}),m.map(y=>a.jsxs("option",{value:y.id,children:[y.fullName," (",y.username,")"]},y.id))]}),a.jsxs("button",{onClick:()=>{const y=document.getElementById("studentSelect").value;y&&f(y)},className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(jt,{size:16})," ",r("course.add_student")]})]})]}),a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#282a2c] text-gray-500 dark:text-gray-400 uppercase",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:r("profile.firstname")}),a.jsx("th",{className:"p-4",children:r("auth.username")}),a.jsx("th",{className:"p-4",children:r("course.role")}),a.jsx("th",{className:"p-4",children:r("course.status")}),e&&a.jsx("th",{className:"p-4 text-right",children:"Resultat (Certifikat)"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:[((b=n.students)==null?void 0:b.length)===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:e?5:4,className:"p-6 text-center text-gray-500 italic",children:"Inga deltagare registrerade."})}),(v=n.students)==null?void 0:v.map(y=>{var k;const w=((k=d[y.id])==null?void 0:k.status)||"PENDING";return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c]/50 transition-colors",children:[a.jsx("td",{className:"p-4 font-bold text-gray-900 dark:text-white align-middle",children:y.fullName}),a.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400 align-middle",children:y.username}),a.jsx("td",{className:"p-4 align-middle",children:a.jsx("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-0.5 rounded text-xs font-bold",children:"STUDENT"})}),a.jsx("td",{className:"p-4 text-green-600 dark:text-green-400 font-bold align-middle",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(age,{size:14})," ",r("course.active")]})}),e&&a.jsx("td",{className:"p-4 align-middle",children:a.jsx("div",{className:"flex justify-end gap-2",children:a.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-[#3c4043] rounded-lg p-1",children:[a.jsx("button",{onClick:()=>g(y.id,"PASSED"),title:r("course.mark_passed"),className:`p-1.5 rounded-md transition-all ${w==="PASSED"?"bg-green-500 text-white shadow-md":"text-gray-400 hover:text-green-600"}`,children:a.jsx(nr,{size:16})}),a.jsx("button",{onClick:()=>g(y.id,"FAILED"),title:r("course.mark_failed"),className:`p-1.5 rounded-md transition-all ${w==="FAILED"?"bg-red-500 text-white shadow-md":"text-gray-400 hover:text-red-600"}`,children:a.jsx(eo,{size:16})}),a.jsx("button",{onClick:()=>g(y.id,"PENDING"),title:"terstll",className:`p-1.5 rounded-md transition-all ${w==="PENDING"?"bg-white text-gray-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:a.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current opacity-50"})})]})})})]},y.id)})]})]})]})}):null},Jst=({course:t,currentUser:e,API_BASE:r,token:n})=>{const{t:s,i18n:i}=nt(),[o,l]=N.useState([]),[c,d]=N.useState(null),[u,h]=N.useState({}),[f,g]=N.useState(!1),[x,m]=N.useState({title:"",description:"",startTime:"",endTime:"",type:"LESSON"});N.useEffect(()=>{p()},[t.id]);const p=()=>{O.events.getByCourse(t.id).then(k=>l(Array.isArray(k)?k:[])).catch(k=>console.error(k))},b=async k=>{k.preventDefault();try{const j={...x,courseId:t.id,startTime:new Date(x.startTime).toISOString(),endTime:new Date(x.endTime).toISOString()};await O.events.create(j),g(!1),p()}catch(j){console.error(j),alert(s("attendance.create_error"))}},v=k=>{d(k),h({}),O.attendance.getByEvent(k.id).then(j=>{const _={};t.students.forEach(S=>{const A=j==null?void 0:j.find(T=>T.student.id===S.id);A?_[S.id]={present:A.present,note:A.note}:_[S.id]={present:!1,note:""}}),h(_)})},y=k=>{h(j=>({...j,[k]:{...j[k],present:!j[k].present}}))},w=async()=>{try{const k=t.students.map(j=>{const _=u[j.id];return O.attendance.mark(c.id,{studentId:j.id,present:_.present,note:_.note})});await Promise.all(k),alert(s("attendance.saved_success")),d(null)}catch(k){console.error(k),alert(s("attendance.save_error"))}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl border shadow-sm",children:[a.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[a.jsx(zt,{size:20,className:"text-indigo-600"})," ",s("attendance.manage_attendance")]}),a.jsxs("button",{onClick:()=>g(!0),className:"bg-indigo-600 text-white px-3 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700",children:[a.jsx(jt,{size:16})," ",s("attendance.new_event")]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(k=>a.jsxs("div",{onClick:()=>v(k),className:"bg-white p-4 rounded-xl border hover:border-indigo-500 cursor-pointer transition-all shadow-sm group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-1 rounded text-xs font-bold uppercase",children:s(`attendance.type_${k.type.toLowerCase()}`)||k.type}),a.jsx("span",{className:"text-gray-400 text-xs",children:new Date(k.startTime).toLocaleDateString()})]}),a.jsx("h4",{className:"font-bold text-gray-900 group-hover:text-indigo-600 transition-colors",children:k.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-2",children:[a.jsx(Tt,{size:12})," ",new Date(k.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",new Date(k.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},k.id))}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("form",{onSubmit:b,className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:s("attendance.create_event_title")}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:s("attendance.event_title")}),a.jsx("input",{type:"text",required:!0,className:"w-full border rounded-lg p-2",value:x.title,onChange:k=>m({...x,title:k.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:s("attendance.event_start")}),a.jsx("input",{type:"datetime-local",required:!0,className:"w-full border rounded-lg p-2",value:x.startTime,onChange:k=>m({...x,startTime:k.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:s("attendance.event_end")}),a.jsx("input",{type:"datetime-local",required:!0,className:"w-full border rounded-lg p-2",value:x.endTime,onChange:k=>m({...x,endTime:k.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:s("attendance.event_type")}),a.jsxs("select",{className:"w-full border rounded-lg p-2",value:x.type,onChange:k=>m({...x,type:k.target.value}),children:[a.jsx("option",{value:"LESSON",children:s("attendance.type_lesson")}),a.jsx("option",{value:"WORKSHOP",children:s("attendance.type_workshop")}),a.jsx("option",{value:"EXAM",children:s("attendance.type_exam")}),a.jsx("option",{value:"OTHER",children:s("attendance.type_other")})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 font-bold",children:s("common.cancel")}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold",children:s("attendance.create_btn")})]})]})}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl h-[80vh] flex flex-col shadow-2xl",children:[a.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-gray-50 rounded-t-xl",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:c.title}),a.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(c.startTime).toLocaleDateString(),"  ",t.students.length," studenter"]})]}),a.jsx("button",{onClick:()=>d(null),children:a.jsx(Je,{className:"text-gray-400 hover:text-gray-600"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"space-y-2",children:t.students.map(k=>{var j,_;return a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-700 rounded-full flex items-center justify-center font-bold text-xs",children:k.fullName?k.fullName[0]:"S"}),a.jsx("span",{className:"font-medium text-gray-700",children:k.fullName})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("button",{onClick:()=>y(k.id),className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 transition-colors ${(j=u[k.id])!=null&&j.present?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200 opacity-60 hover:opacity-100"}`,children:(_=u[k.id])!=null&&_.present?a.jsxs(a.Fragment,{children:[a.jsx(nr,{size:14})," ",s("attendance.present")]}):a.jsxs(a.Fragment,{children:[a.jsx(eo,{size:14})," ",s("attendance.absent")]})})})]},k.id)})})}),a.jsx("div",{className:"p-6 border-t bg-gray-50 rounded-b-xl flex justify-end",children:a.jsxs("button",{onClick:w,className:"bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[a.jsx(sa,{size:18})," ",s("attendance.save_attendance")]})})]})})]})},eit=({course:t,onClose:e,onSubmit:r})=>{const{t:n}=nt(),[s,i]=N.useState({}),o=(d,u)=>{i(h=>({...h,[d]:{...h[d],score:parseInt(u)}}))},l=(d,u)=>{i(h=>({...h,[d]:{...h[d],comment:u}}))},c=d=>{if(d.preventDefault(),!t.evaluation.questions.every((h,f)=>{var g;return(g=s[f])==null?void 0:g.score})){alert(n("evaluation.validation_error"));return}r(t.id,s)};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50 p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-indigo-50 rounded-t-2xl",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-indigo-900",children:n("evaluation.title")}),a.jsxs("p",{className:"text-indigo-700 text-sm",children:[t.name," (",t.courseCode,")"]})]}),a.jsx("button",{onClick:e,children:a.jsx(Je,{className:"text-indigo-400 hover:text-indigo-700"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto space-y-8",children:[a.jsx("p",{className:"text-gray-600 bg-gray-50 p-4 rounded-lg text-sm border",children:n("evaluation.intro")}),t.evaluation.questions.map((d,u)=>{var h;return a.jsxs("div",{className:"border-b pb-6 last:border-0",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex gap-3",children:[a.jsx("span",{className:"bg-indigo-100 text-indigo-700 w-6 h-6 flex items-center justify-center rounded-full text-xs shrink-0",children:u+1}),d]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2",children:n("evaluation.your_rating")}),a.jsx("div",{className:"flex gap-1 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(f=>{var g;return a.jsx("button",{type:"button",onClick:()=>o(u,f),className:`w-8 h-8 rounded-full text-xs font-bold transition-all ${((g=s[u])==null?void 0:g.score)===f?"bg-indigo-600 text-white scale-110 shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:f},f)})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-2 flex items-center gap-1",children:[a.jsx(er,{size:12})," ",n("evaluation.comment_label")]}),a.jsx("textarea",{className:"w-full border rounded-lg p-3 text-sm focus:ring-2 focus:ring-indigo-500 outline-none bg-gray-50 focus:bg-white transition-colors",placeholder:n("evaluation.comment_placeholder"),rows:"2",value:((h=s[u])==null?void 0:h.comment)||"",onChange:f=>l(u,f.target.value)})]})]},u)})]}),a.jsxs("div",{className:"p-6 border-t bg-gray-50 rounded-b-2xl flex justify-end gap-3",children:[a.jsx("button",{onClick:e,className:"px-6 py-2 text-gray-600 font-bold hover:bg-gray-200 rounded-lg",children:n("common.cancel")}),a.jsxs("button",{onClick:c,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-lg flex items-center gap-2",children:[a.jsx(Wr,{size:16})," ",n("evaluation.submit_btn")]})]})]})})},tit=({course:t,onClose:e,onSave:r,isLoading:n})=>{var x,m,p;const{t:s}=nt(),i=["Hur upplevde du kursinnehllet?","Var svrighetsgraden lagom?","Hur fungerade kommunikationen med lraren?"],[o,l]=N.useState(((m=(x=t.evaluation)==null?void 0:x.questions)==null?void 0:m.length)>0?t.evaluation.questions:i),[c,d]=N.useState(((p=t.evaluation)==null?void 0:p.active)||!1),u=()=>{l([...o,""])},h=b=>{const v=[...o];v.splice(b,1),l(v)},f=(b,v)=>{const y=[...o];y[b]=v,l(y)},g=b=>{b.preventDefault();const v=o.filter(y=>y.trim()!=="");r({questions:v,active:c})};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50 p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-indigo-50 rounded-t-2xl",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-indigo-900",children:s("evaluation.teacher_title")||"Hantera Kursutvrdering"}),a.jsx("p",{className:"text-indigo-700 text-sm",children:t.name})]}),a.jsx("button",{onClick:e,children:a.jsx(Je,{className:"text-indigo-400 hover:text-indigo-700"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto space-y-6 flex-1",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-800",children:s("course.status")||"Status"}),a.jsx("p",{className:"text-sm text-gray-500",children:c?s("evaluation.active_desc")||"Utvrderingen r synlig fr studenter.":s("evaluation.inactive_desc")||"Utvrderingen r dold."})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:c,onChange:b=>d(b.target.checked)}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Pn,{size:18,className:"text-indigo-600"}),s("evaluation.questions")||"Frgor"]}),a.jsxs("button",{type:"button",onClick:u,className:"text-sm text-indigo-600 font-bold hover:bg-indigo-50 px-3 py-1 rounded-lg transition-colors flex items-center gap-1",children:[a.jsx(jt,{size:16})," ",s("common.add")||"Lgg till"]})]}),a.jsx("div",{className:"space-y-3",children:o.map((b,v)=>a.jsxs("div",{className:"flex gap-2 items-center group",children:[a.jsx("span",{className:"text-gray-400 font-mono text-xs w-6 text-center",children:v+1}),a.jsx("input",{type:"text",value:b,onChange:y=>f(v,y.target.value),className:"flex-1 border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:`Frga ${v+1}...`}),a.jsx("button",{onClick:()=>h(v),className:"text-gray-300 hover:text-red-500 p-2 transition-colors opacity-0 group-hover:opacity-100",title:s("common.delete"),children:a.jsx(qt,{size:16})})]},v))}),o.length===0&&a.jsx("div",{className:"text-center py-8 text-gray-400 italic text-sm border-2 border-dashed rounded-xl",children:s("evaluation.no_questions")||"Inga frgor tillagda n."})]})]}),a.jsxs("div",{className:"p-6 border-t bg-gray-50 rounded-b-2xl flex justify-end gap-3",children:[a.jsx("button",{onClick:e,className:"px-5 py-2.5 text-gray-600 font-bold hover:bg-gray-200 rounded-xl transition-colors",children:s("common.cancel")}),a.jsxs("button",{onClick:g,disabled:n,className:"px-5 py-2.5 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 shadow-lg hover:shadow-indigo-200 flex items-center gap-2 disabled:opacity-70 transition-all",children:[a.jsx(sa,{size:18}),n?s("common.saving")||"Sparar...":s("common.save_changes")||"Spara ndringar"]})]})]})})},jS=({roomName:t,displayName:e,email:r,id:n,isHost:s=!1,onClose:i,onParticipantJoined:o,onParticipantLeft:l,jitsiDomain:c="meet.eduflexlms.se"})=>{const d=N.useRef(null),u=N.useRef(null),[h,f]=N.useState(!1),[g,x]=N.useState(1),[m,p]=N.useState(!s),[b,v]=N.useState(!s),[y,w]=N.useState(!0);N.useEffect(()=>{const S=c,T=S.includes("localhost")||S.includes("127.0.0.1")?"http":"https",E=document.createElement("script");return E.src=`${T}://${S}/external_api.js`,E.async=!0,E.onload=()=>{w(!1),k(S)},E.onerror=()=>{console.error("Failed to load Jitsi API from",S),w(!1)},document.body.appendChild(E),()=>{u.current&&u.current.dispose()}},[t]);const k=(S=c)=>{if(!d.current||!window.JitsiMeetExternalAPI)return;const A={roomName:t,parentNode:d.current,width:"100%",height:"100%",configOverwrite:{prejoinPageEnabled:!1,startWithAudioMuted:!s,startWithVideoMuted:!s,toolbarButtons:["microphone","camera","desktop","chat","raisehand","participants-pane","tileview","fullscreen","settings"],defaultLanguage:"sv",p2p:{enabled:!1,preferH264:!0,disableP2P:!0,stunServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:meet-jit-si-turnrelay.jitsi.net:443"}]},iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:meet-jit-si-turnrelay.jitsi.net:443"},{urls:"turn:meet.eduflexlms.se:3478?transport=udp",username:"jvb",credential:"eduflex_turn_secret"}],websocket:"wss://"+S+"/xmpp-websocket",openBridgeChannel:"websocket",resolution:480,constraints:{video:{height:{ideal:480,max:720,min:180},width:{ideal:854,max:1280,min:320},frameRate:{ideal:24,max:30}}},callStatsID:"",enableDisplayNameInStats:!1,enableNoisyMicDetection:!1,enableNoAudioDetection:!1,disableAudioLevels:!0,disableSimulcast:!1,enableLayerSuspension:!0,channelLastN:4},interfaceConfigOverwrite:{SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,SHOW_BRAND_WATERMARK:!1,BRAND_WATERMARK_LINK:"",SHOW_CHROME_EXTENSION_BANNER:!1,MOBILE_APP_PROMO:!1,TOOLBAR_ALWAYS_VISIBLE:!0,DEFAULT_BACKGROUND:"#1E1F20",DISABLE_JOIN_LEAVE_NOTIFICATIONS:!1,FILM_STRIP_MAX_HEIGHT:100,DISABLE_FOCUS_INDICATOR:!0,TILE_VIEW_MAX_COLUMNS:3,HIDE_INVITE_MORE_HEADER:!0,DISABLE_RINGING:!0},userInfo:{id:String(n||r||e),displayName:e||"Deltagare",email:r}};try{u.current=new window.JitsiMeetExternalAPI(S,A),u.current.addListener("participantJoined",E=>{x(C=>C+1),o&&o(E)}),u.current.addListener("participantLeft",E=>{x(C=>Math.max(1,C-1)),l&&l(E)});let T=!1;u.current.addListener("videoConferenceJoined",()=>{T=!0,console.log("Successfully joined Jitsi conference")}),u.current.addListener("videoConferenceLeft",()=>{T&&i?(console.log("User naturally left conference, closing modal"),i()):T||console.log("Left conference before fully joining (possibly transient state or lobby)")}),u.current.addListener("knockingParticipant",()=>{console.log("Someone is knocking (lobby active)")}),s&&u.current.addListener("knockingParticipant",E=>{u.current.executeCommand("answerKnockingParticipant",E.id,!0)}),u.current.addListener("audioMuteStatusChanged",({muted:E})=>{p(E)}),u.current.addListener("videoMuteStatusChanged",({muted:E})=>{v(E)})}catch(T){console.error("Failed to initialize Jitsi:",T)}},j=()=>{var S,A;document.fullscreenElement?(document.exitFullscreen(),f(!1)):((A=(S=d.current)==null?void 0:S.parentElement)==null||A.requestFullscreen(),f(!0))},_=()=>{u.current&&u.current.executeCommand("hangup"),i&&i()};return a.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex flex-col",children:[y&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 z-10",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ft,{className:"w-12 h-12 text-indigo-500 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Ansluter till mtet..."}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Laddar Jitsi Meet"})]})}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-900/80 backdrop-blur-sm border-b border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-white",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),a.jsx("span",{className:"font-bold",children:"LIVE"})]}),a.jsx("span",{className:"text-gray-400 text-sm",children:t})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/10 rounded-full text-white text-sm",children:[a.jsx(vt,{size:16}),a.jsx("span",{children:g})]}),a.jsx("button",{onClick:j,className:"p-2 text-white hover:bg-white/10 rounded-lg transition-colors",title:h?"Avsluta helskrm":"Helskrm",children:h?a.jsx(iw,{size:20}):a.jsx(aw,{size:20})}),a.jsx("button",{onClick:_,className:"p-2 text-white hover:bg-red-500 rounded-lg transition-colors",title:"Lmna mtet",children:a.jsx(Je,{size:20})})]})]}),a.jsx("div",{ref:d,className:"flex-1"})]})},rit=({courseId:t,courseName:e,currentUser:r,isTeacher:n})=>{const[s,i]=N.useState(null),[o,l]=N.useState([]),[c,d]=N.useState(!1),[u,h]=N.useState(!1),[f,g]=N.useState(!1),[x,m]=N.useState(null),[p,b]=N.useState({title:"",description:"",scheduledStart:"",scheduledEnd:""});N.useEffect(()=>{v()},[t]);const v=async()=>{try{const S=await O.get(`/live-lessons/course/${t}`)||[],A=S.find(E=>E.status==="LIVE");i(A||null);const T=S.filter(E=>E.status==="SCHEDULED"&&new Date(E.scheduledStart)>new Date).slice(0,3);l(T)}catch(S){console.error("Failed to load live lessons:",S)}},y=S=>e?`${e.replace(/[^a-zA-Z0-9]/g,"-").replace(/-+/g,"-")}-${S}`:`EduFlex-Lesson-${S}`,w=async()=>{g(!0);try{const S=await O.post("/live-lessons",{courseId:t,title:"Live-lektion"}),A=await O.get(`/live-lessons/${S.id}/join`),T=y(S.id),E={...A,roomName:T};m(E),i({...S,...E}),d(!0)}catch(S){console.error("Failed to start lesson:",S),alert("Kunde inte starta lektionen")}finally{g(!1)}},k=async()=>{if(!p.title||!p.scheduledStart){alert("Fyll i titel och starttid");return}g(!0);try{await O.post("/live-lessons",{courseId:t,title:p.title,description:p.description,scheduledStart:p.scheduledStart,scheduledEnd:p.scheduledEnd||null}),h(!1),b({title:"",description:"",scheduledStart:"",scheduledEnd:""}),v()}catch(S){console.error("Failed to schedule lesson:",S),alert("Kunde inte schemalgga lektionen")}finally{g(!1)}},j=async S=>{g(!0);try{n&&S.status==="SCHEDULED"&&await O.post(`/live-lessons/${S.id}/start`);const A=await O.get(`/live-lessons/${S.id}/join`),T=y(S.id),E={...A,roomName:T};m(E),i({...S,...E}),d(!0)}catch(A){console.error("Failed to join lesson:",A),alert("Kunde inte ansluta till lektionen")}finally{g(!1)}},_=async()=>{if(s&&n)try{await O.post(`/live-lessons/${s.id}/end`)}catch(S){console.error("Failed to end lesson:",S)}d(!1),i(null),m(null),v()};return s&&!c?a.jsxs("div",{className:"flex flex-col items-start gap-2",children:[a.jsx("button",{onClick:()=>j(s),disabled:f,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-bold rounded-xl shadow-lg shadow-red-500/25 transition-all animate-pulse",children:f?a.jsx(ft,{size:18,className:"animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Yge,{size:18}),a.jsx("span",{children:"LIVE - G med nu"}),a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})]})}),c&&x&&a.jsx(jS,{roomName:x.roomName,displayName:(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName),email:r==null?void 0:r.email,id:r==null?void 0:r.id,isHost:x.isHost,onClose:_})]}):n?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:w,disabled:f,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-md transition-all",children:f?a.jsx(ft,{size:18,className:"animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(xi,{size:18}),a.jsx("span",{children:"Starta Live"})]})}),a.jsx("button",{onClick:()=>h(!0),className:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-xl transition-colors",title:"Schemalgg lektion",children:a.jsx(zt,{size:18})})]}),o.length>0&&a.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center gap-2",children:[a.jsx(Tt,{size:12}),a.jsxs("span",{children:["Nsta: ",o[0].title," (",new Date(o[0].scheduledStart).toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"}),")"]})]}),u&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-[#3c4043]",children:a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(zt,{className:"text-indigo-500",size:24}),"Schemalgg Live-lektion"]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Titel *"}),a.jsx("input",{type:"text",value:p.title,onChange:S=>b({...p,title:S.target.value}),placeholder:"T.ex. Genomgng Kapitel 5",className:"w-full p-3 border border-gray-200 dark:border-[#3c4043] rounded-xl bg-white dark:bg-[#131314] text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Beskrivning"}),a.jsx("textarea",{value:p.description,onChange:S=>b({...p,description:S.target.value}),placeholder:"Valfri beskrivning...",rows:2,className:"w-full p-3 border border-gray-200 dark:border-[#3c4043] rounded-xl bg-white dark:bg-[#131314] text-gray-900 dark:text-white"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Starttid *"}),a.jsx("input",{type:"datetime-local",value:p.scheduledStart,onChange:S=>b({...p,scheduledStart:S.target.value}),className:"w-full p-3 border border-gray-200 dark:border-[#3c4043] rounded-xl bg-white dark:bg-[#131314] text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Sluttid"}),a.jsx("input",{type:"datetime-local",value:p.scheduledEnd,onChange:S=>b({...p,scheduledEnd:S.target.value}),className:"w-full p-3 border border-gray-200 dark:border-[#3c4043] rounded-xl bg-white dark:bg-[#131314] text-gray-900 dark:text-white"})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-[#3c4043] flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-[#3c4043] rounded-xl transition-colors",children:"Avbryt"}),a.jsxs("button",{onClick:k,disabled:f,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl transition-colors",children:[f?a.jsx(ft,{size:18,className:"animate-spin"}):a.jsx(jt,{size:18}),"Schemalgg"]})]})]})}),c&&x&&a.jsx(jS,{roomName:x.roomName,displayName:(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName),email:r==null?void 0:r.email,isHost:x.isHost,onClose:_})]}):a.jsxs(a.Fragment,{children:[o.length>0&&(()=>{const S=o[0],A=Math.round((new Date(S.scheduledStart)-new Date)/6e4);return A<=30?a.jsx("button",{onClick:()=>j(S),disabled:f,className:"flex items-center gap-2 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 font-bold rounded-xl hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition-colors",children:f?a.jsx(ft,{size:18,className:"animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(xi,{size:18}),a.jsxs("span",{children:["Lektion om ",A," min"]})]})}):null})(),c&&x&&a.jsx(jS,{roomName:x.roomName,displayName:(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName),email:r==null?void 0:r.email,isHost:x.isHost,onClose:_})]})},nit=({currentUser:t})=>{var D,L,K;const{id:e}=uh(),r=Et(),n=zn(),{t:s}=nt(),{isModuleActive:i}=oa(),[o,l]=N.useState(null),[c,d]=N.useState("summary"),[u,h]=N.useState(!0),[f,g]=N.useState(!1),[x,m]=N.useState(!1),[p,b]=N.useState(!1),[v,y]=N.useState(null),[w,k]=N.useState(!1),{API_BASE:j,token:_,setActiveCourseId:S}=At(),A=((D=t==null?void 0:t.role)==null?void 0:D.name)||(t==null?void 0:t.role),T=t&&(A==="TEACHER"||A==="ADMIN"||A==="REKTOR"),E=[{key:"summary",comp:({courseId:$,isTeacher:R,currentUser:Y})=>R?a.jsx(Dtt,{courseId:$}):a.jsx(Ltt,{courseId:$,currentUser:Y}),meta:{name:"Sammanfattning"},icon:a.jsx(wi,{size:18}),enabled:!0,visibleFor:"ALL"},{key:"material",comp:OJ,meta:Ist,icon:a.jsx(gt,{size:18}),enabled:!0,visibleFor:"ALL"},{key:"quiz",comp:IJ,meta:Pst,icon:a.jsx(Pn,{size:18}),enabled:i("QUIZ_BASIC")||i("QUIZ_PRO")||i("QUIZ"),visibleFor:"ALL"},{key:"assignments",comp:DJ,meta:Fst,icon:a.jsx(xt,{size:18}),enabled:i("SUBMISSIONS"),visibleFor:"ALL"},{key:"forum",comp:Yst,meta:Xst,icon:a.jsx(er,{size:18}),enabled:i("FORUM"),visibleFor:"ALL"},{key:"interactive-modules",comp:Ott,meta:{name:"Interaktiva Moduler"},icon:a.jsx(Ha,{size:18}),enabled:i("SCORM")||!0,visibleFor:"ALL"},{key:"students",comp:Qst,meta:Zst,icon:a.jsx(vt,{size:18}),enabled:!0,visibleFor:"TEACHER"},{key:"attendance",comp:({courseId:$,isTeacher:R,currentUser:Y,course:ee,API_BASE:B,token:U})=>R?a.jsxs("div",{className:"space-y-12",children:[a.jsx(Jst,{course:ee,currentUser:Y,API_BASE:B,token:U}),a.jsxs("div",{className:"pt-8 border-t border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[a.jsx(hs,{size:24,className:"text-indigo-600 dark:text-indigo-400"}),"Aktivitetslogg"]}),a.jsx(Att,{courseId:$})]})]}):null,meta:{name:"Nrvaro & Aktivitet"},icon:a.jsx(zt,{size:18}),enabled:!0,visibleFor:"TEACHER"},{key:"kursinformation",comp:({course:$})=>a.jsx(mQ,{skolverketCourse:$==null?void 0:$.skolverketCourse}),meta:{name:"Kursinformation"},icon:a.jsx(gt,{size:18}),enabled:!!(o!=null&&o.skolverketCourse),visibleFor:"ALL"},{key:"grouprooms",comp:({course:$})=>{var R;return(R=$==null?void 0:$.groupRooms)!=null&&R.length?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.groupRooms.map(Y=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#3c4043] rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:Y.name}),a.jsxs("div",{className:"text-sm text-gray-500 mb-4 flex items-center gap-2",children:[a.jsx(xi,{size:14})," ",Y.type]}),a.jsx("a",{href:Y.link,target:"_blank",rel:"noreferrer",className:"block w-full text-center bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg transition-colors",children:"G med"})]},Y.id))}):a.jsx("div",{className:"text-center p-12 text-gray-500",children:"Inga grupprum tillgngliga."})},meta:{name:"Grupprum"},icon:a.jsx(vt,{size:18}),enabled:!0,visibleFor:"ALL"}];N.useEffect(()=>{const $=async Y=>{try{const ee=await O.courses.getResult(Y,t.id);if(y(ee),!ee||ee.status!=="PASSED"){const B=await O.courses.checkCompletion(Y,t.id);k(B)}}catch{}};return e&&(async()=>{h(!0);try{const Y=await O.courses.getOne(e);l(Y),Y&&Y.id&&!T&&$(Y.id)}catch(Y){console.error(Y)}finally{h(!1)}})(),()=>{S(null)}},[e,t,T,S]),N.useEffect(()=>{o&&o.id&&S(o.id)},[o,S]),N.useEffect(()=>{const R=new URLSearchParams(n.search).get("tab");R&&R!==c&&d(R)},[n.search,c]),N.useEffect(()=>{const $=E.find(R=>R.key===c);$&&!$.enabled&&d("material")},[E,c]);const C=$=>{switch($){case"ZOOM":return a.jsx(xi,{size:18});case"TEAMS":return a.jsx(vt,{size:18});case"MEET":return a.jsx(c5,{size:18});default:return a.jsx(fK,{size:18})}},z=$=>{switch($){case"ZOOM":return"bg-blue-600 hover:bg-blue-700 shadow-blue-200";case"TEAMS":return"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200";case"MEET":return"bg-green-600 hover:bg-green-700 shadow-green-200";default:return"bg-gray-700 hover:bg-gray-800"}},M=$=>{switch($){case"ZOOM":return"Zoom";case"TEAMS":return"Teams";case"MEET":return"Google Meet";default:return s("course.connect_classroom")}},F=async $=>{if(!(!o||!o.id)){b(!0);try{const R=await fetch(`${j}/courses/${o.id}/evaluation`,{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify($)});if(R.ok){const Y=await R.json();l(ee=>({...ee,evaluation:Y})),m(!1),alert(s("evaluation.saved_success")||"Utvrdering sparad!")}else throw new Error("Failed to save")}catch(R){console.error(R),alert(s("evaluation.save_error")||"Kunde inte spara utvrderingen.")}finally{b(!1)}}};return u?a.jsx("div",{className:"h-full flex items-center justify-center min-h-[50vh]",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:32})}):o?a.jsxs("div",{className:"max-w-screen-2xl mx-auto pb-20 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start",children:[a.jsxs("aside",{className:"w-full lg:w-72 shrink-0 space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043] p-6",children:[a.jsxs("button",{onClick:()=>r("/"),className:"flex items-center text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 mb-6 font-medium transition-colors text-sm",children:[a.jsx(Wl,{size:16,className:"mr-2"})," ",s("course.back")]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("span",{className:"inline-block bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded text-xs font-mono font-bold mb-2",children:o.courseCode}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-tight mb-2",children:o.name}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex flex-col gap-1",children:[a.jsx("span",{children:(L=o.teacher)==null?void 0:L.fullName}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(zt,{size:12})," ",o.startDate," - ",o.endDate]})]})]}),a.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-100 dark:border-[#3c4043]",children:[a.jsx(rit,{courseId:o.id,courseName:o.name,currentUser:t,isTeacher:T}),o.classroomLink&&a.jsxs("a",{href:o.classroomLink,target:"_blank",rel:"noreferrer",className:`w-full text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 shadow-sm transition-all hover:opacity-90 ${z(o.classroomType)}`,title:s("course.external_classroom_hint")||"Externt klassrum",children:[C(o.classroomType)," Anslut till ",M(o.classroomType)]}),T&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:async()=>{if(confirm("Vill du synka deltagare frn LMS (t.ex. Canvas)?"))try{const $=await fetch(`${j}/lti/nrps/sync/${o.id}`,{method:"POST",headers:{Authorization:`Bearer ${_}`}}),R=await $.json();$.ok?alert(R.message||"Synk startad!"):alert("Fel: "+R.message)}catch($){console.error($),alert("Kunde inte starta synk.")}},className:"w-full bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 px-4 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-colors shadow-sm mb-2",children:[a.jsx(vt,{size:16})," Synka Roster (LTI)"]}),a.jsxs("button",{onClick:()=>m(!0),className:"w-full bg-white dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-gray-50 dark:hover:bg-[#303336] transition-colors shadow-sm mb-2",children:[a.jsx(er,{size:16})," ",s("evaluation.manage_btn")||"Hantera Utvrdering"]}),a.jsxs("button",{onClick:async()=>{if(confirm("Vill du indexera allt material i kursen fr AI-tutorn? Detta kan ta en stund."))try{await O.ai.tutor.ingestCourse(o.id),alert("Indexering startad i bakgrunden. Du kan fortstta arbeta.")}catch($){console.error($),$.message&&$.message.includes("403")?alert(" Denna funktion krver en PRO eller ENTERPRISE licens."):alert("Kunde inte starta indexering.")}},className:"w-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800 px-4 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition-colors shadow-sm",children:[a.jsx(dr,{size:16})," Indexera fr AI"]})]})]})]}),a.jsx("nav",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043] p-2 flex flex-col gap-1 sticky top-6",children:E.map($=>{if(!($.enabled&&($.visibleFor==="ALL"||$.visibleFor==="TEACHER"&&T)))return null;const Y=c===$.key;return a.jsxs("button",{onClick:()=>d($.key),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all duration-200 ${Y?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 font-bold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-[#282a2c] hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:[a.jsx("span",{className:`${Y?"text-indigo-600 dark:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,children:$.icon}),a.jsx("span",{children:s(`course.${$.key}`,$.meta.name)}),Y&&a.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-indigo-600 dark:bg-indigo-400"})]},$.key)})})]}),a.jsxs("main",{className:"flex-1 min-w-0",children:[!T&&((v==null?void 0:v.status)==="PASSED"||w||o.evaluation&&o.evaluation.active)&&a.jsxs("div",{className:"flex flex-wrap gap-3 mb-6 justify-end",children:[((v==null?void 0:v.status)==="PASSED"||w)&&a.jsxs("button",{onClick:async()=>{if((v==null?void 0:v.status)!=="PASSED")try{await O.courses.claimCertificate(o.id,t.id),y({...v,status:"PASSED"})}catch{alert("Kunde inte utfrda certifikat.");return}r(`/certificate/${o.id}`)},className:"bg-gradient-to-r from-amber-200 to-yellow-400 text-amber-900 border border-amber-300 px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:from-amber-300 hover:to-yellow-500 transition-all shadow-sm",children:[a.jsx(vt,{size:16})," ",(v==null?void 0:v.status)==="PASSED"?s("course.view_certificate"):s("course.claim_certificate")]}),o.evaluation&&o.evaluation.active&&a.jsxs("button",{onClick:()=>g(!0),className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-lg hover:shadow-pink-200 transition-all hover:-translate-y-0.5",children:[a.jsx(er,{size:16})," ",s("course.evaluate_course")]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043] p-6 lg:p-8 min-h-[1000px]",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 pb-4 border-b border-gray-100 dark:border-[#3c4043]",children:s(`course.${c}`,(K=E.find($=>$.key===c))==null?void 0:K.meta.name)}),E.map($=>c===$.key&&$.enabled&&a.jsx($.comp,{courseId:o.id,currentUser:t,isTeacher:T,course:o,API_BASE:j,token:_},$.key))]})]})]}),f&&a.jsx(eit,{course:o,onClose:()=>g(!1),onSubmit:($,R)=>{fetch(`${j}/courses/${$}/evaluation/submit`,{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({studentId:t.id,answers:R})}).then(async Y=>{Y.ok?(alert(s("course.feedback_thanks")),g(!1)):alert(s("course.error_occurred")+" "+await Y.text())}).catch(Y=>console.error(Y))}}),x&&a.jsx(tit,{course:o,onClose:()=>m(!1),onSave:F,isLoading:p})]}):a.jsx("div",{className:"text-center mt-10 text-gray-500 dark:text-gray-400",children:"Kursen hittades inte."})},ait=(t,e={year:"numeric",month:"short",day:"numeric"})=>{if(!t)return"";try{let r;return Array.isArray(t)?r=new Date(t[0],t[1]-1,t[2],t[3]||0,t[4]||0):r=new Date(t),isNaN(r.getTime())?"":new Intl.DateTimeFormat("sv-SE",e).format(r)}catch(r){return console.error("Error formatting date:",r),String(t)}},sit=()=>{const{currentUser:t}=At(),e=Et(),[r,n]=N.useState([]),[s,i]=N.useState(!0);N.useEffect(()=>{t&&o()},[t]);const o=async()=>{i(!0);try{const c=await O.courses.getMyCourses(t.id),d=await Promise.all(c.map(async u=>{let h=null,f=null;try{const g=await O.assignments.getByCourse(u.id),x=new Date,m=g.filter(p=>new Date(p.dueDate)>x).sort((p,b)=>new Date(p.dueDate)-new Date(b.dueDate));m.length>0&&(h=m[0])}catch(g){console.warn(`Failed to fetch details for course ${u.id}`,g)}return{...u,nextAssignment:h,nextEvent:f}}));try{const u=await O.events.getAll(),h=new Date;d.forEach(f=>{const g=u.filter(x=>{let m=null;return Array.isArray(x.startTime)?m=new Date(x.startTime[0],x.startTime[1]-1,x.startTime[2],x.startTime[3],x.startTime[4]):m=new Date(x.startTime),m>h&&x.title&&x.title.includes(f.name)}).sort((x,m)=>{let p=Array.isArray(x.startTime)?new Date(x.startTime[0],x.startTime[1]-1,x.startTime[2],x.startTime[3],x.startTime[4]):new Date(x.startTime),b=Array.isArray(m.startTime)?new Date(m.startTime[0],m.startTime[1]-1,m.startTime[2],m.startTime[3],m.startTime[4]):new Date(m.startTime);return p-b});g.length>0&&(f.nextEvent=g[0])})}catch(u){console.error("Failed to fetch events",u)}n(d)}catch(c){console.error("Failed to load courses",c)}finally{i(!1)}},l=c=>c?Array.isArray(c)?new Date(c[0],c[1]-1,c[2],c[3],c[4]).toLocaleString("sv-SE",{dateStyle:"short",timeStyle:"short"}):new Date(c).toLocaleString("sv-SE",{dateStyle:"short",timeStyle:"short"}):"";return s?a.jsx("div",{className:"p-10 text-center text-gray-500",children:"Laddar kurser..."}):a.jsxs("div",{className:"max-w-5xl mx-auto p-4 lg:p-8 animate-in fade-in",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Mina Kurser"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8",children:"Hr hittar du alla kurser du r registrerad p samt kommande hndelser."}),a.jsx("div",{className:"space-y-6",children:r.length===0?a.jsxs("div",{className:"text-center py-20 bg-white dark:bg-[#1E1F20] rounded-2xl border-2 border-dashed border-gray-200 dark:border-[#3c4043]",children:[a.jsx(gt,{size:48,className:"mx-auto text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-300",children:"Inga kurser hittades"}),a.jsx("p",{className:"text-gray-500",children:"Du r inte registrerad p ngra kurser just nu."})]}):r.map(c=>{var d,u,h;return a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm overflow-hidden hover:shadow-md transition-all",children:a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsx("div",{className:`h-2 md:h-auto md:w-3 ${c.isOpen?c.color||"bg-indigo-500":"bg-gray-400"}`}),a.jsxs("div",{className:"p-6 flex-1",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-[#282a2c] px-2 py-0.5 rounded",children:c.courseCode}),!c.isOpen&&a.jsx("span",{className:"text-xs font-bold text-red-500 border border-red-200 px-2 py-0.5 rounded",children:"AVSLUTAD"})]}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:c.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 max-w-2xl",children:c.description||"Ingen beskrivning tillgnglig."})]}),a.jsxs("button",{onClick:()=>e(`/course/${c.slug||c.id}`),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold text-sm shadow-md shadow-indigo-200 dark:shadow-none flex items-center gap-2 whitespace-nowrap",children:["G till kurs ",a.jsx(Wa,{size:16})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6 pt-6 border-t border-gray-100 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-orange-50 dark:bg-orange-900/20 text-orange-600 rounded-lg",children:a.jsx(Er,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-0.5",children:"Nsta inlmning"}),c.nextAssignment?a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:c.nextAssignment.title}),a.jsx("p",{className:"text-xs text-orange-600 font-medium",children:ait(c.nextAssignment.dueDate,{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"Inga kommande inlmningar"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 rounded-lg",children:a.jsx(zt,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-0.5",children:"Nsta lektion"}),c.nextEvent?a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:c.nextEvent.title}),a.jsx("p",{className:"text-xs text-blue-600 font-medium",children:l(c.nextEvent.startTime)})]}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"Inget inplanerat schema"})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-[#3c4043] md:border-t-0 md:pt-0 md:mt-0 md:absolute md:bottom-6 md:right-6 md:w-auto",children:a.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-[#3c4043] flex items-center justify-center text-[10px] font-bold text-gray-600 dark:text-gray-300",children:((u=(d=c.teacher)==null?void 0:d.firstName)==null?void 0:u.charAt(0))||"L"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Lrare: ",a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:(h=c.teacher)==null?void 0:h.fullName})]})]})})]})]})},c.id)})})]})},iit=({event:t,isOpen:e,onClose:r,onDelete:n,onUpdateStatus:s,isTeacherOrAdmin:i})=>{if(!e||!t)return null;const o=h=>{switch(h){case"LESSON":return"bg-red-400";case"EXAM":return"bg-purple-400";case"WORKSHOP":return"bg-green-400";case"MEETING":return"bg-blue-400";case"ASSIGNMENT":return"bg-yellow-400";default:return"bg-gray-400"}},l=h=>{switch(h){case"LESSON":return a.jsx(vt,{size:20});case"EXAM":return a.jsx(Er,{size:20});case"WORKSHOP":return a.jsx(xi,{size:20});case"MEETING":return a.jsx(vt,{size:20});default:return a.jsx(zt,{size:20})}},c=h=>{switch(h){case"ZOOM":case"TEAMS":case"MEETS":return a.jsx(xi,{size:16});default:return a.jsx(B0,{size:16})}},d=()=>{const h=t.end-t.start,f=Math.floor(h/(1e3*60*60)),g=Math.floor(h%(1e3*60*60)/(1e3*60));return f>0?`${f}h ${g}m`:`${g}m`},u=()=>{switch(t.status){case"CONFIRMED":return a.jsxs("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-bold flex items-center gap-1",children:[a.jsx(Gr,{size:14})," Godknd"]});case"PENDING":return a.jsxs("span",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded-full text-xs font-bold flex items-center gap-1",children:[a.jsx(Tt,{size:14})," Vntar"]});case"REJECTED":return a.jsxs("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full text-xs font-bold flex items-center gap-1",children:[a.jsx(Je,{size:14})," Avvisad"]});default:return null}};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-40 transition-opacity",onClick:r}),a.jsxs("div",{className:"fixed right-4 top-4 bottom-4 w-full max-w-sm bg-white dark:bg-[#1E1E1E] shadow-xl z-50 overflow-y-auto rounded-2xl border border-gray-200 dark:border-gray-700 animate-in slide-in-from-right duration-300",children:[a.jsxs("div",{className:`${o(t.type)} p-5 text-white relative rounded-t-2xl`,children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(Je,{size:20})}),a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:l(t.type)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold mb-1",children:t.title}),a.jsx("p",{className:"text-white/80 text-sm",children:t.type})]})]}),u()]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-gray-300",children:[a.jsx(Tt,{size:20,className:"text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:t.start.toLocaleDateString("sv-SE",{weekday:"long",day:"numeric",month:"long"})}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.start.toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"})," - ",t.end.toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"})," (",d(),")"]})]})]}),t.platform&&t.platform!=="NONE"&&a.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-gray-300",children:[c(t.platform),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:t.platform}),t.meetingLink&&a.jsxs("a",{href:t.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 dark:text-indigo-400 hover:underline flex items-center gap-1",children:["G med i mte ",a.jsx(Wo,{size:12})]})]})]}),t.ownerName&&a.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-gray-300",children:[a.jsx(vt,{size:20,className:"text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Organiserad av"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.ownerName})]})]})]}),t.description&&a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Beskrivning"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:t.description})]}),t.topic&&a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"mne"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.topic})]}),t.isMandatory&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-xl p-4",children:a.jsxs("p",{className:"text-amber-800 dark:text-amber-400 font-semibold text-sm flex items-center gap-2",children:[a.jsx(Er,{size:16}),"Obligatorisk nrvaro"]})}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 space-y-3",children:[i&&t.status==="PENDING"&&a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>{s(t.id,"CONFIRMED"),r()},className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:[a.jsx(Gr,{size:18}),"Godknn"]}),a.jsxs("button",{onClick:()=>{s(t.id,"REJECTED"),r()},className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:[a.jsx(Je,{size:18}),"Avvisa"]})]}),t.meetingLink&&a.jsxs("a",{href:t.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-lg shadow-orange-500/20",children:[a.jsx(xi,{size:18}),"G med i mte"]}),a.jsxs("button",{className:"w-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-semibold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:[a.jsx(G0,{size:18}),"Dela lnk"]}),i&&a.jsxs("button",{onClick:()=>{n(t.id),r()},className:"w-full bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 font-semibold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:[a.jsx(qt,{size:18}),"Ta bort hndelse"]})]})]})]})]})},oit=({currentDate:t,onDateSelect:e})=>{const[r,n]=N.useState(t||new Date),s=f=>new Date(f.getFullYear(),f.getMonth(),1),i=f=>new Date(f.getFullYear(),f.getMonth()+1,0).getDate(),l=(s(r).getDay()+6)%7,c=i(r),d=()=>{n(new Date(r.getFullYear(),r.getMonth()-1,1))},u=()=>{n(new Date(r.getFullYear(),r.getMonth()+1,1))},h=()=>{const f=[];for(let g=0;g<l;g++)f.push(a.jsx("div",{className:"h-8 w-8"},`empty-${g}`));for(let g=1;g<=c;g++){const x=new Date(r.getFullYear(),r.getMonth(),g),m=t.getDate()===g&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear(),p=new Date().toDateString()===x.toDateString();f.push(a.jsx("button",{onClick:()=>e(x),className:`h-8 w-8 text-xs font-medium rounded-full flex items-center justify-center transition-colors
                        ${m?"bg-indigo-600 text-white":p?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 font-bold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:g},g))}return f};return a.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] rounded-2xl p-4 shadow-sm border border-gray-200 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white capitalize",children:r.toLocaleDateString("sv-SE",{month:"long",year:"numeric"})}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:a.jsx(Ho,{size:16,className:"text-gray-500"})}),a.jsx("button",{onClick:u,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:a.jsx(or,{size:16,className:"text-gray-500"})})]})]}),a.jsx("div",{className:"grid grid-cols-7 mb-2",children:["M","T","O","T","F","L","S"].map((f,g)=>a.jsx("div",{className:"h-8 flex items-center justify-center text-[10px] font-bold text-gray-400",children:f},g))}),a.jsx("div",{className:"grid grid-cols-7 gap-y-1 justify-items-center",children:h()})]})},lit=({events:t=[],onEventClick:e})=>{const r=t.filter(n=>n.type==="EXAM"||n.isMandatory||n.type==="ASSIGNMENT").sort((n,s)=>new Date(n.start)-new Date(s.start)).filter(n=>new Date(n.start)>=new Date(new Date().setHours(0,0,0,0))).slice(0,5);return r.length===0?null:a.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-800 mt-6",children:[a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(Er,{size:18,className:"text-orange-500"}),"Viktiga Datum"]}),a.jsx("div",{className:"space-y-3",children:r.map(n=>a.jsxs("div",{onClick:()=>e(n),className:"group flex gap-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-white/5 cursor-pointer transition-colors border border-transparent hover:border-gray-100 dark:hover:border-gray-700",children:[a.jsxs("div",{className:`flex flex-col items-center justify-center w-12 h-12 rounded-xl shrink-0 ${n.type==="EXAM"?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400"}`,children:[a.jsx("span",{className:"text-xs font-bold uppercase",children:n.start.toLocaleDateString("sv-SE",{month:"short"}).replace(".","")}),a.jsx("span",{className:"text-lg font-black leading-none",children:n.start.getDate()})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white truncate group-hover:text-indigo-600 transition-colors",children:n.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 tracking-wider bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded",children:n.type==="EXAM"?"Tenta":"Obligatorisk"}),a.jsx("span",{className:"text-xs text-gray-500 truncate",children:n.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]},n.id))}),a.jsxs("button",{className:"w-full mt-4 text-xs font-bold text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors flex items-center justify-center gap-1",children:["Visa alla ",a.jsx(Wa,{size:12})]})]})},cit=[{value:"LESSON",label:"Lektion",color:"bg-orange-500"},{value:"MEETING",label:"Mte / One-on-One",color:"bg-purple-500"},{value:"WORKSHOP",label:"Workshop",color:"bg-teal-500"},{value:"EXAM",label:"Prov",color:"bg-red-500"},{value:"ASSIGNMENT",label:"Uppgift",color:"bg-yellow-500"},{value:"OTHER",label:"Annat",color:"bg-gray-500"}],dit=({onFilterChange:t,primaryFilter:e,secondaryFilter:r,selectedTypes:n=[]})=>{var z;const{currentUser:s}=At(),[i,o]=N.useState(!1),[l,c]=N.useState([]),[d,u]=N.useState([]),[h,f]=N.useState(!1),[g,x]=N.useState(!1),[m,p]=N.useState(!1),[b,v]=N.useState(null),y=((z=s==null?void 0:s.role)==null?void 0:z.name)||(s==null?void 0:s.role)||"",w=y==="TEACHER",k=y==="STUDENT",j=async()=>{f(!0),v(null);try{const M=await O.get("/events/filterable-users");c(M||[]),(!M||M.length===0)&&v("Inga anvndare hittades fr filtrering")}catch(M){console.error("[CalendarFilter] Failed to fetch filterable users:",M),v(M.message||"Kunde inte ladda anvndare")}finally{f(!1)}},_=async()=>{try{const M=await O.get("/events/my-courses"),D=(await O.get("/courses")).filter(L=>M.includes(L.id));u(D)}catch(M){console.error("Failed to fetch courses:",M)}};N.useEffect(()=>{j(),(w||k)&&_()},[w,k]);const S=(M,F=!0)=>{t({type:"user",value:M,isPrimary:F}),o(!1)},A=M=>{t({type:"course",value:M,isPrimary:!0}),x(!1),o(!1)},T=M=>{let F;n.includes(M)?F=n.filter(D=>D!==M):F=[...n,M],t({type:"types",value:F})},E=M=>{switch(M){case"TEACHER":return"text-blue-600 dark:text-blue-400";case"MENTOR":return"text-purple-600 dark:text-purple-400";case"PRINCIPAL":return"text-red-600 dark:text-red-400";case"STUDENT":return"text-green-600 dark:text-green-400";case"ADMIN":return"text-orange-600 dark:text-orange-400";default:return"text-gray-600 dark:text-gray-400"}},C=M=>{switch(M){case"TEACHER":return"Lrare";case"MENTOR":return"Mentor";case"PRINCIPAL":return"Rektor";case"STUDENT":return"Elev";case"ADMIN":return"Admin";default:return M}};return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>o(!i),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors border-2
                    ${e||r||n.length>0?"bg-indigo-600 text-white border-indigo-600 hover:bg-indigo-700":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[a.jsx(cm,{size:18}),a.jsx("span",{className:"hidden lg:inline",children:"Filter"}),(e||r||n.length>0)&&a.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs bg-white text-indigo-600 rounded-full font-bold",children:(e?1:0)+(r?1:0)+(n.length>0?1:0)}),a.jsx(Mo,{size:16,className:`transition-transform ${i?"rotate-180":""}`})]}),i&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-[#1E1E1E] rounded-xl shadow-2xl border border-gray-200 dark:border-gray-800 z-50 max-h-[80vh] overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Filtrera Kalender"}),a.jsx("button",{onClick:()=>o(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:a.jsx(Je,{size:18,className:"text-gray-500"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{onClick:()=>p(!m),className:"w-full p-4 text-left text-sm font-bold text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-between",children:[a.jsx("span",{children:"Hndelsetyp"}),a.jsx(Mo,{size:16,className:`transition-transform ${m?"rotate-180":""}`})]}),m&&a.jsx("div",{className:"p-2 grid grid-cols-1 gap-1",children:cit.map(M=>a.jsxs("button",{onClick:()=>T(M.value),className:`flex items-center gap-3 w-full p-2 rounded-lg transition-colors
                                                ${n.includes(M.value)?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-400":"hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${M.color}`}),a.jsx("span",{className:"text-sm font-medium",children:M.label}),n.includes(M.value)&&a.jsx(Gr,{size:14,className:"ml-auto"})]},M.value))})]}),(w||k)&&d.length>0&&a.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{onClick:()=>x(!g),className:"w-full p-4 text-left text-sm font-bold text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-between",children:[a.jsx("span",{children:"Filtrera efter kurs"}),a.jsx(Mo,{size:16,className:`transition-transform ${g?"rotate-180":""}`})]}),g&&a.jsx("div",{className:"max-h-40 overflow-y-auto",children:d.map(M=>a.jsxs("button",{onClick:()=>A(M),className:`w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors
                                                    ${(e==null?void 0:e.type)==="course"&&e.value.id===M.id?"bg-indigo-50 dark:bg-indigo-900/20 border-l-2 border-indigo-600":""}`,children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.name}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:M.code})]},M.id))})]}),a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 text-[10px] uppercase font-black tracking-widest text-gray-400 border-b border-gray-200 dark:border-gray-700",children:"Anvndare"}),h?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(ft,{size:24,className:"animate-spin text-indigo-600"})}):b?a.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:b}),a.jsx("button",{onClick:j,className:"mt-2 text-[10px] text-indigo-600 dark:text-indigo-400 hover:underline",children:"Frsk igen"})]}):a.jsx("div",{children:l.map(M=>{var F,D,L,K,$,R;return a.jsx("button",{onClick:()=>S(M,!e||r&&e.value.id===M.id),className:`w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors border-l-2
                                            ${(e==null?void 0:e.type)==="user"&&e.value.id===M.id?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20":(r==null?void 0:r.type)==="user"&&r.value.id===M.id?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-transparent"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm
                                                ${((F=M.role)==null?void 0:F.name)==="TEACHER"?"bg-blue-500":((D=M.role)==null?void 0:D.name)==="MENTOR"?"bg-purple-500":((L=M.role)==null?void 0:L.name)==="PRINCIPAL"?"bg-red-500":((K=M.role)==null?void 0:K.name)==="STUDENT"?"bg-green-500":"bg-gray-500"}`,children:M.id===(s==null?void 0:s.id)?a.jsx(jr,{size:16}):a.jsx(vt,{size:16})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:[M.firstName," ",M.lastName]}),a.jsx("div",{className:`text-xs ${E(($=M.role)==null?void 0:$.name)}`,children:C((R=M.role)==null?void 0:R.name)})]})]})},M.id)})})]}),(e||r||n.length>0)&&a.jsxs("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 flex justify-between",children:[a.jsx("button",{onClick:()=>t({type:"clear_all"}),className:"text-xs text-red-600 dark:text-red-400 hover:underline font-bold",children:"Rensa allt"}),a.jsx("button",{onClick:()=>o(!1),className:"px-4 py-1.5 bg-indigo-600 text-white text-xs font-bold rounded-lg",children:"Klar"})]})]})]})};function NS(t){t=new Date(t);var e=t.getDay(),r=t.getDate()-e+(e==0?-6:1);return new Date(t.setDate(r))}function au(t,e){var r=new Date(t.valueOf());return r.setDate(r.getDate()+e),r}function Np(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function uit(t){t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));var e=new Date(Date.UTC(t.getUTCFullYear(),0,1)),r=Math.ceil(((t-e)/864e5+1)/7);return r}const hit=()=>{var Lt,wt,Nt;const{t}=nt();Et();const{currentUser:e}=At(),{theme:r}=Z2(),n=((Lt=e==null?void 0:e.role)==null?void 0:Lt.name)||(e==null?void 0:e.role)||"",s=["ADMIN","TEACHER","MENTOR","PRINCIPAL"].includes(n),[i,o]=N.useState("week"),[l,c]=N.useState(NS(new Date)),[d,u]=N.useState([]),[h,f]=N.useState([]),[g,x]=N.useState([]),[m,p]=N.useState(!0),[b,v]=N.useState({totalStudents:0,totalClasses:0}),[y,w]=N.useState(null),[k,j]=N.useState(null),[_,S]=N.useState([]),[A,T]=N.useState(""),[E,C]=N.useState([]),[z,M]=N.useState([]),[F,D]=N.useState(!1),[L,K]=N.useState(null),[$,R]=N.useState(!1),[Y,ee]=N.useState({title:"",description:"",startTime:"",endTime:"",date:"",type:"MEETING",courseId:"",attendeeId:"",status:"CONFIRMED",platform:"NONE",topic:"",isMandatory:!1}),[B,U]=N.useState({isBusy:!1,message:""}),[V,se]=N.useState(!1),Ne=async()=>{p(!0);try{const he=_.length>0?`&types=${_.join(",")}`:"",Xe=A?`&search=${encodeURIComponent(A)}`:"",W=`?t=${new Date().getTime()}${he}${Xe}`;console.log("fetchData: query=",W);const we=n==="ADMIN"||n==="PRINCIPAL"?`/events${W}`:`/events/user/${e.id}${W}`,[ve,Te,oe]=await Promise.all([O.get(we).catch(je=>(console.error("Events fetch error",je),[])),!s&&(e!=null&&e.id)?O.courses.getMyCourses(e.id).catch(je=>(console.error("My Courses fetch error",je),[])):O.get("/courses").catch(je=>(console.error("Courses fetch error",je),[])),s?O.users.getAll().catch(je=>(console.error("Users fetch error",je),{content:[]})):O.users.getRelated().catch(je=>(console.error("Related fetch error",je),[]))]);console.log("fetchData: coursesRes=",Te),f(Te||[]);const Ee=(oe==null?void 0:oe.content)||oe||[],G=Array.isArray(Ee)?Ee:[];x(G);const Oe=ve||[];if(console.log(" Received events from API:",Oe.length,"events"),Array.isArray(Oe)){const je=Oe.map(ke=>{var ot,et;const X=new Date(ke.startTime),ce=new Date(ke.endTime),_e=(ce-X)/6e4;return console.log(` Event: "${ke.title}" | ${ke.startTime}  ${ke.endTime} | Duration: ${_e}min`),{id:ke.id,title:ke.title,description:ke.description,start:X,end:ce,type:ke.type,status:ke.status,platform:ke.platform,meetingLink:ke.meetingLink,isMandatory:ke.isMandatory,topic:ke.topic,courseId:(ot=ke.course)==null?void 0:ot.id,ownerId:(et=ke.owner)==null?void 0:et.id,ownerName:ke.owner?`${ke.owner.firstName} ${ke.owner.lastName}`:"Oknd"}});console.log(" Mapped events:",je.length),u(je)}const it=Array.isArray(G)?G.filter(je=>{var ke;return((ke=je.role)==null?void 0:ke.name)==="STUDENT"||je.role==="STUDENT"}).length:0,I=Array.isArray(Oe)?Oe.filter(je=>je.type==="LESSON").length:0;v({totalStudents:it,totalClasses:I})}catch(he){console.error("Failed to load calendar data",he)}finally{p(!1)}};N.useEffect(()=>{Ne(),y&&ie(y).then(C),k&&ie(k).then(M)},[l,_,A]);const ie=async he=>{if(!he)return[];try{const Xe=_.length>0?`&types=${_.join(",")}`:"",W=A?`&search=${encodeURIComponent(A)}`:"",we=`?t=${new Date().getTime()}${Xe}${W}`;if(he.type==="user")return(await O.get(`/events/user/${he.value.id}${we}`)).map(Te=>{var oe,Ee;return{id:Te.id,title:Te.title,description:Te.description,start:new Date(Te.startTime),end:new Date(Te.endTime),type:Te.type,status:Te.status,platform:Te.platform,meetingLink:Te.meetingLink,isMandatory:Te.isMandatory,topic:Te.topic,courseId:(oe=Te.course)==null?void 0:oe.id,ownerId:(Ee=Te.owner)==null?void 0:Ee.id,ownerName:Te.owner?`${Te.owner.firstName} ${Te.owner.lastName}`:"Oknd",isFiltered:!0}});if(he.type==="course")return(await O.get(`/events/course/${he.value.id}${we}`)).map(Te=>{var oe,Ee;return{id:Te.id,title:Te.title,description:Te.description,start:new Date(Te.startTime),end:new Date(Te.endTime),type:Te.type,status:Te.status,platform:Te.platform,meetingLink:Te.meetingLink,isMandatory:Te.isMandatory,topic:Te.topic,courseId:(oe=Te.course)==null?void 0:oe.id,ownerId:(Ee=Te.owner)==null?void 0:Ee.id,ownerName:Te.owner?`${Te.owner.firstName} ${Te.owner.lastName}`:"Oknd",isFiltered:!0}})}catch(Xe){return console.error("Failed to fetch filtered events:",Xe),[]}},q=async({type:he,value:Xe,isPrimary:W})=>{if(he==="clear"){W?(w(null),C([])):(j(null),M([]));return}if(he==="clear_all"){w(null),j(null),S([]),C([]),M([]),T("");return}if(he==="types"){S(Xe);return}const we={type:he,value:Xe};if(W){w(we);const ve=await ie(we);C(ve)}else{j(we);const ve=await ie(we);M(ve)}},H=async()=>{if(!(!Y.date||!Y.startTime||!Y.endTime)){se(!0);try{const he=`${Y.date}T${Y.startTime}:00`,Xe=`${Y.date}T${Y.endTime}:00`;console.log(`[CalendarView] Checking availability: ${he} - ${Xe}`);const W=new URLSearchParams({userId:e.id,start:he,end:Xe});if(!(await O.get(`/events/calendar/check-availability?${W.toString()}`)).available){U({isBusy:!0,message:"Du r redan bokad under denna tid."});return}if(Y.attendeeId){const ve=new URLSearchParams({userId:Y.attendeeId,start:he,end:Xe});if(!(await O.get(`/events/calendar/check-availability?${ve.toString()}`)).available){const oe=g.find(Ee=>Ee.id===parseInt(Y.attendeeId));U({isBusy:!0,message:`${(oe==null?void 0:oe.firstName)||"Deltagaren"} r redan bokad under denna tid.`});return}}U({isBusy:!1,message:""})}catch(he){console.error("Failed to check availability:",he)}finally{se(!1)}}};N.useEffect(()=>{if(F){const he=setTimeout(()=>{H()},500);return()=>clearTimeout(he)}},[Y.date,Y.startTime,Y.endTime,Y.attendeeId,F]);const Z=y?E:d,te=()=>{if(i==="day")c(au(l,-1));else if(i==="week")c(au(l,-7));else if(i==="month"){const he=new Date(l);he.setMonth(he.getMonth()-1),c(he)}},ge=()=>{if(i==="day")c(au(l,1));else if(i==="week")c(au(l,7));else if(i==="month"){const he=new Date(l);he.setMonth(he.getMonth()+1),c(he)}},Ce=te,Le=ge,He=(he,Xe)=>{const W=he.getFullYear(),we=String(he.getMonth()+1).padStart(2,"0"),ve=String(he.getDate()).padStart(2,"0"),Te=`${W}-${we}-${ve}`,oe=`${Xe.toString().padStart(2,"0")}:00`,Ee=`${(Xe+1).toString().padStart(2,"0")}:00`;ee({title:"",description:"",date:Te,startTime:oe,endTime:Ee,type:"MEETING",courseId:"",attendeeId:"",status:"CONFIRMED",platform:"NONE",topic:"",isMandatory:!1}),U({isBusy:!1,message:""}),D(!0)},le=async he=>{var Xe,W;he.preventDefault();try{const we=`${Y.date}T${Y.startTime}:00`,ve=`${Y.date}T${Y.endTime}:00`,Te={title:Y.title||"Ny hndelse",description:Y.description,startTime:we,endTime:ve,type:s?Y.type:"MEETING",status:s?Y.status:"PENDING",platform:Y.platform,topic:Y.topic,isMandatory:s&&Y.isMandatory||!1,courseId:Y.courseId?parseInt(Y.courseId):null,ownerId:null,attendeeIds:Y.attendeeId?[parseInt(Y.attendeeId)]:[]};console.log(" Creating event with payload:",JSON.stringify(Te,null,2)),console.log(" Start time:",we,"End time:",ve),console.log(" Duration in minutes:",(new Date(ve)-new Date(we))/6e4),console.log(" Current user ID:",e==null?void 0:e.id),console.log(" attendeeIds in payload:",Te.attendeeIds);const oe=await O.post("/events",Te);console.log(" Event created successfully:",oe),D(!1),ee({title:"",description:"",startTime:"",endTime:"",date:"",type:"MEETING",courseId:"",attendeeId:"",status:"CONFIRMED",platform:"NONE",topic:"",isMandatory:!1}),U({isBusy:!1,message:""}),setTimeout(async()=>{console.log(" Refreshing calendar data..."),await Ne(),console.log(" Calendar data refreshed")},500)}catch(we){console.error(" Booking error:",we),console.error(" Error details:",we.response||we),alert("Kunde inte boka hndelsen: "+(((W=(Xe=we.response)==null?void 0:Xe.data)==null?void 0:W.message)||we.message||"Oknt fel"))}},Re=async he=>{if(window.confirm("r du sker p att du vill ta bort denna bokning?"))try{await O.delete(`/events/${he}`),Ne()}catch(Xe){console.error("Delete error",Xe),alert("Kunde inte ta bort hndelsen.")}},Ze=async(he,Xe)=>{try{await O.patch(`/events/${he}/status`,{status:Xe}),Ne()}catch(W){console.error("Status update error",W),alert("Kunde inte uppdatera status.")}},lt=Array.from({length:11},(he,Xe)=>Xe+8),rt=()=>i==="day"?[new Date(l)]:i==="week"?Array.from({length:7},(he,Xe)=>au(l,Xe)):i==="month"?Array.from({length:7},(he,Xe)=>au(NS(new Date),Xe)):[],ne=()=>{const he=l.getFullYear(),Xe=l.getMonth(),W=new Date(he,Xe,1),we=W.getDay(),ve=W.getDate()-we+(we===0?-6:1),Te=new Date(W.setDate(ve));return Array.from({length:42},(oe,Ee)=>au(Te,Ee))},pe=rt(),[Ue,kt]=N.useState(new Date),Se=he=>{const Xe=Z.filter(we=>{const ve=we.start;return ve.getDate()===he.getDate()&&ve.getMonth()===he.getMonth()&&ve.getFullYear()===he.getFullYear()}),W=k?z.filter(we=>{const ve=we.start;return ve.getDate()===he.getDate()&&ve.getMonth()===he.getMonth()&&ve.getFullYear()===he.getFullYear()}).map(we=>({...we,isSecondary:!0})):[];return[...Xe,...W]},me=he=>{const Xe=he.start.getHours(),W=he.start.getMinutes(),we=he.end.getHours(),ve=he.end.getMinutes(),Te=Xe-8+W/60,Ee=we-8+ve/60-Te,G=80,Oe=Te*G,it=Math.max(Ee*G,20);return Ee!==1&&console.log(` Event "${he.title}" style:`,`${Xe}:${W.toString().padStart(2,"0")} - ${we}:${ve.toString().padStart(2,"0")}`,`Duration: ${Ee}h`,`Height: ${it}px`),{top:`${Oe}px`,height:`${it}px`}},$e=(he,Xe=!1,W="CONFIRMED")=>{const we=W==="PENDING",ve=Xe?"opacity-60":"",Te=we?"opacity-70":"";let oe="";switch(he){case"LESSON":oe="bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 border-l-4 border-red-400";break;case"EXAM":oe="bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-l-4 border-purple-400";break;case"WORKSHOP":oe="bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 border-l-4 border-green-400";break;case"MEETING":oe="bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-l-4 border-blue-400";break;case"ASSIGNMENT":oe="bg-yellow-100 dark:bg-yellow-900/40 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-400";break;default:oe="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-l-4 border-gray-400";break}return`${oe} ${ve} ${Te}`},Ge=he=>{switch(he){case"LESSON":return a.jsx(vt,{size:16});case"EXAM":return a.jsx(Er,{size:16});case"WORKSHOP":return a.jsx(xi,{size:16});case"MEETING":return a.jsx(jr,{size:16});default:return a.jsx(Tt,{size:16})}},Qe=he=>a.jsxs("div",{onClick:()=>{K(he),R(!0)},className:`p-4 rounded-xl shadow-sm mb-3 flex items-start gap-4 transition-transform active:scale-95 ${$e(he.type,he.isSecondary,he.status)}`,children:[a.jsx("div",{className:"mt-1 p-2 rounded-full bg-white/50 dark:bg-black/20 shrink-0",children:Ge(he.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-bold text-base truncate",children:he.title}),a.jsx("p",{className:"text-sm opacity-90 truncate",children:he.description||t("calendar.no_description","No description")}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs font-semibold opacity-75",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Tt,{size:12})," ",he.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",he.end.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),he.platform!=="NONE"&&a.jsx("span",{className:"uppercase",children:he.platform})]})]})]},he.id);return a.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col p-4 lg:p-6",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-3 shrink-0 w-full",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:"Calendar"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your Personalized Calendar"}),s&&a.jsxs("div",{className:"relative group ml-4",children:[a.jsx("span",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{type:"text",placeholder:"Sk hndelser...",value:A,onChange:he=>T(he.target.value),className:"bg-gray-100 dark:bg-gray-800 border-none rounded-full py-1.5 pl-10 pr-4 text-xs w-64 focus:ring-2 ring-indigo-500 transition-all dark:text-white"}),A&&a.jsx("button",{onClick:()=>T(""),className:"absolute right-3 inset-y-0 flex items-center text-gray-400 hover:text-gray-600",children:a.jsx(Je,{size:12})})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-3 lg:mt-0",children:[a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm font-medium text-gray-700 dark:text-gray-300",children:[a.jsx(zt,{size:16}),a.jsx("span",{className:"hidden lg:inline",children:"Sync Google Calendar"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold",children:[(wt=e==null?void 0:e.firstName)==null?void 0:wt.charAt(0),(Nt=e==null?void 0:e.lastName)==null?void 0:Nt.charAt(0)]}),a.jsxs("div",{className:"hidden lg:block",children:[a.jsxs("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e==null?void 0:e.email})]})]})]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 shrink-0 w-full gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex -space-x-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/30 border-2 border-white dark:border-[#1E1E1E] flex items-center justify-center",children:a.jsx(vt,{size:14,className:"text-indigo-600 dark:text-indigo-400"})}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/30 border-2 border-white dark:border-[#1E1E1E] flex items-center justify-center",children:a.jsx(vt,{size:14,className:"text-purple-600 dark:text-purple-400"})}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 border-2 border-white dark:border-[#1E1E1E] flex items-center justify-center",children:a.jsx(vt,{size:14,className:"text-blue-600 dark:text-blue-400"})})]}),a.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:[b.totalStudents," Students"]})]}),a.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-700"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:a.jsx(Sr,{size:14,className:"text-orange-600 dark:text-orange-400"})}),a.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:[b.totalClasses," Classes"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 w-full lg:w-auto justify-between lg:justify-end",children:[a.jsx(dit,{onFilterChange:q,primaryFilter:y,secondaryFilter:k,selectedTypes:_}),a.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>o("day"),className:`px-3 py-1.5 text-xs font-bold rounded-md transition-all ${i==="day"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Dag"}),a.jsx("button",{onClick:()=>o("week"),className:`px-3 py-1.5 text-xs font-bold rounded-md transition-all ${i==="week"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Vecka"}),a.jsx("button",{onClick:()=>o("month"),className:`px-3 py-1.5 text-xs font-bold rounded-md transition-all ${i==="month"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Mnad"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[a.jsx("button",{onClick:te,className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-md transition-colors",children:a.jsx(Ho,{size:18,className:"text-gray-600 dark:text-gray-400"})}),a.jsx("span",{className:"px-2 lg:px-4 text-sm font-semibold text-gray-700 dark:text-gray-300 min-w-[100px] lg:min-w-[120px] text-center capitalize",children:l.toLocaleDateString("sv-SE",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:ge,className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-md transition-colors",children:a.jsx(or,{size:18,className:"text-gray-600 dark:text-gray-400"})})]}),a.jsxs("button",{onClick:()=>{ee({title:"",description:"",startTime:"",endTime:"",date:"",type:"MEETING",courseId:"",attendeeId:"",status:"CONFIRMED",platform:"NONE",topic:"",isMandatory:!1}),U({isBusy:!1,message:""}),D(!0)},className:"bg-orange-500 hover:bg-orange-600 text-white w-10 h-10 lg:w-auto lg:px-4 lg:py-2 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 shadow-md",children:[a.jsx(jt,{size:20}),a.jsx("span",{className:"hidden lg:inline",children:"New Event"})]})]})]}),a.jsxs("div",{className:"lg:hidden flex-1 flex flex-col gap-4 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-white/5 p-2 rounded-xl mb-2",children:[a.jsx("button",{onClick:Ce,className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg shadow-sm transition-all border border-gray-200 dark:border-gray-700",children:a.jsx(Ho,{size:20,className:"text-gray-600 dark:text-gray-300"})}),a.jsxs("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200",children:[l.toLocaleDateString("sv-SE",{month:"long",year:"numeric"})," v.",uit(l)]}),a.jsx("button",{onClick:Le,className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg shadow-sm transition-all border border-gray-200 dark:border-gray-700",children:a.jsx(or,{size:20,className:"text-gray-600 dark:text-gray-300"})})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:pe.map((he,Xe)=>{const W=Np(he,Ue),we=Np(he,new Date),ve=Se(he).length>0;return a.jsxs("button",{onClick:()=>kt(he),className:`
                                    flex flex-col items-center justify-center py-2 h-16 rounded-xl border transition-all relative
                                    ${W?"bg-indigo-600 text-white border-indigo-600 shadow-md transform scale-105 z-10":ve?"bg-orange-50/50 dark:bg-orange-500/10 text-gray-800 dark:text-gray-200 border-orange-200 dark:border-orange-500/30":"bg-white dark:bg-[#1E1E1E] text-gray-500 dark:text-gray-400 border-gray-100 dark:border-gray-800"}
                                    ${we&&!W?"ring-1 ring-indigo-400 dark:ring-indigo-500 border-transparent":""}
                                `,children:[a.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter mb-0.5 ${W?"text-indigo-200":ve?"text-orange-600 dark:text-orange-400":""}`,children:he.toLocaleDateString("sv-SE",{weekday:"short"}).substring(0,2)}),a.jsx("span",{className:`text-base font-black leading-none ${W?"text-white":"text-gray-900 dark:text-white"}`,children:he.getDate()}),ve&&a.jsx("div",{className:`absolute bottom-1.5 w-1.5 h-1.5 rounded-full shadow-sm ${W?"bg-white":"bg-orange-500"}`})]},Xe)})}),a.jsxs("div",{className:"flex-1 overflow-y-auto pb-20",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3 px-1",children:Np(Ue,new Date)?"Idag":Ue.toLocaleDateString("sv-SE",{weekday:"long",day:"numeric",month:"long"})}),Se(Ue).length>0?a.jsx("div",{className:"space-y-1",children:Se(Ue).sort((he,Xe)=>he.start-Xe.start).map(Qe)}):a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center opacity-50",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4 text-gray-400",children:a.jsx(zt,{size:32})}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Inga hndelser inbokade."})]})]})]}),a.jsxs("div",{className:"hidden lg:flex gap-6",children:[a.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1E1E1E] rounded-2xl shadow-sm border border-gray-200 dark:border-gray-800",children:[a.jsxs("div",{className:`grid ${i==="day"?"grid-cols-[60px_1fr]":"grid-cols-[60px_repeat(7,1fr)]"} border-b border-gray-200 dark:border-gray-700 shrink-0 bg-white dark:bg-[#1E1E1E]`,children:[a.jsx("div",{className:"border-r border-gray-200 dark:border-gray-700"})," ",pe.map((he,Xe)=>a.jsxs("div",{className:`py-4 px-2 text-center border-r border-gray-100 dark:border-gray-800 transition-all ${he.getDay()===0?"bg-red-50/50 dark:bg-red-900/10":""}`,children:[a.jsxs("p",{className:`text-xs font-medium mb-1 ${he.getDay()===0?"text-red-500":"text-gray-400 dark:text-gray-500"}`,children:[he.toLocaleDateString("sv-SE",{weekday:"short"}),", ",String(he.getDate()).padStart(2,"0")]}),Np(he,new Date)&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500 mx-auto mt-1"})]},Xe))]}),i==="month"?a.jsx("div",{className:"grid grid-cols-7 grid-rows-6 bg-gray-50 dark:bg-gray-900",children:ne().map((he,Xe)=>{const W=Se(he),we=he.getMonth()===l.getMonth();return a.jsxs("div",{className:`border-b border-r border-gray-200 dark:border-gray-800 p-2 min-h-[100px] relative group cursor-pointer transition-colors hover:bg-white dark:hover:bg-[#252525]
                                            ${we?"bg-white dark:bg-[#1E1E1E] text-gray-900 dark:text-gray-100":"bg-gray-100/50 dark:bg-gray-900/50 opacity-50 text-gray-400"}
                                            ${he.getDay()===0?"bg-red-50/30 dark:bg-red-900/10":""}`,onClick:()=>{we?He(he,9):c(he)},children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("span",{className:`text-xs font-bold p-1 rounded-md mb-1 inline-block ${Np(he,new Date)?"bg-indigo-600 text-white":""} ${we?"":"text-gray-400"}`,children:he.getDate()}),a.jsx("button",{className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-opacity",onClick:ve=>{ve.stopPropagation(),He(he,9)},children:a.jsx(jt,{size:12,className:"text-gray-500"})})]}),a.jsx("div",{className:"flex flex-col gap-1",children:W.map(ve=>a.jsx("div",{className:`text-[10px] px-1.5 py-1 rounded border border-transparent hover:border-black/10 dark:hover:border-white/10 truncate font-medium transition-all ${$e(ve.type,!1,ve.status)}`,onClick:Te=>{Te.stopPropagation(),K(ve),R(!0)},title:`${ve.title}`,children:a.jsx("span",{className:"truncate",children:ve.title})},ve.id))})]},Xe)})}):a.jsx("div",{children:lt.map(he=>a.jsxs("div",{className:`grid ${i==="day"?"grid-cols-[60px_1fr]":"grid-cols-[60px_repeat(7,1fr)]"} h-20 border-b border-gray-100 dark:border-gray-800/50 relative`,children:[a.jsxs("div",{className:"relative text-right pr-3 pt-1 text-[11px] font-medium text-gray-400 dark:text-gray-500 border-r border-gray-200 dark:border-gray-700",children:[String(he).padStart(2,"0"),":00"]}),pe.map((Xe,W)=>{const we=Se(Xe);return a.jsxs("div",{className:`relative border-r border-gray-100 dark:border-gray-800 hover:bg-gray-50/50 dark:hover:bg-white/[0.02] transition-colors group cursor-pointer ${Xe.getDay()===0?"bg-red-50/30 dark:bg-red-900/5":""}`,onClick:()=>He(Xe,he),title:`Klicka fr att boka ${he}:00`,children:[he===8&&we.length===0&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none transition-all duration-200 z-0",children:a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center",children:a.jsx(jt,{size:16,strokeWidth:3})})}),he===8&&we.map(ve=>{const Te=me(ve);return a.jsxs("div",{className:`absolute inset-x-1 rounded-xl text-xs px-3 py-2 overflow-hidden shadow-sm hover:shadow-md transition-all cursor-pointer ${$e(ve.type,ve.isSecondary,ve.status)}
                                                            ${ve.isSecondary?"z-5 hover:z-15":"z-10 hover:z-20"}`,style:Te,onClick:oe=>{oe.stopPropagation(),K(ve),R(!0)},children:[a.jsx("div",{className:"font-semibold truncate mb-0.5",children:ve.title}),a.jsxs("div",{className:"opacity-75 text-[10px] truncate",children:[ve.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",ve.end.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},`${ve.id}-${ve.isSecondary?"secondary":"primary"}`)})]},W)})]},he))})]}),a.jsxs("div",{className:"w-80 shrink-0 space-y-6",children:[a.jsx(oit,{currentDate:l,onDateSelect:he=>{c(i==="day"?he:NS(he)),kt(he)}}),a.jsx(lit,{events:d,onEventClick:he=>{K(he),R(!0)}})]})]}),F&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white dark:bg-[#2A2A2A] w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Boka Hndelse"}),a.jsx("button",{onClick:()=>D(!1),children:a.jsx(Je,{size:20,className:"text-gray-500"})})]}),a.jsxs("form",{onSubmit:le,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Titel"}),a.jsx("input",{className:"w-full bg-gray-50 dark:bg-[#1E1E1E] border border-gray-200 dark:border-gray-700 rounded-lg p-3 outline-none focus:ring-2 ring-indigo-500 dark:text-white",placeholder:"Mte med...",required:!0,value:Y.title,onChange:he=>ee({...Y,title:he.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Typ"}),a.jsxs("select",{value:Y.type,onChange:he=>ee({...Y,type:he.target.value}),className:"w-full rounded-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-[#2A2A2A] text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"LESSON",children:"Lektion"}),a.jsx("option",{value:"MEETING",children:"Mte / One-on-One"}),a.jsx("option",{value:"WORKSHOP",children:"Workshop"}),a.jsx("option",{value:"EXAM",children:"Prov"}),a.jsx("option",{value:"ASSIGNMENT",children:"Uppgift"}),a.jsx("option",{value:"OTHER",children:"Annat"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Kurs (Frivilligt)"}),a.jsxs("select",{value:Y.courseId||"",onChange:he=>ee({...Y,courseId:he.target.value||null}),className:"w-full rounded-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-[#2A2A2A] text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"Ingen kurs vald"}),h.map(he=>a.jsx("option",{value:he.id,children:he.name},he.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mtesdeltagare (Frivilligt)"}),a.jsxs("select",{value:Y.attendeeId||"",onChange:he=>ee({...Y,attendeeId:he.target.value||null}),className:"w-full rounded-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-[#2A2A2A] text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"Endast jag"}),g.map(he=>{var Xe;return a.jsxs("option",{value:he.id,children:[he.firstName," ",he.lastName," (",((Xe=he.role)==null?void 0:Xe.name)||"Student",")"]},he.id)})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Plats / Plattform"}),a.jsxs("select",{value:Y.platform||"NONE",onChange:he=>ee({...Y,platform:he.target.value}),className:"w-full rounded-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-[#2A2A2A] text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"NONE",children:"Fysisk / Ingen specifik"}),a.jsx("option",{value:"ZOOM",children:"Zoom"}),a.jsx("option",{value:"TEAMS",children:"Microsoft Teams"}),a.jsx("option",{value:"MEETS",children:"Google Meet"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"mne / Fokus"}),a.jsx("input",{type:"text",value:Y.topic||"",onChange:he=>ee({...Y,topic:he.target.value}),placeholder:"T.ex. Genomgng av modul 3",className:"w-full rounded-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-[#2A2A2A] text-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),s&&a.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"isMandatory",checked:Y.isMandatory||!1,onChange:he=>ee({...Y,isMandatory:he.target.checked}),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),a.jsx("label",{htmlFor:"isMandatory",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Obligatorisk nrvaro"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Beskrivning"}),a.jsx("textarea",{value:Y.description,onChange:he=>ee({...Y,description:he.target.value}),className:"w-full rounded-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-[#2A2A2A] text-sm focus:ring-indigo-500 focus:border-indigo-500",rows:"3"})]}),"    "]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Datum"}),a.jsx("input",{type:"date",className:"w-full bg-gray-50 dark:bg-[#1E1E1E] border border-gray-200 dark:border-gray-700 rounded-lg p-3 dark:text-white",required:!0,value:Y.date,onChange:he=>ee({...Y,date:he.target.value})})]}),a.jsxs("div",{className:"w-24",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Start"}),a.jsx("input",{type:"time",className:"w-full bg-gray-50 dark:bg-[#1E1E1E] border border-gray-200 dark:border-gray-700 rounded-lg p-3 dark:text-white",required:!0,value:Y.startTime,onChange:he=>ee({...Y,startTime:he.target.value})})]}),a.jsxs("div",{className:"w-24",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Slut"}),a.jsx("input",{type:"time",className:"w-full bg-gray-50 dark:bg-[#1E1E1E] border border-gray-200 dark:border-gray-700 rounded-lg p-3 dark:text-white",required:!0,value:Y.endTime,onChange:he=>ee({...Y,endTime:he.target.value})})]})]}),(V||B.message)&&a.jsx("div",{className:`p-3 rounded-lg text-sm flex items-center gap-2 ${B.isBusy?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:V?a.jsxs(a.Fragment,{children:[a.jsx(ft,{size:16,className:"animate-spin"})," Kollar tillgnglighet..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Dr,{size:16})," ",B.message]})}),a.jsx("button",{type:"submit",disabled:B.isBusy||V,className:`w-full font-bold py-3 rounded-xl shadow-lg transition-all ${B.isBusy?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white shadow-indigo-500/30"}`,children:B.isBusy?"Tiden r redan bokad":"Bekrfta Bokning"})]})]})}),a.jsx(iit,{event:L,isOpen:$,onClose:()=>{R(!1),K(null)},onDelete:Re,onUpdateStatus:Ze,isTeacherOrAdmin:s})]})},li=(t,e)=>{if(!t)return"";if(t.startsWith("http")||t.startsWith("/api"))return t;const r="/gamification";switch(e){case"FRAME":return`${r}/frames/${t}`;case"BACKGROUND":return`${r}/backdrop/${t}`;case"BADGE":return`${r}/badges/${t}`;case"TITLE":return`${r}/titles/${t}`;default:return`${r}/${t}`}},fF={COMMON:{bg:"bg-slate-50 dark:bg-slate-900/40",border:"border-slate-200 dark:border-slate-700",text:"text-slate-600 dark:text-slate-400",glow:"",label:"bg-slate-500"},RARE:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-600 dark:text-blue-400",glow:"shadow-[0_0_15px_rgba(59,130,246,0.2)]",label:"bg-blue-600"},EPIC:{bg:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-200 dark:border-purple-800",text:"text-purple-600 dark:text-purple-400",glow:"shadow-[0_0_20px_rgba(168,85,247,0.3)]",label:"bg-purple-600"},LEGENDARY:{bg:"bg-amber-50 dark:bg-amber-900/20",border:"border-amber-200 dark:border-amber-700",text:"text-amber-600 dark:text-amber-400",glow:"shadow-[0_0_25px_rgba(245,158,11,0.4)]",label:"bg-gradient-to-r from-amber-500 to-yellow-500"}},fit=()=>{const{currentUser:t,refreshUser:e}=At(),[r,n]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState("ALL"),[c,d]=N.useState(null);N.useEffect(()=>{u()},[]);const u=async()=>{try{const m=await Iu.getShopItems();n(m)}catch(m){console.error("Error fetching shop data:",m),tr.error("Kunde inte ladda butiken.")}finally{i(!1)}},h=async m=>{if(((t==null?void 0:t.points)||0)<m.cost){tr.error("Du har inte tillrckligt med XP!");return}try{await Iu.buyItem(m.id),tr.success(`Kpte ${m.name}!`,{icon:"",style:{borderRadius:"10px",background:"#333",color:"#fff"}}),u(),e()}catch(p){console.error("Purchase failed:",p),tr.error("Kp misslyckades.")}},f=async m=>{try{await Iu.equipItem(m.id),tr.success(`${m.name} utrustad!`),e()}catch(p){console.error("Equip failed:",p),tr.error("Kunde inte utrusta objektet.")}},g=o==="ALL"?r:r.filter(m=>m.type===o),x=m=>{switch(m){case"FRAME":return a.jsx(L1,{className:"w-6 h-6"});case"BACKGROUND":return a.jsx(Dd,{className:"w-6 h-6"});case"BADGE":return a.jsx(Mr,{className:"w-6 h-6"});case"TITLE":return a.jsx(f5,{className:"w-6 h-6"});default:return a.jsx(ya,{className:"w-6 h-6"})}};return s?a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),a.jsx("p",{className:"mt-4 text-gray-500",children:"ppnar butiken..."})]}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("header",{className:"mb-12 relative overflow-hidden rounded-3xl bg-gradient-to-r from-indigo-600 to-violet-700 p-8 text-white shadow-xl",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsxs("h1",{className:"text-4xl font-black flex items-center gap-4",children:[a.jsx($4,{className:"w-10 h-10"}),"EduGame Shop"]}),a.jsx("p",{className:"text-indigo-100 mt-2 text-lg max-w-2xl",children:"Anpassa din profil med exklusiva ramar, titlar och teman. Visa upp din framgng i form av stil!"}),a.jsx("div",{className:"mt-6 flex items-center gap-4",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-md px-6 py-3 rounded-2xl border border-white/30",children:[a.jsx("span",{className:"text-indigo-100 text-sm font-medium uppercase tracking-wider",children:"Ditt Saldo"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dr,{className:"w-5 h-5 text-amber-300 fill-amber-300"}),a.jsx("span",{className:"text-3xl font-bold",children:(t==null?void 0:t.points)||0}),a.jsx("span",{className:"text-indigo-200 font-medium",children:"XP"})]})]})})]}),a.jsx(dr,{className:"absolute -bottom-10 -right-10 w-64 h-64 text-white/10 rotate-12"})]}),a.jsx("div",{className:"flex gap-2 pb-6 mb-8 border-b border-gray-200 dark:border-gray-800 sticky top-0 bg-gray-50/80 dark:bg-gray-900/80 backdrop-blur-sm z-20 overflow-x-auto no-scrollbar",children:["ALL","FRAME","BACKGROUND","BADGE","TITLE"].map(m=>a.jsxs("button",{onClick:()=>l(m),className:`px-6 py-3 rounded-2xl text-sm font-bold transition-all duration-200 flex items-center gap-2 ${o===m?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30 scale-105":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[m==="ALL"?a.jsx(ya,{className:"w-4 h-4"}):x(m),m==="ALL"?"Alla":m==="FRAME"?"Ramar":m==="BACKGROUND"?"Teman":m==="BADGE"?"Badges":"Titlar"]},m))}),a.jsx(qi.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:a.jsx(J1,{mode:"popLayout",children:g.map(m=>{const p=((t==null?void 0:t.points)||0)>=m.cost,b=fF[m.rarity||"COMMON"];return a.jsxs(qi.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:`group bg-white dark:bg-gray-800 rounded-3xl shadow-sm border ${b.border} ${b.glow} overflow-hidden flex flex-col hover:shadow-2xl transition-all duration-300`,children:[a.jsxs("div",{className:`h-48 ${b.bg} flex items-center justify-center relative group-hover:scale-105 transition-transform duration-500`,children:[m.imageUrl&&m.type!=="TITLE"?a.jsx("img",{src:li(m.imageUrl,m.type),alt:m.name,className:"max-h-full max-w-full object-contain p-4 drop-shadow-2xl"}):a.jsx("div",{className:`${b.text} opacity-40`,children:x(m.type)}),a.jsx("div",{className:`absolute top-4 left-4 ${b.label} text-white text-[10px] font-black px-2 py-1 rounded-lg uppercase tracking-widest shadow-lg`,children:m.rarity}),(m.type==="FRAME"||m.type==="BACKGROUND")&&a.jsxs("button",{onClick:v=>{v.stopPropagation(),d(m)},className:"absolute top-4 right-4 flex items-center gap-2 px-3 py-1.5 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full text-indigo-600 dark:text-indigo-400 font-bold text-xs shadow-lg hover:scale-105 transition-all z-10",title:"Frhandsgranska",children:[a.jsx(Xo,{className:"w-4 h-4"}),a.jsx("span",{children:"Testa"})]})]}),a.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white leading-tight",children:m.name}),a.jsx("div",{className:`${b.text}`,children:x(m.type)})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6 flex-1 line-clamp-2",children:m.description}),a.jsxs("div",{className:"mt-auto pt-6 border-t border-gray-100 dark:border-gray-700/50 flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-bold",children:"Kostnad"}),a.jsxs("div",{className:`font-black text-2xl ${p||m.owned?"text-gray-900 dark:text-white":"text-red-400"}`,children:[m.cost," ",a.jsx("span",{className:"text-xs font-medium text-gray-500",children:"XP"})]})]}),m.owned?a.jsx("button",{onClick:()=>f(m),disabled:m.active,className:`px-6 py-3 rounded-2xl text-sm font-black shadow-lg transition-all flex items-center gap-2 active:scale-95 ${m.active?"bg-gray-100 text-gray-500 cursor-default shadow-none":"bg-green-500 hover:bg-green-600 text-white shadow-green-500/20"}`,children:m.active?a.jsxs(a.Fragment,{children:[a.jsx(dr,{className:"w-4 h-4 text-amber-500"}),"Anvnds"]}):a.jsxs(a.Fragment,{children:[a.jsx(nr,{className:"w-4 h-4"}),"Utrusta"]})}):a.jsx("button",{onClick:()=>h(m),disabled:!p,className:`px-6 py-3 rounded-2xl text-sm font-black shadow-lg transition-all active:scale-95 ${p?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-500/20":"bg-gray-100 text-gray-400 dark:bg-gray-700 cursor-not-allowed shadow-none"}`,children:"Ls Upp"})]})]})]},m.id)})})}),a.jsx(J1,{children:c&&a.jsx(qi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:()=>d(null),children:a.jsxs(qi.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white dark:bg-gray-900 rounded-[2.5rem] overflow-hidden shadow-2xl max-w-md w-full border border-white/10",onClick:m=>m.stopPropagation(),children:[a.jsxs("div",{className:`h-64 flex items-center justify-center relative overflow-hidden ${fF[c.rarity||"COMMON"].bg}`,children:[c.type==="BACKGROUND"&&a.jsx("img",{src:li(c.imageUrl,c.type),className:"absolute inset-0 w-full h-full object-cover opacity-40 z-0"}),a.jsxs("div",{className:"text-center relative z-10",children:[a.jsxs("div",{className:"relative inline-block",children:[a.jsx("div",{className:"w-28 h-28 rounded-full border-4 border-white shadow-xl overflow-hidden mb-4 relative z-10 bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:a.jsx("img",{src:(t==null?void 0:t.profilePictureUrl)||"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix",className:"w-full h-full object-cover relative z-10"})}),c.type==="FRAME"&&a.jsx("img",{src:li(c.imageUrl,c.type),className:"absolute inset-0 w-32 h-32 z-20 pointer-events-none rounded-full object-cover",style:{mixBlendMode:c.imageUrl.includes("circular")?"multiply":"screen",maskImage:"radial-gradient(circle, transparent 72%, black 76%, black 92%, transparent 96%)",WebkitMaskImage:"radial-gradient(circle, transparent 72%, black 76%, black 92%, transparent 96%)",filter:"contrast(110%) brightness(1.1)"}})]}),a.jsx("h4",{className:"font-black text-xl text-gray-900 dark:text-white",children:"Din Profil"}),a.jsx("p",{className:"text-sm opacity-60",children:"Frhandsgranskning"})]})]}),a.jsxs("div",{className:"p-8",children:[a.jsx("h3",{className:"text-2xl font-black mb-2",children:c.name}),a.jsx("p",{className:"text-gray-500 mb-8",children:c.description}),a.jsx("button",{onClick:()=>d(null),className:"w-full py-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-2xl font-black transition-colors",children:"Stng Frhandsvisning"})]})]})})}),g.length===0&&a.jsxs("div",{className:"text-center py-24",children:[a.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx($4,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-400",children:"Hr var det tomt..."}),a.jsx("p",{className:"text-gray-500",children:"Vi fyller p butiken snart med nya spnnande freml!"})]})]})},git=()=>{const[t,e]=N.useState(""),[r,n]=N.useState("idle"),[s,i]=N.useState(""),o=c=>{const d=c.target.files[0];if(!d)return;const u=new FileReader;u.onload=async h=>{const f=h.target.result;e(f.trim())},u.readAsText(d)},l=async()=>{n("loading");try{await O.system.activateLicense(t),n("success"),setTimeout(()=>{window.location.reload()},2e3)}catch{n("error"),i("Ogiltig licensfil. Kontrollera att filen ej r modifierad.")}};return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-gray-800 rounded-2xl shadow-2xl border border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"bg-red-500/10 p-6 border-b border-red-500/20 flex flex-col items-center text-center",children:[a.jsx("div",{className:"bg-red-500/20 p-4 rounded-full mb-4",children:a.jsx(Mn,{size:48,className:"text-red-500"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Systemet r Lst"}),a.jsx("p",{className:"text-red-200 text-sm",children:"Valid licens saknas eller har gtt ut."})]}),a.jsx("div",{className:"p-8 space-y-6",children:r==="success"?a.jsxs("div",{className:"text-center py-8 animate-in fade-in zoom-in",children:[a.jsx(nr,{size:64,className:"text-green-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"Licens Aktiverad!"}),a.jsx("p",{className:"text-gray-400",children:"Startar om systemet..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-dashed border-gray-600 hover:border-indigo-500 transition-colors cursor-pointer relative group",children:[a.jsx("input",{type:"file",onChange:o,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400 group-hover:text-white",children:[a.jsx(Xa,{size:24,className:"mb-2"}),a.jsx("span",{className:"text-sm font-medium",children:"Klicka fr att ladda upp .lic fil"})]})]}),t&&a.jsxs("div",{className:"bg-gray-900 rounded-lg p-3 border border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-indigo-400 text-xs font-bold uppercase",children:[a.jsx(nw,{size:12}),"Licensnyckel (Laddad)"]}),a.jsx("code",{className:"text-[10px] text-gray-500 break-all line-clamp-3",children:t})]}),r==="error"&&a.jsxs("div",{className:"bg-red-500/20 text-red-200 text-sm p-3 rounded-lg flex items-center gap-2",children:[a.jsx(gd,{size:16}),s]}),a.jsx("button",{onClick:l,disabled:!t||r==="loading",className:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl transition-all",children:r==="loading"?"Verifierar...":"Ls Upp Systemet"})]})}),a.jsxs("div",{className:"bg-gray-900 p-4 text-center text-xs text-gray-600 border-t border-gray-700",children:["EduFlex Secure Systems  ID: ",Math.random().toString(36).substr(2,8).toUpperCase()]})]})})},MJ=N.createContext(),Ac={default:{id:"default",name:"Standard (Indigo)",colors:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"}},emerald:{id:"emerald",name:"Professional Emerald",colors:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"}},rose:{id:"rose",name:"Executive Rose",colors:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"}},amber:{id:"amber",name:"Warm Amber",colors:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"}},violet:{id:"violet",name:"Deep Violet",colors:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"}},cyan:{id:"cyan",name:"Corporate Cyan",colors:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"}},slate:{id:"slate",name:"Minimal Slate",colors:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"}}},mit=({children:t,currentUser:e})=>{const[r,n]=N.useState("default"),{branding:s,getCustomTheme:i,loading:o}=io();N.useEffect(()=>{if(o||!s)return;if(s.enforceOrgTheme){if(s.customTheme){n("custom");return}else if(s.defaultThemeId&&Ac[s.defaultThemeId]){n(s.defaultThemeId);return}}if(e&&e.settings)try{const d=JSON.parse(e.settings);if(d.theme&&Ac[d.theme]){n(d.theme);return}}catch{}if(s.defaultThemeId){if(s.defaultThemeId==="custom"&&s.customTheme){n("custom");return}if(Ac[s.defaultThemeId]){n(s.defaultThemeId);return}}const c=localStorage.getItem("eduflex_theme");c&&Ac[c]&&n(c)},[e,s,o]),N.useEffect(()=>{const c=document.documentElement;let d=null;if(r==="custom"&&s.customTheme){const u=i();u&&u.colors&&(d=u.colors)}d||(d=(Ac[r]||Ac.default).colors),Object.keys(d).forEach(u=>{c.style.setProperty(`--color-primary-${u}`,d[u])}),localStorage.setItem("eduflex_theme",r)},[r,s,i]);const l=async c=>{if(s&&s.enforceOrgTheme){console.warn("Theme changes are disabled. Organization enforces a specific theme.");return}if(Ac[c]&&(n(c),e))try{let d={};try{d=JSON.parse(e.settings||"{}")}catch{}const u={...d,theme:c};await O.users.update(e.id,{settings:JSON.stringify(u)})}catch(d){console.error("Failed to persist theme to backend",d)}};return a.jsx(MJ.Provider,{value:{themeId:r,changeTheme:l,themes:Object.values(Ac),isThemeLocked:(s==null?void 0:s.enforceOrgTheme)||!1},children:t})},LI=()=>N.useContext(MJ),pit=({isOpen:t,onClose:e})=>{const{themes:r,themeId:n,changeTheme:s,isThemeLocked:i}=LI();return t?a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-4xl rounded-3xl shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center bg-gray-50/50 dark:bg-[#282a2c]/50",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-black text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx("span",{className:"p-2 bg-indigo-600 rounded-lg text-white",children:a.jsx(qu,{size:20})}),"Temahanterare"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 ml-11",children:"Anpassa EduFlex utseende efter din organisation"})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-200 dark:hover:bg-[#3c4043] rounded-full transition-colors text-gray-500 dark:text-gray-400",children:a.jsx(Je,{size:24})})]}),a.jsxs("div",{className:"p-8 overflow-y-auto bg-gray-50 dark:bg-[#131314]",children:[i&&a.jsxs("div",{className:"mb-6 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(Mn,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-300",children:"Tema lst av organisation"}),a.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-400 mt-1",children:"Din organisation har valt ett standardtema. Kontakta din administratr fr att ndra detta."})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(o=>{const l=n===o.id;return a.jsxs("button",{onClick:()=>s(o.id),disabled:i,className:`group relative p-4 rounded-2xl border-2 transition-all duration-300 text-left hover:shadow-xl
                                        ${i?"opacity-50 cursor-not-allowed":""}
                                        ${l?"border-indigo-600 bg-white dark:bg-[#1E1F20] shadow-lg scale-[1.02]":"border-transparent bg-white dark:bg-[#1E1F20] hover:border-gray-300 dark:hover:border-[#3c4043]"}
                                    `,children:[l&&a.jsx("div",{className:"absolute -top-3 -right-3 bg-indigo-600 text-white p-1.5 rounded-full shadow-md z-10 animate-bounce",children:a.jsx(Gr,{size:16,strokeWidth:3})}),a.jsxs("div",{className:"h-32 rounded-xl mb-4 overflow-hidden relative shadow-inner border border-gray-100 dark:border-[#3c4043]",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-[#282a2c] dark:to-[#131314]"}),a.jsxs("div",{className:"absolute top-4 left-4 right-4 h-8 rounded-lg flex items-center px-3",style:{backgroundColor:o.colors[600]},children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-white/50 mr-2"}),a.jsx("div",{className:"w-16 h-2 rounded-full bg-white/30"})]}),a.jsx("div",{className:"absolute top-16 left-4 w-12 h-12 rounded-lg opacity-80",style:{backgroundColor:o.colors[200]}}),a.jsx("div",{className:"absolute top-16 left-20 right-4 h-12 rounded-lg border-2 border-dashed opacity-50 flex items-center justify-center",style:{borderColor:o.colors[400]},children:a.jsx("div",{className:"w-20 h-2 rounded-full",style:{backgroundColor:o.colors[300]}})})]}),a.jsx("div",{className:"flex justify-between items-end",children:a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold text-lg ${l?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:o.name}),a.jsx("div",{className:"flex gap-1 mt-2",children:[500,600,700].map(c=>a.jsx("div",{className:"w-6 h-6 rounded-full shadow-sm border border-gray-100 dark:border-transparent",style:{backgroundColor:o.colors[c]}},c))})]})})]},o.id)})})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(ow,{size:16})," ",a.jsx("span",{children:"Dark mode anpassas automatiskt"})]}),a.jsx("button",{onClick:e,className:"bg-gray-900 dark:bg-white text-white dark:text-black px-8 py-3 rounded-xl font-bold hover:opacity-90 transition-opacity",children:"Klar"})]})]})}):null};function xit(){const{t}=nt(),[e,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[d,u]=N.useState({name:"",tenantId:"",schema:"",dbUrl:"",dbUsername:"",dbPassword:""});N.useEffect(()=>{h()},[]);const h=async()=>{s(!0);try{const m=await O.tenants.getAll();r(m)}catch(m){console.error("Failed to fetch tenants",m),tr.error("Kunde inte hmta tenants")}finally{s(!1)}},f=async m=>{m.preventDefault(),o(!0);try{await O.tenants.create(d),tr.success("Tenant skapad!"),c(!1),u({name:"",tenantId:"",schema:"",dbUrl:"",dbUsername:"",dbPassword:""}),h()}catch(p){console.error("Failed to create tenant",p),tr.error("Kunde inte skapa tenant. ID kanske redan finns?")}finally{o(!1)}},g=async(m,p)=>{if(!window.confirm(`Vill du initiera databasschemat fr ${p}? Detta kommer skapa tabeller.`))return;const b=tr.loading("Initierar schema...");try{await O.tenants.initSchema(m),tr.success("Schema initierat!",{id:b})}catch{tr.error("Misslyckades att initiera schema",{id:b})}},x=async m=>{if(window.confirm("r du sker? Detta kan inte ngras."))try{await O.tenants.delete(m),tr.success("Tenant borttagen"),h()}catch{tr.error("Kunde inte ta bort tenant")}};return n?a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Laddar tenants..."}):a.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Uf,{className:"w-6 h-6 text-indigo-500"}),"Tenant Management"]}),a.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Hantera organisationer och databaskopplingar"})]}),a.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition-colors font-medium",children:[a.jsx(jt,{size:18}),"Ny Tenant"]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.map(m=>a.jsx("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg",children:a.jsx(Gi,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded text-xs font-mono border border-gray-200 dark:border-gray-600",children:["ID: ",m.tenantId]}),a.jsxs("span",{className:"px-2 py-0.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded text-xs font-mono border border-blue-100 dark:border-blue-800",children:["Schema: ",m.schema]})]}),a.jsx("div",{className:"text-xs text-gray-400 mt-2 font-mono break-all",children:m.dbUrl||"Using Default Connection"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>g(m.id,m.name),title:"Initiera/Uppdatera Schema",className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",children:a.jsx(sn,{size:18})}),a.jsx("button",{onClick:()=>x(m.id),title:"Ta bort",className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:a.jsx(qt,{size:18})})]})]})},m.id)),e.length===0&&a.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[a.jsx(Gi,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Inga tenants hittades"}),a.jsx("p",{className:"text-gray-500",children:"Brja med att skapa din frsta tenant."})]})]}),l&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Ny Tenant"})}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Namn (Display Name)"}),a.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"T.ex. Acme Corp",value:d.name,onChange:m=>u({...d,name:m.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tenant ID"}),a.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm",placeholder:"acme",value:d.tenantId,onChange:m=>u({...d,tenantId:m.target.value})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Anvnds i URL (acme.eduflex.local)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Schema"}),a.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm",placeholder:"tenant_acme",value:d.schema,onChange:m=>u({...d,schema:m.target.value})})]})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Separat Databas (Valfritt)"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm font-mono",placeholder:"JDBC URL (Lmna tomt fr default)",value:d.dbUrl,onChange:m=>u({...d,dbUrl:m.target.value})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Username",value:d.dbUsername,onChange:m=>u({...d,dbUsername:m.target.value})}),a.jsx("input",{type:"password",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Password",value:d.dbPassword,onChange:m=>u({...d,dbPassword:m.target.value})})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg font-medium transition-colors",children:"Avbryt"}),a.jsxs("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center gap-2",children:[i&&a.jsx(sn,{className:"animate-spin w-4 h-4"}),"Skapa Tenant"]})]})]})]})})]})}const bit=({subject:t,onClose:e,onImport:r})=>{const[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(""),[d,u]=N.useState(""),[h,f]=N.useState(""),[g,x]=N.useState(!1);N.useEffect(()=>{m()},[]);const m=async()=>{try{const b=await O.get("/users?size=1000"),y=(b.content||b||[]).filter(w=>{var k,j,_;return((k=w.role)==null?void 0:k.name)==="TEACHER"||((j=w.role)==null?void 0:j.name)==="ROLE_TEACHER"||((_=w.role)==null?void 0:_.name)==="ADMIN"});s(y)}catch(b){console.error("Failed to fetch teachers",b)}finally{o(!1)}},p=async b=>{b.preventDefault(),x(!0);const v={code:t.code,name:t.name,description:t.description,teacherId:l?parseInt(l):null,startDate:d||null,endDate:h||null};await r(v),x(!1)};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-2xl shadow-2xl border border-gray-100 dark:border-[#282a2c] overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-[#282a2c] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Importera Kurs"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:a.jsx(Je,{size:20,className:"text-gray-500"})})]}),a.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Kursnamn"}),a.jsx("input",{type:"text",value:t.name,disabled:!0,className:"w-full px-3 py-2 bg-gray-100 dark:bg-black/20 rounded-lg border border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Lrare"}),a.jsxs("div",{className:"relative",children:[a.jsx(jr,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsxs("select",{value:l,onChange:b=>c(b.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none",children:[a.jsx("option",{value:"",children:"Vlj en lrare..."}),i?a.jsx("option",{disabled:!0,children:"Laddar..."}):n.map(b=>a.jsxs("option",{value:b.id,children:[b.firstName," ",b.lastName," (",b.email,")"]},b.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Startdatum"}),a.jsxs("div",{className:"relative",children:[a.jsx(zt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"date",value:d,onChange:b=>u(b.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slutdatum"}),a.jsxs("div",{className:"relative",children:[a.jsx(zt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"date",value:h,onChange:b=>f(b.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]})]})]}),a.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"Avbryt"}),a.jsxs("button",{type:"submit",disabled:g,className:"px-4 py-2 text-sm font-medium bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:[g?a.jsx(ft,{className:"animate-spin",size:16}):a.jsx(Gr,{size:16}),"Importera"]})]})]})]})})},yit=()=>{var w,k,j;const[t,e]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(""),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,h]=N.useState(!1),[f,g]=N.useState(!1),x=async()=>{if(confirm("Detta kommer att synka ALLA kurser i katalogen med Skolverkets API. Detta kan ta ngra minuter. Vill du fortstta?")){g(!0);try{const _=await O.post("/skolverket/api/sync-all");Ae.success(`Synk slutfrd! ${_.synced} kurser uppdaterades.`)}catch(_){Ae.error("Synk misslyckades: "+_.message)}finally{g(!1)}}};N.useEffect(()=>{m()},[]);const m=async()=>{n(!0);try{const _=await O.get("/skolverket/api/subjects"),S=Array.isArray(_)?_:_.subjects||[];e(S)}catch(_){console.error("Failed to fetch subjects",_),Ae.error("Kunde inte hmta mnen.")}finally{n(!1)}},p=async _=>{d(!0);try{const S=await O.get(`/skolverket/api/subjects/${_}`);l(S)}catch(S){console.error("Failed to fetch subject details",S),Ae.error("Kunde inte hmta detaljer.")}finally{d(!1)}},b=()=>{o&&h(!0)},v=async _=>{try{(await O.post("/skolverket/api/import",_)).success?(Ae.success(`Importerade ${_.name} till kurskatalogen!`),h(!1)):(Ae.success("Kursen importerad!"),h(!1))}catch(S){console.error("Import failed",S),S.message&&S.message.includes("exists")?Ae.error("Kursen finns redan i katalogen."):Ae.error("Kunde inte importera kursen.")}},y=t.filter(_=>{var S,A;return((S=_.name)==null?void 0:S.toLowerCase().includes(s.toLowerCase()))||((A=_.code)==null?void 0:A.toLowerCase().includes(s.toLowerCase()))});return a.jsxs("div",{className:"h-full flex flex-col p-4 space-y-4",children:[u&&o&&a.jsx(bit,{subject:o.subject,onClose:()=>h(!1),onImport:v}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Skolverket Integration"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Utforska kursplaner och mnen direkt frn Skolverkets API"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:x,disabled:f,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium disabled:opacity-50 shadow-sm transition-all",children:[a.jsx(sn,{size:16,className:f?"animate-spin":""}),f?"Synkar katalog...":"Synka All Kurskatalog"]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 px-4 py-2 rounded-lg text-sm font-medium",children:["API Status: ",r?"Checking...":"Connected"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full overflow-hidden",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-100 dark:border-[#282a2c] flex flex-col overflow-hidden shadow-sm",children:[a.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-[#282a2c]",children:a.jsxs("div",{className:"relative",children:[a.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Sk mne eller kod...",className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#131314] rounded-xl border-none outline-none focus:ring-2 ring-indigo-500/50 text-gray-900 dark:text-white",value:s,onChange:_=>i(_.target.value)})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:r?a.jsx("div",{className:"flex justify-center p-8",children:a.jsx(ft,{className:"animate-spin text-gray-400"})}):y.length>0?y.map(_=>{var S;return a.jsxs("button",{onClick:()=>p(_.code),className:`w-full text-left p-3 rounded-xl flex items-center justify-between transition-colors ${((S=o==null?void 0:o.subject)==null?void 0:S.code)===_.code?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-300"}`,children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:_.name}),a.jsx("div",{className:"text-xs opacity-70",children:_.code})]}),a.jsx(or,{size:16,className:"opacity-50"})]},_.code)}):a.jsx("div",{className:"text-center p-8 text-gray-500",children:"Inga mnen funna."})})]}),a.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-100 dark:border-[#282a2c] flex flex-col overflow-hidden shadow-sm p-6 relative",children:c?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 dark:bg-black/50 z-10",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:40})}):o?a.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar space-y-6",children:[a.jsxs("div",{className:"border-b border-gray-100 dark:border-[#282a2c] pb-4 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-bold mb-2",children:"Subject"}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(w=o.subject)==null?void 0:w.name}),a.jsxs("p",{className:"text-gray-500 font-mono text-sm mt-1",children:["Code: ",(k=o.subject)==null?void 0:k.code]})]}),a.jsxs("button",{onClick:b,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50",children:[a.jsx(Rn,{size:18}),"Importera till Katalog"]})]}),a.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Beskrivning"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:((j=o.subject)==null?void 0:j.description)||"Ingen beskrivning tillgnglig."}}),a.jsxs("div",{className:"mt-8",children:[a.jsx("h4",{className:"text-xs font-bold uppercase text-gray-400 mb-2",children:"Technical Data (Raw Response)"}),a.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-xl overflow-x-auto text-xs font-mono",children:JSON.stringify(o,null,2)})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[a.jsx(gt,{size:64,className:"mb-4 opacity-20"}),a.jsx("p",{className:"text-lg",children:"Vlj ett mne frn listan fr att se detaljer"})]})})]})]})},vit=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(null),[s,i]=N.useState({description:"",englishTitle:"",skolformer:"",pdfUrl:"",subjectPurpose:"",objectives:""}),[o,l]=N.useState([]),[c,d]=N.useState(!1),[u,h]=N.useState(!1),[f,g]=N.useState("grundinfo"),[x,m]=N.useState({total:0,completed:0});N.useEffect(()=>{p(),b()},[]);const p=async()=>{try{const A=await O.get("/skolverket/courses");e(A)}catch(A){console.error("Failed to fetch courses",A)}},b=async()=>{try{const A=await O.get("/skolverket/stats");m(A)}catch(A){console.error("Failed to fetch stats",A)}},v=async A=>{d(!0),n(A),i({description:A.description||"",englishTitle:A.englishTitle||"",skolformer:A.skolformer||"",pdfUrl:A.pdfUrl||"",subjectPurpose:A.subjectPurpose||"",objectives:A.objectives||""});try{const T=await O.get(`/skolverket/courses/${A.courseCode}/criteria`);l(T.length>0?T:y())}catch{l(y())}d(!1)},y=()=>[{gradeLevel:"E",criteriaText:"",sortOrder:1},{gradeLevel:"D",criteriaText:"",sortOrder:2},{gradeLevel:"C",criteriaText:"",sortOrder:3},{gradeLevel:"B",criteriaText:"",sortOrder:4},{gradeLevel:"A",criteriaText:"",sortOrder:5}],w=async()=>{if(r){h(!0);try{await O.put(`/skolverket/courses/${r.courseCode}/details`,s);const A=o.filter(T=>T.criteriaText.trim()!=="");A.length>0&&await O.post(`/skolverket/courses/${r.courseCode}/criteria`,A),alert("Data sparad!"),b()}catch(A){alert("Kunde inte spara: "+A.message)}finally{h(!1)}}},k=async()=>{if(r){d(!0);try{await O.post(`/skolverket/api/sync/${r.courseCode}`);const A=await O.get("/skolverket/courses");e(A);const T=A.find(E=>E.courseCode===r.courseCode);T&&v(T),toast!=null&&toast.success?toast.success("Data synkad med Skolverket!"):alert("Data synkad med Skolverket!")}catch(A){alert("Kunde inte synka: "+A.message)}finally{d(!1)}}},j=(A,T,E)=>{const C=[...o];C[A][T]=E,l(C)},_=[{id:"grundinfo",label:"Grundinfo"},{id:"innehall",label:"Innehll"},{id:"kunskapskrav",label:"Kunskapskrav"}],S={E:"bg-green-100 dark:bg-green-900/30 border-green-500",D:"bg-yellow-100 dark:bg-yellow-900/30 border-yellow-500",C:"bg-blue-100 dark:bg-blue-900/30 border-blue-500",B:"bg-purple-100 dark:bg-purple-900/30 border-purple-500",A:"bg-indigo-100 dark:bg-indigo-900/30 border-indigo-500"};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Skolverket Data Entry"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Fyll i detaljerad kursinformation manuellt"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:[x.completed,"/",x.total]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"kurser ifyllda"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Vlj kurs"}),a.jsxs("select",{value:(r==null?void 0:r.courseCode)||"",onChange:A=>{const T=t.find(E=>E.courseCode===A.target.value);T&&v(T)},className:"w-full px-4 py-3 bg-white dark:bg-[#282a2c] border border-gray-300 dark:border-[#3c4043] rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"-- Vlj en kurs --"}),t.map(A=>a.jsxs("option",{value:A.courseCode,children:[A.courseCode," - ",A.courseName]},A.courseCode))]})]})]}),r&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] p-6",children:[a.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-200 dark:border-gray-700",children:_.map(A=>a.jsx("button",{onClick:()=>g(A.id),className:`px-4 py-2 font-medium transition-colors border-b-2 ${f===A.id?"border-indigo-600 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-600 dark:text-gray-400"}`,children:A.label},A.id))}),f==="grundinfo"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(_S,{label:"Engelsk titel",value:s.englishTitle,onChange:A=>i({...s,englishTitle:A.target.value}),placeholder:"Administration 1"}),a.jsx(_S,{label:"Skolformer",value:s.skolformer,onChange:A=>i({...s,skolformer:A.target.value}),placeholder:"VUXGYM, GYAN"}),a.jsx(_S,{label:"PDF URL",value:s.pdfUrl,onChange:A=>i({...s,pdfUrl:A.target.value}),placeholder:"https://syllabus-web.skolverket.se/..."})]}),f==="innehall"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(SS,{label:"Beskrivning",value:s.description,onChange:A=>i({...s,description:A.target.value}),placeholder:"Kursen administration 1 omfattar punkterna 13...",rows:6}),a.jsx(SS,{label:"mnets syfte",value:s.subjectPurpose,onChange:A=>i({...s,subjectPurpose:A.target.value}),placeholder:"Undervisningen i mnet administration ska syfta till...",rows:8}),a.jsx(SS,{label:"Kursml / Undervisningen ska ge eleverna frutsttningar att utveckla fljande",value:s.objectives,onChange:A=>i({...s,objectives:A.target.value}),placeholder:"1. Kunskap om organisation och administrativt arbete...",rows:8})]}),f==="kunskapskrav"&&a.jsx("div",{className:"space-y-4",children:o.map((A,T)=>a.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${S[A.gradeLevel]}`,children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsxs("h3",{className:"font-bold text-lg",children:["Betyget ",A.gradeLevel]})}),a.jsx("textarea",{value:A.criteriaText,onChange:E=>j(T,"criteriaText",E.target.value),rows:6,className:"w-full px-4 py-3 bg-white dark:bg-[#282a2c] border border-gray-300 dark:border-[#3c4043] rounded-lg text-gray-900 dark:text-white resize-none",placeholder:`Kriterier fr betyg ${A.gradeLevel}...`})]},T))}),a.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{onClick:w,disabled:u,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium disabled:opacity-50",children:[a.jsx(sa,{size:20}),u?"Sparar...":"Spara"]}),a.jsxs("button",{onClick:k,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50",children:[a.jsx(fd,{size:20}),c?"Synkar...":"Synka med Skolverket"]}),a.jsxs("button",{onClick:()=>n(null),className:"flex items-center gap-2 px-6 py-3 bg-gray-200 dark:bg-[#282a2c] hover:bg-gray-300 dark:hover:bg-[#3c4043] text-gray-900 dark:text-white rounded-lg font-medium",children:[a.jsx(Je,{size:20}),"Avbryt"]})]})]})]})},_S=({label:t,value:e,onChange:r,placeholder:n})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t}),a.jsx("input",{type:"text",value:e,onChange:r,placeholder:n,className:"w-full px-4 py-3 bg-white dark:bg-[#282a2c] border border-gray-300 dark:border-[#3c4043] rounded-lg text-gray-900 dark:text-white"})]}),SS=({label:t,value:e,onChange:r,placeholder:n,rows:s})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t}),a.jsx("textarea",{value:e,onChange:r,placeholder:n,rows:s,className:"w-full px-4 py-3 bg-white dark:bg-[#282a2c] border border-gray-300 dark:border-[#3c4043] rounded-lg text-gray-900 dark:text-white resize-none"})]}),kit=()=>{const[t,e]=N.useState("import");return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-[#131314] p-1 rounded-lg w-fit",children:[a.jsxs("button",{onClick:()=>e("import"),className:`px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 transition-all ${t==="import"?"bg-white dark:bg-[#282a2c] text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[a.jsx(zs,{size:16}),"API Utforskare & Import"]}),a.jsxs("button",{onClick:()=>e("data"),className:`px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 transition-all ${t==="data"?"bg-white dark:bg-[#282a2c] text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[a.jsx(h5,{size:16}),"Hantera Data Manuellt"]})]}),a.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300 min-h-[600px]",children:[t==="import"&&a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#282a2c] shadow-sm h-[800px] overflow-hidden",children:a.jsx(yit,{})}),t==="data"&&a.jsx(vit,{})]})]})},wit=()=>{const[t,e]=N.useState({onlyoffice_url:"http://localhost:8081",onlyoffice_internal_url:"http://onlyoffice-ds",onlyoffice_enabled:"true"}),[r,n]=N.useState(!0),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState(!1);N.useEffect(()=>{u()},[]);const u=async()=>{n(!0);try{const g=await O.system.getSettings(),x={};g.forEach(m=>{(m.settingKey==="onlyoffice_url"||m.settingKey==="onlyoffice_enabled"||m.settingKey==="onlyoffice_internal_url")&&(x[m.settingKey]=m.settingValue)}),e(m=>({...m,...x}))}catch(g){console.error("Failed to fetch ONLYOFFICE settings:",g)}finally{n(!1)}},h=async()=>{i(!0);try{await Promise.all([O.system.updateSetting("onlyoffice_url",t.onlyoffice_url),O.system.updateSetting("onlyoffice_internal_url",t.onlyoffice_internal_url),O.system.updateSetting("onlyoffice_enabled",t.onlyoffice_enabled)]),alert("Instllningar sparade!")}catch(g){alert("Kunde inte spara: "+g.message)}finally{i(!1)}},f=async()=>{d(!0);try{const g=await O.onlyoffice.checkHealth();l(g)}catch(g){l({status:"error",message:g.message})}finally{d(!1)}};return r?a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded-xl w-1/3"}),a.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-xl"})]})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"ONLYOFFICE-integration"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Konfigurera anslutningen till din ONLYOFFICE Document Server."})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 rounded-xl flex items-center justify-center text-blue-600",children:a.jsx(d5,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Serverinstllningar"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ange URL och status fr dokumentredigering"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Document Server URL"}),a.jsx("input",{type:"text",value:t.onlyoffice_url,onChange:g=>e({...t,onlyoffice_url:g.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all dark:text-white font-mono text-sm",placeholder:"https://onlyoffice.example.com"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL som anvnds av anvndarens webblsare fr att ladda editorn."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Internal Document Server URL"}),a.jsx("input",{type:"text",value:t.onlyoffice_internal_url,onChange:g=>e({...t,onlyoffice_internal_url:g.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all dark:text-white font-mono text-sm",placeholder:"http://onlyoffice-ds"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL som anvnds av backend fr anslutningskontroll (Hlsokontroll)."})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Aktivera integration"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Tillmpar ONLYOFFICE fr alla kompatibla dokumenttyper (docx, xlsx, pptx)"})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.onlyoffice_enabled==="true",onChange:g=>e({...t,onlyoffice_enabled:g.target.checked?"true":"false"})}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 dark:peer-focus:ring-indigo-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-600"})]})})]})]}),a.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:h,disabled:s,className:"flex-1 py-3 bg-gray-900 dark:bg-white text-white dark:text-black rounded-xl font-bold shadow-lg hover:transform hover:scale-[1.02] transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:[s?a.jsx(sn,{size:18,className:"animate-spin"}):a.jsx(sa,{size:18}),"Spara instllningar"]}),a.jsxs("button",{onClick:f,disabled:c,className:"px-6 py-3 bg-gray-100 dark:bg-[#282a2c] text-gray-700 dark:text-gray-300 rounded-xl font-bold hover:bg-gray-200 dark:hover:bg-[#333] transition-all flex items-center justify-center gap-2",children:[c?a.jsx(sn,{size:18,className:"animate-spin"}):a.jsx(sn,{size:18}),"Testa anslutning"]})]}),o&&a.jsxs("div",{className:`mt-6 p-4 rounded-xl flex items-start gap-3 animate-in slide-in-from-top-2 duration-300 ${o.status==="success"||o.status==="UP"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:[o.status==="success"||o.status==="UP"?a.jsx(ci,{size:20,className:"mt-0.5 flex-shrink-0"}):a.jsx(Dr,{size:20,className:"mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:o.status==="success"||o.status==="UP"?"Anslutning lyckades!":"Anslutning misslyckades"}),a.jsx("p",{className:"text-sm",children:o.message||(o.status==="success"||o.status==="UP"?"Document Server svarar korrekt.":"Kunde inte n Document Server.")}),o.version&&a.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs font-mono bg-white/50 dark:bg-black/20 px-2 py-1 rounded w-fit",children:["Version: ",o.version]})]})]})]})]})},jit=()=>{const{t}=nt(),[e,r]=N.useState("lti"),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(!1),[d,u]=N.useState(!1),[h,f]=N.useState({issuer:"",clientId:"",authUrl:"",tokenUrl:"",jwksUrl:""});N.useEffect(()=>{g()},[]);const g=async()=>{o(!0);try{const p=await O.lti.getAll();s(p||[])}catch(p){console.error(p),Ae.error("Kunde inte hmta integrationer")}finally{o(!1)}},x=async p=>{if(window.confirm("r du sker? Detta kan bryta kopplingen fr befintliga anvndare."))try{await O.lti.delete(p),Ae.success("Raderad"),g()}catch{Ae.error("Kunde inte radera")}},m=async p=>{p.preventDefault(),u(!0);try{await O.lti.save(h),Ae.success("Sparad!"),c(!1),f({issuer:"",clientId:"",authUrl:"",tokenUrl:"",jwksUrl:""}),g()}catch{Ae.error("Kunde inte spara")}finally{u(!1)}};return a.jsxs("div",{className:"animate-in fade-in",children:[a.jsxs("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl w-fit mb-8",children:[a.jsxs("button",{onClick:()=>r("lti"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-sm transition-all ${e==="lti"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.jsx(zs,{size:18})," LTI / LMS"]}),a.jsxs("button",{onClick:()=>r("onlyoffice"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-sm transition-all ${e==="onlyoffice"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.jsx(d5,{size:18})," ONLYOFFICE"]})]}),e==="onlyoffice"?a.jsx(wit,{}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold dark:text-white flex items-center gap-2",children:[a.jsx(zs,{className:"text-indigo-600"}),"Externa Tjnster (LTI)"]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Hantera kopplingar till lrplattformar (Canvas, Moodle, etc)"})]}),a.jsxs("button",{onClick:()=>c(!l),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[l?a.jsx(Je,{size:20}):a.jsx(jt,{size:20}),l?"Avbryt":"Ny Integration"]})]}),l&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg mb-8 animate-in slide-in-from-top-4",children:[a.jsx("h3",{className:"text-lg font-bold mb-4 dark:text-white",children:"Lgg till LTI 1.3 Plattform"}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Issuer (ISS)"}),a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://canvas.instructure.com",value:h.issuer,onChange:p=>f({...h,issuer:p.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Client ID"}),a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"10000000000001",value:h.clientId,onChange:p=>f({...h,clientId:p.target.value})})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"OIDC Auth URL"}),a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://canvas.instructure.com/api/lti/authorize_redirect",value:h.authUrl,onChange:p=>f({...h,authUrl:p.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Access Token URL"}),a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://canvas.instructure.com/login/oauth2/token",value:h.tokenUrl,onChange:p=>f({...h,tokenUrl:p.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"JWKS URL"}),a.jsx("input",{required:!0,className:"w-full p-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://canvas.instructure.com/api/lti/security/jwks",value:h.jwksUrl,onChange:p=>f({...h,jwksUrl:p.target.value})})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsxs("button",{type:"submit",disabled:d,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[d?a.jsx(ft,{className:"animate-spin"}):a.jsx(sa,{size:20}),"Spara Integration"]})})]})]}),i?a.jsx("div",{className:"flex justify-center p-12",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:40})}):n.length===0?a.jsxs("div",{className:"text-center p-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[a.jsx(zs,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Inga integrationer n"}),a.jsx("p",{className:"text-gray-500",children:"Lgg till en LTI-plattform fr att brja."})]}):a.jsx("div",{className:"grid gap-4",children:n.map(p=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col md:flex-row justify-between md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:p.issuer}),a.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs px-2 py-0.5 rounded-full border border-indigo-200",children:"LTI 1.3"})]}),a.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nw,{size:14})," Client ID: ",p.clientId]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gu,{size:14})," Auth: ",p.authUrl]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("button",{onClick:()=>x(p.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Radera",children:a.jsx(qt,{size:20})})})]},p.id))}),a.jsxs("div",{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:[a.jsxs("h4",{className:"font-bold text-blue-800 dark:text-blue-300 mb-2 flex items-center gap-2",children:[a.jsx(Mn,{size:18}),"Konfigurera i ditt LMS"]}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:"Nr du lgger till EduFlex som ett externt verktyg i Canvas/Moodle, anvnd fljande URL:er:"}),a.jsxs("div",{className:"grid gap-2 text-sm font-mono bg-white dark:bg-black/20 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Login Init URL:"}),a.jsxs("span",{className:"select-all",children:[window.location.origin,"/api/lti/login_init"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Redirect URI (Launch):"}),a.jsxs("span",{className:"select-all",children:[window.location.origin,"/api/lti/launch"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Public Keys (JWKS):"}),a.jsxs("span",{className:"select-all",children:[window.location.origin,"/api/lti/jwks"]})]})]})]})]})]})},Nit=[{value:"CERTIFICATE",label:"Certifikat / Kursintyg"},{value:"GRADE_REPORT",label:"Betygsrapport"}],_it=[{value:"BOTTOM_RIGHT",label:"Nedre hger"},{value:"BOTTOM_LEFT",label:"Nedre vnster"},{value:"TOP_RIGHT",label:"vre hger"},{value:"TOP_LEFT",label:"vre vnster"}],AS=({checked:t,onChange:e,label:r})=>a.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:r}),a.jsx("button",{type:"button",onClick:()=>e(!t),className:`relative w-11 h-6 rounded-full transition-colors ${t?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white shadow transition-transform ${t?"translate-x-5":""}`})})]}),hv=({icon:t,title:e,open:r,onToggle:n})=>a.jsxs("button",{onClick:n,className:"flex items-center justify-between w-full py-2 text-sm font-bold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(t,{size:14}),e]}),a.jsx(Mo,{size:14,className:`transition-transform ${r?"rotate-180":""}`})]}),ES=({label:t,value:e,onChange:r})=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:e||"#000000",onChange:n=>r(n.target.value),className:"w-8 h-8 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer"}),a.jsx("input",{type:"text",value:e||"",onChange:n=>r(n.target.value),className:"w-20 px-2 py-1 text-xs font-mono bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg"})]})]}),gF=({label:t,currentUrl:e,onUpload:r,uploading:n})=>{const s=N.useCallback(i=>{var l,c;i.preventDefault();const o=(c=(l=i.dataTransfer)==null?void 0:l.files)==null?void 0:c[0];o&&o.type.startsWith("image/")&&r(o)},[r]);return a.jsxs("div",{className:"space-y-2",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t}),a.jsxs("div",{onDrop:s,onDragOver:i=>i.preventDefault(),className:"border-2 border-dashed border-gray-200 dark:border-gray-600 rounded-xl p-4 text-center hover:border-indigo-400 transition-colors cursor-pointer relative",children:[e?a.jsx("img",{src:e.includes("minio:9000")?e.replace("minio:9000","localhost:9000"):e,alt:t,className:"max-h-20 mx-auto object-contain rounded"}):a.jsxs("div",{className:"text-gray-400 dark:text-gray-500",children:[a.jsx(Xa,{size:20,className:"mx-auto mb-1"}),a.jsx("p",{className:"text-xs",children:"Dra & slpp eller klicka"})]}),a.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:i=>{i.target.files[0]&&r(i.target.files[0])},disabled:n}),n&&a.jsx("div",{className:"absolute inset-0 bg-white/70 dark:bg-black/50 flex items-center justify-center rounded-xl",children:a.jsx(ft,{className:"animate-spin text-indigo-500",size:24})})]})]})},Sit=({template:t})=>{const e=t,r=e.orientation!=="PORTRAIT",n=r?420:297,s=r?297:420,i=e.logoUrl?e.logoUrl.includes("minio:9000")?e.logoUrl.replace("minio:9000","localhost:9000"):e.logoUrl:null,o=e.backgroundImageUrl?e.backgroundImageUrl.includes("minio:9000")?e.backgroundImageUrl.replace("minio:9000","localhost:9000"):e.backgroundImageUrl:null,l=(e.titleFontSize||42)/42,c=(e.bodyFontSize||18)/18;return a.jsxs("div",{className:"relative overflow-hidden bg-white shadow-2xl mx-auto",style:{width:n,height:s,fontFamily:"Times New Roman, serif"},children:[o&&a.jsx("img",{src:o,alt:"",className:"absolute inset-0 w-full h-full object-cover"}),e.showBorder!==!1&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute",style:{inset:"6px",border:`3px solid ${e.primaryColor||"#C5A009"}`,pointerEvents:"none"}}),a.jsx("div",{className:"absolute",style:{inset:"12px",border:`1px solid ${e.secondaryColor||"#1E293B"}`,pointerEvents:"none"}})]}),e.showCornerDecorations!==!1&&a.jsx(a.Fragment,{children:[[12,12],[n-16,12],[12,s-16],[n-16,s-16]].map(([d,u],h)=>a.jsx("div",{className:"absolute w-2.5 h-2.5 rounded-full",style:{left:d,top:u,backgroundColor:e.primaryColor||"#C5A009"}},h))}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full px-8 text-center",style:{paddingTop:r?"20px":"40px"},children:[i&&a.jsx("img",{src:i,alt:"Logo",className:"w-10 h-10 object-contain mb-2"}),a.jsx("h1",{className:"font-bold tracking-[0.15em] mb-0.5",style:{fontSize:`${Math.round(14*l)}px`,color:e.secondaryColor||"#1E293B"},children:e.titleText||"K U R S I N T Y G"}),a.jsx("p",{className:"text-[7px] font-bold text-gray-400 uppercase tracking-widest mb-3",children:e.subtitleText||"BEVIS P GENOMFRD UTBILDNING"}),a.jsx("p",{className:"italic text-gray-600 mb-1",style:{fontSize:`${Math.round(7*c)}px`},children:e.introText||"Hrmed intygas att"}),a.jsx("p",{className:"font-bold underline mb-1",style:{fontSize:"13px",color:e.secondaryColor||"#1E293B"},children:"Anna Andersson"}),a.jsx("p",{className:"italic text-gray-600 mb-1",style:{fontSize:`${Math.round(7*c)}px`},children:e.bodyText||"Har framgngsrikt genomfrt kursen"}),a.jsx("p",{className:"font-bold text-[10px] mb-0.5",children:"Matematik 1a"}),a.jsxs("p",{className:"text-[6px] text-gray-400",children:["Kurskod: MAT01a | Betyg: ",e.gradeLabel||"GODKND"]}),a.jsxs("div",{className:"flex justify-between w-full mt-auto mb-4 px-4",style:{marginTop:"12px"},children:[a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"text-[7px]",children:"Datum: 2026-02-11"}),a.jsx("div",{className:"w-24 border-t border-gray-300 mt-1"}),a.jsx("p",{className:"text-[5px] text-gray-400",children:"Utfrdat datum"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[8px] font-bold italic",style:{color:e.primaryColor||"#C5A009"},children:e.schoolNameOverride||"EduFlex Academy"}),a.jsx("div",{className:"w-24 border-t border-gray-300 mt-1 ml-auto"}),a.jsxs("p",{className:"text-[5px] text-gray-400",children:["Signerat av ",e.signatureTitle||"Rektor"]})]})]})]}),e.showQrCode!==!1&&a.jsx("div",{className:"absolute w-12 h-12 border-2 border-gray-300 rounded flex items-center justify-center bg-white/80",style:{...e.qrPosition==="TOP_LEFT"?{top:16,left:16}:e.qrPosition==="TOP_RIGHT"?{top:16,right:16}:e.qrPosition==="BOTTOM_LEFT"?{bottom:16,left:16}:{bottom:16,right:16}},children:a.jsx(pK,{size:28,className:"text-gray-400"})})]})},Ait=({template:t})=>{const e=t,r=e.secondaryColor||"#1E293B";return a.jsxs("div",{className:"relative bg-white shadow-2xl mx-auto overflow-hidden",style:{width:297,height:420,fontFamily:"Helvetica, sans-serif"},children:[a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("h1",{className:"text-center font-bold text-sm mb-1",style:{color:r},children:e.titleText||"SAMLADE BETYG"}),a.jsx("p",{className:"text-center text-[7px] text-gray-400 mb-3",children:e.schoolNameOverride||"EduFlex Academy"}),a.jsxs("div",{className:"text-[6px] space-y-0.5 mb-3 text-gray-600",children:[a.jsxs("p",{children:[a.jsx("b",{children:"Elev:"})," Anna Andersson"]}),a.jsxs("p",{children:[a.jsx("b",{children:"Personnummer:"})," 20080115-XXXX"]}),a.jsxs("p",{children:[a.jsx("b",{children:"Utfrdat:"})," 2026-02-11 14:30"]})]}),a.jsxs("table",{className:"w-full text-[6px] border-collapse",children:[a.jsx("thead",{children:a.jsx("tr",{style:{backgroundColor:r},children:["Kurs","Kurskod","Status","Datum"].map(n=>a.jsx("th",{className:"text-white py-1 px-1.5 text-left font-bold",children:n},n))})}),a.jsx("tbody",{children:[["Matematik 1a","MAT01a","PASSED","2026-01-15"],["Svenska 1","SVE01","PASSED","2026-01-20"],["Engelska 5","ENG05","PASSED","2026-02-01"]].map(([n,s,i,o],l)=>a.jsxs("tr",{className:l%2===0?"bg-gray-50":"",children:[a.jsx("td",{className:"py-1 px-1.5",children:n}),a.jsx("td",{className:"py-1 px-1.5",children:s}),a.jsx("td",{className:"py-1 px-1.5 font-bold text-green-600",children:i}),a.jsx("td",{className:"py-1 px-1.5",children:o})]},l))})]}),a.jsx("p",{className:"mt-auto text-center text-[5px] italic text-gray-400",children:e.footerText||"Detta dokument r automatiskt genererat och saknar signatur."})]}),e.showQrCode!==!1&&a.jsx("div",{className:"absolute w-10 h-10 border border-gray-300 rounded flex items-center justify-center bg-white/80",style:{...e.qrPosition==="TOP_LEFT"?{top:12,left:12}:e.qrPosition==="TOP_RIGHT"?{top:12,right:12}:e.qrPosition==="BOTTOM_LEFT"?{bottom:12,left:12}:{bottom:12,right:12}},children:a.jsx(pK,{size:22,className:"text-gray-400"})})]})},Eit=()=>{const[t,e]=N.useState([]),[r,n]=N.useState("CERTIFICATE"),[s,i]=N.useState(null),[o,l]=N.useState(!0),[c,d]=N.useState(!1),[u,h]=N.useState(!1),[f,g]=N.useState(!1),[x,m]=N.useState(!1),[p,b]=N.useState({images:!0,texts:!0,colors:!0,layout:!0}),v=A=>b(T=>({...T,[A]:!T[A]})),y=async()=>{try{const A=await O.pdfTemplates.getAll();e(A);const T=A.find(E=>E.templateType===r);T&&i({...T})}catch(A){console.error("Failed to load PDF templates",A),Ae.error("Kunde inte ladda mallar")}finally{l(!1)}};N.useEffect(()=>{y()},[]),N.useEffect(()=>{const A=t.find(T=>T.templateType===r);A&&(i({...A}),m(!1))},[r,t]);const w=(A,T)=>{i(E=>({...E,[A]:T})),m(!0)},k=async()=>{if(s){d(!0);try{const A=await O.pdfTemplates.update(s.id,s);e(T=>T.map(E=>E.id===A.id?A:E)),i({...A}),m(!1),Ae.success("Mallen har sparats")}catch{Ae.error("Kunde inte spara mallen")}finally{d(!1)}}},j=async A=>{if(s){h(!0);try{const T=await O.pdfTemplates.uploadLogo(s.id,A);e(E=>E.map(C=>C.id===T.id?T:C)),i({...T}),Ae.success("Logotyp uppladdad")}catch{Ae.error("Kunde inte ladda upp logotyp")}finally{h(!1)}}},_=async A=>{if(s){g(!0);try{const T=await O.pdfTemplates.uploadBackground(s.id,A);e(E=>E.map(C=>C.id===T.id?T:C)),i({...T}),Ae.success("Bakgrundsbild uppladdad")}catch{Ae.error("Kunde inte ladda upp bakgrundsbild")}finally{g(!1)}}};if(o)return a.jsx("div",{className:"flex items-center justify-center p-20",children:a.jsx(ft,{className:"animate-spin text-indigo-500",size:32})});if(!s)return a.jsxs("div",{className:"text-center p-12 text-gray-500 dark:text-gray-400",children:[a.jsx(xt,{size:48,className:"mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Inga PDF-mallar hittades. Starta servern fr att skapa standardmallar."})]});const S=r==="CERTIFICATE";return a.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-xl",children:a.jsx(xt,{className:"w-5 h-5 text-indigo-500"})}),"PDF-mallredigering"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Anpassa utseende p certifikat och betygsrapporter"})]}),a.jsxs("button",{onClick:k,disabled:c||!x,className:`flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-bold transition-all ${x?"bg-indigo-500 text-white hover:bg-indigo-600 shadow-lg shadow-indigo-500/25":"bg-gray-100 text-gray-400 dark:bg-gray-800 dark:text-gray-500 cursor-not-allowed"}`,children:[c?a.jsx(ft,{size:16,className:"animate-spin"}):x?a.jsx(sa,{size:16}):a.jsx(Gr,{size:16}),c?"Sparar...":x?"Spara ndringar":"Sparat"]})]}),a.jsx("div",{className:"flex gap-2",children:Nit.map(A=>a.jsx("button",{onClick:()=>n(A.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${r===A.value?"bg-indigo-500 text-white shadow-md":"bg-white dark:bg-[#1E1F20] text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-[#282a2c] border border-gray-200 dark:border-white/10"}`,children:A.label},A.value))}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden",children:a.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-white/5",children:[a.jsxs("div",{className:"p-4",children:[a.jsx(hv,{icon:Dd,title:"Bilder",open:p.images,onToggle:()=>v("images")}),p.images&&a.jsxs("div",{className:"mt-3 space-y-4",children:[a.jsx(gF,{label:"Logotyp",currentUrl:s.logoUrl,onUpload:j,uploading:u}),a.jsx(gF,{label:"Bakgrundsbild",currentUrl:s.backgroundImageUrl,onUpload:_,uploading:f})]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx(hv,{icon:f5,title:"Texter",open:p.texts,onToggle:()=>v("texts")}),p.texts&&a.jsx("div",{className:"mt-3 space-y-3",children:[{field:"titleText",label:"Titel",placeholder:S?"K U R S I N T Y G":"SAMLADE BETYG"},...S?[{field:"subtitleText",label:"Undertitel",placeholder:"BEVIS P GENOMFRD UTBILDNING"},{field:"introText",label:"Inledningstext",placeholder:"Hrmed intygas att"},{field:"bodyText",label:"Brdtext",placeholder:"Har framgngsrikt genomfrt kursen"},{field:"gradeLabel",label:"Betygstext",placeholder:"GODKND"},{field:"signatureTitle",label:"Signaturtitel",placeholder:"Rektor"}]:[],{field:"schoolNameOverride",label:"Skolnamn (override)",placeholder:"Lmna tomt fr systemets skolnamn"},{field:"footerText",label:"Fotnot",placeholder:"Valfri fotnot..."}].map(({field:A,label:T,placeholder:E})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:T}),a.jsx("input",{type:"text",value:s[A]||"",onChange:C=>w(A,C.target.value),placeholder:E,className:"w-full px-3 py-2 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl text-sm dark:text-white"})]},A))})]}),a.jsxs("div",{className:"p-4",children:[a.jsx(hv,{icon:qu,title:"Frger",open:p.colors,onToggle:()=>v("colors")}),p.colors&&a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsx(ES,{label:S?"Primr (ram/guld)":"Primr",value:s.primaryColor,onChange:A=>w("primaryColor",A)}),a.jsx(ES,{label:S?"Sekundr (text/bl)":"Rubrikfrg",value:s.secondaryColor,onChange:A=>w("secondaryColor",A)}),a.jsx(ES,{label:"Accent",value:s.accentColor,onChange:A=>w("accentColor",A)})]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx(hv,{icon:L1,title:"Layout",open:p.layout,onToggle:()=>v("layout")}),p.layout&&a.jsxs("div",{className:"mt-3 space-y-3",children:[S&&a.jsxs(a.Fragment,{children:[a.jsx(AS,{label:"Visa ramar",checked:s.showBorder!==!1,onChange:A=>w("showBorder",A)}),a.jsx(AS,{label:"Visa hrndekorationer",checked:s.showCornerDecorations!==!1,onChange:A=>w("showCornerDecorations",A)}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Orientering"}),a.jsxs("select",{value:s.orientation||"LANDSCAPE",onChange:A=>w("orientation",A.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl text-sm dark:text-white",children:[a.jsx("option",{value:"LANDSCAPE",children:"Liggande (Landscape)"}),a.jsx("option",{value:"PORTRAIT",children:"Stende (Portrait)"})]})]})]}),a.jsx(AS,{label:"Visa QR-kod",checked:s.showQrCode!==!1,onChange:A=>w("showQrCode",A)}),s.showQrCode!==!1&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"QR-position"}),a.jsx("select",{value:s.qrPosition||"BOTTOM_RIGHT",onChange:A=>w("qrPosition",A.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl text-sm dark:text-white",children:_it.map(A=>a.jsx("option",{value:A.value,children:A.label},A.value))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:["Titelstorlek: ",s.titleFontSize||42,"px"]}),a.jsx("input",{type:"range",min:"20",max:"60",value:s.titleFontSize||42,onChange:A=>w("titleFontSize",parseInt(A.target.value)),className:"w-full accent-indigo-500"})]}),S&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:["Brdtextstorlek: ",s.bodyFontSize||18,"px"]}),a.jsx("input",{type:"range",min:"10",max:"30",value:s.bodyFontSize||18,onChange:A=>w("bodyFontSize",parseInt(A.target.value)),className:"w-full accent-indigo-500"})]})]})]})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-600 dark:text-gray-300",children:[a.jsx(Xo,{size:16}),"Frhandsvisning"]}),a.jsx("div",{className:"bg-gray-100 dark:bg-black/20 rounded-2xl p-8 flex items-center justify-center min-h-[480px] border border-gray-200 dark:border-white/5",children:S?a.jsx(Sit,{template:s}):a.jsx(Ait,{template:s})}),a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"Frhandsvisning r en approximation. Den slutgiltiga PDF:en kan se annorlunda ut."})]})]})]})},mF={REVENUE:hg,ANALYTICS:Q2,MESSAGING:er,CALENDAR:zt,NOTIFICATIONS:hh,DOCUMENTS:xt,COURSES:gt,USERS:vt,REPORTS:xt,INTEGRATIONS:zs,SECURITY:pi,BACKUP:fg,API:sK,ENTERPRISE:$0,EDUCATION:_d,AI_QUIZ:dr,GAMIFICATION:di,EDUGAME:cK,DEFAULT:mg},Cit=t=>mF[t]||mF.DEFAULT,LJ=({asTab:t=!1})=>{var Se;const e=Et(),{themeId:r,themes:n}=LI(),{modules:s,refreshModules:i}=oa(),{currentUser:o}=At(),{hasAccess:l}=io(),[c,d]=N.useState(!1),[u,h]=N.useState(null),[f,g]=N.useState(()=>localStorage.getItem("system_settings_tab")||"theme"),[x,m]=N.useState(!1),[p,b]=N.useState(null),[v,y]=N.useState(!0),[w,k]=N.useState([]),[j,_]=N.useState(null),[S,A]=N.useState(!0),[T,E]=N.useState(!1),[C,z]=N.useState([]),[M,F]=N.useState(!0),[D,L]=N.useState(!1),[K,$]=N.useState(null),[R,Y]=N.useState(null),[ee,B]=N.useState(!0),[U,V]=N.useState(""),[se,Ne]=N.useState(!1),[ie,q]=N.useState(!1),H=n.find(me=>me.id===r)||n[0],Z=((Se=o==null?void 0:o.role)==null?void 0:Se.name)==="ADMIN"||(o==null?void 0:o.role)==="ADMIN";N.useEffect(()=>{O.system.checkLicense().then(me=>{b(me),y(!1)}).catch(()=>y(!1))},[]),N.useEffect(()=>{f==="server"&&Z&&(Ce(),Le())},[f,Z]),N.useEffect(()=>{f==="ai"&&te()},[f]);const te=async()=>{B(!0);try{const me=await O.get("/ai/quiz/status");Y(me)}catch(me){console.error("Failed to fetch AI status:",me),Y({available:!1,moduleEnabled:!1,apiConfigured:!1,message:"Kunde inte hmta AI-status"})}finally{B(!1)}},ge=async()=>{if(!U.trim()){alert("Ange en API-nyckel");return}Ne(!0);try{const me=await O.post("/ai/quiz/config/api-key",{apiKey:U});me.success?(V(""),q(!1),await te(),alert("API-nyckel sparad!")):alert(me.message||"Kunde inte spara API-nyckel")}catch(me){console.error("Failed to save API key:",me),alert("Kunde inte spara API-nyckel: "+(me.message||"Oknt fel"))}finally{Ne(!1)}},Ce=async()=>{A(!0);try{const[me,$e]=await Promise.all([O.admin.listBackups(),O.admin.getBackupStatus()]);k(me||[]),_($e)}catch(me){console.error("Failed to fetch backup data:",me)}finally{A(!1)}},Le=async()=>{F(!0);try{const me=await O.admin.getDatabaseConnections();z((me==null?void 0:me.connections)||[])}catch(me){console.error("Failed to fetch database connections:",me)}finally{F(!1)}},He=async()=>{E(!0);try{await O.admin.createBackup(),await Ce(),alert("Backup skapad!")}catch(me){alert("Kunde inte skapa backup: "+me.message)}finally{E(!1)}},le=async me=>{if(window.confirm("r du sker p att du vill ta bort denna backup?"))try{await O.admin.deleteBackup(me),await Ce()}catch($e){alert("Kunde inte ta bort backup: "+$e.message)}},Re=me=>{const $e=O.admin.downloadBackup(me),Ge=localStorage.getItem("token");window.open(`${$e}?token=${Ge}`,"_blank")},Ze=async me=>{const $e=window.prompt("Ange ditt admin-lsenord fr att bekrfta:");if($e){$(me);try{await O.admin.switchDatabase(me,$e),alert("Databas bytt! Systemet kan behva startas om."),await Le()}catch(Ge){alert("Kunde inte byta databas: "+Ge.message)}finally{$(null)}}},lt=me=>{if(!me)return"0 B";const $e=1024,Ge=["B","KB","MB","GB"],Qe=Math.floor(Math.log(me)/Math.log($e));return parseFloat((me/Math.pow($e,Qe)).toFixed(2))+" "+Ge[Qe]},rt=me=>me?new Date(me).toLocaleString("sv-SE"):"Oknt",ne=me=>{g(me),localStorage.setItem("system_settings_tab",me)},pe=async(me,$e)=>{h(me);try{await O.modules.toggle(me,!$e),await i()}catch(Ge){alert("Kunde inte ndra modulstatus: "+Ge.message)}finally{h(null)}},Ue=[{category:"Konfiguration",items:[...Z?[{id:"tenants",label:"Tenants",icon:Uf},{id:"skolverket",label:"Skolverket",icon:Gi},{id:"integrations",label:"Integrationer",icon:zs}]:[]]},{category:"Utseende",items:[{id:"theme",label:"Tema & Utseende",icon:qu},...Z?[{id:"pdf-templates",label:"PDF-mallar",icon:xt},{id:"whitelabel",label:"Enterprise Whitelabel",icon:dr}]:[]]},{category:"Licens & Status",items:[{id:"license",label:"Licensstatus",icon:md},...Z?[{id:"server",label:"Serverinstllningar",icon:Uf}]:[]]},{category:"AI & Automation",items:[{id:"ai",label:"AI-instllningar",icon:dr}]},{category:"Moduler",items:[{id:"modules",label:"Systemmoduler",icon:Gi}]}],kt=()=>{switch(f){case"tenants":return a.jsx(xit,{});case"skolverket":return a.jsx(kit,{});case"integrations":return a.jsx(jit,{});case"theme":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Tema & Utseende"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Anpassa systemets frger och knsla."})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl flex items-center justify-center text-indigo-600",children:a.jsx(qu,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Aktivt Tema"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nuvarande utseende fr systemet"})]})]}),a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl shadow-sm",style:{backgroundColor:H.colors[600]}}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:H.name}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Primrfrg: ",H.colors[600]]})]})]}),a.jsxs("button",{onClick:()=>d(!0),className:"w-full py-3 bg-gray-900 dark:bg-white text-white dark:text-black rounded-xl font-bold shadow-lg hover:transform hover:scale-[1.02] transition-all flex items-center justify-center gap-2",children:[a.jsx(va,{size:18})," ppna Temahanterare"]})]})]});case"pdf-templates":return a.jsx(Eit,{});case"whitelabel":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Enterprise Whitelabel"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Fullt anpassningsbar branding fr din organisation."})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-50 dark:bg-purple-900/20 rounded-xl flex items-center justify-center text-purple-600",children:a.jsx(dr,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Whitelabel-status"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Anpassa logotyp, frger och mer"})]})]}),a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl mb-6",children:l?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold text-green-600 dark:text-green-400",children:"ENTERPRISE-licens aktiv"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Full tillgng till whitelabel-funktioner"})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center",children:a.jsx(Mn,{size:20,className:"text-amber-600 dark:text-amber-400"})}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"Krver ENTERPRISE-licens"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Uppgradera fr att lsa upp"})]})]})}),a.jsxs("button",{onClick:()=>e("/enterprise/whitelabel"),className:`w-full py-3 rounded-xl font-bold shadow-lg hover:transform hover:scale-[1.02] transition-all flex items-center justify-center gap-2 ${l?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,disabled:!l,children:[a.jsx(dr,{size:18})," ",l?"ppna Whitelabel":"Uppgradera fr access"]})]})]});case"license":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Licensstatus"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Information om din nuvarande plan och licensstatus."})]}),v?a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded-xl w-1/3"}),a.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded-xl"}),a.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded-xl"})]})}):a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-green-50 dark:bg-green-900/20 rounded-xl flex items-center justify-center text-green-600",children:a.jsx(md,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Aktiv Licens"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Din licens r giltig och aktiv"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(vt,{size:20,className:"text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Licensgare"})]}),a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:(p==null?void 0:p.customer)||"Oknd"})]}),a.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(mg,{size:20,className:"text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Plan"})]}),a.jsx("span",{className:`px-3 py-1.5 text-sm font-black uppercase rounded-lg ${(p==null?void 0:p.tier)==="ENTERPRISE"?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`,children:(p==null?void 0:p.tier)||"PRO"})]}),a.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(B4,{size:20,className:"text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Status"})]}),a.jsx("span",{className:`flex items-center gap-2 text-sm font-bold ${(p==null?void 0:p.status)==="valid"?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:(p==null?void 0:p.status)==="valid"?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Aktiv"]}):a.jsxs(a.Fragment,{children:[a.jsx(Mn,{size:16}),(p==null?void 0:p.status)||"Oknd"]})})]}),a.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(zt,{size:20,className:"text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Giltig till"})]}),a.jsxs("span",{className:`text-sm font-medium ${p!=null&&p.isExpiringSoon?"text-amber-600 dark:text-amber-400":"text-gray-900 dark:text-white"}`,children:[(p==null?void 0:p.expiry)||"Obegrnsad",(p==null?void 0:p.isExpiringSoon)&&(p==null?void 0:p.daysRemaining)&&a.jsxs("span",{className:"ml-2 text-xs text-amber-600 dark:text-amber-400",children:["(",p.daysRemaining," dagar kvar)"]})]})]})]})]})]});case"server":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Serverinstllningar"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Hantera databas, backups och serverinstllningar."})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 rounded-xl flex items-center justify-center text-blue-600",children:a.jsx(fg,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Databasbackup"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Hantera skerhetskopior av databasen"})]})]}),a.jsxs("button",{onClick:He,disabled:T,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50",children:[T?a.jsx(sn,{size:18,className:"animate-spin"}):a.jsx(jt,{size:18}),T?"Skapar...":"Skapa backup"]})]}),j&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Tt,{size:18,className:"text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Senaste backup"})]}),a.jsx("span",{className:`text-lg font-bold ${j.lastBackup?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:j.lastBackup?rt(j.lastBackup):"Ingen backup gjord"})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(zt,{size:18,className:"text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Nsta schemalagda"})]}),a.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:j.nextScheduledBackup?rt(j.nextScheduledBackup):"Kl 02:00 varje dag"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Tillgngliga backups"}),S?a.jsx("div",{className:"space-y-3",children:[1,2,3].map(me=>a.jsx("div",{className:"h-16 bg-gray-100 dark:bg-gray-800 rounded-xl animate-pulse"},me))}):w.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(fg,{size:48,className:"mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Inga backups hittades"}),a.jsx("p",{className:"text-sm",children:"Skapa din frsta backup ovan"})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:w.map(me=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl hover:bg-gray-100 dark:hover:bg-[#333] transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:a.jsx(ci,{size:20,className:"text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:me.name}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[rt(me.createdAt),"  ",lt(me.size)]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>Re(me.id),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Ladda ner",children:a.jsx(Rn,{size:18})}),a.jsx("button",{onClick:()=>le(me.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Ta bort",children:a.jsx(qt,{size:18})})]})]},me.id))})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-50 dark:bg-purple-900/20 rounded-xl flex items-center justify-center text-purple-600",children:a.jsx(Gi,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Databasanslutningar"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Hantera primr- och backup-databaser"})]})]}),a.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium transition-colors",children:[a.jsx(jt,{size:18}),"Lgg till"]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl mb-6",children:[a.jsx(Dr,{size:20,className:"text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:"Viktigt vid databasbyte"}),a.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400",children:"Att byta databas krver att systemet startas om. Se till att alla anvndare r utloggade innan du byter."})]})]}),M?a.jsx("div",{className:"space-y-3",children:[1,2].map(me=>a.jsx("div",{className:"h-24 bg-gray-100 dark:bg-gray-800 rounded-xl animate-pulse"},me))}):C.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(Gi,{size:48,className:"mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Inga databasanslutningar konfigurerade"})]}):a.jsx("div",{className:"space-y-4",children:C.map(me=>a.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${me.active?"bg-green-50 dark:bg-green-900/10 border-green-500":"bg-gray-50 dark:bg-[#282a2c] border-gray-200 dark:border-[#3c4043]"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${me.active?"bg-green-100 dark:bg-green-900/30 text-green-600":"bg-gray-200 dark:bg-gray-700 text-gray-500"}`,children:a.jsx(Uf,{size:20})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:me.name}),me.active&&a.jsx("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-bold rounded",children:"AKTIV"})]}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[me.host,":",me.port," / ",me.database]})]})]}),!me.active&&a.jsxs("button",{onClick:()=>Ze(me.id),disabled:K===me.id,className:"flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-white text-white dark:text-black rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50",children:[K===me.id?a.jsx(sn,{size:16,className:"animate-spin"}):a.jsx(sn,{size:16}),"Byt till denna"]})]})},me.id))})]})]});case"ai":{const me=s.find($e=>$e.moduleKey==="AI_QUIZ");return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"AI-instllningar"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generera quiz-frgor automatiskt frn dokument med Google Gemini AI."})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${R!=null&&R.available?"bg-green-50 dark:bg-green-900/20 text-green-600":"bg-amber-50 dark:bg-amber-900/20 text-amber-600"}`,children:a.jsx(dr,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"AI-status"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ee?"Kontrollerar...":R==null?void 0:R.message})]})]}),ee?a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded-xl"}),a.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded-xl"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(mg,{size:20,className:"text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Modul"})]}),a.jsx("div",{className:"flex items-center gap-2",children:R!=null&&R.moduleEnabled?a.jsxs("span",{className:"flex items-center gap-2 text-sm font-bold text-green-600 dark:text-green-400",children:[a.jsx(ci,{size:16}),"Aktiverad"]}):a.jsxs("span",{className:"flex items-center gap-2 text-sm font-bold text-amber-600 dark:text-amber-400",children:[a.jsx(Dr,{size:16}),"Inaktiverad"]})})]}),a.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(sK,{size:20,className:"text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Gemini API"})]}),a.jsx("div",{className:"flex items-center gap-2",children:R!=null&&R.apiConfigured?a.jsxs("span",{className:"flex items-center gap-2 text-sm font-bold text-green-600 dark:text-green-400",children:[a.jsx(ci,{size:16}),"Konfigurerad"]}):a.jsxs("span",{className:"flex items-center gap-2 text-sm font-bold text-red-600 dark:text-red-400",children:[a.jsx(Dr,{size:16}),"Ej konfigurerad"]})})]}),a.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(md,{size:20,className:"text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Licenskrav"})]}),a.jsx("span",{className:"px-3 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-xs font-bold rounded-lg",children:"PRO / ENTERPRISE"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-50 dark:bg-purple-900/20 rounded-xl flex items-center justify-center text-purple-600",children:a.jsx(nw,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"API-konfiguration"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Konfigurera Google Gemini API-nyckel"})]})]}),(R==null?void 0:R.maskedApiKey)&&a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ci,{size:20,className:"text-green-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nuvarande nyckel: "}),a.jsx("code",{className:"text-sm font-mono bg-gray-200 dark:bg-gray-700 px-2 py-0.5 rounded",children:R.maskedApiKey})]})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-lg font-medium ${R.keySource==="database"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:R.keySource==="database"?"Databas":"Miljvariabel"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:R!=null&&R.apiConfigured?"Uppdatera API-nyckel":"Ange Gemini API-nyckel"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:ie?"text":"password",value:U,onChange:$e=>V($e.target.value),placeholder:"AIzaSy...",className:"w-full px-4 py-3 pr-24 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-[#282a2c] text-gray-900 dark:text-white font-mono text-sm"}),a.jsx("button",{type:"button",onClick:()=>q(!ie),className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:ie?a.jsx(ew,{size:18}):a.jsx(Xo,{size:18})})]}),a.jsxs("button",{onClick:ge,disabled:se||!U.trim(),className:"w-full flex items-center justify-center gap-2 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white disabled:text-gray-500 rounded-xl font-medium transition-colors",children:[se?a.jsx(sn,{size:18,className:"animate-spin"}):a.jsx(sa,{size:18}),se?"Sparar...":"Spara API-nyckel"]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Skapa en API-nyckel p ",a.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Google AI Studio"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"tgrder"}),a.jsxs("div",{className:"space-y-3",children:[me&&a.jsxs("button",{onClick:()=>pe("AI_QUIZ",me.active),disabled:u==="AI_QUIZ",className:`w-full flex items-center justify-between p-4 rounded-xl border transition-colors ${me.active?"bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/20":"bg-green-50 dark:bg-green-900/10 border-green-200 dark:border-green-800 hover:bg-green-100 dark:hover:bg-green-900/20"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(B4,{size:20,className:me.active?"text-red-600":"text-green-600"}),a.jsx("span",{className:`font-medium ${me.active?"text-red-700 dark:text-red-400":"text-green-700 dark:text-green-400"}`,children:me.active?"Inaktivera AI Quiz-modul":"Aktivera AI Quiz-modul"})]}),u==="AI_QUIZ"&&a.jsx(sn,{size:18,className:"animate-spin text-gray-400"})]}),a.jsxs("button",{onClick:()=>e("/ai-quiz"),disabled:!(R!=null&&R.available),className:`w-full flex items-center justify-center gap-3 py-4 rounded-xl font-bold transition-all ${R!=null&&R.available?"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white shadow-lg hover:shadow-xl hover:scale-[1.02]":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:[a.jsx("span",{style:{display:"none"},children:e.toString()}),a.jsx(dr,{size:20}),"ppna AI Quiz-generatorn"]})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-6 border border-blue-200 dark:border-blue-800",children:[a.jsxs("h3",{className:"font-bold text-blue-800 dark:text-blue-300 mb-3 flex items-center gap-2",children:[a.jsx(xt,{size:18}),"S fungerar AI Quiz"]}),a.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-bold",children:"1."}),a.jsx("span",{children:"Ladda upp ett dokument (PDF, DOCX, TXT) eller klistra in text"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-bold",children:"2."}),a.jsx("span",{children:"Vlj antal frgor (3-15) och svrighetsgrad"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-bold",children:"3."}),a.jsx("span",{children:"AI:n genererar relevanta flervalsfrgor baserat p innehllet"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-bold",children:"4."}),a.jsx("span",{children:"Redigera, justera och spara som ett quiz i din kurs"})]})]})]})]})}case"modules":{const me={Utbildning:["QUIZ_BASIC","QUIZ_PRO","AI_QUIZ","SUBMISSIONS","SCORM"],Kommunikation:["CHAT","FORUM"],Gamification:["GAMIFICATION","EDUGAME"],"Analys & Rapporter":["ANALYTICS"],Utseende:["DARK_MODE","ENTERPRISE_WHITELABEL"],vrigt:["REVENUE"]},$e={},Ge=new Set;Object.entries(me).forEach(([wt,Nt])=>{const he=Nt.map(Xe=>s.find(W=>W.moduleKey===Xe)).filter(Boolean);he.length>0&&($e[wt]=he,he.forEach(Xe=>Ge.add(Xe.moduleKey)))});const Qe=s.filter(wt=>!Ge.has(wt.moduleKey));Qe.length>0&&($e.vrigt=[...$e.vrigt||[],...Qe]);const Lt=async()=>{try{h("__sync__");const wt=await O.modules.init();wt.success&&(await i(),alert(`Moduler synkroniserade! ${wt.moduleCount} moduler totalt.`))}catch(wt){alert("Kunde inte synkronisera moduler: "+wt.message)}finally{h(null)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Systemmoduler"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aktivera eller inaktivera funktioner globalt. Vissa moduler krver PRO/ENTERPRISE-licens."})]}),a.jsxs("button",{onClick:Lt,disabled:u==="__sync__",className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50",children:[a.jsx(sn,{size:16,className:u==="__sync__"?"animate-spin":""}),u==="__sync__"?"Synkar...":"Synka moduler"]})]}),Object.entries($e).map(([wt,Nt])=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsx("div",{className:"px-5 py-3 bg-gray-50 dark:bg-[#282a2c] border-b border-gray-200 dark:border-[#3c4043]",children:a.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:wt})}),a.jsx("div",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:Nt.map(he=>{const Xe=Cit(he.moduleKey);let W=!0,we="";if(he.moduleKey==="EDUGAME"){const ve=s.find(Te=>Te.moduleKey==="GAMIFICATION");(!ve||!ve.active)&&(W=!1,we="Krver Gamification Engine")}return a.jsxs("div",{className:`flex items-center gap-4 px-5 py-4 transition-colors ${W?"hover:bg-gray-50 dark:hover:bg-[#282a2c]/50":"bg-gray-50/50 dark:bg-gray-900/10 opacity-60"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${he.active?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400":"bg-gray-100 dark:bg-[#333] text-gray-400"}`,children:a.jsx(Xe,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:he.name}),he.requiresLicense&&a.jsx("span",{className:"text-[9px] bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 px-1.5 py-0.5 rounded font-bold",children:"PRO"}),a.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:["v",he.version]})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-1",children:he.description}),!W&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-500 mt-1 font-medium",children:[a.jsx(Dr,{size:12})," ",we]})]}),a.jsx("div",{className:"flex-shrink-0 hidden sm:block",children:a.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full ${he.active?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-500"}`,children:he.active?"AKTIV":"INAKTIV"})}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("button",{onClick:()=>pe(he.moduleKey,he.active),disabled:u===he.moduleKey||!W,className:`relative w-11 h-6 rounded-full transition-colors duration-200 ${he.active?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"} ${u===he.moduleKey||!W?"opacity-50 cursor-not-allowed":""}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform duration-200 ${he.active?"translate-x-5":"translate-x-0"}`,children:u===he.moduleKey&&a.jsx(sn,{size:12,className:"absolute inset-0 m-auto animate-spin text-gray-400"})})})})]},he.moduleKey)})})]},wt)),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400 pt-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),a.jsx("span",{children:"Aktiv modul"})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"px-1.5 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded text-[9px] font-bold",children:"PRO"}),a.jsx("span",{children:"Krver PRO/ENTERPRISE-licens"})]})]})]})}default:return a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Vlj en kategori i menyn"})}};return a.jsxs("div",{className:t?"animate-in fade-in":"p-8 max-w-7xl mx-auto animate-in fade-in pb-20",children:[!t&&a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:"text-3xl font-black text-gray-900 dark:text-white mb-2",children:"Systeminstllningar"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8",children:"Hantera globala instllningar, utseende och licenser fr EduFlex."})]}),a.jsxs("div",{className:"flex bg-gray-50 dark:bg-[#151718] min-h-[600px] rounded-lg border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("aside",{className:`bg-white dark:bg-[#1e2022] w-64 border-r border-gray-200 dark:border-[#3c4043] flex-shrink-0 flex flex-col ${x?"block absolute z-50 h-full":"hidden md:flex"}`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-[#3c4043] flex items-center justify-between",children:[a.jsx("h2",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:"Instllningar"}),a.jsx("button",{className:"md:hidden",onClick:()=>m(!1),children:""})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:Ue.map((me,$e)=>a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 px-2",children:me.category}),a.jsx("div",{className:"space-y-1",children:me.items.map(Ge=>a.jsxs("button",{onClick:()=>{Ge.disabled||(ne(Ge.id),m(!1))},disabled:Ge.disabled,className:`w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${Ge.disabled?"text-gray-400 dark:text-gray-600 cursor-not-allowed":f===Ge.id?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#282a2c]"}`,children:[a.jsx(Ge.icon,{size:18}),Ge.label,Ge.disabled&&a.jsx(Mn,{size:14,className:"ml-auto"})]},Ge.id))})]},$e))})]}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0",children:[a.jsxs("div",{className:"md:hidden p-4 bg-white dark:bg-[#1e2022] border-b border-gray-200 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("span",{className:"font-bold",children:"Meny"}),a.jsx("button",{onClick:()=>m(!0),className:"p-2 bg-gray-100 dark:bg-[#282a2c] rounded",children:a.jsx(yn,{size:20})})]}),a.jsx("div",{className:"p-6 overflow-x-auto",children:kt()})]})]}),a.jsx(pit,{isOpen:c,onClose:()=>d(!1)})]})},Tit=()=>{const{achievementNotification:t,dismissNotification:e}=Y2();return N.useEffect(()=>{if(t){const r=setTimeout(()=>{e()},5e3);return()=>clearTimeout(r)}},[t,e]),t?a.jsx("div",{className:"fixed bottom-8 right-8 z-50 animate-in slide-in-from-bottom-5 fade-in duration-300",children:a.jsxs("div",{className:"bg-gray-900 border-2 border-yellow-500 text-white p-4 rounded-xl shadow-2xl flex items-center gap-4 min-w-[300px] relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent skew-x-12 translate-x-[-200%] animate-shine pointer-events-none"}),a.jsx("div",{className:"p-3 bg-yellow-500/20 rounded-full text-yellow-500 border border-yellow-500/50",children:a.jsx(Mr,{size:32})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-yellow-500 uppercase tracking-wider mb-0.5",children:"Achievement Unlocked"}),a.jsx("h4",{className:"font-bold text-lg leading-tight",children:t.name}),a.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["+",t.xpReward," XP"]})]}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:a.jsx(Je,{size:16})})]})}):null},Oit=()=>{var A,T;const{activeAudiobook:t,setActiveAudiobook:e,isAudioPlayerMinimized:r,setIsAudioPlayerMinimized:n}=At(),[s,i]=N.useState(!1),[o,l]=N.useState(0),[c,d]=N.useState(0),[u,h]=N.useState(1),[f,g]=N.useState(1),[x,m]=N.useState(null),p=N.useRef(null);if(N.useEffect(()=>{if(t&&p.current&&(m(null),t.fileUrl)){p.current.src=t.fileUrl,p.current.load();const E=p.current.play();E!==void 0&&E.catch(C=>{C.name!=="AbortError"&&console.warn("Playback prevented:",C)}),i(!0)}},[t==null?void 0:t.id]),N.useEffect(()=>{p.current&&(p.current.playbackRate=f)},[f]),!t)return null;const b=E=>{if(E&&E.stopPropagation(),s)p.current.pause(),i(!1);else{const C=p.current.play();C!==void 0&&C.then(()=>i(!0)).catch(z=>{z.name!=="AbortError"&&console.warn("Playback failed:",z)})}},v=()=>{const E=p.current.currentTime,C=p.current.duration;C&&l(E/C*100)},y=()=>{d(p.current.duration)},w=E=>{const C=E.target.value/100*c;p.current.currentTime=C,l(E.target.value)},k=E=>{if(isNaN(E))return"0:00";const C=Math.floor(E/60),z=Math.floor(E%60);return`${C}:${z<10?"0":""}${z}`},j=E=>{p.current.currentTime+=E},_=E=>{console.error("Audio playback error:",E),p.current&&p.current.error&&p.current.error.code===4?m("Filen saknas p servern (404)."):m("Kunde inte ladda ljudfilen."),i(!1)},S=E=>{E&&E.stopPropagation(),p.current&&p.current.pause(),e(null)};return a.jsxs(a.Fragment,{children:[a.jsx("audio",{ref:p,onTimeUpdate:v,onLoadedMetadata:y,onEnded:()=>i(!1),onError:_}),r?a.jsx("div",{className:"fixed bottom-6 right-6 z-[200] animate-in slide-in-from-bottom-10 duration-500",children:a.jsxs("div",{className:`shadow-2xl rounded-2xl border flex items-center p-2 gap-4 w-72 backdrop-blur-md bg-opacity-95 dark:bg-opacity-95 ${x?"bg-red-50 dark:bg-red-900/40 border-red-500/20":"bg-white dark:bg-[#1E1F20] border-indigo-500/20"}`,children:[a.jsxs("div",{className:"w-12 h-12 rounded-xl overflow-hidden flex-shrink-0 bg-indigo-600 relative group cursor-pointer",onClick:()=>n(!1),children:[a.jsx("img",{src:`/api/ebooks/${t.id}/cover`,alt:t.title,className:"w-full h-full object-cover",onError:E=>{E.target.onerror=null,E.target.style.display="none",E.target.nextSibling.style.display="flex"}}),a.jsx("div",{style:{display:"none"},className:"absolute inset-0 items-center justify-center",children:a.jsx(U0,{size:20,className:"text-white/40"})}),a.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(J2,{className:"text-white",size:20})})]}),a.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>n(!1),children:[a.jsx("h4",{className:`text-sm font-bold truncate ${x?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:x?"Fel vid laddning":t.title}),a.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:x||`${k(((A=p.current)==null?void 0:A.currentTime)||0)} / ${k(c)}`})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[!x&&a.jsx("button",{onClick:b,className:"p-2 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:s?a.jsx(R1,{size:18,fill:"currentColor"}):a.jsx(Yo,{size:18,fill:"currentColor"})}),a.jsx("button",{onClick:S,className:"p-2 text-gray-400 hover:text-red-500 rounded-lg transition-colors",children:a.jsx(Je,{size:18})})]}),!x&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300",style:{width:`${o}%`}})})]})}):a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-[40px] shadow-2xl overflow-hidden border border-white/10 relative",children:[a.jsxs("div",{className:"absolute top-6 left-6 right-6 flex justify-between items-center z-10",children:[a.jsx("button",{onClick:()=>n(!0),className:"p-2 rounded-full bg-gray-100 dark:bg-white/5 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10 transition-colors",title:"Minimize",children:a.jsx(iw,{size:20})}),a.jsx("button",{onClick:S,className:"p-2 rounded-full bg-gray-100 dark:bg-white/5 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10 transition-colors",title:"Close",children:a.jsx(Je,{size:20})})]}),a.jsxs("div",{className:"p-8 pb-12 flex flex-col items-center",children:[a.jsxs("div",{className:"w-56 h-56 rounded-[30px] shadow-2xl mb-8 overflow-hidden bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center group relative",children:[a.jsx("img",{src:`/api/ebooks/${t.id}/cover`,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",onError:E=>{E.target.onerror=null,E.target.style.display="none",E.target.nextSibling.style.display="flex"}}),a.jsx("div",{style:{display:"none"},className:"absolute inset-0 items-center justify-center",children:a.jsx(U0,{size:64,className:"text-white/40"})}),x&&a.jsx("div",{className:"absolute inset-0 bg-red-600/80 backdrop-blur-sm flex items-center justify-center p-6 text-center",children:a.jsx("p",{className:"text-white text-sm font-bold leading-tight",children:x})}),a.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity"})]}),a.jsxs("div",{className:"text-center mb-8 w-full px-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1 line-clamp-1",children:t.title}),a.jsx("p",{className:"text-indigo-500 font-medium",children:t.author})]}),x?a.jsxs("div",{className:"w-full text-center",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-6 px-8",children:'Testa att ladda om biblioteket och terskapa ljudfilen med "terskapa"-knappen om felet kvarstr.'}),a.jsx("button",{onClick:S,className:"w-full py-4 rounded-2xl bg-gray-100 dark:bg-white/5 text-gray-900 dark:text-white font-bold hover:bg-gray-200 dark:hover:bg-white/10 transition-colors",children:"Stng spelaren"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"w-full mb-8",children:[a.jsx("input",{type:"range",min:"0",max:"100",value:o,onChange:w,className:"w-full h-1.5 bg-gray-200 dark:bg-white/10 rounded-lg appearance-none cursor-pointer accent-indigo-500 mb-2"}),a.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:[a.jsx("span",{children:k(((T=p.current)==null?void 0:T.currentTime)||0)}),a.jsx("span",{children:k(c)})]})]}),a.jsxs("div",{className:"flex items-center justify-between w-full px-4 mb-8",children:[a.jsx("button",{onClick:()=>j(-15),className:"p-3 text-gray-400 hover:text-indigo-500 transition-colors",title:"Back 15s",children:a.jsx(Ige,{size:24})}),a.jsx("button",{onClick:b,className:"w-20 h-20 rounded-full bg-indigo-600 text-white flex items-center justify-center hover:bg-indigo-700 hover:scale-105 transition-all shadow-xl shadow-indigo-500/25 active:scale-95",children:s?a.jsx(R1,{size:32,fill:"currentColor"}):a.jsx(Yo,{size:32,fill:"currentColor",className:"ml-1"})}),a.jsx("button",{onClick:()=>j(15),className:"p-3 text-gray-400 hover:text-indigo-500 transition-colors",title:"Forward 15s",children:a.jsx(dge,{size:24})})]}),a.jsxs("div",{className:"flex items-center justify-between w-full bg-gray-50 dark:bg-white/5 rounded-3xl p-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(g5,{size:18,className:"text-gray-400"}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:u,onChange:E=>{h(parseFloat(E.target.value)),p.current&&(p.current.volume=parseFloat(E.target.value))},className:"w-20 h-1 bg-gray-200 dark:bg-white/10 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),a.jsxs("button",{onClick:()=>{const E=[1,1.25,1.5,2,.75],C=(E.indexOf(f)+1)%E.length;g(E[C])},className:"px-3 py-1.5 rounded-xl bg-white dark:bg-white/5 text-xs font-bold text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/10 transition-colors border border-gray-100 dark:border-white/5",children:[f,"x"]})]})]})]})]})})]})},Iit=({userId:t})=>{var L,K;const[e,r]=N.useState(null),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[d,u]=N.useState(!0),[h,f]=N.useState(!1),[g,x]=N.useState(null),[m,p]=N.useState(""),[b,v]=N.useState(!1),[y,w]=N.useState(null),[k,j]=N.useState(""),[_,S]=N.useState(!1),[A,T]=N.useState(!1);N.useEffect(()=>{E()},[t]);const E=async()=>{try{const[$,R,Y]=await Promise.all([O.get("/subscription-plans/active"),O.get(`/payments/user/${t}`),O.get(`/invoices/user/${t}`)]);c($),s(R),o(Y),r({plan:$[0]||null,status:"active",nextBillingDate:new Date(Date.now()+30*24*60*60*1e3)})}catch($){console.error("Failed to load billing data:",$)}finally{u(!1)}},C=$=>{const R={COMPLETED:"bg-green-100 text-green-700",PENDING:"bg-yellow-100 text-yellow-700",FAILED:"bg-red-100 text-red-700",PAID:"bg-green-100 text-green-700",OVERDUE:"bg-red-100 text-red-700"};return a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${R[$]||"bg-gray-100 text-gray-700"}`,children:$})},z=$=>{x($),p(""),v(!1),w(null),j(""),f(!0)},M=()=>{f(!1),x(null)},F=async()=>{if(m){S(!0),j("");try{const $=await O.post("/promocodes/validate",{code:m,originalPrice:g.price});$.valid?(v(!0),w($)):(j($.message||"Invalid code"),v(!1))}catch{j("Kunde inte validera koden")}finally{S(!1)}}},D=async()=>{T(!0);try{await O.post("/invoices/subscription",{planId:g.id,promoCode:b?m:null}),await E(),M(),alert("Prenumeration uppdaterad! Faktura skapad.")}catch($){console.error("Subscription failed:",$),alert("Det gick inte att uppdatera prenumerationen.")}finally{T(!1)}};return d?a.jsx("div",{className:"p-8 text-center",children:"Loading billing information..."}):a.jsxs("div",{className:"w-full space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600",children:a.jsx(hg,{size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nuvarande Prenumeration"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Hantera din plan och betalningar"})]})]}),(e==null?void 0:e.status)==="active"&&a.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-bold flex items-center gap-1",children:[a.jsx(nr,{size:14}),"Aktiv"]})]}),e!=null&&e.plan?a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[a.jsx("h3",{className:"text-3xl font-black text-gray-900 dark:text-white",children:e.plan.displayName}),a.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[e.plan.price," ",e.plan.currency]}),a.jsxs("span",{className:"text-gray-500",children:["/",e.plan.billingInterval.toLowerCase()]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:e.plan.description}),e.plan.features&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-bold text-gray-500 uppercase",children:"Funktioner:"}),a.jsx("ul",{className:"space-y-1",children:e.plan.features.map(($,R)=>a.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(nr,{size:14,className:"text-green-600"}),$]},R))})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Nsta Betalning"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{size:16,className:"text-gray-400"}),a.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:e.nextBillingDate.toLocaleDateString("sv-SE")})]})]}),a.jsx("button",{className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-bold",children:"Uppgradera Plan"}),a.jsx("button",{className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors font-bold",children:"Hantera Betalning"})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-500 mb-4",children:"Du har ingen aktiv prenumeration"}),a.jsx("button",{className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-bold",children:"Vlj en Plan"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl text-green-600",children:a.jsx(Sr,{size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Betalningshistorik"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Tidigare transaktioner"})]})]}),n.length>0?a.jsx("div",{className:"space-y-3",children:n.slice(0,5).map($=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-2 bg-white dark:bg-[#1E1F20] rounded-lg",children:a.jsx(hg,{size:20,className:"text-gray-600"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[$.amount," ",$.currency]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[new Date($.createdAt).toLocaleDateString("sv-SE"),"  ",$.paymentMethod]})]})]}),C($.status)]},$.id))}):a.jsx("p",{className:"text-center text-gray-500 py-8",children:"Inga betalningar nnu"})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl text-blue-600",children:a.jsx(xt,{size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Fakturor"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Ladda ner dina fakturor"})]})]}),i.length>0?a.jsx("div",{className:"space-y-3",children:i.slice(0,5).map($=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-[#282a2c] rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-2 bg-white dark:bg-[#1E1F20] rounded-lg",children:a.jsx(xt,{size:20,className:"text-gray-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-900 dark:text-white font-mono text-sm",children:$.invoiceNumber}),a.jsxs("p",{className:"text-xs text-gray-500",children:[new Date($.issueDate).toLocaleDateString("sv-SE"),"  ",$.amount," ",$.currency]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[C($.status),$.pdfUrl&&a.jsx("button",{onClick:()=>window.open($.pdfUrl,"_blank"),className:"p-2 text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",children:a.jsx(Rn,{size:16})})]})]},$.id))}):a.jsx("p",{className:"text-center text-gray-500 py-8",children:"Inga fakturor nnu"})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Tillgngliga Planer"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:l.map($=>{var R,Y;return a.jsxs("div",{className:`p-6 rounded-xl border-2 ${((R=e==null?void 0:e.plan)==null?void 0:R.id)===$.id?"border-indigo-600 bg-indigo-50/50 dark:bg-indigo-900/10":"border-gray-200 dark:border-[#3c4043]"}`,children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:$.displayName}),a.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[a.jsx("span",{className:"text-3xl font-black text-indigo-600",children:$.price}),a.jsxs("span",{className:"text-gray-500 text-sm",children:[$.currency,"/",$.billingInterval.toLowerCase()]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:$.description}),((Y=e==null?void 0:e.plan)==null?void 0:Y.id)===$.id?a.jsx("button",{disabled:!0,className:"w-full px-4 py-2 bg-gray-200 text-gray-500 rounded-lg font-bold cursor-not-allowed",children:"Nuvarande Plan"}):a.jsx("button",{onClick:()=>z($),className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-bold",children:e!=null&&e.plan?"Byt till denna":"Vlj Plan"})]},$.id)})})]}),h&&g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl max-w-md w-full p-6 shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:((L=e==null?void 0:e.plan)==null?void 0:L.id)===g.id?"Din Nuvarande Plan":"Bekrfta Prenumeration"}),a.jsx("button",{onClick:M,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:a.jsx(Je,{size:24})})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-[#282a2c] p-4 rounded-xl",children:[a.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white",children:g.displayName}),a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:g.description}),a.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-gray-200 dark:border-[#3c4043]",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pris"}),a.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[g.price," ",g.currency,"/",(K=g.billingInterval)==null?void 0:K.toLowerCase()]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Har du en rabattkod?"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"KOD",className:"flex-1 px-4 py-2 border rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white uppercase",value:m,onChange:$=>p($.target.value.toUpperCase()),disabled:b}),b?a.jsx("button",{onClick:()=>{v(!1),p(""),w(null)},className:"px-4 py-2 text-red-600 font-bold hover:bg-red-50 rounded-lg",children:"Ta bort"}):a.jsx("button",{onClick:F,disabled:!m||_,className:"px-4 py-2 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg font-bold disabled:opacity-50",children:_?"Kollar...":"Anvnd"})]}),k&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:k}),b&&a.jsxs("div",{className:"mt-2 p-3 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded-lg text-sm flex justify-between items-center",children:[a.jsx("span",{children:"Rabatt applicerad:"}),a.jsxs("span",{className:"font-bold",children:["-",y.calculatedDiscount," ",g.currency]})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-lg font-bold pt-4 border-t border-gray-200 dark:border-[#3c4043]",children:[a.jsx("span",{className:"text-gray-900 dark:text-white",children:"Att betala:"}),a.jsxs("span",{className:"text-indigo-600",children:[b?y.finalPrice:g.price," ",g.currency]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:M,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg font-bold text-gray-700 dark:text-gray-300 hover:bg-gray-50",children:"Avbryt"}),a.jsx("button",{onClick:D,disabled:A,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 disabled:opacity-70 flex justify-center items-center gap-2",children:A?a.jsxs(a.Fragment,{children:[a.jsx(Tt,{size:16,className:"animate-spin"}),"Bearbetar..."]}):"Bekrfta & Betala"})]})]})})]})};var H3=function(t,e){return H3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},H3(t,e)};function Dit(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");H3(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Jn=function(){return Jn=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Jn.apply(this,arguments)},pF=!1,pu,W3,X3,Wv,Xv,RJ,Yv,Y3,Z3,Q3,PJ,J3,eC,zJ,$J;function rs(){if(!pF){pF=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),r=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(J3=/\b(iPhone|iP[ao]d)/.exec(t),eC=/\b(iP[ao]d)/.exec(t),Q3=/Android/i.exec(t),zJ=/FBAN\/\w+;/i.exec(t),$J=/Mobile/i.exec(t),PJ=!!/Win64/.exec(t),e){pu=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,pu&&document&&document.documentMode&&(pu=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);RJ=n?parseFloat(n[1])+4:pu,W3=e[2]?parseFloat(e[2]):NaN,X3=e[3]?parseFloat(e[3]):NaN,Wv=e[4]?parseFloat(e[4]):NaN,Wv?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),Xv=e&&e[1]?parseFloat(e[1]):NaN):Xv=NaN}else pu=W3=X3=Xv=Wv=NaN;if(r){if(r[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Yv=s?parseFloat(s[1].replace("_",".")):!0}else Yv=!1;Y3=!!r[2],Z3=!!r[3]}else Yv=Y3=Z3=!1}}var tC={ie:function(){return rs()||pu},ieCompatibilityMode:function(){return rs()||RJ>pu},ie64:function(){return tC.ie()&&PJ},firefox:function(){return rs()||W3},opera:function(){return rs()||X3},webkit:function(){return rs()||Wv},safari:function(){return tC.webkit()},chrome:function(){return rs()||Xv},windows:function(){return rs()||Y3},osx:function(){return rs()||Yv},linux:function(){return rs()||Z3},iphone:function(){return rs()||J3},mobile:function(){return rs()||J3||eC||Q3||$J},nativeApp:function(){return rs()||zJ},android:function(){return rs()||Q3},ipad:function(){return rs()||eC}},Mit=tC,Lit=!!(typeof window<"u"&&window.document&&window.document.createElement),Rit={canUseDOM:Lit},Pit=Rit,FJ=Pit,BJ;FJ.canUseDOM&&(BJ=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function zit(t,e){if(!FJ.canUseDOM||e&&!("addEventListener"in document))return!1;var r="on"+t,n=r in document;if(!n){var s=document.createElement("div");s.setAttribute(r,"return;"),n=typeof s[r]=="function"}return!n&&BJ&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var $it=zit,Fit=Mit,Bit=$it,xF=10,bF=40,yF=800;function UJ(t){var e=0,r=0,n=0,s=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),n=e*xF,s=r*xF,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||s)&&t.deltaMode&&(t.deltaMode==1?(n*=bF,s*=bF):(n*=yF,s*=yF)),n&&!e&&(e=n<1?-1:1),s&&!r&&(r=s<1?-1:1),{spinX:e,spinY:r,pixelX:n,pixelY:s}}UJ.getEventType=function(){return Fit.firefox()?"DOMMouseScroll":Bit("wheel")?"wheel":"mousewheel"};var Uit=UJ,Kit=Uit;const Git=Vt(Kit);function qit(t,e,r,n,s,i){i===void 0&&(i=0);var o=Zg(t,e,i),l=o.width,c=o.height,d=Math.min(l,r),u=Math.min(c,n);return d>u*s?{width:u*s,height:u}:{width:d,height:d/s}}function Vit(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function _p(t,e,r,n,s){s===void 0&&(s=0);var i=Zg(e.width,e.height,s),o=i.width,l=i.height;return{x:vF(t.x,o,r.width,n),y:vF(t.y,l,r.height,n)}}function vF(t,e,r,n){var s=e*n/2-r/2;return Fj(t,-s,s)}function kF(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function wF(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function Hit(t,e,r,n,s,i,o){i===void 0&&(i=0),o===void 0&&(o=!0);var l=o?Wit:Xit,c=Zg(e.width,e.height,i),d=Zg(e.naturalWidth,e.naturalHeight,i),u={x:l(100,((c.width-r.width/s)/2-t.x/s)/c.width*100),y:l(100,((c.height-r.height/s)/2-t.y/s)/c.height*100),width:l(100,r.width/c.width*100/s),height:l(100,r.height/c.height*100/s)},h=Math.round(l(d.width,u.width*d.width/100)),f=Math.round(l(d.height,u.height*d.height/100)),g=d.width>=d.height*n,x=g?{width:Math.round(f*n),height:f}:{width:h,height:Math.round(h/n)},m=Jn(Jn({},x),{x:Math.round(l(d.width-x.width,u.x*d.width/100)),y:Math.round(l(d.height-x.height,u.y*d.height/100))});return{croppedAreaPercentages:u,croppedAreaPixels:m}}function Wit(t,e){return Math.min(t,Math.max(0,e))}function Xit(t,e){return e}function Yit(t,e,r,n,s,i){var o=Zg(e.width,e.height,r),l=Fj(n.width/o.width*(100/t.width),s,i),c={x:l*o.width/2-n.width/2-o.width*l*(t.x/100),y:l*o.height/2-n.height/2-o.height*l*(t.y/100)};return{crop:c,zoom:l}}function Zit(t,e,r){var n=Vit(e);return r.height>r.width?r.height/(t.height*n):r.width/(t.width*n)}function Qit(t,e,r,n,s,i){r===void 0&&(r=0);var o=Zg(e.naturalWidth,e.naturalHeight,r),l=Fj(Zit(t,e,n),s,i),c=n.height>n.width?n.height/t.height:n.width/t.width,d={x:((o.width-t.width)/2-t.x)*c,y:((o.height-t.height)/2-t.y)*c};return{crop:d,zoom:l}}function jF(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function Jit(t){return t*Math.PI/180}function Zg(t,e,r){var n=Jit(r);return{width:Math.abs(Math.cos(n)*t)+Math.abs(Math.sin(n)*e),height:Math.abs(Math.sin(n)*t)+Math.abs(Math.cos(n)*e)}}function Fj(t,e,r){return Math.min(Math.max(t,e),r)}function fv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var eot=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,tot=1,rot=3,not=1,aot=function(t){Dit(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.cropperRef=N.createRef(),r.imageRef=N.createRef(),r.videoRef=N.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.previousCropSize=null,r.isInitialized=!1,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var n=!0;r.resizeObserver=new window.ResizeObserver(function(s){if(n){n=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(n){return n.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturechange",r.onGestureChange),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var n=r.computeSizes();n&&(r.previousCropSize=n,r.emitCropData(),r.setInitialCrop(n),r.isInitialized=!0),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(n){if(r.props.initialCroppedAreaPercentages){var s=Yit(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),i=s.crop,o=s.zoom;r.props.onCropChange(i),r.props.onZoomChange&&r.props.onZoomChange(o)}else if(r.props.initialCroppedAreaPixels){var l=Qit(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),i=l.crop,o=l.zoom;r.props.onCropChange(i),r.props.onZoomChange&&r.props.onZoomChange(o)}},r.computeSizes=function(){var n,s,i,o,l,c,d=r.imageRef.current||r.videoRef.current;if(d&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var u=r.containerRect.width/r.containerRect.height,h=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((s=r.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,f=((i=r.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((o=r.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,g=d.offsetWidth<h||d.offsetHeight<f,x=h/f,m=void 0;if(g)switch(r.state.mediaObjectFit){default:case"contain":m=u>x?{width:r.containerRect.height*x,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/x};break;case"horizontal-cover":m={width:r.containerRect.width,height:r.containerRect.width/x};break;case"vertical-cover":m={width:r.containerRect.height*x,height:r.containerRect.height};break}else m={width:d.offsetWidth,height:d.offsetHeight};r.mediaSize=Jn(Jn({},m),{naturalWidth:h,naturalHeight:f}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var p=r.props.cropSize?r.props.cropSize:qit(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((l=r.state.cropSize)===null||l===void 0?void 0:l.height)!==p.height||((c=r.state.cropSize)===null||c===void 0?void 0:c.width)!==p.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(p),r.setState({cropSize:p},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(p),p}},r.saveContainerPosition=function(){if(r.containerRef){var n=r.containerRef.getBoundingClientRect();r.containerPosition={x:n.left,y:n.top}}},r.onMouseDown=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(e.getMousePoint(n)))},r.onMouseMove=function(n){return r.onDrag(e.getMousePoint(n))},r.onScroll=function(n){r.currentDoc&&(n.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(n){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(n))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),n.touches.length===2?r.onPinchStart(n):n.touches.length===1&&r.onDragStart(e.getTouchPoint(n.touches[0]))))},r.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?r.onPinchMove(n):n.touches.length===1&&r.onDrag(e.getTouchPoint(n.touches[0]))},r.onGestureStart=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureChange),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureChange=function(n){if(n.preventDefault(),!r.isTouching){var s=e.getMousePoint(n),i=r.gestureZoomStart-1+n.scale;if(r.setNewZoom(i,s,{shouldUpdatePosition:!0}),r.props.onRotationChange){var o=r.gestureRotationStart+n.rotation;r.props.onRotationChange(o)}}},r.onGestureEnd=function(n){r.cleanEvents()},r.onDragStart=function(n){var s,i,o=n.x,l=n.y;r.dragStartPosition={x:o,y:l},r.dragStartCrop=Jn({},r.props.crop),(i=(s=r.props).onInteractionStart)===null||i===void 0||i.call(s)},r.onDrag=function(n){var s=n.x,i=n.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(s===void 0||i===void 0)){var o=s-r.dragStartPosition.x,l=i-r.dragStartPosition.y,c={x:r.dragStartCrop.x+o,y:r.dragStartCrop.y+l},d=r.props.restrictPosition?_p(c,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):c;r.props.onCropChange(d)}}))},r.onDragStopped=function(){var n,s;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(s=(n=r.props).onInteractionEnd)===null||s===void 0||s.call(n)},r.onWheel=function(n){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(n))){n.preventDefault();var s=e.getMousePoint(n),i=Git(n).pixelY,o=r.props.zoom-i*r.props.zoomSpeed/200;r.setNewZoom(o,s,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=r.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=r.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},r.getPointOnContainer=function(n,s){var i=n.x,o=n.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(i-s.x),y:r.containerRect.height/2-(o-s.y)}},r.getPointOnMedia=function(n){var s=n.x,i=n.y,o=r.props,l=o.crop,c=o.zoom;return{x:(s+l.x)/c,y:(i+l.y)/c}},r.setNewZoom=function(n,s,i){var o=i===void 0?{}:i,l=o.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!r.state.cropSize||!r.props.onZoomChange)){var d=Fj(n,r.props.minZoom,r.props.maxZoom);if(c){var u=r.getPointOnContainer(s,r.containerPosition),h=r.getPointOnMedia(u),f={x:h.x*d-u.x,y:h.y*d-u.y},g=r.props.restrictPosition?_p(f,r.mediaSize,r.state.cropSize,d,r.props.rotation):f;r.props.onCropChange(g)}r.props.onZoomChange(d)}},r.getCropData=function(){if(!r.state.cropSize)return null;var n=r.props.restrictPosition?_p(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return Hit(n,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var n=r.getCropData();if(n){var s=n.croppedAreaPercentages,i=n.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(s,i),r.props.onCropAreaChange&&r.props.onCropAreaChange(s,i)}},r.emitCropAreaChange=function(){var n=r.getCropData();if(n){var s=n.croppedAreaPercentages,i=n.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(s,i)}},r.recomputeCropPosition=function(){var n,s;if(r.state.cropSize){var i=r.props.crop;if(r.isInitialized&&(!((n=r.previousCropSize)===null||n===void 0)&&n.width)&&(!((s=r.previousCropSize)===null||s===void 0)&&s.height)){var o=Math.abs(r.previousCropSize.width-r.state.cropSize.width)>1e-6||Math.abs(r.previousCropSize.height-r.state.cropSize.height)>1e-6;if(o){var l=r.state.cropSize.width/r.previousCropSize.width,c=r.state.cropSize.height/r.previousCropSize.height;i={x:r.props.crop.x*l,y:r.props.crop.y*c}}}var d=r.props.restrictPosition?_p(i,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):i;r.previousCropSize=r.state.cropSize,r.props.onCropChange(d),r.emitCropData()}},r.onKeyDown=function(n){var s,i,o=r.props,l=o.crop,c=o.onCropChange,d=o.keyboardStep,u=o.zoom,h=o.rotation,f=d;if(r.state.cropSize){n.shiftKey&&(f*=.2);var g=Jn({},l);switch(n.key){case"ArrowUp":g.y-=f,n.preventDefault();break;case"ArrowDown":g.y+=f,n.preventDefault();break;case"ArrowLeft":g.x-=f,n.preventDefault();break;case"ArrowRight":g.x+=f,n.preventDefault();break;default:return}r.props.restrictPosition&&(g=_p(g,r.mediaSize,r.state.cropSize,u,h)),n.repeat||(i=(s=r.props).onInteractionStart)===null||i===void 0||i.call(s),c(g)}},r.onKeyUp=function(n){var s,i;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}r.emitCropData(),(i=(s=r.props).onInteractionEnd)===null||i===void 0||i.call(s)},r}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=eot,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var r,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(r){var n,s,i,o,l,c,d,u,h;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((n=r.cropSize)===null||n===void 0?void 0:n.height)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.height)||((i=r.cropSize)===null||i===void 0?void 0:i.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((l=r.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((d=r.crop)===null||d===void 0?void 0:d.y)!==((u=this.props.crop)===null||u===void 0?void 0:u.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((h=this.videoRef.current)===null||h===void 0||h.load());var f=this.getObjectFit();f!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:f},this.computeSizes)},e.prototype.getAspect=function(){var r=this.props,n=r.cropSize,s=r.aspect;return n?n.width/n.height:s},e.prototype.getObjectFit=function(){var r,n,s,i;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,d=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,u=c/d;return u<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(r){var n=e.getTouchPoint(r.touches[0]),s=e.getTouchPoint(r.touches[1]);this.lastPinchDistance=kF(n,s),this.lastPinchRotation=wF(n,s),this.onDragStart(jF(n,s))},e.prototype.onPinchMove=function(r){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var s=e.getTouchPoint(r.touches[0]),i=e.getTouchPoint(r.touches[1]),o=jF(s,i);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=kF(s,i),c=n.props.zoom*(l/n.lastPinchDistance);n.setNewZoom(c,o,{shouldUpdatePosition:!1}),n.lastPinchDistance=l;var d=wF(s,i),u=n.props.rotation+(d-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(u),n.lastPinchRotation=d})}},e.prototype.render=function(){var r=this,n,s=this.props,i=s.image,o=s.video,l=s.mediaProps,c=s.cropperProps,d=s.transform,u=s.crop,h=u.x,f=u.y,g=s.rotation,x=s.zoom,m=s.cropShape,p=s.showGrid,b=s.roundCropAreaPixels,v=s.style,y=v.containerStyle,w=v.cropAreaStyle,k=v.mediaStyle,j=s.classes,_=j.containerClassName,S=j.cropAreaClassName,A=j.mediaClassName,T=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(C){return r.containerRef=C},"data-testid":"container",style:y,className:fv("reactEasyCrop_Container",_)},i?N.createElement("img",Jn({alt:"",className:fv("reactEasyCrop_Image",T==="contain"&&"reactEasyCrop_Contain",T==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",T==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",A)},l,{src:i,ref:this.imageRef,style:Jn(Jn({},k),{transform:d||"translate(".concat(h,"px, ").concat(f,"px) rotate(").concat(g,"deg) scale(").concat(x,")")}),onLoad:this.onMediaLoad})):o&&N.createElement("video",Jn({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:fv("reactEasyCrop_Video",T==="contain"&&"reactEasyCrop_Contain",T==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",T==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",A)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Jn(Jn({},k),{transform:d||"translate(".concat(h,"px, ").concat(f,"px) rotate(").concat(g,"deg) scale(").concat(x,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(E){return N.createElement("source",Jn({key:E.src},E))})),this.state.cropSize&&N.createElement("div",Jn({ref:this.cropperRef,style:Jn(Jn({},w),{width:b?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:b?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:fv("reactEasyCrop_CropArea",m==="round"&&"reactEasyCrop_CropAreaRound",p&&"reactEasyCrop_CropAreaGrid",S)},c)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:rot,minZoom:tot,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:not},e.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},e.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},e}(N.Component);function sot(t,e){return e.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in t)){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(t)}function KJ(t,e){return new Promise(function(r,n){let s;return iot(t).then(function(i){try{return s=i,r(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(o){return n(o)}},n)})}const iot=t=>new Promise((e,r)=>{const n=new FileReader;n.addEventListener("load",({target:{result:s}})=>{const i=new DataView(s);let o=0;if(i.getUint16(o)!==65496)return r("not a valid JPEG");for(o+=2;;){const l=i.getUint16(o);if(l===65498)break;const c=i.getUint16(o+2);if(l===65505&&i.getUint32(o+4)===1165519206){const d=o+10;let u;switch(i.getUint16(d)){case 18761:u=!0;break;case 19789:u=!1;break;default:return r("TIFF header contains invalid endian")}if(i.getUint16(d+2,u)!==42)return r("TIFF header contains invalid version");const h=i.getUint32(d+4,u),f=d+h+2+12*i.getUint16(d+h,u);for(let g=d+h+2;g<f;g+=12)if(i.getUint16(g,u)==274){if(i.getUint16(g+2,u)!==3)return r("Orientation data type is invalid");if(i.getUint32(g+4,u)!==1)return r("Orientation data count is invalid");i.setUint16(g+8,1,u);break}return e(s.slice(o,o+2+c))}o+=2+c}return e(new Blob)}),n.readAsArrayBuffer(t)});var w2={},oot={get exports(){return w2},set exports(t){w2=t}};(function(t){var e,r,n={};oot.exports=n,n.parse=function(s,i){for(var o=n.bin.readUshort,l=n.bin.readUint,c=0,d={},u=new Uint8Array(s),h=u.length-4;l(u,h)!=101010256;)h--;c=h,c+=4;var f=o(u,c+=4);o(u,c+=2);var g=l(u,c+=2),x=l(u,c+=4);c+=4,c=x;for(var m=0;m<f;m++){l(u,c),c+=4,c+=4,c+=4,l(u,c+=4),g=l(u,c+=4);var p=l(u,c+=4),b=o(u,c+=4),v=o(u,c+2),y=o(u,c+4);c+=6;var w=l(u,c+=8);c+=4,c+=b+v+y,n._readLocal(u,w,d,g,p,i)}return d},n._readLocal=function(s,i,o,l,c,d){var u=n.bin.readUshort,h=n.bin.readUint;h(s,i),u(s,i+=4),u(s,i+=2);var f=u(s,i+=2);h(s,i+=2),h(s,i+=4),i+=4;var g=u(s,i+=8),x=u(s,i+=2);i+=2;var m=n.bin.readUTF8(s,i,g);if(i+=g,i+=x,d)o[m]={size:c,csize:l};else{var p=new Uint8Array(s.buffer,i);if(f==0)o[m]=new Uint8Array(p.buffer.slice(i,i+l));else{if(f!=8)throw"unknown compression method: "+f;var b=new Uint8Array(c);n.inflateRaw(p,b),o[m]=b}}},n.inflateRaw=function(s,i){return n.F.inflate(s,i)},n.inflate=function(s,i){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),i)},n.deflate=function(s,i){i==null&&(i={level:6});var o=0,l=new Uint8Array(50+Math.floor(1.1*s.length));l[o]=120,l[o+1]=156,o+=2,o=n.F.deflateRaw(s,l,o,i.level);var c=n.adler(s,0,s.length);return l[o+0]=c>>>24&255,l[o+1]=c>>>16&255,l[o+2]=c>>>8&255,l[o+3]=c>>>0&255,new Uint8Array(l.buffer,0,o+4)},n.deflateRaw=function(s,i){i==null&&(i={level:6});var o=new Uint8Array(50+Math.floor(1.1*s.length)),l=n.F.deflateRaw(s,o,l,i.level);return new Uint8Array(o.buffer,0,l)},n.encode=function(s,i){i==null&&(i=!1);var o=0,l=n.bin.writeUint,c=n.bin.writeUshort,d={};for(var u in s){var h=!n._noNeed(u)&&!i,f=s[u],g=n.crc.crc(f,0,f.length);d[u]={cpr:h,usize:f.length,crc:g,file:h?n.deflateRaw(f):f}}for(var u in d)o+=d[u].file.length+30+46+2*n.bin.sizeUTF8(u);o+=22;var x=new Uint8Array(o),m=0,p=[];for(var u in d){var b=d[u];p.push(m),m=n._writeHeader(x,m,u,b,0)}var v=0,y=m;for(var u in d)b=d[u],p.push(m),m=n._writeHeader(x,m,u,b,1,p[v++]);var w=m-y;return l(x,m,101010256),m+=4,c(x,m+=4,v),c(x,m+=2,v),l(x,m+=2,w),l(x,m+=4,y),m+=4,m+=2,x.buffer},n._noNeed=function(s){var i=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},n._writeHeader=function(s,i,o,l,c,d){var u=n.bin.writeUint,h=n.bin.writeUshort,f=l.file;return u(s,i,c==0?67324752:33639248),i+=4,c==1&&(i+=2),h(s,i,20),h(s,i+=2,0),h(s,i+=2,l.cpr?8:0),u(s,i+=2,0),u(s,i+=4,l.crc),u(s,i+=4,f.length),u(s,i+=4,l.usize),h(s,i+=4,n.bin.sizeUTF8(o)),h(s,i+=2,0),i+=2,c==1&&(i+=2,i+=2,u(s,i+=6,d),i+=4),i+=n.bin.writeUTF8(s,i,o),c==0&&(s.set(f,i),i+=f.length),i},n.crc={table:function(){for(var s=new Uint32Array(256),i=0;i<256;i++){for(var o=i,l=0;l<8;l++)1&o?o=3988292384^o>>>1:o>>>=1;s[i]=o}return s}(),update:function(s,i,o,l){for(var c=0;c<l;c++)s=n.crc.table[255&(s^i[o+c])]^s>>>8;return s},crc:function(s,i,o){return 4294967295^n.crc.update(4294967295,s,i,o)}},n.adler=function(s,i,o){for(var l=1,c=0,d=i,u=i+o;d<u;){for(var h=Math.min(d+5552,u);d<h;)c+=l+=s[d++];l%=65521,c%=65521}return c<<16|l},n.bin={readUshort:function(s,i){return s[i]|s[i+1]<<8},writeUshort:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255},readUint:function(s,i){return 16777216*s[i+3]+(s[i+2]<<16|s[i+1]<<8|s[i])},writeUint:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255,s[i+2]=o>>16&255,s[i+3]=o>>24&255},readASCII:function(s,i,o){for(var l="",c=0;c<o;c++)l+=String.fromCharCode(s[i+c]);return l},writeASCII:function(s,i,o){for(var l=0;l<o.length;l++)s[i+l]=o.charCodeAt(l)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,i,o){for(var l,c="",d=0;d<o;d++)c+="%"+n.bin.pad(s[i+d].toString(16));try{l=decodeURIComponent(c)}catch{return n.bin.readASCII(s,i,o)}return l},writeUTF8:function(s,i,o){for(var l=o.length,c=0,d=0;d<l;d++){var u=o.charCodeAt(d);if(!(4294967168&u))s[i+c]=u,c++;else if(!(4294965248&u))s[i+c]=192|u>>6,s[i+c+1]=128|u>>0&63,c+=2;else if(!(4294901760&u))s[i+c]=224|u>>12,s[i+c+1]=128|u>>6&63,s[i+c+2]=128|u>>0&63,c+=3;else{if(4292870144&u)throw"e";s[i+c]=240|u>>18,s[i+c+1]=128|u>>12&63,s[i+c+2]=128|u>>6&63,s[i+c+3]=128|u>>0&63,c+=4}}return c},sizeUTF8:function(s){for(var i=s.length,o=0,l=0;l<i;l++){var c=s.charCodeAt(l);if(!(4294967168&c))o++;else if(!(4294965248&c))o+=2;else if(!(4294901760&c))o+=3;else{if(4292870144&c)throw"e";o+=4}}return o}},n.F={},n.F.deflateRaw=function(s,i,o,l){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],d=n.F.U,u=n.F._goodIndex;n.F._hash;var h=n.F._putsE,f=0,g=o<<3,x=0,m=s.length;if(l==0){for(;f<m;)h(i,g,f+(E=Math.min(65535,m-f))==m?1:0),g=n.F._copyExact(s,f,E,i,g+8),f+=E;return g>>>3}var p=d.lits,b=d.strt,v=d.prev,y=0,w=0,k=0,j=0,_=0,S=0;for(m>2&&(b[S=n.F._hash(s,0)]=0),f=0;f<m;f++){if(_=S,f+1<m-2){S=n.F._hash(s,f+1);var A=f+1&32767;v[A]=b[S],b[S]=A}if(x<=f){(y>14e3||w>26697)&&m-f>100&&(x<f&&(p[y]=f-x,y+=2,x=f),g=n.F._writeBlock(f==m-1||x==m?1:0,p,y,j,s,k,f-k,i,g),y=w=j=0,k=f);var T=0;f<m-2&&(T=n.F._bestMatch(s,f,v,_,Math.min(c[2],m-f),c[3]));var E=T>>>16,C=65535&T;if(T!=0){C=65535&T;var z=u(E=T>>>16,d.of0);d.lhst[257+z]++;var M=u(C,d.df0);d.dhst[M]++,j+=d.exb[z]+d.dxb[M],p[y]=E<<23|f-x,p[y+1]=C<<16|z<<8|M,y+=2,x=f+E}else d.lhst[s[f]]++;w++}}for(k==f&&s.length!=0||(x<f&&(p[y]=f-x,y+=2,x=f),g=n.F._writeBlock(1,p,y,j,s,k,f-k,i,g),y=0,w=0,y=w=j=0,k=f);7&g;)g++;return g>>>3},n.F._bestMatch=function(s,i,o,l,c,d){var u=32767&i,h=o[u],f=u-h+32768&32767;if(h==u||l!=n.F._hash(s,i-f))return 0;for(var g=0,x=0,m=Math.min(32767,i);f<=m&&--d!=0&&h!=u;){if(g==0||s[i+g]==s[i+g-f]){var p=n.F._howLong(s,i,f);if(p>g){if(x=f,(g=p)>=c)break;f+2<p&&(p=f+2);for(var b=0,v=0;v<p-2;v++){var y=i-f+v+32768&32767,w=y-o[y]+32768&32767;w>b&&(b=w,h=y)}}}f+=(u=h)-(h=o[u])+32768&32767}return g<<16|x},n.F._howLong=function(s,i,o){if(s[i]!=s[i-o]||s[i+1]!=s[i+1-o]||s[i+2]!=s[i+2-o])return 0;var l=i,c=Math.min(s.length,i+258);for(i+=3;i<c&&s[i]==s[i-o];)i++;return i-l},n.F._hash=function(s,i){return(s[i]<<8|s[i+1])+(s[i+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,i,o,l,c,d,u,h,f){var g,x,m,p,b,v,y,w,k,j=n.F.U,_=n.F._putsF,S=n.F._putsE;j.lhst[256]++,x=(g=n.F.getTrees())[0],m=g[1],p=g[2],b=g[3],v=g[4],y=g[5],w=g[6],k=g[7];var A=32+(f+3&7?8-(f+3&7):0)+(u<<3),T=l+n.F.contSize(j.fltree,j.lhst)+n.F.contSize(j.fdtree,j.dhst),E=l+n.F.contSize(j.ltree,j.lhst)+n.F.contSize(j.dtree,j.dhst);E+=14+3*y+n.F.contSize(j.itree,j.ihst)+(2*j.ihst[16]+3*j.ihst[17]+7*j.ihst[18]);for(var C=0;C<286;C++)j.lhst[C]=0;for(C=0;C<30;C++)j.dhst[C]=0;for(C=0;C<19;C++)j.ihst[C]=0;var z=A<T&&A<E?0:T<E?1:2;if(_(h,f,s),_(h,f+1,z),f+=3,z==0){for(;7&f;)f++;f=n.F._copyExact(c,d,u,h,f)}else{var M,F;if(z==1&&(M=j.fltree,F=j.fdtree),z==2){n.F.makeCodes(j.ltree,x),n.F.revCodes(j.ltree,x),n.F.makeCodes(j.dtree,m),n.F.revCodes(j.dtree,m),n.F.makeCodes(j.itree,p),n.F.revCodes(j.itree,p),M=j.ltree,F=j.dtree,S(h,f,b-257),S(h,f+=5,v-1),S(h,f+=5,y-4),f+=4;for(var D=0;D<y;D++)S(h,f+3*D,j.itree[1+(j.ordr[D]<<1)]);f+=3*y,f=n.F._codeTiny(w,j.itree,h,f),f=n.F._codeTiny(k,j.itree,h,f)}for(var L=d,K=0;K<o;K+=2){for(var $=i[K],R=$>>>23,Y=L+(8388607&$);L<Y;)f=n.F._writeLit(c[L++],M,h,f);if(R!=0){var ee=i[K+1],B=ee>>16,U=ee>>8&255,V=255&ee;S(h,f=n.F._writeLit(257+U,M,h,f),R-j.of0[U]),f+=j.exb[U],_(h,f=n.F._writeLit(V,F,h,f),B-j.df0[V]),f+=j.dxb[V],L+=R}}f=n.F._writeLit(256,M,h,f)}return f},n.F._copyExact=function(s,i,o,l,c){var d=c>>>3;return l[d]=o,l[d+1]=o>>>8,l[d+2]=255-l[d],l[d+3]=255-l[d+1],d+=4,l.set(new Uint8Array(s.buffer,i,o),d),c+(o+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,i=n.F._hufTree(s.lhst,s.ltree,15),o=n.F._hufTree(s.dhst,s.dtree,15),l=[],c=n.F._lenCodes(s.ltree,l),d=[],u=n.F._lenCodes(s.dtree,d),h=0;h<l.length;h+=2)s.ihst[l[h]]++;for(h=0;h<d.length;h+=2)s.ihst[d[h]]++;for(var f=n.F._hufTree(s.ihst,s.itree,7),g=19;g>4&&s.itree[1+(s.ordr[g-1]<<1)]==0;)g--;return[i,o,f,c,u,g,l,d]},n.F.getSecond=function(s){for(var i=[],o=0;o<s.length;o+=2)i.push(s[o+1]);return i},n.F.nonZero=function(s){for(var i="",o=0;o<s.length;o+=2)s[o+1]!=0&&(i+=(o>>1)+",");return i},n.F.contSize=function(s,i){for(var o=0,l=0;l<i.length;l++)o+=i[l]*s[1+(l<<1)];return o},n.F._codeTiny=function(s,i,o,l){for(var c=0;c<s.length;c+=2){var d=s[c],u=s[c+1];l=n.F._writeLit(d,i,o,l);var h=d==16?2:d==17?3:7;d>15&&(n.F._putsE(o,l,u,h),l+=h)}return l},n.F._lenCodes=function(s,i){for(var o=s.length;o!=2&&s[o-1]==0;)o-=2;for(var l=0;l<o;l+=2){var c=s[l+1],d=l+3<o?s[l+3]:-1,u=l+5<o?s[l+5]:-1,h=l==0?-1:s[l-1];if(c==0&&d==c&&u==c){for(var f=l+5;f+2<o&&s[f+2]==c;)f+=2;(g=Math.min(f+1-l>>>1,138))<11?i.push(17,g-3):i.push(18,g-11),l+=2*g-2}else if(c==h&&d==c&&u==c){for(f=l+5;f+2<o&&s[f+2]==c;)f+=2;var g=Math.min(f+1-l>>>1,6);i.push(16,g-3),l+=2*g-2}else i.push(c,0)}return o>>>1},n.F._hufTree=function(s,i,o){var l=[],c=s.length,d=i.length,u=0;for(u=0;u<d;u+=2)i[u]=0,i[u+1]=0;for(u=0;u<c;u++)s[u]!=0&&l.push({lit:u,f:s[u]});var h=l.length,f=l.slice(0);if(h==0)return 0;if(h==1){var g=l[0].lit;return f=g==0?1:0,i[1+(g<<1)]=1,i[1+(f<<1)]=1,1}l.sort(function(w,k){return w.f-k.f});var x=l[0],m=l[1],p=0,b=1,v=2;for(l[0]={lit:-1,f:x.f+m.f,l:x,r:m,d:0};b!=h-1;)x=p!=b&&(v==h||l[p].f<l[v].f)?l[p++]:l[v++],m=p!=b&&(v==h||l[p].f<l[v].f)?l[p++]:l[v++],l[b++]={lit:-1,f:x.f+m.f,l:x,r:m};var y=n.F.setDepth(l[b-1],0);for(y>o&&(n.F.restrictDepth(f,o,y),y=o),u=0;u<h;u++)i[1+(f[u].lit<<1)]=f[u].d;return y},n.F.setDepth=function(s,i){return s.lit!=-1?(s.d=i,i):Math.max(n.F.setDepth(s.l,i+1),n.F.setDepth(s.r,i+1))},n.F.restrictDepth=function(s,i,o){var l=0,c=1<<o-i,d=0;for(s.sort(function(h,f){return f.d==h.d?h.f-f.f:f.d-h.d}),l=0;l<s.length&&s[l].d>i;l++){var u=s[l].d;s[l].d=i,d+=c-(1<<o-u)}for(d>>>=o-i;d>0;)(u=s[l].d)<i?(s[l].d++,d-=1<<i-u-1):l++;for(;l>=0;l--)s[l].d==i&&d<0&&(s[l].d--,d++);d!=0&&console.log("debt left")},n.F._goodIndex=function(s,i){var o=0;return i[16|o]<=s&&(o|=16),i[8|o]<=s&&(o|=8),i[4|o]<=s&&(o|=4),i[2|o]<=s&&(o|=2),i[1|o]<=s&&(o|=1),o},n.F._writeLit=function(s,i,o,l){return n.F._putsF(o,l,i[s<<1]),l+i[1+(s<<1)]},n.F.inflate=function(s,i){var o=Uint8Array;if(s[0]==3&&s[1]==0)return i||new o(0);var l=n.F,c=l._bitsF,d=l._bitsE,u=l._decodeTiny,h=l.makeCodes,f=l.codes2map,g=l._get17,x=l.U,m=i==null;m&&(i=new o(s.length>>>2<<3));for(var p,b,v=0,y=0,w=0,k=0,j=0,_=0,S=0,A=0,T=0;v==0;)if(v=c(s,T,1),y=c(s,T+1,2),T+=3,y!=0){if(m&&(i=n.F._check(i,A+(1<<17))),y==1&&(p=x.flmap,b=x.fdmap,_=511,S=31),y==2){w=d(s,T,5)+257,k=d(s,T+5,5)+1,j=d(s,T+10,4)+4,T+=14;for(var E=0;E<38;E+=2)x.itree[E]=0,x.itree[E+1]=0;var C=1;for(E=0;E<j;E++){var z=d(s,T+3*E,3);x.itree[1+(x.ordr[E]<<1)]=z,z>C&&(C=z)}T+=3*j,h(x.itree,C),f(x.itree,C,x.imap),p=x.lmap,b=x.dmap,T=u(x.imap,(1<<C)-1,w+k,s,T,x.ttree);var M=l._copyOut(x.ttree,0,w,x.ltree);_=(1<<M)-1;var F=l._copyOut(x.ttree,w,k,x.dtree);S=(1<<F)-1,h(x.ltree,M),f(x.ltree,M,p),h(x.dtree,F),f(x.dtree,F,b)}for(;;){var D=p[g(s,T)&_];T+=15&D;var L=D>>>4;if(!(L>>>8))i[A++]=L;else{if(L==256)break;var K=A+L-254;if(L>264){var $=x.ldef[L-257];K=A+($>>>3)+d(s,T,7&$),T+=7&$}var R=b[g(s,T)&S];T+=15&R;var Y=R>>>4,ee=x.ddef[Y],B=(ee>>>4)+c(s,T,15&ee);for(T+=15&ee,m&&(i=n.F._check(i,A+(1<<17)));A<K;)i[A]=i[A++-B],i[A]=i[A++-B],i[A]=i[A++-B],i[A]=i[A++-B];A=K}}}else{7&T&&(T+=8-(7&T));var U=4+(T>>>3),V=s[U-4]|s[U-3]<<8;m&&(i=n.F._check(i,A+V)),i.set(new o(s.buffer,s.byteOffset+U,V),A),T=U+V<<3,A+=V}return i.length==A?i:i.slice(0,A)},n.F._check=function(s,i){var o=s.length;if(i<=o)return s;var l=new Uint8Array(Math.max(o<<1,i));return l.set(s,0),l},n.F._decodeTiny=function(s,i,o,l,c,d){for(var u=n.F._bitsE,h=n.F._get17,f=0;f<o;){var g=s[h(l,c)&i];c+=15&g;var x=g>>>4;if(x<=15)d[f]=x,f++;else{var m=0,p=0;x==16?(p=3+u(l,c,2),c+=2,m=d[f-1]):x==17?(p=3+u(l,c,3),c+=3):x==18&&(p=11+u(l,c,7),c+=7);for(var b=f+p;f<b;)d[f]=m,f++}}return c},n.F._copyOut=function(s,i,o,l){for(var c=0,d=0,u=l.length>>>1;d<o;){var h=s[d+i];l[d<<1]=0,l[1+(d<<1)]=h,h>c&&(c=h),d++}for(;d<u;)l[d<<1]=0,l[1+(d<<1)]=0,d++;return c},n.F.makeCodes=function(s,i){for(var o,l,c,d,u=n.F.U,h=s.length,f=u.bl_count,g=0;g<=i;g++)f[g]=0;for(g=1;g<h;g+=2)f[s[g]]++;var x=u.next_code;for(o=0,f[0]=0,l=1;l<=i;l++)o=o+f[l-1]<<1,x[l]=o;for(c=0;c<h;c+=2)(d=s[c+1])!=0&&(s[c]=x[d],x[d]++)},n.F.codes2map=function(s,i,o){for(var l=s.length,c=n.F.U.rev15,d=0;d<l;d+=2)if(s[d+1]!=0)for(var u=d>>1,h=s[d+1],f=u<<4|h,g=i-h,x=s[d]<<g,m=x+(1<<g);x!=m;)o[c[x]>>>15-i]=f,x++},n.F.revCodes=function(s,i){for(var o=n.F.U.rev15,l=15-i,c=0;c<s.length;c+=2){var d=s[c]<<i-s[c+1];s[c]=o[d]>>>l}},n.F._putsE=function(s,i,o){o<<=7&i;var l=i>>>3;s[l]|=o,s[l+1]|=o>>>8},n.F._putsF=function(s,i,o){o<<=7&i;var l=i>>>3;s[l]|=o,s[l+1]|=o>>>8,s[l+2]|=o>>>16},n.F._bitsE=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8)>>>(7&i)&(1<<o)-1},n.F._bitsF=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)&(1<<o)-1},n.F._get17=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)},n.F._get25=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16|s[3+(i>>>3)]<<24)>>>(7&i)},n.F.U=(e=Uint16Array,r=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var s=n.F.U,i=0;i<32768;i++){var o=i;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,s.rev15[i]=(o>>>16|o<<16)>>>17}function l(c,d,u){for(;d--!=0;)c.push(0,u)}for(i=0;i<32;i++)s.ldef[i]=s.of0[i]<<3|s.exb[i],s.ddef[i]=s.df0[i]<<4|s.dxb[i];l(s.fltree,144,8),l(s.fltree,112,9),l(s.fltree,24,7),l(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),l(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),l(s.itree,19,0),l(s.ltree,286,0),l(s.dtree,30,0),l(s.ttree,320,0)}()})();var lot=sot({__proto__:null,default:w2},[w2]);const Oi=function(){var t={nextZero(u,h){for(;u[h]!=0;)h++;return h},readUshort:(u,h)=>u[h]<<8|u[h+1],writeUshort(u,h,f){u[h]=f>>8&255,u[h+1]=255&f},readUint:(u,h)=>16777216*u[h]+(u[h+1]<<16|u[h+2]<<8|u[h+3]),writeUint(u,h,f){u[h]=f>>24&255,u[h+1]=f>>16&255,u[h+2]=f>>8&255,u[h+3]=255&f},readASCII(u,h,f){let g="";for(let x=0;x<f;x++)g+=String.fromCharCode(u[h+x]);return g},writeASCII(u,h,f){for(let g=0;g<f.length;g++)u[h+g]=f.charCodeAt(g)},readBytes(u,h,f){const g=[];for(let x=0;x<f;x++)g.push(u[h+x]);return g},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,h,f){let g,x="";for(let m=0;m<f;m++)x+=`%${t.pad(u[h+m].toString(16))}`;try{g=decodeURIComponent(x)}catch{return t.readASCII(u,h,f)}return g}};function e(u,h,f,g){const x=h*f,m=i(g),p=Math.ceil(h*m/8),b=new Uint8Array(4*x),v=new Uint32Array(b.buffer),{ctype:y}=g,{depth:w}=g,k=t.readUshort;if(y==6){const $=x<<2;if(w==8)for(var j=0;j<$;j+=4)b[j]=u[j],b[j+1]=u[j+1],b[j+2]=u[j+2],b[j+3]=u[j+3];if(w==16)for(j=0;j<$;j++)b[j]=u[j<<1]}else if(y==2){const $=g.tabs.tRNS;if($==null){if(w==8)for(j=0;j<x;j++){var _=3*j;v[j]=255<<24|u[_+2]<<16|u[_+1]<<8|u[_]}if(w==16)for(j=0;j<x;j++)_=6*j,v[j]=255<<24|u[_+4]<<16|u[_+2]<<8|u[_]}else{var S=$[0];const R=$[1],Y=$[2];if(w==8)for(j=0;j<x;j++){var A=j<<2;_=3*j,v[j]=255<<24|u[_+2]<<16|u[_+1]<<8|u[_],u[_]==S&&u[_+1]==R&&u[_+2]==Y&&(b[A+3]=0)}if(w==16)for(j=0;j<x;j++)A=j<<2,_=6*j,v[j]=255<<24|u[_+4]<<16|u[_+2]<<8|u[_],k(u,_)==S&&k(u,_+2)==R&&k(u,_+4)==Y&&(b[A+3]=0)}}else if(y==3){const $=g.tabs.PLTE,R=g.tabs.tRNS,Y=R?R.length:0;if(w==1)for(var T=0;T<f;T++){var E=T*p,C=T*h;for(j=0;j<h;j++){A=C+j<<2;var z=3*(M=u[E+(j>>3)]>>7-((7&j)<<0)&1);b[A]=$[z],b[A+1]=$[z+1],b[A+2]=$[z+2],b[A+3]=M<Y?R[M]:255}}if(w==2)for(T=0;T<f;T++)for(E=T*p,C=T*h,j=0;j<h;j++)A=C+j<<2,z=3*(M=u[E+(j>>2)]>>6-((3&j)<<1)&3),b[A]=$[z],b[A+1]=$[z+1],b[A+2]=$[z+2],b[A+3]=M<Y?R[M]:255;if(w==4)for(T=0;T<f;T++)for(E=T*p,C=T*h,j=0;j<h;j++)A=C+j<<2,z=3*(M=u[E+(j>>1)]>>4-((1&j)<<2)&15),b[A]=$[z],b[A+1]=$[z+1],b[A+2]=$[z+2],b[A+3]=M<Y?R[M]:255;if(w==8)for(j=0;j<x;j++){var M;A=j<<2,z=3*(M=u[j]),b[A]=$[z],b[A+1]=$[z+1],b[A+2]=$[z+2],b[A+3]=M<Y?R[M]:255}}else if(y==4){if(w==8)for(j=0;j<x;j++){A=j<<2;var F=u[D=j<<1];b[A]=F,b[A+1]=F,b[A+2]=F,b[A+3]=u[D+1]}if(w==16)for(j=0;j<x;j++){var D;A=j<<2,F=u[D=j<<2],b[A]=F,b[A+1]=F,b[A+2]=F,b[A+3]=u[D+2]}}else if(y==0)for(S=g.tabs.tRNS?g.tabs.tRNS:-1,T=0;T<f;T++){const $=T*p,R=T*h;if(w==1)for(var L=0;L<h;L++){var K=(F=255*(u[$+(L>>>3)]>>>7-(7&L)&1))==255*S?0:255;v[R+L]=K<<24|F<<16|F<<8|F}else if(w==2)for(L=0;L<h;L++)K=(F=85*(u[$+(L>>>2)]>>>6-((3&L)<<1)&3))==85*S?0:255,v[R+L]=K<<24|F<<16|F<<8|F;else if(w==4)for(L=0;L<h;L++)K=(F=17*(u[$+(L>>>1)]>>>4-((1&L)<<2)&15))==17*S?0:255,v[R+L]=K<<24|F<<16|F<<8|F;else if(w==8)for(L=0;L<h;L++)K=(F=u[$+L])==S?0:255,v[R+L]=K<<24|F<<16|F<<8|F;else if(w==16)for(L=0;L<h;L++)F=u[$+(L<<1)],K=k(u,$+(L<<1))==S?0:255,v[R+L]=K<<24|F<<16|F<<8|F}return b}function r(u,h,f,g){const x=i(u),m=Math.ceil(f*x/8),p=new Uint8Array((m+1+u.interlace)*g);return h=u.tabs.CgBI?s(h,p):n(h,p),u.interlace==0?h=o(h,u,0,f,g):u.interlace==1&&(h=function(v,y){const w=y.width,k=y.height,j=i(y),_=j>>3,S=Math.ceil(w*j/8),A=new Uint8Array(k*S);let T=0;const E=[0,0,4,0,2,0,1],C=[0,4,0,2,0,1,0],z=[8,8,8,4,4,2,2],M=[8,8,4,4,2,2,1];let F=0;for(;F<7;){const L=z[F],K=M[F];let $=0,R=0,Y=E[F];for(;Y<k;)Y+=L,R++;let ee=C[F];for(;ee<w;)ee+=K,$++;const B=Math.ceil($*j/8);o(v,y,T,$,R);let U=0,V=E[F];for(;V<k;){let se=C[F],Ne=T+U*B<<3;for(;se<w;){var D;if(j==1&&(D=(D=v[Ne>>3])>>7-(7&Ne)&1,A[V*S+(se>>3)]|=D<<7-((7&se)<<0)),j==2&&(D=(D=v[Ne>>3])>>6-(7&Ne)&3,A[V*S+(se>>2)]|=D<<6-((3&se)<<1)),j==4&&(D=(D=v[Ne>>3])>>4-(7&Ne)&15,A[V*S+(se>>1)]|=D<<4-((1&se)<<2)),j>=8){const ie=V*S+se*_;for(let q=0;q<_;q++)A[ie+q]=v[(Ne>>3)+q]}Ne+=j,se+=K}U++,V+=L}$*R!=0&&(T+=R*(1+B)),F+=1}return A}(h,u)),h}function n(u,h){return s(new Uint8Array(u.buffer,2,u.length-6),h)}var s=function(){const u={H:{}};return u.H.N=function(h,f){const g=Uint8Array;let x,m,p=0,b=0,v=0,y=0,w=0,k=0,j=0,_=0,S=0;if(h[0]==3&&h[1]==0)return f||new g(0);const A=u.H,T=A.b,E=A.e,C=A.R,z=A.n,M=A.A,F=A.Z,D=A.m,L=f==null;for(L&&(f=new g(h.length>>>2<<5));p==0;)if(p=T(h,S,1),b=T(h,S+1,2),S+=3,b!=0){if(L&&(f=u.H.W(f,_+(1<<17))),b==1&&(x=D.J,m=D.h,k=511,j=31),b==2){v=E(h,S,5)+257,y=E(h,S+5,5)+1,w=E(h,S+10,4)+4,S+=14;let $=1;for(var K=0;K<38;K+=2)D.Q[K]=0,D.Q[K+1]=0;for(K=0;K<w;K++){const ee=E(h,S+3*K,3);D.Q[1+(D.X[K]<<1)]=ee,ee>$&&($=ee)}S+=3*w,z(D.Q,$),M(D.Q,$,D.u),x=D.w,m=D.d,S=C(D.u,(1<<$)-1,v+y,h,S,D.v);const R=A.V(D.v,0,v,D.C);k=(1<<R)-1;const Y=A.V(D.v,v,y,D.D);j=(1<<Y)-1,z(D.C,R),M(D.C,R,x),z(D.D,Y),M(D.D,Y,m)}for(;;){const $=x[F(h,S)&k];S+=15&$;const R=$>>>4;if(!(R>>>8))f[_++]=R;else{if(R==256)break;{let Y=_+R-254;if(R>264){const se=D.q[R-257];Y=_+(se>>>3)+E(h,S,7&se),S+=7&se}const ee=m[F(h,S)&j];S+=15&ee;const B=ee>>>4,U=D.c[B],V=(U>>>4)+T(h,S,15&U);for(S+=15&U;_<Y;)f[_]=f[_++-V],f[_]=f[_++-V],f[_]=f[_++-V],f[_]=f[_++-V];_=Y}}}}else{7&S&&(S+=8-(7&S));const $=4+(S>>>3),R=h[$-4]|h[$-3]<<8;L&&(f=u.H.W(f,_+R)),f.set(new g(h.buffer,h.byteOffset+$,R),_),S=$+R<<3,_+=R}return f.length==_?f:f.slice(0,_)},u.H.W=function(h,f){const g=h.length;if(f<=g)return h;const x=new Uint8Array(g<<1);return x.set(h,0),x},u.H.R=function(h,f,g,x,m,p){const b=u.H.e,v=u.H.Z;let y=0;for(;y<g;){const w=h[v(x,m)&f];m+=15&w;const k=w>>>4;if(k<=15)p[y]=k,y++;else{let j=0,_=0;k==16?(_=3+b(x,m,2),m+=2,j=p[y-1]):k==17?(_=3+b(x,m,3),m+=3):k==18&&(_=11+b(x,m,7),m+=7);const S=y+_;for(;y<S;)p[y]=j,y++}}return m},u.H.V=function(h,f,g,x){let m=0,p=0;const b=x.length>>>1;for(;p<g;){const v=h[p+f];x[p<<1]=0,x[1+(p<<1)]=v,v>m&&(m=v),p++}for(;p<b;)x[p<<1]=0,x[1+(p<<1)]=0,p++;return m},u.H.n=function(h,f){const g=u.H.m,x=h.length;let m,p,b,v;const y=g.j;for(var w=0;w<=f;w++)y[w]=0;for(w=1;w<x;w+=2)y[h[w]]++;const k=g.K;for(m=0,y[0]=0,p=1;p<=f;p++)m=m+y[p-1]<<1,k[p]=m;for(b=0;b<x;b+=2)v=h[b+1],v!=0&&(h[b]=k[v],k[v]++)},u.H.A=function(h,f,g){const x=h.length,m=u.H.m.r;for(let p=0;p<x;p+=2)if(h[p+1]!=0){const b=p>>1,v=h[p+1],y=b<<4|v,w=f-v;let k=h[p]<<w;const j=k+(1<<w);for(;k!=j;)g[m[k]>>>15-f]=y,k++}},u.H.l=function(h,f){const g=u.H.m.r,x=15-f;for(let m=0;m<h.length;m+=2){const p=h[m]<<f-h[m+1];h[m]=g[p]>>>x}},u.H.M=function(h,f,g){g<<=7&f;const x=f>>>3;h[x]|=g,h[x+1]|=g>>>8},u.H.I=function(h,f,g){g<<=7&f;const x=f>>>3;h[x]|=g,h[x+1]|=g>>>8,h[x+2]|=g>>>16},u.H.e=function(h,f,g){return(h[f>>>3]|h[1+(f>>>3)]<<8)>>>(7&f)&(1<<g)-1},u.H.b=function(h,f,g){return(h[f>>>3]|h[1+(f>>>3)]<<8|h[2+(f>>>3)]<<16)>>>(7&f)&(1<<g)-1},u.H.Z=function(h,f){return(h[f>>>3]|h[1+(f>>>3)]<<8|h[2+(f>>>3)]<<16)>>>(7&f)},u.H.i=function(h,f){return(h[f>>>3]|h[1+(f>>>3)]<<8|h[2+(f>>>3)]<<16|h[3+(f>>>3)]<<24)>>>(7&f)},u.H.m=function(){const h=Uint16Array,f=Uint32Array;return{K:new h(16),j:new h(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new h(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new h(512),_:[],h:new h(32),$:[],w:new h(32768),C:[],v:[],d:new h(32768),D:[],u:new h(512),Q:[],r:new h(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new h(65536),g:new h(32768)}}(),function(){const h=u.H.m;for(var f=0;f<32768;f++){let x=f;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,h.r[f]=(x>>>16|x<<16)>>>17}function g(x,m,p){for(;m--!=0;)x.push(0,p)}for(f=0;f<32;f++)h.q[f]=h.S[f]<<3|h.T[f],h.c[f]=h.p[f]<<4|h.z[f];g(h._,144,8),g(h._,112,9),g(h._,24,7),g(h._,8,8),u.H.n(h._,9),u.H.A(h._,9,h.J),u.H.l(h._,9),g(h.$,32,5),u.H.n(h.$,5),u.H.A(h.$,5,h.h),u.H.l(h.$,5),g(h.Q,19,0),g(h.C,286,0),g(h.D,30,0),g(h.v,320,0)}(),u.H.N}();function i(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,h,f,g,x){let m=i(h);const p=Math.ceil(g*m/8);let b,v;m=Math.ceil(m/8);let y=u[f],w=0;if(y>1&&(u[f]=[0,0,1][y-2]),y==3)for(w=m;w<p;w++)u[w+1]=u[w+1]+(u[w+1-m]>>>1)&255;for(let k=0;k<x;k++)if(b=f+k*p,v=b+k+1,y=u[v-1],w=0,y==0)for(;w<p;w++)u[b+w]=u[v+w];else if(y==1){for(;w<m;w++)u[b+w]=u[v+w];for(;w<p;w++)u[b+w]=u[v+w]+u[b+w-m]}else if(y==2)for(;w<p;w++)u[b+w]=u[v+w]+u[b+w-p];else if(y==3){for(;w<m;w++)u[b+w]=u[v+w]+(u[b+w-p]>>>1);for(;w<p;w++)u[b+w]=u[v+w]+(u[b+w-p]+u[b+w-m]>>>1)}else{for(;w<m;w++)u[b+w]=u[v+w]+l(0,u[b+w-p],0);for(;w<p;w++)u[b+w]=u[v+w]+l(u[b+w-m],u[b+w-p],u[b+w-m-p])}return u}function l(u,h,f){const g=u+h-f,x=g-u,m=g-h,p=g-f;return x*x<=m*m&&x*x<=p*p?u:m*m<=p*p?h:f}function c(u,h,f){f.width=t.readUint(u,h),h+=4,f.height=t.readUint(u,h),h+=4,f.depth=u[h],h++,f.ctype=u[h],h++,f.compress=u[h],h++,f.filter=u[h],h++,f.interlace=u[h],h++}function d(u,h,f,g,x,m,p,b,v){const y=Math.min(h,x),w=Math.min(f,m);let k=0,j=0;for(let F=0;F<w;F++)for(let D=0;D<y;D++)if(p>=0&&b>=0?(k=F*h+D<<2,j=(b+F)*x+p+D<<2):(k=(-b+F)*h-p+D<<2,j=F*x+D<<2),v==0)g[j]=u[k],g[j+1]=u[k+1],g[j+2]=u[k+2],g[j+3]=u[k+3];else if(v==1){var _=u[k+3]*.00392156862745098,S=u[k]*_,A=u[k+1]*_,T=u[k+2]*_,E=g[j+3]*(1/255),C=g[j]*E,z=g[j+1]*E,M=g[j+2]*E;const L=1-_,K=_+E*L,$=K==0?0:1/K;g[j+3]=255*K,g[j+0]=(S+C*L)*$,g[j+1]=(A+z*L)*$,g[j+2]=(T+M*L)*$}else if(v==2)_=u[k+3],S=u[k],A=u[k+1],T=u[k+2],E=g[j+3],C=g[j],z=g[j+1],M=g[j+2],_==E&&S==C&&A==z&&T==M?(g[j]=0,g[j+1]=0,g[j+2]=0,g[j+3]=0):(g[j]=S,g[j+1]=A,g[j+2]=T,g[j+3]=_);else if(v==3){if(_=u[k+3],S=u[k],A=u[k+1],T=u[k+2],E=g[j+3],C=g[j],z=g[j+1],M=g[j+2],_==E&&S==C&&A==z&&T==M)continue;if(_<220&&E>20)return!1}return!0}return{decode:function(h){const f=new Uint8Array(h);let g=8;const x=t,m=x.readUshort,p=x.readUint,b={tabs:{},frames:[]},v=new Uint8Array(f.length);let y,w=0,k=0;const j=[137,80,78,71,13,10,26,10];for(var _=0;_<8;_++)if(f[_]!=j[_])throw"The input is not a PNG file!";for(;g<f.length;){const F=x.readUint(f,g);g+=4;const D=x.readASCII(f,g,4);if(g+=4,D=="IHDR")c(f,g,b);else if(D=="iCCP"){for(var S=g;f[S]!=0;)S++;x.readASCII(f,g,S-g),f[S+1];const L=f.slice(S+2,g+F);let K=null;try{K=n(L)}catch{K=s(L)}b.tabs[D]=K}else if(D=="CgBI")b.tabs[D]=f.slice(g,g+4);else if(D=="IDAT"){for(_=0;_<F;_++)v[w+_]=f[g+_];w+=F}else if(D=="acTL")b.tabs[D]={num_frames:p(f,g),num_plays:p(f,g+4)},y=new Uint8Array(f.length);else if(D=="fcTL"){k!=0&&((M=b.frames[b.frames.length-1]).data=r(b,y.slice(0,k),M.rect.width,M.rect.height),k=0);const L={x:p(f,g+12),y:p(f,g+16),width:p(f,g+4),height:p(f,g+8)};let K=m(f,g+22);K=m(f,g+20)/(K==0?100:K);const $={rect:L,delay:Math.round(1e3*K),dispose:f[g+24],blend:f[g+25]};b.frames.push($)}else if(D=="fdAT"){for(_=0;_<F-4;_++)y[k+_]=f[g+_+4];k+=F-4}else if(D=="pHYs")b.tabs[D]=[x.readUint(f,g),x.readUint(f,g+4),f[g+8]];else if(D=="cHRM")for(b.tabs[D]=[],_=0;_<8;_++)b.tabs[D].push(x.readUint(f,g+4*_));else if(D=="tEXt"||D=="zTXt"){b.tabs[D]==null&&(b.tabs[D]={});var A=x.nextZero(f,g),T=x.readASCII(f,g,A-g),E=g+F-A-1;if(D=="tEXt")z=x.readASCII(f,A+1,E);else{var C=n(f.slice(A+2,A+2+E));z=x.readUTF8(C,0,C.length)}b.tabs[D][T]=z}else if(D=="iTXt"){b.tabs[D]==null&&(b.tabs[D]={}),A=0,S=g,A=x.nextZero(f,S),T=x.readASCII(f,S,A-S);const L=f[S=A+1];var z;f[S+1],S+=2,A=x.nextZero(f,S),x.readASCII(f,S,A-S),S=A+1,A=x.nextZero(f,S),x.readUTF8(f,S,A-S),E=F-((S=A+1)-g),L==0?z=x.readUTF8(f,S,E):(C=n(f.slice(S,S+E)),z=x.readUTF8(C,0,C.length)),b.tabs[D][T]=z}else if(D=="PLTE")b.tabs[D]=x.readBytes(f,g,F);else if(D=="hIST"){const L=b.tabs.PLTE.length/3;for(b.tabs[D]=[],_=0;_<L;_++)b.tabs[D].push(m(f,g+2*_))}else if(D=="tRNS")b.ctype==3?b.tabs[D]=x.readBytes(f,g,F):b.ctype==0?b.tabs[D]=m(f,g):b.ctype==2&&(b.tabs[D]=[m(f,g),m(f,g+2),m(f,g+4)]);else if(D=="gAMA")b.tabs[D]=x.readUint(f,g)/1e5;else if(D=="sRGB")b.tabs[D]=f[g];else if(D=="bKGD")b.ctype==0||b.ctype==4?b.tabs[D]=[m(f,g)]:b.ctype==2||b.ctype==6?b.tabs[D]=[m(f,g),m(f,g+2),m(f,g+4)]:b.ctype==3&&(b.tabs[D]=f[g]);else if(D=="IEND")break;g+=F,x.readUint(f,g),g+=4}var M;return k!=0&&((M=b.frames[b.frames.length-1]).data=r(b,y.slice(0,k),M.rect.width,M.rect.height)),b.data=r(b,v,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(h){const f=h.width,g=h.height;if(h.tabs.acTL==null)return[e(h.data,f,g,h).buffer];const x=[];h.frames[0].data==null&&(h.frames[0].data=h.data);const m=f*g*4,p=new Uint8Array(m),b=new Uint8Array(m),v=new Uint8Array(m);for(let w=0;w<h.frames.length;w++){const k=h.frames[w],j=k.rect.x,_=k.rect.y,S=k.rect.width,A=k.rect.height,T=e(k.data,S,A,h);if(w!=0)for(var y=0;y<m;y++)v[y]=p[y];if(k.blend==0?d(T,S,A,p,f,g,j,_,0):k.blend==1&&d(T,S,A,p,f,g,j,_,1),x.push(p.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)d(b,S,A,p,f,g,j,_,0);else if(k.dispose==2)for(y=0;y<m;y++)p[y]=v[y]}}return x},_paeth:l,_copyTile:d,_bin:t}}();(function(){const{_copyTile:t}=Oi,{_bin:e}=Oi,r=Oi._paeth;var n={table:function(){const S=new Uint32Array(256);for(let A=0;A<256;A++){let T=A;for(let E=0;E<8;E++)1&T?T=3988292384^T>>>1:T>>>=1;S[A]=T}return S}(),update(S,A,T,E){for(let C=0;C<E;C++)S=n.table[255&(S^A[T+C])]^S>>>8;return S},crc:(S,A,T)=>4294967295^n.update(4294967295,S,A,T)};function s(S,A,T,E){A[T]+=S[0]*E>>4,A[T+1]+=S[1]*E>>4,A[T+2]+=S[2]*E>>4,A[T+3]+=S[3]*E>>4}function i(S){return Math.max(0,Math.min(255,S))}function o(S,A){const T=S[0]-A[0],E=S[1]-A[1],C=S[2]-A[2],z=S[3]-A[3];return T*T+E*E+C*C+z*z}function l(S,A,T,E,C,z,M){M==null&&(M=1);const F=E.length,D=[];for(var L=0;L<F;L++){const V=E[L];D.push([V>>>0&255,V>>>8&255,V>>>16&255,V>>>24&255])}for(L=0;L<F;L++){let V=4294967295;for(var K=0,$=0;$<F;$++){var R=o(D[L],D[$]);$!=L&&R<V&&(V=R,K=$)}}const Y=new Uint32Array(C.buffer),ee=new Int16Array(A*T*4),B=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(L=0;L<B.length;L++)B[L]=255*((B[L]+.5)/16-.5);for(let V=0;V<T;V++)for(let se=0;se<A;se++){var U;L=4*(V*A+se),M!=2?U=[i(S[L]+ee[L]),i(S[L+1]+ee[L+1]),i(S[L+2]+ee[L+2]),i(S[L+3]+ee[L+3])]:(R=B[4*(3&V)+(3&se)],U=[i(S[L]+R),i(S[L+1]+R),i(S[L+2]+R),i(S[L+3]+R)]),K=0;let Ne=16777215;for($=0;$<F;$++){const H=o(U,D[$]);H<Ne&&(Ne=H,K=$)}const ie=D[K],q=[U[0]-ie[0],U[1]-ie[1],U[2]-ie[2],U[3]-ie[3]];M==1&&(se!=A-1&&s(q,ee,L+4,7),V!=T-1&&(se!=0&&s(q,ee,L+4*A-4,3),s(q,ee,L+4*A,5),se!=A-1&&s(q,ee,L+4*A+4,1))),z[L>>2]=K,Y[L>>2]=E[K]}}function c(S,A,T,E,C){C==null&&(C={});const{crc:z}=n,M=e.writeUint,F=e.writeUshort,D=e.writeASCII;let L=8;const K=S.frames.length>1;let $,R=!1,Y=33+(K?20:0);if(C.sRGB!=null&&(Y+=13),C.pHYs!=null&&(Y+=21),C.iCCP!=null&&($=pako.deflate(C.iCCP),Y+=21+$.length+4),S.ctype==3){for(var ee=S.plte.length,B=0;B<ee;B++)S.plte[B]>>>24!=255&&(R=!0);Y+=8+3*ee+4+(R?8+1*ee+4:0)}for(var U=0;U<S.frames.length;U++)K&&(Y+=38),Y+=(ie=S.frames[U]).cimg.length+12,U!=0&&(Y+=4);Y+=12;const V=new Uint8Array(Y),se=[137,80,78,71,13,10,26,10];for(B=0;B<8;B++)V[B]=se[B];if(M(V,L,13),L+=4,D(V,L,"IHDR"),L+=4,M(V,L,A),L+=4,M(V,L,T),L+=4,V[L]=S.depth,L++,V[L]=S.ctype,L++,V[L]=0,L++,V[L]=0,L++,V[L]=0,L++,M(V,L,z(V,L-17,17)),L+=4,C.sRGB!=null&&(M(V,L,1),L+=4,D(V,L,"sRGB"),L+=4,V[L]=C.sRGB,L++,M(V,L,z(V,L-5,5)),L+=4),C.iCCP!=null){const q=13+$.length;M(V,L,q),L+=4,D(V,L,"iCCP"),L+=4,D(V,L,"ICC profile"),L+=11,L+=2,V.set($,L),L+=$.length,M(V,L,z(V,L-(q+4),q+4)),L+=4}if(C.pHYs!=null&&(M(V,L,9),L+=4,D(V,L,"pHYs"),L+=4,M(V,L,C.pHYs[0]),L+=4,M(V,L,C.pHYs[1]),L+=4,V[L]=C.pHYs[2],L++,M(V,L,z(V,L-13,13)),L+=4),K&&(M(V,L,8),L+=4,D(V,L,"acTL"),L+=4,M(V,L,S.frames.length),L+=4,M(V,L,C.loop!=null?C.loop:0),L+=4,M(V,L,z(V,L-12,12)),L+=4),S.ctype==3){for(M(V,L,3*(ee=S.plte.length)),L+=4,D(V,L,"PLTE"),L+=4,B=0;B<ee;B++){const q=3*B,H=S.plte[B],Z=255&H,te=H>>>8&255,ge=H>>>16&255;V[L+q+0]=Z,V[L+q+1]=te,V[L+q+2]=ge}if(L+=3*ee,M(V,L,z(V,L-3*ee-4,3*ee+4)),L+=4,R){for(M(V,L,ee),L+=4,D(V,L,"tRNS"),L+=4,B=0;B<ee;B++)V[L+B]=S.plte[B]>>>24&255;L+=ee,M(V,L,z(V,L-ee-4,ee+4)),L+=4}}let Ne=0;for(U=0;U<S.frames.length;U++){var ie=S.frames[U];K&&(M(V,L,26),L+=4,D(V,L,"fcTL"),L+=4,M(V,L,Ne++),L+=4,M(V,L,ie.rect.width),L+=4,M(V,L,ie.rect.height),L+=4,M(V,L,ie.rect.x),L+=4,M(V,L,ie.rect.y),L+=4,F(V,L,E[U]),L+=2,F(V,L,1e3),L+=2,V[L]=ie.dispose,L++,V[L]=ie.blend,L++,M(V,L,z(V,L-30,30)),L+=4);const q=ie.cimg;M(V,L,(ee=q.length)+(U==0?0:4)),L+=4;const H=L;D(V,L,U==0?"IDAT":"fdAT"),L+=4,U!=0&&(M(V,L,Ne++),L+=4),V.set(q,L),L+=ee,M(V,L,z(V,H,L-H)),L+=4}return M(V,L,0),L+=4,D(V,L,"IEND"),L+=4,M(V,L,z(V,L-4,4)),L+=4,V.buffer}function d(S,A,T){for(let E=0;E<S.frames.length;E++){const C=S.frames[E];C.rect.width;const z=C.rect.height,M=new Uint8Array(z*C.bpl+z);C.cimg=g(C.img,z,C.bpp,C.bpl,M,A,T)}}function u(S,A,T,E,C){const z=C[0],M=C[1],F=C[2],D=C[3],L=C[4],K=C[5];let $=6,R=8,Y=255;for(var ee=0;ee<S.length;ee++){const He=new Uint8Array(S[ee]);for(var B=He.length,U=0;U<B;U+=4)Y&=He[U+3]}const V=Y!=255,se=function(le,Re,Ze,lt,rt,ne){const pe=[];for(var Ue=0;Ue<le.length;Ue++){const Qe=new Uint8Array(le[Ue]),Lt=new Uint32Array(Qe.buffer);var kt;let wt=0,Nt=0,he=Re,Xe=Ze,W=lt?1:0;if(Ue!=0){const we=ne||lt||Ue==1||pe[Ue-2].dispose!=0?1:2;let ve=0,Te=1e9;for(let oe=0;oe<we;oe++){var Se=new Uint8Array(le[Ue-1-oe]);const Ee=new Uint32Array(le[Ue-1-oe]);let G=Re,Oe=Ze,it=-1,I=-1;for(let ke=0;ke<Ze;ke++)for(let X=0;X<Re;X++)Lt[$e=ke*Re+X]!=Ee[$e]&&(X<G&&(G=X),X>it&&(it=X),ke<Oe&&(Oe=ke),ke>I&&(I=ke));it==-1&&(G=Oe=it=I=0),rt&&((1&G)==1&&G--,(1&Oe)==1&&Oe--);const je=(it-G+1)*(I-Oe+1);je<Te&&(Te=je,ve=oe,wt=G,Nt=Oe,he=it-G+1,Xe=I-Oe+1)}Se=new Uint8Array(le[Ue-1-ve]),ve==1&&(pe[Ue-1].dispose=2),kt=new Uint8Array(he*Xe*4),t(Se,Re,Ze,kt,he,Xe,-wt,-Nt,0),W=t(Qe,Re,Ze,kt,he,Xe,-wt,-Nt,3)?1:0,W==1?f(Qe,Re,Ze,kt,{x:wt,y:Nt,width:he,height:Xe}):t(Qe,Re,Ze,kt,he,Xe,-wt,-Nt,0)}else kt=Qe.slice(0);pe.push({rect:{x:wt,y:Nt,width:he,height:Xe},img:kt,blend:W,dispose:0})}if(lt)for(Ue=0;Ue<pe.length;Ue++){if((Ge=pe[Ue]).blend==1)continue;const Qe=Ge.rect,Lt=pe[Ue-1].rect,wt=Math.min(Qe.x,Lt.x),Nt=Math.min(Qe.y,Lt.y),he={x:wt,y:Nt,width:Math.max(Qe.x+Qe.width,Lt.x+Lt.width)-wt,height:Math.max(Qe.y+Qe.height,Lt.y+Lt.height)-Nt};pe[Ue-1].dispose=1,Ue-1!=0&&h(le,Re,Ze,pe,Ue-1,he,rt),h(le,Re,Ze,pe,Ue,he,rt)}let me=0;if(le.length!=1)for(var $e=0;$e<pe.length;$e++){var Ge;me+=(Ge=pe[$e]).rect.width*Ge.rect.height}return pe}(S,A,T,z,M,F),Ne={},ie=[],q=[];if(E!=0){const He=[];for(U=0;U<se.length;U++)He.push(se[U].img.buffer);const le=function(rt){let ne=0;for(var pe=0;pe<rt.length;pe++)ne+=rt[pe].byteLength;const Ue=new Uint8Array(ne);let kt=0;for(pe=0;pe<rt.length;pe++){const Se=new Uint8Array(rt[pe]),me=Se.length;for(let $e=0;$e<me;$e+=4){let Ge=Se[$e],Qe=Se[$e+1],Lt=Se[$e+2];const wt=Se[$e+3];wt==0&&(Ge=Qe=Lt=0),Ue[kt+$e]=Ge,Ue[kt+$e+1]=Qe,Ue[kt+$e+2]=Lt,Ue[kt+$e+3]=wt}kt+=me}return Ue.buffer}(He),Re=m(le,E);for(U=0;U<Re.plte.length;U++)ie.push(Re.plte[U].est.rgba);let Ze=0;for(U=0;U<se.length;U++){const lt=(Z=se[U]).img.length;var H=new Uint8Array(Re.inds.buffer,Ze>>2,lt>>2);q.push(H);const rt=new Uint8Array(Re.abuf,Ze,lt);K&&l(Z.img,Z.rect.width,Z.rect.height,ie,rt,H),Z.img.set(rt),Ze+=lt}}else for(ee=0;ee<se.length;ee++){var Z=se[ee];const He=new Uint32Array(Z.img.buffer);var te=Z.rect.width;for(B=He.length,H=new Uint8Array(B),q.push(H),U=0;U<B;U++){const le=He[U];if(U!=0&&le==He[U-1])H[U]=H[U-1];else if(U>te&&le==He[U-te])H[U]=H[U-te];else{let Re=Ne[le];if(Re==null&&(Ne[le]=Re=ie.length,ie.push(le),ie.length>=300))break;H[U]=Re}}}const ge=ie.length;for(ge<=256&&L==0&&(R=ge<=2?1:ge<=4?2:ge<=16?4:8,R=Math.max(R,D)),ee=0;ee<se.length;ee++){(Z=se[ee]).rect.x,Z.rect.y,te=Z.rect.width;const He=Z.rect.height;let le=Z.img;new Uint32Array(le.buffer);let Re=4*te,Ze=4;if(ge<=256&&L==0){Re=Math.ceil(R*te/8);var Ce=new Uint8Array(Re*He);const lt=q[ee];for(let rt=0;rt<He;rt++){U=rt*Re;const ne=rt*te;if(R==8)for(var Le=0;Le<te;Le++)Ce[U+Le]=lt[ne+Le];else if(R==4)for(Le=0;Le<te;Le++)Ce[U+(Le>>1)]|=lt[ne+Le]<<4-4*(1&Le);else if(R==2)for(Le=0;Le<te;Le++)Ce[U+(Le>>2)]|=lt[ne+Le]<<6-2*(3&Le);else if(R==1)for(Le=0;Le<te;Le++)Ce[U+(Le>>3)]|=lt[ne+Le]<<7-1*(7&Le)}le=Ce,$=3,Ze=1}else if(V==0&&se.length==1){Ce=new Uint8Array(te*He*3);const lt=te*He;for(U=0;U<lt;U++){const rt=3*U,ne=4*U;Ce[rt]=le[ne],Ce[rt+1]=le[ne+1],Ce[rt+2]=le[ne+2]}le=Ce,$=2,Ze=3,Re=3*te}Z.img=le,Z.bpl=Re,Z.bpp=Ze}return{ctype:$,depth:R,plte:ie,frames:se}}function h(S,A,T,E,C,z,M){const F=Uint8Array,D=Uint32Array,L=new F(S[C-1]),K=new D(S[C-1]),$=C+1<S.length?new F(S[C+1]):null,R=new F(S[C]),Y=new D(R.buffer);let ee=A,B=T,U=-1,V=-1;for(let Ne=0;Ne<z.height;Ne++)for(let ie=0;ie<z.width;ie++){const q=z.x+ie,H=z.y+Ne,Z=H*A+q,te=Y[Z];te==0||E[C-1].dispose==0&&K[Z]==te&&($==null||$[4*Z+3]!=0)||(q<ee&&(ee=q),q>U&&(U=q),H<B&&(B=H),H>V&&(V=H))}U==-1&&(ee=B=U=V=0),M&&((1&ee)==1&&ee--,(1&B)==1&&B--),z={x:ee,y:B,width:U-ee+1,height:V-B+1};const se=E[C];se.rect=z,se.blend=1,se.img=new Uint8Array(z.width*z.height*4),E[C-1].dispose==0?(t(L,A,T,se.img,z.width,z.height,-z.x,-z.y,0),f(R,A,T,se.img,z)):t(R,A,T,se.img,z.width,z.height,-z.x,-z.y,0)}function f(S,A,T,E,C){t(S,A,T,E,C.width,C.height,-C.x,-C.y,2)}function g(S,A,T,E,C,z,M){const F=[];let D,L=[0,1,2,3,4];z!=-1?L=[z]:(A*E>5e5||T==1)&&(L=[0]),M&&(D={level:0});const K=lot;for(var $=0;$<L.length;$++){for(let ee=0;ee<A;ee++)x(C,S,ee,E,T,L[$]);F.push(K.deflate(C,D))}let R,Y=1e9;for($=0;$<F.length;$++)F[$].length<Y&&(R=$,Y=F[$].length);return F[R]}function x(S,A,T,E,C,z){const M=T*E;let F=M+T;if(S[F]=z,F++,z==0)if(E<500)for(var D=0;D<E;D++)S[F+D]=A[M+D];else S.set(new Uint8Array(A.buffer,M,E),F);else if(z==1){for(D=0;D<C;D++)S[F+D]=A[M+D];for(D=C;D<E;D++)S[F+D]=A[M+D]-A[M+D-C]+256&255}else if(T==0){for(D=0;D<C;D++)S[F+D]=A[M+D];if(z==2)for(D=C;D<E;D++)S[F+D]=A[M+D];if(z==3)for(D=C;D<E;D++)S[F+D]=A[M+D]-(A[M+D-C]>>1)+256&255;if(z==4)for(D=C;D<E;D++)S[F+D]=A[M+D]-r(A[M+D-C],0,0)+256&255}else{if(z==2)for(D=0;D<E;D++)S[F+D]=A[M+D]+256-A[M+D-E]&255;if(z==3){for(D=0;D<C;D++)S[F+D]=A[M+D]+256-(A[M+D-E]>>1)&255;for(D=C;D<E;D++)S[F+D]=A[M+D]+256-(A[M+D-E]+A[M+D-C]>>1)&255}if(z==4){for(D=0;D<C;D++)S[F+D]=A[M+D]+256-r(0,A[M+D-E],0)&255;for(D=C;D<E;D++)S[F+D]=A[M+D]+256-r(A[M+D-C],A[M+D-E],A[M+D-C-E])&255}}}function m(S,A){const T=new Uint8Array(S),E=T.slice(0),C=new Uint32Array(E.buffer),z=p(E,A),M=z[0],F=z[1],D=T.length,L=new Uint8Array(D>>2);let K;if(T.length<2e7)for(var $=0;$<D;$+=4)K=b(M,R=T[$]*(1/255),Y=T[$+1]*(1/255),ee=T[$+2]*(1/255),B=T[$+3]*(1/255)),L[$>>2]=K.ind,C[$>>2]=K.est.rgba;else for($=0;$<D;$+=4){var R=T[$]*.00392156862745098,Y=T[$+1]*(1/255),ee=T[$+2]*(1/255),B=T[$+3]*(1/255);for(K=M;K.left;)K=v(K.est,R,Y,ee,B)<=0?K.left:K.right;L[$>>2]=K.ind,C[$>>2]=K.est.rgba}return{abuf:E.buffer,inds:L,plte:F}}function p(S,A,T){T==null&&(T=1e-4);const E=new Uint32Array(S.buffer),C={i0:0,i1:S.length,bst:null,est:null,tdst:0,left:null,right:null};C.bst=k(S,C.i0,C.i1),C.est=j(C.bst);const z=[C];for(;z.length<A;){let F=0,D=0;for(var M=0;M<z.length;M++)z[M].est.L>F&&(F=z[M].est.L,D=M);if(F<T)break;const L=z[D],K=y(S,E,L.i0,L.i1,L.est.e,L.est.eMq255);if(L.i0>=K||L.i1<=K){L.est.L=0;continue}const $={i0:L.i0,i1:K,bst:null,est:null,tdst:0,left:null,right:null};$.bst=k(S,$.i0,$.i1),$.est=j($.bst);const R={i0:K,i1:L.i1,bst:null,est:null,tdst:0,left:null,right:null};for(R.bst={R:[],m:[],N:L.bst.N-$.bst.N},M=0;M<16;M++)R.bst.R[M]=L.bst.R[M]-$.bst.R[M];for(M=0;M<4;M++)R.bst.m[M]=L.bst.m[M]-$.bst.m[M];R.est=j(R.bst),L.left=$,L.right=R,z[D]=$,z.push(R)}for(z.sort((F,D)=>D.bst.N-F.bst.N),M=0;M<z.length;M++)z[M].ind=M;return[C,z]}function b(S,A,T,E,C){if(S.left==null)return S.tdst=function($,R,Y,ee,B){const U=R-$[0],V=Y-$[1],se=ee-$[2],Ne=B-$[3];return U*U+V*V+se*se+Ne*Ne}(S.est.q,A,T,E,C),S;const z=v(S.est,A,T,E,C);let M=S.left,F=S.right;z>0&&(M=S.right,F=S.left);const D=b(M,A,T,E,C);if(D.tdst<=z*z)return D;const L=b(F,A,T,E,C);return L.tdst<D.tdst?L:D}function v(S,A,T,E,C){const{e:z}=S;return z[0]*A+z[1]*T+z[2]*E+z[3]*C-S.eMq}function y(S,A,T,E,C,z){for(E-=4;T<E;){for(;w(S,T,C)<=z;)T+=4;for(;w(S,E,C)>z;)E-=4;if(T>=E)break;const M=A[T>>2];A[T>>2]=A[E>>2],A[E>>2]=M,T+=4,E-=4}for(;w(S,T,C)>z;)T-=4;return T+4}function w(S,A,T){return S[A]*T[0]+S[A+1]*T[1]+S[A+2]*T[2]+S[A+3]*T[3]}function k(S,A,T){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=[0,0,0,0],z=T-A>>2;for(let M=A;M<T;M+=4){const F=S[M]*.00392156862745098,D=S[M+1]*(1/255),L=S[M+2]*(1/255),K=S[M+3]*(1/255);C[0]+=F,C[1]+=D,C[2]+=L,C[3]+=K,E[0]+=F*F,E[1]+=F*D,E[2]+=F*L,E[3]+=F*K,E[5]+=D*D,E[6]+=D*L,E[7]+=D*K,E[10]+=L*L,E[11]+=L*K,E[15]+=K*K}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:C,N:z}}function j(S){const{R:A}=S,{m:T}=S,{N:E}=S,C=T[0],z=T[1],M=T[2],F=T[3],D=E==0?0:1/E,L=[A[0]-C*C*D,A[1]-C*z*D,A[2]-C*M*D,A[3]-C*F*D,A[4]-z*C*D,A[5]-z*z*D,A[6]-z*M*D,A[7]-z*F*D,A[8]-M*C*D,A[9]-M*z*D,A[10]-M*M*D,A[11]-M*F*D,A[12]-F*C*D,A[13]-F*z*D,A[14]-F*M*D,A[15]-F*F*D],K=L,$=_;let R=[Math.random(),Math.random(),Math.random(),Math.random()],Y=0,ee=0;if(E!=0)for(let U=0;U<16&&(R=$.multVec(K,R),ee=Math.sqrt($.dot(R,R)),R=$.sml(1/ee,R),!(U!=0&&Math.abs(ee-Y)<1e-9));U++)Y=ee;const B=[C*D,z*D,M*D,F*D];return{Cov:L,q:B,e:R,L:Y,eMq255:$.dot($.sml(255,B),R),eMq:$.dot(R,B),rgba:(Math.round(255*B[3])<<24|Math.round(255*B[2])<<16|Math.round(255*B[1])<<8|Math.round(255*B[0])<<0)>>>0}}var _={multVec:(S,A)=>[S[0]*A[0]+S[1]*A[1]+S[2]*A[2]+S[3]*A[3],S[4]*A[0]+S[5]*A[1]+S[6]*A[2]+S[7]*A[3],S[8]*A[0]+S[9]*A[1]+S[10]*A[2]+S[11]*A[3],S[12]*A[0]+S[13]*A[1]+S[14]*A[2]+S[15]*A[3]],dot:(S,A)=>S[0]*A[0]+S[1]*A[1]+S[2]*A[2]+S[3]*A[3],sml:(S,A)=>[S*A[0],S*A[1],S*A[2],S*A[3]]};Oi.encode=function(A,T,E,C,z,M,F){C==null&&(C=0),F==null&&(F=!1);const D=u(A,T,E,C,[!1,!1,!1,0,F,!1]);return d(D,-1),c(D,T,E,z,M)},Oi.encodeLL=function(A,T,E,C,z,M,F,D){const L={ctype:0+(C==1?0:2)+(z==0?0:4),depth:M,frames:[]},K=(C+z)*M,$=K*T;for(let R=0;R<A.length;R++)L.frames.push({rect:{x:0,y:0,width:T,height:E},img:new Uint8Array(A[R]),blend:0,dispose:1,bpp:Math.ceil(K/8),bpl:Math.ceil($/8)});return d(L,0,!0),c(L,T,E,F,D)},Oi.encode.compress=u,Oi.encode.dither=l,Oi.quantize=m,Oi.quantize.getKDtree=p,Oi.quantize.getNearest=b})();const GJ={toArrayBuffer(t,e){const r=t.width,n=t.height,s=r<<2,i=t.getContext("2d").getImageData(0,0,r,n),o=new Uint32Array(i.data.buffer),l=(32*r+31)/32<<2,c=l*n,d=122+c,u=new ArrayBuffer(d),h=new DataView(u),f=1<<20;let g,x,m,p,b=f,v=0,y=0,w=0;function k(S){h.setUint16(y,S,!0),y+=2}function j(S){h.setUint32(y,S,!0),y+=4}function _(S){y+=S}k(19778),j(d),_(4),j(122),j(108),j(r),j(-n>>>0),k(1),k(32),j(3),j(c),j(2835),j(2835),_(8),j(16711680),j(65280),j(255),j(4278190080),j(1466527264),function S(){for(;v<n&&b>0;){for(p=122+v*l,g=0;g<s;)b--,x=o[w++],m=x>>>24,h.setUint32(p+g,x<<8|m),g+=4;v++}w<o.length?(b=f,setTimeout(S,GJ._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,r=>{e(new Blob([r],{type:"image/bmp"}))})},_dly:9};var os={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},cot={[os.CHROME]:16384,[os.FIREFOX]:11180,[os.DESKTOP_SAFARI]:16384,[os.IE]:8192,[os.IOS]:4096,[os.ETC]:8192};const RI=typeof window<"u",qJ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,j2=RI&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),dot=(RI||qJ)&&(j2&&j2.getOriginalSymbol(window,"File")||typeof File<"u"&&File),VJ=(RI||qJ)&&(j2&&j2.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function PI(t,e,r=Date.now()){return new Promise(n=>{const s=t.split(","),i=s[0].match(/:(.*?);/)[1],o=globalThis.atob(s[1]);let l=o.length;const c=new Uint8Array(l);for(;l--;)c[l]=o.charCodeAt(l);const d=new Blob([c],{type:i});d.name=e,d.lastModified=r,n(d)})}function HJ(t){return new Promise((e,r)=>{const n=new VJ;n.onload=()=>e(n.result),n.onerror=s=>r(s),n.readAsDataURL(t)})}function WJ(t){return new Promise((e,r)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>r(s),n.src=t})}function Nu(){if(Nu.cachedResult!==void 0)return Nu.cachedResult;let t=os.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=os.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=os.IOS:/Safari/i.test(e)?t=os.DESKTOP_SAFARI:/Firefox/i.test(e)?t=os.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=os.IE),Nu.cachedResult=t,Nu.cachedResult}function XJ(t,e){const r=Nu(),n=cot[r];let s=t,i=e,o=s*i;const l=s>i?i/s:s/i;for(;o>n*n;){const c=(n+s)/2,d=(n+i)/2;c<d?(i=d,s=d*l):(i=c*l,s=c),o=s*i}return{width:s,height:i}}function Bj(t,e){let r,n;try{if(r=new OffscreenCanvas(t,e),n=r.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),n=r.getContext("2d")}return r.width=t,r.height=e,[r,n]}function YJ(t,e){const{width:r,height:n}=XJ(t.width,t.height),[s,i]=Bj(r,n);return e&&/jpe?g/.test(e)&&(i.fillStyle="white",i.fillRect(0,0,s.width,s.height)),i.drawImage(t,0,0,s.width,s.height),s}function Zv(){return Zv.cachedResult!==void 0||(Zv.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Zv.cachedResult}function N2(t,e={}){return new Promise(function(r,n){let s,i;var o=function(){try{return i=YJ(s,e.fileType||t.type),r([s,i])}catch(c){return n(c)}},l=function(c){try{var d=function(u){try{throw u}catch(h){return n(h)}};try{let u;return HJ(t).then(function(h){try{return u=h,WJ(u).then(function(f){try{return s=f,function(){try{return o()}catch(g){return n(g)}}()}catch(g){return d(g)}},d)}catch(f){return d(f)}},d)}catch(u){d(u)}}catch(u){return n(u)}};try{if(Zv()||[os.DESKTOP_SAFARI,os.MOBILE_SAFARI].includes(Nu()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(c){try{return s=c,o()}catch{return l()}},l)}catch{l()}})}function _2(t,e,r,n,s=1){return new Promise(function(i,o){let l;if(e==="image/png"){let h,f,g;return h=t.getContext("2d"),{data:f}=h.getImageData(0,0,t.width,t.height),g=Oi.encode([f.buffer],t.width,t.height,4096*s),l=new Blob([g],{type:e}),l.name=r,l.lastModified=n,c.call(this)}{let h=function(){return c.call(this)};var d=h;if(e==="image/bmp")return new Promise(f=>GJ.toBlob(t,f)).then((function(f){try{return l=f,l.name=r,l.lastModified=n,h.call(this)}catch(g){return o(g)}}).bind(this),o);{let f=function(){return h.call(this)};var u=f;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:s}).then((function(g){try{return l=g,l.name=r,l.lastModified=n,f.call(this)}catch(x){return o(x)}}).bind(this),o);{let g;return g=t.toDataURL(e,s),PI(g,r,n).then((function(x){try{return l=x,f.call(this)}catch(m){return o(m)}}).bind(this),o)}}}function c(){return i(l)}})}function ko(t){t.width=0,t.height=0}function Mf(){return new Promise(function(t,e){let r,n,s,i;return Mf.cachedResult!==void 0?t(Mf.cachedResult):PI("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return r=o,N2(r).then(function(l){try{return n=l[1],_2(n,r.type,r.name,r.lastModified).then(function(c){try{return s=c,ko(n),N2(s).then(function(d){try{return i=d[0],Mf.cachedResult=i.width===1&&i.height===2,t(Mf.cachedResult)}catch(u){return e(u)}},e)}catch(d){return e(d)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)})}function ZJ(t){return new Promise((e,r)=>{const n=new VJ;n.onload=s=>{const i=new DataView(s.target.result);if(i.getUint16(0,!1)!=65496)return e(-2);const o=i.byteLength;let l=2;for(;l<o;){if(i.getUint16(l+2,!1)<=8)return e(-1);const c=i.getUint16(l,!1);if(l+=2,c==65505){if(i.getUint32(l+=2,!1)!=1165519206)return e(-1);const d=i.getUint16(l+=6,!1)==18761;l+=i.getUint32(l+4,d);const u=i.getUint16(l,d);l+=2;for(let h=0;h<u;h++)if(i.getUint16(l+12*h,d)==274)return e(i.getUint16(l+12*h+8,d))}else{if((65280&c)!=65280)break;l+=i.getUint16(l,!1)}}return e(-1)},n.onerror=s=>r(s),n.readAsArrayBuffer(t)})}function QJ(t,e){const{width:r}=t,{height:n}=t,{maxWidthOrHeight:s}=e;let i,o=t;return isFinite(s)&&(r>s||n>s)&&([o,i]=Bj(r,n),r>n?(o.width=s,o.height=n/r*s):(o.width=r/n*s,o.height=s),i.drawImage(t,0,0,o.width,o.height),ko(t)),o}function JJ(t,e){const{width:r}=t,{height:n}=t,[s,i]=Bj(r,n);switch(e>4&&e<9?(s.width=n,s.height=r):(s.width=r,s.height=n),e){case 2:i.transform(-1,0,0,1,r,0);break;case 3:i.transform(-1,0,0,-1,r,n);break;case 4:i.transform(1,0,0,-1,0,n);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,n,0);break;case 7:i.transform(0,-1,-1,0,n,r);break;case 8:i.transform(0,-1,1,0,0,r)}return i.drawImage(t,0,0,r,n),ko(t),s}function NF(t,e,r=0){return new Promise(function(n,s){let i,o,l,c,d,u,h,f,g,x,m,p,b,v,y,w,k,j,_,S;function A(E=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;i+=E,e.onProgress(Math.min(i,100))}function T(E){if(e.signal&&e.signal.aborted)throw e.signal.reason;i=Math.min(Math.max(E,i),100),e.onProgress(i)}return i=r,o=e.maxIteration||10,l=1024*e.maxSizeMB*1024,A(),N2(t,e).then((function(E){try{return[,c]=E,A(),d=QJ(c,e),A(),new Promise(function(C,z){var M;if(!(M=e.exifOrientation))return ZJ(t).then((function(D){try{return M=D,F.call(this)}catch(L){return z(L)}}).bind(this),z);function F(){return C(M)}return F.call(this)}).then((function(C){try{return u=C,A(),Mf().then((function(z){try{return h=z?d:JJ(d,u),A(),f=e.initialQuality||1,g=e.fileType||t.type,_2(h,g,t.name,t.lastModified,f).then((function(M){try{{let K=function(){if(o--&&(y>l||y>b)){let R,Y;return R=S?.95*_.width:_.width,Y=S?.95*_.height:_.height,[k,j]=Bj(R,Y),j.drawImage(_,0,0,R,Y),f*=g==="image/png"?.85:.95,_2(k,g,t.name,t.lastModified,f).then(function(ee){try{return w=ee,ko(_),_=k,y=w.size,T(Math.min(99,Math.floor((v-y)/(v-l)*100))),K}catch(B){return s(B)}},s)}return[1]},$=function(){return ko(_),ko(k),ko(d),ko(h),ko(c),T(100),n(w)};var D=K,L=$;if(x=M,A(),m=x.size>l,p=x.size>t.size,!m&&!p)return T(100),n(x);var F;return b=t.size,v=x.size,y=v,_=h,S=!e.alwaysKeepResolution&&m,(F=(function(R){for(;R;){if(R.then)return void R.then(F,s);try{if(R.pop){if(R.length)return R.pop()?$.call(this):R;R=K}else R=R.call(this)}catch(Y){return s(Y)}}}).bind(this))(K)}}catch(K){return s(K)}}).bind(this),s)}catch(M){return s(M)}}).bind(this),s)}catch(z){return s(z)}}).bind(this),s)}catch(C){return s(C)}}).bind(this),s)})}const uot=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let CS;function hot(t,e){return new Promise((r,n)=>{CS||(CS=function(o){const l=[];return l.push(o),URL.createObjectURL(new Blob(l))}(uot));const s=new Worker(CS);s.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)s.terminate();else if(o.data.progress===void 0){if(o.data.error)return n(new Error(o.data.error)),void s.terminate();r(o.data.file),s.terminate()}else e.onProgress(o.data.progress)}),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",()=>{n(e.signal.reason),s.terminate()}),s.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Sa(t,e){return new Promise(function(r,n){let s,i,o,l,c,d;if(s={...e},o=0,{onProgress:l}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=g=>{o=g,typeof l=="function"&&l(o)},!(t instanceof Blob||t instanceof dot))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return n(new Error("The file given is not an image"));if(d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||d)return NF(t,s).then((function(g){try{return i=g,f.call(this)}catch(x){return n(x)}}).bind(this),n);var u=(function(){try{return f.call(this)}catch(g){return n(g)}}).bind(this),h=function(g){try{return NF(t,s).then(function(x){try{return i=x,u()}catch(m){return n(m)}},n)}catch(x){return n(x)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",hot(t,s).then(function(g){try{return i=g,u()}catch{return h()}},h)}catch{h()}function f(){try{i.name=t.name,i.lastModified=t.lastModified}catch{}try{s.preserveExif&&t.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===t.type)&&(i=KJ(t,i))}catch{}return r(i)}})}Sa.getDataUrlFromFile=HJ,Sa.getFilefromDataUrl=PI,Sa.loadImage=WJ,Sa.drawImageInCanvas=YJ,Sa.drawFileInCanvas=N2,Sa.canvasToFile=_2,Sa.getExifOrientation=ZJ,Sa.handleMaxWidthOrHeight=QJ,Sa.followExifOrientation=JJ,Sa.cleanupCanvasMemory=ko,Sa.isAutoOrientationInBrowser=Mf,Sa.approximateBelowMaximumCanvasSizeOfBrowser=XJ,Sa.copyExifWithoutOrientation=KJ,Sa.getBrowserName=Nu,Sa.version="2.0.2";const fot=t=>new Promise((e,r)=>{const n=new Image;n.addEventListener("load",()=>e(n)),n.addEventListener("error",s=>r(s)),n.crossOrigin="anonymous",n.src=t});async function got(t,e){const r=await fot(t),n=document.createElement("canvas"),s=n.getContext("2d");return n.width=e.width,n.height=e.height,s.drawImage(r,e.x,e.y,e.width,e.height,0,0,e.width,e.height),new Promise(i=>{n.toBlob(o=>i(o),"image/jpeg",.9)})}const mot=({imageSrc:t,onComplete:e,onCancel:r})=>{const[n,s]=N.useState({x:0,y:0}),[i,o]=N.useState(1),[l,c]=N.useState(null),[d,u]=N.useState(!1),h=N.useCallback((g,x)=>{c(x)},[]),f=async()=>{if(l){u(!0);try{const g=await got(t,l),x=await Sa(new File([g],"avatar.jpg",{type:"image/jpeg"}),{maxSizeMB:.2,maxWidthOrHeight:512,useWebWorker:!0,fileType:"image/jpeg"});e(x)}catch(g){console.error("Crop/compress failed:",g)}finally{u(!1)}}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] rounded-3xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-800",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Beskr profilbild"}),a.jsx("button",{onClick:r,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:a.jsx(Je,{size:20,className:"text-gray-500"})})]}),a.jsx("div",{className:"relative w-full",style:{height:360},children:a.jsx(aot,{image:t,crop:n,zoom:i,aspect:1,cropShape:"round",showGrid:!1,onCropChange:s,onZoomChange:o,onCropComplete:h})}),a.jsxs("div",{className:"flex items-center gap-3 px-6 py-4",children:[a.jsx(yK,{size:18,className:"text-gray-400 shrink-0"}),a.jsx("input",{type:"range",min:1,max:3,step:.05,value:i,onChange:g=>o(Number(g.target.value)),className:"w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full appearance-none cursor-pointer accent-indigo-600"}),a.jsx(bK,{size:18,className:"text-gray-400 shrink-0"})]}),a.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-100 dark:border-gray-800",children:[a.jsx("button",{onClick:r,className:"px-5 py-2.5 rounded-xl font-semibold text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"Avbryt"}),a.jsx("button",{onClick:f,disabled:d,className:"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-indigo-400 text-white rounded-xl font-bold transition-colors flex items-center gap-2",children:d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Bearbetar..."]}):"Spara"})]})]})})},pot=({currentUser:t})=>{const{t:e}=nt(),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const h=await O.get("/gamification/achievements");let f=[];try{f=await O.get("/gamification/achievements/my")}catch(g){console.warn("Could not fetch user achievements",g)}n(h||[]),i(f||[])}catch(h){console.error("Failed to load achievements",h)}finally{l(!1)}})()},[t]);const c=u=>{const h={"":a.jsx(ya,{size:24}),"":a.jsx(gt,{size:24}),"":a.jsx(va,{size:24}),"":a.jsx(vt,{size:24}),"":a.jsx(Tt,{size:24}),default:a.jsx(Mr,{size:24})};return u&&u.length<5?a.jsx("span",{className:"text-2xl",children:u}):h[u]||h.default},d=u=>{switch(u){case"COMMON":return"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 border-gray-200 dark:border-gray-700";case"RARE":return"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400 border-blue-200 dark:border-blue-800";case"EPIC":return"bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400 border-purple-200 dark:border-purple-800";case"LEGENDARY":return"bg-amber-50 text-amber-600 dark:bg-amber-900/20 dark:text-amber-400 border-amber-200 dark:border-amber-800";default:return"bg-gray-100 text-gray-600"}};return o?a.jsx("div",{className:"p-8 text-center animate-pulse",children:"Laddar achievements..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[a.jsx(Mr,{className:"text-yellow-500"})," Prestationer"]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[s.filter(u=>u.unlocked).length," / ",r.length," Upplsta"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(u=>{const h=s.find(x=>x.achievementId===u.id),f=h==null?void 0:h.unlocked,g=d(u.tier);return a.jsxs("div",{className:`relative p-4 rounded-xl border-2 transition-all duration-300 ${f?`border-transparent shadow-sm ${g}`:"border-dashed border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-[#131314] opacity-70 grayscale"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("div",{className:`p-3 rounded-full bg-white dark:bg-[#1E1F20] shadow-sm ${f?"":"opacity-50"}`,children:c(u.iconUrl)}),a.jsxs("div",{className:"text-xs font-bold px-2 py-1 rounded bg-white/50 dark:bg-black/20",children:[u.xpReward," XP"]})]}),a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:u.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.description}),!f&&a.jsx("div",{className:"absolute top-4 right-4 text-gray-400",children:a.jsx(Mn,{size:16})}),h&&!f&&h.progress>0&&a.jsx("div",{className:"mt-3 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:a.jsx("div",{className:"bg-indigo-500 h-1.5 rounded-full",style:{width:`${Math.min(100,h.progress)}%`}})})]},u.id)})})]})},xot=({currentUser:t,showMessage:e})=>{const[r,n]=N.useState([]),[s,i]=N.useState("loading"),o=async()=>{try{const d=await O.connections.getRequests();n(d),i("success")}catch(d){console.error(d),i("error")}};N.useEffect(()=>{o()},[]);const l=async d=>{try{await O.connections.accept(d),e("Frfrgan accepterad"),o()}catch(u){console.error(u)}},c=async d=>{try{await O.connections.reject(d),e("Frfrgan avvisad"),o()}catch(u){console.error(u)}};return s==="loading"?a.jsx("div",{className:"p-4 text-center",children:"Laddar..."}):r.length===0?a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Inga vntande frfrgningar."}):a.jsx("div",{className:"space-y-4",children:r.map(d=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-[#131314] rounded-xl border border-gray-100 dark:border-[#3c4043] shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Hu,{user:d.requester,size:"w-12 h-12"}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white",children:[d.requester.firstName," ",d.requester.lastName]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["@",d.requester.username]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l(d.id),className:"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:a.jsx(Gr,{size:20})}),a.jsx("button",{onClick:()=>c(d.id),className:"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:a.jsx(Je,{size:20})})]})]},d.id))})},bot=({currentUser:t,showMessage:e})=>{const[r,n]=N.useState([]),[s,i]=N.useState(""),[o,l]=N.useState([]),[c,d]=N.useState(!1);N.useEffect(()=>{u()},[]);const u=async()=>{try{const m=await O.messages.getContacts();n(m.friends||[])}catch(m){console.error(m)}},h=async m=>{if(m.preventDefault(),!!s.trim()){d(!0);try{const p=await O.users.search(s);l(p.filter(b=>b.id!==t.id))}catch(p){console.error(p)}d(!1)}},f=async m=>{try{await O.connections.request(m),e("Vnfrfrgan skickad"),l(p=>p.map(b=>b.id===m?{...b,requestSent:!0}:b))}catch(p){alert(p.message)}},g=async m=>{if(window.confirm("r du sker p att du vill ta bort den hr vnnen?"))try{await O.connections.remove(m),e("Vn borttagen"),u()}catch(p){alert(p.message)}},x=async m=>{if(window.confirm("r du sker p att du vill blockera den hr anvndaren? De kommer inte kunna kontakta dig."))try{await O.connections.block(m),e("Anvndare blockerad"),u(),l(p=>p.filter(b=>b.id!==m))}catch(p){alert(p.message)}};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] p-6 shadow-sm",children:[a.jsxs("h3",{className:"font-bold text-lg mb-4 dark:text-white flex items-center gap-2",children:[a.jsx(Ji,{size:20})," Hitta vnner"]}),a.jsxs("form",{onSubmit:h,className:"flex gap-2 mb-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{placeholder:"Sk efter namn, anvndarnamn eller e-post...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:s,onChange:m=>i(m.target.value)})]}),a.jsx("button",{type:"button",onClick:h,disabled:c,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-indigo-700 transition-colors disabled:opacity-50",children:c?"Sker...":"Sk"})]}),o.length>0&&a.jsx("div",{className:"space-y-2",children:o.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-[#131314] rounded-lg border border-gray-100 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Hu,{user:m,size:"w-10 h-10",fontSize:"text-sm"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-sm dark:text-white",children:m.fullName}),a.jsxs("div",{className:"text-xs text-gray-500",children:["@",m.username]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[m.requestSent?a.jsx("span",{className:"text-xs text-green-600 font-bold px-3 py-1 bg-green-100 rounded-full",children:"Skickat"}):a.jsx("button",{onClick:()=>f(m.id),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Lgg till vn",children:a.jsx(Ji,{size:18})}),a.jsx("button",{onClick:()=>x(m.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Blockera",children:a.jsx(zD,{size:18})})]})]},m.id))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xl font-bold dark:text-white",children:["Mina Vnner (",r.length,")"]}),r.length===0&&a.jsx("p",{className:"text-gray-500 italic",children:"Du har inga vnner n."}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:r.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] shadow-sm group hover:border-indigo-200 transition-colors",children:[a.jsxs(Nd,{to:`/profile/${m.id}`,className:"flex items-center gap-4 hover:opacity-80 transition-opacity",children:[a.jsx(Hu,{user:m,size:"w-12 h-12"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:m.fullName}),a.jsx("p",{className:"text-sm text-gray-500",children:m.role})]})]}),a.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsxs("button",{onClick:()=>g(m.id),className:"flex items-center gap-2 px-3 py-1.5 text-xs font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:[a.jsx(Gge,{size:14})," Ta bort"]}),a.jsx("button",{onClick:()=>x(m.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Blockera",children:a.jsx(zD,{size:16})})]})]},m.id))})]})]})},yot=({currentUser:t,showMessage:e,refreshUser:r,logout:n})=>{var ie,q,H,Z,te,ge,Ce,Le,He,le,Re,Ze,lt,rt;const{t:s,i18n:i}=nt(),{isModuleActive:o}=oa(),[l,c]=db(),[d,u]=N.useState(l.get("tab")||"details"),[h,f]=N.useState(!1),[g,x]=N.useState({firstName:"",lastName:"",email:"",phone:"",street:"",zip:"",city:"",country:"",language:"sv",dashboardSettings:{showCalendar:!0,showMessages:!0,showStats:!0},linkedinUrl:"",instagramUrl:"",facebookUrl:"",twitterUrl:""}),[m,p]=N.useState({current:"",new:"",confirm:""}),[b,v]=N.useState(null),[y,w]=N.useState(!1),[k,j]=N.useState(null),[_,S]=N.useState(null),[A,T]=N.useState("FRAME"),[E,C]=N.useState([]),[z,M]=N.useState(!1),[F,D]=N.useState(0);N.useEffect(()=>{const ne=l.get("tab");ne&&ne!==d&&u(ne),ne==="themes"&&o("GAMIFICATION")&&K()},[l]);const L=ne=>{u(ne);const pe=new URLSearchParams(l);pe.set("tab",ne),c(pe),ne==="themes"&&o("GAMIFICATION")&&K()},K=async()=>{M(!0);try{const ne=await Iu.getMyInventory();C(ne)}catch(ne){console.error("Failed to load inventory",ne)}finally{M(!1)}},$=async ne=>{try{await Iu.equipItem(ne.id),e(`${ne.name} aktiverad!`),r()}catch(pe){console.error("Failed to equip item",pe),alert("Kunde inte byta freml.")}},R=async ne=>{try{await Iu.unequipItem(ne),e("Standard instlld!"),r()}catch(pe){console.error("Failed to unequip item",pe),alert("Kunde inte terstlla till standard.")}};N.useEffect(()=>{(async()=>{if(t!=null&&t.id){try{const pe=await O.users.getById(t.id);S(pe),Y(pe)}catch(pe){console.error(pe),Y(t)}try{const pe=await O.gamification.getMyStreak();D((pe==null?void 0:pe.streak)||0)}catch(pe){console.error("Failed to load streak",pe)}}})()},[t]);const Y=ne=>{let pe="",Ue="",kt="",Se="";if(ne.address){const Ge=ne.address.split(", ");if(Ge.length>=3){pe=Ge[0];const Qe=Ge[1].split(" ");Ue=Qe[0],kt=Qe.slice(1).join(" "),Se=Ge[2]}else pe=ne.address}const me=ne.language||"sv";let $e={showActiveCourses:!0,showMyStudents:!0,showToGrade:!0,showApplications:!0,showAtRisk:!0,showSchedule:!0,showShortcuts:!0,showMessages:!0,publicProfile:!0};try{if(ne.settings){const Ge=JSON.parse(ne.settings);$e={...$e,...Ge}}}catch(Ge){console.error("Could not parse settings",Ge)}x({firstName:ne.firstName||"",lastName:ne.lastName||"",email:ne.email||"",phone:ne.phone||"",street:pe,zip:Ue,city:kt,country:Se,language:me,dashboardSettings:$e,linkedinUrl:ne.linkedinUrl||"",instagramUrl:ne.instagramUrl||"",facebookUrl:ne.facebookUrl||"",twitterUrl:ne.twitterUrl||""}),me!==i.language&&i.changeLanguage(me)},ee=ne=>{const pe=ne.target.files[0];pe&&(j(URL.createObjectURL(pe)),w(!0),ne.target.value="")},B=async ne=>{w(!1),j(null),v(URL.createObjectURL(ne));const pe=new FormData;pe.append("file",ne,"avatar.jpg");try{const Ue=localStorage.getItem("token");(await fetch(`${window.location.origin}/api/users/${t.id}/avatar`,{method:"POST",headers:{Authorization:`Bearer ${Ue}`},body:pe})).ok&&(e(s("messages.profile_updated")),r())}catch(Ue){console.error(Ue)}},U=async ne=>{ne.preventDefault(),f(!0);const pe=`${g.street}, ${g.zip} ${g.city}, ${g.country}`,Ue={firstName:g.firstName,lastName:g.lastName,email:g.email,phone:g.phone,address:pe,language:g.language,settings:JSON.stringify(g.dashboardSettings),linkedinUrl:g.linkedinUrl,instagramUrl:g.instagramUrl,facebookUrl:g.facebookUrl,twitterUrl:g.twitterUrl};try{await O.users.update(t.id,Ue),e(s("messages.profile_updated")),i.changeLanguage(g.language),r()}catch{alert("Fel vid sparande.")}finally{f(!1)}},V=async ne=>{if(ne.preventDefault(),m.new!==m.confirm)return alert(s("profile.password_mismatch"));try{const pe=localStorage.getItem("token");(await fetch(`${window.location.origin}/api/users/${t.id}/password`,{method:"PUT",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"},body:JSON.stringify({currentPassword:m.current,newPassword:m.new})})).ok?(e(s("messages.password_changed")),p({current:"",new:"",confirm:""})):alert(s("profile.password_error"))}catch(pe){console.error(pe)}},se=_||t,Ne=[{id:"details",icon:jr,label:s("profile.details")},{id:"security_privacy",icon:pi,label:"Skerhet & Integritet"},{id:"themes",icon:L1,label:"Tema & Utseende",visible:o("GAMIFICATION")},{id:"achievements",icon:Mr,label:"Prestationer",visible:o("GAMIFICATION")},{id:"connections",icon:Ji,label:"Vnner & Relationer"},...o("REVENUE")?[{id:"billing",icon:hg,label:"Fakturering"}]:[]].filter(ne=>ne.visible!==!1);return a.jsxs("div",{className:"animate-in fade-in max-w-7xl mx-auto pb-20 px-4 sm:px-6 lg:px-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8 text-gray-900 dark:text-[#E3E3E3] transition-colors",children:s("profile.title")}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-6 border border-gray-200 dark:border-[#282a2c] shadow-sm flex flex-col items-center text-center relative overflow-hidden group",children:[((ie=t==null?void 0:t.gamificationProfile)==null?void 0:ie.activeBackground)&&a.jsx("div",{className:"absolute inset-0 z-0 opacity-10",style:{backgroundImage:`url(${li(t.gamificationProfile.activeBackground,"BACKGROUND")})`,backgroundSize:"cover",backgroundPosition:"center"}}),a.jsxs("div",{className:"relative mb-4 z-10 cursor-pointer",onClick:()=>document.getElementById("avatar-upload").click(),children:[a.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[a.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden border-2 border-gray-100 dark:border-[#282a2c] bg-gray-50 dark:bg-[#131314] flex items-center justify-center z-10",children:b?a.jsx("img",{src:b,alt:"Profil",className:"w-full h-full object-cover"}):a.jsx(Hu,{user:se,size:"w-full h-full",fontSize:"text-2xl"})}),((q=t==null?void 0:t.gamificationProfile)==null?void 0:q.activeFrame)&&a.jsx("img",{src:`${li(t.gamificationProfile.activeFrame,"FRAME")}?t=${new Date().getTime()}`,alt:"Frame",className:"absolute inset-0 w-full h-full scale-125 z-20 pointer-events-none rounded-full object-cover mix-blend-multiply"}),a.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-30",children:a.jsx(c5,{size:16,className:"text-white"})})]}),a.jsx("input",{id:"avatar-upload",type:"file",className:"hidden",accept:"image/*",onChange:ee})]}),a.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white z-10",children:[se.firstName," ",se.lastName,((H=t==null?void 0:t.gamificationProfile)==null?void 0:H.forumRankIcon)&&a.jsx("span",{className:"ml-1",children:t.gamificationProfile.forumRankIcon})]}),a.jsxs("p",{className:"text-sm text-gray-500 z-10",children:["@",se.username]}),((Z=t==null?void 0:t.gamificationProfile)==null?void 0:Z.currentTitle)&&a.jsx("span",{className:"mt-2 inline-block px-3 py-1 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 text-xs font-bold rounded-full z-10",children:t.gamificationProfile.currentTitle}),o("GAMIFICATION")&&a.jsxs("div",{className:"mt-4 flex items-center gap-2 px-3 py-1.5 bg-orange-50 dark:bg-orange-950/20 text-orange-600 dark:text-orange-400 border border-orange-100 dark:border-orange-900/50 rounded-xl z-20 shadow-sm animate-in slide-in-from-bottom-2",children:[a.jsx(va,{size:14,fill:"currentColor",className:"animate-pulse"}),a.jsxs("span",{className:"text-xs font-black",children:[F," Dagars Streak"]})]})]}),a.jsx("nav",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-2 border border-gray-200 dark:border-[#282a2c] shadow-sm",children:Ne.map(ne=>{const pe=ne.icon,Ue=d===ne.id;return a.jsxs("button",{onClick:()=>L(ne.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${Ue?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-[#282a2c]"}`,children:[a.jsx(pe,{size:18,className:Ue?"text-indigo-600 dark:text-indigo-400":"text-gray-400"}),ne.label]},ne.id)})})]}),a.jsx("div",{className:"lg:col-span-3 bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#282a2c] shadow-sm p-6 sm:p-8 min-h-[600px]",children:a.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-300",children:[d==="details"&&a.jsxs("form",{onSubmit:U,className:"space-y-8 max-w-2xl",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-bold dark:text-white border-b border-gray-100 dark:border-gray-800 pb-2",children:"Personuppgifter"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s("profile.firstname")}),a.jsx("input",{className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black focus:ring-2 focus:ring-indigo-500",value:g.firstName,onChange:ne=>x({...g,firstName:ne.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s("profile.lastname")}),a.jsx("input",{className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black focus:ring-2 focus:ring-indigo-500",value:g.lastName,onChange:ne=>x({...g,lastName:ne.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s("profile.language")}),a.jsxs("select",{className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black focus:ring-2 focus:ring-indigo-500",value:g.language,onChange:ne=>{x({...g,language:ne.target.value}),i.changeLanguage(ne.target.value)},children:[a.jsx("option",{value:"sv",children:"Svenska"}),a.jsx("option",{value:"en",children:"English"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-bold dark:text-white border-b border-gray-100 dark:border-gray-800 pb-2",children:"Kontaktinformation"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s("profile.email")}),a.jsx("input",{className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black",value:g.email,onChange:ne=>x({...g,email:ne.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s("profile.phone")}),a.jsx("input",{className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black",value:g.phone,onChange:ne=>x({...g,phone:ne.target.value})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{placeholder:s("profile.street"),className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black",value:g.street,onChange:ne=>x({...g,street:ne.target.value})}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsx("input",{placeholder:s("profile.zip"),className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black",value:g.zip,onChange:ne=>x({...g,zip:ne.target.value})}),a.jsx("input",{placeholder:s("profile.city"),className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black",value:g.city,onChange:ne=>x({...g,city:ne.target.value})}),a.jsx("input",{placeholder:s("profile.country"),className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black",value:g.country,onChange:ne=>x({...g,country:ne.target.value})})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-bold dark:text-white border-b border-gray-100 dark:border-gray-800 pb-2",children:"Sociala Medier"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{icon:D1,label:"LinkedIn",key:"linkedinUrl"},{icon:z4,label:"Instagram",key:"instagramUrl"},{icon:P4,label:"Facebook",key:"facebookUrl"},{icon:z1,label:"Twitter / X",key:"twitterUrl"}].map(ne=>{const pe=ne.icon;return a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-gray-600 dark:text-gray-400 mb-1",children:[a.jsx(pe,{size:14})," ",ne.label]}),a.jsx("input",{placeholder:"https://...",className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black text-sm",value:g[ne.key],onChange:Ue=>x({...g,[ne.key]:Ue.target.value})})]},ne.key)})})]}),a.jsx("div",{className:"pt-6",children:a.jsxs("button",{disabled:h,className:"bg-indigo-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50 transition-all",children:[a.jsx(sa,{size:18})," ",h?"Sparar...":s("profile.save_changes")]})})]}),d==="security_privacy"&&a.jsxs("div",{className:"space-y-12 max-w-2xl",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold mb-6 dark:text-white flex items-center gap-2",children:[a.jsx(Mn,{size:24,className:"text-indigo-500"})," Lsenord & Skerhet"]}),a.jsxs("form",{onSubmit:V,className:"space-y-6 bg-gray-50 dark:bg-black/20 p-6 rounded-2xl border border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"flex gap-3 text-sm text-amber-700 bg-amber-50 dark:bg-amber-900/10 p-4 rounded-xl border border-amber-100 dark:border-amber-900/20",children:[a.jsx(Dr,{size:20,className:"shrink-0"}),a.jsx("p",{children:s("profile.choose_strong_password")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:s("profile.current_password")}),a.jsx("input",{type:"password",value:m.current,onChange:ne=>p({...m,current:ne.target.value}),required:!0,className:"w-full p-2.5 border rounded-lg dark:bg-black dark:border-gray-700"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:s("profile.new_password")}),a.jsx("input",{type:"password",value:m.new,onChange:ne=>p({...m,new:ne.target.value}),required:!0,className:"w-full p-2.5 border rounded-lg dark:bg-black dark:border-gray-700"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:s("profile.confirm_password")}),a.jsx("input",{type:"password",value:m.confirm,onChange:ne=>p({...m,confirm:ne.target.value}),required:!0,className:"w-full p-2.5 border rounded-lg dark:bg-black dark:border-gray-700"})]}),a.jsx("button",{className:"w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 px-6 py-2.5 rounded-lg font-bold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:s("profile.update_password")})]})]}),a.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-800 pt-8",children:[a.jsxs("h3",{className:"text-2xl font-bold mb-6 dark:text-white flex items-center gap-2",children:[a.jsx(pi,{size:24,className:"text-green-500"})," Integritet & Data"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-black/20 rounded-xl border border-gray-200 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-full text-purple-600",children:a.jsx(zs,{size:24})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:"Offentlig Profil"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Gr din profil synlig fr andra anvndare."})]})]}),a.jsx("input",{type:"checkbox",className:"w-6 h-6 text-indigo-600 rounded focus:ring-indigo-500",checked:((te=g.dashboardSettings)==null?void 0:te.publicProfile)!==!1,onChange:ne=>{const pe={...g.dashboardSettings,publicProfile:ne.target.checked};x({...g,dashboardSettings:pe})}})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-black/20 rounded-xl border border-gray-200 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full text-blue-600",children:a.jsx(Rn,{size:24})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:"Exportera Data"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Ladda ner en kopia av din data."})]})]}),a.jsx("button",{onClick:()=>alert("Funktion kommer snart"),className:"px-4 py-2 text-sm font-bold text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:"Exportera"})]})]})]})]}),d==="themes"&&a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white mb-2",children:"Anpassa din profil"}),a.jsx("p",{className:"text-gray-500",children:"Vlj bland dina upplsta freml fr att skapa en unik stil."})]}),a.jsxs("div",{className:"bg-white dark:bg-black/30 p-6 rounded-2xl border border-gray-200 dark:border-gray-800 flex items-center gap-6 max-w-2xl mx-auto mb-8 relative overflow-hidden",children:[((ge=t==null?void 0:t.gamificationProfile)==null?void 0:ge.activeBackground)&&a.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:`url(${li(t.gamificationProfile.activeBackground,"BACKGROUND")})`,backgroundSize:"cover",backgroundPosition:"center"}}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"w-20 h-20 rounded-full border-4 border-white dark:border-gray-700 shadow-md relative",children:[a.jsx(Hu,{user:t,size:"w-full h-full"}),((Ce=t==null?void 0:t.gamificationProfile)==null?void 0:Ce.activeFrame)&&a.jsx("img",{src:`${li(t.gamificationProfile.activeFrame,"FRAME")}?t=${new Date().getTime()}`,className:"absolute inset-0 w-full h-full scale-125 z-20 pointer-events-none object-cover mix-blend-multiply",alt:"Frame"})]})}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("h3",{className:"font-bold text-lg dark:text-white flex items-center gap-2",children:[t.firstName," ",t.lastName,((Le=t==null?void 0:t.gamificationProfile)==null?void 0:Le.currentTitle)&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-xs rounded-full",children:t.gamificationProfile.currentTitle})]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["@",t.username]})]})]}),a.jsx("div",{className:"flex justify-center gap-2 mb-8",children:["FRAME","BACKGROUND","TITLE"].map(ne=>a.jsx("button",{onClick:()=>T(ne),className:`px-6 py-2 rounded-xl font-bold text-sm transition-all ${A===ne?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:ne==="FRAME"?"Ramar":ne==="BACKGROUND"?"Bakgrunder":"Titlar"},ne))}),z?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-indigo-600 border-t-transparent rounded-full mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Laddar din samling..."})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{onClick:()=>R(A),className:`bg-white dark:bg-gray-800 p-4 rounded-xl border-2 transition-all cursor-pointer relative group overflow-hidden ${A==="FRAME"&&!((He=t.gamificationProfile)!=null&&He.activeFrame)||A==="BACKGROUND"&&!((le=t.gamificationProfile)!=null&&le.activeBackground)||A==="TITLE"&&!((Re=t.gamificationProfile)!=null&&Re.currentTitle)?"border-indigo-500 shadow-indigo-500/20 shadow-lg":"border-transparent hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-md"}`,children:[a.jsxs("div",{className:"h-32 mb-4 rounded-lg bg-gray-50 dark:bg-gray-900/50 flex flex-col items-center justify-center relative border-2 border-dashed border-gray-200 dark:border-gray-700",children:[a.jsx(Je,{className:"w-8 h-8 text-gray-400 mb-2"}),a.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Standard"})]}),a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"terstll"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Ingen aktiv ",A==="FRAME"?"ram":A==="BACKGROUND"?"bakgrund":"titel"]})]}),A==="FRAME"&&!((Ze=t.gamificationProfile)!=null&&Ze.activeFrame)||A==="BACKGROUND"&&!((lt=t.gamificationProfile)!=null&&lt.activeBackground)||A==="TITLE"&&!((rt=t.gamificationProfile)!=null&&rt.currentTitle)?a.jsx("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 px-2 py-1 rounded-md",children:"Aktiv"}):a.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors",children:"Vlj"})]})]}),E.filter(ne=>ne.item.type===A).map(ne=>{var Ue,kt,Se;const pe=A==="FRAME"&&((Ue=t.gamificationProfile)==null?void 0:Ue.activeFrame)===ne.item.imageUrl||A==="BACKGROUND"&&((kt=t.gamificationProfile)==null?void 0:kt.activeBackground)===ne.item.imageUrl||A==="TITLE"&&((Se=t.gamificationProfile)==null?void 0:Se.currentTitle)===ne.item.name;return a.jsxs("div",{onClick:()=>$(ne.item),className:`bg-white dark:bg-gray-800 p-4 rounded-xl border-2 transition-all cursor-pointer relative group overflow-hidden ${pe?"border-indigo-500 shadow-indigo-500/20 shadow-lg":"border-transparent hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-md"}`,children:[a.jsxs("div",{className:`h-32 mb-4 rounded-lg bg-gray-50 dark:bg-gray-900/50 flex items-center justify-center relative overflow-hidden ${A==="BACKGROUND"?"":"p-4"}`,children:[A==="TITLE"?a.jsx("span",{className:"font-bold text-lg dark:text-white px-4 py-1 bg-white dark:bg-gray-800 rounded-full shadow-sm",children:ne.item.name}):a.jsx("img",{src:li(ne.item.imageUrl,ne.item.type),alt:ne.item.name,className:`object-contain ${A==="BACKGROUND"?"w-full h-full object-cover":"w-24 h-24"}`}),pe&&a.jsx("div",{className:"absolute top-2 right-2 bg-indigo-600 text-white p-1 rounded-full shadow-lg z-10",children:a.jsx(Gr,{size:12})})]}),a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:ne.item.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ne.item.rarity||"COMMON"})]}),pe?a.jsx("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 px-2 py-1 rounded-md",children:"Aktiv"}):a.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors",children:"Vlj"})]})]},ne.id)}),E.filter(ne=>ne.item.type===A).length===0&&a.jsxs("div",{className:"col-span-full text-center py-12 bg-gray-50 dark:bg-gray-900/30 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-800",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:a.jsx(L1,{className:"text-gray-400"})}),a.jsxs("p",{className:"font-bold text-gray-600 dark:text-gray-400",children:["Du har inga ",A==="FRAME"?"ramar":A==="BACKGROUND"?"bakgrunder":"titlar"," n."]}),a.jsx(Nd,{to:"/shop",className:"text-indigo-600 font-bold hover:underline text-sm mt-2 inline-block",children:"Besk Butiken"})]})]})]}),d==="connections"&&a.jsxs("div",{className:"space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 dark:text-white flex items-center gap-2",children:[a.jsx(Ji,{size:20,className:"text-indigo-500"})," Vnfrfrgningar"]}),a.jsx(xot,{currentUser:t,showMessage:e})]}),a.jsx("hr",{className:"border-gray-100 dark:border-gray-800"}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 dark:text-white flex items-center gap-2",children:[a.jsx(jr,{size:20,className:"text-green-500"})," Hantera Vnner"]}),a.jsx(bot,{currentUser:t,showMessage:e})]})]}),d==="achievements"&&a.jsx(pot,{currentUser:t}),d==="billing"&&a.jsx(Iit,{userId:t==null?void 0:t.id})]})})]}),y&&k&&a.jsx(mot,{imageSrc:k,onComplete:B,onCancel:()=>{w(!1),j(null)}})]})},vot=({currentUser:t,showMessage:e})=>{var m,p,b,v,y,w;const{userId:r}=uh(),{t:n}=nt(),[s,i]=N.useState(null),[o,l]=N.useState("NONE"),[c,d]=N.useState(!0),[u,h]=N.useState(!1);N.useEffect(()=>{(async()=>{if(r){h(!1);try{const[j,_]=await Promise.all([O.users.getById(r),O.connections.getStatus(r)]);i(j),l(_.status)}catch(j){console.error("Failed to load profile",j)}finally{d(!1)}}})()},[r]);const f=async()=>{try{await O.connections.request(r),l("PENDING"),e("Frfrgan skickad!")}catch(k){console.error(k),e("Misslyckades att skicka frfrgan")}};if(c)return a.jsx("div",{className:"flex justify-center p-20",children:a.jsx(M1,{className:"animate-spin"})});if(!s)return a.jsx("div",{className:"p-20 text-center",children:"Anvndaren hittades inte."});const g=o==="ACCEPTED",x=o==="PENDING";return a.jsx("div",{className:"animate-in fade-in max-w-4xl mx-auto pb-20 pt-10",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-[#282a2c] dark:to-[#3c4043] relative overflow-hidden",style:{backgroundImage:(m=s.gamificationProfile)!=null&&m.activeBackground?`url(${li(s.gamificationProfile.activeBackground,"BACKGROUND")})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:((p=s.gamificationProfile)==null?void 0:p.activeBackground)&&a.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[1px]"})}),a.jsxs("div",{className:"px-8 pb-8",children:[a.jsxs("div",{className:"relative flex justify-between items-end -mt-12 mb-6",children:[a.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center -mt-6",children:[a.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-white dark:border-[#1E1F20] shadow-md bg-gray-50 dark:bg-[#131314] flex items-center justify-center z-10",children:s.profilePictureUrl&&!u?a.jsx("img",{src:wo(s.profilePictureUrl),onError:()=>h(!0),alt:"",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-4xl font-bold text-gray-400 dark:text-gray-500",children:(b=s.firstName)==null?void 0:b[0]})}),((v=s.gamificationProfile)==null?void 0:v.activeFrame)&&a.jsx("img",{src:li(s.gamificationProfile.activeFrame,"FRAME"),alt:"Frame",className:"absolute inset-0 w-32 h-32 z-20 pointer-events-none rounded-full object-cover",style:{mixBlendMode:s.gamificationProfile.activeFrame.includes("circular")?"multiply":"screen",maskImage:"radial-gradient(circle, transparent 72%, black 76%, black 92%, transparent 96%)",WebkitMaskImage:"radial-gradient(circle, transparent 72%, black 76%, black 92%, transparent 96%)",filter:"contrast(110%) brightness(1.1)"}})]}),a.jsx("div",{children:g?a.jsxs("button",{disabled:!0,className:"bg-green-100 text-green-700 px-4 py-2 rounded-lg font-bold flex items-center gap-2 cursor-default",children:[a.jsx(Gr,{size:18})," Ansluten"]}):x?a.jsxs("button",{disabled:!0,className:"bg-gray-100 text-gray-500 px-4 py-2 rounded-lg font-bold flex items-center gap-2 cursor-default",children:[a.jsx(Tt,{size:18})," Frfrgan skickad"]}):a.jsxs("button",{onClick:f,className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-sm",children:[a.jsx(Ji,{size:18})," Anslut"]})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.firstName," ",s.lastName,((y=s.gamificationProfile)==null?void 0:y.forumRankIcon)&&a.jsx("span",{title:"Forum Rank",children:s.gamificationProfile.forumRankIcon})]}),a.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["@",s.username,"  ",(w=s.role)==null?void 0:w.name]})]}),g?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in slide-in-from-bottom-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white uppercase text-sm tracking-wider",children:"Kontaktuppgifter"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-gray-300 p-3 bg-gray-50 dark:bg-[#282a2c] rounded-lg",children:[a.jsx(Qi,{size:18,className:"text-gray-400"})," ",s.email]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-gray-300 p-3 bg-gray-50 dark:bg-[#282a2c] rounded-lg",children:[a.jsx(lw,{size:18,className:"text-gray-400"})," ",s.phone||"Ej angivet"]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-gray-300 p-3 bg-gray-50 dark:bg-[#282a2c] rounded-lg",children:[a.jsx(B0,{size:18,className:"text-gray-400"})," ",s.city||"Ej angivet",", ",s.country]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white uppercase text-sm tracking-wider",children:"Sociala Medier"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.linkedinUrl?a.jsxs("a",{href:s.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:[a.jsx(D1,{size:20})," LinkedIn"]}):a.jsxs("div",{className:"p-3 border border-dashed border-gray-300 rounded-lg text-gray-400 flex items-center gap-2",children:[a.jsx(D1,{size:20})," Ej lnkat"]}),s.instagramUrl?a.jsxs("a",{href:s.instagramUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-pink-50 text-pink-700 rounded-lg hover:bg-pink-100 transition-colors",children:[a.jsx(z4,{size:20})," Instagram"]}):a.jsxs("div",{className:"p-3 border border-dashed border-gray-300 rounded-lg text-gray-400 flex items-center gap-2",children:[a.jsx(z4,{size:20})," Ej lnkat"]}),s.facebookUrl?a.jsxs("a",{href:s.facebookUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-blue-50 text-blue-800 rounded-lg hover:bg-blue-100 transition-colors",children:[a.jsx(P4,{size:20})," Facebook"]}):a.jsxs("div",{className:"p-3 border border-dashed border-gray-300 rounded-lg text-gray-400 flex items-center gap-2",children:[a.jsx(P4,{size:20})," Ej lnkat"]}),s.twitterUrl?a.jsxs("a",{href:s.twitterUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-gray-50 text-gray-800 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx(z1,{size:20})," Twitter"]}):a.jsxs("div",{className:"p-3 border border-dashed border-gray-300 rounded-lg text-gray-400 flex items-center gap-2",children:[a.jsx(z1,{size:20})," Ej lnkat"]})]})]})]}):a.jsxs("div",{className:"bg-gray-50 dark:bg-[#282a2c] rounded-xl p-8 text-center border border-gray-100 dark:border-[#3c4043]",children:[a.jsx(Mn,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Denna profil r privat"}),a.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Du mste vara ansluten till denna anvndare fr att se deras kontaktuppgifter och sociala medier."}),a.jsx("button",{onClick:f,disabled:x,className:"bg-gray-900 dark:bg-white text-white dark:text-black px-6 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity",children:x?"Frfrgan skickad":"Skicka frfrgan"})]})]})]})]})})},kot=()=>{const{currentUser:t}=At(),[e,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(""),[l,c]=N.useState("Alla Kurser"),[d,u]=N.useState(null),h=Et();N.useEffect(()=>{(async()=>{try{const p=await O.courses.getAll();r(p)}catch(p){console.error("Kunde inte hmta kurskatalog",p)}finally{s(!1)}})()},[]);const f=async m=>{if(!t){h("/login");return}try{const p=localStorage.getItem("token"),b=await fetch(`${window.location.origin}/api/courses/${m}/apply/${t.id}`,{method:"POST",headers:{Authorization:`Bearer ${p}`}});if(b.ok)alert("Anskan skickad! Invnta lrarens godknnande.");else{const v=await b.json();alert(`Kunde inte anska: ${v.error||"Oknt fel"}`)}}catch{alert("Ngot gick fel vid anskan.")}},g=e.reduce((m,p)=>{const b=Ou.includes(p.category)?p.category:"vrigt";return m[b]=(m[b]||0)+1,m},{}),x=e.filter(m=>{const p=m.name.toLowerCase().includes(i.toLowerCase())||m.courseCode&&m.courseCode.toLowerCase().includes(i.toLowerCase());let b=m.category;return Ou.includes(b)||(b="vrigt"),p&&(l==="Alla Kurser"||b===l)&&m.isOpen});return a.jsxs("div",{className:"max-w-7xl mx-auto p-8 animate-in fade-in pb-20",children:[a.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-12",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Kurskatalog"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Utforska, filtrera och hitta din nsta utmaning."})]}),a.jsx("div",{className:"flex gap-4 items-center",children:a.jsxs("div",{className:"relative w-full md:w-96",children:[a.jsx(gr,{className:"absolute left-4 top-3.5 text-gray-400",size:20}),a.jsx("input",{className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-200 dark:border-[#3c4043] bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"Sk efter kurser...",value:i,onChange:m=>o(m.target.value)})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043] sticky top-8 max-h-[85vh] overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-900 dark:text-white font-bold",children:[a.jsx(Ha,{size:20}),a.jsx("h3",{children:"Kategorier"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>c("Alla Kurser"),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors flex justify-between ${l==="Alla Kurser"?"bg-black text-white dark:bg-white dark:text-black":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-[#3c4043]"}`,children:[a.jsx("span",{children:"Alla Kurser"}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${l==="Alla Kurser"?"bg-white/20":"bg-gray-200 dark:bg-[#3c4043]"}`,children:e.length})]}),Ou.map(m=>{const p=g[m]||0;return p===0?null:a.jsxs("button",{onClick:()=>c(m),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors flex justify-between ${l===m?"bg-black text-white dark:bg-white dark:text-black":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-[#3c4043]"}`,children:[a.jsx("span",{className:"truncate pr-2",children:m}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${l===m?"bg-white/20":"bg-gray-200 dark:bg-[#3c4043]"}`,children:p})]},m)})]})]})}),a.jsx("div",{className:"lg:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-6",children:n?[...Array(4)].map((m,p)=>a.jsx("div",{className:"h-64 bg-gray-100 dark:bg-[#1E1F20] rounded-2xl animate-pulse"},p)):x.length>0?x.map(m=>{const p=m.maxStudents||100,b=m.enrolledCount||0,v=p-b,y=v<=0;return a.jsxs("div",{className:"group bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex flex-col",children:[a.jsx("div",{className:`h-16 ${m.color||"bg-indigo-600"} p-4 relative`,children:a.jsxs("div",{className:"absolute top-3 left-4 flex gap-2",children:[a.jsx("span",{className:"bg-white/90 backdrop-blur-sm text-[10px] font-bold px-2 py-0.5 rounded text-gray-800 uppercase tracking-wider",children:m.category||"Allmnt"}),a.jsx("span",{className:"bg-black/20 backdrop-blur-sm text-[10px] font-mono font-bold px-2 py-0.5 rounded text-white uppercase tracking-wider",children:m.courseCode})]})}),a.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors",children:m.name}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4 line-clamp-2 h-10",children:m.description?m.description.replace(/<[^>]*>/g,""):"Ingen beskrivning tillgnglig."}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-6 border-t border-gray-100 dark:border-[#3c4043] pt-4",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(vt,{size:14})," ",a.jsxs("span",{children:[b," / ",p," studenter"]})]}),m.startDate&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(zt,{size:14}),a.jsx("span",{children:new Date(m.startDate).toLocaleDateString()})]})]}),a.jsxs("div",{className:"mt-auto flex justify-between items-center gap-3",children:[a.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${y?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y?"FULLBOKAD":`${v} platser kvar`}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>u(m),className:"px-3 py-2 text-xs font-bold text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Info"}),a.jsx("button",{onClick:w=>{w.stopPropagation(),f(m.id)},disabled:y,className:"bg-indigo-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 dark:shadow-none",children:y?"Stngd":"Ansk"})]})]})]})]},m.id)}):a.jsx("div",{className:"col-span-2 text-center py-20 text-gray-400",children:"Inga kurser hittades i denna kategori."})})]}),d&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>u(null),children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl relative animate-in zoom-in-95 duration-200 custom-scrollbar",onClick:m=>m.stopPropagation(),children:[a.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-[#282a2c] rounded-full hover:bg-gray-200 transition-colors z-10",children:a.jsx(Je,{size:20,className:"text-gray-500"})}),a.jsx("div",{className:"p-1",children:d.skolverketCourse?a.jsx(mQ,{skolverketCourse:d.skolverketCourse}):a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:d.name}),a.jsx("div",{className:"text-gray-600 dark:text-gray-300 mb-6 prose dark:prose-invert max-w-none text-left",dangerouslySetInnerHTML:{__html:d.description}}),d.category!=="Skolverket Import"&&a.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-100 dark:border-yellow-900/30 rounded-xl text-yellow-800 dark:text-yellow-400 inline-block",children:[a.jsx(Er,{className:"inline-block mr-2",size:18}),"Denna kurs r inte kopplad till en officiell kursplan frn Skolverket nnu."]})]})})]})})]})},wot=({currentView:t,onViewChange:e,onNewFolder:r,onUpload:n,folderPath:s=[],storageUsage:i=null})=>{const o=(h,f=1)=>{if(!h)return"0 B";const g=1024,x=f<0?0:f,m=["B","KB","MB","GB","TB"],p=Math.floor(Math.log(h)/Math.log(g));return parseFloat((h/Math.pow(g,p)).toFixed(x))+" "+m[p]},l=(i==null?void 0:i.used)||0,c=(i==null?void 0:i.quota)||1073741824,d=Math.min(100,Math.round(l/c*100)),u=[{id:"my-drive",label:"Min Drive",icon:fg},{id:"shared",label:"Delat med mig",icon:vt},{id:"grades",label:"Betyg",icon:_d},{id:"certificates",label:"Intyg",icon:Mr},{id:"manuals",label:"Dokumentbank",icon:gt},{id:"recent",label:"Senaste",icon:Tt},{id:"starred",label:"Stjrnmrkta",icon:ya},{id:"trash",label:"Papperskorg",icon:qt}];return a.jsxs("div",{className:"w-64 flex-shrink-0 bg-white dark:bg-slate-900 p-4 h-full flex flex-col",children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-3 px-4 shadow-sm transition-all font-medium",children:[a.jsx(jt,{size:20}),a.jsx("span",{children:"Ladda upp"})]}),a.jsxs("button",{onClick:r,className:"w-full flex items-center gap-2 px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors border border-slate-200 dark:border-slate-700",children:[a.jsx(lK,{size:18}),a.jsx("span",{children:"Ny mapp"})]})]}),a.jsx("nav",{className:"flex-1 space-y-1",children:u.map(h=>a.jsxs("button",{onClick:()=>e(h.id),className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all ${t===h.id?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400 font-medium":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[a.jsx(h.icon,{size:20}),a.jsx("span",{children:h.label})]},h.id))}),a.jsx("div",{className:"mt-auto pt-6 border-t border-slate-200 dark:border-slate-800",children:a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-2",children:[a.jsx("span",{children:"Lagring"}),a.jsxs("span",{children:[d,"% anvnd"]})]}),a.jsx("div",{className:"w-full h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-500 ${d>90?"bg-red-500":d>75?"bg-amber-500":"bg-blue-500"}`,style:{width:`${d}%`}})}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:[o(l)," av ",o(c)," anvnds"]})]})})]})},jot=({path:t=[],onNavigate:e})=>a.jsxs("nav",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400 mb-2",children:[a.jsxs("button",{onClick:()=>e(null),className:"hover:text-blue-600 flex items-center gap-1.5 transition-colors",children:[a.jsx(rw,{size:16}),a.jsx("span",{className:"font-medium",children:"Min Drive"})]}),t.map((r,n)=>a.jsxs(ae.Fragment,{children:[a.jsx(or,{size:14,className:"text-slate-300 dark:text-slate-600"}),a.jsx("button",{onClick:()=>e(r),className:`hover:text-blue-600 transition-colors ${n===t.length-1?"font-bold text-slate-900 dark:text-white":"font-medium"}`,children:r.name})]},r.id))]}),Not=({x:t,y:e,item:r,onClose:n,onAction:s})=>{const i=N.useRef(null);N.useEffect(()=>{const l=c=>{i.current&&!i.current.contains(c.target)&&n()};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]);const o=r.type==="folder"?[{id:"open",label:"ppna",icon:tw},{id:"rename",label:"Byt namn",icon:Ql},{id:"share",label:"Dela mapp",icon:G0},{id:"delete",label:"Radera",icon:qt,danger:!0}]:[{id:"open",label:"ppna",icon:Wo},{id:"download",label:"Ladda ner",icon:Rn},{id:"share",label:"Dela",icon:G0},{id:"link",label:"Kopiera lnk",icon:Gu},{id:"edit",label:"Redigera",icon:Ql},{id:"info",label:"Detaljer",icon:Xl},{id:"delete",label:"Radera",icon:qt,danger:!0}];return a.jsxs("div",{ref:i,className:"fixed z-[9999] w-56 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-2xl py-2 animate-in fade-in zoom-in duration-100",style:{left:t,top:e},children:[a.jsx("div",{className:"px-4 py-2 border-b border-slate-100 dark:border-slate-800 mb-1",children:a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider truncate",children:r.name||r.fileName})}),o.map(l=>a.jsxs("button",{onClick:c=>{c.stopPropagation(),s(l.id,r),n()},className:`w-full flex items-center gap-3 px-4 py-2.5 text-sm transition-colors ${l.danger?"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10":"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[a.jsx(l.icon,{size:18}),a.jsx("span",{children:l.label})]},l.id))]})},_ot=({item:t,onClose:e,currentUser:r})=>{const[n,s]=N.useState("user"),[i,o]=N.useState(""),[l,c]=N.useState([]),[d,u]=N.useState(null),[h,f]=N.useState("VIEW"),[g,x]=N.useState(null),[m,p]=N.useState(!1),b=async w=>{if(o(w),w.length<2){c([]);return}try{if(n==="user"){const k=await O.users.search(w);c(Array.isArray(k)?k.filter(j=>j.id!==r.id):[])}else if(n==="course"){const k=await O.courses.getAll();c(k.filter(j=>j.title.toLowerCase().includes(w.toLowerCase())))}}catch(k){console.error(k)}},v=async()=>{if(d){p(!0);try{await O.shares.create(t.id,r.id,{targetType:n.toUpperCase(),targetId:d.id,permission:h}),alert(`Delat med ${d.firstName||d.title}!`),e()}catch(w){alert("Kunde inte dela: "+w.message)}finally{p(!1)}}},y=async()=>{p(!0);try{const w=await O.shares.createPublicLink(t.id,r.id);x(w)}catch{alert("Kunde inte skapa lnk")}finally{p(!1)}};return a.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden animate-in slide-in-from-bottom-8 duration-300",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-800",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[a.jsx(Plus,{className:"text-blue-600",size:24}),"Dela"]}),a.jsx("p",{className:"text-slate-500 font-medium truncate max-w-[300px]",children:t.name||t.fileName})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-white dark:hover:bg-slate-700 rounded-full transition-all shadow-sm",children:a.jsx(Je,{size:20})})]}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1.5 rounded-2xl mb-8",children:[a.jsxs("button",{onClick:()=>{s("user"),u(null),c([])},className:`flex-1 flex items-center justify-center gap-2 py-3 text-sm font-bold rounded-xl transition-all ${n==="user"?"bg-white dark:bg-slate-700 shadow-lg text-blue-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[a.jsx(jr,{size:18})," Anvndare"]}),a.jsxs("button",{onClick:()=>{s("course"),u(null),c([])},className:`flex-1 flex items-center justify-center gap-2 py-3 text-sm font-bold rounded-xl transition-all ${n==="course"?"bg-white dark:bg-slate-700 shadow-lg text-blue-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[a.jsx(gt,{size:18})," Kurs"]}),a.jsxs("button",{onClick:()=>{s("link")},className:`flex-1 flex items-center justify-center gap-2 py-3 text-sm font-bold rounded-xl transition-all ${n==="link"?"bg-white dark:bg-slate-700 shadow-lg text-blue-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[a.jsx(FD,{size:18})," Lnk"]})]}),n!=="link"?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"relative group",children:[a.jsx(gr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors",size:20}),a.jsx("input",{type:"text",placeholder:`Sk ${n==="user"?"anvndare":"kurs"} efter namn...`,value:i,onChange:w=>b(w.target.value),className:"w-full pl-12 pr-4 py-4 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-blue-500/20 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all font-medium text-slate-900 dark:text-white"})]}),l.length>0&&!d&&a.jsx("div",{className:"max-h-56 overflow-y-auto border-2 border-slate-100 dark:border-slate-800 rounded-2xl divide-y dark:divide-slate-800 shadow-inner",children:l.map(w=>{var k,j;return a.jsxs("button",{onClick:()=>u(w),className:"w-full flex items-center gap-4 p-4 hover:bg-blue-50 dark:hover:bg-blue-900/10 transition-colors text-left",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-black text-sm shadow-md",children:(((k=w.firstName)==null?void 0:k[0])||((j=w.title)==null?void 0:j[0])||"?").toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-bold truncate text-slate-900 dark:text-white",children:w.title||`${w.firstName} ${w.lastName}`}),a.jsx("p",{className:"text-xs text-slate-500 font-medium truncate",children:w.email||(w.subject?`Kurs: ${w.subject}`:"Resurs")})]})]},w.id)})}),d&&a.jsxs("div",{className:"bg-blue-600 text-white rounded-2xl p-5 flex items-center justify-between shadow-xl shadow-blue-500/30 animate-in zoom-in-95",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:a.jsx(Gr,{size:20,className:"text-white"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-black",children:["Vald: ",d.title||`${d.firstName} ${d.lastName}`]}),a.jsx("p",{className:"text-xs text-blue-100 font-medium",children:"Klicka fr att ndra mottagare"})]})]}),a.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-white/10 rounded-full transition-all",children:a.jsx(Je,{size:20})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gd,{size:18,className:"text-slate-400"}),a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 font-bold",children:"Instllningar"})]}),a.jsxs("select",{value:h,onChange:w=>f(w.target.value),className:"bg-transparent text-sm font-black text-blue-600 border-none outline-none cursor-pointer focus:ring-0",children:[a.jsx("option",{value:"VIEW",children:" Kan visa"}),a.jsx("option",{value:"EDIT",children:" Kan redigera"}),a.jsx("option",{value:"MANAGE",children:" Full kontroll"})]})]})]}):a.jsx("div",{className:"space-y-6",children:g?a.jsxs("div",{className:"bg-slate-900 rounded-3xl p-6 space-y-4 shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-black uppercase text-slate-500 tracking-widest",children:"Offentlig Lnk"}),a.jsxs("span",{className:"px-2 py-1 bg-green-500/10 text-green-500 text-[10px] font-black rounded-full flex items-center gap-1",children:[a.jsx(Tt,{size:10})," AKTIV"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{readOnly:!0,value:`${window.location.origin}/share/${g.linkToken}`,className:"flex-1 bg-slate-800 border-none rounded-xl px-4 py-3 text-sm text-blue-400 font-mono outline-none shadow-inner"}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/share/${g.linkToken}`),alert("Kopierad!")},className:"p-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:a.jsx(aK,{size:20})})]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-bold text-center",children:"Frsiktigt: Vem som helst med denna lnk kan komma t filen."})]}):a.jsxs("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800/50 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl shadow-blue-500/20 rotate-3",children:a.jsx(FD,{className:"text-white",size:32})}),a.jsx("h3",{className:"text-xl font-black mb-2 text-slate-900 dark:text-white",children:"Dela via lnk"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mb-8 max-w-[250px] mx-auto",children:"Alla med den unika lnken kan se detta innehll."}),a.jsx("button",{onClick:y,disabled:m,className:"px-8 py-4 bg-blue-600 text-white rounded-2xl font-black hover:bg-blue-700 transition-all shadow-xl shadow-blue-500/30 hover:-translate-y-1 active:scale-95 disabled:opacity-50",children:m?"Genererar...":"Skapa lnk nu"})]})})]}),a.jsxs("div",{className:"p-8 bg-slate-50 dark:bg-slate-800/80 flex gap-4",children:[a.jsx("button",{onClick:e,className:"flex-1 px-4 py-4 text-slate-600 dark:text-slate-400 font-black hover:bg-slate-200 dark:hover:bg-slate-700 rounded-2xl transition-all",children:"Avbryt"}),n!=="link"&&a.jsx("button",{disabled:!d||m,onClick:v,className:`flex-1 px-4 py-4 text-white font-black rounded-2xl transition-all shadow-xl ${d&&!m?"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20 hover:-translate-y-1":"bg-slate-300 dark:bg-slate-700 cursor-not-allowed text-slate-100"}`,children:m?"Dela...":"Slutfr delning"})]})]})})},Sot=()=>{const{currentUser:t}=At(),[e,r]=N.useState("my-drive"),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(null),[d,u]=N.useState([]),[h,f]=N.useState(!0),[g,x]=N.useState("grid"),[m,p]=N.useState(""),[b,v]=N.useState(null),[y,w]=N.useState(null),[k,j]=N.useState(!1),[_,S]=N.useState(null),[A,T]=N.useState(!1),[E,C]=N.useState(null),[z,M]=N.useState(null);N.useEffect(()=>{t&&(F(),D())},[t,e,l]);const F=async()=>{f(!0);try{if(e==="my-drive"){const ie=l?await O.folders.getContent(l.id,t.id):await O.folders.getRoot(t.id);s(ie.folders||[]),o(ie.documents||[])}else if(e==="shared"){const ie=await O.documents.getUserDocs(t.id);o(ie.filter(q=>{var H;return((H=q.owner)==null?void 0:H.id)!==t.id})),s([])}else if(e==="grades"){const q=(await O.courses.getMyResults(t.id)||[]).map((H,Z)=>({id:`grade-${Z}`,fileName:`${H.courseName} - Betyg ${H.grade}`,mimeType:"grade/record",size:0,uploadedAt:H.date,isGrade:!0,gradeData:H}));o(q),s([])}else if(e==="certificates"){const ie=await O.documents.getMerits(t.id);o(ie||[]),s([])}else if(e==="manuals"){const ie=await O.documents.getSystemDocs();o(ie||[]),s([])}}catch(ie){console.error("Kunde inte hmta innehll",ie)}finally{f(!1)}},D=async()=>{if(t)try{const ie=await O.documents.getUsage(t.id);C(ie)}catch(ie){console.error("Kunde inte hmta lagringsstatistik",ie)}},L=async()=>{const ie=prompt("Namnge din nya mapp:");if(ie)try{await O.folders.create(t.id,ie,l==null?void 0:l.id),F()}catch{alert("Kunde inte skapa mapp")}},K=async ie=>{var H;const q=ie.target.files||((H=ie.dataTransfer)==null?void 0:H.files);if(!(!q||q.length===0)){for(let Z=0;Z<q.length;Z++){const te=new FormData;te.append("file",q[Z]),l&&te.append("folderId",l.id);try{await O.documents.upload(t.id,te)}catch(ge){console.error("Upload failed",ge)}}F(),D()}},$=()=>{const ie=document.createElement("input");ie.type="file",ie.multiple=!0,ie.onchange=K,ie.click()},R=ie=>{if(ie===null)c(null),u([]);else{c(ie);const q=d.findIndex(H=>H.id===ie.id);u(q!==-1?d.slice(0,q+1):[...d,ie])}},Y=(ie,q)=>{ie.preventDefault(),v({x:ie.clientX,y:ie.clientY,item:q})},ee=async(ie,q)=>{var H;switch(ie){case"open":q.type==="folder"?R(q):(H=q.fileType)!=null&&H.startsWith("image/")?M(q.fileUrl):window.open(q.fileUrl,"_blank");break;case"share":w(q);break;case"delete":window.confirm(`Vill du verkligen radera ${q.name||q.fileName}?`)&&(q.type==="folder"?await O.folders.delete(q.id):await O.documents.delete(q.id),F(),D());break;case"rename":{const Z=prompt("Nytt namn:",q.name||q.fileName);Z&&(q.type==="folder"&&await O.folders.rename(q.id,Z),F());break}case"download":if(q.type!=="folder"){const Z=document.createElement("a");Z.href=q.fileUrl,Z.download=q.fileName,Z.click()}break;case"edit":S(q),j(!0);break}},B=()=>{const ie=O.documents.getConsolidatedGradesUrl(t.id),q=localStorage.getItem("token");fetch(ie,{headers:{Authorization:`Bearer ${q}`,"X-Tenant-ID":localStorage.getItem("tenant_id")||""}}).then(H=>H.blob()).then(H=>{const Z=window.URL.createObjectURL(H),te=document.createElement("a");te.href=Z,te.download=`Samlade_Betyg_${t.firstName}_${t.lastName}.pdf`,document.body.appendChild(te),te.click(),window.URL.revokeObjectURL(Z),document.body.removeChild(te)}).catch(H=>{console.error("Download failed",H),alert("Kunde inte ladda ner betygsutdraget.")})},U=ie=>ie?ie.startsWith("image/")?a.jsx(Dd,{size:32,className:"text-purple-500"}):ie.includes("pdf")?a.jsx(xt,{size:32,className:"text-red-500"}):ie.includes("word")||ie.includes("officedocument")?a.jsx(xt,{size:32,className:"text-blue-500"}):a.jsx(Qp,{size:32,className:"text-slate-400"}):a.jsx(Qp,{size:32,className:"text-slate-400"}),V=ie=>{var H;if(!ie)return"Fil";const q=ie.toLowerCase();return q.includes("pdf")?"PDF":q.includes("wordprocessingml")||q.includes("msword")?"DOCX":q.includes("spreadsheetml")||q.includes("ms-excel")?"XLSX":q.includes("presentationml")||q.includes("ms-powerpoint")?"PPTX":q.includes("image/jpeg")?"JPG":q.includes("image/png")?"PNG":q.includes("image/gif")?"GIF":q.includes("image/webp")?"WEBP":q.includes("text/plain")?"TXT":((H=ie.split("/")[1])==null?void 0:H.toUpperCase())||"Fil"},se=i.filter(ie=>ie.fileName.toLowerCase().includes(m.toLowerCase())),Ne=n.filter(ie=>ie.name.toLowerCase().includes(m.toLowerCase()));return a.jsxs("div",{className:"flex h-full bg-white dark:bg-slate-900 relative",onDragEnter:()=>T(!0),onDragOver:ie=>{ie.preventDefault(),T(!0)},onDragLeave:ie=>{ie.relatedTarget||T(!1)},onDrop:ie=>{ie.preventDefault(),T(!1),K(ie)},children:[a.jsx(wot,{currentView:e,onViewChange:ie=>{r(ie),c(null),u([])},onNewFolder:L,onUpload:$,storageUsage:E}),a.jsxs("main",{className:"flex-1 flex flex-col p-6 min-w-0 h-full overflow-hidden",children:[a.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(jot,{path:d,onNavigate:R}),a.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:e==="shared"?"Delat med mig":e==="trash"?"Papperskorg":e==="grades"?"Mina Betyg":e==="certificates"?"Mina Intyg":e==="manuals"?"Dokumentbank":l?l.name:"Min Drive"}),e==="grades"&&a.jsxs("button",{onClick:B,className:"flex items-center gap-2 mt-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-black rounded-xl transition-all shadow-lg shadow-blue-500/20 active:scale-95",children:[a.jsx(Rn,{size:14}),"LADDA NER SAMLAT BETYG (PDF)"]})]}),a.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[a.jsxs("div",{className:"relative flex-1 md:w-64",children:[a.jsx(gr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),a.jsx("input",{placeholder:"Sk i dina filer...",value:m,onChange:ie=>p(ie.target.value),className:"w-full pl-11 pr-4 py-3 bg-slate-50 dark:bg-slate-800/50 border-2 border-transparent focus:border-blue-500/20 focus:bg-white dark:focus:bg-slate-800 rounded-xl outline-none text-sm font-bold transition-all"})]}),a.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800/50 rounded-xl p-1",children:[a.jsx("button",{onClick:()=>x("grid"),className:`p-2 rounded-lg transition-all ${g==="grid"?"bg-white dark:bg-slate-700 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:a.jsx(dK,{size:18})}),a.jsx("button",{onClick:()=>x("list"),className:`p-2 rounded-lg transition-all ${g==="list"?"bg-white dark:bg-slate-700 text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:a.jsx(gg,{size:18})})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:h?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-20",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600/20 border-t-blue-600 rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px]",children:"Laddar bibliotek..."})]}):se.length===0&&Ne.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-40",children:[a.jsx("div",{className:"p-6 bg-slate-100 dark:bg-slate-800 rounded-3xl mb-4 rotate-12",children:a.jsx(GD,{size:48,className:"text-slate-400"})}),a.jsx("h3",{className:"text-lg font-black text-slate-400",children:"Inga filer hr n"}),a.jsx("p",{className:"text-xs font-bold text-slate-400",children:"Dra och slpp filer fr att brja"})]}):a.jsxs("div",{className:g==="grid"?"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-6 pb-12":"space-y-3 pb-12",children:[Ne.map(ie=>a.jsx("div",{onDoubleClick:()=>R(ie),onContextMenu:q=>Y(q,{...ie,type:"folder"}),className:"group relative bg-white dark:bg-slate-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 hover:border-blue-500/30 dark:hover:border-blue-500/50 transition-all cursor-pointer shadow-sm hover:shadow-lg",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx(fh,{className:"text-blue-600",size:28})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-slate-900 dark:text-white truncate text-xs mb-0.5",title:ie.name,children:ie.name}),a.jsx("p",{className:"text-[9px] text-slate-400 font-black uppercase tracking-tight",children:"Mapp"})]})]})},ie.id)),se.map(ie=>{var q;return a.jsxs("div",{onDoubleClick:()=>ee("open",{...ie,type:"file"}),onContextMenu:H=>Y(H,{...ie,type:"file"}),className:"group relative bg-white dark:bg-slate-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 hover:border-blue-500/30 dark:hover:border-blue-500/50 transition-all cursor-pointer shadow-sm hover:shadow-lg text-center",children:[a.jsx("div",{className:"aspect-square bg-slate-50 dark:bg-slate-900/50 rounded-xl mb-4 flex items-center justify-center overflow-hidden",children:(q=ie.fileType)!=null&&q.startsWith("image/")?a.jsx("img",{src:ie.fileUrl,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",alt:ie.fileName,onClick:H=>{H.stopPropagation(),M(ie.fileUrl)}}):a.jsx("div",{className:"group-hover:scale-105 transition-transform",children:U(ie.fileType)})}),a.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-xs truncate mb-0.5 px-1",title:ie.fileName,children:ie.fileName}),a.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-tight",children:V(ie.fileType)})]},ie.id)})]})})]}),A&&a.jsxs("div",{className:"absolute inset-0 z-[100] bg-blue-600/95 backdrop-blur-md flex flex-col items-center justify-center text-white animate-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"w-24 h-24 bg-white/20 rounded-full flex items-center justify-center mb-6 animate-bounce",children:a.jsx(GD,{size:48})}),a.jsx("h2",{className:"text-3xl font-black mb-2",children:"Slpp filerna hr!"}),a.jsxs("p",{className:"text-lg font-bold opacity-80",children:["Ladda upp till ",l?l.name:"Min Drive"]})]}),b&&a.jsx(Not,{...b,onClose:()=>v(null),onAction:ee}),y&&a.jsx(_ot,{item:y,currentUser:t,onClose:()=>w(null)}),k&&_&&a.jsx("div",{className:"fixed inset-0 z-[10001] bg-white dark:bg-slate-900 animate-in slide-in-from-bottom duration-300",children:a.jsx(vK,{children:a.jsx(xQ,{entityType:"DOCUMENT",entityId:_.id,userId:t.id,onClose:()=>{j(!1),S(null),F()}})})}),z&&a.jsxs("div",{className:"fixed inset-0 z-[10002] bg-black/90 flex items-center justify-center p-4 animate-in fade-in duration-200 backdrop-blur-sm",onClick:()=>M(null),children:[a.jsx("button",{className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",onClick:()=>M(null),children:a.jsx(Je,{size:24})}),a.jsx("img",{src:z,alt:"Preview",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl animate-in zoom-in-95 duration-200",onClick:ie=>ie.stopPropagation()})]})]})},Aot=()=>{const[t,e]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState({name:"",description:"",defaultDashboard:"STUDENT",isSuperAdmin:!1,permissions:[]});N.useEffect(()=>{f()},[]);const f=async()=>{i(!0);try{const[j,_]=await Promise.all([O.roles.getAll(),O.roles.getPermissions()]);e(j||[]),n(_||[])}catch(j){console.error("Failed to fetch roles data",j)}finally{i(!1)}},g=j=>{d(j),h({name:j.name,description:j.description||"",defaultDashboard:j.defaultDashboard||"STUDENT",isSuperAdmin:j.superAdmin,permissions:j.permissions||[]}),l(!0)},x=()=>{d(null),h({name:"",description:"",defaultDashboard:"STUDENT",isSuperAdmin:!1,permissions:[]}),l(!0)},m=async j=>{if(window.confirm("r du sker p att du vill ta bort denna roll?"))try{await O.roles.delete(j),f()}catch{alert("Kunde inte ta bort rollen. Se till att inga anvndare har den tilldelad.")}},p=async j=>{j.preventDefault();try{c?await O.roles.update(c.id,u):await O.roles.create(u),l(!1),f()}catch(_){alert("Kunde inte spara rollen: "+_.message)}},b=j=>{h(_=>{const S=_.permissions.includes(j)?_.permissions.filter(A=>A!==j):[..._.permissions,j];return{..._,permissions:S}})},v=r.reduce((j,_)=>{const S=_.split("_")[0];return j[S]||(j[S]=[]),j[S].push(_),j},{}),y={VIEW:"Visning & Lsrttigheter",USER:"Anvndarhantering",COURSE:"Kurshantering",GRADE:"Betyg & Bedmning",ROLE:"Rollhantering",SETTINGS:"Systeminstllningar",MODULE:"Kursmoduler",AUDIT:"Loggar & Revision",SCORM:"SCORM & Externa Paket",ELEVHALSA:"Elevhlsa",ACCESS:"Modultillgng (Valbara Moduler)"},w={VIEW_DASHBOARD:"Visa versiktspanel",VIEW_COURSES:"Se Tillgngliga Kurser",VIEW_PROFILE:"Se Egen Profil",USER_CREATE:"Skapa Anvndare",USER_EDIT:"Redigera Anvndare",USER_DELETE:"Ta Bort Anvndare",USER_VIEW_ALL:"Se Alla Anvndare",COURSE_CREATE:"Skapa Nya Kurser",COURSE_EDIT:"Redigera Kurser",COURSE_DELETE:"Ta Bort Kurser",COURSE_VIEW_ALL:"Se Alla Kurser (Oavsett deltagande)",GRADE_ASSIGN:"Stta/ndra Betyg",GRADE_VIEW:"Se Betyg",ROLE_MANAGE:"Hantera Roller & Behrigheter",SETTINGS_MANAGE:"ndra Systeminstllningar",ELEVHALSA_VIEW:"Visa Elevhlsa (Dashboard)",ELEVHALSA_MANAGE:"Hantera Elevhlsocase",ACCESS_EBOOKS:"Tillgng till E-bcker",ACCESS_SHOP:"Tillgng till Butik (Shop)"},k=j=>w[j]?w[j]:j.split("_").map(_=>_.charAt(0)+_.slice(1).toLowerCase()).join(" ");return a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-200 dark:border-[#3c4043] shadow-sm overflow-hidden animate-in slide-in-from-bottom-8",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center bg-gray-50 dark:bg-[#131314]",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[a.jsx(pi,{size:20,className:"text-indigo-600"}),"Rollhantering"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Skapa och redigera systemroller och behrigheter."})]}),a.jsxs("button",{onClick:x,className:"text-xs bg-indigo-600 text-white px-3 py-1.5 rounded-lg font-bold hover:bg-indigo-700 flex items-center gap-1",children:[a.jsx(jt,{size:14})," Ny Roll"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#282a2c] text-gray-500 dark:text-gray-400 border-b dark:border-[#3c4043]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Rollnamn"}),a.jsx("th",{className:"p-4",children:"Layout"}),a.jsx("th",{className:"p-4",children:"Beskrivning"}),a.jsx("th",{className:"p-4",children:"Behrigheter"}),a.jsx("th",{className:"p-4 text-right",children:"tgrd"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:t.map(j=>{var _;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c]",children:[a.jsx("td",{className:"p-4 font-bold text-gray-900 dark:text-white",children:a.jsxs("div",{className:"flex items-center gap-2",children:[j.name,j.superAdmin&&a.jsx(Mn,{size:12,className:"text-amber-500",title:"Super Admin"})]})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"text-xs bg-indigo-50 text-indigo-700 font-bold px-2 py-1 rounded",children:j.defaultDashboard||"-"})}),a.jsx("td",{className:"p-4 text-gray-500 dark:text-gray-400",children:j.description}),a.jsx("td",{className:"p-4",children:a.jsxs("span",{className:"bg-gray-100 dark:bg-[#3c4043] text-gray-600 dark:text-gray-300 px-2 py-1 rounded text-xs font-mono",children:[((_=j.permissions)==null?void 0:_.length)||0," st"]})}),a.jsxs("td",{className:"p-4 text-right flex justify-end gap-2 text-gray-500",children:[a.jsx("button",{onClick:()=>g(j),className:"p-2 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(Zl,{size:16})}),!["ADMIN","TEACHER","STUDENT"].includes(j.name)&&a.jsx("button",{onClick:()=>m(j.id),className:"p-2 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:a.jsx(qt,{size:16})})]})]},j.id)})})]})}),o&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold dark:text-white",children:c?"Redigera Roll":"Skapa Ny Roll"}),a.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:a.jsx(Je,{size:24})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Rollnamn (Unikt, VERSALER)"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg dark:bg-[#131314] dark:border-[#3c4043] dark:text-white font-mono uppercase",value:u.name,onChange:j=>h({...u,name:j.target.value.toUpperCase()}),disabled:c&&c.name==="ADMIN"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Beskrivning"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:u.description,onChange:j=>h({...u,description:j.target.value})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Dashboard Layout (Vy)"}),a.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-[#131314] dark:border-[#3c4043] dark:text-white",value:u.defaultDashboard,onChange:j=>h({...u,defaultDashboard:j.target.value}),children:[a.jsx("option",{value:"ADMIN",children:"ADMIN (Systemadministration)"}),a.jsx("option",{value:"PRINCIPAL",children:"PRINCIPAL (Analys & Skolversikt)"}),a.jsx("option",{value:"TEACHER",children:"TEACHER (Lrarpanel)"}),a.jsx("option",{value:"MENTOR",children:"MENTOR (Mentorversikt)"}),a.jsx("option",{value:"HALSOTEAM",children:"HALSOTEAM (Studenthlsa)"}),a.jsx("option",{value:"STUDENT",children:"STUDENT (Studentpanel)"}),a.jsx("option",{value:"GUARDIAN",children:"GUARDIAN (Vrdnadshavare)"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Styr vilken startvy anvndarna med denna roll fr."})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:u.isSuperAdmin,onChange:j=>h({...u,isSuperAdmin:j.target.checked}),disabled:c&&c.name==="ADMIN"}),a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Super Admin (Fullstndig tkomst)"})]}),a.jsx("p",{className:"text-xs text-gray-500 ml-7 mt-1",children:"Ger automatiskt tillgng till ALLA funktioner oavsett valda behrigheter nedan."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-800 dark:text-white mb-3",children:"Behrigheter"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(v).map(([j,_])=>a.jsxs("div",{className:"bg-gray-50 dark:bg-[#131314] p-3 rounded-lg border border-gray-100 dark:border-[#3c4043]",children:[a.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase mb-2 border-b border-gray-200 dark:border-gray-700 pb-1 flex justify-between",children:a.jsx("span",{children:y[j]||j})}),a.jsx("div",{className:"space-y-2",children:_.map(S=>a.jsxs("label",{className:"flex items-start gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-[#282a2c] p-1 rounded transition-colors group",children:[a.jsx("input",{type:"checkbox",className:"mt-0.5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:u.permissions.includes(S),onChange:()=>b(S)}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:k(S)}),a.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-gray-500 font-mono transition-colors",children:S})]})]},S))})]},j))})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 font-bold hover:bg-gray-200 dark:hover:bg-[#282a2c] rounded-lg",children:"Avbryt"}),a.jsx("button",{onClick:p,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none",children:"Spara Roll"})]})]})})]})},Eot=({users:t})=>{const[e,r]=N.useState(""),[n,s]=N.useState([]),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[d,u]=N.useState("CERTIFICATE"),h=async g=>{if(g){o(!0);try{const x=await O.documents.getMerits(g);s(x)}catch(x){console.error(x)}finally{o(!1)}}};N.useEffect(()=>{e&&h(e)},[e]);const f=async g=>{const x=g.target.files[0];if(!x||!e)return;c(!0);const m=new FormData;m.append("file",x),m.append("category",d),m.append("official","true");try{(await fetch(`/api/documents/user/${e}?category=${d}&official=true`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"X-Tenant-ID":localStorage.getItem("force_tenant")||""},body:m})).ok?(Ae.success("Merit uppladdad!"),h(e)):Ae.error("Uppladdning misslyckades")}catch(p){console.error(p),Ae.error("Ett fel uppstod")}finally{c(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-[#3c4043]",children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx(Mr,{className:"text-indigo-600",size:20}),"Hantera Elevers Meriter"]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Vlj Elev"}),a.jsxs("select",{className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-3 outline-none focus:ring-2 focus:ring-indigo-500",value:e,onChange:g=>r(g.target.value),children:[a.jsx("option",{value:"",children:"-- Vlj en student --"}),t.filter(g=>{var x;return((x=g.role)==null?void 0:x.name)==="STUDENT"||g.role==="STUDENT"}).map(g=>a.jsxs("option",{value:g.id,children:[g.fullName," (",g.username,")"]},g.id))]})]}),a.jsxs("div",{className:"w-full md:w-48",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Typ av Merit"}),a.jsxs("select",{className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-3 outline-none focus:ring-2 focus:ring-indigo-500",value:d,onChange:g=>u(g.target.value),children:[a.jsx("option",{value:"CERTIFICATE",children:"Kursbevis"}),a.jsx("option",{value:"TRANSCRIPT",children:"Betygsutdrag"}),a.jsx("option",{value:"ENROLLMENT_PROOF",children:"Studieintyg"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:`
                            flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all cursor-pointer bg-indigo-600 text-white hover:bg-indigo-700 shadow-md active:scale-95
                            ${!e||l?"opacity-50 pointer-events-none":""}
                        `,children:[l?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(Xa,{size:18}),l?"Laddar upp...":"Ladda upp merit",a.jsx("input",{type:"file",className:"hidden",onChange:f,disabled:!e||l})]})})]})]}),e&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl shadow-sm border border-gray-100 dark:border-[#3c4043] overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-50 bg-gray-50/50",children:a.jsx("h4",{className:"font-bold text-sm text-gray-700",children:"Aktiva meriter fr vald elev"})}),i?a.jsx("div",{className:"p-12 text-center text-gray-400",children:"Hmtar..."}):n.length===0?a.jsx("div",{className:"p-12 text-center text-gray-400 italic",children:"Inga meriter registrerade fr denna elev."}):a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50/50",children:a.jsxs("tr",{className:"text-left text-[10px] uppercase font-bold text-gray-400",children:[a.jsx("th",{className:"px-6 py-4",children:"Typ"}),a.jsx("th",{className:"px-6 py-4",children:"Filnamn"}),a.jsx("th",{className:"px-6 py-4",children:"Datum"}),a.jsx("th",{className:"px-6 py-4 text-right",children:"tgrder"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-50",children:n.map(g=>a.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"bg-indigo-50 text-indigo-600 px-2 py-1 rounded-md text-[10px] font-black uppercase tracking-wider",children:g.category})}),a.jsx("td",{className:"px-6 py-4 font-bold text-sm text-gray-700",children:g.fileName}),a.jsx("td",{className:"px-6 py-4 text-xs text-gray-400",children:g.uploadedAt}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx("button",{onClick:async()=>{window.confirm("Radera denna officiella merit?")&&Ae.error("Administrativ borttagning kommer i nsta steg!")},className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",children:a.jsx(qt,{size:16})})})]},g.id))})]})]})]})},Cot=({isOpen:t,onClose:e,onCourseCreated:r})=>{var x;const[n,s]=N.useState(1),[i,o]=N.useState(null),[l,c]=N.useState(!1),[d,u]=N.useState(null);if(!t)return null;const h=m=>{m.target.files&&m.target.files[0]&&o(m.target.files[0])},f=async()=>{if(!i)return;c(!0);const m=new FormData;m.append("file",i);try{const p=localStorage.getItem("token"),b=await fetch("/api/ai-course/generate-preview",{method:"POST",headers:{Authorization:`Bearer ${p}`},body:m});if(!b.ok)throw new Error("Failed to generate preview");const v=await b.json();u(v),s(2)}catch(p){console.error(p),Ae.error("Kunde inte generera kursfrslag. Frsk igen.")}finally{c(!1)}},g=async()=>{c(!0);try{const m=localStorage.getItem("token");if(!(await fetch("/api/ai-course/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(d)})).ok)throw new Error("Failed to create course");Ae.success("Kurs skapad!"),r==null||r(),e()}catch(m){console.error(m),Ae.error("Kunde inte skapa kursen.")}finally{c(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-3xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-900 dark:text-white",children:[a.jsx(fd,{className:"text-indigo-600"}),"AI Course Creator"]}),a.jsx("button",{onClick:e,children:a.jsx(Je,{className:"text-gray-400 hover:text-gray-600"})})]}),a.jsxs("div",{className:"p-8 overflow-y-auto flex-1",children:[n===1&&a.jsxs("div",{className:"text-center space-y-6",children:[a.jsx("div",{className:"w-24 h-24 bg-indigo-50 dark:bg-indigo-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Xa,{className:"w-10 h-10 text-indigo-600 dark:text-indigo-400"})}),a.jsx("h3",{className:"text-lg font-bold",children:"Ladda upp kursmaterial"}),a.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Ladda upp en PDF, Word-fil eller PowerPoint. AI:n analyserar innehllet och skapar en kursstruktur t dig."}),a.jsxs("label",{className:"block w-full max-w-md mx-auto cursor-pointer",children:[a.jsx("input",{type:"file",onChange:h,className:"hidden",accept:".pdf,.docx,.pptx,.txt"}),a.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-8 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:i?a.jsxs("div",{className:"flex items-center justify-center gap-2 text-indigo-600 font-bold",children:[a.jsx(xt,{}),i.name]}):a.jsx("span",{className:"text-gray-500",children:"Klicka fr att vlja fil"})})]}),a.jsx("button",{onClick:f,disabled:!i||l,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:l?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(M1,{className:"animate-spin"})," Analyserar..."]}):"Generera Kursfrslag"})]}),n===2&&d&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-xl border border-indigo-100 dark:border-indigo-800 space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:"Kurstitel"}),a.jsx("input",{type:"text",value:d.title,onChange:m=>u({...d,title:m.target.value}),className:"w-full bg-white dark:bg-gray-900 border border-indigo-200 dark:border-indigo-800 rounded-lg p-2 font-bold text-indigo-900 dark:text-indigo-200"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:"Beskrivning"}),a.jsx("textarea",{value:d.description,onChange:m=>u({...d,description:m.target.value}),className:"w-full bg-white dark:bg-gray-900 border border-indigo-200 dark:border-indigo-800 rounded-lg p-2 text-sm text-indigo-700 dark:text-indigo-300 h-20 resize-none"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:"Startdatum"}),a.jsx("input",{type:"date",value:d.startDate||"",onChange:m=>u({...d,startDate:m.target.value}),className:"w-full bg-white dark:bg-gray-900 border border-indigo-200 dark:border-indigo-800 rounded-lg p-2 text-sm text-indigo-700 dark:text-indigo-300"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:"Slutdatum"}),a.jsx("input",{type:"date",value:d.endDate||"",onChange:m=>u({...d,endDate:m.target.value}),className:"w-full bg-white dark:bg-gray-900 border border-indigo-200 dark:border-indigo-800 rounded-lg p-2 text-sm text-indigo-700 dark:text-indigo-300"})]})]})]}),a.jsx("div",{className:"space-y-4",children:(x=d.modules)==null?void 0:x.map((m,p)=>{var b;return a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[a.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3",children:m.title}),a.jsx("ul",{className:"space-y-2",children:(b=m.lessons)==null?void 0:b.map((v,y)=>a.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg",children:[v.isQuiz?a.jsx(Er,{size:16,className:"mt-0.5 text-orange-500"}):a.jsx(Gr,{size:16,className:"mt-0.5 text-green-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium block text-gray-900 dark:text-gray-300",children:v.title}),a.jsx("span",{className:"text-xs opacity-80 line-clamp-2",children:v.content})]})]},y))})]},p)})})]})]}),n===2&&a.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700 flex justify-end gap-3 bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("button",{onClick:()=>s(1),className:"px-6 py-2 text-gray-600 font-bold hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:"Tillbaka"}),a.jsxs("button",{onClick:g,disabled:l,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[l&&a.jsx(M1,{className:"animate-spin",size:18}),"Skapa Kurs"]})]})]})})},_F=()=>{var y;const{t}=nt(),[e,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState(null),[d,u]=N.useState({name:"",displayName:"",description:"",price:0,currency:"SEK",billingInterval:"MONTHLY",trialPeriodDays:0,maxUsers:-1,maxCourses:-1,maxStorage:-1,features:[],active:!0,isDefault:!1,sortOrder:0});N.useEffect(()=>{h()},[]);const h=async()=>{try{const w=await O.get("/subscription-plans");r(w)}catch(w){console.error("Failed to load plans:",w)}finally{s(!1)}},f=async w=>{w.preventDefault();try{l?await O.put(`/subscription-plans/${l.id}`,d):await O.post("/subscription-plans",d),h(),p()}catch(k){console.error("Failed to save plan:",k)}},g=async w=>{if(confirm(t("subscription_plans.delete_confirm")))try{await O.delete(`/subscription-plans/${w}`),h()}catch(k){console.error("Failed to delete plan:",k)}},x=async w=>{try{await O.patch(`/subscription-plans/${w}/toggle-status`),h()}catch(k){console.error("Failed to toggle status:",k)}},m=(w=null)=>{w?(c(w),u(w)):(c(null),u({name:"",displayName:"",description:"",price:0,currency:"SEK",billingInterval:"MONTHLY",trialPeriodDays:0,maxUsers:-1,maxCourses:-1,maxStorage:-1,features:[],active:!0,isDefault:!1,sortOrder:e.length})),o(!0)},p=()=>{o(!1),c(null)},b=()=>{const w=prompt(t("subscription_plans.enter_feature"));w&&u(k=>({...k,features:[...k.features||[],w]}))},v=w=>{u(k=>({...k,features:k.features.filter((j,_)=>_!==w)}))};return n?a.jsx("div",{className:"p-8 text-center",children:t("subscription_plans.loading")}):a.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(iK,{className:"text-indigo-600"}),t("subscription_plans.title")]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:t("subscription_plans.subtitle")})]}),a.jsxs("button",{onClick:()=>m(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-bold",children:[a.jsx(jt,{size:20}),t("subscription_plans.create_plan")]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(w=>a.jsxs("div",{className:`bg-white dark:bg-[#1E1F20] rounded-2xl border-2 p-6 ${w.isDefault?"border-indigo-600":"border-gray-200 dark:border-[#3c4043]"} relative`,children:[w.isDefault&&a.jsx("div",{className:"absolute top-4 right-4 bg-indigo-600 text-white text-xs font-bold px-2 py-1 rounded",children:t("subscription_plans.default_badge")}),!w.active&&a.jsx("div",{className:"absolute top-4 right-4 bg-gray-400 text-white text-xs font-bold px-2 py-1 rounded",children:t("subscription_plans.inactive_badge")}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:w.displayName}),a.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[a.jsx("span",{className:"text-4xl font-black text-indigo-600",children:w.price.toFixed(0)}),a.jsxs("span",{className:"text-gray-500",children:[w.currency,"/",w.billingInterval.toLowerCase()]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-6",children:w.description}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(vt,{size:16}),a.jsxs("span",{children:[w.maxUsers===-1?t("subscription_plans.unlimited"):w.maxUsers," ",t("subscription_plans.users")]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(mg,{size:16}),a.jsxs("span",{children:[w.maxCourses===-1?t("subscription_plans.unlimited"):w.maxCourses," ",t("subscription_plans.courses")]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(fg,{size:16}),a.jsxs("span",{children:[w.maxStorage===-1?t("subscription_plans.unlimited"):`${w.maxStorage} GB`," ",t("subscription_plans.storage")]})]})]}),w.features&&w.features.length>0&&a.jsxs("div",{className:"border-t border-gray-200 dark:border-[#3c4043] pt-4 mb-4",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:t("subscription_plans.features")}),a.jsx("ul",{className:"space-y-1",children:w.features.map((k,j)=>a.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(Gr,{size:14,className:"text-green-600"}),k]},j))})]}),a.jsxs("div",{className:"flex gap-2 mt-6",children:[a.jsxs("button",{onClick:()=>m(w),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 dark:bg-[#282a2c] text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-[#3c4043] transition-colors text-sm font-bold",children:[a.jsx(Ql,{size:16}),t("subscription_plans.edit")]}),a.jsx("button",{onClick:()=>x(w.id),className:`flex-1 px-3 py-2 rounded-lg transition-colors text-sm font-bold ${w.active?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:w.active?t("subscription_plans.deactivate"):t("subscription_plans.activate")}),a.jsx("button",{onClick:()=>g(w.id),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:a.jsx(qt,{size:16})})]})]},w.id))}),i&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-[#3c4043]",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t(l?"subscription_plans.edit_plan":"subscription_plans.create_new_plan")})}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.plan_name_internal")}),a.jsx("input",{type:"text",value:d.name,onChange:w=>u({...d,name:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.display_name")}),a.jsx("input",{type:"text",value:d.displayName,onChange:w=>u({...d,displayName:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.description")}),a.jsx("textarea",{value:d.description,onChange:w=>u({...d,description:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.price")}),a.jsx("input",{type:"number",value:d.price,onChange:w=>u({...d,price:parseFloat(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.currency")}),a.jsxs("select",{value:d.currency,onChange:w=>u({...d,currency:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",children:[a.jsx("option",{value:"SEK",children:"SEK"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EUR",children:"EUR"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.trial_period_days")}),a.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",value:d.trialPeriodDays,onChange:w=>u({...d,trialPeriodDays:parseInt(w.target.value)}),min:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.billing_interval")}),a.jsxs("select",{value:d.billingInterval,onChange:w=>u({...d,billingInterval:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",children:[a.jsx("option",{value:"MONTHLY",children:t("subscription_plans.monthly")}),a.jsx("option",{value:"YEARLY",children:t("subscription_plans.yearly")}),a.jsx("option",{value:"LIFETIME",children:t("subscription_plans.lifetime")})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.max_users")}),a.jsx("input",{type:"number",value:d.maxUsers,onChange:w=>u({...d,maxUsers:parseInt(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.max_courses")}),a.jsx("input",{type:"number",value:d.maxCourses,onChange:w=>u({...d,maxCourses:parseInt(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.max_storage")}),a.jsx("input",{type:"number",value:d.maxStorage,onChange:w=>u({...d,maxStorage:parseInt(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.features")}),a.jsxs("div",{className:"space-y-2",children:[(y=d.features)==null?void 0:y.map((w,k)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:w,onChange:j=>{const _=[...d.features];_[k]=j.target.value,u({...d,features:_})},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white"}),a.jsx("button",{type:"button",onClick:()=>v(k),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200",children:a.jsx(Je,{size:16})})]},k)),a.jsx("button",{type:"button",onClick:b,className:"w-full px-4 py-2 border-2 border-dashed border-gray-300 dark:border-[#3c4043] rounded-lg text-gray-600 dark:text-gray-400 hover:border-indigo-600 hover:text-indigo-600 transition-colors",children:t("subscription_plans.add_feature")})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:d.active,onChange:w=>u({...d,active:w.target.checked}),className:"w-4 h-4"}),a.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:t("subscription_plans.active")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:d.isDefault,onChange:w=>u({...d,isDefault:w.target.checked}),className:"w-4 h-4"}),a.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:t("subscription_plans.default_plan")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:t("subscription_plans.sort_order")}),a.jsx("input",{type:"number",value:d.sortOrder,onChange:w=>u({...d,sortOrder:parseInt(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white"})]})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:p,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-[#3c4043] rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors font-bold",children:t("subscription_plans.cancel")}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-bold",children:t(l?"subscription_plans.update_plan":"subscription_plans.create_plan_btn")})]})]})]})})]})},Tot=()=>{const{t}=nt(),[e,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState("ALL"),[l,c]=N.useState({totalRevenue:0,pendingAmount:0,overdueAmount:0,paidCount:0}),[d,u]=N.useState(!1),[h,f]=N.useState(!1);N.useEffect(()=>{g()},[]);const g=async()=>{try{const k=await O.get("/invoices");r(k)}catch(k){console.error("Failed to load invoices:",k)}finally{s(!1)}},x=async k=>{alert("PDF generation started... (Check console for dummy link)"),await O.post(`/invoices/${k}/generate-pdf`),g()},m=async()=>{u(!0);try{const k=await O.get("/revenue/export/invoices",{responseType:"blob"}),j=window.URL.createObjectURL(new Blob([k])),_=document.createElement("a");_.href=j,_.setAttribute("download",`invoices_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(_),_.click(),_.parentNode.removeChild(_)}catch(k){console.error("Failed to export CSV:",k),alert("Failed to export CSV")}finally{u(!1)}},p=async k=>{if(confirm(t("invoices.send_reminder_confirm")))try{await O.post(`/invoices/${k}/send-reminder`),alert(t("invoices.reminder_sent")),g()}catch(j){console.error("Failed to send reminder:",j)}},b=async k=>{if(confirm(t("invoices.delete_confirm")))try{await O.delete(`/invoices/${k}`),g()}catch(j){console.error("Failed to delete invoice:",j)}},v=async(k,j)=>{if(confirm(t("invoices.refund_confirm"))){if(!j){alert(t("invoices.no_payment_details"));return}try{await O.post(`/payments/${j}/refund`),alert(t("invoices.refund_success")),g()}catch(_){console.error("Failed to refund payment:",_),alert(t("invoices.refund_failed"))}}},y=k=>{const j={DRAFT:{color:"bg-gray-100 text-gray-700",icon:a.jsx(Ql,{size:14})},PENDING:{color:"bg-yellow-100 text-yellow-700",icon:a.jsx(Tt,{size:14})},SENT:{color:"bg-blue-100 text-blue-700",icon:a.jsx(Wr,{size:14})},PAID:{color:"bg-green-100 text-green-700",icon:a.jsx(nr,{size:14})},OVERDUE:{color:"bg-red-100 text-red-700",icon:a.jsx(Dr,{size:14})},CANCELLED:{color:"bg-gray-100 text-gray-500",icon:a.jsx(eo,{size:14})}},_=j[k]||j.DRAFT;return a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${_.color}`,children:[_.icon,t(`invoices.${k.toLowerCase()}`)]})},w=i==="ALL"?e:e.filter(k=>k.status===i);return n?a.jsx("div",{className:"p-8 text-center",children:t("invoices.loading")}):a.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[a.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-[#1E1F20] p-4 rounded-xl shadow-sm border border-gray-200 dark:border-[#3c4043] mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-900 dark:text-white",children:[a.jsx(xt,{className:"text-indigo-600 dark:text-indigo-400"})," ",t("invoices.title")]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:m,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[a.jsx(Rn,{size:18})," ",t(d?"invoices.exporting":"invoices.export_csv")]}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[a.jsx(jt,{size:18})," ",t("invoices.create_invoice")]})]})]}),a.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:["ALL","DRAFT","PENDING","SENT","PAID","OVERDUE","CANCELLED"].map(k=>a.jsxs("button",{onClick:()=>o(k),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-colors ${i===k?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-[#282a2c] text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-[#3c4043]"}`,children:[k," (",k==="ALL"?e.length:e.filter(j=>j.status===k).length,")"]},k))}),a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#282a2c] border-b border-gray-200 dark:border-[#3c4043]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("invoices.invoice_number")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("invoices.customer")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("invoices.amount")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("invoices.issue_date")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("invoices.due_date")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("invoices.status")}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("invoices.actions")})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-[#3c4043]",children:w.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:t("invoices.no_invoices_found")})}):w.map(k=>{var j,_,S;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xt,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"font-mono text-sm font-bold text-gray-900 dark:text-white",children:k.invoiceNumber})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-bold",children:((j=k.user)==null?void 0:j.fullName)||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:(_=k.user)==null?void 0:_.email})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-sm font-black text-gray-900 dark:text-white",children:[(S=k.amount)==null?void 0:S.toFixed(2)," ",k.currency]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(k.issueDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(k.dueDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y(k.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:a.jsxs("div",{className:"flex gap-2 justify-end",children:[k.pdfUrl?a.jsx("button",{onClick:()=>window.open(k.pdfUrl,"_blank"),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View PDF",children:a.jsx(Xo,{size:16})}):a.jsx("button",{onClick:()=>x(k.id),className:"p-2 text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:"Generate PDF",children:a.jsx(Rn,{size:16})}),k.status==="PAID"&&k.payment&&a.jsx("button",{onClick:()=>v(k.id,k.payment.id),className:"p-2 text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg transition-colors",title:"Refund Payment",children:a.jsx(sn,{size:16})}),k.status==="PENDING"&&a.jsx("button",{onClick:()=>p(k.id),className:"p-2 text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:"Send Reminder",children:a.jsx(Wr,{size:16})}),a.jsx("button",{onClick:()=>b(k.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:a.jsx(qt,{size:16})})]})})]},k.id)})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-8",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:t("invoices.total_invoices")}),a.jsx("p",{className:"text-3xl font-black text-gray-900 dark:text-white",children:e.length})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:t("invoices.pending")}),a.jsx("p",{className:"text-3xl font-black text-yellow-600",children:e.filter(k=>k.status==="PENDING").length})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:t("invoices.paid")}),a.jsx("p",{className:"text-3xl font-black text-green-600",children:e.filter(k=>k.status==="PAID").length})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:t("invoices.overdue")}),a.jsx("p",{className:"text-3xl font-black text-red-600",children:e.filter(k=>k.status==="OVERDUE").length})]})]})]})},Oot=()=>{const[t,e]=N.useState(null),[r,n]=N.useState(!0),[s,i]=N.useState(!1),[o,l]=N.useState({provider:"STRIPE",apiKey:"",webhookSecret:"",isTestMode:!0,enabledMethods:"CARD,SWISH,INVOICE",isActive:!1,domainUrl:""});N.useEffect(()=>{c()},[]);const c=async()=>{try{const f=await O.get("/payment-settings");if(f.length>0){const g=f.find(x=>x.provider==="STRIPE")||f[0];e(g),l(g)}}catch(f){console.error("Failed to load payment settings:",f)}finally{n(!1)}};N.useEffect(()=>{c()},[]);const d=async()=>{i(!0);try{t!=null&&t.id?await O.put(`/payment-settings/${t.id}`,o):await O.post("/payment-settings",o),await c(),alert("Payment settings saved successfully!")}catch(f){console.error("Failed to save payment settings:",f),alert("Failed to save payment settings")}finally{i(!1)}},u=f=>{const g=o.enabledMethods.split(","),x=g.indexOf(f);x>-1?g.splice(x,1):g.push(f),l({...o,enabledMethods:g.filter(m=>m).join(",")})};if(r)return a.jsx("div",{className:"p-8 text-center",children:"Loading payment settings..."});const h=o.enabledMethods.split(",").filter(f=>f);return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600",children:a.jsx(hg,{size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Payment Gateway Settings"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Configure Stripe API integration"})]})]}),!o.isActive&&a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl",children:[a.jsx(Er,{size:20,className:"text-yellow-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-yellow-800 dark:text-yellow-200",children:"Payment Gateway Not Active"}),a.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Configure API keys and activate to enable payments"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(nw,{size:20})," API Configuration"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Provider"}),a.jsxs("select",{className:"w-full p-3 rounded-xl border border-gray-200 dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] text-gray-900 dark:text-white",value:o.provider,onChange:f=>l({...o,provider:f.target.value}),children:[a.jsx("option",{value:"STRIPE",children:"Stripe"}),a.jsx("option",{value:"PAYPAL",children:"PayPal (Not Implemented)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"API Key (Publishable Key)"}),a.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] text-gray-900 dark:text-white font-mono text-sm",placeholder:"pk_test_...",value:o.apiKey,onChange:f=>l({...o,apiKey:f.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Webhook Secret"}),a.jsx("input",{type:"password",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] text-gray-900 dark:text-white font-mono text-sm",placeholder:"whsec_...",value:o.webhookSecret,onChange:f=>l({...o,webhookSecret:f.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"System Domain URL"}),a.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-[#3c4043] bg-gray-50 dark:bg-[#131314] text-gray-900 dark:text-white font-mono text-sm",placeholder:"http://localhost:5174 or https://site.com",value:o.domainUrl,onChange:f=>l({...o,domainUrl:f.target.value})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for Stripe redirect URLs (Success/Cancel)."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"testMode",className:"w-5 h-5 rounded border-gray-300 text-indigo-600",checked:o.isTestMode,onChange:f=>l({...o,isTestMode:f.target.checked})}),a.jsx("label",{htmlFor:"testMode",className:"font-medium text-gray-700 dark:text-gray-300",children:"Test Mode (Use test API keys)"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"isActive",className:"w-5 h-5 rounded border-gray-300 text-indigo-600",checked:o.isActive,onChange:f=>l({...o,isActive:f.target.checked})}),a.jsxs("label",{htmlFor:"isActive",className:"font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[o.isActive&&a.jsx(nr,{size:16,className:"text-green-600"}),"Activate Payment Gateway"]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(yn,{size:20})," Enabled Payment Methods"]}),a.jsx("div",{className:"space-y-3",children:["CARD","SWISH","INVOICE"].map(f=>a.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-200 dark:border-[#3c4043] rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-300 text-indigo-600",checked:h.includes(f),onChange:()=>u(f)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:f}),a.jsxs("p",{className:"text-xs text-gray-500",children:[f==="CARD"&&"Credit/Debit Card via Stripe",f==="SWISH"&&"Swedish Mobile Payment",f==="INVOICE"&&"Invoice/Bank Transfer"]})]})]},f))})]}),a.jsx("div",{className:"flex justify-end p-4 bg-gray-50 dark:bg-[#131314] rounded-2xl border border-gray-200 dark:border-[#3c4043]",children:a.jsx("button",{onClick:d,disabled:s,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-bold disabled:opacity-50",children:s?"Saving...":"Save All Stripe Settings"})})]})},Iot=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState({code:"",discountType:"PERCENTAGE",discountValue:0,validFrom:"",validUntil:"",maxUses:-1,isActive:!0});N.useEffect(()=>{u()},[]);const u=async()=>{try{const m=await O.get("/promocodes");e(m)}catch(m){console.error("Failed to load promo codes:",m)}finally{n(!1)}},h=async m=>{if(confirm("Are you sure you want to delete this promo code?"))try{await O.delete(`/promocodes/${m}`),u()}catch(p){console.error("Failed to delete promo code:",p)}},f=async m=>{m.preventDefault();try{const p={...c};p.validFrom||(p.validFrom=null),p.validUntil||(p.validUntil=null),o?await O.put(`/promocodes/${o.id}`,p):await O.post("/promocodes",p),u(),x()}catch(p){console.error("Failed to save promo code:",p)}},g=(m=null)=>{m?(l(m),d({...m,validFrom:m.validFrom?m.validFrom.substring(0,16):"",validUntil:m.validUntil?m.validUntil.substring(0,16):""})):(l(null),d({code:"",discountType:"PERCENTAGE",discountValue:0,validFrom:"",validUntil:"",maxUses:-1,isActive:!0})),i(!0)},x=()=>{i(!1),l(null)};return r?a.jsx("div",{className:"p-8 text-center",children:"Loading promo codes..."}):a.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(q0,{className:"text-indigo-600"}),"Promo Codes"]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage discount codes and coupons"})]}),a.jsxs("button",{onClick:()=>g(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-bold",children:[a.jsx(jt,{size:20}),"Create Promo Code"]})]}),a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-[#282a2c] text-gray-700 dark:text-gray-300",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Code"}),a.jsx("th",{className:"p-4",children:"Discount"}),a.jsx("th",{className:"p-4",children:"Usage"}),a.jsx("th",{className:"p-4",children:"Valid Period"}),a.jsx("th",{className:"p-4",children:"Status"}),a.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-[#3c4043]",children:t.map(m=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-[#282a2c]",children:[a.jsx("td",{className:"p-4 font-mono font-bold text-indigo-600",children:m.code}),a.jsx("td",{className:"p-4 text-gray-900 dark:text-white",children:m.discountType==="PERCENTAGE"?`${m.discountValue}%`:`$${m.discountValue}`}),a.jsxs("td",{className:"p-4 text-gray-600 dark:text-gray-300",children:[m.currentUses," / ",m.maxUses===-1?"":m.maxUses]}),a.jsxs("td",{className:"p-4 text-sm text-gray-500",children:[a.jsxs("div",{children:[m.validFrom?new Date(m.validFrom).toLocaleDateString():"Start"," - "]}),a.jsx("div",{children:m.validUntil?new Date(m.validUntil).toLocaleDateString():"End"})]}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${m.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:m.isActive?"Active":"Inactive"})}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>g(m),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:a.jsx(Ql,{size:16})}),a.jsx("button",{onClick:()=>h(m.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:a.jsx(qt,{size:16})})]})})]},m.id))})]})}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-[#3c4043]",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o?"Edit Promo Code":"Create Promo Code"})}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Code"}),a.jsx("input",{type:"text",className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white uppercase",value:c.code,onChange:m=>d({...c,code:m.target.value.toUpperCase()}),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),a.jsxs("select",{className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",value:c.discountType,onChange:m=>d({...c,discountType:m.target.value}),children:[a.jsx("option",{value:"PERCENTAGE",children:"Percentage (%)"}),a.jsx("option",{value:"FIXED_AMOUNT",children:"Fixed Amount ($)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Value"}),a.jsx("input",{type:"number",className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",value:c.discountValue,onChange:m=>d({...c,discountValue:parseFloat(m.target.value)}),required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Valid From"}),a.jsx("input",{type:"datetime-local",className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",value:c.validFrom,onChange:m=>d({...c,validFrom:m.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Valid Until"}),a.jsx("input",{type:"datetime-local",className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",value:c.validUntil,onChange:m=>d({...c,validUntil:m.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Max Uses (-1 = unltd)"}),a.jsx("input",{type:"number",className:"w-full px-4 py-2 border rounded-lg bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white",value:c.maxUses,onChange:m=>d({...c,maxUses:parseInt(m.target.value)})})]}),a.jsxs("div",{className:"flex items-center gap-2 pt-8",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:c.isActive,onChange:m=>d({...c,isActive:m.target.checked})}),a.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Active"})]})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 border rounded-lg text-gray-700 dark:text-gray-300 font-bold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold",children:o?"Update":"Create"})]})]})]})})]})},Dot=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(""),[s,i]=N.useState(100),[o,l]=N.useState([]),[c,d]=N.useState(!1),[u,h]=N.useState("");N.useEffect(()=>{f()},[]),N.useEffect(()=>{r&&g()},[r,s]);const f=async()=>{try{const p=await O.logs.getFiles();e(p),p.length>0&&!r&&n(p[0])}catch(p){console.error("Failed to fetch log files",p)}},g=async()=>{if(r){d(!0);try{const p=await O.logs.getContent(r,s);l(p)}catch(p){l(["Error loading logs: "+p.message])}finally{d(!1)}}},x=p=>p.includes("ERROR")?"text-red-500":p.includes("WARN")?"text-yellow-500":p.includes("INFO")?"text-blue-500 dark:text-blue-400":p.includes("DEBUG")?"text-gray-500":"text-gray-800 dark:text-gray-300",m=o.filter(p=>p.toLowerCase().includes(u.toLowerCase()));return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between p-4 bg-white dark:bg-[#1e2022] rounded-lg border border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex gap-4 items-center w-full sm:w-auto",children:[a.jsxs("div",{className:"relative",children:[a.jsx(xt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),a.jsx("select",{value:r,onChange:p=>n(p.target.value),className:"pl-10 pr-4 py-2 border rounded-lg bg-gray-50 dark:bg-[#282a2c] dark:border-gray-700",children:t.map(p=>a.jsx("option",{value:p,children:p},p))})]}),a.jsxs("select",{value:s,onChange:p=>i(Number(p.target.value)),className:"py-2 px-3 border rounded-lg bg-gray-50 dark:bg-[#282a2c] dark:border-gray-700",children:[a.jsx("option",{value:100,children:"100 rader"}),a.jsx("option",{value:500,children:"500 rader"}),a.jsx("option",{value:1e3,children:"1000 rader"})]}),a.jsx("button",{onClick:g,className:`p-2 rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-300 ${c?"animate-spin":""}`,title:"Uppdatera",children:a.jsx(sn,{size:20})})]}),a.jsx("input",{type:"text",placeholder:"Sk i loggar...",value:u,onChange:p=>h(p.target.value),className:"w-full sm:w-64 px-4 py-2 border rounded-lg bg-gray-50 dark:bg-[#282a2c] dark:border-gray-700"})]}),a.jsx("div",{className:"bg-[#1e1e1e] text-gray-300 p-4 rounded-lg font-mono text-xs sm:text-sm overflow-auto h-[600px] border border-gray-800 shadow-inner",children:m.length===0?a.jsx("div",{className:"text-gray-500 italic text-center mt-20",children:"Inga loggar att visa..."}):m.map((p,b)=>a.jsx("div",{className:`whitespace-pre-wrap border-b border-gray-800/50 py-0.5 hover:bg-white/5 ${x(p)}`,children:p},b))}),a.jsxs("div",{className:"text-xs text-gray-500 text-right",children:["Visar ",m.length," av ",o.length," rader"]})]})},Mot=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(!1),[o,l]=N.useState(!1),c=N.useRef([]),d=N.useRef(!1),u=N.useRef(null),h=N.useRef(null);N.useEffect(()=>{const m=new CJ({brokerURL:`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws-log`,reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3,onConnect:()=>{n(!0),console.log("Connected to WebSocket"),m.subscribe("/topic/logs",p=>{if(d.current)return;const b=p.body;c.current=[...c.current,b].slice(-1e3),e([...c.current])})},onDisconnect:()=>{n(!1),console.log("Disconnected from WebSocket")},onWebSocketError:p=>{console.error("Error with websocket",p),n(!1)}});return m.activate(),u.current=m,()=>{u.current&&u.current.deactivate()}},[]),N.useEffect(()=>{!s&&h.current&&h.current.scrollIntoView({behavior:"smooth"})},[t,s]);const f=()=>{const m=!s;i(m),d.current=m},g=()=>{e([]),c.current=[]},x=m=>m.includes("ERROR")||m.includes("Exception")?"text-red-500 font-bold":m.includes("WARN")?"text-yellow-400 font-bold":m.includes("INFO")?"text-green-400":m.includes("DEBUG")?"text-blue-400":"text-green-400";return a.jsxs("div",{className:`flex flex-col bg-black rounded-lg overflow-hidden border border-gray-800 shadow-2xl transition-all duration-300 ${o?"fixed inset-0 z-50 rounded-none":"h-[600px]"}`,children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-900 border-b border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(V0,{className:"text-green-500",size:18}),a.jsxs("h2",{className:"text-green-500 font-mono text-sm font-bold tracking-wider",children:["SYSTEM_TERMINAL_V.1.0 ",r?a.jsx("span",{className:"text-xs bg-green-900 text-green-300 px-1 rounded ml-2",children:"ONLINE"}):a.jsx("span",{className:"text-xs bg-red-900 text-red-300 px-1 rounded ml-2",children:"OFFLINE"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:f,className:"p-1.5 hover:bg-gray-800 rounded text-gray-400 hover:text-white transition-colors",title:s?"D":"Paus",children:s?a.jsx(Yo,{size:16}):a.jsx(R1,{size:16})}),a.jsx("button",{onClick:g,className:"p-1.5 hover:bg-gray-800 rounded text-gray-400 hover:text-white transition-colors",title:"Rensa",children:a.jsx(qt,{size:16})}),a.jsx("button",{onClick:()=>l(!o),className:"p-1.5 hover:bg-gray-800 rounded text-gray-400 hover:text-white transition-colors",title:"Fullskrm",children:o?a.jsx(Sge,{size:16}):a.jsx(hK,{size:16})})]})]}),a.jsxs("div",{className:"flex-1 p-4 overflow-y-auto font-mono text-xs md:text-sm bg-black custom-scrollbar",children:[t.length===0?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-green-900/50 select-none",children:[a.jsx(V0,{size:48,className:"mb-4 opacity-20"}),a.jsx("p",{children:"INITIERAR ANSLUTNING..."}),a.jsx("p",{className:"text-[10px] mt-2",children:"VNTAR P DATASTRM..."})]}):t.map((m,p)=>a.jsxs("div",{className:`whitespace-pre-wrap py-0.5 hover:bg-white/5 break-all ${x(m)}`,children:[a.jsx("span",{className:"opacity-50 mr-2 select-none text-[10px]",children:new Date().toLocaleTimeString()}),m]},p)),a.jsx("div",{ref:h})]}),a.jsxs("div",{className:"bg-gray-900 px-4 py-1 text-[10px] text-gray-500 flex justify-between font-mono",children:[a.jsxs("span",{children:["BUFFER: ",t.length," RADER"]}),a.jsxs("span",{children:["WS: ",r?"CONNECTED":"DISCONNECTED"," // PORT: 8080"]})]})]})},eee=()=>{const{t}=nt(),[e,r]=N.useState([]),[n,s]=N.useState(null),[i,o]=N.useState([]),[l,c]=N.useState(null),[d,u]=N.useState([]),[h,f]=N.useState([]),[g,x]=N.useState(!1),[m,p]=N.useState(!1),[b,v]=N.useState(null),[y,w]=N.useState([]),[k,j]=N.useState(""),[_,S]=N.useState([]),[A,T]=N.useState(null),[E,C]=N.useState(""),[z,M]=N.useState(null),[F,D]=N.useState(""),[L,K]=N.useState(""),[$,R]=N.useState("");N.useEffect(()=>{ee(),Y()},[]);const Y=async()=>{try{const ne=await O.users.getAll(0,500),pe=(ne.content||ne||[]).filter(Ue=>{var Se;const kt=String(((Se=Ue.role)==null?void 0:Se.name)||Ue.Role||"").toUpperCase();return kt.includes("TEACHER")||kt.includes("ADMIN")||kt.includes("REKTOR")||kt.includes("MENTOR")});f(pe)}catch(ne){console.error("Failed to load staff",ne)}},ee=async()=>{try{x(!0);const ne=await O.principal.structure.getDepartments();r(ne||[])}catch{Ae.error("Kunde inte ladda avdelningar")}finally{x(!1)}},B=async ne=>{try{const pe=await O.principal.structure.getPrograms(ne);o(pe||[])}catch{Ae.error("Kunde inte ladda program")}},U=async ne=>{try{const pe=await O.principal.structure.getClasses(ne);u(pe||[])}catch{Ae.error("Kunde inte ladda klasser")}},V=async()=>{if(F)try{await O.principal.structure.createDepartment({name:F}),D(""),ee(),Ae.success("Avdelning skapad")}catch{Ae.error("Kunde inte skapa avdelning")}},se=async()=>{if(!(!L||!n))try{await O.principal.structure.createProgram({name:L,departmentId:n.id}),K(""),B(n.id),Ae.success("Program skapat")}catch{Ae.error("Kunde inte skapa program")}},Ne=async()=>{if(!(!$||!l))try{await O.principal.structure.createClass({name:$,programId:l.id}),R(""),U(l.id),Ae.success("Klass skapad")}catch{Ae.error("Kunde inte skapa klass")}},ie=async(ne,pe)=>{try{await O.principal.structure.updateClass(ne,{mentorId:pe}),Ae.success("Mentor uppdaterad"),U(l.id)}catch{Ae.error("Kunde inte uppdatera")}},q=async(ne,pe)=>{try{await O.principal.structure.updateClass(ne,{mainTeacherId:pe}),Ae.success("Huvudansvarig lrare uppdaterad"),U(l.id)}catch{Ae.error("Kunde inte uppdatera")}},H=async(ne,pe)=>{try{await O.principal.structure.addTeacher(ne,pe),Ae.success("Lrare tillagd"),M(null),U(l.id)}catch{Ae.error("Kunde inte lgga till lrare")}},Z=async(ne,pe)=>{try{await O.principal.structure.removeTeacher(ne,pe),Ae.success("Lrare borttagen"),U(l.id)}catch{Ae.error("Kunde inte ta bort lrare")}},te=async ne=>{if(E.trim())try{await O.principal.structure.updateClass(ne,{name:E}),Ae.success("Klassnamn uppdaterat"),T(null),U(l.id)}catch{Ae.error("Kunde inte uppdatera")}},ge=async ne=>{if(window.confirm(`r du sker p att du vill ta bort denna avdelning?

Alla program och klasser i avdelningen kommer ocks att tas bort.`))try{await O.principal.structure.deleteDepartment(ne),Ae.success("Avdelning borttagen"),(n==null?void 0:n.id)===ne&&(s(null),c(null),o([]),u([])),ee()}catch{Ae.error("Kunde inte ta bort avdelning")}},Ce=async ne=>{if(window.confirm(`r du sker p att du vill ta bort detta program?

Alla klasser i programmet kommer ocks att tas bort.`))try{await O.principal.structure.deleteProgram(ne),Ae.success("Program borttaget"),(l==null?void 0:l.id)===ne&&(c(null),u([])),B(n.id)}catch{Ae.error("Kunde inte ta bort program")}},Le=async ne=>{if(window.confirm("r du sker p att du vill ta bort denna klass?"))try{await O.principal.structure.deleteClass(ne),Ae.success("Klass borttagen"),U(l.id)}catch{Ae.error("Kunde inte ta bort klass")}},He=async ne=>{v(ne),p(!0);try{const pe=await O.principal.structure.getStudents(ne.id);w(pe||[])}catch(pe){console.error("Failed to load class students",pe)}},le=async ne=>{if(j(ne),ne.length<2){S([]);return}try{const pe=await O.users.search(ne),Ue=(pe.content||pe||[]).filter(kt=>!y.some(Se=>Se.id===kt.id));S(Ue)}catch(pe){console.error("Search failed",pe)}},Re=async ne=>{try{await O.principal.structure.addStudent(b.id,ne.id),w([...y,ne]),S(_.filter(pe=>pe.id!==ne.id)),Ae.success(t("principal.student_added"))}catch{Ae.error(t("principal.add_failed"))}},Ze=async ne=>{try{await O.principal.structure.removeStudent(b.id,ne),w(y.filter(pe=>pe.id!==ne)),Ae.success(t("principal.student_removed"))}catch{Ae.error(t("principal.remove_failed"))}},lt=ne=>ne?ne.fullName||`${ne.firstName} ${ne.lastName}`:"",rt=ne=>{const pe=new Set((ne.teachers||[]).map(Ue=>Ue.id));return h.filter(Ue=>!pe.has(Ue.id))};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[a.jsx("div",{className:"p-3 bg-indigo-600 text-white rounded-2xl shadow-lg",children:a.jsx(l5,{size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Organisationshantering"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Strukturera skolan med avdelningar, program och klasser."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-2xl border border-gray-100 dark:border-gray-800 flex flex-col h-[600px]",children:[a.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800 flex items-center justify-between",children:a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(P1,{size:18,className:"text-indigo-600"}),"Avdelningar"]})}),a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/20",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{value:F,onChange:ne=>D(ne.target.value),placeholder:"Ny avdelning...",className:"flex-1 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 rounded-lg text-sm px-3 py-2"}),a.jsx("button",{onClick:V,className:"p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:a.jsx(jt,{size:20})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:e.map(ne=>a.jsxs("div",{className:`group/dept w-full flex items-center justify-between p-3 rounded-xl transition-all cursor-pointer ${(n==null?void 0:n.id)===ne.id?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300":"hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,onClick:()=>{s(ne),c(null),u([]),B(ne.id)},children:[a.jsx("span",{className:"font-medium truncate",children:ne.name}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:pe=>{pe.stopPropagation(),ge(ne.id)},className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/40 rounded opacity-0 group-hover/dept:opacity-100 transition-all",title:"Ta bort avdelning",children:a.jsx(qt,{size:14})}),a.jsx(or,{size:16})]})]},ne.id))})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-2xl border border-gray-100 dark:border-gray-800 flex flex-col h-[600px]",children:[a.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800",children:a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(_d,{size:18,className:"text-emerald-600"}),"Program ",n&&a.jsxs("span",{className:"text-xs font-normal text-gray-400 ml-2",children:["(",n.name,")"]})]})}),n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/20",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{value:L,onChange:ne=>K(ne.target.value),placeholder:"Nytt program...",className:"flex-1 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 rounded-lg text-sm px-3 py-2"}),a.jsx("button",{onClick:se,className:"p-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:a.jsx(jt,{size:20})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:i.map(ne=>a.jsxs("div",{onClick:()=>{c(ne),U(ne.id)},className:`group/prog w-full flex items-center justify-between p-3 rounded-xl transition-all cursor-pointer ${(l==null?void 0:l.id)===ne.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300":"hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,children:[a.jsx("span",{className:"font-medium truncate",children:ne.name}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ce(ne.id)},className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/40 rounded opacity-0 group-hover/prog:opacity-100 transition-all",title:"Ta bort program",children:a.jsx(qt,{size:14})}),a.jsx(or,{size:16})]})]},ne.id))})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center text-gray-400",children:[a.jsx(vt,{size:32,className:"mb-2 opacity-20"}),a.jsx("p",{className:"text-sm",children:"Vlj en avdelning fr att se program"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-2xl border border-gray-100 dark:border-gray-800 flex flex-col h-[600px]",children:[a.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800",children:a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(vt,{size:18,className:"text-amber-600"}),"Klasser ",l&&a.jsxs("span",{className:"text-xs font-normal text-gray-400 ml-2",children:["(",l.name,")"]})]})}),l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/20",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{value:$,onChange:ne=>R(ne.target.value),placeholder:"Ny klass (t.ex. TE22A)...",className:"flex-1 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 rounded-lg text-sm px-3 py-2"}),a.jsx("button",{onClick:Ne,className:"p-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:a.jsx(jt,{size:20})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:d.map(ne=>a.jsxs("div",{className:"group w-full p-4 rounded-xl bg-gray-50 dark:bg-gray-800/30 border border-gray-100 dark:border-gray-700 hover:border-amber-200 dark:hover:border-amber-800 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A===ne.id?a.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[a.jsx("input",{type:"text",value:E,onChange:pe=>C(pe.target.value),className:"px-2 py-1 border rounded-lg text-sm bg-white dark:bg-gray-800 dark:text-white dark:border-gray-700 flex-1",autoFocus:!0,onKeyDown:pe=>pe.key==="Enter"&&te(ne.id)}),a.jsx("button",{onClick:()=>te(ne.id),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:a.jsx(Gr,{size:16})}),a.jsx("button",{onClick:()=>T(null),className:"p-1 text-gray-400 hover:bg-gray-100 rounded",children:a.jsx(Je,{size:16})})]}):a.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[a.jsx("span",{className:"text-base font-bold text-gray-900 dark:text-white",children:ne.name}),a.jsx("button",{onClick:()=>{T(ne.id),C(ne.name)},className:"p-1 text-gray-400 hover:text-indigo-600 rounded",children:a.jsx(h5,{size:14})})]}),a.jsxs("div",{className:"flex items-center gap-1 ml-2 shrink-0",children:[a.jsx("button",{onClick:()=>He(ne),className:"p-1.5 text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/40 rounded-lg transition-colors",title:"Hantera elever",children:a.jsx(vt,{size:14})}),a.jsx("button",{onClick:()=>Le(ne.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/40 rounded-lg transition-colors",children:a.jsx(qt,{size:14})})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsxs("label",{className:"flex items-center gap-1 text-[10px] font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:[a.jsx(Lr,{size:10}),"Mentor"]}),a.jsxs("select",{value:ne.mentorId||"",onChange:pe=>ie(ne.id,pe.target.value||null),className:"w-full text-xs bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg px-2 py-1.5 cursor-pointer focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"Vlj mentor..."}),h.map(pe=>a.jsx("option",{value:pe.id,children:lt(pe)},pe.id))]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsxs("label",{className:"flex items-center gap-1 text-[10px] font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:[a.jsx(cge,{size:10}),"Huvudansvarig lrare"]}),a.jsxs("select",{value:ne.mainTeacherId||"",onChange:pe=>q(ne.id,pe.target.value||null),className:"w-full text-xs bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg px-2 py-1.5 cursor-pointer focus:ring-1 focus:ring-amber-500 focus:border-amber-500",children:[a.jsx("option",{value:"",children:"Vlj huvudansvarig..."}),h.map(pe=>a.jsx("option",{value:pe.id,children:lt(pe)},pe.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-1 text-[10px] font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:[a.jsx(_d,{size:10}),"Lrare"]}),a.jsxs("div",{className:"space-y-1",children:[(ne.teachers||[]).map(pe=>a.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-md px-2 py-1 border border-gray-100 dark:border-gray-700 group/teacher",children:[a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:lt(pe)}),a.jsx("button",{onClick:()=>Z(ne.id,pe.id),className:"p-0.5 text-gray-400 hover:text-red-500 opacity-0 group-hover/teacher:opacity-100 transition-opacity",children:a.jsx(Je,{size:12})})]},pe.id)),z===ne.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("select",{onChange:pe=>{pe.target.value&&H(ne.id,pe.target.value)},className:"flex-1 text-xs bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg px-2 py-1.5 focus:ring-1 focus:ring-emerald-500",autoFocus:!0,children:[a.jsx("option",{value:"",children:"Vlj lrare..."}),rt(ne).map(pe=>a.jsx("option",{value:pe.id,children:lt(pe)},pe.id))]}),a.jsx("button",{onClick:()=>M(null),className:"p-1 text-gray-400 hover:bg-gray-100 rounded",children:a.jsx(Je,{size:14})})]}):a.jsxs("button",{onClick:()=>M(ne.id),className:"flex items-center gap-1 text-xs text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-md px-2 py-1 transition-colors w-full",children:[a.jsx(Ji,{size:12}),"Lgg till lrare"]})]})]})]},ne.id))})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center text-gray-400",children:[a.jsx(wge,{size:32,className:"mb-2 opacity-20"}),a.jsx("p",{className:"text-sm",children:"Vlj ett program fr att se klasser"})]})]})]}),m&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-xl shadow-xl w-full max-w-2xl flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center bg-gray-50 dark:bg-gray-800/30 rounded-t-xl",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Hantera elever: ",b==null?void 0:b.name]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Lgg till eller ta bort elever"})]}),a.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors",children:a.jsx(Je,{size:20})})]}),a.jsxs("div",{className:"p-6 flex-1 overflow-y-auto grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider mb-4",children:["Inskrivna elever (",y.length,")"]}),a.jsx("div",{className:"space-y-2",children:y.length===0?a.jsx("p",{className:"text-sm text-gray-400 italic py-4",children:"Inga elever"}):y.map(ne=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 group hover:border-red-200 dark:hover:border-red-800 transition-colors",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[ne.firstName," ",ne.lastName]}),a.jsx("button",{onClick:()=>Ze(ne.id),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/40 rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Ta bort frn klass",children:a.jsx(Je,{size:16})})]},ne.id))})]}),a.jsxs("div",{className:"border-l border-gray-100 dark:border-gray-800 pl-6",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider mb-4",children:"Lgg till elever"}),a.jsxs("div",{className:"relative mb-4",children:[a.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:"Sk elever...",className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 dark:text-white rounded-lg outline-none focus:ring-2 focus:ring-blue-500",value:k,onChange:ne=>le(ne.target.value)})]}),a.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[_.map(ne=>a.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg border border-transparent hover:border-blue-100 dark:hover:border-blue-800 transition-all",children:[a.jsxs("span",{className:"text-sm text-gray-900 dark:text-white",children:[ne.firstName," ",ne.lastName]}),a.jsx("button",{onClick:()=>Re(ne),className:"p-1.5 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-md transition-colors",children:a.jsx(jt,{size:16})})]},ne.id)),k.length>=2&&_.length===0&&a.jsx("p",{className:"text-xs text-gray-400 text-center py-4",children:"Inga resultat"}),k.length<2&&a.jsx("p",{className:"text-xs text-gray-400 text-center py-4",children:"Skriv minst 2 tecken fr att ska"})]})]})]}),a.jsx("div",{className:"p-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/30 flex justify-end rounded-b-xl",children:a.jsx("button",{onClick:()=>p(!1),className:"px-6 py-2 bg-gray-900 dark:bg-white dark:text-gray-900 text-white rounded-lg hover:bg-black dark:hover:bg-gray-100 transition-colors",children:"Stng"})})]})})]})},Lot=({isOpen:t,onClose:e,guardian:r,onUpdate:n})=>{const{t:s}=nt(),[i,o]=N.useState([]),[l,c]=N.useState(!1),[d,u]=N.useState(""),[h,f]=N.useState([]),[g,x]=N.useState(!1),m=async()=>{if(r){c(!0);try{const v=await O.admin.guardians.getDetails(r.id);o(v.links||[])}catch(v){console.error("Failed to fetch guardian details",v)}finally{c(!1)}}};N.useEffect(()=>{t&&r&&(m(),u(""),f([]))},[t,r]),N.useEffect(()=>{const v=setTimeout(async()=>{if(d.trim().length>1){x(!0);try{const y=await O.admin.guardians.searchStudents(d);f(y)}catch(y){console.error("Search failed",y)}finally{x(!1)}}else f([])},300);return()=>clearTimeout(v)},[d]);const p=async v=>{try{await O.admin.guardians.link(r.id,v),u(""),f([]),m(),n&&n()}catch{alert("Kunde inte koppla barnet.")}},b=async v=>{if(window.confirm("r du sker p att du vill ta bort kopplingen?"))try{await O.admin.guardians.unlink(v),m(),n&&n()}catch{alert("Kunde inte ta bort kopplingen.")}};return!t||!r?null:a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-2xl rounded-3xl shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center bg-gray-50/50 dark:bg-[#131314]/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:a.jsx(jr,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-black text-xl text-gray-900 dark:text-white leading-tight",children:r.fullName}),a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Vrdnadshavare Profil"})]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-xl transition-colors text-gray-500",children:a.jsx(Je,{size:20})})]}),a.jsxs("div",{className:"overflow-y-auto p-8 space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#131314] rounded-2xl border border-gray-100 dark:border-[#3c4043]",children:[a.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"E-post"}),a.jsx("p",{className:"font-bold text-sm text-gray-700 dark:text-gray-300 truncate",children:r.email})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#131314] rounded-2xl border border-gray-100 dark:border-[#3c4043]",children:[a.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Anvndarnamn"}),a.jsx("p",{className:"font-bold text-sm text-gray-700 dark:text-gray-300",children:r.username})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-black text-gray-900 dark:text-white uppercase tracking-wider",children:"Kopplade Barn"}),a.jsxs("span",{className:"px-2 py-0.5 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-[10px] font-black rounded-full border border-indigo-100 dark:border-indigo-800/50",children:[i.length," st"]})]}),l?a.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-400 gap-3",children:[a.jsx(ft,{className:"animate-spin text-indigo-500",size:32}),a.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Hmtar kopplingar..."})]}):i.length>0?a.jsx("div",{className:"space-y-3",children:i.map(v=>a.jsxs("div",{className:"group flex items-center justify-between p-4 bg-white dark:bg-[#282a2c] rounded-2xl border border-gray-100 dark:border-[#3c4043] hover:border-indigo-500/30 dark:hover:border-indigo-500/30 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-[#131314] flex items-center justify-center text-gray-400",children:a.jsx(_d,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-sm",children:v.student.fullName}),a.jsx("p",{className:"text-[10px] text-gray-500 font-medium",children:v.student.email})]})]}),a.jsx("button",{onClick:()=>b(v.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all opacity-0 group-hover:opacity-100",title:"Ta bort koppling",children:a.jsx(qt,{size:18})})]},v.id))}):a.jsx("div",{className:"py-8 text-center bg-gray-50 dark:bg-[#131314] rounded-2xl border-2 border-dashed border-gray-200 dark:border-[#3c4043]",children:a.jsx("p",{className:"text-sm font-bold text-gray-400",children:"Inga barn kopplade nnu."})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100 dark:border-[#3c4043]",children:[a.jsxs("h4",{className:"text-sm font-black text-gray-900 dark:text-white uppercase tracking-wider flex items-center gap-2",children:[a.jsx(jt,{size:16,className:"text-indigo-500"})," Koppla nytt barn"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:a.jsx(gr,{size:18})}),a.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3 bg-gray-50 dark:bg-[#131314] rounded-2xl border border-gray-100 dark:border-[#3c4043] focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/20 outline-none dark:text-white font-medium transition-all",placeholder:"Sk barn efter namn eller e-post...",value:d,onChange:v=>u(v.target.value)}),g&&a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:a.jsx(ft,{className:"animate-spin text-indigo-500",size:18})})]}),h.length>0&&a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-100 dark:border-[#3c4043] shadow-xl overflow-hidden animate-in slide-in-from-top-2 duration-200",children:h.map(v=>{var w,k;const y=i.find(j=>j.student.id===v.id);return a.jsxs("button",{disabled:y,onClick:()=>p(v.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors border-b last:border-0 border-gray-50 dark:border-[#3c4043] disabled:opacity-50 disabled:cursor-not-allowed group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-500 text-xs font-black",children:[(w=v.firstName)==null?void 0:w[0],(k=v.lastName)==null?void 0:k[0]]}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-sm",children:v.fullName}),a.jsx("p",{className:"text-[10px] text-gray-500",children:v.email})]})]}),y?a.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Redan kopplad"}):a.jsx(jt,{size:18,className:"text-indigo-500 group-hover:scale-110 transition-transform"})]},v.id)})}),d.trim().length>1&&!g&&h.length===0&&a.jsx("p",{className:"text-center text-xs font-bold text-gray-400",children:"Inga elever matchade skningen."})]})]}),a.jsx("div",{className:"p-6 bg-gray-50 dark:bg-[#131314] border-t border-gray-100 dark:border-[#3c4043] flex justify-end",children:a.jsx("button",{onClick:e,className:"px-6 py-2.5 bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#3c4043] text-gray-700 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-all text-sm shadow-sm",children:"Stng"})})]})})},Rot=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(""),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,h]=N.useState(null),f=async()=>{n(!0),h(null);try{const m=await O.admin.guardians.getAll();e(m||[])}catch(m){console.error("Failed to fetch guardians",m),h("Kunde inte hmta vrdnadshavare. Kontrollera behrighet och ntverk.")}finally{n(!1)}};N.useEffect(()=>{f()},[]);const g=t.filter(m=>{var p,b,v;return((p=m.fullName)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((b=m.email)==null?void 0:b.toLowerCase().includes(s.toLowerCase()))||((v=m.username)==null?void 0:v.toLowerCase().includes(s.toLowerCase()))}),x=m=>{l(m),d(!0)};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-black text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(vt,{className:"text-indigo-600",size:28}),"Vrdnadshavare"]}),a.jsx("p",{className:"text-sm text-gray-500 font-bold dark:text-gray-400 mt-1",children:"Hantera kopplingar mellan frldrar och elever"})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500 transition-colors",children:a.jsx(gr,{size:18})}),a.jsx("input",{type:"text",placeholder:"Sk vrdnadshavare...",className:"pl-12 pr-4 py-3 w-full md:w-80 bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all dark:text-white font-medium shadow-sm",value:s,onChange:m=>i(m.target.value)})]})]}),a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-3xl border border-gray-200 dark:border-[#3c4043] overflow-hidden shadow-sm",children:r?a.jsxs("div",{className:"py-24 flex flex-col items-center justify-center text-gray-400 gap-4",children:[a.jsx(ft,{className:"animate-spin text-indigo-500",size:48}),a.jsx("p",{className:"text-sm font-black uppercase tracking-widest animate-pulse",children:"Laddar vrdnadshavare..."})]}):u?a.jsxs("div",{className:"py-24 flex flex-col items-center justify-center text-red-500 gap-4",children:[a.jsx(Er,{size:48}),a.jsx("p",{className:"font-bold",children:u}),a.jsx("button",{onClick:f,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-all",children:"Frsk igen"})]}):g.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50/50 dark:bg-[#131314]/50 border-b border-gray-100 dark:border-[#3c4043]",children:[a.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-black text-gray-400 uppercase tracking-widest",children:"Namn"}),a.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-black text-gray-400 uppercase tracking-widest hidden md:table-cell",children:"Kontakt"}),a.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-black text-gray-400 uppercase tracking-widest",children:"Anvndarnamn"}),a.jsx("th",{className:"px-6 py-4 text-right text-[11px] font-black text-gray-400 uppercase tracking-widest",children:"tgrd"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-[#3c4043]",children:g.map(m=>{var p,b;return a.jsxs("tr",{onClick:()=>x(m),className:"group hover:bg-indigo-50/30 dark:hover:bg-indigo-900/10 cursor-pointer transition-all",children:[a.jsx("td",{className:"px-6 py-5",children:a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-black text-xs shadow-sm group-hover:scale-110 transition-transform",children:[(p=m.firstName)==null?void 0:p[0],(b=m.lastName)==null?void 0:b[0]]}),a.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:m.fullName})]})}),a.jsx("td",{className:"px-6 py-5 hidden md:table-cell",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(Qi,{size:14,className:"text-gray-400"}),a.jsx("span",{className:"font-medium",children:m.email})]})}),a.jsx("td",{className:"px-6 py-5",children:a.jsx("span",{className:"px-2.5 py-1 bg-gray-100 dark:bg-[#131314] text-gray-600 dark:text-gray-400 text-xs font-bold rounded-lg border border-gray-200 dark:border-[#3c4043]",children:m.username})}),a.jsx("td",{className:"px-6 py-5 text-right",children:a.jsx("button",{className:"p-2 text-indigo-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 group-hover:translate-x-1 transition-all",children:a.jsx(or,{size:20})})})]},m.id)})})]})}):a.jsxs("div",{className:"py-24 text-center",children:[a.jsx(vt,{className:"mx-auto text-gray-200 mb-4",size:64}),a.jsx("h3",{className:"text-lg font-bold text-gray-400 italic",children:"Inga vrdnadshavare matchar din skning"}),a.jsx("p",{className:"text-xs text-gray-400 mt-2 font-medium",children:"Prova ett annat namn eller anvndarnamn."})]})}),a.jsx(Lot,{isOpen:c,onClose:()=>d(!1),guardian:o,onUpdate:f})]})},Pot=()=>{const[t,e]=N.useState(null),[r,n]=N.useState(!0);N.useEffect(()=>{O.documents.getAdminStats().then(e).catch(i=>console.error("Failed to fetch storage stats",i)).finally(()=>n(!1))},[]);const s=i=>{if(!i)return"0 B";const o=1024,l=Math.floor(Math.log(i)/Math.log(o));return parseFloat((i/Math.pow(o,l)).toFixed(1))+" "+["B","KB","MB","GB","TB"][l]};return r?a.jsx("div",{className:"p-8 text-center bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-100 dark:border-[#3c4043]",children:"Laddar..."}):t?a.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-[#3c4043]",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Total Lagring"}),a.jsx("h3",{className:"text-2xl font-black text-indigo-600",children:s(t.totalUsed)}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Anvnds i hela systemet"})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-[#3c4043]",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Totala Filer"}),a.jsxs("h3",{className:"text-2xl font-black text-indigo-600",children:[t.totalDocuments," st"]}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Uppladdade dokument"})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-[#3c4043]",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Anvndare"}),a.jsxs("h3",{className:"text-2xl font-black text-indigo-600",children:[t.totalUsers," st"]}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Anvndare i systemet"})]})]})}):a.jsx("div",{className:"p-8 text-center bg-white dark:bg-[#1E1F20] rounded-xl border border-gray-100 dark:border-[#3c4043]",children:"Kunde inte hmta statistik."})},zot=({users:t,courses:e,teachers:r,fetchStats:n})=>{const{t:s}=nt(),i=Et(),{isModuleActive:o}=oa(),[l,c]=N.useState(()=>localStorage.getItem("admin_panel_tab")||"users"),d=M=>{c(M),localStorage.setItem("admin_panel_tab",M)},[u,h]=N.useState(!1),[f,g]=N.useState(!1),[x,m]=N.useState(null),[p,b]=N.useState(!1),[v,y]=N.useState(!1),[w,k]=N.useState(null),[j,_]=N.useState(!1),S=async M=>{if(window.confirm("r du sker p att du vill ta bort denna kurs? Detta gr inte att ngra."))try{await O.courses.delete(M),n()}catch(F){console.error("Failed to delete course",F),alert("Kunde inte ta bort kursen. Kontrollera att den inte har aktiva studenter.")}},A=async M=>{if(window.confirm("r du sker p att du vill ta bort denna anvndare? Detta gr inte att ngra."))try{await O.users.delete(M),n()}catch(F){console.error("Failed to delete user",F),alert("Kunde inte ta bort anvndaren.")}},T=[{category:"Allmnt",items:[{id:"users",label:"Anvndare",icon:vt},{id:"guardians",label:"Vrdnadshavare",icon:vt},{id:"courses",label:"Kurser",icon:gt},{id:"structure",label:"Skolstruktur",icon:l5},{id:"merits",label:"Meriter",icon:Mr},{id:"roles",label:"Roller",icon:pi}]},{category:"Ekonomi",hidden:!o("REVENUE"),items:[{id:"revenue",label:s("admin_tabs.revenue")||"versikt",icon:iK},{id:"revenue-plans",label:s("admin_tabs.subscription_plans")||"Planer",icon:q0},{id:"revenue-invoices",label:s("admin_tabs.invoices")||"Fakturor",icon:xt},{id:"revenue-payments",label:s("admin_tabs.payment_settings")||"Betalningar",icon:yn},{id:"revenue-promocodes",label:s("admin_tabs.promo_codes")||"Rabattkoder",icon:q0}]},{category:"System",items:[{id:"storage",label:"Lagring",icon:fg},{id:"logs",label:"Systemloggar (Fil)",icon:xt},{id:"terminal",label:"Debug Terminal (Live)",icon:V0}]}],[E,C]=N.useState(!1),z=()=>{switch(l){case"users":return a.jsx(fxe,{users:t,onNewUser:()=>h(!0),onEdit:M=>{m(M),g(!0)},onDelete:A});case"courses":return a.jsx(dxe,{courses:e,onNewCourse:()=>b(!0),onAiCourseClick:()=>_(!0),onEdit:M=>{k(M),y(!0)},onManage:M=>i(`/course/${M}`),onDelete:S});case"merits":return a.jsx(Eot,{users:t});case"structure":return a.jsx(eee,{});case"guardians":return a.jsx(Rot,{});case"roles":return a.jsx(Aot,{});case"storage":return a.jsx(Pot,{});case"logs":return a.jsx(Dot,{});case"terminal":return a.jsx(Mot,{});case"revenue":return a.jsx(_F,{});case"revenue-plans":return a.jsx(_F,{});case"revenue-invoices":return a.jsx(Tot,{});case"revenue-payments":return a.jsx(Oot,{});case"revenue-promocodes":return a.jsx(Iot,{});default:return a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Vlj en kategori i menyn"})}};return a.jsxs("div",{className:"flex bg-gray-50 dark:bg-[#151718] min-h-[600px] rounded-lg border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("aside",{className:`bg-white dark:bg-[#1e2022] w-64 border-r border-gray-200 dark:border-[#3c4043] flex-shrink-0 flex flex-col ${E?"block absolute z-50 h-full":"hidden md:flex"}`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-[#3c4043] flex items-center justify-between",children:[a.jsx("h2",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:"Admin"}),a.jsx("button",{className:"md:hidden",onClick:()=>C(!1),children:"X"})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:T.map((M,F)=>!M.hidden&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 px-2",children:M.category}),a.jsx("div",{className:"space-y-1",children:M.items.map(D=>a.jsxs("button",{onClick:()=>{d(D.id),C(!1)},className:`w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${l===D.id?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#282a2c]"}`,children:[a.jsx(D.icon,{size:18}),D.label]},D.id))})]},F))})]}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0",children:[a.jsxs("div",{className:"md:hidden p-4 bg-white dark:bg-[#1e2022] border-b border-gray-200 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("span",{className:"font-bold",children:"Meny"}),a.jsx("button",{onClick:()=>C(!0),className:"p-2 bg-gray-100 rounded",children:a.jsx(yn,{size:20})})]}),a.jsx("div",{className:"p-6 overflow-x-auto",children:z()})]}),a.jsx(MG,{isOpen:u,onClose:()=>h(!1),onUserCreated:n}),a.jsx(xxe,{isOpen:f,onClose:()=>g(!1),onUserUpdated:n,userToEdit:x}),a.jsx(bxe,{isOpen:p,onClose:()=>b(!1),onCourseCreated:n,teachers:r}),a.jsx(yxe,{isOpen:v,onClose:()=>y(!1),onCourseUpdated:n,teachers:r,courseToEdit:w}),a.jsx(Cot,{isOpen:j,onClose:()=>_(!1),onCourseCreated:()=>{n(),_(!1)}})]})},Uj=()=>{const{t}=nt(),e=Et(),r=zn(),{isModuleActive:n}=oa(),s=new URLSearchParams(r.search),i=s.get("tab")||"administration",o=r.pathname.startsWith("/enterprise/whitelabel"),l=r.pathname==="/admin/community",c=r.pathname==="/admin/gamification-management",d=[{id:"administration",label:t("admin_tabs.administration")||"Administration",icon:vt,path:"/admin?tab=administration"},{id:"system",label:t("admin_tabs.system_settings")||"Systeminstllningar",icon:yn,path:"/admin?tab=system"},{id:"tickets",label:t("admin_tabs.tickets")||"renden",icon:er,path:"/admin?tab=tickets"},{id:"gamification",label:"Gamification",icon:di,path:"/admin/gamification-management",visible:n("GAMIFICATION")},{id:"community",label:"Community",icon:cw,path:"/admin/community"}].filter(h=>h.visible!==!1),u=h=>{e(h.path)};return a.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:d.map(h=>{const f=h.icon;let g=!1;return h.id==="whitelabel"?g=o:h.id==="community"?g=l:h.id==="gamification"?g=c:!o&&!l&&!c&&(g=i===h.id,i==="administration"&&!s.get("tab")&&h.id==="administration"&&(g=!0)),a.jsxs("button",{onClick:()=>u(h),className:`flex items-center gap-2 px-4 py-2 font-medium transition-colors border-b-2 whitespace-nowrap ${g?"border-indigo-600 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[a.jsx(f,{size:20}),h.label]},h.id)})})},Kj=()=>a.jsxs("header",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Administration"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Hantera anvndare, rttigheter och kurser."})]}),$ot=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState("ALL"),[o,l]=N.useState(""),[c,d]=N.useState(null),[u,h]=N.useState(""),[f,g]=N.useState("");N.useEffect(()=>{x()},[]);const x=async()=>{n(!0);try{const w=(await O.support.getAllTickets()).sort((k,j)=>{const _={CRITICAL:0,HIGH:1,MEDIUM:2,LOW:3},S=_[k.severity]??99,A=_[j.severity]??99;return S!==A?S-A:new Date(j.createdAt)-new Date(k.createdAt)});e(w)}catch{Ae.error("Kunde inte hmta renden")}finally{n(!1)}},m=async(y,w)=>{try{await O.support.updateStatus(y,w),Ae.success(`Status uppdaterad till ${w}`),x(),(c==null?void 0:c.id)===y&&d(k=>({...k,status:w}))}catch{Ae.error("Kunde inte uppdatera status")}},p=async y=>{if(y.preventDefault(),!!u)try{await O.support.respond(c.id,u,f||c.severity),Ae.success("Svar skickat!"),h(""),g(""),x()}catch{Ae.error("Kunde inte skicka svar")}},b=t.filter(y=>{const w=s==="ALL"||y.status===s,k=o.toLowerCase(),j=y.message.toLowerCase().includes(k)||y.userName.toLowerCase().includes(k)||y.category.toLowerCase().includes(k);return w&&j}),v=y=>{switch(y){case"CRITICAL":return"bg-red-500 text-white";case"HIGH":return"bg-orange-500 text-white";case"MEDIUM":return"bg-yellow-400 text-gray-900";case"LOW":return"bg-green-500 text-white";default:return"bg-gray-400 text-white"}};return r?a.jsx("div",{className:"flex justify-center p-20",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",placeholder:"Sk renden...",value:o,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-2xl text-sm focus:ring-2 focus:ring-indigo-500 transition-all font-medium"})]}),a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:["ALL","OPEN","IN_PROGRESS","RESOLVED"].map(y=>a.jsx("button",{onClick:()=>i(y),className:`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-wider transition-all border ${s===y?"bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-200":"bg-white border-gray-100 text-gray-500 hover:border-indigo-200"}`,children:y==="ALL"?"Alla":y==="OPEN"?"ppna":y==="IN_PROGRESS"?"Pgr":"Klart"},y))})]}),a.jsxs("div",{className:"space-y-3 max-h-[calc(100vh-350px)] overflow-y-auto pr-2 custom-scrollbar",children:[b.map(y=>a.jsxs("div",{onClick:()=>d(y),className:`p-4 rounded-2xl border transition-all cursor-pointer group ${(c==null?void 0:c.id)===y.id?"bg-indigo-50 border-indigo-200 shadow-md":"bg-white border-gray-100 hover:border-indigo-100"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:`text-[10px] font-black px-2 py-0.5 rounded-md uppercase tracking-tighter ${v(y.severity)}`,children:y.severity}),a.jsx("span",{className:"text-[10px] text-gray-400 font-bold",children:new Date(y.createdAt).toLocaleDateString()})]}),a.jsx("h4",{className:"text-sm font-extrabold text-gray-900 truncate group-hover:text-indigo-600 transition-colors uppercase tracking-tight",children:y.category}),a.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 font-medium mt-1",children:y.message}),a.jsxs("div",{className:"flex items-center gap-2 mt-3 text-[10px] font-black text-gray-400 uppercase",children:[a.jsx(jr,{size:12})," ",y.userName]})]},y.id)),b.length===0&&a.jsx("div",{className:"text-center py-10 text-gray-400 font-bold",children:"Inga renden hittades."})]})]}),a.jsx("div",{className:"lg:col-span-2",children:c?a.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-xl overflow-hidden animate-in slide-in-from-right-4 duration-300",children:[a.jsxs("div",{className:"p-8 border-b border-gray-50 bg-gray-50/50",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:`text-xs font-black px-3 py-1 rounded-full uppercase tracking-widest shadow-sm ${v(c.severity)}`,children:c.severity}),a.jsxs("span",{className:"text-xs font-black uppercase text-gray-400 tracking-widest bg-white px-2 py-1 rounded border border-gray-100",children:["#T-",c.id]})]}),a.jsx("h2",{className:"text-2xl font-black text-gray-900 uppercase tracking-tight leading-none",children:c.category})]}),a.jsxs("div",{className:"flex gap-2",children:[c.status!=="RESOLVED"&&a.jsxs("button",{onClick:()=>m(c.id,"RESOLVED"),className:"px-4 py-2 bg-green-500 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-green-600 transition-all shadow-md shadow-green-100 flex items-center gap-2",children:[a.jsx(nr,{size:16})," Markera som klar"]}),c.status==="RESOLVED"&&a.jsxs("button",{onClick:()=>m(c.id,"OPEN"),className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-gray-200 transition-all",children:[a.jsx(Tt,{size:16})," terppna"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-3 rounded-2xl border border-gray-100 shadow-sm",children:[a.jsx("span",{className:"block text-[10px] font-black text-gray-400 uppercase mb-1",children:"Anvndare"}),a.jsxs("span",{className:"text-xs font-bold text-gray-900 truncate flex items-center gap-1",children:[a.jsx(jr,{size:14,className:"text-indigo-500"})," ",c.userName]})]}),a.jsxs("div",{className:"bg-white p-3 rounded-2xl border border-gray-100 shadow-sm",children:[a.jsx("span",{className:"block text-[10px] font-black text-gray-400 uppercase mb-1",children:"Skapad"}),a.jsxs("span",{className:"text-xs font-bold text-gray-900 truncate flex items-center gap-1",children:[a.jsx(Tt,{size:14,className:"text-indigo-500"})," ",new Date(c.createdAt).toLocaleString()]})]}),a.jsxs("div",{className:"bg-white p-3 rounded-2xl border border-gray-100 shadow-sm col-span-2",children:[a.jsx("span",{className:"block text-[10px] font-black text-gray-400 uppercase mb-1",children:"Sida vid fel"}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600 truncate flex items-center gap-1",children:[a.jsx(Gu,{size:14}),a.jsx("a",{href:c.contextUrl,target:"_blank",rel:"noreferrer",className:"hover:underline",children:c.contextUrl||"N/A"})]})]})]})]}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h5",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 border-l-4 border-indigo-500 pl-2",children:"Beskrivning"}),a.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 text-sm text-gray-700 font-medium leading-relaxed italic border border-gray-100 shadow-inner",children:['"',c.message,'"']})]}),a.jsxs("div",{className:"border-t border-gray-50 pt-8 mt-8",children:[a.jsxs("h5",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(Yl,{size:16,className:"text-indigo-600"}),"Hantera & Besvara"]}),c.adminResponse&&a.jsxs("div",{className:"mb-6 bg-indigo-50/50 rounded-2xl p-4 border border-indigo-100",children:[a.jsx("span",{className:"text-[10px] font-black text-indigo-500 uppercase block mb-1",children:"Tidigare svar"}),a.jsx("p",{className:"text-xs font-bold text-indigo-900 leading-relaxed",children:c.adminResponse})]}),a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx("textarea",{value:u,onChange:y=>h(y.target.value),placeholder:"Skriv ett svar till anvndaren...",className:"w-full bg-gray-50 border-none rounded-2xl px-4 py-4 text-sm focus:ring-2 focus:ring-indigo-500 font-medium min-h-[120px] transition-all shadow-inner"})}),a.jsxs("div",{className:"w-48 space-y-2",children:[a.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase block pl-1",children:"ndra svrighetsgrad"}),a.jsxs("select",{value:f||c.severity,onChange:y=>g(y.target.value),className:"w-full bg-gray-50 border-none rounded-xl text-xs font-black uppercase px-3 py-2 focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"LOW",children:"Lg (Grn)"}),a.jsx("option",{value:"MEDIUM",children:"Medium (Gul)"}),a.jsx("option",{value:"HIGH",children:"Hg (Orange)"}),a.jsx("option",{value:"CRITICAL",children:"Kritisk (Rd)"})]})]})]}),a.jsx("button",{type:"submit",disabled:!u,className:"bg-indigo-600 text-white px-8 py-3 rounded-2xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100 disabled:opacity-50",children:"Skicka svar & uppdatera"})]})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-20 bg-gray-50/50 rounded-3xl border-2 border-dashed border-gray-200",children:[a.jsx(nK,{size:64,className:"text-gray-200 mb-4"}),a.jsx("h3",{className:"text-gray-400 font-black uppercase tracking-widest",children:"Vlj ett rende fr att hantera det"})]})})]})},Fot=()=>{const{t}=nt(),[e]=db(),r=e.get("tab")||"administration",[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),d=async()=>{c(!0);try{const[h,f]=await Promise.all([O.users.getAll(0,1e3),O.courses.getAll()]);s(h.content||h||[]),o(f)}catch(h){console.error("Kunde inte hmta administrationsdata",h)}finally{c(!1)}};N.useEffect(()=>{d()},[]);const u=n.filter(h=>{var g;const f=typeof h.role=="string"?h.role:(g=h.role)==null?void 0:g.name;return f==="TEACHER"||f==="ADMIN"});return l?a.jsx("div",{className:"p-20 flex justify-center",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:40})}):a.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in pb-20",children:[a.jsx(Kj,{}),a.jsx(Uj,{}),a.jsxs("div",{className:"flex-1",children:[r==="administration"&&a.jsx(zot,{users:n,courses:i,teachers:u,fetchStats:d}),r==="system"&&a.jsx(LJ,{asTab:!0}),r==="tickets"&&a.jsx($ot,{})]})]})},Bot=({subjects:t,selectedSubject:e,onSelectSubject:r})=>{const n=t.reduce((s,i)=>s+(i.itemCount||0),0);return a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] p-4",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:a.jsx("span",{className:"text-lg",children:"mnen"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("button",{onClick:()=>r("ALL"),className:`w-full flex items-center justify-between px-3 py-2.5 rounded-xl transition-colors ${e==="ALL"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"hover:bg-gray-50 dark:hover:bg-[#282a2c] text-gray-700 dark:text-gray-300"}`,children:[a.jsx("span",{className:"font-medium",children:"Alla mnen"}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e==="ALL"?"bg-indigo-100 dark:bg-indigo-800 text-indigo-700 dark:text-indigo-200":"bg-gray-100 dark:bg-[#3c4043] text-gray-500"}`,children:n})]}),t.filter(s=>(s.itemCount||0)>0).map(s=>a.jsxs("button",{onClick:()=>r(s.name),className:`w-full flex items-center justify-between px-3 py-2.5 rounded-xl transition-colors ${e===s.name?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"hover:bg-gray-50 dark:hover:bg-[#282a2c] text-gray-700 dark:text-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Lm,{iconName:s.iconName,color:s.color,size:16}),a.jsx("span",{className:"font-medium text-sm",children:s.displayName})]}),s.itemCount>0&&a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e===s.name?"bg-indigo-100 dark:bg-indigo-800 text-indigo-700 dark:text-indigo-200":"bg-gray-100 dark:bg-[#3c4043] text-gray-500"}`,children:s.itemCount})]},s.name))]})]})},SF={QUIZ:{label:"Quiz",color:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",icon:Ku},ASSIGNMENT:{label:"Uppgift",color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",icon:Va},LESSON:{label:"Lektion",color:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",icon:gt}},Uot=({item:t,onClick:e})=>{var s,i;const r=SF[t.contentType]||SF.QUIZ,n=r.icon;return a.jsxs("div",{onClick:e,className:`bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200\r
                     dark:border-[#3c4043] overflow-hidden hover:shadow-xl\r
                     transition-all duration-300 hover:-translate-y-1 cursor-pointer group`,children:[a.jsxs("div",{className:"h-12 p-3 flex items-center gap-2",style:{backgroundColor:t.subjectColor||"#6366F1"},children:[a.jsx(Lm,{iconName:t.subjectIcon,color:"white",size:20}),a.jsx("span",{className:"text-white font-semibold text-sm truncate",children:t.subjectDisplayName||t.subject||"vrigt"})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"flex items-center gap-2 mb-3",children:a.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-bold px-2 py-1 rounded-lg ${r.color}`,children:[a.jsx(n,{size:12}),r.label]})}),a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2 line-clamp-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:t.title}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 line-clamp-2",children:t.description}),a.jsxs("div",{className:"flex items-center gap-2 mb-4 text-xs text-gray-400",children:[a.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-[#3c4043] rounded-full flex items-center justify-center overflow-hidden",children:t.authorProfilePictureUrl?a.jsx("img",{src:t.authorProfilePictureUrl,alt:"",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-[10px] font-bold text-gray-500",children:((i=(s=t.authorName)==null?void 0:s.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),a.jsx("span",{className:"truncate",children:t.authorName}),t.authorTenantName&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{className:"truncate",children:t.authorTenantName})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100 dark:border-[#3c4043]",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ya,{className:"text-yellow-400 fill-yellow-400",size:14}),a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:(t.averageRating||0).toFixed(1)}),a.jsxs("span",{className:"text-xs text-gray-400",children:["(",t.ratingCount||0,")"]})]}),a.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[a.jsx(Rn,{size:14}),a.jsx("span",{className:"text-xs",children:t.downloadCount||0})]})]})]})]})},Kot=({items:t,onSelectItem:e})=>!t||t.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-[#282a2c] rounded-full flex items-center justify-center mb-4",children:a.jsx(Ege,{className:"text-gray-400",size:40})}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Inget innehll hittades"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-md",children:"Prova att ndra dina filter eller sk efter ngot annat. Var frst med att dela material i denna kategori!"})]}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(r=>a.jsx(Uot,{item:r,onClick:()=>e(r)},r.id))}),Got=({itemId:t,onClose:e,onInstall:r,onViewAuthor:n,onDelete:s})=>{var S,A,T,E;const[i,o]=N.useState(null),[l,c]=N.useState(!0),[d,u]=N.useState(!1),[h,f]=N.useState(0),[g,x]=N.useState(""),[m,p]=N.useState(!1),[b,v]=N.useState(!1);N.useEffect(()=>{y()},[t]);const y=async()=>{c(!0);try{const C=await O.community.getItem(t);o(C)}catch(C){console.error("Failed to load item:",C)}finally{c(!1)}},w=async()=>{u(!0);try{await r(t),await y()}finally{u(!1)}},k=async()=>{if(h!==0){p(!0);try{await O.community.rate(t,h,g),await y(),f(0),x("")}catch(C){console.error("Failed to submit rating:",C),alert("Kunde inte skicka betyg: "+C.message)}finally{p(!1)}}},j=()=>{v(!0)},_=async()=>{v(!1),await y()};return l?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-8",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:48})})}):i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:e,children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl animate-in zoom-in-95",onClick:C=>C.stopPropagation(),children:[a.jsxs("div",{className:"p-6 relative",style:{backgroundColor:i.subjectColor||"#6366F1"},children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:a.jsx(Je,{className:"text-white",size:20})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Lm,{iconName:i.subjectIcon,color:"white",size:32}),a.jsxs("div",{children:[a.jsx("span",{className:"text-white/80 text-sm",children:i.subjectDisplayName}),a.jsx("h2",{className:"text-2xl font-bold text-white",children:i.title})]})]})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsx(gv,{icon:a.jsx(Ku,{size:20}),label:"Frgor",value:((S=i.metadata)==null?void 0:S.questionCount)||"-"}),a.jsx(gv,{icon:a.jsx(Tt,{size:20}),label:"Tid",value:(A=i.metadata)!=null&&A.estimatedMinutes?`~${i.metadata.estimatedMinutes} min`:"-"}),a.jsx(gv,{icon:a.jsx(_d,{size:20}),label:"Niv",value:i.difficulty||"-"}),a.jsx(gv,{icon:a.jsx(P1,{size:20}),label:"rskurs",value:i.gradeLevel||"-"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Beskrivning"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:i.description})]}),i.tags&&i.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:i.tags.map(C=>a.jsxs("span",{className:"bg-gray-100 dark:bg-[#282a2c] px-3 py-1 rounded-full text-sm text-gray-600 dark:text-gray-300",children:["#",C]},C))}),a.jsx("div",{className:"bg-gray-50 dark:bg-[#282a2c] rounded-xl p-4 mb-6 cursor-pointer hover:bg-gray-100 dark:hover:bg-[#3c4043] transition-colors",onClick:()=>n(i.authorUserId),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-[#3c4043] rounded-full flex items-center justify-center overflow-hidden",children:i.authorProfilePictureUrl?a.jsx("img",{src:i.authorProfilePictureUrl,alt:"",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-lg font-bold text-gray-500",children:((E=(T=i.authorName)==null?void 0:T.charAt(0))==null?void 0:E.toUpperCase())||"?"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-1",children:[i.authorName,a.jsx(Wo,{size:14,className:"text-gray-400"})]}),a.jsx("p",{className:"text-sm text-gray-500",children:i.authorTenantName})]})]})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Betyg & Recensioner"}),a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(C=>a.jsx(ya,{size:24,className:C<=Math.round(i.averageRating)?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"},C))}),a.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(i.averageRating||0).toFixed(1)}),a.jsxs("span",{className:"text-gray-500",children:["(",i.ratingCount," betyg)"]})]}),i.recentRatings&&i.recentRatings.length>0&&a.jsx("div",{className:"space-y-3 mb-4",children:i.recentRatings.map(C=>a.jsxs("div",{className:"bg-gray-50 dark:bg-[#282a2c] rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[[1,2,3,4,5].map(z=>a.jsx(ya,{size:12,className:z<=C.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"},z)),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 ml-2",children:C.reviewerName})]}),C.comment&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:C.comment})]},C.id))}),a.jsxs("div",{className:"bg-gray-50 dark:bg-[#282a2c] rounded-xl p-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ge ditt betyg"}),a.jsx("div",{className:"flex items-center gap-2 mb-3",children:[1,2,3,4,5].map(C=>a.jsx("button",{onClick:()=>f(C),className:"hover:scale-110 transition-transform",children:a.jsx(ya,{size:24,className:C<=h?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600 hover:text-yellow-300"})},C))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Skriv en kommentar (valfritt)",value:g,onChange:C=>x(C.target.value),className:"flex-1 px-3 py-2 bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#3c4043] rounded-lg text-sm"}),a.jsx("button",{onClick:k,disabled:h===0||m,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:m?a.jsx(ft,{className:"animate-spin",size:16}):a.jsx(Wr,{size:16})})]})]})]}),a.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/10 rounded-xl border border-indigo-100 dark:border-indigo-900/30",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"font-bold text-indigo-900 dark:text-indigo-200 flex items-center gap-2",children:[a.jsx(G0,{size:18}),"Learning Flow Integration"]}),a.jsx("span",{className:"text-[10px] uppercase font-bold text-indigo-500 bg-indigo-100 dark:bg-indigo-800/40 px-2 py-0.5 rounded",children:"Social"})]}),a.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mb-4",children:"Dela detta material till dina sociala lrokanaler fr att uppmuntra till kollegialt lrande."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>alert("Dela till Slack (Webhook konfigureras i Admin)"),className:"flex-1 py-2 px-3 bg-[#4A154B] text-white rounded-lg hover:bg-[#3d113e] transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[a.jsx(er,{size:16}),"Slack"]}),a.jsxs("button",{onClick:()=>alert("Dela till Teams (Webhook konfigureras i Admin)"),className:"flex-1 py-2 px-3 bg-[#444791] text-white rounded-lg hover:bg-[#373a76] transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[a.jsx(Wo,{size:16}),"Teams"]})]})]}),a.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-[#1E1F20] pt-4 border-t border-gray-200 dark:border-[#3c4043] flex gap-3",children:[s&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:j,className:"px-4 py-3 bg-gray-100 dark:bg-[#282a2c] text-gray-600 dark:text-gray-300 rounded-xl font-bold hover:bg-gray-200 dark:hover:bg-[#3c4043] transition-colors",children:a.jsx(Ql,{size:20})}),a.jsx("button",{onClick:()=>s(i.id),className:"px-4 py-3 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl font-bold hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors",children:a.jsx(qt,{size:20})})]}),a.jsx("button",{onClick:w,disabled:d||i.alreadyInstalled,className:`flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${i.alreadyInstalled?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 cursor-default":"bg-indigo-600 text-white hover:bg-indigo-700 disabled:bg-gray-300"}`,children:d?a.jsxs(a.Fragment,{children:[a.jsx(ft,{className:"animate-spin",size:20}),"Installerar..."]}):i.alreadyInstalled?a.jsxs(a.Fragment,{children:[a.jsx(nr,{size:20}),"Redan installerad"]}):a.jsxs(a.Fragment,{children:[a.jsx(Rn,{size:20}),"Lgg till i Resursbanken"]})})]})]})]})}),b&&a.jsx(II,{onClose:()=>v(!1),onPublished:_,userId:i.authorUserId,initialType:i.contentType,initialItemId:i.originalId||i.id,isEditMode:!0,editItemId:i.id})]}):null},gv=({icon:t,label:e,value:r})=>a.jsxs("div",{className:"bg-gray-50 dark:bg-[#282a2c] rounded-xl p-3 text-center",children:[a.jsx("div",{className:"flex justify-center mb-1 text-indigo-600 dark:text-indigo-400",children:t}),a.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:r}),a.jsx("p",{className:"text-xs text-gray-500",children:e})]}),qot=({userId:t,onClose:e,onSelectItem:r})=>{var u,h;const[n,s]=N.useState(null),[i,o]=N.useState(!0),[l,c]=N.useState(null);N.useEffect(()=>{t&&d()},[t]);const d=async()=>{o(!0);try{const f=await O.community.getAuthorProfile(t);s(f)}catch(f){console.error("Failed to load author profile:",f),c("Kunde inte ladda profilen.")}finally{o(!1)}};return t?a.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"relative w-full max-w-4xl bg-white dark:bg-[#1E1F20] rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-indigo-600 to-purple-700",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors z-10",children:a.jsx(Je,{size:20})}),a.jsx("div",{className:"absolute -bottom-16 left-8 p-1 bg-white dark:bg-[#1E1F20] rounded-3xl shadow-xl",children:n!=null&&n.profilePictureUrl?a.jsx("img",{src:n.profilePictureUrl,alt:n.name,className:"w-32 h-32 rounded-2xl object-cover"}):a.jsx("div",{className:"w-32 h-32 rounded-2xl bg-gray-100 dark:bg-[#282a2c] flex items-center justify-center text-gray-400",children:a.jsx(jr,{size:48})})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pt-20 px-8 pb-8",children:i?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[a.jsx(ft,{className:"animate-spin text-indigo-600 mb-4",size:40}),a.jsx("p",{children:"Hmtar lrarprofil..."})]}):l?a.jsx("div",{className:"text-center py-20 text-red-500 font-medium",children:l}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[n.name,((u=n.gamificationProfile)==null?void 0:u.forumRankIcon)&&a.jsx("span",{children:n.gamificationProfile.forumRankIcon}),n.totalResources>10&&a.jsx(Mr,{alt:"EduFlex Champion",className:"text-amber-500",size:20})]}),a.jsxs("p",{className:"text-indigo-600 dark:text-indigo-400 font-medium flex items-center gap-1",children:[a.jsx(md,{size:16}),n.tenantName," Teacher"]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:n.bio||"Ingen biografi tillgnglig."}),a.jsxs("div",{className:"flex items-center gap-3",children:[n.linkedinUrl&&a.jsx("a",{href:n.linkedinUrl,target:"_blank",rel:"noreferrer",className:"p-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 rounded-lg hover:scale-110 transition-transform",children:a.jsx(D1,{size:18})}),n.twitterUrl&&a.jsx("a",{href:n.twitterUrl,target:"_blank",rel:"noreferrer",className:"p-2 bg-sky-50 dark:bg-sky-900/20 text-sky-500 rounded-lg hover:scale-110 transition-transform",children:a.jsx(z1,{size:18})}),a.jsx("button",{className:"p-2 bg-gray-50 dark:bg-gray-800 text-gray-500 rounded-lg hover:scale-110 transition-transform",children:a.jsx(zs,{size:18})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/10 rounded-2xl",children:[a.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 mb-1",children:a.jsx(gt,{size:20})}),a.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n.totalResources}),a.jsx("div",{className:"text-xs text-gray-500",children:"Resurser"})]}),a.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/10 rounded-2xl",children:[a.jsx("div",{className:"text-purple-600 dark:text-purple-400 mb-1",children:a.jsx(Rn,{size:20})}),a.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n.totalDownloads}),a.jsx("div",{className:"text-xs text-gray-500",children:"Nedladdningar"})]}),a.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/10 rounded-2xl",children:[a.jsx("div",{className:"text-amber-500 mb-1",children:a.jsx(ya,{size:20})}),a.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n.averageRating.toFixed(1)}),a.jsx("div",{className:"text-xs text-gray-500",children:"Snittbetyg"})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-2xl",children:[a.jsx("div",{className:"text-gray-500 mb-1",children:a.jsx(zt,{size:20})}),a.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:new Date(n.memberSince).getFullYear()}),a.jsx("div",{className:"text-xs text-gray-500",children:"Gick med"})]})]})]}),a.jsxs("div",{className:"lg:col-span-2",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Senaste Bidrag"}),a.jsx("div",{className:"space-y-3",children:((h=n.recentResources)==null?void 0:h.length)>0?n.recentResources.map(f=>a.jsxs("button",{onClick:()=>r(f),className:"w-full flex items-center gap-4 p-4 bg-white dark:bg-[#282a2c] border border-gray-100 dark:border-transparent rounded-2xl hover:border-indigo-500 dark:hover:border-indigo-500/50 transition-all group text-left",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-[#1E1F20] flex items-center justify-center text-gray-400 group-hover:text-indigo-500 transition-colors",children:a.jsx(gt,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:f.title}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[a.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-md font-medium uppercase",children:f.contentType}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ya,{size:12,className:"text-amber-400"}),f.averageRating.toFixed(1)]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Rn,{size:12}),f.downloadCount]})]})]}),a.jsx(or,{className:"text-gray-300 group-hover:text-indigo-500 transition-colors"})]},f.id)):a.jsx("div",{className:"py-10 text-center text-gray-400 italic",children:"Inga publicerade resurser n."})}),n.totalResources>5&&a.jsxs("button",{className:"w-full mt-4 py-3 text-sm font-semibold text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 transition-colors flex items-center justify-center gap-2",children:["Visa alla resurser",a.jsx(Wo,{size:16})]})]})]})})]})}):null},Vot=({onSelectAuthor:t})=>{const[e,r]=N.useState([]),[n,s]=N.useState(!0);N.useEffect(()=>{i()},[]);const i=async()=>{try{const o=await O.community.getLeaderboard();r(o||[])}catch(o){console.error("Failed to load leaderboard:",o)}finally{s(!1)}};return n?a.jsxs("div",{className:"p-8 flex flex-col items-center justify-center bg-white dark:bg-[#1E1F20] rounded-3xl border border-gray-100 dark:border-transparent",children:[a.jsx(ft,{className:"animate-spin text-indigo-600 mb-3",size:32}),a.jsx("p",{className:"text-sm text-gray-500",children:"Hmtar topplistan..."})]}):a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-3xl border border-gray-100 dark:border-transparent shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-5 border-b border-gray-50 dark:border-gray-800 bg-gradient-to-r from-indigo-50/50 to-purple-50/50 dark:from-indigo-900/5 dark:to-purple-900/5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(di,{className:"text-amber-500",size:20}),a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"EduFlex Champions"})]}),a.jsx(dr,{className:"text-indigo-400",size:16})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Topp-pedagoger i communityt"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto max-h-[400px]",children:e.length>0?a.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-800",children:e.map((o,l)=>a.jsxs("button",{onClick:()=>t(o.userId),className:"w-full flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-[#282a2c] transition-colors group text-left",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl overflow-hidden shadow-sm ${l===0?"ring-2 ring-amber-400":l===1?"ring-2 ring-gray-300":l===2?"ring-2 ring-amber-600/50":""}`,children:o.profilePictureUrl?a.jsx("img",{src:o.profilePictureUrl,alt:o.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-gray-100 dark:bg-[#282a2c] flex items-center justify-center text-gray-400 text-xs",children:a.jsx(jr,{size:20})})}),l<3&&a.jsx("div",{className:`absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-sm ${l===0?"bg-amber-400":l===1?"bg-gray-300":"bg-amber-600"}`,children:l+1})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate flex items-center gap-1",children:[o.name,l===0&&a.jsx(Mr,{size:14,className:"text-amber-500"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500 mt-0.5",children:[a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx(gt,{size:10})," ",o.resourceCount]}),a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx(Rn,{size:10})," ",o.downloadCount]}),a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx(ya,{size:10,className:"text-amber-400"})," ",o.averageRating.toFixed(1)]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400",children:o.score}),a.jsx("div",{className:"text-[10px] text-gray-400",children:"XP"})]}),a.jsx(or,{className:"text-gray-200 group-hover:text-indigo-500 transition-colors",size:16})]},o.userId))}):a.jsx("div",{className:"p-8 text-center text-gray-400 italic text-sm",children:"Inga aktiva bidragsgivare n."})}),a.jsx("div",{className:"p-4 bg-gray-50/50 dark:bg-gray-900/20 border-t border-gray-50 dark:border-gray-800",children:a.jsxs("button",{className:"w-full py-2 text-xs font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 transition-colors flex items-center justify-center gap-1 bg-white dark:bg-[#282a2c] rounded-xl shadow-sm border border-gray-100 dark:border-transparent",children:[a.jsx(Sr,{size:12}),"Hur berknas rankningen?"]})})]})},Hot=({minimal:t=!1})=>{var K,$,R,Y,ee,B,U,V;const{currentUser:e}=At(),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState(!0),[c,d]=N.useState(""),[u,h]=N.useState("ALL"),[f,g]=N.useState("ALL"),[x,m]=N.useState("newest"),[p,b]=N.useState(0),[v,y]=N.useState(0),[w,k]=N.useState(null),[j,_]=N.useState(!1),[S,A]=N.useState(null);N.useEffect(()=>{const se=()=>_(!0);return window.addEventListener("community:publish",se),()=>window.removeEventListener("community:publish",se)},[]),N.useEffect(()=>{T()},[]),N.useEffect(()=>{c?C():E()},[u,f,x,p]);const T=async()=>{try{const se=await O.community.getSubjects();i(se||[])}catch(se){console.error("Failed to load subjects:",se)}},E=async()=>{l(!0);try{const se={page:p,size:20,sort:x};u!=="ALL"&&(se.subject=u),f!=="ALL"&&(se.type=f);const Ne=await O.community.browse(se);n(Ne.content||[]),y(Ne.totalPages||0)}catch(se){console.error("Failed to load community items:",se)}finally{l(!1)}},C=async()=>{if(!c.trim()){E();return}l(!0);try{const se=await O.community.search(c,p);n(se.content||[]),y(se.totalPages||0)}catch(se){console.error("Failed to search:",se)}finally{l(!1)}},z=N.useCallback(se=>{se.key==="Enter"&&(b(0),C())},[c]),M=async se=>{try{if(await O.community.install(se),(w==null?void 0:w.id)===se){const Ne=await O.community.getItem(se);k(Ne)}alert("Innehllet har installerats till dina resurser!")}catch(Ne){console.error("Failed to install:",Ne),alert("Kunde inte installera: "+Ne.message)}},F=async se=>{if(window.confirm("r du sker p att du vill ta bort detta innehll?"))try{await O.community.delete(se),k(null),E()}catch(Ne){console.error("Failed to delete:",Ne),alert("Kunde inte ta bort: "+Ne.message)}},D=(($=(K=e==null?void 0:e.role)==null?void 0:K.name)==null?void 0:$.includes("TEACHER"))||((Y=(R=e==null?void 0:e.role)==null?void 0:R.name)==null?void 0:Y.includes("ADMIN"))||((ee=e==null?void 0:e.role)==null?void 0:ee.isSuperAdmin),L=((U=(B=e==null?void 0:e.role)==null?void 0:B.name)==null?void 0:U.includes("ADMIN"))||((V=e==null?void 0:e.role)==null?void 0:V.isSuperAdmin);return a.jsxs("div",{className:`max-w-7xl mx-auto animate-in fade-in pb-20 ${t?"":"p-4 md:p-8"}`,children:[!t&&a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl shadow-lg",children:a.jsx(cw,{className:"text-white",size:28})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:"EduFlex Community"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Utforska och dela utbildningsmaterial"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative flex-1 md:w-80",children:[a.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",placeholder:"Sk material...",value:c,onChange:se=>d(se.target.value),onKeyDown:z,className:`w-full pl-10 pr-4 py-2.5 bg-white dark:bg-[#282a2c] border border-gray-200\r
                                         dark:border-transparent rounded-xl text-sm focus:ring-2 focus:ring-indigo-500\r
                                         focus:border-transparent outline-none`})]}),D&&a.jsxs("button",{onClick:()=>_(!0),className:`flex items-center gap-2 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700\r
                                         text-white font-semibold rounded-xl transition-colors shadow-lg\r
                                         hover:shadow-indigo-500/25`,children:[a.jsx(jt,{size:18}),a.jsx("span",{className:"hidden md:inline",children:"Publicera"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6 sticky top-4 self-start",children:[a.jsx(Bot,{subjects:s,selectedSubject:u,onSelectSubject:se=>{h(se),b(0)}}),a.jsx(Vot,{onSelectAuthor:A})]}),a.jsxs("div",{className:"lg:col-span-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[a.jsx("div",{className:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-[#282a2c] rounded-xl",children:["ALL","QUIZ","ASSIGNMENT","LESSON"].map(se=>a.jsx("button",{onClick:()=>{g(se),b(0)},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${f===se?"bg-white dark:bg-[#1E1F20] text-gray-900 dark:text-white shadow":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:se==="ALL"?"Alla":se==="QUIZ"?"Quiz":se==="ASSIGNMENT"?"Uppgift":"Lektion"},se))}),a.jsxs("div",{className:"relative ml-auto",children:[a.jsxs("select",{value:x,onChange:se=>{m(se.target.value),b(0)},className:`appearance-none pl-3 pr-8 py-2 bg-white dark:bg-[#282a2c] border\r
                                         border-gray-200 dark:border-transparent rounded-xl text-sm\r
                                         focus:ring-2 focus:ring-indigo-500 cursor-pointer`,children:[a.jsx("option",{value:"newest",children:"Nyast"}),a.jsx("option",{value:"popular",children:"Populrt"}),a.jsx("option",{value:"rating",children:"Bst betyg"})]}),a.jsx(Mo,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),o?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[a.jsx(ft,{className:"animate-spin text-indigo-600 mb-4",size:48}),a.jsx("p",{className:"text-gray-500",children:"Laddar innehll..."})]}):a.jsx(Kot,{items:r,onSelectItem:k}),v>1&&a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8",children:[a.jsx("button",{onClick:()=>b(Math.max(0,p-1)),disabled:p===0,className:`px-4 py-2 bg-white dark:bg-[#282a2c] border border-gray-200\r
                                         dark:border-transparent rounded-lg disabled:opacity-50`,children:"Fregende"}),a.jsxs("span",{className:"px-4 py-2 text-sm text-gray-500",children:["Sida ",p+1," av ",v]}),a.jsx("button",{onClick:()=>b(Math.min(v-1,p+1)),disabled:p>=v-1,className:`px-4 py-2 bg-white dark:bg-[#282a2c] border border-gray-200\r
                                         dark:border-transparent rounded-lg disabled:opacity-50`,children:"Nsta"})]})]})]}),w&&a.jsx(Got,{itemId:w.id,onClose:()=>k(null),onInstall:M,onDelete:L?F:void 0,onViewAuthor:se=>{k(null),A(se)}}),j&&a.jsx(II,{onClose:()=>_(!1),onPublished:()=>{_(!1),E()},userId:e==null?void 0:e.id}),S&&a.jsx(qot,{userId:S,onClose:()=>A(null),onSelectItem:se=>{A(null),k(se)}})]})},Wot=()=>{var M;const{t}=nt(),{currentUser:e}=At(),[r,n]=db(),s=r.get("tab")||"quiz",[i,o]=N.useState(s),[l,c]=N.useState("ALL"),[d,u]=N.useState([]),h=F=>{o(F),F==="quiz"?r.delete("tab"):r.set("tab",F),n(r,{replace:!0})},[f,g]=N.useState(0),[x,m]=N.useState("QUIZ"),[p,b]=N.useState(""),[v,y]=N.useState(""),[w,k]=N.useState(!1),[j,_]=N.useState(null),S=((M=e==null?void 0:e.role)==null?void 0:M.name)||(e==null?void 0:e.role),A=S==="TEACHER"||S==="ADMIN";N.useEffect(()=>{O.courses.getAll().then(F=>u(F))},[]);const T=async()=>{if(p.trim()){k(!0),_(null);try{const F=await O.ai.resources.generate(e.id,x,p,v);_(F),g(D=>D+1)}catch(F){console.error("AI Generation failed:",F)}finally{k(!1)}}},E=[{key:"quiz",label:"Mina Quiz",icon:a.jsx(Pn,{size:18})},{key:"assignments",label:"Mina Uppgifter",icon:a.jsx(xt,{size:18})},{key:"lessons",label:"Mina Lektioner",icon:a.jsx(gt,{size:18})},{key:"community",label:"Community",icon:a.jsx(cw,{size:18}),highlight:!0},{key:"ai-generate",label:"AI Generator",icon:a.jsx(dr,{size:18}),highlight:!0}],C=l==="ALL"?"GLOBAL":"COURSE",z=l==="ALL"?null:l;return a.jsxs("div",{className:"max-w-7xl mx-auto pb-20 animate-in fade-in",children:[a.jsxs("header",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Resursbank"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:i==="community"?"Hmta quiz, uppgifter och lektioner frn andra lrare.":"Hantera ditt undervisningsmaterial samlat p ett stlle."})]}),i==="community"?A&&a.jsxs("button",{onClick:()=>window.dispatchEvent(new CustomEvent("community:publish")),className:"flex items-center gap-2 px-4 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors font-bold shadow-lg shadow-purple-500/20",children:[a.jsx(jt,{size:20}),"Publicera i Community"]}):a.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-[#1E1F20] p-1 rounded-lg border border-gray-200 dark:border-[#3c4043] shadow-sm",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 px-2 uppercase",children:"Visar fr:"}),a.jsxs("select",{value:l,onChange:F=>c(F.target.value),className:"bg-gray-50 dark:bg-[#131314] border-none text-sm font-bold text-gray-900 dark:text-white rounded-md py-1.5 pl-2 pr-8 focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"ALL",children:"Alla Kurser (Globalt)"}),d.filter(F=>{var D;return S==="ADMIN"||F.teacherId===e.id||((D=F.teacher)==null?void 0:D.id)===e.id}).map(F=>a.jsx("option",{value:F.id,children:F.name},F.id))]})]})]}),a.jsx("div",{className:"flex gap-6 border-b border-gray-200 dark:border-[#3c4043] mb-8 overflow-x-auto",children:E.map(F=>a.jsxs("button",{onClick:()=>h(F.key),className:`pb-3 flex items-center gap-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap capitalize ${i===F.key?F.highlight?"border-purple-600 text-purple-600":"border-indigo-600 text-indigo-600":F.highlight?"border-transparent text-purple-500 hover:text-purple-700 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[F.icon,F.label,F.highlight&&i!==F.key&&a.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-[10px] bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full font-bold",children:"NY"})]},F.key))}),a.jsxs("div",{className:"min-h-[500px]",children:[i==="quiz"&&a.jsx(IJ,{courseId:z,currentUser:e,isTeacher:!0,mode:C},`quiz-${f}`),i==="assignments"&&a.jsx(DJ,{courseId:z,currentUser:e,isTeacher:!0,mode:C},`assignments-${f}`),i==="lessons"&&a.jsx(OJ,{courseId:z,isTeacher:!0,currentUser:e,mode:C},`lessons-${f}`),i==="community"&&a.jsx(Hot,{minimal:!0}),i==="ai-generate"&&a.jsx(Xot,{type:x,setType:m,prompt:p,setPrompt:b,context:v,setContext:y,generating:w,onGenerate:T,generatedResource:j,setActiveTab:o})]})]})},Xot=({type:t,setType:e,prompt:r,setPrompt:n,context:s,setContext:i,generating:o,onGenerate:l,generatedResource:c,setActiveTab:d})=>a.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-3xl border border-gray-200 dark:border-[#3c4043] p-8 shadow-xl shadow-purple-500/5",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/40 rounded-2xl",children:a.jsx(ege,{className:"text-purple-600 dark:text-purple-400",size:28})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"EduAI Generator"}),a.jsx("p",{className:"text-gray-500",children:"Skapa undervisningsmaterial p sekunder med AI."})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:["QUIZ","TASK","LESSON"].map(u=>a.jsxs("button",{onClick:()=>e(u),className:`p-4 rounded-2xl border-2 transition-all flex flex-col items-center gap-2 group ${t===u?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-100 dark:border-[#3c4043] hover:border-purple-200 dark:hover:border-purple-800"}`,children:[a.jsxs("div",{className:`p-2 rounded-xl transition-colors ${t===u?"bg-purple-600 text-white":"bg-gray-100 dark:bg-[#282a2c] text-gray-500 group-hover:text-purple-500"}`,children:[u==="QUIZ"&&a.jsx(Pn,{size:24}),u==="TASK"&&a.jsx(xt,{size:24}),u==="LESSON"&&a.jsx(gt,{size:24})]}),a.jsx("span",{className:`font-bold capitalize ${t===u?"text-purple-700 dark:text-purple-300":"text-gray-600 dark:text-gray-400"}`,children:u==="QUIZ"?"Quiz":u==="TASK"?"Uppgift":"Lektion"})]},u))}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Beskriv vad du vill skapa"}),a.jsx("textarea",{value:r,onChange:u=>n(u.target.value),placeholder:t==="QUIZ"?'T.ex. "Ett quiz om fotosyntesen fr rskurs 7, 5 frgor"':t==="TASK"?'T.ex. "En inlmningsuppgift om Java-loopar med fokus p arrays"':'T.ex. "En lektionsplan fr kllkritik p ntet"',rows:4,className:"w-full px-4 py-3 bg-gray-50 dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-2xl focus:ring-2 focus:ring-purple-500 outline-none transition-all resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Extra kontext / Material (Valfritt)"}),a.jsx("textarea",{value:s,onChange:u=>i(u.target.value),placeholder:"Klistra in text, ml eller instruktioner som AI:n ska utg ifrn...",rows:3,className:"w-full px-4 py-3 bg-gray-50 dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-2xl focus:ring-2 focus:ring-purple-500 outline-none transition-all resize-none"})]}),a.jsx("button",{onClick:l,disabled:o||!r.trim(),className:`w-full py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg ${o?"bg-gray-100 dark:bg-[#3c4043] text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 shadow-purple-500/20"}`,children:o?a.jsxs(a.Fragment,{children:[a.jsx(ft,{className:"animate-spin",size:20}),"Genererar ",t.toLowerCase(),"..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Wr,{size:20}),"Generera med AI"]})})]})]}),c&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-3xl border-2 border-green-500/30 p-6 flex items-center justify-between gap-6 animate-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/40 rounded-2xl",children:a.jsx(ci,{className:"text-green-600 dark:text-green-400",size:28})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Klart! Din ",t.toLowerCase()," r skapad"]}),a.jsxs("p",{className:"text-gray-500",children:['Den finns nu i din resursbank under "Mina ',t==="QUIZ"?"Quiz":t==="TASK"?"Uppgifter":"Lektioner",'".']})]})]}),a.jsx("button",{onClick:()=>d(t.toLowerCase()==="quiz"?"quiz":t.toLowerCase()==="task"?"assignments":"lessons"),className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors whitespace-nowrap",children:"Visa mina resurser"})]})]}),Yot=({userId:t=null})=>{const[e,r]=N.useState({}),[n,s]=N.useState(!0),[i,o]=N.useState({total:0,peakHour:"N/A"});N.useEffect(()=>{l()},[t]);const l=async()=>{try{s(!0);const f=await O.analytics.getHeatmap(t);r(f||{});const x=Object.values(f||{}).reduce((b,v)=>b+v,0);let m=-1,p="N/A";f&&Object.entries(f).forEach(([b,v])=>{if(v>m){m=v;const[y,w]=b.split(":");p=`${c(parseInt(y))} kl ${w}:00`}}),o({total:x,peakHour:p})}catch(f){console.error("Failed to fetch heatmap data",f)}finally{s(!1)}},c=f=>["","Mn","Tis","Ons","Tor","Fre","Lr","Sn"][f]||"",d=f=>!f||f===0?"bg-gray-100 dark:bg-gray-800/40":f<2?"bg-emerald-200 dark:bg-emerald-900/30":f<5?"bg-emerald-400 dark:bg-emerald-700/50":f<10?"bg-emerald-600 dark:bg-emerald-600":"bg-emerald-800 dark:bg-emerald-500",u=Array.from({length:24},(f,g)=>g),h=[1,2,3,4,5,6,7];return a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#3c4043] rounded-2xl p-6 shadow-sm overflow-hidden h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl",children:a.jsx(hs,{size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Aktivitetsmnster (7x24)"}),a.jsx("p",{className:"text-[10px] text-gray-500",children:"Aktivitet per veckodag och timme"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"block text-[10px] text-gray-400 font-bold uppercase tracking-wider",children:"Mest aktiv"}),a.jsx("span",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400",children:i.peakHour})]})]}),n?a.jsx("div",{className:"flex-1 animate-pulse bg-gray-50 dark:bg-[#131314] rounded-xl flex items-center justify-center",children:a.jsx("span",{className:"text-xs text-gray-400",children:"Genererar heatmap..."})}):a.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[a.jsxs("div",{className:"grid grid-cols-[30px_1fr] gap-2 flex-1",children:[a.jsx("div",{className:"flex flex-col justify-between py-1 text-[10px] font-bold text-gray-400",children:h.map(f=>a.jsx("div",{className:"h-4 flex items-center",children:c(f)},f))}),a.jsxs("div",{className:"relative overflow-x-auto custom-scrollbar-hide",children:[a.jsx("div",{className:"grid gap-1 min-w-[420px]",style:{gridTemplateColumns:"repeat(24, minmax(0, 1fr))"},children:h.map(f=>a.jsx(ae.Fragment,{children:u.map(g=>{const x=e[`${f}:${g}`]||0;return a.jsx("div",{className:`aspect-square rounded-[2px] transition-all cursor-help relative group ${d(x)}`,children:a.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-30",children:a.jsxs("div",{className:"bg-gray-900 text-white text-[10px] py-1 px-2 rounded whitespace-nowrap shadow-xl",children:[c(f)," kl ",g,":00: ",x," hndelser"]})})},`${f}-${g}`)})},f))}),a.jsx("div",{className:"grid gap-1 mt-2 text-[8px] text-gray-400 font-medium min-w-[420px]",style:{gridTemplateColumns:"repeat(24, minmax(0, 1fr))"},children:u.map(f=>a.jsx("div",{className:"text-center",children:f%4===0?`${f}:00`.padStart(5,"0"):""},f))})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 text-[10px] text-gray-400 font-medium border-t border-gray-100 dark:border-[#3c4043] mt-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:"Lg"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 rounded bg-gray-100 dark:bg-gray-800/40"}),a.jsx("div",{className:"w-2 h-2 rounded bg-emerald-200 dark:bg-emerald-900/30"}),a.jsx("div",{className:"w-2 h-2 rounded bg-emerald-600 dark:bg-emerald-500"})]}),a.jsx("span",{children:"Hg"})]}),a.jsxs("div",{className:"flex items-center gap-1 italic",children:[a.jsx(va,{size:10,className:"text-yellow-500"}),"Totalt ",i.total," hndelser senaste 30 dagarna."]})]})]})]})},Zot=({courseId:t})=>{const[e,r]=N.useState([]),[n,s]=N.useState(!0);N.useEffect(()=>{t&&i()},[t]);const i=async()=>{try{s(!0);const o=await O.analytics.getDropOff(t);r(o||[])}catch(o){console.error("Failed to fetch drop-off data",o)}finally{s(!1)}};return n?a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#282a2c] rounded-2xl p-6 shadow-sm",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-6 w-1/3 bg-gray-100 dark:bg-gray-800 rounded-lg"}),a.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(o=>a.jsx("div",{className:"h-12 bg-gray-50 dark:bg-[#131314] rounded-xl"},o))})]})}):!e||e.length===0?a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#282a2c] rounded-2xl p-6 shadow-sm text-center py-12",children:[a.jsx(vt,{className:"mx-auto text-gray-300 mb-4",size:48}),a.jsx("h3",{className:"text-gray-900 dark:text-white font-bold",children:"Ingen progressionsdata"}),a.jsx("p",{className:"text-sm text-gray-500 max-w-xs mx-auto mt-2",children:"Det finns inga lektioner eller studenter i den hr kursen fr att generera en drop-off analys."})]}):a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#282a2c] rounded-2xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 rounded-xl",children:a.jsx(Uge,{size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Avhoppsanalys (Funnel)"}),a.jsx("p",{className:"text-[10px] text-gray-500",children:"Var tappar vi studenterna? (Genomsynlighet per lektion)"})]})]}),a.jsx("div",{className:"space-y-3",children:e.map((o,l)=>{const c=l>0?e[l-1]:null,d=c?c.completionRate-o.completionRate:0,u=d>15;return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:`p-4 rounded-xl border transition-all flex items-center justify-between ${u?"bg-rose-50/50 dark:bg-rose-900/5 border-rose-100 dark:border-rose-900/30":"bg-gray-50 dark:bg-[#131314] border-transparent"}`,children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-xs ${u?"bg-rose-100 text-rose-600":"bg-gray-200 dark:bg-gray-800 text-gray-500"}`,children:l+1}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white",children:o.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("div",{className:"w-24 h-1.5 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${u?"bg-rose-500":"bg-emerald-500"}`,style:{width:`${o.completionRate}%`}})}),a.jsxs("span",{className:"text-[10px] font-bold text-gray-500",children:[o.completionRate,"% klarade"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-xs font-bold text-gray-900 dark:text-white",children:[o.completedCount," studenter"]}),u&&a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-rose-500 font-bold mt-1",children:[a.jsx(Dr,{size:10}),"-",d.toFixed(1),"% drop-off"]})]})]}),l<e.length-1&&a.jsx("div",{className:"h-4 flex justify-center items-center",children:a.jsx(Wa,{className:"rotate-90 text-gray-300 dark:text-gray-700",size:14})})]},o.id)})}),a.jsx("div",{className:"mt-6 p-4 bg-indigo-50 dark:bg-indigo-900/10 rounded-xl border border-indigo-100 dark:border-indigo-900/20",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 mt-0.5",children:a.jsx(vt,{size:16})}),a.jsxs("p",{className:"text-[11px] text-indigo-700 dark:text-indigo-300 leading-relaxed",children:[a.jsx("strong",{children:"Insikt:"})," ",e.some(o=>o.completionRate<50)?"Vi ser en betydande minskning i de senare delarna av kursen. vervg att frenkla materialet eller lgga till mer interaktiva vningar i dessa steg.":"Studenterna hller ett jmnt tempo genom kursen. Bra balans p materialet!"]})]})})]})},Qot=()=>{const[t,e]=N.useState("30d"),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState(null),[u,h]=N.useState(null),[f,g]=N.useState(!0),[x,m]=N.useState(null),[p,b]=N.useState(!1),[v,y]=N.useState(null);N.useEffect(()=>{w()},[t]);const w=async()=>{g(!0);try{const[j,_,S,A]=await Promise.all([O.analytics.getActivityTrend(t),O.analytics.getCoursePerformance(),O.analytics.getAtRiskStudents(),O.analytics.getOverview()]);n(j),i(_),_.length>0&&!u&&h(_[0].id),l(S),d(A)}catch(j){console.error("Failed to load analytics",j)}finally{g(!1)}},k=async j=>{y(j),b(!0),m(null);try{const _=await O.analytics.getAtRiskAiSummary(j.id);m(_.summary)}catch{m("Kunde inte hmta AI-analys fr tillfllet.")}finally{b(!1)}};return f&&!c?a.jsx("div",{className:"p-8 flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):a.jsxs("div",{className:"space-y-8 p-6 lg:p-10 max-w-[1600px] mx-auto animate-fade-in",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(Sr,{className:"text-indigo-600"}),"Education Analytics"]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Realtidsinsikter om studenternas engagemang och prestation."})]}),a.jsxs("div",{className:"flex gap-2 bg-white dark:bg-[#1E1F20] p-1 rounded-lg border border-gray-200 dark:border-[#3c4043]",children:[["7d","30d","90d"].map(j=>a.jsx("button",{onClick:()=>e(j),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${t===j?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-[#282a2c]"}`,children:j==="7d"?"Senaste Veckan":j==="30d"?"Mnad":"Kvartal"},j)),a.jsx("button",{onClick:w,className:"ml-2 px-3 text-gray-400 hover:text-indigo-600",children:a.jsx(Rn,{size:18})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(mv,{title:"Aktiva Studenter",value:(c==null?void 0:c.activeSessions)||0,sub:"Just nu",icon:a.jsx(vt,{className:"text-blue-500"})}),a.jsx(mv,{title:"Riskflaggade",value:o.length,sub:"Behver tgrd",icon:a.jsx(Dr,{className:"text-rose-500"})}),a.jsx(mv,{title:"Snittbetyg",value:`${Jot(s)}%`,sub:"ver alla kurser",icon:a.jsx(Sr,{className:"text-emerald-500"})}),a.jsx(mv,{title:"Kurser",value:(c==null?void 0:c.totalCourses)||0,sub:"Aktiva",icon:a.jsx(gt,{className:"text-indigo-500"})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043]",children:[a.jsx("h3",{className:"text-lg font-bold mb-6 text-gray-800 dark:text-white",children:"Anvndaraktivitet"}),a.jsx("div",{className:"h-80",children:a.jsx(bd,{width:"100%",height:"100%",children:a.jsxs(dQ,{data:r,children:[a.jsx(Pu,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),a.jsx(Xi,{dataKey:"date",stroke:"#9ca3af",fontSize:12,tickFormatter:j=>j.slice(8)}),a.jsx(Yi,{stroke:"#9ca3af",fontSize:12}),a.jsx(ga,{contentStyle:{backgroundColor:"#1f2937",color:"#fff",borderRadius:"8px",border:"none"},itemStyle:{color:"#fff"}}),a.jsx(xd,{}),a.jsx(ah,{type:"monotone",dataKey:"activeUsers",name:"Aktiva Anvndare",stroke:"#4f46e5",strokeWidth:3,dot:{r:4},activeDot:{r:6}}),a.jsx(ah,{type:"monotone",dataKey:"actions",name:"Interaktioner",stroke:"#10b981",strokeWidth:2,strokeDasharray:"5 5"})]})})})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043] overflow-hidden flex flex-col",children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-white flex items-center justify-between",children:[a.jsx("span",{children:"Riskzonen"}),a.jsxs("span",{className:"bg-rose-100 text-rose-800 text-xs px-2 py-1 rounded-full",children:[o.length," st"]})]}),a.jsx("div",{className:"overflow-y-auto flex-1 pr-2 space-y-3 custom-scrollbar",children:o.length===0?a.jsx("div",{className:"text-center text-gray-400 py-10",children:"Inga studenter i riskzonen! "}):o.map(j=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-[#282a2c] group hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-rose-200 dark:bg-rose-900 flex items-center justify-center text-rose-700 font-bold",children:j.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100",children:j.name}),a.jsxs("div",{className:"text-xs text-gray-500",children:[j.completionRate," klart  ",j.lastLogin?new Date(j.lastLogin).toLocaleDateString():"Aldrig inloggad"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>k(j),className:"p-2 text-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:"AI Analys",children:a.jsx(dr,{size:18})}),a.jsx("button",{className:"p-2 text-gray-300 hover:text-indigo-600 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Kontakta",children:a.jsx(er,{size:18})})]})]},j.id))})]})]}),(p||x)&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-lg rounded-2xl shadow-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl",children:a.jsx(dr,{size:20})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white",children:["AI-Insikt: ",v==null?void 0:v.name]}),a.jsx("p",{className:"text-xs text-gray-500 italic",children:"Genererad av Gemini AI"})]})]}),a.jsx("button",{onClick:()=>{m(null),b(!1)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:a.jsx(Je,{size:20})})]}),a.jsx("div",{className:"p-8",children:p?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 rounded animate-pulse w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 rounded animate-pulse w-full"}),a.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 rounded animate-pulse w-5/6"}),a.jsx("p",{className:"text-center text-xs text-gray-400 mt-6 font-medium animate-pulse",children:"Analyserar studentdata och mnster..."})]}):a.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[a.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-lg",children:x}),a.jsx("div",{className:"mt-8 p-4 bg-indigo-50 dark:bg-indigo-900/10 rounded-xl border border-indigo-100 dark:border-indigo-900/30",children:a.jsxs("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 font-medium flex items-center gap-2",children:[a.jsx(Dr,{size:14}),"Sammanfattningen r baserad p inlmningar, quizzar och aktivitetsloggar."]})})]})}),a.jsx("div",{className:"p-6 bg-gray-50 dark:bg-[#131314] flex justify-end",children:a.jsx("button",{onClick:()=>{m(null),b(!1)},className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-indigo-500/20",children:"Stng"})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(Yot,{})}),a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[a.jsx(cm,{size:14}),a.jsx("span",{children:"Vlj kurs fr analys:"})]}),a.jsx("select",{className:"bg-white dark:bg-[#1E1F20] border border-gray-200 dark:border-[#3c4043] rounded-lg px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-indigo-500",value:u||"",onChange:j=>h(j.target.value),children:s.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))})]}),u&&a.jsx(Zot,{courseId:u})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043]",children:[a.jsx("h3",{className:"text-lg font-bold mb-6 text-gray-800 dark:text-white",children:"Kursgenomstrmning (%)"}),a.jsx("div",{className:"h-80",children:a.jsx(bd,{width:"100%",height:"100%",children:a.jsxs(o2,{data:s,layout:"vertical",margin:{left:40},children:[a.jsx(Pu,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,opacity:.1}),a.jsx(Xi,{type:"number",domain:[0,100],hide:!0}),a.jsx(Yi,{dataKey:"name",type:"category",width:100,stroke:"#9ca3af",fontSize:12}),a.jsx(ga,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"#1f2937",color:"#fff",borderRadius:"8px"}}),a.jsx(ao,{dataKey:"completionRate",name:"Genomfrandegrad",fill:"#4f46e5",radius:[0,4,4,0],barSize:20,children:s.map((j,_)=>a.jsx(Tm,{fill:j.completionRate<50?"#ef4444":"#4f46e5"},`cell-${_}`))})]})})})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043]",children:[a.jsx("h3",{className:"text-lg font-bold mb-6 text-gray-800 dark:text-white",children:"Betygsfrdelning (Snitt)"}),a.jsx("div",{className:"h-80",children:a.jsx(bd,{width:"100%",height:"100%",children:a.jsxs(o2,{data:s,children:[a.jsx(Pu,{strokeDasharray:"3 3",vertical:!1,opacity:.1}),a.jsx(Xi,{dataKey:"name",stroke:"#9ca3af",fontSize:12}),a.jsx(Yi,{domain:[0,100],stroke:"#9ca3af"}),a.jsx(ga,{contentStyle:{backgroundColor:"#1f2937",color:"#fff",borderRadius:"8px"}}),a.jsx(ao,{dataKey:"avgGrade",name:"Snittbetyg (0-100)",fill:"#10b981",radius:[4,4,0,0],barSize:40})]})})})]})]})]})},mv=({title:t,value:e,sub:r,icon:n})=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-[#3c4043] flex items-center justify-between hover:scale-[1.02] transition-transform cursor-default",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t}),a.jsx("h3",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:e}),a.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 inline-block"}),r]})]}),a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-50 dark:bg-[#282a2c] flex items-center justify-center text-xl shadow-inner",children:n})]}),Jot=t=>{if(!t.length)return 0;const e=t.reduce((r,n)=>r+(n.avgGrade||0),0);return Math.round(e/t.length)},elt=()=>{const{courseId:t}=uh(),{currentUser:e,systemSettings:r}=At(),n=Et(),[s,i]=N.useState(null),[o,l]=N.useState(null),[c,d]=N.useState(!0);if(N.useEffect(()=>{(async()=>{if(e)try{const[f,g]=await Promise.all([O.courses.getOne(t),O.courses.getResult(t,e.id)]);i(f),l(g)}catch(f){console.error(f)}finally{d(!1)}})()},[t,e]),c)return a.jsx("div",{className:"flex h-screen items-center justify-center",children:"Laddar certifikat..."});if(!o||o.status!=="PASSED")return a.jsxs("div",{className:"flex flex-col h-screen items-center justify-center gap-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Certifikat saknas"}),a.jsx("p",{children:"Du har inte slutfrt denna kurs n eller s r certifikatet inte utfrdat."}),a.jsx("button",{onClick:()=>n(-1),className:"px-4 py-2 bg-gray-200 rounded",children:"G tillbaka"})]});const u=o.gradedAt?new Date(o.gradedAt).toLocaleDateString():new Date().toLocaleDateString();return a.jsxs("div",{className:"bg-gray-100 min-h-screen py-10 print:bg-white print:p-0",children:[a.jsxs("div",{className:"max-w-4xl mx-auto mb-6 flex justify-between items-center print:hidden px-4",children:[a.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[a.jsx(Wl,{size:20})," Tillbaka"]}),a.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 shadow-sm transition-colors font-bold",children:[a.jsx(Tge,{size:20})," Skriv ut PDF"]})]}),a.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow-2xl print:shadow-none print:w-full print:max-w-none aspect-[1.414] relative p-10 flex flex-col items-center text-center border-[20px] border-double border-indigo-900/10",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-[0.03] pointer-events-none",children:a.jsx(md,{size:400})}),a.jsxs("div",{className:"relative z-10 w-full h-full flex flex-col justify-between border border-gray-200 p-12",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"w-20 h-20 bg-indigo-600 text-white rounded-full flex items-center justify-center",children:a.jsx(Mr,{size:48})})}),a.jsx("h1",{className:"text-5xl font-serif text-gray-900 tracking-wider",children:"CERTIFIKAT"}),a.jsx("p",{className:"text-xl text-indigo-600 font-bold uppercase tracking-widest",children:"Fr godknd kurs"})]}),a.jsxs("div",{className:"my-10 space-y-6",children:[a.jsx("p",{className:"text-lg text-gray-500 italic",children:"Detta intygar att"}),a.jsx("h2",{className:"text-4xl font-bold text-gray-900 border-b-2 border-gray-300 pb-4 inline-block min-w-[300px]",children:e.fullName}),a.jsx("p",{className:"text-lg text-gray-500 italic mt-4",children:"har framgngsrikt genomfrt kursen"}),a.jsx("h3",{className:"text-3xl font-bold text-indigo-800",children:s.name}),a.jsxs("p",{className:"text-gray-600 font-medium",children:[s.courseCode,"  ",s.description.substring(0,100),s.description.length>100?"...":""]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-20 mt-12 w-full pt-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"border-b border-gray-400 pb-2 mb-2 font-handwriting text-2xl text-gray-800 font-bold italic",children:u}),a.jsx("p",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider",children:"Datum"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"border-b border-gray-400 pb-2 mb-2 font-handwriting text-2xl text-gray-800 font-bold italic",children:s.teacher?s.teacher.fullName:"EduFlex Academy"}),a.jsx("p",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider",children:"Kursansvarig"})]})]}),a.jsxs("div",{className:"mt-8 text-xs text-gray-400 font-mono",children:["Certifikat ID: ",o.id,"-",Date.now().toString().slice(-6),"  ",(r==null?void 0:r.site_name)||"EduFlex LMS"]})]})]})]})},tlt=()=>{var D,L,K,$,R,Y,ee,B,U,V,se,Ne,ie,q,H,Z,te,ge,Ce,Le,He;const{branding:t,hasAccess:e,updateBranding:r,uploadLogo:n,uploadFavicon:s,uploadLoginBackground:i,resetBranding:o}=io(),{themes:l}=LI(),[c,d]=N.useState(!1),[u,h]=N.useState(null),[f,g]=N.useState("general"),[x,m]=N.useState({brandName:"",footerText:"",welcomeMessage:"",defaultThemeId:"default",designSystem:"minimal",showPoweredBy:!0,enforceOrgTheme:!1,customEmailTemplates:!1}),[p,b]=N.useState({name:"Custom Theme",colors:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},mobile:{backgroundColor:"#111827",activeColor:"#f59e0b",inactiveColor:"#9ca3af",glassmorphism:!1,borderRadius:"24px",animationPreset:"bouncy",componentDepth:"floating",enabledThemes:["finsights-dark","cosmic-growth","eduflex-fresh"]}}),[v,y]=N.useState(!1),w=[{id:"eduflex-focus",name:"EduFlex Focus",description:"Lognt och plitligt tema fr studiero",colors:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"}},{id:"warm-sand",name:"Warm Sand",description:"Comfortable beige and cream tones",colors:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"}},{id:"modern-purple",name:"Modern Purple",description:"Contemporary purple with glassmorphism",colors:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"}},{id:"forest-dark",name:"Forest Dark",description:"Deep forest green with orange accents",colors:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#047857",700:"#065f46",800:"#064e3b",900:"#022c22",950:"#021713"}},{id:"neon-lime",name:"Neon Lime",description:"Bold neon lime for modern dashboards",colors:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"}},{id:"ocean-blue",name:"Ocean Blue",description:"Trustworthy blue for corporate environments",colors:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"}},{id:"sunset-orange",name:"Sunset Orange",description:"Energetic orange for creative teams",colors:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"}},{id:"ruby-red",name:"Ruby Red",description:"Bold red for attention-grabbing interfaces",colors:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"}}],k=[{id:"finsights-dark",name:"Finsights Dark",description:"Ultra-modern, mrk bento-grid design (High Contrast).",config:{backgroundColor:"#0F0F11",activeColor:"#FF6D5A",inactiveColor:"#333333",glassmorphism:!1,borderRadius:"32px",animationPreset:"smooth",componentDepth:"flat"}},{id:"eduflex-fresh",name:"EduFresh",description:"Lekfull, studsig och modern (Bubble Pop).",config:{backgroundColor:"#111827",activeColor:"#f59e0b",inactiveColor:"#9ca3af",glassmorphism:!1,borderRadius:"24px",animationPreset:"bouncy",componentDepth:"floating"}},{id:"cosmic-growth",name:"Cosmic Growth",description:"Topografisk, rymd-inspirerad (Topographic Gradient).",config:{backgroundColor:"#F9F9F9",activeColor:"#FF5A5F",inactiveColor:"#9CA3AF",glassmorphism:!1,borderRadius:"28px",animationPreset:"smooth",componentDepth:"shadow"}},{id:"midnight-glass",name:"Midnight Glass",description:"Futuristisk, mrk och elegant (Neo-Glass).",config:{backgroundColor:"#000000",activeColor:"#ffffff",inactiveColor:"#6b7280",glassmorphism:!0,borderRadius:"9999px",animationPreset:"smooth",componentDepth:"glass"}},{id:"clean-light",name:"Clean Light",description:"Minimalistisk, snabb och skarp (Minimal).",config:{backgroundColor:"#ffffff",activeColor:"#4f46e5",inactiveColor:"#6b7280",glassmorphism:!0,borderRadius:"8px",animationPreset:"minimal",componentDepth:"flat"}}];N.useEffect(()=>{if(t&&!c&&(m({brandName:t.brandName||"",footerText:t.footerText||"",welcomeMessage:t.welcomeMessage||"",defaultThemeId:t.defaultThemeId||"default",designSystem:t.designSystem||"minimal",showPoweredBy:t.showPoweredBy??!0,enforceOrgTheme:t.enforceOrgTheme??!1,customEmailTemplates:t.customEmailTemplates??!1}),t.customTheme))try{const le=JSON.parse(t.customTheme);b(Re=>({...Re,...le,mobile:{...Re.mobile,...le.mobile||{}}}))}catch(le){console.error("Failed to parse custom theme:",le)}},[t,c]);const j=(le,Re="success")=>{h({text:le,type:Re}),setTimeout(()=>h(null),5e3)},_=le=>{const{name:Re,value:Ze,type:lt,checked:rt}=le.target;m(ne=>({...ne,[Re]:lt==="checkbox"?rt:Ze}))},S=(le,Re)=>{b(Ze=>({...Ze,colors:{...Ze.colors,[le]:Re}}))},A=(le,Re)=>{if(le==="all"){b(Ze=>({...Ze,mobile:{...Ze.mobile,...Re}}));return}b(Ze=>({...Ze,mobile:{...Ze.mobile,[le]:Re}}))},T=le=>{b(Re=>{var ne;const Ze=((ne=Re.mobile)==null?void 0:ne.enabledThemes)||[],lt=Ze.includes(le);let rt;if(lt){if(Ze.length<=1)return Re;rt=Ze.filter(pe=>pe!==le)}else rt=[...Ze,le];return{...Re,mobile:{...Re.mobile,enabledThemes:rt}}})},E=async()=>{d(!0);try{await r(x),j("Branding-instllningar sparade!","success")}catch(le){j(le.message||"Ett fel uppstod","error")}finally{d(!1)}},C=async()=>{d(!0);try{await r({customTheme:JSON.stringify(p),defaultThemeId:"custom"}),j("Anpassat tema och mobilinstllningar sparade!","success")}catch(le){j(le.message||"Ett fel uppstod","error")}finally{d(!1)}},z=async(le,Re)=>{if(Re){d(!0);try{le==="logo"?(await n(Re),j("Logotyp uppladdad!","success")):le==="favicon"?(await s(Re),j("Favicon uppladdad!","success")):le==="background"&&(await i(Re),j("Bakgrundsbild uppladdad!","success"))}catch(Ze){j(Ze.message||"Ett fel uppstod vid uppladdning","error")}finally{d(!1)}}},M=async()=>{if(window.confirm("r du sker p att du vill terstlla all branding till standardinstllningar?")){d(!0);try{await o(),j("Branding terstlld till standard!","success")}catch(le){j(le.message||"Ett fel uppstod","error")}finally{d(!1)}}};if(!e)return a.jsx("div",{className:"p-8 max-w-4xl mx-auto",children:a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Er,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-300",children:"Enterprise-licens krvs"}),a.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mt-1",children:"Enterprise Whitelabel-modulen krver en aktiv ENTERPRISE-licens. Kontakta din administratr fr att uppgradera."})]})]})})});const F=[{category:"Varumrke",items:[{id:"general",label:"Allmnt",icon:zs},{id:"assets",label:"Grafiska resurser",icon:Dd}]},{category:"Utseende",items:[{id:"design",label:"Design System",icon:Ha},{id:"theme",label:"Anpassat tema",icon:qu},{id:"mobile",label:"Mobiltema",icon:F4}]}];return a.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in pb-20",children:[a.jsx(Kj,{}),a.jsx(Uj,{}),a.jsxs("div",{className:"flex bg-gray-50 dark:bg-[#151718] min-h-[600px] rounded-lg border border-gray-200 dark:border-[#3c4043] overflow-hidden",children:[a.jsxs("aside",{className:`bg-white dark:bg-[#1e2022] w-64 border-r border-gray-200 dark:border-[#3c4043] flex-shrink-0 flex flex-col ${v?"block absolute z-50 h-full":"hidden md:flex"}`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-[#3c4043] flex items-center justify-between",children:[a.jsx("h2",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:"Whitelabel"}),a.jsx("button",{className:"md:hidden",onClick:()=>y(!1),children:"X"})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:F.map((le,Re)=>a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2",children:le.category}),a.jsx("div",{className:"space-y-1",children:le.items.map(Ze=>a.jsxs("button",{onClick:()=>{g(Ze.id),y(!1)},className:`w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${f===Ze.id?"bg-indigo-50 text-indigo-700 dark:!bg-[#333537] dark:text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#282a2c]"}`,children:[a.jsx(Ze.icon,{size:18}),Ze.label]},Ze.id))})]},Re))})]}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-white dark:bg-[#151718]",children:[a.jsxs("div",{className:"md:hidden p-4 bg-white dark:bg-[#1e2022] border-b border-gray-200 dark:border-[#3c4043] flex justify-between items-center",children:[a.jsx("span",{className:"font-bold",children:"Meny"}),a.jsx("button",{onClick:()=>y(!0),className:"p-2 bg-gray-100 rounded",children:a.jsx(yn,{size:20})})]}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(D=F.flatMap(le=>le.items).find(le=>le.id===f))==null?void 0:D.label}),a.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[f==="general"&&"Hantera grundlggande varumrkesinstllningar.",f==="assets"&&"Ladda upp logotyper och ikoner.",f==="design"&&"Vlj ett globalt designsystem fr hela plattformen.",f==="theme"&&"Skapa eller vlj frgteman.",f==="mobile"&&"Anpassa utseendet p mobilappens navigeringsflt."]})]}),(f==="general"||f==="design")&&a.jsx("button",{onClick:E,disabled:c,className:"p-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg disabled:opacity-50 transition-colors",title:"Spara",children:a.jsx(sa,{className:"w-5 h-5"})}),(f==="theme"||f==="mobile")&&a.jsx("button",{onClick:C,disabled:c,className:"p-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg disabled:opacity-50 transition-colors",title:"Spara anpassat tema",children:a.jsx(sa,{className:"w-5 h-5"})})]}),f==="general"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Varumrkesinformation"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Varumrkesnamn"}),a.jsx("input",{type:"text",name:"brandName",value:x.brandName,onChange:_,className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600\r
                                             bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white`,placeholder:"EduFlex"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Footer-text"}),a.jsx("input",{type:"text",name:"footerText",value:x.footerText,onChange:_,className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600\r
                                             bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white`,placeholder:"Powered by EduFlex"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Vlkomstmeddelande (inloggningssida)"}),a.jsx("textarea",{name:"welcomeMessage",value:x.welcomeMessage,onChange:_,rows:3,className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600\r
                                             bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white`,placeholder:"Vlkommen till vrt lrandesystem..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Standard-tema (anvnds om inget anpassat tema r aktivt)"}),a.jsx("select",{name:"defaultThemeId",value:x.defaultThemeId,onChange:_,className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600\r
                                             bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white`,children:l.map(le=>a.jsx("option",{value:le.id,children:le.name},le.id))})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Instllningar"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",name:"showPoweredBy",checked:x.showPoweredBy,onChange:_,className:"w-5 h-5 text-indigo-600 rounded"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:'Visa "Powered by EduFlex"'}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Visa EduFlex-branding i footern"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",name:"enforceOrgTheme",checked:x.enforceOrgTheme,onChange:_,className:"w-5 h-5 text-indigo-600 rounded"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:["Tvinga organisationens tema",x.enforceOrgTheme&&a.jsx(ew,{className:"w-4 h-4 text-yellow-500"})]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Anvndare kan inte ndra tema om aktiverat"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",name:"customEmailTemplates",checked:x.customEmailTemplates,onChange:_,className:"w-5 h-5 text-indigo-600 rounded"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Anpassade e-postmallar"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Anvnd varumrkesanpassade e-postmallar (framtida funktion)"})]})]})]})]}),a.jsxs("button",{onClick:M,disabled:c,className:`px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg\r
                                     flex items-center gap-2 disabled:opacity-50`,children:[a.jsx(Mge,{className:"w-4 h-4"}),"terstll allt"]})]}),f==="assets"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(TS,{title:"Logotyp",description:"Huvudlogotyp som visas i systemet. Rekommenderad storlek: 200x50px (PNG eller SVG)",currentUrl:t.logoUrl,onUpload:le=>z("logo",le),accept:"image/*",loading:c}),a.jsx(TS,{title:"Favicon",description:"Ikon som visas i webblsarfliken. Rekommenderad storlek: 32x32px (ICO, PNG eller SVG)",currentUrl:t.faviconUrl,onUpload:le=>z("favicon",le),accept:"image/*,.ico",loading:c}),a.jsx(TS,{title:"Inloggningsbakgrund",description:"Bakgrundsbild fr inloggningssidan. Rekommenderad storlek: 1920x1080px",currentUrl:t.loginBackgroundUrl,onUpload:le=>z("background",le),accept:"image/*",loading:c,isBackground:!0})]}),f==="design"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"Vlj Design System"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Design Systems ndrar hela UI:ts utseende - kort, knappar, skuggor och mer. Detta r en exklusiv Enterprise-feature."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(Dc).map(le=>a.jsxs("button",{onClick:()=>m({...x,designSystem:le.id}),className:`group relative p-6 rounded-2xl border-2 transition-all text-left overflow-hidden flex flex-col h-full ${x.designSystem===le.id?"border-indigo-500 ring-4 ring-indigo-50 dark:ring-indigo-900/20":"border-gray-200 dark:border-gray-800 hover:border-indigo-300"}`,style:{background:x.designSystem===le.id?localStorage.getItem("theme")==="dark"?le.page.dark:le.page.light:"transparent"},children:[a.jsx("div",{className:"relative w-full aspect-video mb-4 rounded-xl overflow-hidden border border-gray-100 dark:border-gray-700 shadow-inner",style:{background:localStorage.getItem("theme")==="dark"?le.page.dark:le.page.light},children:a.jsx("div",{className:"absolute inset-0 p-4 flex items-center justify-center",children:a.jsxs("div",{className:"w-3/4 h-24 flex items-center justify-center relative transition-all",style:{borderRadius:le.card.radius.xl,boxShadow:le.card.shadow,background:localStorage.getItem("theme")==="dark"?le.card.backgroundDark:le.card.background,border:localStorage.getItem("theme")==="dark"?le.card.borderDark:le.card.border,backdropFilter:le.card.backdrop},children:[a.jsx("div",{className:"w-12 h-12 flex items-center justify-center font-bold text-xs",style:{borderRadius:le.button.radius,boxShadow:le.button.shadow,background:"rgba(99, 102, 241, 0.1)",color:"#6366f1"},children:"Aa"}),a.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-indigo-500"})]})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-bold mb-1 text-gray-900 dark:text-white flex items-center justify-between",children:[le.name,x.designSystem===le.id&&a.jsx(nr,{className:"w-5 h-5 text-indigo-600"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 min-h-[40px]",children:le.description})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500 dark:text-gray-400 font-mono mt-auto pt-4 border-t border-gray-100 dark:border-gray-800",children:[a.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:["R: ",le.card.radius.xl]}),le.card.backdrop!=="none"&&a.jsx("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 rounded border border-blue-100 dark:border-blue-800",children:"Blur"}),le.id==="brutalist"&&a.jsx("span",{className:"px-2 py-1 bg-black text-white dark:bg-white dark:text-black rounded",children:"BOLD"})]})]},le.id))}),a.jsxs("div",{className:"mt-8 p-4 bg-indigo-50 dark:!bg-gray-900 border border-indigo-200 dark:!border-gray-700 rounded-lg",children:[a.jsxs("h4",{className:"font-semibold text-indigo-900 dark:text-gray-100 mb-2 flex items-center gap-2",children:[a.jsx(Ha,{className:"w-5 h-5"}),"Valt Design System: ",x.designSystem]}),a.jsx("p",{className:"text-sm text-indigo-700 dark:text-gray-300",children:"Design systemet pverkar alla kort, knappar och UI-element i hela applikationen. ndringar trder i kraft direkt nr du sparar."})]})]})}),f==="theme"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"Frdefinierade Enterprise-teman"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Vlj ett professionellt frdesignat tema eller skapa ett eget anpassat tema nedan."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:w.map(le=>a.jsxs("button",{onClick:()=>{b(Re=>({...Re,name:le.name,colors:le.colors}))},className:`group relative p-4 rounded-xl border-2 border-gray-200 dark:border-gray-700\r
                                             hover:border-indigo-500 dark:hover:border-indigo-500 transition-all\r
                                             bg-white dark:bg-[#282a2c] text-left`,children:[a.jsx("div",{className:"flex gap-1 mb-3",children:[500,600,700].map(Re=>a.jsx("div",{style:{backgroundColor:le.colors[Re]},className:"h-12 flex-1 rounded-lg shadow-sm first:rounded-l-lg last:rounded-r-lg"},Re))}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:le.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:le.description}),a.jsx("div",{className:"absolute inset-0 bg-indigo-500/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity"})]},le.id))})]}),a.jsxs("details",{className:"group bg-white dark:bg-[#1e1f20] rounded-lg border border-gray-200 dark:border-gray-700 open:ring-2 open:ring-indigo-500/20",children:[a.jsxs("summary",{className:"p-6 cursor-pointer list-none flex items-center justify-between font-semibold text-gray-900 dark:text-white",children:[a.jsx("span",{children:"Avancerad frgpalett (Manuell)"}),a.jsx(Mo,{className:"w-5 h-5 transition-transform group-open:rotate-180"})]}),a.jsxs("div",{className:"px-6 pb-6 border-t border-gray-100 dark:border-gray-800 pt-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white hidden",children:"Anpassad frgpalett"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Finjustera frgerna manuellt fr att skapa ett helt unikt tema."}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:Object.keys(p.colors).map(le=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Shade ",le]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:p.colors[le],onChange:Re=>S(le,Re.target.value),className:"w-12 h-10 rounded cursor-pointer"}),a.jsx("input",{type:"text",value:p.colors[le],onChange:Re=>S(le,Re.target.value),className:`flex-1 px-2 py-1 text-sm rounded border border-gray-300 dark:border-gray-600\r
                                                     bg-white dark:bg-[#282a2c] text-gray-900 dark:text-white`})]})]},le))}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[#131314] dark:to-[#1e1f20]",children:[a.jsx("h3",{className:"text-sm font-semibold mb-4 text-gray-700 dark:text-gray-300",children:"Live-frhandsvisning"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3 flex-wrap",children:[a.jsx("button",{style:{backgroundColor:p.colors[600]},className:"px-5 py-2.5 text-white rounded-lg font-medium shadow-md hover:shadow-lg transition-shadow",children:"Primr knapp"}),a.jsx("button",{style:{borderColor:p.colors[600],color:p.colors[600]},className:"px-5 py-2.5 bg-transparent border-2 rounded-lg font-medium",children:"Sekundr knapp"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Frgskala:"}),a.jsx("div",{className:"flex gap-1",children:[50,100,200,300,400,500,600,700,800,900,950].map(le=>a.jsx("div",{style:{backgroundColor:p.colors[le]},className:"flex-1 h-12 rounded shadow-sm first:rounded-l-lg last:rounded-r-lg",title:`${le}: ${p.colors[le]}`},le))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{style:{backgroundColor:p.colors[50]},className:"p-3 rounded-lg",children:[a.jsx("div",{style:{backgroundColor:p.colors[600]},className:"w-8 h-8 rounded-full mb-2"}),a.jsx("div",{className:"h-2 bg-gray-300 dark:bg-gray-600 rounded w-3/4 mb-1"}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),a.jsxs("div",{style:{backgroundColor:p.colors[600],color:"white"},className:"p-3 rounded-lg",children:[a.jsx("div",{className:"text-xs font-semibold mb-1",children:"Widget"}),a.jsx("div",{className:"text-2xl font-bold",children:"2,540"})]})]})]})]})]})]})]}),f==="mobile"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"Frdiga Mobilteman"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Vlj ett optimerat utseende fr den mobila upplevelsen."}),a.jsx("div",{className:"grid grid-cols-1 gap-4 mb-8",children:k.map(le=>{var Re,Ze,lt,rt,ne;return a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{onClick:()=>A("all",le.config),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 transition-all text-left bg-gray-50 dark:bg-[#282a2c]
                                                            ${((Re=p.mobile)==null?void 0:Re.id)===le.id||!((Ze=p.mobile)!=null&&Ze.id)&&le.id==="finsights-dark"?"border-indigo-500 ring-2 ring-indigo-500/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[a.jsx("div",{className:"w-12 h-12 rounded-full shadow-lg flex items-center justify-center border border-gray-200 dark:border-gray-600",style:{backgroundColor:le.config.backgroundColor},children:a.jsx(F4,{size:20,style:{color:le.config.activeColor}})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[le.name,(((lt=p.mobile)==null?void 0:lt.id)===le.id||!((rt=p.mobile)!=null&&rt.id)&&le.id==="finsights-dark")&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-[10px] rounded-full uppercase tracking-wider",children:"Aktiv"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:le.description})]})]}),a.jsx("div",{className:"absolute top-4 right-4 z-10",onClick:pe=>pe.stopPropagation(),children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white dark:bg-[#1e1f20] px-2 py-1 rounded-lg border border-gray-100 dark:border-gray-600 shadow-sm",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Valbar"}),a.jsx("input",{type:"checkbox",checked:(((ne=p.mobile)==null?void 0:ne.enabledThemes)||["finsights-dark","cosmic-growth","eduflex-fresh"]).includes(le.id),onChange:()=>T(le.id),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"})]})})]},le.id)})}),a.jsx("h3",{className:"text-sm font-semibold mb-4 text-gray-900 dark:text-white border-t border-gray-100 dark:border-gray-700 pt-6",children:"Design-fysik (Avancerat)"}),a.jsxs("div",{className:"space-y-4 mb-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Form (Hrnradie)"}),a.jsx("span",{className:"text-xs text-gray-500",children:((L=p.mobile)==null?void 0:L.borderRadius)||"24px"})]}),a.jsx("div",{className:"flex gap-2",children:["0px","8px","16px","24px","32px","9999px"].map(le=>{var Re;return a.jsx("button",{onClick:()=>A("borderRadius",le),className:`h-8 flex-1 border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-[#282a2c]
                                                                hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-all
                                                                ${((Re=p.mobile)==null?void 0:Re.borderRadius)===le?"ring-2 ring-indigo-500 border-transparent":""}`,style:{borderRadius:le==="9999px"?"20px":le},title:le==="9999px"?"Pill":le},le)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Rrelse & Knsla"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"minimal",label:"Minimal",icon:""},{id:"smooth",label:"Mjuk",icon:""},{id:"bouncy",label:"Lekfull",icon:""}].map(le=>{var Re;return a.jsxs("button",{onClick:()=>A("animationPreset",le.id),className:`p-2 rounded-lg border text-sm font-medium transition-all
                                                                ${((Re=p.mobile)==null?void 0:Re.animationPreset)===le.id?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-[#282a2c] border-gray-200 dark:border-gray-600 dark:text-white hover:border-gray-300"}`,children:[a.jsx("span",{className:"mr-1",children:le.icon})," ",le.label]},le.id)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Djup & Skugga"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"flat",label:"Platt"},{id:"shadow",label:"Soft"},{id:"floating",label:"Flytande"},{id:"glass",label:"Glas"}].map(le=>{var Re;return a.jsx("button",{onClick:()=>A("componentDepth",le.id),className:`p-2 rounded-lg border text-sm font-medium transition-all
                                                                ${((Re=p.mobile)==null?void 0:Re.componentDepth)===le.id?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-[#282a2c] border-gray-200 dark:border-gray-600 dark:text-white hover:border-gray-300"}`,children:le.label},le.id)})})]})]}),a.jsx("h3",{className:"text-sm font-semibold mb-4 text-gray-900 dark:text-white border-t border-gray-100 dark:border-gray-700 pt-6",children:"Manuell anpassning (Frger)"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Bakgrundsfrg fr bottenmeny"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:((K=p.mobile)==null?void 0:K.backgroundColor)||"#ffffff",onChange:le=>A("backgroundColor",le.target.value),className:"w-12 h-10 rounded cursor-pointer"}),a.jsx("input",{type:"text",value:(($=p.mobile)==null?void 0:$.backgroundColor)||"#ffffff",onChange:le=>A("backgroundColor",le.target.value),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-[#282a2c] dark:border-gray-600 dark:text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Aktiv Ikonfrg"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:((R=p.mobile)==null?void 0:R.activeColor)||"#4f46e5",onChange:le=>A("activeColor",le.target.value),className:"w-12 h-10 rounded cursor-pointer"}),a.jsx("input",{type:"text",value:((Y=p.mobile)==null?void 0:Y.activeColor)||"#4f46e5",onChange:le=>A("activeColor",le.target.value),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-[#282a2c] dark:border-gray-600 dark:text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Inaktiv Ikonfrg"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:((ee=p.mobile)==null?void 0:ee.inactiveColor)||"#6b7280",onChange:le=>A("inactiveColor",le.target.value),className:"w-12 h-10 rounded cursor-pointer"}),a.jsx("input",{type:"text",value:((B=p.mobile)==null?void 0:B.inactiveColor)||"#6b7280",onChange:le=>A("inactiveColor",le.target.value),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-[#282a2c] dark:border-gray-600 dark:text-white"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer pt-2",children:[a.jsx("input",{type:"checkbox",checked:((U=p.mobile)==null?void 0:U.glassmorphism)||!1,onChange:le=>A("glassmorphism",le.target.checked),className:"w-5 h-5 text-indigo-600 rounded"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Glassmorphism effekt"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gr menyn ngot genomskinlig med suddig bakgrund."})]})]})]})]})}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"relative border-8 border-gray-900 rounded-[3rem] h-[600px] w-[300px] bg-white dark:bg-black overflow-hidden shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-6 bg-gray-900 rounded-b-xl z-20"}),a.jsxs("div",{className:"h-full flex flex-col pt-8 bg-gray-50 dark:bg-[#131314]",children:[a.jsxs("div",{className:"px-4 py-2 flex items-center justify-between",children:[a.jsx("span",{className:"font-bold text-lg dark:text-white",children:"EduFlex"}),a.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-800 rounded-full"})]}),a.jsxs("div",{className:"p-4 space-y-4 flex-1 overflow-y-hidden opacity-50",children:[a.jsx("div",{className:"h-32 bg-blue-100 dark:bg-blue-900/20 rounded-2xl w-full"}),a.jsx("div",{className:"h-24 bg-gray-100 dark:bg-gray-800 rounded-xl w-full"}),a.jsx("div",{className:"h-24 bg-gray-100 dark:bg-gray-800 rounded-xl w-full"}),a.jsx("div",{className:"h-24 bg-gray-100 dark:bg-gray-800 rounded-xl w-full"})]}),a.jsxs("div",{className:`transition-all duration-300 relative z-10 flex justify-between items-center
                                                    ${((V=p.mobile)==null?void 0:V.componentDepth)==="floating"?"mx-4 mb-4 px-4 py-3":"px-6 py-4 border-t border-gray-200 dark:border-white/10"}`,style:{backgroundColor:(se=p.mobile)!=null&&se.glassmorphism?((Ne=p.mobile)==null?void 0:Ne.backgroundColor)+"aa":(ie=p.mobile)==null?void 0:ie.backgroundColor,backdropFilter:(q=p.mobile)!=null&&q.glassmorphism?"blur(20px)":"none",borderRadius:((H=p.mobile)==null?void 0:H.componentDepth)==="floating"?((Z=p.mobile)==null?void 0:Z.borderRadius)||"24px":"0px",boxShadow:((te=p.mobile)==null?void 0:te.componentDepth)==="floating"?"0 20px 25px -5px rgba(0, 0, 0, 0.1)":"0 -4px 20px -5px rgba(0,0,0,0.1)"},children:[a.jsx("div",{className:"flex flex-col items-center gap-1",children:a.jsx(wi,{size:24,style:{color:(ge=p.mobile)==null?void 0:ge.activeColor}})}),a.jsx("div",{className:"flex flex-col items-center gap-1 opacity-50",children:a.jsx(Ha,{size:24,style:{color:(Ce=p.mobile)==null?void 0:Ce.inactiveColor}})}),a.jsx("div",{className:"flex flex-col items-center gap-1 opacity-50",children:a.jsx(fK,{size:24,style:{color:(Le=p.mobile)==null?void 0:Le.inactiveColor}})}),a.jsx("div",{className:"flex flex-col items-center gap-1 opacity-50",children:a.jsx(jr,{size:24,style:{color:(He=p.mobile)==null?void 0:He.inactiveColor}})})]})]})]})})]}),a.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("button",{onClick:C,disabled:c,className:`px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg\r
                                                     flex items-center gap-2 disabled:opacity-50 shadow-sm transition-colors`,children:[c?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(sa,{className:"w-5 h-5"}),"Spara ndringar"]})})]})]})]})]})]})},TS=({title:t,description:e,currentUrl:r,onUpload:n,accept:s,loading:i,isBackground:o})=>{const l=c=>{var u;const d=(u=c.target.files)==null?void 0:u[0];d&&n(d)};return a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-white",children:t}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e}),r&&a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Nuvarande:"}),o?a.jsx("div",{className:"w-full h-32 bg-cover bg-center rounded-lg border border-gray-200 dark:border-gray-600",style:{backgroundImage:`url(${r})`}}):a.jsx("img",{src:r,alt:t,className:"max-h-16 object-contain bg-gray-100 dark:bg-gray-800 p-2 rounded"})]}),a.jsxs("label",{className:"inline-block",children:[a.jsx("input",{type:"file",accept:s,onChange:l,disabled:i,className:"hidden"}),a.jsxs("span",{className:`px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg\r
                    cursor-pointer inline-flex items-center gap-2 disabled:opacity-50`,children:[a.jsx(Xa,{className:"w-4 h-4"}),"Ladda upp ",t]})]})]})},rlt=({currentUser:t})=>{const[e,r]=N.useState(!1),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState("new"),[d,u]=N.useState({category:"",message:"",severity:"MEDIUM"}),h=["Tekniskt fel","Fel i kursinnehll","Inloggningsproblem","Funktionsfrslag","Allmn feedback","Skerhetsfrga","Fakturering & Prenumeration","Problem med anvndarprofil","Systemet r lngsamt","Problem i mobilappen","Frga om tillgnglighet","Integritet & GDPR","Fel i gamification","Saknad behrighet","vrigt"];N.useEffect(()=>{f()},[]);const f=async()=>{try{const m=await O.support.getMyTickets(t.id);s(m)}catch(m){console.error("Kunde inte hmta renden",m)}finally{o(!1)}},g=async m=>{if(m.preventDefault(),!d.category||!d.message){Ae.error("Vnligen fyll i alla flt");return}r(!0);try{await O.support.createTicket({...d,userId:t.id,contextUrl:window.location.origin+window.location.pathname}),Ae.success("Ditt rende har skickats!"),u({category:"",message:"",severity:"MEDIUM"}),f(),c("history")}catch{Ae.error("Kunde inte skicka rendet")}finally{r(!1)}},x=m=>{switch(m){case"RESOLVED":return a.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold ring-1 ring-green-200",children:"tgrdad"});case"IN_PROGRESS":return a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-bold ring-1 ring-blue-200",children:"Under behandling"});default:return a.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-bold ring-1 ring-yellow-200",children:"ppen"})}};return a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("header",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Support & Kontakt"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Vi finns hr fr att hjlpa dig. Skicka ett rende s terkommer vi s snart som mjligt."})]}),a.jsxs("div",{className:"flex gap-4 mb-8 border-b border-gray-100 pb-1",children:[a.jsx("button",{onClick:()=>c("new"),className:`pb-3 px-2 text-sm font-bold transition-all ${l==="new"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-400 hover:text-gray-600"}`,children:"Skapa nytt rende"}),a.jsxs("button",{onClick:()=>c("history"),className:`pb-3 px-2 text-sm font-bold transition-all relative ${l==="history"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-400 hover:text-gray-600"}`,children:["Mina tidigare renden",n.filter(m=>m.status==="OPEN").length>0&&a.jsxs("span",{className:"ml-2 bg-indigo-100 text-indigo-600 px-1.5 py-0.5 rounded-md text-[10px] font-black uppercase",children:[n.filter(m=>m.status==="OPEN").length," aktiva"]})]})]}),l==="new"?a.jsx("div",{className:"bg-white rounded-3xl shadow-xl shadow-indigo-100/20 border border-gray-100 overflow-hidden",children:a.jsxs("form",{onSubmit:g,className:"p-8 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Vad gller det?"}),a.jsxs("select",{value:d.category,onChange:m=>u({...d,category:m.target.value}),className:"w-full bg-gray-50 border-none rounded-2xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 transition-all font-medium",children:[a.jsx("option",{value:"",children:"Vlj kategori..."}),h.map(m=>a.jsx("option",{value:m,children:m},m))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Prioritet (valfritt)"}),a.jsxs("select",{value:d.severity,onChange:m=>u({...d,severity:m.target.value}),className:"w-full bg-gray-50 border-none rounded-2xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 transition-all font-medium",children:[a.jsx("option",{value:"LOW",children:"Lg - Allmn frga / Frslag"}),a.jsx("option",{value:"MEDIUM",children:"Medium - Ngot fungerar inte som det ska"}),a.jsx("option",{value:"HIGH",children:"Hg - Viktig funktion r trasig"}),a.jsx("option",{value:"CRITICAL",children:"Kritisk - Systemet gr ej att anvnda"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Meddelande"}),a.jsx("textarea",{value:d.message,onChange:m=>u({...d,message:m.target.value}),placeholder:"Beskriv ditt problem eller din frga s detaljerat som mjligt...",className:"w-full bg-gray-50 border-none rounded-2xl px-4 py-4 text-sm focus:ring-2 focus:ring-indigo-500 transition-all font-medium min-h-[160px]"})]}),a.jsxs("div",{className:"bg-indigo-50 rounded-2xl p-4 flex items-start gap-4",children:[a.jsx("div",{className:"p-2 bg-white rounded-lg text-indigo-600 shadow-sm",children:a.jsx(Er,{size:20})}),a.jsxs("div",{className:"text-xs text-indigo-700 leading-relaxed font-medium",children:[a.jsx("strong",{children:"Notera:"})," Vi sparar din nuvarande plats i systemet (",window.location.pathname,") fr att snabbare kunna hjlpa dig hitta felet. Ingen knslig privat information sparas utanfr ditt konto."]})]}),a.jsxs("button",{type:"submit",disabled:e,className:`w-full bg-indigo-600 text-white rounded-2xl py-4 font-extrabold text-sm shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-all flex items-center justify-center gap-2 group ${e?"opacity-50":""}`,children:[e?"Skickar...":"Skicka rende",a.jsx(Wr,{size:18,className:"group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})]})]})}):a.jsx("div",{className:"space-y-4",children:i?a.jsx("div",{className:"flex justify-center p-20",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):n.length===0?a.jsxs("div",{className:"text-center p-20 bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200",children:[a.jsx(bge,{size:48,className:"mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500 font-bold",children:"Du har inga tidigare renden."})]}):n.map(m=>a.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsxs("span",{className:"text-[10px] font-black uppercase tracking-wider text-gray-400",children:["#T-",m.id]}),x(m.status)]}),a.jsx("h3",{className:"font-extrabold text-gray-900",children:m.category})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase",children:new Date(m.createdAt).toLocaleDateString()}),a.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase",children:new Date(m.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),a.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed mb-6 font-medium bg-gray-50 p-4 rounded-xl italic",children:['"',m.message,'"']}),m.adminResponse&&a.jsxs("div",{className:"mt-4 border-t border-gray-50 pt-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center text-[10px] text-white font-black",children:"A"}),a.jsx("span",{className:"text-xs font-black text-indigo-600 uppercase tracking-wider",children:"Svar frn Admin"}),m.resolvedAt&&a.jsxs("span",{className:"text-[10px] text-gray-400 font-medium ml-auto",children:["tgrdad ",new Date(m.resolvedAt).toLocaleDateString()]})]}),a.jsx("div",{className:"bg-indigo-50/50 rounded-xl p-4 text-sm text-indigo-900 font-bold leading-relaxed",children:m.adminResponse})]})]},m.id))})]})},nlt=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(null),[o,l]=N.useState(null),[c,d]=N.useState(""),[u,h]=N.useState(!1),[f,g]=N.useState(!1),[x,m]=N.useState(0);N.useEffect(()=>{p()},[]);const p=async()=>{n(!0);try{const A=await O.community.admin.getPending();e(A.content||[]),m(A.totalElements||0)}catch(A){console.error("Failed to load pending items:",A)}finally{n(!1)}},b=async A=>{i(A);try{await O.community.admin.approve(A),e(T=>T.filter(E=>E.id!==A)),m(T=>T-1)}catch(T){console.error("Failed to approve item:",T),alert("Kunde inte godknna: "+T.message)}finally{i(null)}},v=async()=>{if(!(!o||!c.trim())){i(o.id);try{await O.community.admin.reject(o.id,c),e(A=>A.filter(T=>T.id!==o.id)),m(A=>A-1),h(!1),l(null),d("")}catch(A){console.error("Failed to reject item:",A),alert("Kunde inte avvisa: "+A.message)}finally{i(null)}}},y=async()=>{if(o){i(o.id);try{await O.community.delete(o.id),e(A=>A.filter(T=>T.id!==o.id)),m(A=>A-1),g(!1),l(null)}catch(A){console.error("Failed to delete item:",A),alert("Kunde inte ta bort: "+A.message)}finally{i(null)}}},w=A=>{l(A),d(""),h(!0)},k=A=>{l(A),g(!0)},j=A=>{switch(A){case"QUIZ":return a.jsx(Ku,{size:20,className:"text-purple-500"});case"ASSIGNMENT":return a.jsx(Va,{size:20,className:"text-blue-500"});case"LESSON":return a.jsx(gt,{size:20,className:"text-green-500"});default:return a.jsx(Ku,{size:20,className:"text-gray-500"})}},_=A=>{switch(A){case"QUIZ":return"Quiz";case"ASSIGNMENT":return"Uppgift";case"LESSON":return"Lektion";default:return A}},S=A=>A?new Date(A).toLocaleDateString("sv-SE",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"-";return a.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in pb-20",children:[a.jsx(Kj,{}),a.jsx(Uj,{}),a.jsxs("div",{className:"space-y-6 flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(Tt,{className:"text-amber-500"}),"Community Granskning"]}),a.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:[x," ","objekt"," vntar p granskning"]})]}),a.jsxs("button",{onClick:p,disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-[#282a2c] hover:bg-gray-200 dark:hover:bg-[#3c4043] rounded-xl transition-colors",children:[a.jsx(sn,{size:18,className:r?"animate-spin":""}),"Uppdatera"]})]}),r?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsx(ft,{className:"animate-spin text-indigo-600",size:40})}):t.length===0?a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-12 text-center border border-gray-200 dark:border-[#3c4043]",children:[a.jsx(nr,{className:"mx-auto text-green-500 mb-4",size:48}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Allt r granskat!"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Det finns inga objekt som vntar p granskning just nu."})]}):a.jsx("div",{className:"space-y-4",children:t.map(A=>{var T;return a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl border border-gray-200 dark:border-[#3c4043] overflow-hidden hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.subject&&a.jsxs("div",{className:"px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1.5",style:{backgroundColor:`${A.subjectColor||"#6366F1"}20`,color:A.subjectColor||"#6366F1"},children:[a.jsx(Lm,{iconName:A.subjectIcon,size:14}),A.subjectDisplayName||A.subject]}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-gray-100 dark:bg-[#282a2c] rounded-lg text-xs font-medium text-gray-600 dark:text-gray-300",children:[j(A.contentType),_(A.contentType)]})]}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:A.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm line-clamp-2 mb-4",children:A.description||"Ingen beskrivning"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(jr,{size:14}),a.jsx("span",{children:A.authorName})]}),A.authorTenantName&&a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(l5,{size:14}),a.jsx("span",{children:A.authorTenantName})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(zt,{size:14}),a.jsx("span",{children:S(A.createdAt)})]}),((T=A.metadata)==null?void 0:T.questionCount)&&a.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium",children:[A.metadata.questionCount," frgor"]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 shrink-0",children:[a.jsxs("button",{onClick:()=>b(A.id),disabled:s===A.id,className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 text-white rounded-xl hover:bg-green-700 disabled:opacity-50 transition-colors font-medium",children:[s===A.id?a.jsx(ft,{size:18,className:"animate-spin"}):a.jsx(nr,{size:18}),"Godknn"]}),a.jsxs("button",{onClick:()=>w(A),disabled:s===A.id,className:"flex items-center gap-2 px-4 py-2.5 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl hover:bg-red-200 dark:hover:bg-red-900/40 disabled:opacity-50 transition-colors font-medium",children:[a.jsx(eo,{size:18}),"Avvisa"]}),a.jsxs("button",{onClick:()=>k(A),disabled:s===A.id,className:"flex items-center gap-2 px-4 py-2.5 bg-gray-100 dark:bg-[#282a2c] text-gray-600 dark:text-gray-400 rounded-xl hover:bg-gray-200 dark:hover:bg-[#3c4043] disabled:opacity-50 transition-colors font-medium",children:[a.jsx(qt,{size:18}),"Ta bort"]})]})]}),A.tags&&A.tags.length>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-[#282a2c]",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:A.tags.map((E,C)=>a.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-[#282a2c] rounded-full text-xs text-gray-600 dark:text-gray-400",children:["#",E]},C))})})]})},A.id)})}),u&&o&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>h(!1),children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-2xl shadow-2xl",onClick:A=>A.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Dr,{className:"text-amber-500",size:20}),"Avvisa innehll"]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:['"',o.title,'"']})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivering (visas fr anvndaren) *"}),a.jsx("textarea",{value:c,onChange:A=>d(A.target.value),placeholder:"Frklara varfr innehllet inte godknns...",rows:4,className:"w-full px-3 py-2 bg-white dark:bg-[#282a2c] border border-gray-200 dark:border-[#3c4043] rounded-xl resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'T.ex. "Innehllet uppfyller inte kvalitetskraven" eller "Felaktiga svarsalternativ"'})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-[#3c4043] flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-xl transition-colors",children:"Avbryt"}),a.jsxs("button",{onClick:v,disabled:!c.trim()||s===o.id,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s===o.id?a.jsx(ft,{size:18,className:"animate-spin"}):a.jsx(eo,{size:18}),"Avvisa"]})]})]})}),f&&o&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>g(!1),children:a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] w-full max-w-md rounded-2xl shadow-2xl",onClick:A=>A.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-[#3c4043]",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(qt,{className:"text-red-500",size:20}),"Ta bort innehll"]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:['r du sker p att du vill ta bort "',o.title,'"?']})]}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Detta kommer att permanent ta bort innehllet frn communityn. Denna tgrd kan inte ngras."})}),a.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-[#3c4043] flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#282a2c] rounded-xl transition-colors",children:"Avbryt"}),a.jsxs("button",{onClick:y,disabled:s===o.id,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s===o.id?a.jsx(ft,{size:18,className:"animate-spin"}):a.jsx(qt,{size:18}),"Ta bort"]})]})]})})]})]})},alt=({item:t,onSave:e,onCancel:r})=>{const[n,s]=N.useState({name:"",description:"",cost:0,type:"FRAME",rarity:"COMMON",isLimited:!1,imageUrl:"",unlockCriteria:""}),[i,o]=N.useState(null),[l,c]=N.useState(""),[d,u]=N.useState("NONE"),[h,f]=N.useState({}),[g,x]=N.useState([]),[m,p]=N.useState([]),[b,v]=N.useState(!1);N.useEffect(()=>{if(t&&(s({name:t.name||"",description:t.description||"",cost:t.cost||0,type:t.type||"FRAME",rarity:t.rarity||"COMMON",isLimited:t.isLimited||!1,imageUrl:t.imageUrl||"",unlockCriteria:t.unlockCriteria||""}),c(li(t.imageUrl,t.type)),t.unlockCriteria))try{const S=JSON.parse(t.unlockCriteria);u(S.type),f({referenceId:S.referenceId,threshold:S.threshold})}catch(S){console.error("Failed to parse unlock criteria",S)}(async()=>{try{const[S,A]=await Promise.all([O.get("/courses"),O.get("/quizzes")]);x(S||[]),p(A||[])}catch(S){console.error("Failed to fetch dropdown data",S)}})()},[t]);const y=_=>{const{name:S,value:A,type:T,checked:E}=_.target;s(C=>({...C,[S]:T==="checkbox"?E:A}))},w=_=>{const S=_.target.files[0];S&&(o(S),c(URL.createObjectURL(S)))},k=(_,S,A)=>{_==="type"?(u(A),f({})):f(T=>({...T,[S]:A}))},j=async _=>{_.preventDefault(),v(!0);try{let S=n.imageUrl;if(i){const E=new FormData;E.append("file",i),S=await O.post("/admin/shop/upload",E)}let A=null;d!=="NONE"&&(A=JSON.stringify({type:d,...h}));const T={...n,imageUrl:S,unlockCriteria:A,cost:parseInt(n.cost),...t&&{id:t.id}};await e(T)}catch(S){console.error("Save failed",S),alert("Failed to save item: "+(S.message||"Unknown error"))}finally{v(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t?"Edit Shop Item":"Create New Item"}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:a.jsx(Je,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:j,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),a.jsx("input",{type:"text",name:"name",value:n.name,onChange:y,required:!0,className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),a.jsxs("select",{name:"type",value:n.type,onChange:y,className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"FRAME",children:"Frame"}),a.jsx("option",{value:"BACKGROUND",children:"Background"}),a.jsx("option",{value:"BADGE",children:"Badge"}),a.jsx("option",{value:"TITLE",children:"Title"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),a.jsx("textarea",{name:"description",value:n.description,onChange:y,rows:"2",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cost (XP)"}),a.jsx("input",{type:"number",name:"cost",value:n.cost,onChange:y,className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rarity"}),a.jsxs("select",{name:"rarity",value:n.rarity,onChange:y,className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"COMMON",children:"Common"}),a.jsx("option",{value:"RARE",children:"Rare"}),a.jsx("option",{value:"EPIC",children:"Epic"}),a.jsx("option",{value:"LEGENDARY",children:"Legendary"})]})]}),a.jsx("div",{className:"flex items-center pt-6",children:a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",name:"isLimited",checked:n.isLimited,onChange:y,className:"rounded text-indigo-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Limited Edition"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Item Image"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center overflow-hidden bg-gray-50 dark:bg-gray-900",children:l?a.jsx("img",{src:l,alt:"Preview",className:"w-full h-full object-cover"}):a.jsx("div",{className:"text-gray-400 text-xs text-center",children:"No Image"})}),a.jsxs("label",{className:"cursor-pointer bg-indigo-50 text-indigo-600 px-4 py-2 rounded-lg hover:bg-indigo-100 transition-colors flex items-center font-medium",children:[a.jsx(Xa,{className:"w-4 h-4 mr-2"}),"Upload Image",a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:w})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: PNG with transparency, 512x512px."})]}),a.jsxs("div",{className:"border-t pt-4 dark:border-gray-700",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center",children:[a.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Unlock Requirements"]}),a.jsxs("select",{value:d,onChange:_=>k("type",null,_.target.value),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 mb-3",children:[a.jsx("option",{value:"NONE",children:"None (Available for purchase)"}),a.jsx("option",{value:"COURSE_COMPLETION",children:"Complete a Course"}),a.jsx("option",{value:"QUIZ_SCORE",children:"Achieve Quiz Score"})]}),d==="COURSE_COMPLETION"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Select Course"}),a.jsxs("select",{value:h.referenceId||"",onChange:_=>k("data","referenceId",_.target.value),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0,children:[a.jsx("option",{value:"",children:"-- Select Course --"}),g.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]})]}),d==="QUIZ_SCORE"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Select Quiz"}),a.jsxs("select",{value:h.referenceId||"",onChange:_=>k("data","referenceId",_.target.value),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0,children:[a.jsx("option",{value:"",children:"-- Select Quiz --"}),m.map(_=>a.jsx("option",{value:_.id,children:_.title},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Min Score"}),a.jsx("input",{type:"number",value:h.threshold||"",onChange:_=>k("data","threshold",_.target.value),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center disabled:opacity-50",children:[a.jsx(sa,{className:"w-4 h-4 mr-2"}),b?"Saving...":"Save Item"]})]})]})]})})},slt=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState("ALL");N.useEffect(()=>{u()},[]);const u=async()=>{n(!0);try{const p=await O.get("/admin/shop/items");e(p||[])}catch(p){console.error("Failed to fetch shop items",p)}finally{n(!1)}},h=()=>{l(null),i(!0)},f=p=>{l(p),i(!0)},g=async p=>{if(window.confirm("Are you sure you want to delete this item?"))try{await O.delete(`/admin/shop/items/${p}`),e(b=>b.filter(v=>v.id!==p))}catch(b){console.error("Delete failed",b),alert("Failed to delete item.")}},x=async p=>{try{if(o){const b=await O.put(`/admin/shop/items/${o.id}`,p);e(v=>v.map(y=>y.id===o.id?b:y))}else{const b=await O.post("/admin/shop/items",p);e(v=>[...v,b])}i(!1)}catch(b){throw console.error("Save failed",b),b}},m=c==="ALL"?t:t.filter(p=>p.type===c);return a.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in pb-20",children:[a.jsx(Kj,{}),a.jsx(Uj,{}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Shop Administration"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage frames, backgrounds, and badges."})]}),a.jsxs("button",{onClick:h,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center font-medium",children:[a.jsx(jt,{className:"w-5 h-5 mr-2"}),"New Item"]})]}),a.jsx("div",{className:"flex space-x-2 bg-white dark:bg-gray-800 p-2 rounded-lg shadow-sm w-fit",children:["ALL","FRAME","BACKGROUND","BADGE","TITLE"].map(p=>a.jsx("button",{onClick:()=>d(p),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${c===p?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:p.charAt(0)+p.slice(1).toLowerCase()},p))}),r?a.jsx("div",{className:"flex justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost/Rarity"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requirement"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map(p=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:p.imageUrl?a.jsx("img",{src:li(p.imageUrl,p.type),alt:p.name,className:"h-full w-full object-cover"}):a.jsx(Dd,{className:"w-6 h-6 text-gray-400"})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.name}),a.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:p.description})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                                            ${p.type==="FRAME"?"bg-blue-100 text-blue-800":p.type==="BACKGROUND"?"bg-purple-100 text-purple-800":p.type==="BADGE"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:p.type})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[p.cost," XP"]}),a.jsx("div",{className:`text-xs font-bold 
                                            ${p.rarity==="LEGENDARY"?"text-orange-500":p.rarity==="EPIC"?"text-purple-500":p.rarity==="RARE"?"text-blue-500":"text-gray-500"}`,children:p.rarity})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.unlockCriteria&&p.unlockCriteria.length>5?a.jsx("span",{className:"flex items-center text-indigo-600 bg-indigo-50 px-2 py-1 rounded text-xs w-fit",children:"Active Requirement"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"None"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>f(p),className:"p-1 text-indigo-600 hover:bg-indigo-50 rounded",children:a.jsx(Ql,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>g(p.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:a.jsx(qt,{className:"w-4 h-4"})})]})})]},p.id))})]})})]}),s&&a.jsx(alt,{item:o,onSave:x,onCancel:()=>i(!1)})]})},ilt=[{value:"EASY",label:"Enkel",description:"Grundlggande frstelse"},{value:"MEDIUM",label:"Medel",description:"Blandad svrighetsgrad"},{value:"HARD",label:"Svr",description:"Krver djupare analys"}];function olt(){const{currentUser:t}=At(),e=Et(),[r,n]=N.useState(null),[s,i]=N.useState(""),[o,l]=N.useState("file"),[c,d]=N.useState(5),[u,h]=N.useState("MEDIUM"),[f,g]=N.useState(""),[x,m]=N.useState(!1),[p,b]=N.useState(null),[v,y]=N.useState(null),[w,k]=N.useState(null),[j,_]=N.useState(!1),[S,A]=N.useState(!0),[T,E]=N.useState(null),[C,z]=N.useState(!1);N.useEffect(()=>{M()},[]);const M=async()=>{try{const U=await O.get("/ai/quiz/status");k(U)}catch{k({available:!1,moduleEnabled:!1,apiConfigured:!1,message:"Kunde inte kontrollera AI-status"})}},F=N.useCallback(U=>{U.preventDefault(),U.stopPropagation(),U.type==="dragenter"||U.type==="dragover"?z(!0):U.type==="dragleave"&&z(!1)},[]),D=N.useCallback(U=>{U.preventDefault(),U.stopPropagation(),z(!1),U.dataTransfer.files&&U.dataTransfer.files[0]&&L(U.dataTransfer.files[0])},[]),L=U=>{if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain","application/rtf"].includes(U.type)&&!U.name.match(/\.(pdf|docx|doc|txt|rtf|odt)$/i)){y("Ogiltigt filformat. Ladda upp PDF, DOCX, DOC, TXT, RTF eller ODT.");return}if(U.size>10*1024*1024){y("Filen r fr stor. Max 10 MB.");return}if(n(U),y(null),!f){const se=U.name.replace(/\.[^/.]+$/,"");g(`Quiz: ${se}`)}},K=async()=>{y(null),m(!0);try{let U;if(o==="file"&&r){const V=new FormData;V.append("file",r),V.append("questionCount",c),V.append("difficulty",u),V.append("language","sv"),V.append("title",f||"AI-genererat Quiz");const se=localStorage.getItem("token"),Ne=await fetch("/api/ai/quiz/generate",{method:"POST",headers:{Authorization:`Bearer ${se}`},body:V});if(!Ne.ok){const ie=await Ne.json().catch(()=>({}));throw new Error(ie.errorMessage||`HTTP ${Ne.status}`)}U=await Ne.json()}else if(o==="text"&&s.trim())U=await O.post("/ai/quiz/generate-from-text",{text:s,questionCount:c,difficulty:u,language:"sv",title:f||"AI-genererat Quiz"});else{y("Vlj en fil eller skriv in text att generera quiz frn."),m(!1);return}U.success?b(U):y(U.errorMessage||"Kunde inte generera quiz.")}catch(U){console.error("Generation error:",U),y(U.message||"Ett fel uppstod vid quiz-generering.")}finally{m(!1)}},$=async()=>{if(p){_(!0),y(null);try{const U=await O.post("/ai/quiz/save",{userId:t.id,addToQuestionBank:S,generatedQuiz:{title:p.title,questions:p.questions}});U.success?e(`/course/${U.quizId}`):y(U.error||"Kunde inte spara quizet.")}catch(U){console.error("Save error:",U),y("Kunde inte spara quizet.")}finally{_(!1)}}},R=(U,V,se)=>{const Ne={...p};Ne.questions=[...Ne.questions],Ne.questions[U]={...Ne.questions[U],[V]:se},b(Ne)},Y=(U,V,se)=>{const Ne={...p};Ne.questions=[...Ne.questions],Ne.questions[U]={...Ne.questions[U]},Ne.questions[U].options=[...Ne.questions[U].options],Ne.questions[U].options[V]=se,b(Ne)},ee=(U,V)=>{const se={...p};se.questions=[...se.questions],se.questions[U]={...se.questions[U],correctIndex:V},b(se)},B=U=>{const V={...p};V.questions=V.questions.filter((se,Ne)=>Ne!==U),b(V)};if(w&&!w.available){const U=!w.moduleEnabled,V=!w.apiConfigured;return a.jsx("div",{className:"max-w-4xl mx-auto p-6",children:a.jsx("div",{className:`border rounded-xl p-6 ${U?"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-700":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"}`,children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Er,{className:`w-6 h-6 flex-shrink-0 mt-0.5 ${U?"text-gray-500 dark:text-gray-400":"text-yellow-600 dark:text-yellow-400"}`}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-semibold ${U?"text-gray-700 dark:text-gray-200":"text-yellow-800 dark:text-yellow-200"}`,children:U?"AI Quiz-modulen r inte aktiverad":"AI Quiz-generering r inte tillgnglig"}),a.jsx("p",{className:`mt-1 ${U?"text-gray-600 dark:text-gray-400":"text-yellow-700 dark:text-yellow-300"}`,children:U?"Kontakta administratren fr att aktivera AI Quiz-modulen under System  Moduler.":V?"Kontakta administratren fr att konfigurera Gemini API-nyckel.":w.message||"Ett oknt fel uppstod."})]})]})})})}return w===null?a.jsx("div",{className:"max-w-4xl mx-auto p-6 flex items-center justify-center",children:a.jsx(ft,{className:"w-8 h-8 animate-spin text-blue-600"})}):p?a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("button",{onClick:()=>b(null),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[a.jsx(Wl,{className:"w-5 h-5"}),"Tillbaka"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("input",{type:"checkbox",checked:S,onChange:U=>A(U.target.checked),className:"rounded border-gray-300 dark:border-gray-600"}),"Lgg till i Frgebanken"]}),a.jsxs("button",{onClick:$,disabled:j||p.questions.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:opacity-50",children:[j?a.jsx(ft,{className:"w-4 h-4 animate-spin"}):a.jsx(sa,{className:"w-4 h-4"}),"Spara Quiz"]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(dr,{className:"w-6 h-6 text-purple-600"}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Frhandsgranskning"})]}),a.jsx("input",{type:"text",value:p.title,onChange:U=>b({...p,title:U.target.value}),className:"w-full text-lg font-semibold px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white mb-3"}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(gt,{className:"w-4 h-4"}),p.questions.length," frgor"]}),p.sourceDocumentName&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(xt,{className:"w-4 h-4"}),p.sourceDocumentName]}),a.jsxs("span",{children:["Genererat p ",(p.processingTimeMs/1e3).toFixed(1),"s"]})]})]}),v&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:v}),a.jsx("div",{className:"space-y-4",children:p.questions.map((U,V)=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50",onClick:()=>E(T===V?null:V),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-semibold text-sm",children:V+1}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-white line-clamp-1",children:U.text})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:se=>{se.stopPropagation(),B(V)},className:"p-1.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:a.jsx(Je,{className:"w-4 h-4"})}),T===V?a.jsx(J2,{className:"w-5 h-5 text-gray-400"}):a.jsx(Mo,{className:"w-5 h-5 text-gray-400"})]})]}),T===V&&a.jsxs("div",{className:"p-4 pt-0 border-t border-gray-100 dark:border-gray-700",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frga"}),a.jsx("textarea",{value:U.text,onChange:se=>R(V,"text",se.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",rows:2})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Svarsalternativ (klicka fr att markera rtt svar)"}),a.jsx("div",{className:"space-y-2",children:U.options.map((se,Ne)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>ee(V,Ne),className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${U.correctIndex===Ne?"border-green-500 bg-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-green-400"}`,children:U.correctIndex===Ne&&a.jsx(Gr,{className:"w-4 h-4"})}),a.jsx("input",{type:"text",value:se,onChange:ie=>Y(V,Ne,ie.target.value),className:`flex-1 px-3 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white ${U.correctIndex===Ne?"border-green-300 dark:border-green-700":"border-gray-200 dark:border-gray-600"}`})]},Ne))})]}),U.explanation&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frklaring"}),a.jsx("textarea",{value:U.explanation,onChange:se=>R(V,"explanation",se.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white text-sm",rows:2})]})]})]},V))}),p.questions.length===0&&a.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Alla frgor har tagits bort. G tillbaka fr att generera nya."})]}):a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl",children:a.jsx(dr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"AI Quiz-generator"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generera quiz-frgor automatiskt frn PDF, Word eller text"})]})]}),v&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-3",children:[a.jsx(Er,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-red-700 dark:text-red-300",children:v})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[a.jsxs("div",{className:"flex gap-2 mb-6",children:[a.jsxs("button",{onClick:()=>l("file"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition ${o==="file"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[a.jsx(Xa,{className:"w-5 h-5"}),"Ladda upp fil"]}),a.jsxs("button",{onClick:()=>l("text"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition ${o==="text"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[a.jsx(h5,{className:"w-5 h-5"}),"Skriv text"]})]}),o==="file"&&a.jsx("div",{onDragEnter:F,onDragLeave:F,onDragOver:F,onDrop:D,className:`border-2 border-dashed rounded-xl p-8 text-center transition ${C?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":r?"border-green-300 dark:border-green-700 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,children:r?a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx(xt,{className:"w-10 h-10 text-green-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.name}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(r.size/1024/1024).toFixed(2)," MB"]})]}),a.jsx("button",{onClick:()=>n(null),className:"ml-4 p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:a.jsx(Je,{className:"w-5 h-5"})})]}):a.jsxs(a.Fragment,{children:[a.jsx(Xa,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:["Dra och slpp en fil hr, eller"," ",a.jsxs("label",{className:"text-blue-600 hover:text-blue-700 cursor-pointer font-medium",children:["klicka fr att vlja",a.jsx("input",{type:"file",onChange:U=>U.target.files[0]&&L(U.target.files[0]),accept:".pdf,.docx,.doc,.txt,.rtf,.odt",className:"hidden"})]})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"PDF, DOCX, DOC, TXT, RTF eller ODT (max 10 MB)"})]})}),o==="text"&&a.jsx("textarea",{value:s,onChange:U=>i(U.target.value),placeholder:"Klistra in eller skriv texten som quiz-frgorna ska baseras p...",className:"w-full h-48 px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[a.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Instllningar"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Titel"}),a.jsx("input",{type:"text",value:f,onChange:U=>g(U.target.value),placeholder:"Quiz-titel",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Antal frgor"}),a.jsx("select",{value:c,onChange:U=>d(parseInt(U.target.value)),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:[3,5,7,10,15].map(U=>a.jsxs("option",{value:U,children:[U," frgor"]},U))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Svrighetsgrad"}),a.jsx("select",{value:u,onChange:U=>h(U.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:ilt.map(U=>a.jsx("option",{value:U.value,children:U.label},U.value))})]})]})]}),a.jsx("button",{onClick:K,disabled:x||o==="file"&&!r||o==="text"&&!s.trim(),className:"w-full flex items-center justify-center gap-3 py-4 px-6 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition",children:x?a.jsxs(a.Fragment,{children:[a.jsx(ft,{className:"w-5 h-5 animate-spin"}),"Genererar quiz..."]}):a.jsxs(a.Fragment,{children:[a.jsx(dr,{className:"w-5 h-5"}),"Generera Quiz"]})}),a.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-4",children:"AI:n analyserar innehllet och genererar relevanta flervalsfrgor. Du kan redigera och justera frgorna innan du sparar."})]})}const llt=({ebookId:t,title:e})=>{const[r,n]=N.useState(null),[s,i]=N.useState(1),[o,l]=N.useState(!0),[c,d]=N.useState(!0);N.useEffect(()=>{u()},[t]);const u=async()=>{try{const f=await(await fetch(`/api/ebooks/${t}/metadata`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();n(f),l(!1)}catch(h){console.error("Failed to fetch PDF metadata:",h)}};return o?a.jsx("div",{className:"h-full flex items-center justify-center text-white",children:"Laddar dokument..."}):a.jsxs("div",{className:"flex h-full bg-[#1e1e1e] text-gray-200",children:[c&&a.jsxs("div",{className:"w-64 border-r border-gray-800 bg-[#252526] flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[a.jsx("span",{className:"font-bold text-xs uppercase tracking-widest text-gray-500",children:"Innehll"}),a.jsx("button",{onClick:()=>d(!1),className:"hover:text-white",children:a.jsx(gg,{size:18})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:r.chapters.map((h,f)=>a.jsx("button",{onClick:()=>i(h.pageNumber),className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${s===h.pageNumber?"bg-indigo-600 text-white":"hover:bg-gray-800 text-gray-400"}`,children:a.jsxs("div",{className:"flex justify-between gap-2",children:[a.jsx("span",{className:"truncate",children:h.title}),a.jsxs("span",{className:"text-[10px] opacity-50",children:["s.",h.pageNumber]})]})},f))})]}),a.jsxs("div",{className:"flex-1 flex flex-col relative",children:[a.jsxs("div",{className:"h-12 bg-[#2d2d2d] flex items-center justify-between px-4 shadow-md z-10",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[!c&&a.jsx("button",{onClick:()=>d(!0),className:"p-2 hover:bg-white/10 rounded",children:a.jsx(gg,{size:18})}),a.jsx("h4",{className:"text-sm font-medium truncate max-w-xs",children:e})]}),a.jsxs("div",{className:"flex items-center gap-4 bg-[#1e1e1e] px-3 py-1 rounded-lg",children:[a.jsx("button",{disabled:s<=1,onClick:()=>i(h=>h-1),className:"p-1 hover:text-white disabled:opacity-20",children:a.jsx(Ho,{size:20})}),a.jsxs("div",{className:"flex items-center gap-1 text-sm font-bold min-w-[60px] justify-center",children:[a.jsx("input",{type:"number",value:s,onChange:h=>{const f=parseInt(h.target.value);f>0&&f<=r.pageCount&&i(f)},className:"w-10 bg-transparent text-center border-b border-gray-600 focus:border-indigo-500 outline-none"}),a.jsxs("span",{className:"text-gray-500",children:["/ ",r.pageCount]})]}),a.jsx("button",{disabled:s>=r.pageCount,onClick:()=>i(h=>h+1),className:"p-1 hover:text-white disabled:opacity-20",children:a.jsx(or,{size:20})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"p-2 hover:bg-white/10 rounded",title:"Zooma ut",children:a.jsx(yK,{size:18})}),a.jsx("button",{className:"p-2 hover:bg-white/10 rounded",title:"Zooma in",children:a.jsx(bK,{size:18})})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center bg-[#1e1e1e] scrollbar-thin scrollbar-thumb-gray-800",children:a.jsx("img",{src:`/api/ebooks/${t}/page/${s}`,alt:`Page ${s}`,className:"max-w-full h-auto shadow-2xl rounded-sm transition-opacity duration-300 animate-in fade-in",onError:h=>{h.target.onerror=null,h.target.src="https://via.placeholder.com/800x1100?text=Kunde+inte+ladda+sidan"}},`${t}-${s}`)})]})]})},clt=()=>{const[t,e]=N.useState([]),[r,n]=N.useState([]),{currentUser:s}=At(),{t:i}=nt(),[o,l]=N.useState([]),[c,d]=N.useState(!0),[u,h]=N.useState("grid"),[f,g]=N.useState(""),[x,m]=N.useState("Alla"),[p,b]=N.useState(!1),[v,y]=N.useState(!1),[w,k]=N.useState(null),{setActiveAudiobook:j}=At(),[_,S]=N.useState({epub:null,cover:null}),[A,T]=N.useState(0),[E,C]=N.useState({title:"",author:"",category:"",language:"Svenska",description:"",isbn:""}),[z,M]=N.useState(!1),[F,D]=N.useState(!1),[L,K]=N.useState(!1),$=["Alla",...new Set(o.map(H=>H.category).filter(Boolean))].sort(),R=async()=>{try{d(!0);const H=await fetch("/api/ebooks",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(H.ok){const Z=await H.json();l(Z)}}catch(H){console.error("Failed to fetch ebooks:",H),Ae.error(i("messages.fetch_error"))}finally{d(!1)}};N.useEffect(()=>{R(),Y()},[]);const Y=async()=>{try{const H=await fetch("/api/courses",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(H.ok){const Z=await H.json();e(Z)}}catch(H){console.error("Failed to fetch courses:",H)}},ee=async()=>{if(!E.isbn)return Ae.error("Ange ett ISBN-nummer");const H=Ae.loading("Hmtar bokinformation...");try{const Z=await fetch(`/api/ebooks/metadata/fetch?isbn=${E.isbn}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Z.ok){const te=await Z.json();C(ge=>({...ge,title:te.title||ge.title,author:te.author||ge.author,description:te.description||ge.description,category:te.category||ge.category,language:te.language||ge.language})),Ae.success("Information hmtad!",{id:H})}else Ae.error("Kunde inte hitta boken via ISBN",{id:H})}catch{Ae.error("Fel vid hmtning av metadata",{id:H})}},B=async H=>{if(H.preventDefault(),!_.epub)return Ae.error(i("library.select_file_alert")||"Vnligen vlj en fil");const Z=new FormData;if(Z.append("title",E.title),Z.append("author",E.author),Z.append("category",E.category),Z.append("language",E.language),Z.append("description",E.description),E.isbn&&Z.append("isbn",E.isbn),Z.append("file",_.epub),_.cover&&Z.append("cover",_.cover),r.length>0){const te=r.join(",");Z.append("courseIds",te)}try{await new Promise((te,ge)=>{const Ce=new XMLHttpRequest;Ce.open("POST","/api/ebooks/upload"),Ce.setRequestHeader("Authorization",`Bearer ${localStorage.getItem("token")}`),Ce.upload.onprogress=Le=>{Le.lengthComputable&&T(Math.round(Le.loaded/Le.total*100))},Ce.onload=()=>Ce.status>=200&&Ce.status<300?te(Ce.response):ge(new Error(Ce.statusText)),Ce.onerror=()=>ge(new Error("Network error")),Ce.send(Z)}),Ae.success(i("messages.upload_success")),b(!1),T(0),R(),C({title:"",author:"",category:"",language:"Svenska",description:"",isbn:""}),S({epub:null,cover:null}),n([])}catch{Ae.error(i("messages.upload_error"))}},U=async H=>{H.preventDefault();const Z={...E,courseIds:r};try{if((await fetch(`/api/ebooks/${w.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(Z)})).ok)Ae.success(i("messages.setting_saved")),y(!1),k(null),R(),n([]);else throw new Error("Update failed")}catch(te){console.error("Update error:",te),Ae.error("Kunde inte spara ndringar")}},V=async H=>{if(confirm(i("common.confirm_delete")||"Are you sure?"))try{if((await fetch(`/api/ebooks/${H}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)Ae.success(i("messages.delete_success")||"Boken har tagits bort"),R();else throw new Error("Delete failed")}catch{Ae.error(i("messages.delete_error")||"Kunde inte ta bort boken")}},se=async H=>{if(!confirm("Vill du indexera den hr boken fr din AI Study Pal? Detta gr att AI:n kan svara p frgor baserat p bokens innehll fr ALLA lnkade kurser."))return;M(!0);const Z=Ae.loading("Indexerar boken fr AI Study Pal...");try{const te=await fetch(`/api/ai-tutor/ingest-ebook/${H}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(te.ok)Ae.success("Boken har indexerats! Din AI Study Pal r nu smartare. ",{id:Z});else{const ge=await te.text();Ae.error("Kunde inte indexera: "+ge,{id:Z})}}catch(te){console.error("Failed to index ebook:",te),Ae.error("Ett fel intrffade vid indexering.",{id:Z})}finally{M(!1)}},Ne=async H=>{K(!0);const Z=Ae.loading("Frbereder AI-upplsning...");try{const te=H.description||`Detta r en upplsning av boken ${H.title}. Tyvrr saknas beskrivning.`,ge=await fetch(`/api/ebooks/${H.id}/tts`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({text:te})});if(ge.ok){const Ce=await ge.blob(),Le=URL.createObjectURL(Ce);j({...H,fileUrl:Le,type:"AUDIO"}),Ae.success("AI-rsten r redo! ",{id:Z})}else Ae.error("Kunde inte generera AI-rst.",{id:Z})}catch(te){console.error("TTS error:",te),Ae.error("Ett fel intrffade vid AI-upplsning.",{id:Z})}finally{K(!1)}},ie=async H=>{const Z=Ae.loading("Genererar ljudbok till servern...");try{const te=await fetch(`/api/ebooks/${H.id}/regenerate-audio`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(te.ok){const ge=await te.json();Ae.success("Ljudboken har terskapats och sparats! ",{id:Z}),R(),(w==null?void 0:w.id)===H.id&&k(ge)}else{const ge=await te.json();Ae.error("Misslyckades: "+(ge.message||"Oknt fel"),{id:Z})}}catch(te){console.error("Regeneration error:",te),Ae.error("Tekniskt fel vid terskapande.",{id:Z})}},q=H=>{r.includes(H)?n(r.filter(Z=>Z!==H)):n([...r,H])};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto min-h-screen bg-gray-50 dark:bg-[#131314]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-3",children:[a.jsx(fd,{className:"w-8 h-8 text-indigo-600"}),i("library.title")]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:i("library.subtitle")})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 w-full md:w-auto",children:[a.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 dark:shadow-none",children:[a.jsx(Xa,{size:20}),i("library.upload_btn")]}),a.jsxs("div",{className:"flex bg-white dark:bg-gray-800 rounded-xl p-1 shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:()=>h("grid"),className:`p-2 rounded-lg transition-colors ${u==="grid"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400":"text-gray-400 hover:text-gray-600"}`,children:a.jsx(il,{size:20})}),a.jsx("button",{onClick:()=>h("list"),className:`p-2 rounded-lg transition-colors ${u==="list"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400":"text-gray-400 hover:text-gray-600"}`,children:a.jsx(cm,{size:20})})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-[240px_1fr] gap-8",children:[a.jsxs("div",{className:"hidden md:block space-y-2 sticky top-4 self-start",children:[a.jsx("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 px-3",children:"Kategorier"}),$.map(H=>a.jsx("button",{onClick:()=>m(H),className:`w-full text-left px-4 py-2 rounded-xl text-sm font-medium transition-colors ${x===H?"bg-indigo-600 text-white shadow-md shadow-indigo-200 dark:shadow-none":"text-gray-600 dark:text-gray-400 hover:bg-white dark:hover:bg-gray-800"}`,children:H},H))]}),a.jsx("div",{className:"md:hidden",children:a.jsx("select",{className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border-none rounded-xl text-gray-900 dark:text-white shadow-sm focus:ring-2 focus:ring-indigo-500",value:x,onChange:H=>m(H.target.value),children:$.map(H=>a.jsx("option",{value:H,children:H},H))})}),a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx(gr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:i("library.search_placeholder"),className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border-none rounded-xl text-gray-900 dark:text-white shadow-sm focus:ring-2 focus:ring-indigo-500",value:f,onChange:H=>g(H.target.value)})]}),c?a.jsx("div",{className:"flex justify-center items-center py-20",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):o.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx(fd,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:i("library.no_books")}),a.jsx("p",{className:"text-gray-500",children:i("library.no_books_desc")})]}):a.jsx("div",{className:u==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6":"space-y-4",children:o.filter(H=>(x==="Alla"||H.category===x)&&(H.title.toLowerCase().includes(f.toLowerCase())||H.author.toLowerCase().includes(f.toLowerCase()))).map(H=>{var Z,te;return a.jsxs("div",{className:`group bg-white dark:bg-gray-800 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 dark:border-gray-700 overflow-hidden ${u==="list"?"flex items-center gap-4 p-4":"flex flex-col"}`,children:[a.jsxs("div",{className:`relative overflow-hidden cursor-pointer ${u==="list"?"w-24 h-32 rounded-lg flex-grow-0":"aspect-[3/4] w-full"}`,onClick:()=>{H.type==="AUDIO"?j(H):k(H)},children:[a.jsx("img",{src:`/api/ebooks/${H.id}/cover`,alt:H.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:ge=>{ge.target.onerror=null,ge.target.src="https://placehold.co/400x600?text="+encodeURIComponent(H.title)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:a.jsx("div",{className:"bg-white/90 dark:bg-gray-900/90 p-3 rounded-full shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-all duration-300",children:a.jsx(aw,{size:24,className:"text-indigo-600"})})}),a.jsx("span",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur-md text-white text-xs font-bold px-2 py-1 rounded-lg",children:H.category}),H.type==="AUDIO"&&a.jsxs("div",{className:"absolute top-2 left-2 bg-indigo-600 backdrop-blur-md text-white text-[10px] font-bold px-2 py-1 rounded-lg flex items-center gap-1",children:[a.jsx(U0,{size:10})," AUDIO"]})]}),a.jsxs("div",{className:`flex flex-col ${u==="list"?"flex-1 py-0":"p-5 flex-1"}`,children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-lg mb-1 line-clamp-1",children:H.title}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:H.author}),a.jsx("div",{className:"mt-auto flex items-center gap-2 justify-end",children:(((Z=s==null?void 0:s.role)==null?void 0:Z.name)==="ROLE_TEACHER"||((te=s==null?void 0:s.role)==null?void 0:te.name)==="ROLE_ADMIN"||(s==null?void 0:s.role)==="TEACHER"||(s==null?void 0:s.role)==="ADMIN"||(s==null?void 0:s.username)==="admin")&&a.jsxs(a.Fragment,{children:[H.type==="AUDIO"&&a.jsx("button",{onClick:ge=>{ge.stopPropagation(),ie(H)},className:"p-2 text-indigo-500 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:"terskapa Ljudfil (Fixa 404)",children:a.jsx(sn,{size:18})}),a.jsx("button",{onClick:ge=>{ge.stopPropagation(),Ne(H)},className:"p-2 text-pink-500 hover:text-pink-600 hover:bg-pink-50 dark:hover:bg-pink-900/30 rounded-lg transition-colors",title:"Lyssna med AI (TTS)",children:a.jsx(g5,{size:18})}),a.jsx("button",{onClick:ge=>{ge.stopPropagation(),se(H.id)},className:"p-2 text-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:"Indexera fr AI Study Pal",children:a.jsx(dr,{size:18})}),a.jsx("button",{onClick:ge=>{var Ce;ge.stopPropagation(),C({...H,description:H.description||""}),n(((Ce=H.courses)==null?void 0:Ce.map(Le=>Le.id))||[]),k(H),y(!0)},className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:a.jsx(yn,{size:18})}),a.jsx("button",{onClick:ge=>{ge.stopPropagation(),V(H.id)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:a.jsx(qt,{size:18})})]})})]})]},H.id)})}),p&&a.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Xa,{className:"text-indigo-600"}),i("library.upload_modal_title")]}),a.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(Je,{})})]}),a.jsxs("form",{onSubmit:B,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2 items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"ISBN (Valfritt)"}),a.jsx("input",{type:"text",placeholder:"978...",className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:E.isbn||"",onChange:H=>C({...E,isbn:H.target.value})})]}),a.jsx("button",{type:"button",onClick:ee,className:"px-4 py-3 bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition-colors",children:"Hmta info"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:[i("library.title_label")," *"]}),a.jsx("input",{type:"text",required:!0,className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:E.title,onChange:H=>C({...E,title:H.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:i("library.author_label")}),a.jsx("input",{type:"text",className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:E.author,onChange:H=>C({...E,author:H.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:i("library.category_label")}),a.jsx("input",{type:"text",list:"category-suggestions",className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:E.category,onChange:H=>C({...E,category:H.target.value})}),a.jsx("datalist",{id:"category-suggestions",children:$.filter(H=>H!=="Alla").map(H=>a.jsx("option",{value:H},H))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Koppla till kurser (fr AI)"}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-3 max-h-32 overflow-y-auto border border-gray-100 dark:border-gray-700",children:[t.length===0&&a.jsx("p",{className:"text-xs text-gray-400",children:"Inga kurser hittades."}),t.map(H=>a.jsxs("div",{className:"flex items-center gap-2 mb-1 last:mb-0",children:[a.jsx("input",{type:"checkbox",id:`course-${H.id}`,checked:r.includes(H.id),onChange:()=>q(H.id),className:"rounded text-indigo-600 focus:ring-indigo-500"}),a.jsxs("label",{htmlFor:`course-${H.id}`,className:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer select-none truncate",children:[H.name," ",a.jsxs("span",{className:"text-xs text-gray-400",children:["(",H.courseCode,")"]})]})]},H.id))]}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"AI:n kommer kunna svara p frgor om boken i de valda kurserna."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:i("library.description_label")}),a.jsx("textarea",{className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 h-24 resize-none",value:E.description,onChange:H=>C({...E,description:H.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:[i("library.epub_file_label")," *"]}),a.jsx("input",{type:"file",accept:".epub,.pdf,.mp3,.m4b",required:!0,onChange:H=>S({..._,epub:H.target.files[0]}),className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:[i("library.cover_image_label")," (",i("common.optional"),")"]}),a.jsx("input",{type:"file",accept:"image/*",onChange:H=>S({..._,cover:H.target.files[0]}),className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"})]})]}),a.jsxs("div",{className:"pt-4 flex flex-col gap-3",children:[A>0&&a.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[" ",a.jsx("div",{className:"bg-indigo-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${A}%`}})," ",a.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[A,"%"]})," "]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>b(!1),className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-xl font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:i("common.cancel")}),a.jsx("button",{type:"submit",disabled:A>0&&A<100,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 dark:shadow-none disabled:opacity-50 disabled:cursor-not-allowed",children:A>0&&A<100?i("common.uploading")+"...":i("library.upload_btn")})]})]})]})]})}),v&&a.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(yn,{size:24,className:"text-indigo-600"}),i("library.edit_modal_title")]}),a.jsx("button",{onClick:()=>{y(!1),k(null)},className:"text-gray-400 hover:text-gray-600",children:a.jsx(Je,{})})]}),a.jsxs("form",{onSubmit:U,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2 items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"ISBN"}),a.jsx("input",{type:"text",placeholder:"978...",className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:E.isbn||"",onChange:H=>C({...E,isbn:H.target.value})})]}),a.jsx("button",{type:"button",onClick:ee,className:"px-4 py-3 bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition-colors",children:"Hmta info"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:[i("library.title_label")," *"]}),a.jsx("input",{type:"text",required:!0,className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:E.title,onChange:H=>C({...E,title:H.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:i("library.author_label")}),a.jsx("input",{type:"text",className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:E.author,onChange:H=>C({...E,author:H.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:i("library.category_label")}),a.jsx("input",{type:"text",list:"edit-category-suggestions",className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500",value:E.category,onChange:H=>C({...E,category:H.target.value})}),a.jsx("datalist",{id:"edit-category-suggestions",children:$.filter(H=>H!=="Alla").map(H=>a.jsx("option",{value:H},H))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Koppla till kurser (fr AI)"}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-3 max-h-32 overflow-y-auto border border-gray-100 dark:border-gray-700",children:[t.length===0&&a.jsx("p",{className:"text-xs text-gray-400",children:"Inga kurser hittades."}),t.map(H=>a.jsxs("div",{className:"flex items-center gap-2 mb-1 last:mb-0",children:[a.jsx("input",{type:"checkbox",id:`edit-course-${H.id}`,checked:r.includes(H.id),onChange:()=>q(H.id),className:"rounded text-indigo-600 focus:ring-indigo-500"}),a.jsxs("label",{htmlFor:`edit-course-${H.id}`,className:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer select-none truncate",children:[H.name," ",a.jsxs("span",{className:"text-xs text-gray-400",children:["(",H.courseCode,")"]})]})]},H.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:i("library.description_label")}),a.jsx("textarea",{className:"w-full bg-gray-50 dark:bg-gray-900 border-none rounded-xl p-3 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 h-24 resize-none",value:E.description,onChange:H=>C({...E,description:H.target.value})})]}),a.jsxs("div",{className:"pt-4 flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{y(!1),k(null)},className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-xl font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:i("common.cancel")}),a.jsx("button",{type:"submit",className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 dark:shadow-none",children:i("library.save_changes")})]})]})]})}),w&&!v&&a.jsxs("div",{className:"fixed inset-0 z-50 bg-white dark:bg-gray-900 flex flex-col animate-in fade-in duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 shadow-sm z-10",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 dark:text-white truncate max-w-2xl flex items-center gap-2",children:[a.jsx(fd,{className:"text-indigo-600",size:20}),w.title]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500 hidden sm:inline-block",children:w.author}),a.jsx("button",{onClick:()=>k(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:a.jsx(Je,{})})]})]}),a.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-900 overflow-hidden relative",children:w.type==="AUDIO"?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:a.jsx(U0,{className:"text-white",size:40})}),a.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Ljudbok startad"}),a.jsx("p",{className:"text-gray-500",children:"Spelaren syns i ett flytande fnster lngst ner."}),a.jsx("button",{onClick:()=>{j(w),k(null)},className:"mt-6 px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors",children:"ppna biblioteket"})]})}):w.fileUrl&&w.fileUrl.toLowerCase().endsWith(".epub")||w.type==="EPUB"?a.jsx(SJ,{url:w.fileUrl,title:w.title}):a.jsx(llt,{ebookId:w.id,title:w.title})})]})]})]})]})},dlt=()=>{const[t,e]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState(!0),[c,d]=N.useState(!1),[u,h]=N.useState({name:"",description:"",questions:[]}),[f,g]=N.useState(""),[x,m]=N.useState(""),[p,b]=N.useState(null);N.useEffect(()=>{v()},[]);const v=async()=>{try{l(!0);const[_,S]=await Promise.all([O.get("/evaluations/templates"),O.get("/courses/my-courses")]);e(_||[]),n(S||[])}catch(_){console.error("Failed to fetch data",_)}finally{l(!1)}},y=async()=>{try{p?await O.put(`/evaluations/templates/${p}`,u):await O.post("/evaluations/templates",u),d(!1),b(null),h({name:"",description:"",questions:[]}),v()}catch(_){console.error(_),alert("Kunde inte spara mall.")}},w=_=>{h({name:_.name,description:_.description,questions:_.questions||[]}),b(_.id),d(!0)},k=async()=>{if(!(!f||!x))try{await O.post("/evaluations/activate",{courseId:f,templateId:x}),alert("Utvrdering aktiverad!"),v()}catch{alert("Kunde inte aktivera utvrdering.")}},j=()=>{h(_=>({..._,questions:[..._.questions,{questionText:"",questionType:"LIKERT",orderIndex:_.questions.length}]}))};return o?a.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-slate-400",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),"Laddar hantering..."]}):a.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto space-y-10 animate-in fade-in duration-700",children:[a.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white flex items-center gap-3 tracking-tight",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-500/10 rounded-xl",children:a.jsx(Va,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),"Kursutvrderingar"]}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium ml-1",children:"Hantera mallar och aktivera utvrderingar fr dina kurser."})]}),a.jsxs("button",{onClick:()=>{h({name:"",description:"",questions:[]}),b(null),d(!0)},className:"flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl font-bold shadow-xl shadow-blue-600/20 transition-all active:scale-95",children:[a.jsx(jt,{className:"w-5 h-5"})," Skapa ny mall"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[a.jsx("div",{className:"lg:col-span-4 space-y-6",children:a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] border border-gray-200 dark:border-gray-800 rounded-3xl p-8 shadow-sm h-fit",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[a.jsx(Yo,{className:"w-5 h-5 text-green-500"}),"Aktivera utvrdering"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider ml-1",children:"Vlj kurs"}),a.jsxs("select",{value:f,onChange:_=>g(_.target.value),className:"dark:bg-[#282a2c] dark:border-transparent",children:[a.jsx("option",{value:"",children:"Vlj en kurs..."}),r==null?void 0:r.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider ml-1",children:"Vlj mall"}),a.jsxs("select",{value:x,onChange:_=>m(_.target.value),className:"dark:bg-[#282a2c] dark:border-transparent",children:[a.jsx("option",{value:"",children:"Vlj en mall..."}),t==null?void 0:t.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]})]}),a.jsx("button",{onClick:k,disabled:!f||!x,className:"w-full mt-4 flex items-center justify-center gap-2 px-6 py-4 bg-green-600 hover:bg-green-500 disabled:opacity-30 disabled:grayscale text-white rounded-2xl font-bold transition-all active:scale-95 shadow-lg shadow-green-600/10",children:"Starta utvrdering"})]}),a.jsxs("div",{className:"mt-8 p-5 bg-blue-50 dark:bg-blue-500/5 border border-blue-100 dark:border-blue-500/10 rounded-2xl flex gap-3",children:[a.jsx(Xl,{className:"w-5 h-5 text-blue-500 shrink-0"}),a.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300/80 leading-relaxed font-medium",children:"Nr du aktiverar en utvrdering blir den synlig fr alla elever i den valda kursen. Svaren samlas in helt anonymt."})]})]})}),a.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(gg,{className:"w-5 h-5 text-blue-500"}),"Mina mallar"]}),a.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase",children:[(t==null?void 0:t.length)||0," mallar"]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:t==null?void 0:t.map(_=>{var S;return a.jsxs("div",{className:"group bg-white dark:bg-[#1e1f20] hover:ring-2 hover:ring-blue-500/50 border border-gray-200 dark:border-gray-800 rounded-3xl p-6 transition-all duration-300 shadow-sm hover:shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{className:"p-2.5 bg-slate-100 dark:bg-slate-800 rounded-xl group-hover:bg-blue-50 dark:group-hover:bg-blue-500/10 transition-colors",children:a.jsx(Va,{className:"w-5 h-5 text-slate-600 dark:text-slate-400 group-hover:text-blue-600"})}),_.systemTemplate&&a.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black bg-blue-600 text-white px-2.5 py-1 rounded-lg",children:"Default"})]}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:_.name}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 line-clamp-2 mb-6 font-medium",children:_.description}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-tighter",children:[a.jsx(Ha,{className:"w-4 h-4"}),((S=_.questions)==null?void 0:S.length)||0," frgor"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>w(_),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors text-slate-400 hover:text-blue-500",children:a.jsx(yn,{className:"w-4 h-4"})}),!_.systemTemplate&&a.jsx("button",{className:"p-2 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors text-slate-400 hover:text-red-500",children:a.jsx(qt,{className:"w-4 h-4"})})]})]})]},_.id)})}),(t==null?void 0:t.length)===0&&a.jsxs("div",{className:"flex flex-col items-center justify-center p-20 bg-slate-50 dark:bg-slate-900/40 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-800",children:[a.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-sm mb-4",children:a.jsx(Va,{className:"w-8 h-8 text-slate-300"})}),a.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-sm",children:"Inga mallar skapade"})]})]})]}),c&&a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-md animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] border border-gray-200 dark:border-gray-800 rounded-[2.5rem] w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[a.jsxs("div",{className:"p-8 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/10",children:[a.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:p?"Redigera utvrderingsmall":"Ny utvrderingsmall"}),a.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors",children:a.jsx(Je,{className:"w-6 h-6 text-slate-500"})})]}),a.jsxs("div",{className:"p-8 overflow-y-auto space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider ml-1",children:"Mallnamn"}),a.jsx("input",{type:"text",value:u.name,onChange:_=>h({...u,name:_.target.value}),placeholder:"T.ex. Slututvrdering"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider ml-1",children:"Beskrivning"}),a.jsx("textarea",{value:u.status,className:"h-24",onChange:_=>h({...u,description:_.target.value}),placeholder:"Kort beskrivning av syftet..."})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("label",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:["Frgor (",u.questions.length,")"]}),a.jsxs("button",{onClick:j,className:"text-xs font-bold text-blue-600 hover:text-blue-500 uppercase flex items-center gap-1.5",children:[a.jsx(jt,{className:"w-4 h-4"})," Lgg till"]})]}),a.jsxs("div",{className:"space-y-3",children:[u.questions.map((_,S)=>a.jsxs("div",{className:"flex gap-4 items-start bg-slate-50 dark:bg-slate-800/40 p-5 rounded-3xl border border-slate-100 dark:border-slate-800 transition-all group hover:border-blue-500/30",children:[a.jsx("div",{className:"mt-2.5 w-6 h-6 bg-slate-200 dark:bg-slate-700 flex items-center justify-center rounded-lg text-[10px] font-black text-slate-500",children:S+1}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsx("input",{className:"bg-transparent border-none p-0 text-gray-900 dark:text-white font-bold placeholder:font-normal focus:ring-0",value:_.questionText,onChange:A=>{const T=[...u.questions];T[S].questionText=A.target.value,h({...u,questions:T})},placeholder:"Stll din frga..."}),a.jsx("div",{className:"flex gap-2",children:["LIKERT","TEXT","NPS","EMOJI"].map(A=>a.jsx("button",{onClick:()=>{const T=[...u.questions];T[S].questionType=A,h({...u,questions:T})},className:`text-[10px] font-black px-2.5 py-1 rounded-lg border transition-all ${_.questionType===A?"bg-blue-600 border-blue-600 text-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500"}`,children:A},A))})]}),a.jsx("button",{onClick:()=>{const A=u.questions.filter((T,E)=>E!==S);h({...u,questions:A})},className:"mt-2.5 p-2 text-slate-400 hover:text-red-500 transition-colors",children:a.jsx(qt,{className:"w-4 h-4"})})]},S)),u.questions.length===0&&a.jsxs("button",{onClick:j,className:"w-full py-10 border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-3xl text-slate-400 hover:border-blue-500/30 hover:text-blue-500 transition-all flex flex-col items-center justify-center gap-2 group",children:[a.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-2xl group-hover:scale-110 transition-transform",children:a.jsx(jt,{className:"w-5 h-5"})}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Lgg till frsta frgan"})]})]})]})]}),a.jsxs("div",{className:"p-8 border-top border-gray-100 dark:border-gray-800 flex gap-4 bg-slate-50/50 dark:bg-slate-800/10",children:[a.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-4 bg-white dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 rounded-2xl font-bold border border-gray-200 dark:border-gray-700 transition-all active:scale-95",children:"Avbryt"}),a.jsx("button",{onClick:y,disabled:!u.name||u.questions.length===0,className:"flex-1 py-4 bg-blue-600 hover:bg-blue-500 disabled:opacity-30 disabled:grayscale text-white rounded-2xl font-bold shadow-xl shadow-blue-600/20 transition-all active:scale-95",children:"Spara mall"})]})]})})]})},ult=({instanceId:t,onComplete:e})=>{var S;const r=Et(),[n,s]=N.useState(null),[i,o]=N.useState(0),[l,c]=N.useState({}),[d,u]=N.useState(!0),[h,f]=N.useState(!1),[g,x]=N.useState(!1),[m,p]=N.useState(null);N.useEffect(()=>{b()},[t]);const b=async()=>{try{u(!0);const A=await O.get(`/evaluations/instance/${t}/details`);s(A)}catch(A){p("Kunde inte hmta utvrderingen."),console.error(A)}finally{u(!1)}},v=(A,T)=>{c(E=>({...E,[A]:T}))},y=async()=>{var A,T;try{f(!0),await O.post(`/evaluations/instance/${t}/submit`,l),x(!0),e&&e()}catch(E){p(((T=(A=E.response)==null?void 0:A.data)==null?void 0:T.error)||"Kunde inte skicka svar.")}finally{f(!1)}};if(d)return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-slate-400",children:[a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"}),"Laddar utvrdering..."]});if(m)return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-8 bg-red-50 dark:bg-red-500/5 rounded-[2.5rem] border border-red-100 dark:border-red-500/20",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-500/20 rounded-full flex items-center justify-center mb-4",children:a.jsx(Xl,{className:"w-8 h-8 text-red-500"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Ett fel uppstod"}),a.jsx("p",{className:"text-red-500 font-medium",children:m})]});if(g)return a.jsxs("div",{className:"flex flex-col items-center justify-center p-12 py-20 text-center animate-in fade-in zoom-in duration-500 bg-white dark:bg-[#1e1f20] border border-gray-100 dark:border-gray-800 rounded-[3rem] shadow-xl",children:[a.jsx("div",{className:"w-24 h-24 bg-green-100 dark:bg-green-500/20 rounded-full flex items-center justify-center mb-8",children:a.jsx(ci,{className:"w-12 h-12 text-green-500"})}),a.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white mb-4 tracking-tight",children:"Tack fr ditt svar!"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-md font-medium text-lg leading-relaxed",children:"Dina sikter r otroligt vrdefulla och hjlper oss att gra kursen nnu bttre fr framtida elever."}),a.jsx("button",{onClick:()=>r(-1),className:"mt-10 px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl font-bold transition-all active:scale-95 shadow-xl shadow-blue-600/20",children:"G tillbaka"})]});const w=((S=n==null?void 0:n.template)==null?void 0:S.questions)||[];if(w.length===0)return a.jsx("div",{className:"p-20 text-center bg-white dark:bg-[#1e1f20] rounded-[3rem] border border-gray-100 dark:border-gray-800",children:a.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest",children:"Inga frgor hittades i denna utvrdering."})});const k=w[i],j=(i+1)/w.length*100,_=A=>{const T=l[A.id]||"";switch(A.questionType){case"LIKERT":return a.jsx("div",{className:"grid grid-cols-5 gap-3 mt-10",children:[1,2,3,4,5].map(E=>a.jsx("button",{onClick:()=>v(A.id,E.toString()),className:`flex flex-col items-center justify-center py-6 rounded-3xl text-2xl font-black transition-all duration-300 transform hover:scale-105 active:scale-95 border-2 ${T===E.toString()?"bg-blue-600 border-blue-600 text-white shadow-2xl shadow-blue-600/40":"bg-slate-50 dark:bg-slate-800/50 border-transparent text-slate-400 hover:bg-white dark:hover:bg-slate-700 hover:border-blue-500/30"}`,children:E},E))});case"NPS":return a.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-10",children:[0,1,2,3,4,5,6,7,8,9,10].map(E=>a.jsx("button",{onClick:()=>v(A.id,E.toString()),className:`w-12 h-12 flex items-center justify-center rounded-2xl text-sm font-black transition-all duration-300 transform hover:scale-110 active:scale-90 border-2 ${T===E.toString()?"bg-indigo-600 border-indigo-600 text-white shadow-xl shadow-indigo-600/30":"bg-slate-50 dark:bg-slate-800/50 border-transparent text-slate-400 hover:bg-white dark:hover:bg-slate-700"}`,children:E},E))});case"EMOJI":{const E=[{val:"1",label:"",text:"Inte alls"},{val:"2",label:"",text:"Sdr"},{val:"3",label:"",text:"Bra"},{val:"4",label:"",text:"Fantastiskt"}];return a.jsx("div",{className:"grid grid-cols-4 gap-4 mt-10",children:E.map(C=>a.jsxs("button",{onClick:()=>v(A.id,C.val),className:`flex flex-col items-center gap-3 p-6 rounded-[2rem] transition-all duration-500 transform hover:scale-110 active:scale-95 border-2 ${T===C.val?"bg-white dark:bg-slate-800 border-blue-500 shadow-2xl":"bg-transparent border-transparent grayscale opacity-50 hover:grayscale-0 hover:opacity-100"}`,children:[a.jsx("span",{className:"text-5xl",children:C.label}),a.jsx("span",{className:`text-[10px] uppercase font-black ${T===C.val?"text-blue-500":"text-slate-400"}`,children:C.text})]},C.val))})}case"TEXT":return a.jsx("textarea",{value:T,onChange:E=>v(A.id,E.target.value),placeholder:"Dela grna med dig av dina tankar och frslag...",className:"w-full mt-8 p-6 bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 rounded-[2rem] text-gray-900 dark:text-white font-medium focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500/50 transition-all min-h-[180px] shadow-inner text-lg"});default:return null}};return a.jsxs("div",{className:"max-w-3xl mx-auto p-4 py-10",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1e1f20] border border-gray-100 dark:border-gray-800 rounded-[3rem] shadow-2xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-slate-100 dark:bg-slate-800",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-600 h-full transition-all duration-700 ease-out shadow-[0_0_20px_rgba(37,99,235,0.5)]",style:{width:`${j}%`}})}),a.jsxs("div",{className:"p-8 md:p-14",children:[a.jsxs("div",{className:"flex justify-between items-center mb-10",children:[a.jsx("div",{className:"px-5 py-2 bg-blue-50 dark:bg-blue-500/10 rounded-2xl border border-blue-100 dark:border-blue-500/10",children:a.jsxs("span",{className:"text-xs font-black text-blue-600 dark:text-blue-400 uppercase tracking-widest italic",children:["Frga ",i+1," / ",w.length]})}),a.jsx("div",{className:"flex gap-1.5",children:w.map((A,T)=>a.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-500 ${T===i?"bg-blue-600 w-6":T<i?"bg-green-500":"bg-slate-200 dark:bg-slate-800"}`},T))})]}),a.jsxs("div",{className:"animate-in slide-in-from-right-12 fade-in duration-700",children:[a.jsx("h3",{className:"text-3xl md:text-4xl font-black text-gray-900 dark:text-white leading-[1.1] tracking-tight",children:k==null?void 0:k.questionText}),_(k)]},i),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mt-16 pt-10 border-t border-gray-50 dark:border-gray-800",children:[a.jsxs("button",{onClick:()=>o(A=>Math.max(0,A-1)),disabled:i===0,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-8 py-4 rounded-2xl font-bold text-slate-500 hover:text-gray-900 dark:hover:text-white bg-slate-100 dark:bg-slate-800/80 hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:[a.jsx(Ho,{className:"w-5 h-5"})," Fregende"]}),a.jsx("div",{className:"flex-1"}),i===w.length-1?a.jsx("button",{onClick:y,disabled:!l[k==null?void 0:k.id]||h,className:"w-full sm:w-auto flex items-center justify-center gap-3 px-10 py-5 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-200 dark:disabled:bg-slate-800 text-white rounded-2xl font-black shadow-2xl shadow-blue-600/30 transition-all transform active:scale-95 group",children:h?a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):a.jsxs(a.Fragment,{children:["Skicka in svar ",a.jsx(Wr,{className:"w-5 h-5 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})]})}):a.jsxs("button",{onClick:()=>o(A=>A+1),disabled:!l[k==null?void 0:k.id],className:"w-full sm:w-auto flex items-center justify-center gap-3 px-10 py-5 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-2xl font-black transition-all transform active:scale-95 border border-transparent shadow-xl group",children:["Nsta frga ",a.jsx(or,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]})]}),a.jsx("p",{className:"mt-8 text-center text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 opacity-60",children:"Driven av EduFlex AI  Dina svar frblir anonyma"})]})},hlt=()=>{const{instanceId:t}=uh();return a.jsx("div",{className:"py-8",children:a.jsx(ult,{instanceId:t})})},flt=()=>{const[t,e]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState("terms"),[c,d]=N.useState({name:"",startDate:"",endDate:"",academicYear:""}),[u,h]=N.useState({title:"",content:"",version:"1.0"});N.useEffect(()=>{f()},[]);const f=async()=>{i(!0);try{const[p,b]=await Promise.all([O.principal.governance.getTerms(),O.principal.governance.getPolicies()]);e(p||[]),n(b||[])}catch{Ae.error("Kunde inte ladda data")}finally{i(!1)}},g=async()=>{if(!(!c.name||!c.startDate||!c.endDate))try{await O.principal.governance.createTerm(c),d({name:"",startDate:"",endDate:"",academicYear:""}),f(),Ae.success("Termin skapad")}catch{Ae.error("Kunde inte skapa termin")}},x=async(p,b)=>{try{await O.principal.governance.lockTerm(p,!b),f(),Ae.success(b?"Termin upplst":"Termin lst fr betygssttning")}catch{Ae.error("Kunde inte ndra ls-status")}},m=async()=>{if(!(!u.title||!u.content))try{await O.principal.governance.createPolicy(u),h({title:"",content:"",version:"1.0"}),f(),Ae.success("Policy publicerad")}catch{Ae.error("Kunde inte skapa policy")}};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[a.jsx("div",{className:"p-3 bg-indigo-600 text-white rounded-2xl shadow-lg",children:a.jsx(md,{size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Lsrsstyrning & Policy"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Administrera terminer, betygsls och skolvergripande regelverk."})]})]}),a.jsxs("div",{className:"flex border-b border-gray-100 dark:border-gray-800 gap-8 mb-6",children:[a.jsx("button",{onClick:()=>l("terms"),className:`pb-4 px-2 text-sm font-bold transition-all border-b-2 ${o==="terms"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-400"}`,children:"Terminer & Betygsls"}),a.jsx("button",{onClick:()=>l("policies"),className:`pb-4 px-2 text-sm font-bold transition-all border-b-2 ${o==="policies"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-400"}`,children:"Skolpolicy & Efterlevnad"})]}),o==="terms"?a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] p-6 rounded-2xl border border-gray-100 dark:border-gray-800 h-fit",children:[a.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[a.jsx(jt,{size:18,className:"text-indigo-600"}),"Skapa ny termin"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Namn"}),a.jsx("input",{value:c.name,onChange:p=>d({...c,name:p.target.value}),placeholder:"t.ex. Vrterminen 2026",className:"w-full bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-800 rounded-xl px-4 py-2 text-sm"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Startdatum"}),a.jsx("input",{type:"date",value:c.startDate,onChange:p=>d({...c,startDate:p.target.value}),className:"w-full bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-800 rounded-xl px-4 py-2 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Slutdatum"}),a.jsx("input",{type:"date",value:c.endDate,onChange:p=>d({...c,endDate:p.target.value}),className:"w-full bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-800 rounded-xl px-4 py-2 text-sm"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Lsr"}),a.jsx("input",{value:c.academicYear,onChange:p=>d({...c,academicYear:p.target.value}),placeholder:"t.ex. 25/26",className:"w-full bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-800 rounded-xl px-4 py-2 text-sm"})]}),a.jsx("button",{onClick:g,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Spara termin"})]})]}),a.jsx("div",{className:"lg:col-span-2 space-y-4",children:t.length>0?t.map(p=>a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] p-6 rounded-2xl border border-gray-100 dark:border-gray-800 flex items-center justify-between group",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`p-3 rounded-xl ${p.locked?"bg-amber-100 text-amber-600":"bg-emerald-100 text-emerald-600"}`,children:a.jsx(zt,{size:20})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:p.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[p.startDate,"  ",p.endDate,"  ",p.academicYear]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[p.locked?a.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-red-50 dark:bg-red-900/10 text-red-600 text-xs font-bold rounded-full",children:[a.jsx(Mn,{size:12})," Betyg lsta"]}):a.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-50 dark:bg-emerald-900/10 text-emerald-600 text-xs font-bold rounded-full",children:[a.jsx(Kge,{size:12})," Betygslge aktivt"]}),a.jsx("button",{onClick:()=>x(p.id,p.locked),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-gray-400 hover:text-indigo-600",children:a.jsx(Settings2,{size:18})})]})]},p.id)):a.jsx("div",{className:"p-12 text-center bg-gray-50 dark:bg-gray-800/20 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700 text-gray-400",children:"Inga terminer definierade"})})]}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] p-6 rounded-2xl border border-gray-100 dark:border-gray-800 h-fit",children:[a.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[a.jsx(xt,{size:18,className:"text-indigo-600"}),"Publicera Skolpolicy"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Titel"}),a.jsx("input",{value:u.title,onChange:p=>h({...u,title:p.target.value}),placeholder:"t.ex. Ordningsregler 2026",className:"w-full bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-800 rounded-xl px-4 py-2 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Innehll"}),a.jsx("textarea",{rows:6,value:u.content,onChange:p=>h({...u,content:p.target.value}),placeholder:"Policytext...",className:"w-full bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-800 rounded-xl px-4 py-2 text-sm resize-none"})]}),a.jsx("button",{onClick:m,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Publicera Policy"})]})]}),a.jsx("div",{className:"lg:col-span-2 space-y-4",children:r.length>0?r.map(p=>a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] p-6 rounded-2xl border border-gray-100 dark:border-gray-800 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-indigo-100 text-indigo-600 rounded-xl",children:a.jsx(xt,{size:20})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:p.title}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Version ",p.version,"  ",new Date(p.createdAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"85%"}),a.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold",children:"Acceptans"})]}),a.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-emerald-500 border-t-transparent flex items-center justify-center text-[10px] font-bold text-emerald-500",children:"OK"})]})]}),a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:p.content}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100 dark:border-gray-800",children:[a.jsxs("div",{className:"flex -space-x-2",children:[[1,2,3,4].map(b=>a.jsxs("div",{className:"w-7 h-7 rounded-full bg-gray-200 border-2 border-white dark:border-[#1c1c1e] flex items-center justify-center text-[10px] font-bold text-gray-500",children:["U",b]},b)),a.jsx("div",{className:"w-7 h-7 rounded-full bg-indigo-600 border-2 border-white dark:border-[#1c1c1e] flex items-center justify-center text-[10px] font-bold text-white",children:"+12"})]}),a.jsxs("button",{className:"text-xs font-bold text-indigo-600 flex items-center gap-1 hover:underline",children:[a.jsx(dw,{size:14})," Visa alla acceptanser"]})]})]},p.id)):a.jsx("div",{className:"p-12 text-center bg-gray-50 dark:bg-gray-800/20 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700 text-gray-400",children:"Inga policys publicerade"})})]})]})},glt=()=>{const{currentUser:t,refreshUser:e}=At(),[r,n]=N.useState({targetType:"CLASS",targetId:"",subject:"",content:""}),[s,i]=N.useState(""),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,h]=N.useState([]),[f,g]=N.useState([]),[x,m]=N.useState([]);N.useEffect(()=>{p(),b()},[]);const p=async()=>{try{const[j]=await Promise.all([O.principal.structure.getDepartments()]);h(j||[])}catch{console.error("Failed to load contexts")}},b=async()=>{try{const j=await fetch("/api/principal/impersonate/status",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(j.ok){const _=await j.json();_&&l(_)}}catch(j){console.error(j)}},v=async j=>{n({...r,targetType:j,targetId:""}),j==="PROGRAM"&&await O.principal.structure.getDepartments()},y=async()=>{if(!r.content||!r.targetId){Ae.error("Vnligen fyll i mottagare och innehll");return}d(!0);try{Ae.success(`Utskick skickat till ${r.targetType}`),n({...r,subject:"",content:""})}catch{Ae.error("Kunde inte skicka meddelande")}finally{d(!1)}},w=async()=>{if(s)try{await fetch(`/api/principal/impersonate/start/${s}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),Ae.success("Impersonate Mode AKTIVERAT. Systemet visas nu som anvndaren."),l(s)}catch{Ae.error("Kunde inte starta impersonering")}},k=async()=>{try{await fetch("/api/principal/impersonate/stop",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),Ae.success("Impersonate Mode avstngt."),l(null)}catch{Ae.error("Kunde inte stoppa impersonering")}};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8 animate-in fade-in",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-3 bg-indigo-600 text-white rounded-2xl shadow-lg",children:a.jsx(va,{size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Administrativa Verktyg"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Avancerade verktyg fr skoldrift och support."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-3xl border border-gray-100 dark:border-gray-800 overflow-hidden flex flex-col shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/20",children:a.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(er,{className:"text-indigo-600",size:22}),"Mass-meddelande / Utskick"]})}),a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Mottagartyp"}),a.jsxs("select",{value:r.targetType,onChange:j=>v(j.target.value),className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-xl px-4 py-3",children:[a.jsx("option",{value:"CLASS",children:"Klass"}),a.jsx("option",{value:"PROGRAM",children:"Program"}),a.jsx("option",{value:"STAFF",children:"Personal"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Specifik mottagare"}),a.jsxs("select",{value:r.targetId,onChange:j=>n({...r,targetId:j.target.value}),className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-xl px-4 py-3",children:[a.jsx("option",{value:"",children:"Vlj..."}),a.jsx("option",{value:"1",children:"Alla lrare"}),a.jsx("option",{value:"2",children:"Klass TE22A"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"mne"}),a.jsx("input",{value:r.subject,onChange:j=>n({...r,subject:j.target.value}),placeholder:"t.ex. Information om kommande studiedag",className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-xl px-4 py-3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Meddelande"}),a.jsx("textarea",{rows:6,value:r.content,onChange:j=>n({...r,content:j.target.value}),placeholder:"Skriv ditt meddelande hr...",className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-xl px-4 py-3 resize-none"})]}),a.jsxs("button",{onClick:y,disabled:c,className:"w-full py-4 bg-indigo-600 text-white font-bold rounded-2xl hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-indigo-100 dark:shadow-none disabled:opacity-50",children:[a.jsx(Wr,{size:18}),c?"Skickar...":"Skicka utskick"]})]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-3xl border border-gray-100 dark:border-gray-800 overflow-hidden flex flex-col shadow-sm",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/20 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(Xo,{className:"text-emerald-600",size:22}),"Impersonate Mode"]}),o&&a.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 text-[10px] font-black rounded-full uppercase animate-pulse",children:"AKTIV"})]}),a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 border border-emerald-100 dark:border-emerald-900/20 p-4 rounded-2xl flex gap-3 text-emerald-800 dark:text-emerald-200",children:[a.jsx(Xl,{className:"shrink-0",size:20}),a.jsxs("p",{className:"text-sm leading-relaxed",children:["Detta lge tillter dig att se EduFlex exakt som en specifik elev eller lrare ser det.",a.jsx("span",{className:"font-bold underline block mt-1",children:"Skerhetsmeddelande: Alla ndringar utfrda i detta lge loggas som gjorda av dig."})]})]}),o?a.jsxs("div",{className:"space-y-6 text-center py-4",children:[a.jsx("div",{className:"mx-auto w-20 h-20 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600",children:a.jsx(qge,{size:40})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["Du agerar nu som anvndare #",o]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Du ser deras kurser, meddelanden och kalender."})]}),a.jsxs("button",{onClick:k,className:"w-full py-4 bg-red-600 text-white font-bold rounded-2xl hover:bg-red-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-red-100 dark:shadow-none",children:[a.jsx(ew,{size:18}),"Avsluta Impersonatering"]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Vlj Anvndare (ID eller Sk)"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{value:s,onChange:j=>i(j.target.value),placeholder:"Anvndar-ID (t.ex. 123)",className:"flex-1 bg-gray-50 dark:bg-gray-800 border-none rounded-xl px-4 py-3"}),a.jsx("button",{className:"p-3 bg-gray-100 dark:bg-gray-800 text-gray-500 rounded-xl hover:bg-gray-200 transition-colors",children:a.jsx(gr,{size:20})})]})]}),a.jsxs("button",{onClick:w,className:"w-full py-4 bg-emerald-600 text-white font-bold rounded-2xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-emerald-100 dark:shadow-none",children:[a.jsx(Xo,{size:18}),"Starta Impersonatering"]})]})]})]}),a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-900/20 p-6 rounded-3xl flex gap-4",children:[a.jsx(Er,{className:"text-amber-600 shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-amber-900 dark:text-amber-200 text-sm",children:"System-logg / Revision"}),a.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 mt-1",children:"Varje gng du anvnder Impersonate Mode eller gr mass-utskick genereras en post i systemets revisionslogg fr regelefterlevnad."})]})]})]})]})]})},mlt=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,d]=N.useState({title:"",description:"",type:"OTHER",status:"REPORTED"});N.useEffect(()=>{u()},[]);const u=async()=>{try{const x=await O.principal.quality.getIncidents();e(x)}catch{Ae.error("Kunde inte hmta incidenter")}finally{n(!1)}},h=async x=>{x.preventDefault();try{await O.principal.quality.createIncident(c),Ae.success("Incident rapporterad"),l(!1),u()}catch{Ae.error("Kunde inte spara incident")}},f=x=>{switch(x){case"REPORTED":return"bg-orange-100 text-orange-600";case"UNDER_INVESTIGATION":return"bg-blue-100 text-blue-600";case"ACTION_TAKEN":return"bg-indigo-100 text-indigo-600";case"CLOSED":return"bg-emerald-100 text-emerald-600";default:return"bg-gray-100 text-gray-600"}},g=t.filter(x=>x.title.toLowerCase().includes(s.toLowerCase())||x.description.toLowerCase().includes(s.toLowerCase()));return a.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("header",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-gray-900 dark:text-white",children:"Incidenthantering"}),a.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:"Kvalitet & Trygghet  Systematisk uppfljning"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-2xl font-bold shadow-lg shadow-indigo-200 hover:scale-105 transition-transform",children:[a.jsx(jt,{size:20}),"Ny Incident"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] p-6 rounded-3xl border border-gray-100 dark:border-gray-800 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(Dr,{className:"text-orange-500",size:24}),a.jsx("span",{className:"text-2xl font-black",children:t.filter(x=>x.status==="REPORTED").length})]}),a.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Nya rapporter"})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] p-6 rounded-3xl border border-gray-100 dark:border-gray-800 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(Tt,{className:"text-blue-500",size:24}),a.jsx("span",{className:"text-2xl font-black",children:t.filter(x=>x.status==="UNDER_INVESTIGATION").length})]}),a.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Under utredning"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-3xl border border-gray-100 dark:border-gray-800 overflow-hidden shadow-sm",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex flex-col md:flex-row gap-4 items-center justify-between",children:[a.jsxs("div",{className:"relative w-full md:w-96",children:[a.jsx(gr,{className:"absolute left-4 top-3 text-gray-400",size:20}),a.jsx("input",{placeholder:"Sk bland incidenter...",className:"w-full bg-gray-50 dark:bg-gray-800/50 border-none rounded-2xl pl-12 pr-4 py-3 text-sm focus:ring-2 ring-indigo-500 transition-all font-medium",value:s,onChange:x=>i(x.target.value)})]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-3 bg-gray-50 dark:bg-gray-800 text-gray-500 rounded-2xl font-bold text-sm",children:[a.jsx(cm,{size:18}),"Filter"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800/20 text-gray-400 text-[10px] font-black uppercase tracking-widest",children:[a.jsx("th",{className:"px-6 py-4",children:"Tidpunkt"}),a.jsx("th",{className:"px-6 py-4",children:"Typ / Titel"}),a.jsx("th",{className:"px-6 py-4",children:"Status"}),a.jsx("th",{className:"px-6 py-4",children:"Rapportr"}),a.jsx("th",{className:"px-6 py-4 text-right",children:"tgrd"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:r?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"})})}):g.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-gray-400 font-bold uppercase tracking-widest opacity-50",children:"Inga incidenter hittades"})}):g.map(x=>{var m;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors cursor-pointer group",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:new Date(x.createdAt).toLocaleDateString()}),a.jsx("span",{className:"text-[10px] text-gray-400 font-medium tracking-tight",children:new Date(x.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-tighter",children:x.type}),a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:x.title})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${f(x.status)}`,children:x.status.replace(/_/g," ")})}),a.jsx("td",{className:"px-6 py-4 text-sm font-bold text-gray-500",children:((m=x.reporter)==null?void 0:m.username)||"System"}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx("button",{className:"p-2 text-gray-300 hover:text-indigo-600 transition-colors",children:a.jsx(or,{size:20})})})]},x.id)})})]})})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1000] flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] w-full max-w-xl rounded-[2.5rem] shadow-2xl p-8 animate-in zoom-in duration-300",children:[a.jsx("h2",{className:"text-2xl font-black mb-6",children:"Rapportera ny incident"}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Titel"}),a.jsx("input",{className:"w-full bg-gray-50 dark:bg-gray-800 p-4 rounded-2xl border-none focus:ring-2 ring-indigo-500 font-bold",placeholder:"Kort beskrivning av vad som hnt",required:!0,value:c.title,onChange:x=>d({...c,title:x.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Typ"}),a.jsxs("select",{className:"w-full bg-gray-50 dark:bg-gray-800 p-4 rounded-2xl border-none focus:ring-2 ring-indigo-500 font-bold",value:c.type,onChange:x=>d({...c,type:x.target.value}),children:[a.jsx("option",{value:"BULLYING",children:"Krnkning / Mobbning"}),a.jsx("option",{value:"SAFETY",children:"Skerhet / Vld"}),a.jsx("option",{value:"PROPERTY_DAMAGE",children:"Skadegrelse"}),a.jsx("option",{value:"OTHER",children:"vrigt"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Viktighetsgrad"}),a.jsxs("select",{className:"w-full bg-gray-50 dark:bg-gray-800 p-4 rounded-2xl border-none focus:ring-2 ring-indigo-500 font-bold",defaultValue:"PRIO",children:[a.jsx("option",{value:"LOW",children:"Normal"}),a.jsx("option",{value:"PRIO",children:"Hg prioritet"}),a.jsx("option",{value:"CRITICAL",children:"Kritisk / Akut"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Beskrivning"}),a.jsx("textarea",{rows:"4",className:"w-full bg-gray-50 dark:bg-gray-800 p-4 rounded-2xl border-none focus:ring-2 ring-indigo-500 font-bold",placeholder:"Detaljerad redogrelse fr hndelsen...",required:!0,value:c.description,onChange:x=>d({...c,description:x.target.value})})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-4 font-bold text-gray-500",children:"Avbryt"}),a.jsx("button",{type:"submit",className:"flex-1 bg-indigo-600 text-white rounded-2xl font-bold p-4 shadow-lg shadow-indigo-100",children:"Spara & Skicka"})]})]})]})})]})},plt=()=>{const[t,e]=N.useState([]),[r,n]=N.useState([{id:1,name:"Erik Andersson",subjects:["Svenska","Engelska"],rating:4.8,status:"AVAILABLE",phone:"070-1234567"},{id:2,name:"Anna Berg",subjects:["Matematik","NO"],rating:4.9,status:"BUSY",phone:"070-7654321"}]),[s,i]=N.useState(!0);N.useEffect(()=>{o()},[]);const o=async()=>{try{const d=(await O.users.getAll()).content.filter(u=>{var h,f,g,x;return((f=(h=u.role)==null?void 0:h.name)==null?void 0:f.includes("TEACHER"))||((x=(g=u.role)==null?void 0:g.name)==null?void 0:x.includes("ADMIN"))||u.role==="TEACHER"});e(d)}catch{Ae.error("Kunde inte hmta personallista")}finally{i(!1)}},l=async(c,d)=>{try{const u=d==="SICK"?"WORKING":"SICK";await O.users.update(c,{staffStatus:u}),Ae.success(u==="SICK"?"Sjukanmld registrerad":"Friskanmld registrerad"),o()}catch{Ae.error("Kunde inte uppdatera status")}};return a.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("header",{children:[a.jsx("h1",{className:"text-3xl font-black text-gray-900 dark:text-white",children:"Personal & Bemanning"}),a.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:"Resursplanering  Vikariepool  Frnvaro"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2 space-y-6",children:a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] rounded-3xl border border-gray-100 dark:border-gray-800 shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-black underline decoration-indigo-500 underline-offset-4",children:"Aktuell Personalstatus"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold text-emerald-500 bg-emerald-50 px-2 py-1 rounded-md",children:[a.jsx(dw,{size:12})," ",t.filter(c=>c.staffStatus!=="SICK").length," I tjnst"]}),a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold text-red-500 bg-red-50 px-2 py-1 rounded-md",children:[a.jsx(Vge,{size:12})," ",t.filter(c=>c.staffStatus==="SICK").length," Frnvarande"]})]})]}),a.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-800",children:t.map(c=>{var d,u;return a.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800/30 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center font-bold text-white shadow-sm ${c.staffStatus==="SICK"?"bg-red-400":"bg-indigo-600"}`,children:(d=c.username)==null?void 0:d.substring(0,2).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold",children:c.username}),a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:((u=c.role)==null?void 0:u.name)||"Personal"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>l(c.id,c.staffStatus),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all ${c.staffStatus==="SICK"?"bg-red-600 text-white shadow-lg shadow-red-100":"bg-gray-100 text-gray-500 hover:bg-red-50 hover:text-red-500"}`,children:c.staffStatus==="SICK"?"Sjukanmld":"Sjukanml"}),a.jsx("button",{className:"p-2 text-gray-300 hover:text-gray-600",children:a.jsx(u5,{size:20})})]})]},c.id)})})]})}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-indigo-600 rounded-[2.5rem] p-8 text-white shadow-2xl shadow-indigo-200 relative overflow-hidden group",children:[a.jsx($0,{className:"absolute -right-4 -bottom-4 opacity-10 group-hover:scale-125 transition-transform",size:120}),a.jsx("h3",{className:"text-xl font-black mb-2",children:"Vikariepool"}),a.jsx("p",{className:"text-xs text-indigo-100 font-bold uppercase tracking-widest mb-6",children:"Lediga resurser fr skolan"}),a.jsx("div",{className:"space-y-4",children:r.map(c=>a.jsxs("div",{className:"bg-white/10 backdrop-blur-md p-4 rounded-2xl border border-white/10",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-sm",children:c.name}),a.jsx("div",{className:"flex gap-1 mt-1",children:c.subjects.map(d=>a.jsx("span",{className:"text-[8px] bg-white/20 px-1.5 py-0.5 rounded uppercase font-black",children:d},d))})]}),a.jsx("span",{className:`w-2 h-2 rounded-full ${c.status==="AVAILABLE"?"bg-emerald-400":"bg-red-400"}`})]}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold",children:[a.jsx(Qfe,{size:12,className:"text-emerald-400"})," ",c.rating]}),a.jsx("button",{className:"bg-white text-indigo-600 px-4 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-indigo-50 transition-colors",children:"Boka NU"})]})]},c.id))}),a.jsx("button",{className:"w-full mt-6 py-4 bg-white/20 rounded-2xl text-sm font-bold hover:bg-white/30 transition-all",children:"Visa hela poolen"})]})})]})]})},xlt=()=>{const[t,e]=N.useState([{id:1,title:"Terminsrapport HT25",type:"ACADEMIC",date:"2025-12-20",size:"2.4 MB",author:"System"},{id:2,title:"Kvalitetsanalys Q4",type:"QUALITY",date:"2026-01-15",size:"1.8 MB",author:"Gert Lundgren"},{id:3,title:"Ekonomisk versikt Jan",type:"FINANCE",date:"2026-02-01",size:"540 KB",author:"Ekobyrn"},{id:4,title:"Likabehandlingsplan 2026",type:"POLICY",date:"2026-01-05",size:"3.2 MB",author:"EHT-Team"}]),[r,n]=N.useState(""),[s,i]=N.useState("ALL"),o=t.filter(c=>(s==="ALL"||c.type===s)&&c.title.toLowerCase().includes(r.toLowerCase())),l=c=>{switch(c){case"ACADEMIC":return a.jsx(xt,{className:"text-blue-500"});case"FINANCE":return a.jsx(oK,{className:"text-emerald-500"});case"POLICY":return a.jsx(gt,{className:"text-purple-500"});default:return a.jsx(DN,{className:"text-gray-400"})}};return a.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("header",{className:"flex justify-between items-end",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-gray-900 dark:text-white",children:"Rapportarkiv"}),a.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:"Bibliotek  Dokumentation  Insyn"})]}),a.jsx("div",{className:"flex gap-4",children:a.jsxs("div",{className:"relative w-64",children:[a.jsx(gr,{className:"absolute left-4 top-3 text-gray-400",size:20}),a.jsx("input",{placeholder:"Sk rapporter...",className:"w-full bg-white dark:bg-[#1c1c1e] border-none rounded-2xl pl-12 pr-4 py-3 text-sm shadow-sm focus:ring-2 ring-indigo-500 transition-all font-medium",value:r,onChange:c=>n(c.target.value)})]})})]}),a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:["ALL","ACADEMIC","QUALITY","FINANCE","POLICY"].map(c=>a.jsx("button",{onClick:()=>i(c),className:`px-6 py-2.5 rounded-full text-xs font-black uppercase tracking-widest transition-all whitespace-nowrap ${s===c?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white dark:bg-[#1c1c1e] text-gray-400 hover:text-gray-600"}`,children:c==="ALL"?"Alla":c},c))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.map(c=>a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] p-6 rounded-[2rem] border border-gray-100 dark:border-gray-800 shadow-sm hover:shadow-xl transition-all group flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-2xl group-hover:scale-110 transition-transform",children:l(c.type)}),a.jsx("button",{className:"text-gray-300 hover:text-indigo-600",children:a.jsx(Wo,{size:18})})]}),a.jsx("h3",{className:"font-black text-gray-900 dark:text-white mb-1 group-hover:text-indigo-600 transition-colors",children:c.title}),a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-4",children:c.type}),a.jsxs("div",{className:"space-y-2 mt-4 text-[10px] font-bold text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Tt,{size:12})," ",c.date]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hge,{size:12})," ",c.size]})]})]}),a.jsxs("button",{className:"w-full mt-6 flex items-center justify-center gap-2 py-3 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-bold group-hover:bg-indigo-600 group-hover:text-white transition-all text-xs",children:[a.jsx(Rn,{size:14}),"Hmta PDF"]})]},c.id)),a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/10 p-6 rounded-[2rem] border-2 border-dashed border-indigo-200 dark:border-indigo-800 flex flex-col items-center justify-center text-center gap-4 group cursor-pointer hover:bg-indigo-100 transition-colors",children:[a.jsx("div",{className:"p-4 bg-white dark:bg-indigo-900/20 rounded-full text-indigo-600",children:a.jsx(DN,{size:32})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-black text-indigo-900 dark:text-indigo-200",children:"Ny Rapport"}),a.jsx("p",{className:"text-[10px] font-bold text-indigo-400 uppercase",children:"Generera sammanstllning"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-lg font-black flex items-center gap-2",children:[a.jsx(fh,{className:"text-amber-500",size:20}),"Samlingar"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["Nationalprov 2025","Policy-dokument","Elevvrdsarkiv"].map(c=>a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] p-5 rounded-2xl flex items-center justify-between border border-gray-100 dark:border-gray-800 shadow-sm hover:border-indigo-200 transition-colors cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(DN,{className:"text-gray-400 group-hover:text-indigo-500",size:20}),a.jsx("span",{className:"text-sm font-bold",children:c})]}),a.jsx("span",{className:"text-xs font-bold text-gray-400 bg-gray-50 dark:bg-gray-800 px-2.5 py-1 rounded-lg",children:"12"})]},c))})]})]})},blt=[{value:"RATING_1_5",label:"Betyg 1-5"},{value:"FREE_TEXT",label:"Fritext"},{value:"MULTIPLE_CHOICE",label:"Flerval"},{value:"YES_NO",label:"Ja/Nej"}],OS=()=>({questionText:"",questionType:"RATING_1_5",optionsJson:"",isRequired:!0,sortOrder:0}),AF=()=>{const t=Et(),{id:e}=uh(),r=!!e,[n,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState([OS()]),[d,u]=N.useState(!1),[h,f]=N.useState(!1);N.useEffect(()=>{r&&(f(!0),O.elevhalsa.getTemplates().then(v=>{const y=v.find(w=>w.id===parseInt(e));y&&(s(y.title),o(y.description||""),c(y.questions.length>0?y.questions.map(w=>({...w,optionsJson:w.optionsJson||""})):[OS()]))}).catch(()=>Ae.error("Kunde inte ladda mallen")).finally(()=>f(!1)))},[e,r]);const g=()=>{c([...l,OS()])},x=v=>{l.length<=1||c(l.filter((y,w)=>w!==v))},m=(v,y)=>{const w=v+y;if(w<0||w>=l.length)return;const k=[...l];[k[v],k[w]]=[k[w],k[v]],c(k)},p=(v,y,w)=>{const k=[...l];k[v]={...k[v],[y]:w},c(k)},b=async()=>{if(!n.trim()){Ae.error("Ange en titel fr enktmallen");return}if(l.some(v=>!v.questionText.trim())){Ae.error("Alla frgor mste ha en frgetext");return}if(l.some(v=>v.questionType==="MULTIPLE_CHOICE"&&!v.optionsJson.trim())){Ae.error("Flervalsfrgor mste ha alternativ");return}u(!0);try{const v={title:n.trim(),description:i.trim(),questions:l.map((y,w)=>({questionText:y.questionText,questionType:y.questionType,optionsJson:y.questionType==="MULTIPLE_CHOICE"?JSON.stringify(y.optionsJson.split(",").map(k=>k.trim()).filter(Boolean)):null,isRequired:y.isRequired,sortOrder:w}))};r?(await O.elevhalsa.updateTemplate(e,v),Ae.success("Mall uppdaterad")):(await O.elevhalsa.createTemplate(v),Ae.success("Mall skapad")),t("/health-dashboard")}catch{Ae.error("Kunde inte spara mallen")}finally{u(!1)}};return h?a.jsx("div",{className:"flex items-center justify-center p-20",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-teal"})}):a.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>t("/health-dashboard"),className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:a.jsx(Wl,{className:"w-5 h-5 text-gray-500"})}),a.jsx("div",{children:a.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-brand-teal/20 rounded-xl",children:a.jsx(xt,{className:"w-6 h-6 text-brand-teal"})}),r?"Redigera enktmall":"Skapa enktmall"]})})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Titel"}),a.jsx("input",{type:"text",value:n,onChange:v=>s(v.target.value),placeholder:"T.ex. Trivselenkt VT2026",className:"w-full px-4 py-2.5 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-xl text-sm focus:ring-2 ring-brand-teal/30 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Beskrivning"}),a.jsx("textarea",{value:i,onChange:v=>o(v.target.value),placeholder:"Valfri beskrivning av enkten...",rows:2,className:"w-full px-4 py-2.5 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-xl text-sm focus:ring-2 ring-brand-teal/30 dark:text-white resize-none"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:["Frgor (",l.length,")"]}),a.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-brand-teal text-white rounded-xl text-sm font-medium hover:bg-brand-teal/90 transition-colors",children:[a.jsx(jt,{className:"w-4 h-4"}),"Lgg till frga"]})]}),l.map((v,y)=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-5 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[a.jsx(mge,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-xs font-bold uppercase",children:["Frga ",y+1]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>m(y,-1),disabled:y===0,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-white/5 disabled:opacity-30 transition-colors",children:a.jsx(Yfe,{className:"w-3.5 h-3.5 text-gray-500"})}),a.jsx("button",{onClick:()=>m(y,1),disabled:y===l.length-1,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-white/5 disabled:opacity-30 transition-colors",children:a.jsx(Wfe,{className:"w-3.5 h-3.5 text-gray-500"})}),a.jsx("button",{onClick:()=>x(y),disabled:l.length<=1,className:"p-1.5 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 disabled:opacity-30 transition-colors",children:a.jsx(qt,{className:"w-3.5 h-3.5 text-red-500"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Frgetext"}),a.jsx("input",{type:"text",value:v.questionText,onChange:w=>p(y,"questionText",w.target.value),placeholder:"Skriv din frga hr...",className:"w-full px-3 py-2 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg text-sm focus:ring-2 ring-brand-teal/30 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Typ"}),a.jsx("select",{value:v.questionType,onChange:w=>p(y,"questionType",w.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg text-sm dark:text-white",children:blt.map(w=>a.jsx("option",{value:w.value,children:w.label},w.value))})]})]}),v.questionType==="MULTIPLE_CHOICE"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1",children:"Svarsalternativ (kommaseparerade)"}),a.jsx("input",{type:"text",value:v.optionsJson,onChange:w=>p(y,"optionsJson",w.target.value),placeholder:"Alternativ 1, Alternativ 2, Alternativ 3",className:"w-full px-3 py-2 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-lg text-sm focus:ring-2 ring-brand-teal/30 dark:text-white"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("button",{onClick:()=>p(y,"isRequired",!v.isRequired),className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[v.isRequired?a.jsx(Bge,{className:"w-5 h-5 text-brand-teal"}):a.jsx(B4,{className:"w-5 h-5 text-gray-400"}),"Obligatorisk"]})})]},y))]}),a.jsxs("div",{className:"flex justify-end gap-3 pb-8",children:[a.jsx("button",{onClick:()=>t("/health-dashboard"),className:"px-6 py-2.5 rounded-xl text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:"Avbryt"}),a.jsxs("button",{onClick:b,disabled:d,className:"flex items-center gap-2 px-6 py-2.5 bg-brand-teal text-white rounded-xl text-sm font-bold hover:bg-brand-teal/90 disabled:opacity-50 transition-colors",children:[a.jsx(sa,{className:"w-4 h-4"}),d?"Sparar...":r?"Uppdatera mall":"Spara mall"]})]})]})},ylt=()=>{const{distributionId:t}=uh(),e=Et(),[r,n]=N.useState(null),[s,i]=N.useState({}),[o,l]=N.useState(!0),[c,d]=N.useState(!1),[u,h]=N.useState(!1);N.useEffect(()=>{O.elevhalsa.getSurveyDetails(t).then(x=>{n(x);const m={};(x.questions||[]).forEach(p=>{m[p.id]=""}),i(m)}).catch(x=>{Ae.error("Kunde inte ladda enkten")}).finally(()=>l(!1))},[t]);const f=(x,m)=>{i(p=>({...p,[x]:m}))},g=async()=>{var p,b;if(!r)return;const m=r.questions.filter(v=>v.required!==!1).filter(v=>{const y=s[v.id];return y===""||y===void 0||y===null});if(m.length>0){Ae.error(`Besvara alla obligatoriska frgor (${m.length} saknas)`);return}d(!0);try{await O.elevhalsa.submitSurvey(t,{answers:s}),h(!0),Ae.success("Tack fr ditt svar!")}catch(v){const y=((b=(p=v==null?void 0:v.response)==null?void 0:p.data)==null?void 0:b.message)||"Kunde inte skicka in svaret";Ae.error(y)}finally{d(!1)}};return o?a.jsx("div",{className:"flex items-center justify-center p-20",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-teal"})}):u?a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-20 animate-in fade-in duration-500",children:[a.jsx("div",{className:"inline-flex p-4 bg-emerald-500/10 rounded-full mb-4",children:a.jsx(nr,{className:"w-12 h-12 text-emerald-500"})}),a.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Tack fr ditt svar!"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Dina svar har sparats."}),a.jsx("button",{onClick:()=>e("/"),className:"px-6 py-2.5 bg-brand-teal text-white rounded-xl text-sm font-medium hover:bg-brand-teal/90 transition-colors",children:"Tillbaka till startsidan"})]}):r?a.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[a.jsx("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-brand-teal/20 rounded-xl shrink-0",children:a.jsx(xt,{className:"w-6 h-6 text-brand-teal"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-slate-800 dark:text-white",children:r.title}),r.description&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:r.description}),r.deadline&&a.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[a.jsx(Tt,{className:"w-3 h-3"}),"Deadline: ",new Date(r.deadline).toLocaleDateString("sv-SE")]})]})]})}),(r.questions||[]).map((x,m)=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("span",{className:"text-xs font-bold text-gray-400 mt-0.5",children:[m+1,"."]}),a.jsx("div",{className:"flex-1",children:a.jsxs("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:[x.questionText,x.required!==!1&&a.jsx("span",{className:"text-rose-500 ml-1",children:"*"})]})})]}),x.questionType==="RATING_1_5"&&a.jsxs("div",{className:"flex gap-2 pt-1",children:[[1,2,3,4,5].map(p=>a.jsx("button",{onClick:()=>f(x.id,p),className:`w-12 h-12 rounded-xl text-sm font-bold transition-all
                                        ${s[x.id]===p?"bg-brand-teal text-white scale-110 shadow-lg":"bg-slate-100 dark:bg-black/20 text-gray-600 dark:text-gray-400 hover:bg-slate-200 dark:hover:bg-white/10"}`,children:p},p)),a.jsxs("div",{className:"flex items-center ml-2 text-[10px] text-gray-400 gap-4",children:[a.jsx("span",{children:"1 = Instmmer inte"}),a.jsx("span",{children:"5 = Instmmer helt"})]})]}),x.questionType==="FREE_TEXT"&&a.jsx("textarea",{value:s[x.id]||"",onChange:p=>f(x.id,p.target.value),placeholder:"Skriv ditt svar...",rows:3,className:"w-full px-4 py-2.5 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-xl text-sm focus:ring-2 ring-brand-teal/30 dark:text-white resize-none"}),x.questionType==="MULTIPLE_CHOICE"&&(()=>{let p=[];try{p=JSON.parse(x.optionsJson)}catch{}return a.jsx("div",{className:"space-y-2 pt-1",children:p.map((b,v)=>a.jsx("button",{onClick:()=>f(x.id,b),className:`w-full text-left px-4 py-2.5 rounded-xl text-sm transition-all border
                                            ${s[x.id]===b?"bg-brand-teal/10 border-brand-teal text-brand-teal font-bold":"bg-slate-50 dark:bg-black/20 border-slate-200 dark:border-white/10 text-gray-700 dark:text-gray-300 hover:border-brand-teal/30"}`,children:b},v))})})(),x.questionType==="YES_NO"&&a.jsx("div",{className:"flex gap-3 pt-1",children:[{label:"Ja",value:"1"},{label:"Nej",value:"0"}].map(p=>a.jsx("button",{onClick:()=>f(x.id,p.value),className:`px-8 py-2.5 rounded-xl text-sm font-bold transition-all border
                                        ${String(s[x.id])===p.value?"bg-brand-teal/10 border-brand-teal text-brand-teal":"bg-slate-50 dark:bg-black/20 border-slate-200 dark:border-white/10 text-gray-600 dark:text-gray-400 hover:border-brand-teal/30"}`,children:p.label},p.value))})]},x.id)),a.jsx("div",{className:"flex justify-end pb-8",children:a.jsxs("button",{onClick:g,disabled:c,className:"flex items-center gap-2 px-8 py-3 bg-brand-teal text-white rounded-xl text-sm font-bold hover:bg-brand-teal/90 disabled:opacity-50 transition-colors shadow-lg",children:[a.jsx(nr,{className:"w-4 h-4"}),c?"Skickar...":"Skicka in svar"]})})]}):a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-20",children:[a.jsx(Er,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Enkten kunde inte hittas."})]})},vlt=()=>{var l;const{distributionId:t}=uh(),e=Et(),[r,n]=N.useState(null),[s,i]=N.useState(!0);if(N.useEffect(()=>{O.elevhalsa.getSurveyResults(t).then(c=>n(c)).catch(()=>Ae.error("Kunde inte ladda resultat")).finally(()=>i(!1))},[t]),s)return a.jsx("div",{className:"flex items-center justify-center p-20",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-teal"})});if(!r)return a.jsx("div",{className:"text-center py-20 text-gray-400",children:"Inga resultat att visa."});const o={DRAFT:"Utkast",ACTIVE:"Aktiv",CLOSED:"Stngd"};return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>e("/health-dashboard"),className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:a.jsx(Wl,{className:"w-5 h-5 text-gray-500"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl",children:a.jsx(Q2,{className:"w-6 h-6 text-indigo-500"})}),"Resultat: ",r.templateTitle]}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[o[r.status]||r.status,"  Mlgrupp: ",(l=r.targetRole)==null?void 0:l.replace("ROLE_","")]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(vt,{className:"w-4 h-4 text-brand-teal"}),"Svarsfrekvens"]}),a.jsxs("span",{className:"text-2xl font-extrabold text-brand-teal",children:[r.responseRate,"%"]})]}),a.jsx("div",{className:"w-full bg-slate-100 dark:bg-black/20 rounded-full h-3 overflow-hidden",children:a.jsx("div",{className:"bg-brand-teal h-3 rounded-full transition-all duration-1000",style:{width:`${r.responseRate}%`}})}),a.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[r.totalResponded," av ",r.totalTargeted," har svarat"]})]}),(r.questionStats||[]).map((c,d)=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-6 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-gray-400 bg-slate-100 dark:bg-black/20 px-2 py-1 rounded-lg",children:d+1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:c.questionText}),a.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-bold mt-0.5",children:[c.questionType==="RATING_1_5"?"Betyg 1-5":c.questionType==="FREE_TEXT"?"Fritext":c.questionType==="MULTIPLE_CHOICE"?"Flerval":"Ja/Nej","",c.answerCount," svar"]})]})]}),c.questionType==="RATING_1_5"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Sr,{className:"w-5 h-5 text-brand-teal"}),a.jsx("span",{className:"text-3xl font-extrabold text-slate-800 dark:text-white",children:c.average}),a.jsx("span",{className:"text-sm text-gray-400",children:"/ 5"})]}),a.jsx("div",{className:"space-y-1.5",children:[5,4,3,2,1].map(u=>{var g,x;const h=((g=c.distribution)==null?void 0:g[u])||((x=c.distribution)==null?void 0:x[String(u)])||0,f=c.answerCount>0?Math.round(h/c.answerCount*100):0;return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 w-4 text-right",children:u}),a.jsx("div",{className:"flex-1 bg-slate-100 dark:bg-black/20 rounded-full h-2.5 overflow-hidden",children:a.jsx("div",{className:"bg-brand-teal/70 h-2.5 rounded-full transition-all duration-700",style:{width:`${f}%`}})}),a.jsxs("span",{className:"text-xs text-gray-400 w-12 text-right",children:[h," (",f,"%)"]})]},u)})})]}),c.questionType==="YES_NO"&&a.jsx("div",{className:"flex gap-6",children:[{label:"Ja",count:c.yes||0,color:"bg-emerald-500"},{label:"Nej",count:c.no||0,color:"bg-rose-500"}].map(u=>{const h=(c.yes||0)+(c.no||0),f=h>0?Math.round(u.count/h*100):0;return a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-gray-300",children:u.label}),a.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:[f,"%"]})]}),a.jsx("div",{className:"bg-slate-100 dark:bg-black/20 rounded-full h-3 overflow-hidden",children:a.jsx("div",{className:`${u.color} h-3 rounded-full transition-all duration-700`,style:{width:`${f}%`}})}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[u.count," svar"]})]},u.label)})}),c.questionType==="MULTIPLE_CHOICE"&&c.optionCounts&&a.jsx("div",{className:"space-y-2",children:Object.entries(c.optionCounts).sort((u,h)=>h[1]-u[1]).map(([u,h])=>{const f=c.answerCount>0?Math.round(h/c.answerCount*100):0;return a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:u}),a.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[h," (",f,"%)"]})]}),a.jsx("div",{className:"bg-slate-100 dark:bg-black/20 rounded-full h-2.5 overflow-hidden",children:a.jsx("div",{className:"bg-indigo-500/70 h-2.5 rounded-full transition-all duration-700",style:{width:`${f}%`}})})]},u)})}),c.questionType==="FREE_TEXT"&&a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(c.freeTextAnswers||[]).length===0?a.jsx("p",{className:"text-sm text-gray-400 italic",children:"Inga fritextsvar."}):(c.freeTextAnswers||[]).map((u,h)=>a.jsxs("div",{className:"flex items-start gap-2 p-3 bg-slate-50 dark:bg-black/20 rounded-xl border border-slate-100 dark:border-white/5",children:[a.jsx(er,{className:"w-3.5 h-3.5 text-gray-400 mt-0.5 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:u})]},h))})]},c.questionId)),a.jsx("div",{className:"pb-8"})]})},klt=()=>{const{currentUser:t}=At(),[e,r]=N.useState([]),[n,s]=N.useState("support"),[i,o]=N.useState(!0),[l,c]=N.useState(!1),[d,u]=N.useState(!1),[h,f]=N.useState(null),[g,x]=N.useState([]),[m,p]=N.useState(!1),[b,v]=N.useState(""),[y,w]=N.useState({type:"CURATOR",subject:"",message:""}),[k,j]=N.useState(!1),[_,S]=N.useState(null),[A,T]=N.useState([]),[E,C]=N.useState(!1),[z,M]=N.useState({startDate:new Date().toISOString().split("T")[0],endDate:"",reason:""}),[F,D]=N.useState(!1);N.useEffect(()=>{L()},[]);const L=async()=>{o(!0);try{await Promise.all([K(),Y()])}finally{o(!1)}},K=async()=>{try{const V=await O.support.getWellbeingRequests();r(V)}catch(V){console.error("Failed to fetch requests",V)}},$=async V=>{p(!0);try{const se=await O.support.getWellbeingMessages(V);x(se)}catch{Ae.error("Kunde inte hmta meddelanden")}finally{p(!1)}},R=async V=>{if(V.preventDefault(),!!b.trim())try{await O.support.sendWellbeingMessage(h.id,b),v(""),$(h.id)}catch{Ae.error("Kunde inte skicka meddelande")}},Y=async()=>{try{const V=await O.sickLeave.getActive(),se=await O.sickLeave.getMy();S(V),T(se||[])}catch(V){console.error("Failed to load sick leave data",V)}},ee=async V=>{if(V.preventDefault(),!d){Ae.error("Du mste godknna tystnadsplikten frst.");return}j(!0);try{await O.post("/wellbeing/requests",{...y,confidentialityAgreed:!0}),Ae.success("Din begran har skickats!"),c(!1),w({type:"CURATOR",subject:"",message:""}),K()}catch{Ae.error("Kunde inte skicka begran. Frsk igen senare.")}finally{j(!1)}},B=async V=>{if(V.preventDefault(),!z.startDate){Ae.error("Ange ett startdatum");return}D(!0);try{await O.sickLeave.report({startDate:z.startDate,endDate:z.endDate||null,reason:z.reason||null}),Ae.success("Sjukanmlan registrerad"),M({startDate:new Date().toISOString().split("T")[0],endDate:"",reason:""}),Y()}catch{Ae.error("Kunde inte registrera sjukanmlan")}finally{D(!1)}},U=async()=>{if(_&&window.confirm("Vill du avbryta din sjukanmlan?"))try{await O.sickLeave.cancel(_.id),Ae.success("Sjukanmlan avbruten"),Y()}catch{Ae.error("Kunde inte avbryta sjukanmlan")}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-teal"})}):a.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-brand-teal/20 to-indigo-500/10 dark:from-brand-teal/10 dark:to-indigo-500/5 rounded-3xl p-8 border border-white/20 dark:border-white/5 shadow-2xl shadow-brand-teal/5",children:[a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-3 bg-white dark:bg-[#1E1F20] rounded-2xl shadow-sm text-brand-teal",children:a.jsx(Lr,{className:"fill-current"})}),a.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white uppercase tracking-tight",children:"Well-being Center"})]}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg max-w-2xl leading-relaxed",children:"Vlkommen till din trygga punkt. Hr kan du kontakta hlsoteamet under tystnadsplikt eller hantera din sjukfrnvaro."})]}),a.jsx("div",{className:"flex flex-wrap gap-4",children:n==="support"&&!l&&a.jsxs("button",{onClick:()=>c(!0),className:"bg-brand-teal hover:bg-brand-teal-dark text-white px-8 py-4 rounded-2xl font-bold shadow-xl shadow-brand-teal/20 hover:transform hover:scale-105 transition-all flex items-center gap-3",children:[a.jsx(jt,{size:20}),"Ny kontaktbegran"]})})]}),a.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20 w-80 h-80 bg-brand-teal/20 rounded-full blur-[100px]"})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-white/5 p-1.5 rounded-2xl w-fit",children:[a.jsxs("button",{onClick:()=>{s("support"),c(!1)},className:`px-6 py-3 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${n==="support"?"bg-white dark:bg-[#1E1F20] text-brand-teal shadow-md shadow-brand-teal/5":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[a.jsx(Lr,{size:18}),"Kontakt & Std"]}),a.jsxs("button",{onClick:()=>{s("sickleave"),c(!1)},className:`px-6 py-3 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${n==="sickleave"?"bg-white dark:bg-[#1E1F20] text-rose-500 shadow-md shadow-rose-500/5":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[a.jsx(ky,{size:18}),"Sjukanmlan"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[a.jsx("div",{className:"lg:col-span-8 space-y-6",children:n==="support"?a.jsx(a.Fragment,{children:l?a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-3xl border border-slate-100 dark:border-white/5 shadow-xl overflow-hidden animate-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 dark:border-white/5 bg-slate-50/50 dark:bg-white/5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-3",children:[a.jsx(Yl,{className:"text-brand-teal"}),"Ny kontaktbegran"]}),a.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:"Avbryt"})]}),a.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800/30 rounded-2xl flex items-start gap-4",children:[a.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-xl text-amber-600 dark:text-amber-400",children:a.jsx(Mn,{size:20})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-bold text-amber-800 dark:text-amber-300",children:"Strikt Tystnadsplikt"}),a.jsx("p",{className:"text-sm text-amber-700/80 dark:text-amber-400/80 leading-relaxed",children:"All kommunikation via Well-being Center omfattas av tystnadsplikt. Dina meddelanden r krypterade och kan endast lsas av dig och legitimerad personal i hlsoteamet."}),a.jsxs("label",{className:"flex items-center gap-3 mt-4 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:V=>u(V.target.checked),className:"w-5 h-5 rounded border-amber-300 text-brand-teal focus:ring-brand-teal"}),a.jsx("span",{className:"text-sm font-semibold text-amber-900 dark:text-amber-200 group-hover:text-brand-teal transition-colors",children:"Jag frstr och nskar g vidare"})]})]})]})]}),a.jsxs("form",{onSubmit:ee,className:"p-8 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase ml-1",children:"Vem vill du kontakta?"}),a.jsxs("select",{value:y.type,onChange:V=>w({...y,type:V.target.value}),className:"w-full bg-slate-50 dark:bg-[#131314] border-none rounded-2xl p-4 focus:ring-2 focus:ring-brand-teal transition-all",children:[a.jsx("option",{value:"CURATOR",children:"Skolkurator"}),a.jsx("option",{value:"NURSE",children:"Skolskterska"}),a.jsx("option",{value:"DOCTOR",children:"Skollkare"}),a.jsx("option",{value:"OTHER",children:"Hlsoteamet (Allmnt)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase ml-1",children:"mne (Frivilligt)"}),a.jsx("input",{type:"text",value:y.subject,onChange:V=>w({...y,subject:V.target.value}),placeholder:"T.ex. Behver prata, fundering kring hlsa...",className:"w-full bg-slate-50 dark:bg-[#131314] border-none rounded-2xl p-4 focus:ring-2 focus:ring-brand-teal transition-all"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase ml-1",children:"Ditt meddelande"}),a.jsx("textarea",{required:!0,rows:5,value:y.message,onChange:V=>w({...y,message:V.target.value}),placeholder:"Bertta lite kort om vad du vill ha hjlp med...",className:"w-full bg-slate-50 dark:bg-[#131314] border-none rounded-2xl p-4 focus:ring-2 focus:ring-brand-teal transition-all resize-none"})]}),a.jsx("div",{className:"flex justify-end gap-4 pt-4",children:a.jsxs("button",{type:"submit",disabled:k||!d,className:"bg-brand-teal hover:bg-brand-teal-dark disabled:opacity-50 disabled:grayscale text-white px-8 py-3 rounded-xl font-bold shadow-lg shadow-brand-teal/20 transition-all flex items-center gap-2",children:[k?a.jsx(Tt,{className:"animate-spin"}):a.jsx(Wr,{size:18}),"Skicka meddelande"]})})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold flex items-center gap-3 ml-2 text-slate-700 dark:text-slate-300",children:[a.jsx(Tt,{className:"text-slate-400"}),"Tidigare renden"]}),h?a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-3xl border border-slate-100 dark:border-white/5 shadow-xl overflow-hidden animate-in slide-in-from-right-4",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-white/5 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition-colors",children:a.jsx(or,{className:"rotate-180",size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg",children:h.subject||"rende #"+h.id}),a.jsxs("span",{className:"text-xs text-slate-400",children:["Kontakttyp: ",h.type]})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider ${h.status==="PENDING"?"bg-amber-100 text-amber-700":h.status==="ACTIVE"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:h.status==="PENDING"?"Mottagen":h.status==="ACTIVE"?"Pgende":"Avslutad"})]}),a.jsxs("div",{className:"h-[400px] overflow-y-auto p-6 space-y-4 bg-slate-50/50 dark:bg-black/10",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs("div",{className:"bg-brand-teal text-white p-4 rounded-2xl rounded-tr-none max-w-[80%] shadow-sm",children:[a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:h.message}),a.jsx("p",{className:"text-[10px] mt-2 opacity-70 text-right",children:new Date(h.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),m?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-brand-teal"})}):g.map(V=>a.jsx("div",{className:`flex ${V.sender.id===t.id?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`p-4 rounded-2xl max-w-[80%] shadow-sm ${V.sender.id===t.id?"bg-brand-teal text-white rounded-tr-none":"bg-white dark:bg-white/5 text-slate-800 dark:text-white rounded-tl-none border border-slate-100 dark:border-white/5"}`,children:[a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:V.content}),a.jsxs("p",{className:`text-[10px] mt-2 opacity-70 ${V.sender.id===t.id?"text-right":"text-left"}`,children:[V.sender.id!==t.id&&a.jsx("span",{className:"font-bold mr-1",children:"Hlsoteamet "}),new Date(V.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})},V.id))]}),a.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-white/5",children:a.jsxs("form",{onSubmit:R,className:"flex gap-2",children:[a.jsx("input",{type:"text",value:b,onChange:V=>v(V.target.value),placeholder:"Skriv ett meddelande...",className:"flex-1 bg-slate-50 dark:bg-white/5 border-none rounded-xl px-4 py-3 focus:ring-2 focus:ring-brand-teal"}),a.jsx("button",{type:"submit",disabled:!b.trim(),className:"p-3 bg-brand-teal text-white rounded-xl hover:bg-brand-teal-dark disabled:opacity-50 transition-colors",children:a.jsx(Wr,{size:20})})]})})]}):a.jsx(a.Fragment,{children:e.length===0?a.jsxs("div",{className:"bg-white/50 dark:bg-[#1E1F20]/50 rounded-3xl p-12 border border-dashed border-slate-200 dark:border-white/10 text-center",children:[a.jsx(Xl,{className:"mx-auto mb-4 text-slate-300",size:48}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Du har inga tidigare kontaktfrfrgningar."})]}):a.jsx("div",{className:"grid gap-4",children:e.map(V=>a.jsxs("button",{onClick:()=>{f(V),$(V.id)},className:"w-full text-left bg-white dark:bg-[#1E1F20] rounded-2xl p-5 border border-slate-100 dark:border-white/5 shadow-sm hover:shadow-md transition-all group flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`p-3 rounded-xl ${V.status==="PENDING"?"bg-amber-100 dark:bg-amber-900/20 text-amber-600":V.status==="ACTIVE"?"bg-blue-100 dark:bg-blue-900/20 text-blue-600":"bg-green-100 dark:bg-green-900/20 text-green-600"}`,children:V.status==="PENDING"?a.jsx(Tt,{size:20}):V.status==="ACTIVE"?a.jsx(Yl,{size:20}):a.jsx(ci,{size:20})}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white capitalize",children:[V.type.toLowerCase()," - ",V.subject||"Inget mne"]}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["Skapad: ",new Date(V.createdAt).toLocaleDateString("sv-SE")]})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"text-right hidden sm:block",children:a.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider ${V.status==="PENDING"?"bg-amber-100 text-amber-700":V.status==="ACTIVE"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:V.status==="PENDING"?"Mottagen":V.status==="ACTIVE"?"Pgende":"Avslutad"})}),a.jsx(or,{className:"text-slate-300 group-hover:text-brand-teal group-hover:translate-x-1 transition-all",size:20})]})]},V.id))})})]})}):a.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:[_&&a.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 p-8 rounded-3xl border border-rose-200 dark:border-rose-800/30 space-y-4 shadow-lg shadow-rose-500/5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold text-rose-700 dark:text-rose-400 flex items-center gap-3",children:[a.jsx(Er,{className:"w-6 h-6"}),"Du r sjukanmld"]}),a.jsx("span",{className:"px-3 py-1 bg-rose-500 text-white rounded-lg text-[10px] font-black uppercase tracking-wider",children:"Aktiv"})]}),a.jsxs("div",{className:"text-rose-600 dark:text-rose-300 space-y-2",children:[a.jsxs("p",{className:"flex items-center gap-3 font-medium",children:[a.jsx(zt,{className:"w-5 h-5 opacity-60"}),"Frn: ",_.startDate,_.endDate?`  Till: ${_.endDate}`:" (tills vidare)"]}),_.reason&&a.jsxs("p",{className:"flex items-center gap-3 italic",children:[a.jsx(xt,{className:"w-5 h-5 opacity-60"}),'"',_.reason,'"']})]}),a.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-black/20 text-rose-600 border border-rose-200 dark:border-rose-800/30 rounded-2xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-all shadow-sm",children:[a.jsx(eo,{size:18}),"Friskanml mig / Avbryt"]})]}),!_&&a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] p-8 rounded-3xl border border-slate-100 dark:border-white/5 shadow-xl space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-rose-500/10 rounded-xl text-rose-500",children:a.jsx(ky,{size:24})}),a.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Anml sjukdom"})]}),a.jsxs("form",{onSubmit:B,className:"space-y-6 text-slate-800 dark:text-white",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase ml-1",children:"Startdatum *"}),a.jsx("input",{type:"date",value:z.startDate,onChange:V=>M({...z,startDate:V.target.value}),className:"w-full bg-slate-50 dark:bg-[#131314] border-none rounded-2xl p-4 focus:ring-2 focus:ring-rose-500 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase ml-1",children:"Berknat Slut (valfritt)"}),a.jsx("input",{type:"date",value:z.endDate,onChange:V=>M({...z,endDate:V.target.value}),className:"w-full bg-slate-50 dark:bg-[#131314] border-none rounded-2xl p-4 focus:ring-2 focus:ring-rose-500 transition-all"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase ml-1",children:"Anledning (valfritt)"}),a.jsx("textarea",{value:z.reason,onChange:V=>M({...z,reason:V.target.value}),placeholder:"T.ex. influensa, lkarbesk...",rows:2,className:"w-full bg-slate-50 dark:bg-[#131314] border-none rounded-2xl p-4 focus:ring-2 focus:ring-rose-500 transition-all resize-none"})]}),a.jsxs("button",{type:"submit",disabled:F,className:"w-full sm:w-auto bg-rose-500 hover:bg-rose-600 disabled:opacity-50 text-white px-10 py-4 rounded-2xl font-black shadow-xl shadow-rose-500/20 transition-all flex items-center justify-center gap-2",children:[a.jsx(ky,{size:20}),F?"Skickar...":"Sjukanml mig"]})]})]}),A.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold flex items-center gap-3 ml-2 text-slate-700 dark:text-slate-300",children:[a.jsx(Tt,{className:"text-slate-400"}),"Historik"]}),a.jsx("div",{className:"grid gap-3",children:A.map(V=>a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-2xl p-4 border border-slate-100 dark:border-white/5 shadow-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`p-2 rounded-lg ${V.status==="ACTIVE"?"bg-rose-100 text-rose-600":"bg-slate-100 text-slate-500"}`,children:a.jsx(ky,{size:16})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:[V.startDate,V.endDate?`  ${V.endDate}`:""]}),V.reason&&a.jsx("p",{className:"text-[10px] text-slate-400 font-medium italic truncate max-w-[200px]",children:V.reason})]})]}),a.jsx("span",{className:`px-2 py-0.5 rounded-lg text-[10px] font-black uppercase tracking-wider ${V.status==="ACTIVE"?"bg-rose-100 text-rose-700":"bg-slate-100 text-slate-600"}`,children:V.status==="ACTIVE"?"Aktiv":"Avslutad"})]},V.id))})]})]})}),a.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[a.jsxs("div",{className:"bg-brand-teal text-white rounded-3xl p-6 shadow-xl shadow-brand-teal/20",children:[a.jsx("h3",{className:"font-black uppercase tracking-wider mb-4 border-b border-white/20 pb-2",children:"Hjlplinjer"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 hover:bg-white/15 transition-all",children:[a.jsx("p",{className:"text-xs font-bold text-white/60 mb-1 uppercase",children:"BRIS (BUP)"}),a.jsx("p",{className:"text-xl font-black",children:"116 111"}),a.jsx("p",{className:"text-xs opacity-70 mt-1",children:"ppet dygnet runt"})]}),a.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 hover:bg-white/15 transition-all",children:[a.jsx("p",{className:"text-xs font-bold text-white/60 mb-1 uppercase",children:"Jourhavande medmnniska"}),a.jsx("p",{className:"text-xl font-black",children:"08  702 16 80"}),a.jsx("p",{className:"text-xs opacity-70 mt-1",children:"Kl 21:00  06:00 varje kvll"})]}),a.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 hover:bg-white/15 transition-all",children:[a.jsx("p",{className:"text-xs font-bold text-white/60 mb-1 uppercase",children:"Vid akuta lgen"}),a.jsx("p",{className:"text-xl font-black",children:"112"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-3xl p-6 border border-slate-100 dark:border-white/5 space-y-4",children:[a.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[a.jsx(gd,{className:"text-brand-teal",size:18}),"Din trygghet"]}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-relaxed",children:"Systemet loggar aldrig dina meddelanden till rektorer eller lrare. Endast den specifika personen i hlsoteamet du har valt fr lsa vad du skriver."}),a.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-white/5 rounded-2xl flex items-center gap-3",children:[a.jsx(Mn,{className:"text-brand-teal",size:16}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-tight text-slate-400",children:"E2E Krypterad data"})]})]})]})]})]})},wlt=()=>{const[t,e]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(null),[o,l]=N.useState(!1),[c,d]=N.useState([]),[u,h]=N.useState(!1),[f,g]=N.useState(""),[x,m]=N.useState(!1);N.useEffect(()=>{p()},[]);const p=async()=>{try{const w=await O.support.getWellbeingInbox();e(w)}catch{Ae.error("Kunde inte hmta inboxen.")}finally{n(!1)}},b=async(w,k)=>{l(!0);try{await O.support.updateWellbeingStatus(w,k),Ae.success("Status uppdaterad."),p(),(s==null?void 0:s.id)===w&&i({...s,status:k})}catch{Ae.error("Kunde inte uppdatera status.")}finally{l(!1)}},v=async w=>{h(!0);try{const k=await O.support.getWellbeingMessages(w);d(k)}catch{Ae.error("Kunde inte hmta meddelanden.")}finally{h(!1)}},y=async w=>{if(w.preventDefault(),!!f.trim()){m(!0);try{await O.support.sendWellbeingMessage(s.id,f),g(""),v(s.id),p()}catch{Ae.error("Kunde inte skicka svar.")}finally{m(!1)}}};return r?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-teal"})}):a.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-brand-teal text-white rounded-2xl shadow-lg shadow-brand-teal/20",children:a.jsx(Qi,{})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white uppercase tracking-tight",children:"E-hlsa Inbox"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Hantera inkommande kontaktfrfrgningar frn elever"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),a.jsx("input",{type:"text",placeholder:"Sk rende...",className:"pl-10 pr-4 py-2 bg-white dark:bg-[#1E1F20] border border-slate-200 dark:border-white/5 rounded-xl focus:ring-2 focus:ring-brand-teal transition-all outline-none"})]}),a.jsx("button",{className:"p-2 bg-white dark:bg-[#1E1F20] border border-slate-200 dark:border-white/5 rounded-xl text-slate-500 hover:text-brand-teal transition-all",children:a.jsx(cm,{size:20})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[a.jsx("div",{className:"lg:col-span-5 space-y-4",children:t.length===0?a.jsxs("div",{className:"bg-white/50 dark:bg-[#1E1F20]/50 rounded-3xl p-12 text-center border border-dashed border-slate-200 dark:border-white/10",children:[a.jsx(ci,{className:"mx-auto mb-4 text-green-500",size:48}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Inboxen r tom! Alla renden r hanterade."})]}):t.map(w=>a.jsxs("button",{onClick:()=>{i(w),v(w.id)},className:`w-full text-left p-5 rounded-2xl border transition-all flex items-center justify-between group ${(s==null?void 0:s.id)===w.id?"bg-brand-teal text-white border-brand-teal shadow-xl shadow-brand-teal/20":"bg-white dark:bg-[#1E1F20] border-slate-100 dark:border-white/5 hover:border-brand-teal/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/10 dark:bg-white/5 rounded-xl flex items-center justify-center",children:a.jsx(jr,{size:24,className:(s==null?void 0:s.id)===w.id?"text-white":"text-slate-400"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("h4",{className:"font-bold truncate",children:[w.student.firstName," ",w.student.lastName]}),a.jsxs("p",{className:`text-xs ${(s==null?void 0:s.id)===w.id?"text-white/70":"text-slate-400"} font-medium`,children:[w.type,"  ",new Date(w.createdAt).toLocaleDateString("sv-SE")]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-black uppercase ${w.status==="PENDING"?(s==null?void 0:s.id)===w.id?"bg-white/20":"bg-amber-100 text-amber-700":(s==null?void 0:s.id)===w.id?"bg-white/20":"bg-blue-100 text-blue-700"}`,children:w.status==="PENDING"?"Nytt":"Pgr"}),a.jsx(or,{size:18,className:(s==null?void 0:s.id)===w.id?"text-white":"text-slate-300"})]})]},w.id))}),a.jsx("div",{className:"lg:col-span-7 h-full",children:s?a.jsxs("div",{className:"bg-white dark:bg-[#1E1F20] rounded-3xl border border-slate-100 dark:border-white/5 shadow-xl flex flex-col h-[700px] overflow-hidden animate-in fade-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-white/5 flex items-center justify-between bg-slate-50/50 dark:bg-white/5 shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-lg flex items-center gap-3",children:[a.jsx(q0,{className:"text-brand-teal",size:20}),s.subject||"Begran om kontakt"]}),a.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Elev: ",s.student.firstName," ",s.student.lastName]})]}),a.jsx("div",{className:"flex items-center gap-3",children:s.status!=="CLOSED"&&a.jsx("button",{onClick:()=>b(s.id,"CLOSED"),disabled:o,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-green-500/20 transition-all",children:"Avsluta"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50/30 dark:bg-black/10",children:[a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"p-4 bg-white dark:bg-white/5 rounded-2xl border border-slate-100 dark:border-white/5 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3 pb-3 border-b border-slate-100 dark:border-white/5",children:[a.jsx("div",{className:"p-2 bg-brand-teal/10 text-brand-teal rounded-lg",children:a.jsx(jr,{size:16})}),a.jsx("span",{className:"text-sm font-bold",children:"Beskrivning frn elev"})]}),a.jsxs("p",{className:"text-slate-600 dark:text-slate-300 italic whitespace-pre-wrap leading-relaxed",children:['"',s.message,'"']}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-3 text-right",children:["Skapad: ",new Date(s.createdAt).toLocaleString("sv-SE")]})]})}),a.jsx("div",{className:"space-y-4",children:u?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-teal"})}):c.map(w=>a.jsx("div",{className:`flex ${w.sender.id!==s.student.id?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`p-4 rounded-2xl max-w-[85%] shadow-sm ${w.sender.id!==s.student.id?"bg-blue-600 text-white rounded-tr-none":"bg-white dark:bg-white/5 text-slate-800 dark:text-white rounded-tl-none border border-slate-100 dark:border-white/5"}`,children:[a.jsx("div",{className:"flex items-center gap-2 mb-1.5",children:a.jsx("span",{className:"text-[10px] font-bold opacity-80",children:w.sender.id!==s.student.id?"Personal":"Elev"})}),a.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:w.content}),a.jsx("p",{className:`text-[10px] mt-2 opacity-70 ${w.sender.id!==s.student.id?"text-right":"text-left"}`,children:new Date(w.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},w.id))})]}),a.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-white/5 bg-white dark:bg-[#1E1F20] shrink-0",children:[a.jsxs("form",{onSubmit:y,className:"flex gap-4",children:[a.jsx("textarea",{value:f,onChange:w=>g(w.target.value),placeholder:"Skriv ett svar till eleven...",rows:1,className:"flex-1 bg-slate-50 dark:bg-white/5 border-none rounded-2xl px-6 py-4 focus:ring-2 focus:ring-brand-teal transition-all resize-none overflow-hidden",style:{minHeight:"56px"}}),a.jsxs("button",{type:"submit",disabled:!f.trim()||x,className:"h-14 px-8 bg-brand-teal text-white rounded-2xl font-bold shadow-lg shadow-brand-teal/20 hover:bg-brand-teal-dark disabled:opacity-50 transition-all flex items-center gap-2",children:[a.jsx(Wr,{className:x?"animate-spin":"",size:20}),a.jsx("span",{children:"Svara"})]})]}),a.jsxs("div",{className:"mt-4 flex items-center gap-3 text-amber-600 dark:text-amber-400",children:[a.jsx(Mn,{size:14}),a.jsx("p",{className:"text-[10px] font-medium leading-none",children:"Meddelandet krypteras automatiskt innan det skickas till eleven."})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-12 bg-white/30 dark:bg-[#1E1F20]/30 rounded-3xl border border-dashed border-slate-200 dark:border-white/10 text-slate-400",children:[a.jsx(Qi,{size:80,className:"mb-6 opacity-10"}),a.jsx("h3",{className:"text-xl font-bold text-slate-500 dark:text-slate-300",children:"Vlj ett rende"}),a.jsx("p",{className:"text-center mt-2 max-w-xs",children:"Frhandsvisningen visas hr nr du vljer ett rende frn listan till vnster."})]})})]})]})},jlt=()=>{var p;const{currentUser:t}=At(),[e,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState(null),[d,u]=N.useState(!1),[h,f]=N.useState({period:"VT 2026",title:""});N.useEffect(()=>{g()},[]);const g=async()=>{try{const b=await O.get("/reports");r(b)}catch(b){console.error(b),Ae.error("Kunde inte ladda rapporter")}finally{s(!1)}},x=async()=>{if(!h.period){Ae.error("Vnligen ange en period");return}o(!0);try{const b=await O.post("/reports/generate",{...h,authorId:t.id});Ae.success("Rapport genererad!"),r([b,...e]),c(b),u(!1)}catch(b){console.error(b),Ae.error("Generering misslyckades")}finally{o(!1)}},m=async(b,v)=>{if(v.stopPropagation(),!!window.confirm("r du sker p att du vill ta bort denna rapport?"))try{await O.delete(`/reports/${b}`),r(e.filter(y=>y.id!==b)),(l==null?void 0:l.id)===b&&c(null),Ae.success("Rapport borttagen")}catch{Ae.error("Kunde inte ta bort rapport")}};return a.jsxs("div",{className:"flex h-[calc(100vh-140px)] gap-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"w-80 bg-white dark:bg-[#1c1c1e] rounded-[2rem] border border-gray-100 dark:border-gray-800 flex flex-col shadow-sm",children:[a.jsxs("div",{className:"p-6 border-b border-gray-50 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white mt-1",children:"Arkiv"}),a.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200 dark:shadow-none",children:a.jsx(jt,{size:20})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(gr,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),a.jsx("input",{placeholder:"Sk i arkivet...",className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-xl pl-10 pr-4 py-2 text-sm focus:ring-2 focus:ring-indigo-500 transition-all"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar",children:n?a.jsx("div",{className:"flex justify-center p-8",children:a.jsx(ft,{className:"animate-spin text-indigo-500"})}):e.length===0?a.jsxs("div",{className:"text-center p-8",children:[a.jsx(xt,{className:"mx-auto text-gray-300 mb-2",size:32}),a.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Inga rapporter n"})]}):e.map(b=>a.jsxs("div",{onClick:()=>c(b),className:`p-4 rounded-2xl cursor-pointer transition-all border group ${(l==null?void 0:l.id)===b.id?"bg-indigo-50 dark:bg-indigo-900/10 border-indigo-200 dark:border-indigo-800":"bg-transparent border-transparent hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("h3",{className:`text-sm font-black truncate max-w-[180px] ${(l==null?void 0:l.id)===b.id?"text-indigo-700 dark:text-indigo-400":"text-gray-900 dark:text-white"}`,children:b.title}),a.jsx("button",{onClick:v=>m(b.id,v),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-all",children:a.jsx(qt,{size:14})})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:[a.jsx(zt,{size:10})," ",new Date(b.createdAt).toLocaleDateString()]}),a.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${b.status==="FINAL"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:b.status})]})]},b.id))})]}),a.jsx("div",{className:"flex-1 bg-white dark:bg-[#1c1c1e] rounded-[2rem] border border-gray-100 dark:border-gray-800 flex flex-col shadow-sm overflow-hidden",children:l?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-8 border-b border-gray-50 dark:border-gray-800 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/20",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:l.title}),a.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-widest",children:[a.jsx(Tt,{size:14})," ",l.period]}),a.jsx("span",{className:"text-xs text-gray-400 font-bold",children:""}),a.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:["Frfattare: ",((p=l.author)==null?void 0:p.fullName)||"System"]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-xs font-bold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all",children:[a.jsx(Rn,{size:16})," Exportera PDF"]}),l.status==="DRAFT"&&a.jsxs("button",{onClick:async()=>{const b=await O.patch(`/reports/${l.id}/status`,{status:"FINAL"});r(e.map(v=>v.id===b.id?b:v)),c(b),Ae.success("Rapport arkiverad som slutgiltig")},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl text-xs font-bold hover:bg-indigo-700 transition-all",children:[a.jsx(nr,{size:16})," Slutfr & Arkivera"]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-12 prose dark:prose-invert max-w-none prose-headings:font-black prose-headings:tracking-tight custom-scrollbar",children:[a.jsx(bW,{children:l.content}),a.jsx("div",{className:"mt-12 pt-8 border-t border-gray-100 dark:border-gray-800 pb-12",children:a.jsxs("details",{className:"group",children:[a.jsxs("summary",{className:"flex items-center gap-2 text-xs font-black text-gray-400 uppercase tracking-[0.2em] cursor-pointer hover:text-indigo-500 transition-colors list-none",children:[a.jsx(or,{size:14,className:"group-open:rotate-90 transition-transform"}),"Visa underliggande data-snapshot"]}),a.jsx("div",{className:"mt-4 p-6 bg-gray-50 dark:bg-gray-800 rounded-2xl",children:a.jsx("pre",{className:"text-[10px] text-gray-500 overflow-x-auto",children:JSON.stringify(JSON.parse(l.dataSnapshot||"{}"),null,2)})})]})})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-12",children:[a.jsx("div",{className:"w-20 h-20 bg-indigo-50 dark:bg-indigo-900/10 rounded-3xl flex items-center justify-center text-indigo-600 dark:text-indigo-400 mb-6",children:a.jsx(o5,{size:40})}),a.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:"Vlj en rapport"}),a.jsx("p",{className:"text-gray-500 max-w-sm font-medium",children:"Vlj en rapport frn arkivet fr att lsa analysen eller generera en ny fr att f insikter om skolans status."})]})}),d&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm",onClick:()=>!i&&u(!1)}),a.jsxs("div",{className:"bg-white dark:bg-[#1c1c1e] w-full max-w-md rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 pb-0",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-50 dark:bg-indigo-900/10 rounded-2xl flex items-center justify-center text-indigo-600 dark:text-indigo-400 mb-6",children:a.jsx(jt,{size:32})}),a.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"Ny ledningsrapport"}),a.jsx("p",{className:"text-sm text-gray-500 font-medium mt-1",children:"AI kommer att analysera all systemdata fr att skapa rapporten."})]}),a.jsxs("div",{className:"p-8 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1",children:"Period (t.ex. VT 2026 / Vecka 12)"}),a.jsx("input",{className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-2xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 transition-all font-bold",value:h.period,onChange:b=>f({...h,period:b.target.value}),placeholder:"VT 2026",disabled:i})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1",children:"Titel (Valfri)"}),a.jsx("input",{className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-2xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 transition-all font-bold",value:h.title,onChange:b=>f({...h,title:b.target.value}),placeholder:"Lmna tom fr autogenererad",disabled:i})]}),a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-2xl flex gap-3 border border-amber-100 dark:border-amber-900/30",children:[a.jsx(Er,{className:"text-amber-600 shrink-0",size:20}),a.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 font-medium leading-relaxed",children:"Detta kan ta upp till 30 sekunder. AI:n sammanstller data frn SKA, elevhlsa, nrvaro och betyg."})]})]}),a.jsxs("div",{className:"p-8 bg-gray-50 dark:bg-gray-800/50 flex gap-4 mt-4",children:[a.jsx("button",{onClick:()=>u(!1),disabled:i,className:"flex-1 px-4 py-3 bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-2xl font-bold text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all border border-gray-100 dark:border-gray-600",children:"Avbryt"}),a.jsx("button",{onClick:x,disabled:i,className:"flex-[2] px-4 py-3 bg-indigo-600 text-white rounded-2xl font-bold text-sm hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx(ft,{className:"animate-spin",size:18})," Genererar..."]}):"Brja generera"})]})]})]})]})},Wt=({children:t,roles:e,permission:r})=>{var o,l,c,d,u;const{currentUser:n,licenseStatus:s}=At();if(s==="checking")return a.jsxs("div",{className:"h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-[#131314] text-gray-400",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-2"}),a.jsx("span",{className:"text-sm",children:"Verifierar sytemstatus..."})]});if(!n)return a.jsx(Sl,{to:"/login",replace:!0});if(r&&!(((o=n.role)==null?void 0:o.isSuperAdmin)||((l=n.role)==null?void 0:l.superAdmin)||((d=(c=n.role)==null?void 0:c.permissions)==null?void 0:d.includes(r))))return a.jsx(Sl,{to:"/",replace:!0});const i=(((u=n.role)==null?void 0:u.name)||n.role||"").toUpperCase();if(e){const h=e.map(g=>g.toUpperCase());if(!(h.includes(i)||i==="ROLE_ADMIN"&&h.includes("ADMIN")||i==="ADMIN"&&h.includes("ROLE_ADMIN")))return a.jsx(Sl,{to:"/",replace:!0})}return t},Nlt=({currentUser:t})=>a.jsx(Stt,{currentUser:t,myCourses:(t==null?void 0:t.courses)||[],upcomingAssignments:[],users:[],allCourses:[],documents:[],ungradedSubmissions:[],handleToggleCourseStatus:()=>{}}),_lt=()=>{const{currentUser:t,logout:e,licenseLocked:r,licenseStatus:n,refreshUser:s}=At(),{isModuleActive:i}=oa();return r||n==="locked"?a.jsx(git,{}):a.jsx(mit,{currentUser:t,children:a.jsxs(jfe,{children:[a.jsx(It,{path:"/login",element:a.jsx(axe,{})}),a.jsx(It,{path:"/register-org",element:a.jsx(sxe,{})}),a.jsx(It,{path:"/oauth2/callback",element:a.jsx(ixe,{})}),a.jsx(It,{path:"/lti-success",element:a.jsx(oxe,{})}),a.jsx(It,{path:"/lti/deep-link",element:a.jsx(lxe,{})}),a.jsx(It,{path:"/",element:t?a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(Nlt,{currentUser:t})})}):a.jsx(nxe,{})}),a.jsx(It,{path:"/course/:id",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(nit,{currentUser:t})})})}),a.jsx(It,{path:"/admin",element:a.jsx(Wt,{roles:["ADMIN"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(Fot,{})})})}),a.jsx(It,{path:"/principal/dashboard",element:a.jsx(Wt,{roles:["ADMIN","ROLE_REKTOR","REKTOR"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(yW,{})})})}),a.jsx(It,{path:"/communication",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(Ow,{})})})}),a.jsx(It,{path:"/principal/structure",element:a.jsx(Wt,{roles:["ADMIN","ROLE_REKTOR","REKTOR"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(eee,{})})})}),a.jsx(It,{path:"/principal/governance",element:a.jsx(Wt,{roles:["ADMIN","ROLE_REKTOR","REKTOR"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(flt,{})})})}),a.jsx(It,{path:"/principal/quality",element:a.jsx(Wt,{roles:["ADMIN","ROLE_REKTOR","REKTOR","PRINCIPAL"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(mlt,{})})})}),a.jsx(It,{path:"/principal/staffing",element:a.jsx(Wt,{roles:["ADMIN","ROLE_REKTOR","REKTOR","PRINCIPAL"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(plt,{})})})}),a.jsx(It,{path:"/principal/reports",element:a.jsx(Wt,{roles:["ADMIN","ROLE_REKTOR","REKTOR","PRINCIPAL"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(xlt,{})})})}),a.jsx(It,{path:"/principal/management-reports",element:a.jsx(Wt,{roles:["ADMIN","ROLE_REKTOR","REKTOR","PRINCIPAL"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(jlt,{})})})}),a.jsx(It,{path:"/principal/tools",element:a.jsx(Wt,{roles:["ADMIN","ROLE_REKTOR","REKTOR","PRINCIPAL"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(glt,{})})})}),a.jsx(It,{path:"/health-dashboard",element:a.jsx(Wt,{roles:["ADMIN","ROLE_HALSOTEAM","HALSOTEAM","ROLE_REKTOR","REKTOR","PRINCIPAL"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(uQ,{})})})}),a.jsx(It,{path:"/health-dashboard/survey/new",element:a.jsx(Wt,{roles:["ADMIN","ROLE_HALSOTEAM","HALSOTEAM"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(AF,{})})})}),a.jsx(It,{path:"/health-dashboard/survey/edit/:id",element:a.jsx(Wt,{roles:["ADMIN","ROLE_HALSOTEAM","HALSOTEAM"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(AF,{})})})}),a.jsx(It,{path:"/health-dashboard/survey/results/:distributionId",element:a.jsx(Wt,{roles:["ADMIN","ROLE_HALSOTEAM","HALSOTEAM","ROLE_REKTOR","REKTOR"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(vlt,{})})})}),a.jsx(It,{path:"/survey/:distributionId",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(ylt,{})})})}),a.jsx(It,{path:"/wellbeing-center",element:a.jsx(Wt,{roles:["ADMIN","STUDENT","ROLE_STUDENT","REKTOR","ROLE_REKTOR"],children:i("WELLBEING_CENTER")?a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(klt,{})}):a.jsx(Sl,{to:"/",replace:!0})})}),a.jsx(It,{path:"/wellbeing-center/inbox",element:a.jsx(Wt,{roles:["ADMIN","HALSOTEAM","ROLE_HALSOTEAM"],children:i("WELLBEING_CENTER")?a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(wlt,{})}):a.jsx(Sl,{to:"/",replace:!0})})}),a.jsx(It,{path:"/admin/gamification-management",element:a.jsx(Wt,{roles:["ADMIN"],children:i("GAMIFICATION")?a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(slt,{})}):a.jsx(Sl,{to:"/admin",replace:!0})})}),a.jsx(It,{path:"/system",element:a.jsx(Wt,{roles:["ADMIN","TEACHER"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(LJ,{})})})}),a.jsx(It,{path:"/enterprise/whitelabel",element:a.jsx(Wt,{roles:["ADMIN"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(tlt,{})})})}),a.jsx(It,{path:"/admin/community",element:a.jsx(Wt,{roles:["ADMIN"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(nlt,{})})})}),a.jsx(It,{path:"/calendar",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(hit,{})})})}),a.jsx(It,{path:"/catalog",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(kot,{})})})}),a.jsx(It,{path:"/my-courses",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(sit,{})})})}),a.jsx(It,{path:"/documents",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(Sot,{currentUser:t})})})}),a.jsx(It,{path:"/ebooks",element:a.jsx(Wt,{permission:"ACCESS_EBOOKS",children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(clt,{})})})}),a.jsx(It,{path:"/analytics",element:a.jsx(Wt,{roles:["ADMIN","TEACHER"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(Qot,{})})})}),a.jsx(It,{path:"/resources",element:a.jsx(Wt,{roles:["TEACHER","ADMIN"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(Wot,{})})})}),a.jsx(It,{path:"/ai-quiz",element:a.jsx(Wt,{roles:["TEACHER","ADMIN"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(olt,{})})})}),a.jsx(It,{path:"/shop",element:a.jsx(Wt,{permission:"ACCESS_SHOP",children:i("GAMIFICATION")?a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(fit,{})}):a.jsx(Sl,{to:"/",replace:!0})})}),a.jsx(It,{path:"/profile",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(yot,{currentUser:t,showMessage:o=>alert(o),refreshUser:s})})})}),a.jsx(It,{path:"/profile/:userId",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(vot,{currentUser:t,showMessage:o=>alert(o)})})})}),a.jsx(It,{path:"/certificate/:courseId",element:a.jsx(Wt,{children:a.jsx(elt,{})})}),a.jsx(It,{path:"/support",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(rlt,{currentUser:t})})})}),a.jsx(It,{path:"/evaluations/manage",element:a.jsx(Wt,{roles:["TEACHER","ADMIN"],children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(dlt,{})})})}),a.jsx(It,{path:"/evaluations/student/:instanceId",element:a.jsx(Wt,{children:a.jsx(Yt,{currentUser:t,handleLogout:e,children:a.jsx(hlt,{})})})}),a.jsx(It,{path:"/community",element:a.jsx(Sl,{to:"/resources?tab=community",replace:!0})}),a.jsx(It,{path:"*",element:a.jsx(Sl,{to:"/",replace:!0})})]})})},Slt=()=>a.jsx(zfe,{children:a.jsx(Ufe,{children:a.jsx(Kfe,{children:a.jsx($fe,{children:a.jsx(Ffe,{children:a.jsx(vK,{children:a.jsxs(Ife,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[a.jsx(ije,{position:"top-right"}),a.jsx(Tit,{}),a.jsx(Oit,{}),a.jsx(_lt,{})]})})})})})})});rne.createRoot(document.getElementById("root")).render(a.jsx(bne,{i18n:jn,children:a.jsx(Slt,{})}))});export default Alt();
